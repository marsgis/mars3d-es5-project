/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.3.6
 * 编译日期：2022-04-22 16:04:54
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';function _0x44b9(_0x4f3430,_0x4ab1c3){var _0x5bedca=_0x5bed();return _0x44b9=function(_0x44b912,_0x414e7c){_0x44b912=_0x44b912-0x1d3;var _0x5d453c=_0x5bedca[_0x44b912];if(_0x44b9['hnZymR']===undefined){var _0x33a12b=function(_0x4d0b51){var _0x8c33d6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x31ce8f='',_0x5b290f='';for(var _0x2e76fb=0x0,_0x582030,_0x1472a5,_0x3c9a51=0x0;_0x1472a5=_0x4d0b51['charAt'](_0x3c9a51++);~_0x1472a5&&(_0x582030=_0x2e76fb%0x4?_0x582030*0x40+_0x1472a5:_0x1472a5,_0x2e76fb++%0x4)?_0x31ce8f+=String['fromCharCode'](0xff&_0x582030>>(-0x2*_0x2e76fb&0x6)):0x0){_0x1472a5=_0x8c33d6['indexOf'](_0x1472a5);}for(var _0x4af883=0x0,_0x4ca366=_0x31ce8f['length'];_0x4af883<_0x4ca366;_0x4af883++){_0x5b290f+='%'+('00'+_0x31ce8f['charCodeAt'](_0x4af883)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5b290f);};_0x44b9['SbfjzL']=_0x33a12b,_0x4f3430=arguments,_0x44b9['hnZymR']=!![];}var _0x1ffccd=_0x5bedca[0x0],_0x53e0ad=_0x44b912+_0x1ffccd,_0x234e47=_0x4f3430[_0x53e0ad];return!_0x234e47?(_0x5d453c=_0x44b9['SbfjzL'](_0x5d453c),_0x4f3430[_0x53e0ad]=_0x5d453c):_0x5d453c=_0x234e47,_0x5d453c;},_0x44b9(_0x4f3430,_0x4ab1c3);}var _0x619554=_0x44b9;(function(_0x50845c,_0x235f30){var _0x4415c2=_0x44b9,_0x447072=_0x50845c();while(!![]){try{var _0x2adb96=-parseInt(_0x4415c2(0x1e5))/0x1+parseInt(_0x4415c2(0x210))/0x2+-parseInt(_0x4415c2(0x22c))/0x3+parseInt(_0x4415c2(0x1d5))/0x4+parseInt(_0x4415c2(0x22d))/0x5*(-parseInt(_0x4415c2(0x217))/0x6)+parseInt(_0x4415c2(0x20f))/0x7*(parseInt(_0x4415c2(0x233))/0x8)+-parseInt(_0x4415c2(0x231))/0x9*(-parseInt(_0x4415c2(0x256))/0xa);if(_0x2adb96===_0x235f30)break;else _0x447072['push'](_0x447072['shift']());}catch(_0x2fb5f9){_0x447072['push'](_0x447072['shift']());}}}(_0x5bed,0xb2e47));function _interopNamespace(_0x4d0b51){var _0x13e474=_0x44b9;if(_0x4d0b51&&_0x4d0b51[_0x13e474(0x1e7)])return _0x4d0b51;var _0x8c33d6=Object['create'](null);return _0x4d0b51&&Object[_0x13e474(0x1e9)](_0x4d0b51)[_0x13e474(0x1f0)](function(_0x31ce8f){var _0x488afa=_0x13e474;if(_0x31ce8f!=='default'){var _0x5b290f=Object[_0x488afa(0x1f1)](_0x4d0b51,_0x31ce8f);Object['defineProperty'](_0x8c33d6,_0x31ce8f,_0x5b290f[_0x488afa(0x247)]?_0x5b290f:{'enumerable':!![],'get':function(){return _0x4d0b51[_0x31ce8f];}});}}),_0x8c33d6['default']=_0x4d0b51,_0x8c33d6;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337);function _0x5bed(){var _0x5a41e9=['y29UC3rYDwn0','quXxqvLt','ywrKtgf5zxi','x2HLyxq','ChvZAa','zMX5vg8','z2v0','Eg1HEa','Ew1HEa','zNvUy3rPB24','C2HHBq','Dw5KzwzPBMvK','C2HVDW','zM9YBwf0uMvJDgfUz2XL','x2DYyxbOAwm','y2fSBa','Eg1PBG','A2v5','z2v0t3DUuhjVCgvYDhLtEw1IB2XZ','y2XLyxi','CMvTB3zLtgf5zxi','mtbrz3PwugG','AxngB3jTyxq','u3rLBMnPBez1BMn0Aw9U','x2XHC3rFAgvHDerHDge','DMfSDwu','CM91BMq','C2v0uhjVDg90ExbLt2y','ChjVDg90ExbL','x3vWzgf0zvbVC2L0Aw9UC0HVB2S','x3bVC2L0Aw9UCW','yM9KEq','Bwf4','y29VCMrPBMf0zxm','z3jHCgHPyW','z3jLzw4','ndGZodu0mgvAu1nIqG','ChG7','zgvMAw5LuhjVCgvYDhK','CMvTB3zLr3jHCgHPyW','y29UDgfPBMvY','vKvsvevyx0zpuK1bva','AgvPz2H0','ywrKug9ZAxrPB24','x2DLDeHLyxrdyw52yxnjBwC','y29Uy2f0','BwLU','Dg9eyxrHvvjm','u3vWzxiGzxHWCMvZC2LVBIbTDxn0igvPDgHLCIbIzsbUDwXSig9YigeGzNvUy3rPB24','yxjJ','ywjZ','x2nYzwf0zuDYyxbOAwm','mte4otiXmenoBgPHzW','zw51BwvYywjSzq','x19LC01VzhvSzq','y29UzMLNDxjL','A2v5CW','y3jLyxrL','x2nYzwf0zufYy0DYyxbOAwm','uMvJDgfUz2XLuhjPBwL0AxzL','zNjVBurLz3jLzxm','BwLUq2fUDMfZu2L6zq','AgvHDfn0EwXL','zM9YrwfJAa','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','Ew1PBG','sgvHDeXHEwvY','AgvHDa','zgvMyxvSDfzHBhvL','x2XHEwvY','C3bSAxroDw0','ywrKr3jHCgHPyW','yxbWBhK','CMvNAxn0zxi','CMDIkdiXnIWYmtySmJe2kq','x3jLBMrLCMvY','r3jHCgHPy0XHEwvY','rgvYAxzLzcbJB25ZDhj1y3rVCNmGBwf5ig9UBhKGCMv0DxjUig9IAMvJDcbVCIb1BMrLzMLUzwq','Cg9ZAxrPB25Z','EwvSBg93','Bgf5zxi','x3jLy3rHBMDSzq','Bg5N','zNjVBunHy2HL','q2fYDgvZAwfUmG','u3rLBMnPBe9WzxjHDgLVBG','s0vfua','BwvYz2u','x21HCNmZzf9WCML2yxrL','D2LKDgG','CMvTB3zLq2HPBgq','zMX5vg9cEufUAw1HDgLVBKvUza','ug9PBNruCMfUCW','uMvJDgfUz2XL','mZC2nMjhvuXREa','mti1odiWmeXizhDUsa','B2jQzwn0','Bg9UBgf0mM1LCMnHDg9Y','z2v0uhjVDg90ExbLt2y','rwXSAxbZB2LKu3vYzMfJzufWCgvHCMfUy2u','BgvUz3rO','DMfSDwvpzG','mZbgB2rOywS','q29SB3i','x21cB3vUzhnnyxG','Aw1Hz2uVCg5N','CMfKAxvZ','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9YCW','yxr0CMLIDxrLihzLyZmGCg9ZAxrPB24ZreHPz2G7cIaGicaGicaGicbHDhrYAwj1DguGDMvJmYbWB3nPDgLVBJnetg93oWOGicaGicaGicaGyxr0CMLIDxrLihzLyZiGC3q7cIaGicaGicaGicbHDhrYAwj1DguGzMXVyxqGyMf0y2HjzdSkicaGicaGicaGihvUAwzVCM0GC2fTCgXLCJjeigj1BxbnyxbFmZSkicaGicaGicaGihzHCNLPBMCGDMvJmYb2x3bVC2L0Aw9Utum7cIaGicaGicaGicb2yxj5Aw5NihzLyZmGDL9WB3nPDgLVBKvdoWOGicaGicaGicaGDMfYEwLUzYb2zwmYihzFC3q7cGOGicaGicaGicaGDM9PzcbTywLUkcKkicaGicaGicaGihSkicaGicaGicaGicaGDMvJncbWid0Gy3PTx2nVBxb1DgvqB3nPDgLVBIGPoWOGicaGicaGicaGicb2x3bVC2L0Aw9UtumGpsbWB3nPDgLVBJnesgLNAcaRihbVC2L0Aw9Um0rmB3C7cIaGicaGicaGicaGihzFCg9ZAxrPB25fqYa9icHJEM1FBw9KzwXwAwv3uMvSyxrPDMvuB0v5zsaQihaPlNH5EJSkicaGicaGicaGicaGDL9ZDca9ihn0oWOGicaGicaGicaGicb2zwm0ignVBg9Yid0GDgv4DhvYztjekgj1BxbnyxbFmYWGDL9ZDcK7cIaGicaGicaGicaGigzSB2f0ignLBNrLCKj1BxaGpsbKAxn0yw5JzsH2zwmZkdaUmcKSy29SB3iUCMDIktSkicaGicaGicaGicaGDMvJmYb1CerPCIa9ig5VCM1HBgL6zsH2x3bVC2L0Aw9UtumUEhL6ktSkicaGicaGicaGicaGDMvJmYbKAxnqB3mGpsb1CerPCIaQignLBNrLCKj1BxaGkIa','yMX1CG','uKvqtefdrq','y29UC3rYDwn0B3i','ChG7cIaGicaGicaGAgvPz2H0oG','BwfYCZnKlwHLyxrTyxa','Cg9PBNrZ','zMXVB3i','twf0zxjPywW','vxrPBa','x19WCM90B19F','CMDIkdaSmcWWkq','C3r5Bgu','quXqsefFqKXftKq','Bwf4q2fUDMfZu2L6zq','mZeXmZu1ouv5CejTAG','otK1nJq1z2XVDvHw','x21HCa','zgLMzKHLAwDODa','y29UzMLNDxjHyMXL','nZqZndq4nMvMB09RyW','q2fUBM90ignHBgWGysbJBgfZCYbHCYbHigz1BMn0Aw9U','mtKXotjqDvDvsfq','z2v0uMvJDgfUz2XL','x2XHC3rFBujVDw5KCW','y2XPzw50sgvPz2H0','BwvYy2f0B3iYBg9UBgf0','zMLSDgvY','zgL2','tgf5zxjvDgLS','z3jHBNvSyxjPDhK','qMfZzuXHEwvY','B3b0Aw9UCW','Bgf0','uMvUzgvYu3rHDgu','y2fUDMfZ'];_0x5bed=function(){return _0x5a41e9;};return _0x5bed();}function ownKeys(_0x2e76fb,_0x582030){var _0x2f7c1c=_0x44b9,_0x1472a5=Object[_0x2f7c1c(0x1e9)](_0x2e76fb);if(Object[_0x2f7c1c(0x253)]){var _0x3c9a51=Object[_0x2f7c1c(0x253)](_0x2e76fb);_0x582030&&(_0x3c9a51=_0x3c9a51[_0x2f7c1c(0x238)](function(_0x4af883){return Object['getOwnPropertyDescriptor'](_0x2e76fb,_0x4af883)['enumerable'];})),_0x1472a5[_0x2f7c1c(0x245)][_0x2f7c1c(0x1f9)](_0x1472a5,_0x3c9a51);}return _0x1472a5;}function _objectSpread2(_0x4ca366){var _0x591b4b=_0x44b9;for(var _0x3ae299=0x1;_0x3ae299<arguments[_0x591b4b(0x215)];_0x3ae299++){var _0x297041=null!=arguments[_0x3ae299]?arguments[_0x3ae299]:{};_0x3ae299%0x2?ownKeys(Object(_0x297041),!0x0)['forEach'](function(_0x4154ed){_defineProperty(_0x4ca366,_0x4154ed,_0x297041[_0x4154ed]);}):Object[_0x591b4b(0x21c)]?Object['defineProperties'](_0x4ca366,Object[_0x591b4b(0x21c)](_0x297041)):ownKeys(Object(_0x297041))[_0x591b4b(0x1f0)](function(_0x51598b){var _0x7e33c9=_0x591b4b;Object[_0x7e33c9(0x1d7)](_0x4ca366,_0x51598b,Object[_0x7e33c9(0x1f1)](_0x297041,_0x51598b));});}return _0x4ca366;}function _classCallCheck(_0x50b723,_0x366111){var _0x569d94=_0x44b9;if(!(_0x50b723 instanceof _0x366111))throw new TypeError(_0x569d94(0x232));}function _defineProperties(_0x22569d,_0x2fb2f0){var _0x2e37a3=_0x44b9;for(var _0x53c660=0x0;_0x53c660<_0x2fb2f0['length'];_0x53c660++){var _0xbba4e1=_0x2fb2f0[_0x53c660];_0xbba4e1[_0x2e37a3(0x1e6)]=_0xbba4e1[_0x2e37a3(0x1e6)]||![],_0xbba4e1[_0x2e37a3(0x230)]=!![];if('value'in _0xbba4e1)_0xbba4e1['writable']=!![];Object[_0x2e37a3(0x1d7)](_0x22569d,_0xbba4e1[_0x2e37a3(0x252)],_0xbba4e1);}}function _createClass(_0x46489b,_0x345f89,_0x46f5bb){var _0x5e05f5=_0x44b9;if(_0x345f89)_defineProperties(_0x46489b[_0x5e05f5(0x25d)],_0x345f89);if(_0x46f5bb)_defineProperties(_0x46489b,_0x46f5bb);return Object[_0x5e05f5(0x1d7)](_0x46489b,_0x5e05f5(0x25d),{'writable':![]}),_0x46489b;}function _defineProperty(_0x703f34,_0x5c7100,_0x5d8f36){var _0x1c035e=_0x44b9;return _0x5c7100 in _0x703f34?Object[_0x1c035e(0x1d7)](_0x703f34,_0x5c7100,{'value':_0x5d8f36,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x703f34[_0x5c7100]=_0x5d8f36,_0x703f34;}function _inherits(_0x58c88d,_0x1f9b7f){var _0x120513=_0x44b9;if(typeof _0x1f9b7f!==_0x120513(0x24a)&&_0x1f9b7f!==null)throw new TypeError(_0x120513(0x1e1));_0x58c88d[_0x120513(0x25d)]=Object[_0x120513(0x1ea)](_0x1f9b7f&&_0x1f9b7f[_0x120513(0x25d)],{'constructor':{'value':_0x58c88d,'writable':!![],'configurable':!![]}}),Object['defineProperty'](_0x58c88d,_0x120513(0x25d),{'writable':![]});if(_0x1f9b7f)_setPrototypeOf(_0x58c88d,_0x1f9b7f);}function _getPrototypeOf(_0xe03945){var _0xd70822=_0x44b9;return _getPrototypeOf=Object['setPrototypeOf']?Object[_0xd70822(0x213)]:function _0x78c736(_0x355ada){var _0x510a90=_0xd70822;return _0x355ada[_0x510a90(0x227)]||Object['getPrototypeOf'](_0x355ada);},_getPrototypeOf(_0xe03945);}function _setPrototypeOf(_0x57b910,_0x3eb80a){var _0x457eff=_0x44b9;return _setPrototypeOf=Object[_0x457eff(0x25c)]||function _0x58eeca(_0x25e38e,_0x3f61b9){var _0x252618=_0x457eff;return _0x25e38e[_0x252618(0x227)]=_0x3f61b9,_0x25e38e;},_setPrototypeOf(_0x57b910,_0x3eb80a);}function _isNativeReflectConstruct(){var _0x16e1df=_0x44b9;if(typeof Reflect===_0x16e1df(0x24c)||!Reflect['construct'])return![];if(Reflect[_0x16e1df(0x241)][_0x16e1df(0x24b)])return![];if(typeof Proxy==='function')return!![];try{return Boolean[_0x16e1df(0x25d)][_0x16e1df(0x216)][_0x16e1df(0x250)](Reflect[_0x16e1df(0x241)](Boolean,[],function(){})),!![];}catch(_0x7c3636){return![];}}function _assertThisInitialized(_0x2a991f){if(_0x2a991f===void 0x0)throw new ReferenceError('this\x20hasn\x27t\x20been\x20initialised\x20-\x20super()\x20hasn\x27t\x20been\x20called');return _0x2a991f;}function _possibleConstructorReturn(_0x1c7fc5,_0x239feb){var _0x107dbb=_0x44b9;if(_0x239feb&&(typeof _0x239feb===_0x107dbb(0x211)||typeof _0x239feb===_0x107dbb(0x24a)))return _0x239feb;else{if(_0x239feb!==void 0x0)throw new TypeError(_0x107dbb(0x1fe));}return _assertThisInitialized(_0x1c7fc5);}function _createSuper(_0x2cec87){var _0x3b310a=_isNativeReflectConstruct();return function _0x197ef8(){var _0x4c44e7=_0x44b9,_0x141425=_getPrototypeOf(_0x2cec87),_0x337ab3;if(_0x3b310a){var _0x40490e=_getPrototypeOf(this)[_0x4c44e7(0x220)];_0x337ab3=Reflect['construct'](_0x141425,arguments,_0x40490e);}else _0x337ab3=_0x141425[_0x4c44e7(0x1f9)](this,arguments);return _possibleConstructorReturn(this,_0x337ab3);};}var HeatMaterial='uniform\x20sampler2D\x20image;\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput){\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture2D(image,st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0)){\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a',Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x619554(0x201)][_0x619554(0x23c)],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:'blue',0.6:_0x619554(0x1d4),0.8:_0x619554(0x200),0.9:'red'}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium[_0x619554(0x214)][_0x619554(0x1da)]},HeatLayer=function(_0x35451c){var _0x5d4910=_0x619554;_inherits(_0x399a66,_0x35451c);var _0x191af8=_createSuper(_0x399a66);function _0x399a66(){var _0x56963b=_0x44b9,_0x130c0a,_0x75a6f6=arguments[_0x56963b(0x215)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x399a66),_0x130c0a=_0x191af8[_0x56963b(0x250)](this,_0x75a6f6),_0x130c0a['options']['maxCanvasSize']=Cesium[_0x56963b(0x1f5)](_0x130c0a[_0x56963b(0x23d)][_0x56963b(0x22b)],document[_0x56963b(0x260)]['clientWidth']),_0x130c0a[_0x56963b(0x23d)]['maxCanvasSize']=Math[_0x56963b(0x1df)](_0x130c0a[_0x56963b(0x23d)][_0x56963b(0x22b)],0x1388),_0x130c0a[_0x56963b(0x23d)]['minCanvasSize']=Cesium[_0x56963b(0x1f5)](_0x130c0a['options'][_0x56963b(0x1ee)],document[_0x56963b(0x260)][_0x56963b(0x236)]),_0x130c0a[_0x56963b(0x23d)]['minCanvasSize']=Math[_0x56963b(0x261)](_0x130c0a[_0x56963b(0x23d)]['minCanvasSize'],0x2bc),_0x130c0a[_0x56963b(0x23d)][_0x56963b(0x1ef)]=_objectSpread2(_objectSpread2({},DEF_HEATSTYLE),_0x130c0a[_0x56963b(0x23d)][_0x56963b(0x1ef)]||{}),_0x130c0a[_0x56963b(0x23d)][_0x56963b(0x229)]=_objectSpread2(_objectSpread2({},DEF_STYLE),_0x130c0a[_0x56963b(0x23d)]['style']||{}),_0x130c0a;}return _createClass(_0x399a66,[{'key':_0x5d4910(0x201),'get':function _0xc67b3e(){var _0x5e4dc3=_0x5d4910;return this[_0x5e4dc3(0x1f6)];}},{'key':'heatStyle','get':function _0x376895(){var _0x4d98ac=_0x5d4910;return this['options'][_0x4d98ac(0x1ef)];},'set':function _0x29d985(_0x6b1f0){var _0x15aa7d=_0x5d4910;this[_0x15aa7d(0x23d)][_0x15aa7d(0x1ef)]=mars3d__namespace[_0x15aa7d(0x226)][_0x15aa7d(0x208)](this['options'][_0x15aa7d(0x1ef)],_0x6b1f0),this['_heat']&&this[_0x15aa7d(0x244)][_0x15aa7d(0x1e8)](this[_0x15aa7d(0x23d)][_0x15aa7d(0x1ef)]);}},{'key':_0x5d4910(0x229),'get':function _0x8d4a8(){var _0x31e670=_0x5d4910;return this[_0x31e670(0x23d)][_0x31e670(0x229)];},'set':function _0x540ec5(_0xa4d160){var _0x41cdcc=_0x5d4910;this[_0x41cdcc(0x23d)][_0x41cdcc(0x229)]=mars3d__namespace['Util'][_0x41cdcc(0x208)](this['options'][_0x41cdcc(0x229)],_0xa4d160);}},{'key':'positions','get':function _0x4c745a(){var _0x607863=_0x5d4910;return this[_0x607863(0x25f)];},'set':function _0x3f7c8c(_0x296636){var _0xf5f953=_0x5d4910;this[_0xf5f953(0x25f)]=_0x296636,this['_updatePositionsHook']();}},{'key':_0x5d4910(0x262),'get':function _0x336394(){var _0xdb052e=_0x5d4910,_0x5b8637=[];return this[_0xdb052e(0x223)][_0xdb052e(0x1f0)](function(_0x5c2879){var _0x5d6bf3=_0xdb052e;_0x5b8637[_0x5d6bf3(0x245)](_0x5c2879['toArray']());}),_0x5b8637;}},{'key':'rectangle','get':function _0x4f243e(){var _0x3eca41=_0x5d4910;return this[_0x3eca41(0x202)];}},{'key':'_setOptionsHook','value':function _0x205d56(_0x344c95){var _0x31fb03=_0x5d4910;_0x344c95['positions']&&(this[_0x31fb03(0x1ff)]=_0x344c95[_0x31fb03(0x1ff)]);}},{'key':'_mountedHook','value':function _0x50fb12(){var _0x366719=_0x5d4910;this[_0x366719(0x1f6)]=new mars3d__namespace[(_0x366719(0x201))][(_0x366719(0x1fd))]({'noLayerManage':!![]}),this[_0x366719(0x1f6)][_0x366719(0x209)]=!![];}},{'key':'_addedHook','value':function _0x5500b8(){var _0x3e4fef=_0x5d4910;this[_0x3e4fef(0x22e)][_0x3e4fef(0x243)](this[_0x3e4fef(0x1f6)]),this[_0x3e4fef(0x23d)]['positions']&&(this[_0x3e4fef(0x1ff)]=this['options'][_0x3e4fef(0x1ff)]),this[_0x3e4fef(0x23d)][_0x3e4fef(0x246)]&&this[_0x3e4fef(0x20c)]();}},{'key':'_removedHook','value':function _0x2fa37a(){var _0x1ca250=_0x5d4910;this[_0x1ca250(0x1ef)][_0x1ca250(0x1d9)]&&(this[_0x1ca250(0x22e)][_0x1ca250(0x1d9)][_0x1ca250(0x20b)](this['heatStyle'][_0x1ca250(0x1d9)]),delete this[_0x1ca250(0x1ef)][_0x1ca250(0x1d9)]),this[_0x1ca250(0x254)](),this[_0x1ca250(0x22e)][_0x1ca250(0x255)](this[_0x1ca250(0x1f6)]);}},{'key':_0x5d4910(0x1dc),'value':function _0x387524(_0x48bcf7){var _0x489d61=_0x5d4910;this[_0x489d61(0x25f)]=this[_0x489d61(0x25f)]||[],this[_0x489d61(0x25f)][_0x489d61(0x245)](_0x48bcf7),this['_updatePositionsHook']();}},{'key':_0x5d4910(0x254),'value':function _0x3ab63e(){var _0x26e29f=_0x5d4910;this[_0x26e29f(0x24f)]&&(this[_0x26e29f(0x1f6)][_0x26e29f(0x1d8)](this[_0x26e29f(0x24f)],!![]),delete this[_0x26e29f(0x24f)]);}},{'key':_0x5d4910(0x25e),'value':function _0x1a8b7b(){var _0x1eaf52=_0x5d4910;if(!this[_0x1eaf52(0x24d)]||!this['_map']||!this[_0x1eaf52(0x1ff)]||this[_0x1eaf52(0x1ff)][_0x1eaf52(0x215)]===0x0)return this;var _0x171774=this[_0x1eaf52(0x1dd)]();return this[_0x1eaf52(0x229)][_0x1eaf52(0x1e2)]?this[_0x1eaf52(0x1eb)](_0x171774):this[_0x1eaf52(0x1e4)](_0x171774),this;}},{'key':_0x5d4910(0x1dd),'value':function _0x48cb3f(){var _0x1745ab=_0x5d4910,_0x13e3a0,_0x55da9f,_0x44e8ad=this[_0x1745ab(0x25f)],_0x1e33fb=[],_0x2be286,_0x320d08,_0x59e9b9,_0x1474c9;_0x44e8ad[_0x1745ab(0x1f0)](function(_0x570afb){var _0xee4563=_0x1745ab,_0x5cddcc=mars3d__namespace['LngLatPoint']['parse'](_0x570afb);if(!_0x5cddcc)return;_0x5cddcc[_0xee4563(0x25a)]=_0x570afb[_0xee4563(0x25a)]||0x1,_0x2be286===undefined?(_0x2be286=_0x5cddcc['lng'],_0x320d08=_0x5cddcc[_0xee4563(0x203)],_0x59e9b9=_0x5cddcc[_0xee4563(0x23e)],_0x1474c9=_0x5cddcc[_0xee4563(0x23e)]):(_0x2be286=Math[_0xee4563(0x1df)](_0x2be286,_0x5cddcc['lng']),_0x320d08=Math[_0xee4563(0x261)](_0x320d08,_0x5cddcc[_0xee4563(0x203)]),_0x59e9b9=Math[_0xee4563(0x1df)](_0x59e9b9,_0x5cddcc[_0xee4563(0x23e)]),_0x1474c9=Math[_0xee4563(0x261)](_0x1474c9,_0x5cddcc[_0xee4563(0x23e)])),_0x1e33fb['push'](_0x5cddcc);});var _0x34aaf0=this[_0x1745ab(0x1ef)][_0x1745ab(0x21b)]*1.5,_0x57a6e9={'xmin':_0x2be286,'xmax':_0x320d08,'ymin':_0x59e9b9,'ymax':_0x1474c9},_0x13c07f=getMercatorBounds(_0x57a6e9),_0x1586cd=Math[_0x1745ab(0x1e3)](_0x13c07f[_0x1745ab(0x248)]-_0x13c07f[_0x1745ab(0x251)]),_0x2a6069=Math[_0x1745ab(0x1e3)](_0x13c07f[_0x1745ab(0x249)]-_0x13c07f[_0x1745ab(0x1f2)]),_0x3bacb6=Math[_0x1745ab(0x261)](_0x1586cd,_0x2a6069),_0x2f5af9=Math[_0x1745ab(0x1df)](_0x1586cd,_0x2a6069);this[_0x1745ab(0x219)]=_0x3bacb6;var _0x12a415=0x1;if(_0x3bacb6>this[_0x1745ab(0x23d)][_0x1745ab(0x22b)])_0x12a415=_0x3bacb6/this[_0x1745ab(0x23d)]['maxCanvasSize'],_0x2f5af9/_0x12a415<this[_0x1745ab(0x23d)][_0x1745ab(0x1ee)]&&(_0x12a415=_0x2f5af9/this[_0x1745ab(0x23d)]['minCanvasSize']);else _0x2f5af9<this[_0x1745ab(0x23d)][_0x1745ab(0x1ee)]&&(_0x12a415=_0x2f5af9/this[_0x1745ab(0x23d)][_0x1745ab(0x1ee)],_0x3bacb6/_0x12a415>this[_0x1745ab(0x23d)][_0x1745ab(0x22b)]&&(_0x12a415=_0x3bacb6/this[_0x1745ab(0x23d)][_0x1745ab(0x22b)]));var _0x5cb10b=_0x1586cd/_0x12a415+_0x34aaf0*0x2,_0x8076dc=_0x2a6069/_0x12a415+_0x34aaf0*0x2,_0x1c3c54=_0x34aaf0*_0x12a415;_0x13c07f[_0x1745ab(0x251)]-=_0x1c3c54,_0x13c07f[_0x1745ab(0x1f2)]-=_0x1c3c54,_0x13c07f[_0x1745ab(0x248)]+=_0x1c3c54,_0x13c07f['ymax']+=_0x1c3c54,_0x57a6e9=geLatLngBounds(_0x13c07f),this[_0x1745ab(0x202)]=Cesium[_0x1745ab(0x20e)][_0x1745ab(0x1ed)](_0x57a6e9[_0x1745ab(0x251)],_0x57a6e9['ymin'],_0x57a6e9['xmax'],_0x57a6e9[_0x1745ab(0x249)]);var _0x2817a0=(_0x13e3a0=_0x1e33fb[0x0][_0x1745ab(0x25a)])!==null&&_0x13e3a0!==void 0x0?_0x13e3a0:0x1,_0x4a34c9=(_0x55da9f=_0x1e33fb[0x0][_0x1745ab(0x25a)])!==null&&_0x55da9f!==void 0x0?_0x55da9f:0x0,_0x1ea268=[];_0x1e33fb[_0x1745ab(0x1f0)](function(_0x5cfe32){var _0x397f3e=_0x1745ab,_0x14e107=mars3d__namespace[_0x397f3e(0x20d)][_0x397f3e(0x212)]([_0x5cfe32[_0x397f3e(0x203)],_0x5cfe32[_0x397f3e(0x23e)]]),_0x467a19=_0x5cfe32['value']||0x1,_0x550d0b=Math[_0x397f3e(0x25b)]((_0x14e107[0x0]-_0x13c07f[_0x397f3e(0x251)])/_0x12a415),_0x54c366=Math[_0x397f3e(0x25b)]((_0x13c07f[_0x397f3e(0x249)]-_0x14e107[0x1])/_0x12a415);_0x2817a0=Math[_0x397f3e(0x261)](_0x2817a0,_0x467a19),_0x4a34c9=Math[_0x397f3e(0x1df)](_0x4a34c9,_0x467a19),_0x1ea268[_0x397f3e(0x245)]({'x':_0x550d0b,'y':_0x54c366,'value':_0x467a19});});var _0x2f09a7={'min':_0x4a34c9,'max':_0x2817a0,'data':_0x1ea268};this[_0x1745ab(0x259)]=_0x2f09a7;(!this[_0x1745ab(0x235)]||_0x13c07f['xmin']!==this[_0x1745ab(0x235)]['xmin']||_0x13c07f['ymin']!==this[_0x1745ab(0x235)][_0x1745ab(0x1f2)]||_0x13c07f['xmax']!==this[_0x1745ab(0x235)][_0x1745ab(0x248)]||_0x13c07f['ymax']!==this[_0x1745ab(0x235)][_0x1745ab(0x249)])&&(this['_last_mBounds']=_0x13c07f,!this[_0x1745ab(0x1ef)]['container']&&(this[_0x1745ab(0x1ef)]['container']=mars3d__namespace['DomUtil'][_0x1745ab(0x1ea)](_0x1745ab(0x239),_0x1745ab(0x222),this[_0x1745ab(0x22e)]['container'])),this[_0x1745ab(0x1ef)]['container']['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:'[_0x1745ab(0x1de)](_0x5cb10b,_0x1745ab(0x221))[_0x1745ab(0x1de)](_0x8076dc,_0x1745ab(0x1d6)),!this[_0x1745ab(0x244)]?this[_0x1745ab(0x244)]=h337__namespace[_0x1745ab(0x1ea)](this[_0x1745ab(0x1ef)]):this[_0x1745ab(0x244)][_0x1745ab(0x1e8)](this[_0x1745ab(0x1ef)]));this[_0x1745ab(0x244)]['setData'](_0x2f09a7);var _0x467c16=this[_0x1745ab(0x244)][_0x1745ab(0x1fc)]['canvas'][_0x1745ab(0x1e0)](_0x1745ab(0x21a));return this[_0x1745ab(0x1ef)]['container']&&(this['_map'][_0x1745ab(0x1d9)][_0x1745ab(0x20b)](this[_0x1745ab(0x1ef)][_0x1745ab(0x1d9)]),delete this[_0x1745ab(0x1ef)][_0x1745ab(0x1d9)]),_0x467c16;}},{'key':_0x5d4910(0x1e4),'value':function _0x5a5925(_0x3b1398){var _0x462d36=_0x5d4910;this[_0x462d36(0x254)](),this[_0x462d36(0x24f)]=new mars3d__namespace['graphic'][(_0x462d36(0x1ec))](_objectSpread2(_objectSpread2({},this[_0x462d36(0x23d)]),{},{'rectangle':this[_0x462d36(0x202)],'appearance':new Cesium[(_0x462d36(0x214))]({'material':new Cesium[(_0x462d36(0x225))]({'fabric':{'uniforms':{'image':_0x3b1398},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})})),this[_0x462d36(0x1f6)][_0x462d36(0x1f8)](this[_0x462d36(0x24f)]);}},{'key':_0x5d4910(0x1eb),'value':function _0x300974(_0x3c33df){var _0x1cc5d4=_0x5d4910;this[_0x1cc5d4(0x254)](),this['_heat'][_0x1cc5d4(0x1e8)](_objectSpread2(_objectSpread2({},this[_0x1cc5d4(0x1ef)]),{},{'radius':this[_0x1cc5d4(0x1ef)]['radius']*this[_0x1cc5d4(0x229)]['arcRadiusScale'],'blur':this['heatStyle'][_0x1cc5d4(0x21e)]*this[_0x1cc5d4(0x229)]['arcBlurScale'],'gradient':this[_0x1cc5d4(0x1ef)]['gradientArc']||{0.25:_0x1cc5d4(0x228),0.55:'rgb(140,140,140)',0.85:_0x1cc5d4(0x1fb),0x1:'rgb(255,255,255)'}}));var _0x2c3bbb=this[_0x1cc5d4(0x244)]['_renderer'][_0x1cc5d4(0x240)][_0x1cc5d4(0x1e0)]('image/png'),_0x10aa65=Cesium[_0x1cc5d4(0x23f)][_0x1cc5d4(0x204)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x1cc5d4(0x258)][_0x1cc5d4(0x242)],'frontOperation':{'fail':Cesium[_0x1cc5d4(0x206)][_0x1cc5d4(0x207)],'zFail':Cesium[_0x1cc5d4(0x206)][_0x1cc5d4(0x207)],'zPass':Cesium['StencilOperation']['REPLACE']},'backFunction':Cesium[_0x1cc5d4(0x258)]['ALWAYS'],'backOperation':{'fail':Cesium[_0x1cc5d4(0x206)][_0x1cc5d4(0x207)],'zFail':Cesium['StencilOperation'][_0x1cc5d4(0x207)],'zPass':Cesium[_0x1cc5d4(0x206)][_0x1cc5d4(0x21f)]},'reference':0x2,'mask':0x2},'blending':Cesium['BlendingState'][_0x1cc5d4(0x22a)]}),_0x572ee3=Math[_0x1cc5d4(0x224)](Cesium[_0x1cc5d4(0x1f5)](this[_0x1cc5d4(0x229)][_0x1cc5d4(0x22f)],this[_0x1cc5d4(0x219)]*0.02))+0.1;this['style']['diffHeight']&&delete this['style'][_0x1cc5d4(0x22f)];var _0x2f97e5=Cesium['defaultValue'](this[_0x1cc5d4(0x229)][_0x1cc5d4(0x1f7)],0x64),_0x2cc802=Math['max'](this['_rectangle'][_0x1cc5d4(0x1db)],this[_0x1cc5d4(0x202)][_0x1cc5d4(0x20a)]);this['style'][_0x1cc5d4(0x23b)]=_0x2cc802/=_0x2f97e5,this['_graphic']=new mars3d__namespace[(_0x1cc5d4(0x1d3))][(_0x1cc5d4(0x1ec))](_objectSpread2(_objectSpread2({},this[_0x1cc5d4(0x23d)]),{},{'rectangle':this[_0x1cc5d4(0x202)],'appearance':new Cesium[(_0x1cc5d4(0x214))]({'aboveGround':!![],'renderState':_0x10aa65,'material':new Cesium[(_0x1cc5d4(0x225))]({'fabric':{'uniforms':{'image':_0x3c33df,'repeat':new Cesium[(_0x1cc5d4(0x205))](0x1,0x1),'color':new Cesium[(_0x1cc5d4(0x218))](0x1,0x1,0x1,0.01),'bumpMap':_0x2c3bbb},'source':HeatMaterial},'translucent':!![]}),'vertexShaderSource':_0x1cc5d4(0x21d)[_0x1cc5d4(0x1de)](_0x572ee3,';\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'),'flat':!![]})})),this['_layer'][_0x1cc5d4(0x1f8)](this[_0x1cc5d4(0x24f)]);}},{'key':_0x5d4910(0x234),'value':function _0x9695d1(_0x3a3149){var _0x2cfefb=_0x5d4910;return _0x3a3149!==null&&_0x3a3149!==void 0x0&&_0x3a3149[_0x2cfefb(0x257)]&&this[_0x2cfefb(0x202)]?mars3d__namespace['PolyUtil'][_0x2cfefb(0x24e)](this['_rectangle']):this[_0x2cfefb(0x202)];}}]),_0x399a66;}(BaseLayer);mars3d__namespace[_0x619554(0x201)][_0x619554(0x1f3)]=HeatLayer,mars3d__namespace[_0x619554(0x23a)][_0x619554(0x1fa)](_0x619554(0x1f4),HeatLayer);function getMercatorBounds(_0x36ec69){var _0x5a82cf=_0x619554,_0x4fa4d2=mars3d__namespace[_0x5a82cf(0x20d)][_0x5a82cf(0x212)]([_0x36ec69['xmin'],_0x36ec69['ymin']]),_0x3432c2=mars3d__namespace[_0x5a82cf(0x20d)][_0x5a82cf(0x212)]([_0x36ec69[_0x5a82cf(0x248)],_0x36ec69[_0x5a82cf(0x249)]]);return{'xmin':_0x4fa4d2[0x0],'ymin':_0x4fa4d2[0x1],'xmax':_0x3432c2[0x0],'ymax':_0x3432c2[0x1]};}function geLatLngBounds(_0x60ca6c){var _0x1b27fc=_0x619554,_0x1b56f4=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x60ca6c[_0x1b27fc(0x251)],_0x60ca6c[_0x1b27fc(0x1f2)]]),_0x4df706=mars3d__namespace[_0x1b27fc(0x20d)][_0x1b27fc(0x237)]([_0x60ca6c['xmax'],_0x60ca6c[_0x1b27fc(0x249)]]);return{'xmin':_0x1b56f4[0x0],'ymin':_0x1b56f4[0x1],'xmax':_0x4df706[0x0],'ymax':_0x4df706[0x1]};}exports['HeatLayer']=HeatLayer,Object[_0x619554(0x1d7)](exports,_0x619554(0x1e7),{'value':!![]});
}));
