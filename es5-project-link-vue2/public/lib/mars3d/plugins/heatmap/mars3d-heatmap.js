/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.3.7
 * 编译日期：2022-05-02 10:46:30
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';var _0x6cd932=_0x4723;(function(_0x502cfc,_0x3a28e6){var _0x34e509=_0x4723,_0x77847b=_0x502cfc();while(!![]){try{var _0x203db9=parseInt(_0x34e509(0x252))/0x1*(parseInt(_0x34e509(0x26f))/0x2)+-parseInt(_0x34e509(0x24c))/0x3*(-parseInt(_0x34e509(0x280))/0x4)+-parseInt(_0x34e509(0x232))/0x5*(-parseInt(_0x34e509(0x205))/0x6)+-parseInt(_0x34e509(0x1f6))/0x7+-parseInt(_0x34e509(0x1fb))/0x8+-parseInt(_0x34e509(0x208))/0x9+parseInt(_0x34e509(0x233))/0xa*(parseInt(_0x34e509(0x22e))/0xb);if(_0x203db9===_0x3a28e6)break;else _0x77847b['push'](_0x77847b['shift']());}catch(_0x4d28cc){_0x77847b['push'](_0x77847b['shift']());}}}(_0x3fae,0x4e34c));function _interopNamespace(_0x44e377){var _0x1a8b53=_0x4723;if(_0x44e377&&_0x44e377[_0x1a8b53(0x26a)])return _0x44e377;var _0x4b4f91=Object[_0x1a8b53(0x1f8)](null);return _0x44e377&&Object[_0x1a8b53(0x1f9)](_0x44e377)[_0x1a8b53(0x263)](function(_0x52cd5e){var _0x50f0c9=_0x1a8b53;if(_0x52cd5e!==_0x50f0c9(0x255)){var _0x142343=Object[_0x50f0c9(0x27b)](_0x44e377,_0x52cd5e);Object['defineProperty'](_0x4b4f91,_0x52cd5e,_0x142343[_0x50f0c9(0x256)]?_0x142343:{'enumerable':!![],'get':function(){return _0x44e377[_0x52cd5e];}});}}),_0x4b4f91['default']=_0x44e377,_0x4b4f91;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337);function ownKeys(_0x1088b0,_0x2cffea){var _0x4b4df2=_0x4723,_0x1035f9=Object[_0x4b4df2(0x1f9)](_0x1088b0);if(Object[_0x4b4df2(0x219)]){var _0x528480=Object[_0x4b4df2(0x219)](_0x1088b0);_0x2cffea&&(_0x528480=_0x528480[_0x4b4df2(0x220)](function(_0x4324c0){var _0x210143=_0x4b4df2;return Object[_0x210143(0x27b)](_0x1088b0,_0x4324c0)[_0x210143(0x264)];})),_0x1035f9['push'][_0x4b4df2(0x218)](_0x1035f9,_0x528480);}return _0x1035f9;}function _objectSpread2(_0x4832e1){var _0xd4cfc4=_0x4723;for(var _0x1177e3=0x1;_0x1177e3<arguments[_0xd4cfc4(0x273)];_0x1177e3++){var _0x423a0d=null!=arguments[_0x1177e3]?arguments[_0x1177e3]:{};_0x1177e3%0x2?ownKeys(Object(_0x423a0d),!0x0)['forEach'](function(_0x445225){_defineProperty(_0x4832e1,_0x445225,_0x423a0d[_0x445225]);}):Object[_0xd4cfc4(0x230)]?Object[_0xd4cfc4(0x207)](_0x4832e1,Object[_0xd4cfc4(0x230)](_0x423a0d)):ownKeys(Object(_0x423a0d))[_0xd4cfc4(0x263)](function(_0x1dcb6b){var _0x5a3c73=_0xd4cfc4;Object[_0x5a3c73(0x23d)](_0x4832e1,_0x1dcb6b,Object[_0x5a3c73(0x27b)](_0x423a0d,_0x1dcb6b));});}return _0x4832e1;}function _classCallCheck(_0x4a04be,_0x53672f){var _0x30ca8a=_0x4723;if(!(_0x4a04be instanceof _0x53672f))throw new TypeError(_0x30ca8a(0x27e));}function _defineProperties(_0x17ff9c,_0x1ee166){var _0x59c0c5=_0x4723;for(var _0x5ba4e1=0x0;_0x5ba4e1<_0x1ee166[_0x59c0c5(0x273)];_0x5ba4e1++){var _0x1c9a06=_0x1ee166[_0x5ba4e1];_0x1c9a06[_0x59c0c5(0x264)]=_0x1c9a06[_0x59c0c5(0x264)]||![],_0x1c9a06[_0x59c0c5(0x234)]=!![];if(_0x59c0c5(0x20d)in _0x1c9a06)_0x1c9a06[_0x59c0c5(0x200)]=!![];Object[_0x59c0c5(0x23d)](_0x17ff9c,_0x1c9a06[_0x59c0c5(0x21a)],_0x1c9a06);}}function _0x4723(_0x36e04e,_0xc7d656){var _0x3faec8=_0x3fae();return _0x4723=function(_0x472358,_0x3e498d){_0x472358=_0x472358-0x1f2;var _0x1f5aaa=_0x3faec8[_0x472358];if(_0x4723['PHMxzD']===undefined){var _0x56e777=function(_0x44e377){var _0x4b4f91='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x52cd5e='',_0x142343='';for(var _0x1088b0=0x0,_0x2cffea,_0x1035f9,_0x528480=0x0;_0x1035f9=_0x44e377['charAt'](_0x528480++);~_0x1035f9&&(_0x2cffea=_0x1088b0%0x4?_0x2cffea*0x40+_0x1035f9:_0x1035f9,_0x1088b0++%0x4)?_0x52cd5e+=String['fromCharCode'](0xff&_0x2cffea>>(-0x2*_0x1088b0&0x6)):0x0){_0x1035f9=_0x4b4f91['indexOf'](_0x1035f9);}for(var _0x4324c0=0x0,_0x4832e1=_0x52cd5e['length'];_0x4324c0<_0x4832e1;_0x4324c0++){_0x142343+='%'+('00'+_0x52cd5e['charCodeAt'](_0x4324c0)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x142343);};_0x4723['dusTqI']=_0x56e777,_0x36e04e=arguments,_0x4723['PHMxzD']=!![];}var _0x121deb=_0x3faec8[0x0],_0x58e4b5=_0x472358+_0x121deb,_0x2d07f3=_0x36e04e[_0x58e4b5];return!_0x2d07f3?(_0x1f5aaa=_0x4723['dusTqI'](_0x1f5aaa),_0x36e04e[_0x58e4b5]=_0x1f5aaa):_0x1f5aaa=_0x2d07f3,_0x1f5aaa;},_0x4723(_0x36e04e,_0xc7d656);}function _createClass(_0x5653ce,_0x3283ed,_0x3d046a){var _0x1aab96=_0x4723;if(_0x3283ed)_defineProperties(_0x5653ce[_0x1aab96(0x240)],_0x3283ed);if(_0x3d046a)_defineProperties(_0x5653ce,_0x3d046a);return Object[_0x1aab96(0x23d)](_0x5653ce,_0x1aab96(0x240),{'writable':![]}),_0x5653ce;}function _defineProperty(_0xee321,_0x37ba91,_0x5c2a4){var _0xd3ca5f=_0x4723;return _0x37ba91 in _0xee321?Object[_0xd3ca5f(0x23d)](_0xee321,_0x37ba91,{'value':_0x5c2a4,'enumerable':!![],'configurable':!![],'writable':!![]}):_0xee321[_0x37ba91]=_0x5c2a4,_0xee321;}function _inherits(_0x59413d,_0x429b02){var _0x32d72e=_0x4723;if(typeof _0x429b02!=='function'&&_0x429b02!==null)throw new TypeError('Super\x20expression\x20must\x20either\x20be\x20null\x20or\x20a\x20function');_0x59413d[_0x32d72e(0x240)]=Object['create'](_0x429b02&&_0x429b02[_0x32d72e(0x240)],{'constructor':{'value':_0x59413d,'writable':!![],'configurable':!![]}}),Object[_0x32d72e(0x23d)](_0x59413d,'prototype',{'writable':![]});if(_0x429b02)_setPrototypeOf(_0x59413d,_0x429b02);}function _0x3fae(){var _0x396fdd=['A2v5CW','Bwf4q2fUDMfZu2L6zq','otu1otq0z1P4uNzY','BwvYy2f0B3iYBg9UBgf0','qMXLBMrPBMDtDgf0zq','CMfKAxvZ','ywrKtgf5zxi','D3jPDgfIBgu','ywjZ','tg5Ntgf0ug9PBNq','x2fKzgvKsg9VAW','zgL2','nNHLCKflEG','x3jLBw92zwriB29R','zgvMAw5LuhjVCgvYDgLLCW','ndy5nZa5mwPpEuTdDG','Bg5N','CMDIkdi1nsWYntuSmJu1kq','y2fSBa','x3vWzgf0zvbVC2L0Aw9UC0HVB2S','DMfSDwu','AgvPz2H0','uKvqtefdrq','Dw5KzwzPBMvK','zNjVBurLz3jLzxm','BwLUq2fUDMfZu2L6zq','x21cB3vUzhnnyxG','rwXSAxbZB2LKu3vYzMfJzufWCgvHCMfUy2u','ChvZAa','C3bSAxroDw0','x3jLBMrLCMvY','yxbWBhK','z2v0t3DUuhjVCgvYDhLtEw1IB2XZ','A2v5','zgvMyxvSDfzHBhvL','CMvK','Eg1HEa','B3b0Aw9UCW','z3jHCgHPyW','zMLSDgvY','Ew1PBG','x2XHC3rFBujVDw5KCW','C2v0rgf0yq','ug9PBNruCMfUCW','yMX1zq','DMfSDwvpzG','yM9KEq','y2XPzw50v2LKDgG','y29UzMLNDxjL','u3rLBMnPBe9WzxjHDgLVBG','x2nYzwf0zufYy0DYyxbOAwm','uMvJDgfUz2XLuhjPBwL0AxzL','y29UC3rYDwn0B3i','mtu3nJnyCMr3zfy','D2LKDgG','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9YCW','twf0zxjPywW','mJG2ndG1tLHPquzW','mZGZmez5u2vwuq','y29UzMLNDxjHyMXL','x3jLy3rHBMDSzq','Bwf4','AgvHDa','x21VDw50zwriB29R','y29UDgfPBMvY','B2jQzwn0','BwvYz2u','x21HCNmZzf9WCML2yxrL','zgvMAw5LuhjVCgvYDhK','CM91BMq','z3jLzw4','ChjVDg90ExbL','CMvTB3zLq2HPBgq','quXxqvLt','zMX5vg9cEufUAw1HDgLVBKvUza','zgLMzKHLAwDODa','z3jHBNvSyxjPDhK','rg9TvxrPBa','C2HVDW','Aw1Hz2uVCg5N','zNjVBunHy2HL','DgHPCYbOyxnUj3qGyMvLBIbPBML0AwfSAxnLzcaTihn1CgvYkcKGAgfZBID0igjLzw4Gy2fSBgvK','CMDIkde0mcWXndaSmtqWkq','ndv3r0jIsg8','r3jHCgHPy0XHEwvY','yxr0CMLIDxrLihzLyZmGCg9ZAxrPB24ZreHPz2G7cIaGicaGicaGicbHDhrYAwj1DguGDMvJmYbWB3nPDgLVBJnetg93oWOGicaGicaGicaGyxr0CMLIDxrLihzLyZiGC3q7cIaGicaGicaGicbHDhrYAwj1DguGzMXVyxqGyMf0y2HjzdSkicaGicaGicaGihvUAwzVCM0GC2fTCgXLCJjeigj1BxbnyxbFmZSkicaGicaGicaGihzHCNLPBMCGDMvJmYb2x3bVC2L0Aw9Utum7cIaGicaGicaGicb2yxj5Aw5NihzLyZmGDL9WB3nPDgLVBKvdoWOGicaGicaGicaGDMfYEwLUzYb2zwmYihzFC3q7cGOGicaGicaGicaGDM9PzcbTywLUkcKkicaGicaGicaGihSkicaGicaGicaGicaGDMvJncbWid0Gy3PTx2nVBxb1DgvqB3nPDgLVBIGPoWOGicaGicaGicaGicb2x3bVC2L0Aw9UtumGpsbWB3nPDgLVBJnesgLNAcaRihbVC2L0Aw9Um0rmB3C7cIaGicaGicaGicaGihzFCg9ZAxrPB25fqYa9icHJEM1FBw9KzwXwAwv3uMvSyxrPDMvuB0v5zsaQihaPlNH5EJSkicaGicaGicaGicaGDL9ZDca9ihn0oWOGicaGicaGicaGicb2zwm0ignVBg9Yid0GDgv4DhvYztjekgj1BxbnyxbFmYWGDL9ZDcK7cIaGicaGicaGicaGigzSB2f0ignLBNrLCKj1BxaGpsbKAxn0yw5JzsH2zwmZkdaUmcKSy29SB3iUCMDIktSkicaGicaGicaGicaGDMvJmYb1CerPCIa9ig5VCM1HBgL6zsH2x3bVC2L0Aw9UtumUEhL6ktSkicaGicaGicaGicaGDMvJmYbKAxnqB3mGpsb1CerPCIaQignLBNrLCKj1BxaGkIa','CMDIkdaSmcWWkq','y29VCMrPBMf0zxm','x19WCM90B19F','mJe4nxveuhHfEq','C3r5Bgu','Dg9bCNjHEq','zgvMyxvSDa','z2v0','x3nLDe9WDgLVBNniB29R','zMXVB3i','ChG7','AgvHDfn0EwXL','tgf5zxjvDgLS','y2XLyxi','x2XHEwvY','sgvHDeXHEwvY','z3jHzgLLBNrbCMm','x21HCa','q29SB3i','x2DLDeHLyxrdyw52yxnjBwC','zM9YrwfJAa','zw51BwvYywjSzq','yxjJuMfKAxvZu2nHBgu','s0vfua','zNvUy3rPB24','Ew1HEa','BwLU','x19LC01VzhvSzq','AxngB3jTyxq','zM9YBwf0uMvJDgfUz2XL','y2XPzw50sgvPz2H0','x3bVC2L0Aw9UCW','ndm2wLbyugHI','y29UC3rYDwn0','rgvYAxzLzcbJB25ZDhj1y3rVCNmGBwf5ig9UBhKGCMv0DxjUig9IAMvJDcbVCIb1BMrLzMLUzwq','CMvJDgfUz2XL','BgvUz3rO','ywrKug9ZAxrPB24','x2DYyxbOAwm','y2fUDMfZ','Eg1PBG','Cg9ZAxrPB25Z','quXqsefFqKXftKq','ywrKr3jHCgHPyW','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','cIaGicaGicaGBwfYz2LUoJa7cIaGicaGicaGD2LKDgG6','Dg9eyxrHvvjm','q2fUBM90ignHBgWGysbJBgfZCYbHCYbHigz1BMn0Aw9U','x2XHC3rFAgvHDerHDge','nZiXotz0sKrmD2m','zMX5vg8','x2nYzwf0zuDYyxbOAwm','ug9SEvv0AwW','yxjJqMX1CLnJywXL','Bgf0','x2HLyxq','vxrPBa','Bgf5zxi','u3rLBMnPBez1BMn0Aw9U','q2fYDgvZAwfUmG','Bg9UBgf0mM1LCMnHDg9Y','y29Uy2f0','C2v0uhjVDg90ExbLt2y','CMvTB3zLr3jHCgHPyW','mJC0mdmZou9AyuPPva','uMvJDgfUz2XL','y3jLyxrL'];_0x3fae=function(){return _0x396fdd;};return _0x3fae();}function _getPrototypeOf(_0x191395){var _0x46cfcb=_0x4723;return _getPrototypeOf=Object[_0x46cfcb(0x1f4)]?Object['getPrototypeOf']:function _0x294fec(_0x2db3fb){var _0x4918ac=_0x46cfcb;return _0x2db3fb[_0x4918ac(0x251)]||Object['getPrototypeOf'](_0x2db3fb);},_getPrototypeOf(_0x191395);}function _setPrototypeOf(_0x563382,_0xc17127){var _0x3bf04c=_0x4723;return _setPrototypeOf=Object[_0x3bf04c(0x1f4)]||function _0x1158d4(_0x11e96c,_0x6c6178){var _0x51f96b=_0x3bf04c;return _0x11e96c[_0x51f96b(0x251)]=_0x6c6178,_0x11e96c;},_setPrototypeOf(_0x563382,_0xc17127);}function _isNativeReflectConstruct(){var _0x119a80=_0x4723;if(typeof Reflect===_0x119a80(0x210)||!Reflect['construct'])return![];if(Reflect['construct']['sham'])return![];if(typeof Proxy===_0x119a80(0x267))return!![];try{return Boolean[_0x119a80(0x240)][_0x119a80(0x226)][_0x119a80(0x20b)](Reflect[_0x119a80(0x270)](Boolean,[],function(){})),!![];}catch(_0x19efd9){return![];}}function _assertThisInitialized(_0xe4b536){var _0x3aef1e=_0x4723;if(_0xe4b536===void 0x0)throw new ReferenceError(_0x3aef1e(0x24a));return _0xe4b536;}function _possibleConstructorReturn(_0x563341,_0x6fe324){var _0x3d7d43=_0x4723;if(_0x6fe324&&(typeof _0x6fe324===_0x3d7d43(0x23a)||typeof _0x6fe324===_0x3d7d43(0x267)))return _0x6fe324;else{if(_0x6fe324!==void 0x0)throw new TypeError(_0x3d7d43(0x271));}return _assertThisInitialized(_0x563341);}function _createSuper(_0x2506af){var _0x282711=_isNativeReflectConstruct();return function _0x228b51(){var _0x5d4385=_0x4723,_0x5cda5a=_getPrototypeOf(_0x2506af),_0x2506a7;if(_0x282711){var _0x11ad7e=_getPrototypeOf(this)[_0x5d4385(0x22d)];_0x2506a7=Reflect[_0x5d4385(0x270)](_0x5cda5a,arguments,_0x11ad7e);}else _0x2506a7=_0x5cda5a['apply'](this,arguments);return _possibleConstructorReturn(this,_0x2506a7);};}var HeatMaterial='uniform\x20sampler2D\x20image;\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput){\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture2D(image,st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0)){\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a',Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x6cd932(0x288)]['BaseLayer'],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:_0x6cd932(0x225),0.6:_0x6cd932(0x23f),0.8:'yellow',0.9:_0x6cd932(0x21c)}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium[_0x6cd932(0x214)]['VERTEX_FORMAT']},HeatLayer=function(_0x21fe76){var _0x6c6f29=_0x6cd932;_inherits(_0x1b8144,_0x21fe76);var _0x44b249=_createSuper(_0x1b8144);function _0x1b8144(){var _0x5ab97e=_0x4723,_0x3302aa,_0x1a1823=arguments[_0x5ab97e(0x273)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x1b8144),_0x3302aa=_0x44b249[_0x5ab97e(0x20b)](this,_0x1a1823),_0x3302aa['options'][_0x5ab97e(0x1fa)]=Cesium[_0x5ab97e(0x21b)](_0x3302aa[_0x5ab97e(0x21e)][_0x5ab97e(0x1fa)],document[_0x5ab97e(0x227)][_0x5ab97e(0x228)]),_0x3302aa[_0x5ab97e(0x21e)][_0x5ab97e(0x1fa)]=Math[_0x5ab97e(0x269)](_0x3302aa[_0x5ab97e(0x21e)][_0x5ab97e(0x1fa)],0x1388),_0x3302aa[_0x5ab97e(0x21e)][_0x5ab97e(0x212)]=Cesium[_0x5ab97e(0x21b)](_0x3302aa[_0x5ab97e(0x21e)][_0x5ab97e(0x212)],document[_0x5ab97e(0x227)][_0x5ab97e(0x26d)]),_0x3302aa[_0x5ab97e(0x21e)][_0x5ab97e(0x212)]=Math[_0x5ab97e(0x236)](_0x3302aa[_0x5ab97e(0x21e)][_0x5ab97e(0x212)],0x2bc),_0x3302aa['options'][_0x5ab97e(0x25a)]=_objectSpread2(_objectSpread2({},DEF_HEATSTYLE),_0x3302aa[_0x5ab97e(0x21e)][_0x5ab97e(0x25a)]||{}),_0x3302aa['options']['style']=_objectSpread2(_objectSpread2({},DEF_STYLE),_0x3302aa[_0x5ab97e(0x21e)][_0x5ab97e(0x253)]||{}),_0x3302aa;}return _createClass(_0x1b8144,[{'key':_0x6c6f29(0x288),'get':function _0x908562(){var _0xf96d8d=_0x6c6f29;return this[_0xf96d8d(0x25d)];}},{'key':'heatStyle','get':function _0x565d3c(){var _0x1623d6=_0x6c6f29;return this[_0x1623d6(0x21e)][_0x1623d6(0x25a)];},'set':function _0x970fa3(_0x38fb4d){var _0x846968=_0x6c6f29;this[_0x846968(0x21e)][_0x846968(0x25a)]=mars3d__namespace[_0x846968(0x287)][_0x846968(0x23b)](this[_0x846968(0x21e)][_0x846968(0x25a)],_0x38fb4d),this[_0x846968(0x286)]&&this[_0x846968(0x286)]['configure'](this[_0x846968(0x21e)][_0x846968(0x25a)]);}},{'key':_0x6c6f29(0x253),'get':function _0x15d0d3(){var _0x2a70b9=_0x6c6f29;return this['options'][_0x2a70b9(0x253)];},'set':function _0x1f8509(_0xcf0ae2){var _0x586dda=_0x6c6f29;this[_0x586dda(0x21e)]['style']=mars3d__namespace[_0x586dda(0x287)][_0x586dda(0x23b)](this['options'][_0x586dda(0x253)],_0xcf0ae2);}},{'key':_0x6c6f29(0x278),'get':function _0x3d27df(){var _0x3ee7ed=_0x6c6f29;return this[_0x3ee7ed(0x26e)];},'set':function _0x5a402a(_0x36bf32){var _0x4e7589=_0x6c6f29;this[_0x4e7589(0x26e)]=_0x36bf32,this[_0x4e7589(0x20c)]();}},{'key':_0x6c6f29(0x250),'get':function _0x1a190a(){var _0xbb4d28=_0x6c6f29,_0x3a7654=[];return this['points'][_0xbb4d28(0x263)](function(_0x1eabec){var _0x17c34b=_0xbb4d28;_0x3a7654[_0x17c34b(0x215)](_0x1eabec[_0x17c34b(0x254)]());}),_0x3a7654;}},{'key':_0x6c6f29(0x272),'get':function _0x3770d8(){var _0x410b09=_0x6c6f29;return this[_0x410b09(0x235)];}},{'key':_0x6c6f29(0x257),'value':function _0x1bc636(_0x1ea5da){var _0x49bb9a=_0x6c6f29;_0x1ea5da[_0x49bb9a(0x278)]&&(this['positions']=_0x1ea5da[_0x49bb9a(0x278)]);}},{'key':_0x6c6f29(0x238),'value':function _0x22b3d5(){var _0x4c9c34=_0x6c6f29;this['_layer']=new mars3d__namespace[(_0x4c9c34(0x288))][(_0x4c9c34(0x24d))]({'noLayerManage':!![]}),this['_layer'][_0x4c9c34(0x23c)]=!![];}},{'key':_0x6c6f29(0x203),'value':function _0x27529a(){var _0x451bab=_0x6c6f29;this[_0x451bab(0x260)][_0x451bab(0x1ff)](this[_0x451bab(0x25d)]),this[_0x451bab(0x21e)][_0x451bab(0x278)]&&(this['positions']=this[_0x451bab(0x21e)][_0x451bab(0x278)]),this['options'][_0x451bab(0x281)]&&this[_0x451bab(0x243)]();}},{'key':_0x6c6f29(0x206),'value':function _0x2fe7cb(){var _0x4d4e2b=_0x6c6f29;this[_0x4d4e2b(0x25a)]['container']&&(this['_map']['container'][_0x4d4e2b(0x241)](this[_0x4d4e2b(0x25a)][_0x4d4e2b(0x239)]),delete this[_0x4d4e2b(0x25a)][_0x4d4e2b(0x239)]),this['clear'](),this[_0x4d4e2b(0x260)]['removeLayer'](this[_0x4d4e2b(0x25d)]);}},{'key':_0x6c6f29(0x274),'value':function _0x3b8ed7(_0x1d1f7b){var _0x1699d7=_0x6c6f29;this[_0x1699d7(0x26e)]=this['_positions']||[],this[_0x1699d7(0x26e)][_0x1699d7(0x215)](_0x1d1f7b),this['_updatePositionsHook']();}},{'key':_0x6c6f29(0x25c),'value':function _0x36a84f(){var _0x54de09=_0x6c6f29;this['_graphic']&&(this[_0x54de09(0x25d)][_0x54de09(0x1f5)](this[_0x54de09(0x275)],!![]),delete this[_0x54de09(0x275)]);}},{'key':_0x6c6f29(0x20c),'value':function _0x1248ba(){var _0x5a766f=_0x6c6f29;if(!this[_0x5a766f(0x247)]||!this[_0x5a766f(0x260)]||!this[_0x5a766f(0x278)]||this[_0x5a766f(0x278)][_0x5a766f(0x273)]===0x0)return this;var _0x297b97=this['_getHeatCanvasImg']();return this['style']['arc']?this[_0x5a766f(0x22b)](_0x297b97):this['_createGraphic'](_0x297b97),this;}},{'key':_0x6c6f29(0x262),'value':function _0x4e57fd(){var _0x537634=_0x6c6f29,_0x29ffb9,_0x2a51fc,_0x598f7b=this[_0x537634(0x26e)],_0x34c05c=[],_0x1d86ea,_0xd13e62,_0x5cbac4,_0x20cea4;_0x598f7b[_0x537634(0x263)](function(_0xe14a53){var _0x3b9b71=_0x537634,_0x187437=mars3d__namespace[_0x3b9b71(0x202)]['parse'](_0xe14a53);if(!_0x187437)return;_0x187437[_0x3b9b71(0x20d)]=_0xe14a53[_0x3b9b71(0x20d)]||0x1,_0x1d86ea===undefined?(_0x1d86ea=_0x187437['lng'],_0xd13e62=_0x187437[_0x3b9b71(0x209)],_0x5cbac4=_0x187437[_0x3b9b71(0x285)],_0x20cea4=_0x187437[_0x3b9b71(0x285)]):(_0x1d86ea=Math[_0x3b9b71(0x269)](_0x1d86ea,_0x187437[_0x3b9b71(0x209)]),_0xd13e62=Math[_0x3b9b71(0x236)](_0xd13e62,_0x187437[_0x3b9b71(0x209)]),_0x5cbac4=Math['min'](_0x5cbac4,_0x187437[_0x3b9b71(0x285)]),_0x20cea4=Math[_0x3b9b71(0x236)](_0x20cea4,_0x187437[_0x3b9b71(0x285)])),_0x34c05c[_0x3b9b71(0x215)](_0x187437);});var _0x2e43e0=this[_0x537634(0x25a)]['radius']*1.5,_0x27ee81={'xmin':_0x1d86ea,'xmax':_0xd13e62,'ymin':_0x5cbac4,'ymax':_0x20cea4},_0x2da16b=getMercatorBounds(_0x27ee81),_0x376079=Math['abs'](_0x2da16b['xmax']-_0x2da16b[_0x537634(0x277)]),_0x4225da=Math[_0x537634(0x201)](_0x2da16b['ymax']-_0x2da16b['ymin']),_0x6bbe4c=Math[_0x537634(0x236)](_0x376079,_0x4225da),_0x39c372=Math['min'](_0x376079,_0x4225da);this[_0x537634(0x213)]=_0x6bbe4c;var _0x2e0310=0x1;if(_0x6bbe4c>this['options'][_0x537634(0x1fa)])_0x2e0310=_0x6bbe4c/this[_0x537634(0x21e)][_0x537634(0x1fa)],_0x39c372/_0x2e0310<this['options']['minCanvasSize']&&(_0x2e0310=_0x39c372/this[_0x537634(0x21e)][_0x537634(0x212)]);else _0x39c372<this[_0x537634(0x21e)]['minCanvasSize']&&(_0x2e0310=_0x39c372/this['options'][_0x537634(0x212)],_0x6bbe4c/_0x2e0310>this['options'][_0x537634(0x1fa)]&&(_0x2e0310=_0x6bbe4c/this[_0x537634(0x21e)][_0x537634(0x1fa)]));var _0x4a57cc=_0x376079/_0x2e0310+_0x2e43e0*0x2,_0x5e9eb4=_0x4225da/_0x2e0310+_0x2e43e0*0x2,_0x28b279=_0x2e43e0*_0x2e0310;_0x2da16b[_0x537634(0x277)]-=_0x28b279,_0x2da16b[_0x537634(0x221)]-=_0x28b279,_0x2da16b[_0x537634(0x21d)]+=_0x28b279,_0x2da16b[_0x537634(0x268)]+=_0x28b279,_0x27ee81=geLatLngBounds(_0x2da16b),this[_0x537634(0x235)]=Cesium[_0x537634(0x1f7)][_0x537634(0x211)](_0x27ee81[_0x537634(0x277)],_0x27ee81['ymin'],_0x27ee81[_0x537634(0x21d)],_0x27ee81[_0x537634(0x268)]);var _0x290a3f=(_0x29ffb9=_0x34c05c[0x0][_0x537634(0x20d)])!==null&&_0x29ffb9!==void 0x0?_0x29ffb9:0x1,_0x3a4325=(_0x2a51fc=_0x34c05c[0x0][_0x537634(0x20d)])!==null&&_0x2a51fc!==void 0x0?_0x2a51fc:0x0,_0x3c789c=[];_0x34c05c['forEach'](function(_0x490281){var _0x14988a=_0x537634,_0x4515b3=mars3d__namespace['PointTrans'][_0x14988a(0x1f2)]([_0x490281[_0x14988a(0x209)],_0x490281['lat']]),_0xbf842=_0x490281[_0x14988a(0x20d)]||0x1,_0x49b8b7=Math['round']((_0x4515b3[0x0]-_0x2da16b['xmin'])/_0x2e0310),_0x2f5a4f=Math[_0x14988a(0x23e)]((_0x2da16b[_0x14988a(0x268)]-_0x4515b3[0x1])/_0x2e0310);_0x290a3f=Math[_0x14988a(0x236)](_0x290a3f,_0xbf842),_0x3a4325=Math[_0x14988a(0x269)](_0x3a4325,_0xbf842),_0x3c789c[_0x14988a(0x215)]({'x':_0x49b8b7,'y':_0x2f5a4f,'value':_0xbf842});});var _0x598b5b={'min':_0x3a4325,'max':_0x290a3f,'data':_0x3c789c};this[_0x537634(0x27f)]=_0x598b5b;(!this['_last_mBounds']||_0x2da16b[_0x537634(0x277)]!==this[_0x537634(0x222)][_0x537634(0x277)]||_0x2da16b[_0x537634(0x221)]!==this[_0x537634(0x222)][_0x537634(0x221)]||_0x2da16b[_0x537634(0x21d)]!==this['_last_mBounds'][_0x537634(0x21d)]||_0x2da16b['ymax']!==this['_last_mBounds'][_0x537634(0x268)])&&(this[_0x537634(0x222)]=_0x2da16b,!this[_0x537634(0x25a)]['container']&&(this[_0x537634(0x25a)][_0x537634(0x239)]=mars3d__namespace[_0x537634(0x246)][_0x537634(0x1f8)](_0x537634(0x204),'mars3d-heatmap',this['_map'][_0x537634(0x239)])),this[_0x537634(0x25a)]['container'][_0x537634(0x253)]['cssText']=_0x537634(0x27c)[_0x537634(0x1f3)](_0x4a57cc,'px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:')[_0x537634(0x1f3)](_0x5e9eb4,_0x537634(0x259)),!this[_0x537634(0x286)]?this[_0x537634(0x286)]=h337__namespace[_0x537634(0x1f8)](this[_0x537634(0x25a)]):this[_0x537634(0x286)][_0x537634(0x229)](this[_0x537634(0x25a)]));this[_0x537634(0x286)][_0x537634(0x223)](_0x598b5b);var _0x7856ce=this[_0x537634(0x286)][_0x537634(0x217)][_0x537634(0x276)][_0x537634(0x27d)](_0x537634(0x248));return this[_0x537634(0x25a)][_0x537634(0x239)]&&(this[_0x537634(0x260)][_0x537634(0x239)][_0x537634(0x241)](this['heatStyle'][_0x537634(0x239)]),delete this[_0x537634(0x25a)]['container']),_0x7856ce;}},{'key':_0x6c6f29(0x282),'value':function _0x242105(_0x382587){var _0x3e87df=_0x6c6f29;this[_0x3e87df(0x25c)](),this[_0x3e87df(0x275)]=new mars3d__namespace[(_0x3e87df(0x21f))][(_0x3e87df(0x22c))](_objectSpread2(_objectSpread2({},this['options']),{},{'rectangle':this[_0x3e87df(0x235)],'appearance':new Cesium[(_0x3e87df(0x214))]({'material':new Cesium[(_0x3e87df(0x231))]({'fabric':{'uniforms':{'image':_0x382587},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})})),this[_0x3e87df(0x25d)][_0x3e87df(0x27a)](this[_0x3e87df(0x275)]);}},{'key':_0x6c6f29(0x22b),'value':function _0x5cc1f9(_0x5982ac){var _0x1ef337=_0x6c6f29;this[_0x1ef337(0x25c)](),this[_0x1ef337(0x286)]['configure'](_objectSpread2(_objectSpread2({},this[_0x1ef337(0x25a)]),{},{'radius':this[_0x1ef337(0x25a)][_0x1ef337(0x1fe)]*this['style'][_0x1ef337(0x265)],'blur':this[_0x1ef337(0x25a)]['blur']*this['style'][_0x1ef337(0x284)],'gradient':this[_0x1ef337(0x25a)][_0x1ef337(0x25f)]||{0.25:_0x1ef337(0x24f),0.55:_0x1ef337(0x24b),0.85:'rgb(216,216,216)',0x1:_0x1ef337(0x20a)}}));var _0x1abcea=this[_0x1ef337(0x286)][_0x1ef337(0x217)][_0x1ef337(0x276)][_0x1ef337(0x27d)](_0x1ef337(0x248)),_0x5cfeab=Cesium['RenderState'][_0x1ef337(0x249)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x1ef337(0x289)][_0x1ef337(0x242)],'frontOperation':{'fail':Cesium[_0x1ef337(0x22a)]['KEEP'],'zFail':Cesium[_0x1ef337(0x22a)]['KEEP'],'zPass':Cesium[_0x1ef337(0x22a)][_0x1ef337(0x20f)]},'backFunction':Cesium[_0x1ef337(0x289)][_0x1ef337(0x242)],'backOperation':{'fail':Cesium[_0x1ef337(0x22a)][_0x1ef337(0x266)],'zFail':Cesium[_0x1ef337(0x22a)][_0x1ef337(0x266)],'zPass':Cesium['StencilOperation'][_0x1ef337(0x20f)]},'reference':0x2,'mask':0x2},'blending':Cesium[_0x1ef337(0x1fd)][_0x1ef337(0x279)]}),_0x1f274a=Math[_0x1ef337(0x258)](Cesium[_0x1ef337(0x21b)](this[_0x1ef337(0x253)]['diffHeight'],this['_mBoundsMax']*0.02))+0.1;this[_0x1ef337(0x253)][_0x1ef337(0x244)]&&delete this[_0x1ef337(0x253)]['diffHeight'];var _0xfaf36f=Cesium[_0x1ef337(0x21b)](this[_0x1ef337(0x253)][_0x1ef337(0x216)],0x64),_0x1bfccd=Math[_0x1ef337(0x236)](this[_0x1ef337(0x235)][_0x1ef337(0x20e)],this[_0x1ef337(0x235)][_0x1ef337(0x22f)]);this['style'][_0x1ef337(0x245)]=_0x1bfccd/=_0xfaf36f,this[_0x1ef337(0x275)]=new mars3d__namespace['graphic'][(_0x1ef337(0x22c))](_objectSpread2(_objectSpread2({},this[_0x1ef337(0x21e)]),{},{'rectangle':this[_0x1ef337(0x235)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'aboveGround':!![],'renderState':_0x5cfeab,'material':new Cesium[(_0x1ef337(0x231))]({'fabric':{'uniforms':{'image':_0x5982ac,'repeat':new Cesium[(_0x1ef337(0x28a))](0x1,0x1),'color':new Cesium[(_0x1ef337(0x261))](0x1,0x1,0x1,0.01),'bumpMap':_0x1abcea},'source':HeatMaterial},'translucent':!![]}),'vertexShaderSource':_0x1ef337(0x24e)[_0x1ef337(0x1f3)](_0x1f274a,';\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'),'flat':!![]})})),this[_0x1ef337(0x25d)][_0x1ef337(0x27a)](this[_0x1ef337(0x275)]);}},{'key':'getRectangle','value':function _0x98b52e(_0x4341a7){var _0x19bb62=_0x6c6f29;return _0x4341a7!==null&&_0x4341a7!==void 0x0&&_0x4341a7[_0x19bb62(0x26b)]&&this[_0x19bb62(0x235)]?mars3d__namespace[_0x19bb62(0x283)][_0x19bb62(0x26c)](this[_0x19bb62(0x235)]):this[_0x19bb62(0x235)];}}]),_0x1b8144;}(BaseLayer);mars3d__namespace[_0x6cd932(0x288)]['HeatLayer']=HeatLayer,mars3d__namespace[_0x6cd932(0x25b)]['register'](_0x6cd932(0x237),HeatLayer);function getMercatorBounds(_0x1a0e09){var _0x4294fd=_0x6cd932,_0x38678e=mars3d__namespace[_0x4294fd(0x224)][_0x4294fd(0x1f2)]([_0x1a0e09['xmin'],_0x1a0e09[_0x4294fd(0x221)]]),_0x23ecfa=mars3d__namespace[_0x4294fd(0x224)]['lonlat2mercator']([_0x1a0e09['xmax'],_0x1a0e09[_0x4294fd(0x268)]]);return{'xmin':_0x38678e[0x0],'ymin':_0x38678e[0x1],'xmax':_0x23ecfa[0x0],'ymax':_0x23ecfa[0x1]};}function geLatLngBounds(_0x32f185){var _0x54a713=_0x6cd932,_0x64711e=mars3d__namespace[_0x54a713(0x224)]['mercator2lonlat']([_0x32f185[_0x54a713(0x277)],_0x32f185[_0x54a713(0x221)]]),_0x2f61b7=mars3d__namespace['PointTrans'][_0x54a713(0x1fc)]([_0x32f185['xmax'],_0x32f185[_0x54a713(0x268)]]);return{'xmin':_0x64711e[0x0],'ymin':_0x64711e[0x1],'xmax':_0x2f61b7[0x0],'ymax':_0x2f61b7[0x1]};}exports[_0x6cd932(0x25e)]=HeatLayer,Object['defineProperty'](exports,_0x6cd932(0x26a),{'value':!![]});
}));
