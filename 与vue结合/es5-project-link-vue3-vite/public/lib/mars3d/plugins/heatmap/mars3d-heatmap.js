/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.3.13
 * 编译日期：2022-06-13 09:21:41
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';var _0x10320d=_0x22e6;(function(_0x5e9124,_0x5b68da){var _0x34eeda=_0x22e6,_0x4374a4=_0x5e9124();while(!![]){try{var _0x4dbc9d=parseInt(_0x34eeda(0x225))/0x1+-parseInt(_0x34eeda(0x264))/0x2*(parseInt(_0x34eeda(0x1f5))/0x3)+-parseInt(_0x34eeda(0x293))/0x4+parseInt(_0x34eeda(0x27f))/0x5*(-parseInt(_0x34eeda(0x222))/0x6)+parseInt(_0x34eeda(0x1fc))/0x7*(parseInt(_0x34eeda(0x259))/0x8)+-parseInt(_0x34eeda(0x244))/0x9*(-parseInt(_0x34eeda(0x24a))/0xa)+parseInt(_0x34eeda(0x1fe))/0xb*(parseInt(_0x34eeda(0x255))/0xc);if(_0x4dbc9d===_0x5b68da)break;else _0x4374a4['push'](_0x4374a4['shift']());}catch(_0x539ea6){_0x4374a4['push'](_0x4374a4['shift']());}}}(_0xea58,0x85907));function _interopNamespace(_0x12a948){var _0x1e9927=_0x22e6;if(_0x12a948&&_0x12a948[_0x1e9927(0x288)])return _0x12a948;var _0x3cb9db=Object[_0x1e9927(0x254)](null);return _0x12a948&&Object[_0x1e9927(0x252)](_0x12a948)[_0x1e9927(0x226)](function(_0x2396b8){var _0x8de054=_0x1e9927;if(_0x2396b8!=='default'){var _0x272dcc=Object[_0x8de054(0x248)](_0x12a948,_0x2396b8);Object['defineProperty'](_0x3cb9db,_0x2396b8,_0x272dcc['get']?_0x272dcc:{'enumerable':!![],'get':function(){return _0x12a948[_0x2396b8];}});}}),_0x3cb9db[_0x1e9927(0x266)]=_0x12a948,_0x3cb9db;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337);function ownKeys(_0x1867c0,_0x321ca9){var _0x340593=_0x22e6,_0x1001d7=Object['keys'](_0x1867c0);if(Object['getOwnPropertySymbols']){var _0x46a12e=Object[_0x340593(0x281)](_0x1867c0);_0x321ca9&&(_0x46a12e=_0x46a12e[_0x340593(0x278)](function(_0x23e883){return Object['getOwnPropertyDescriptor'](_0x1867c0,_0x23e883)['enumerable'];})),_0x1001d7[_0x340593(0x200)]['apply'](_0x1001d7,_0x46a12e);}return _0x1001d7;}function _objectSpread2(_0x2e74f5){var _0xe01c9f=_0x22e6;for(var _0x2acf9d=0x1;_0x2acf9d<arguments[_0xe01c9f(0x202)];_0x2acf9d++){var _0x5dc41f=null!=arguments[_0x2acf9d]?arguments[_0x2acf9d]:{};_0x2acf9d%0x2?ownKeys(Object(_0x5dc41f),!0x0)[_0xe01c9f(0x226)](function(_0x5700d3){_defineProperty(_0x2e74f5,_0x5700d3,_0x5dc41f[_0x5700d3]);}):Object['getOwnPropertyDescriptors']?Object['defineProperties'](_0x2e74f5,Object[_0xe01c9f(0x1f1)](_0x5dc41f)):ownKeys(Object(_0x5dc41f))[_0xe01c9f(0x226)](function(_0x1ac626){var _0x5c9294=_0xe01c9f;Object[_0x5c9294(0x215)](_0x2e74f5,_0x1ac626,Object[_0x5c9294(0x248)](_0x5dc41f,_0x1ac626));});}return _0x2e74f5;}function _classCallCheck(_0x1bc11e,_0x2be35b){var _0x1665e1=_0x22e6;if(!(_0x1bc11e instanceof _0x2be35b))throw new TypeError(_0x1665e1(0x23a));}function _defineProperties(_0x158ad9,_0x20c2bc){var _0x4593e9=_0x22e6;for(var _0x348c90=0x0;_0x348c90<_0x20c2bc[_0x4593e9(0x202)];_0x348c90++){var _0x140ce9=_0x20c2bc[_0x348c90];_0x140ce9[_0x4593e9(0x28d)]=_0x140ce9[_0x4593e9(0x28d)]||![],_0x140ce9[_0x4593e9(0x23f)]=!![];if(_0x4593e9(0x210)in _0x140ce9)_0x140ce9[_0x4593e9(0x239)]=!![];Object['defineProperty'](_0x158ad9,_0x140ce9['key'],_0x140ce9);}}function _createClass(_0x2182e6,_0x5a4f6e,_0x40c5d6){var _0x365044=_0x22e6;if(_0x5a4f6e)_defineProperties(_0x2182e6[_0x365044(0x282)],_0x5a4f6e);if(_0x40c5d6)_defineProperties(_0x2182e6,_0x40c5d6);return Object[_0x365044(0x215)](_0x2182e6,_0x365044(0x282),{'writable':![]}),_0x2182e6;}function _defineProperty(_0x326825,_0x3d879b,_0x48af32){return _0x3d879b in _0x326825?Object['defineProperty'](_0x326825,_0x3d879b,{'value':_0x48af32,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x326825[_0x3d879b]=_0x48af32,_0x326825;}function _inherits(_0x423a66,_0x22c75b){var _0x3a96c1=_0x22e6;if(typeof _0x22c75b!=='function'&&_0x22c75b!==null)throw new TypeError(_0x3a96c1(0x227));_0x423a66[_0x3a96c1(0x282)]=Object['create'](_0x22c75b&&_0x22c75b[_0x3a96c1(0x282)],{'constructor':{'value':_0x423a66,'writable':!![],'configurable':!![]}}),Object[_0x3a96c1(0x215)](_0x423a66,_0x3a96c1(0x282),{'writable':![]});if(_0x22c75b)_setPrototypeOf(_0x423a66,_0x22c75b);}function _getPrototypeOf(_0x239067){var _0x2d680b=_0x22e6;return _getPrototypeOf=Object[_0x2d680b(0x20c)]?Object[_0x2d680b(0x223)]:function _0x3ed1b2(_0x53b2ab){var _0x3bd73c=_0x2d680b;return _0x53b2ab[_0x3bd73c(0x257)]||Object[_0x3bd73c(0x223)](_0x53b2ab);},_getPrototypeOf(_0x239067);}function _setPrototypeOf(_0x576195,_0x31ba65){var _0x43ce44=_0x22e6;return _setPrototypeOf=Object[_0x43ce44(0x20c)]||function _0x1c37df(_0x1a4a44,_0x58e756){var _0x17f8a2=_0x43ce44;return _0x1a4a44[_0x17f8a2(0x257)]=_0x58e756,_0x1a4a44;},_setPrototypeOf(_0x576195,_0x31ba65);}function _isNativeReflectConstruct(){var _0x3f4b8d=_0x22e6;if(typeof Reflect===_0x3f4b8d(0x280)||!Reflect[_0x3f4b8d(0x20b)])return![];if(Reflect[_0x3f4b8d(0x20b)]['sham'])return![];if(typeof Proxy===_0x3f4b8d(0x1f9))return!![];try{return Boolean[_0x3f4b8d(0x282)][_0x3f4b8d(0x228)][_0x3f4b8d(0x28f)](Reflect[_0x3f4b8d(0x20b)](Boolean,[],function(){})),!![];}catch(_0x20d766){return![];}}function _assertThisInitialized(_0x321e23){var _0x48b007=_0x22e6;if(_0x321e23===void 0x0)throw new ReferenceError(_0x48b007(0x218));return _0x321e23;}function _possibleConstructorReturn(_0x8403df,_0xbdb38e){var _0x3d8455=_0x22e6;if(_0xbdb38e&&(typeof _0xbdb38e===_0x3d8455(0x206)||typeof _0xbdb38e===_0x3d8455(0x1f9)))return _0xbdb38e;else{if(_0xbdb38e!==void 0x0)throw new TypeError('Derived\x20constructors\x20may\x20only\x20return\x20object\x20or\x20undefined');}return _assertThisInitialized(_0x8403df);}function _createSuper(_0x939231){var _0x1b53d7=_isNativeReflectConstruct();return function _0x4d2143(){var _0x580a64=_0x22e6,_0x11dcc0=_getPrototypeOf(_0x939231),_0x460d99;if(_0x1b53d7){var _0x288a54=_getPrototypeOf(this)['constructor'];_0x460d99=Reflect[_0x580a64(0x20b)](_0x11dcc0,arguments,_0x288a54);}else _0x460d99=_0x11dcc0[_0x580a64(0x24b)](this,arguments);return _possibleConstructorReturn(this,_0x460d99);};}function _0xea58(){var _0xc0c4f9=['mJe1nJq4nfDeC2L4Cq','u3rLBMnPBe9WzxjHDgLVBG','zgvMyxvSDa','Ew1PBG','tg5Ntgf0ug9PBNq','s0vfua','zNjVBunHy2HL','vxrPBa','uKvqtefdrq','z2v0vMfSDwvbDa','Eg1PBG','x3jLBw92zwriB29R','ywrKr3jHCgHPyW','CMvJDgfUz2XL','CMvNAxn0zxi','z2v0ug9PBNreyxrH','x21HCa','sgvHDeXHEwvY','D2LKDgG','quXxqvLt','zMLSDgvY','zMX5vg9cEufUAw1HDgLVBKvUza','z3jHzgLLBNrbCMm','Aw1Hz2u','Dw5PzM9YBxm','CgfYC2u','oWOGicaGicaGicaGicbWicS9DMvJncHKAxnqB3mSmc4WktSkicaGicaGicaGicaGz2XFug9ZAxrPB24GpsbJEM1FBw9KzwXwAwv3uhjVAMvJDgLVBLjLBgf0AxzLvg9fEwuGkIbWoWOGicaGicaGicaGFqOGicaGicaGia','mJy5mhbwrffnqG','Dw5KzwzPBMvK','z2v0t3DUuhjVCgvYDhLtEw1IB2XZ','ChjVDg90ExbL','Dw5PzM9YBsbZyw1WBgvYmKqGAw1Hz2u7cMn6Bv9TyxrLCMLHBcbJEM1Fz2v0twf0zxjPywWOy3PTx21HDgvYAwfSsw5WDxqGBwf0zxjPywXjBNb1DcL7cIaGy3PTx21HDgvYAwfSig1HDgvYAwfSid0Gy3PTx2DLDerLzMf1BhrnyxrLCMLHBcHTyxrLCMLHBeLUChv0ktSkicb2zwmYihn0id0GBwf0zxjPywXjBNb1Dc5ZDdSkicb2zwm0ignVBg9Ysw1Hz2uGpsb0zxH0DxjLmKqOAw1Hz2uSC3qPoWOGigLMkgnVBg9Ysw1Hz2uUCMDIid09ihzLyZmOms4Wksb8FcbJB2XVCKLTywDLlNjNyIa9psb2zwmZkdaUmcKPEWOGicaGzgLZy2fYzdSkicb9cIaGBwf0zxjPywWUzgLMzNvZzsa9ignVBg9Ysw1Hz2uUCMDIoWOGig1HDgvYAwfSlMfSCgHHid0Gy29SB3jjBwfNzs5HoWOGihjLDhvYBIbTyxrLCMLHBdSkFqO','zNjVBurLz3jLzxm','CMvTB3zL','Cg9ZAxrPB25Z','x2DYyxbOAwm','x19LC01VzhvSzq','x21VDw50zwriB29R','zgvMyxvSDfzHBhvL','y2XLyxi','ywjZ','zw51BwvYywjSzq','AgvPz2H0','y2fSBa','yxjJuMfKAxvZu2nHBgu','zM9YBwf0uMvJDgfUz2XL','x3nLDe9WDgLVBNniB29R','mtq1nZiYmeTXrvD1vq','twf0zxjPywW','x2XHC3rFBujVDw5KCW','C2v0rgf0yq','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9YCW','q2vZAxvT','y29Uy2f0','Cg9PBNrZ','m056v0rJvq','CMvTB3zLtgf5zxi','CMDIkdaSmcWWkq','yMX1CG','zNvUy3rPB24','CMvTB3zLr3jHCgHPyW','BwLUq2fUDMfZu2L6zq','n3Hrr2vpqW','zgf0yq','mtG3zef5qNbp','Dg9bCNjHEq','ChvZAa','x3nJywXL','BgvUz3rO','tgf5zxjvDgLS','zgLMzKHLAwDODa','x2XHC3rFAgvHDerHDge','B2jQzwn0','x2nYzwf0zufYy0DYyxbOAwm','x2fKzgvKsg9VAW','Bgf0','AgvHDa','y29UC3rYDwn0','C2v0uhjVDg90ExbLt2y','x3jLBMrLCMvY','Bgf5zxi','ug9SEvv0AwW','DMfSDwu','yM9KEq','u3rLBMnPBez1BMn0Aw9U','z3jLzw4','CMvK','zgvMAw5LuhjVCgvYDhK','rg9TvxrPBa','Bwf4','DgHPCYbOyxnUj3qGyMvLBIbPBML0AwfSAxnLzcaTihn1CgvYkcKGAgfZBID0igjLzw4Gy2fSBgvK','quXqsefFqKXftKq','y29UzMLNDxjL','vKvsvevyx0zpuK1bva','zMX5vg8','CM91BMq','y29UDgfPBMvY','uMvUzgvYu3rHDgu','Bg5N','uMvJDgfUz2XLuhjPBwL0AxzL','mtaYntrite93qwq','z2v0uhjVDg90ExbLt2y','ywrKug9ZAxrPB24','mZG0mZu4vKLbzuf6','zM9YrwfJAa','u3vWzxiGzxHWCMvZC2LVBIbTDxn0igvPDgHLCIbIzsbUDwXSig9YigeGzNvUy3rPB24','DMfSDwvpzG','B3b0Aw9UCW','ug9PBNruCMfUCW','x3jLy3rHBMDSzq','ChG7','x2HLyxq','x2nYzwf0zuDYyxbOAwm','y2fUDMfZ','yxjJ','zgL2','y29WEunHBNzHCW','BwvYy2f0B3iYBg9UBgf0','Bwf4q2fUDMfZu2L6zq','y3nZvgv4Da','x21cB3vUzhnnyxG','q2fYDgvZAwfUmG','yMX1zq','D3jPDgfIBgu','q2fUBM90ignHBgWGysbJBgfZCYbHCYbHigz1BMn0Aw9U','Eg1HEa','AxngB3jTyxq','CMDIkdi1nsWYntuSmJu1kq','BwfYCZnKlwHLyxrTyxaGBwfYCZnKlwHPzgveAxy','y29UzMLNDxjHyMXL','qMXLBMrPBMDtDgf0zq','C2HVDW','y2XPzw50v2LKDgG','qMfZzuXHEwvY','mJCZmJe0oevPyKfrCW','x3bVC2L0Aw9UCW','yNvTCe1HCa','q29SB3i','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','z3jHBNvSyxjPDhK','mJbcD1HLDfu','yxbWBhK','x21HCNmZzf9WCML2yxrL','zMXVB3i','BwLU','r3jHCgHPy0XHEwvY','ChG7AgvPz2H0oG','Ew1HEa','A2v5CW','EwvSBg93','y3jLyxrL','mti3ndu0neDWvMjhwq','y3r4','x19WCM90B19F','x2DLDefYy0HLyxrdyw52yxm','odK1nJK2EgjtqLjs','x3vWzgf0zvbVC2L0Aw9UC0HVB2S','rwXSAxbZB2LKu3vYzMfJzufWCgvHCMfUy2u','z2v0sw1Hz2veyxrH','C3r5Bgu','Bg9UBgf0mM1LCMnHDg9Y','BwvYz2u','AgvHDfn0EwXL','x2XHEwvY','6k+35BYv5ywLigHLyxrTyxaUANmG5BQtia','CMfKAxvZ'];_0xea58=function(){return _0xc0c4f9;};return _0xea58();}var HeatMaterial=_0x10320d(0x283);if(!h337__namespace[_0x10320d(0x254)])throw new Error(_0x10320d(0x262));var Cesium=mars3d__namespace[_0x10320d(0x1f2)],BaseLayer=mars3d__namespace[_0x10320d(0x20e)][_0x10320d(0x243)],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:_0x10320d(0x238),0.6:_0x10320d(0x213),0.8:_0x10320d(0x253),0.9:_0x10320d(0x214)}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium[_0x10320d(0x25b)][_0x10320d(0x21b)]},HeatLayer=function(_0x2d041d){var _0x51f13b=_0x10320d;_inherits(_0x5a710f,_0x2d041d);var _0x259503=_createSuper(_0x5a710f);function _0x5a710f(){var _0x52db9d=_0x22e6,_0x50d5c1,_0x169494=arguments[_0x52db9d(0x202)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x5a710f),_0x50d5c1=_0x259503[_0x52db9d(0x28f)](this,_0x169494),_0x50d5c1['options'][_0x52db9d(0x234)]=Cesium[_0x52db9d(0x28a)](_0x50d5c1[_0x52db9d(0x229)][_0x52db9d(0x234)],document[_0x52db9d(0x211)][_0x52db9d(0x242)]),_0x50d5c1[_0x52db9d(0x229)][_0x52db9d(0x234)]=Math[_0x52db9d(0x24e)](_0x50d5c1[_0x52db9d(0x229)][_0x52db9d(0x234)],0x1388),_0x50d5c1[_0x52db9d(0x229)][_0x52db9d(0x1fb)]=Cesium[_0x52db9d(0x28a)](_0x50d5c1[_0x52db9d(0x229)][_0x52db9d(0x1fb)],document[_0x52db9d(0x211)]['clientHeight']),_0x50d5c1[_0x52db9d(0x229)]['minCanvasSize']=Math[_0x52db9d(0x217)](_0x50d5c1[_0x52db9d(0x229)][_0x52db9d(0x1fb)],0x2bc),_0x50d5c1[_0x52db9d(0x229)][_0x52db9d(0x260)]=_objectSpread2(_objectSpread2({},DEF_HEATSTYLE),_0x50d5c1[_0x52db9d(0x229)]['heatStyle']||{}),_0x50d5c1['options'][_0x52db9d(0x25d)]=_objectSpread2(_objectSpread2({},DEF_STYLE),_0x50d5c1[_0x52db9d(0x229)][_0x52db9d(0x25d)]||{}),_0x50d5c1;}return _createClass(_0x5a710f,[{'key':_0x51f13b(0x20e),'get':function _0x2e89e0(){return this['_layer'];}},{'key':'heatStyle','get':function _0x128621(){var _0x3a5441=_0x51f13b;return this[_0x3a5441(0x229)][_0x3a5441(0x260)];},'set':function _0x5568c3(_0x2b2c5b){var _0xa37fd9=_0x51f13b;this[_0xa37fd9(0x229)][_0xa37fd9(0x260)]=mars3d__namespace[_0xa37fd9(0x26b)]['merge'](this[_0xa37fd9(0x229)][_0xa37fd9(0x260)],_0x2b2c5b),this[_0xa37fd9(0x22d)]&&(this[_0xa37fd9(0x22d)][_0xa37fd9(0x21a)](this[_0xa37fd9(0x229)]['heatStyle']),this[_0xa37fd9(0x25a)](!![]));}},{'key':_0x51f13b(0x25d),'get':function _0x2ad304(){var _0x2763e2=_0x51f13b;return this[_0x2763e2(0x229)][_0x2763e2(0x25d)];},'set':function _0x1eabf9(_0xc46d81){var _0x393757=_0x51f13b;this[_0x393757(0x229)][_0x393757(0x25d)]=mars3d__namespace['Util'][_0x393757(0x25f)](this[_0x393757(0x229)][_0x393757(0x25d)],_0xc46d81);}},{'key':_0x51f13b(0x286),'get':function _0x5f0a2a(){var _0x2d488d=_0x51f13b;return this[_0x2d488d(0x245)];},'set':function _0x1506ac(_0x395c9e){this['setPositions'](_0x395c9e);}},{'key':'coordinates','get':function _0x4c3f79(){var _0x38be26=_0x51f13b,_0x1548eb=[];return this[_0x38be26(0x1f4)][_0x38be26(0x226)](function(_0x3a59df){var _0x7864c7=_0x38be26;_0x1548eb[_0x7864c7(0x200)](_0x3a59df[_0x7864c7(0x1ff)]());}),_0x1548eb;}},{'key':_0x51f13b(0x271),'get':function _0x1acf24(){var _0x31ad09=_0x51f13b;return this[_0x31ad09(0x22b)];}},{'key':_0x51f13b(0x292),'value':function _0x3e6dbf(_0x2b692c){var _0x1711f3=_0x51f13b;_0x2b692c['positions']&&(this[_0x1711f3(0x286)]=_0x2b692c[_0x1711f3(0x286)]);}},{'key':_0x51f13b(0x289),'value':function _0x1eb923(){var _0x376fa2=_0x51f13b;this[_0x376fa2(0x261)]=new mars3d__namespace[(_0x376fa2(0x20e))][(_0x376fa2(0x24f))]({'noLayerManage':!![]}),this[_0x376fa2(0x261)][_0x376fa2(0x24c)]=!![];}},{'key':_0x51f13b(0x208),'value':function _0x205094(){var _0x32d2f7=_0x51f13b;this['_map']['addLayer'](this[_0x32d2f7(0x261)]),this['options'][_0x32d2f7(0x286)]&&(this[_0x32d2f7(0x286)]=this[_0x32d2f7(0x229)][_0x32d2f7(0x286)]),this[_0x32d2f7(0x229)][_0x32d2f7(0x21c)]&&this[_0x32d2f7(0x279)]();}},{'key':_0x51f13b(0x26f),'value':function _0x105818(){var _0x370647=_0x51f13b;this[_0x370647(0x260)][_0x370647(0x21e)]&&(mars3d__namespace[_0x370647(0x216)][_0x370647(0x285)](this['heatStyle'][_0x370647(0x21e)]),delete this[_0x370647(0x260)][_0x370647(0x21e)]),this[_0x370647(0x28b)](),this[_0x370647(0x274)][_0x370647(0x1f6)](this[_0x370647(0x261)]);}},{'key':_0x51f13b(0x224),'value':function _0x17eb24(_0x186ce7,_0x3bd4b1){var _0x41398d=_0x51f13b;this['_positions']=this[_0x41398d(0x245)]||[],this[_0x41398d(0x245)][_0x41398d(0x200)](_0x186ce7),this[_0x41398d(0x25a)](_0x3bd4b1);}},{'key':'setPositions','value':function _0x1450af(_0xa95aab,_0x5ac797){var _0x4ff2f7=_0x51f13b;this[_0x4ff2f7(0x245)]=_0xa95aab,this[_0x4ff2f7(0x25a)](_0x5ac797);}},{'key':_0x51f13b(0x28b),'value':function _0x2fd241(){var _0x341567=_0x51f13b;this[_0x341567(0x287)]&&(this[_0x341567(0x261)][_0x341567(0x1fa)](this[_0x341567(0x287)],!![]),delete this[_0x341567(0x287)]);}},{'key':'_updatePositionsHook','value':function _0x5a4d88(_0x13891b){var _0x32fddd=_0x51f13b;if(!this[_0x32fddd(0x241)]||!this['_map']||!this[_0x32fddd(0x286)]||this['positions'][_0x32fddd(0x202)]===0x0)return this;var _0xa2ca38=this['_getHeatCanvas']();return this['style'][_0x32fddd(0x230)]?this[_0x32fddd(0x287)]&&_0x13891b?(this['_graphic'][_0x32fddd(0x27c)][_0x32fddd(0x27b)]=_0xa2ca38,this[_0x32fddd(0x287)]['uniforms'][_0x32fddd(0x246)]=this[_0x32fddd(0x258)]()):this[_0x32fddd(0x207)](_0xa2ca38):this[_0x32fddd(0x287)]&&_0x13891b?this[_0x32fddd(0x287)][_0x32fddd(0x27c)][_0x32fddd(0x27b)]=_0xa2ca38:this[_0x32fddd(0x22e)](_0xa2ca38),this;}},{'key':_0x51f13b(0x22e),'value':function _0x42ede4(_0x254119){var _0x9ffdab=_0x51f13b;this['clear'](),this[_0x9ffdab(0x287)]=new mars3d__namespace['graphic'][(_0x9ffdab(0x221))](_objectSpread2(_objectSpread2({},this['options']),{},{'rectangle':this[_0x9ffdab(0x22b)],'appearance':new Cesium[(_0x9ffdab(0x25b))]({'material':new Cesium[(_0x9ffdab(0x294))]({'fabric':{'uniforms':{'image':_0x254119},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})})),this[_0x9ffdab(0x261)][_0x9ffdab(0x270)](this['_graphic']);}},{'key':'_createArcGraphic','value':function _0x35b340(_0x4d0e40){var _0x321c44=_0x51f13b;this[_0x321c44(0x28b)]();var _0xeba075=Cesium[_0x321c44(0x21f)][_0x321c44(0x26a)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x321c44(0x212)][_0x321c44(0x277)],'frontOperation':{'fail':Cesium[_0x321c44(0x265)][_0x321c44(0x269)],'zFail':Cesium[_0x321c44(0x265)][_0x321c44(0x269)],'zPass':Cesium[_0x321c44(0x265)][_0x321c44(0x26c)]},'backFunction':Cesium[_0x321c44(0x212)][_0x321c44(0x277)],'backOperation':{'fail':Cesium[_0x321c44(0x265)][_0x321c44(0x269)],'zFail':Cesium[_0x321c44(0x265)][_0x321c44(0x269)],'zPass':Cesium['StencilOperation'][_0x321c44(0x26c)]},'reference':0x2,'mask':0x2},'blending':Cesium[_0x321c44(0x240)][_0x321c44(0x219)]}),_0x1c484c=Math[_0x321c44(0x24d)](Cesium['defaultValue'](this['style'][_0x321c44(0x204)],this[_0x321c44(0x236)]*0.02))+0.1;this[_0x321c44(0x25d)][_0x321c44(0x204)]&&delete this[_0x321c44(0x25d)][_0x321c44(0x204)];var _0x6f29e9=Cesium['defaultValue'](this[_0x321c44(0x25d)]['splitNum'],0x64),_0x219f51=Math[_0x321c44(0x217)](this[_0x321c44(0x22b)][_0x321c44(0x28e)],this[_0x321c44(0x22b)][_0x321c44(0x276)]);this['style'][_0x321c44(0x249)]=_0x219f51/=_0x6f29e9,this[_0x321c44(0x287)]=new mars3d__namespace['graphic']['RectanglePrimitive'](_objectSpread2(_objectSpread2({},this['options']),{},{'rectangle':this[_0x321c44(0x22b)],'appearance':new Cesium[(_0x321c44(0x25b))]({'aboveGround':!![],'renderState':_0xeba075,'material':new Cesium[(_0x321c44(0x294))]({'fabric':{'uniforms':{'image':_0x4d0e40,'repeat':new Cesium[(_0x321c44(0x237))](0x1,0x1),'color':new Cesium[(_0x321c44(0x247))](0x1,0x1,0x1,0.01),'bumpMap':this[_0x321c44(0x258)]()},'source':HeatMaterial},'translucent':!![]}),'vertexShaderSource':'attribute\x20vec3\x20position3DHigh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20attribute\x20vec3\x20position3DLow;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20attribute\x20vec2\x20st;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20attribute\x20float\x20batchId;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20v_positionMC;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20v_positionEC;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20v_st;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20color\x20=\x20texture2D(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'['concat'](_0x1c484c,_0x321c44(0x27e)),'flat':!![]})})),this['_layer'][_0x321c44(0x270)](this['_graphic']);}},{'key':'getRectangle','value':function _0x284d35(_0x337f46){var _0x21657d=_0x51f13b;return _0x337f46!==null&&_0x337f46!==void 0x0&&_0x337f46[_0x21657d(0x23c)]&&this[_0x21657d(0x22b)]?mars3d__namespace[_0x21657d(0x20f)][_0x21657d(0x291)](this[_0x21657d(0x22b)]):this[_0x21657d(0x22b)];}},{'key':'_getHeatCanvas','value':function _0x21b956(){var _0x56cc50=_0x51f13b,_0x20972a=this,_0xf8d751,_0xb32e1,_0x324ba4=this['_positions'],_0x50c339=[],_0x4445f7,_0x538398,_0x2966bc,_0x345ab7;_0x324ba4[_0x56cc50(0x226)](function(_0x231721){var _0x27097f=_0x56cc50,_0x54ea23=mars3d__namespace[_0x27097f(0x268)][_0x27097f(0x27d)](_0x231721);if(!_0x54ea23)return;_0x54ea23[_0x27097f(0x210)]=_0x231721[_0x27097f(0x210)]||0x1,!_0x20972a['options'][_0x27097f(0x271)]&&(_0x4445f7===undefined?(_0x4445f7=_0x54ea23[_0x27097f(0x220)],_0x538398=_0x54ea23[_0x27097f(0x220)],_0x2966bc=_0x54ea23[_0x27097f(0x209)],_0x345ab7=_0x54ea23['lat']):(_0x4445f7=Math[_0x27097f(0x24e)](_0x4445f7,_0x54ea23[_0x27097f(0x220)]),_0x538398=Math[_0x27097f(0x217)](_0x538398,_0x54ea23[_0x27097f(0x220)]),_0x2966bc=Math[_0x27097f(0x24e)](_0x2966bc,_0x54ea23['lat']),_0x345ab7=Math[_0x27097f(0x217)](_0x345ab7,_0x54ea23['lat']))),_0x50c339[_0x27097f(0x200)](_0x54ea23);});var _0x4dc723=this['options'][_0x56cc50(0x271)]||{'xmin':_0x4445f7,'xmax':_0x538398,'ymin':_0x2966bc,'ymax':_0x345ab7},_0x345057=getMercatorBounds(_0x4dc723),_0x3eefbe=Math[_0x56cc50(0x28c)](_0x345057['xmax']-_0x345057[_0x56cc50(0x26e)]),_0x43e9eb=Math['abs'](_0x345057[_0x56cc50(0x251)]-_0x345057['ymin']),_0x4c23da=Math['max'](_0x3eefbe,_0x43e9eb),_0x10273b=Math[_0x56cc50(0x24e)](_0x3eefbe,_0x43e9eb);this['_mBoundsMax']=_0x4c23da;var _0x59b356=0x1;if(_0x4c23da>this['options']['maxCanvasSize'])_0x59b356=_0x4c23da/this[_0x56cc50(0x229)]['maxCanvasSize'],_0x10273b/_0x59b356<this['options'][_0x56cc50(0x1fb)]&&(_0x59b356=_0x10273b/this[_0x56cc50(0x229)][_0x56cc50(0x1fb)]);else _0x10273b<this[_0x56cc50(0x229)][_0x56cc50(0x1fb)]&&(_0x59b356=_0x10273b/this['options'][_0x56cc50(0x1fb)],_0x4c23da/_0x59b356>this[_0x56cc50(0x229)][_0x56cc50(0x234)]&&(_0x59b356=_0x4c23da/this['options']['maxCanvasSize']));var _0x522888=this[_0x56cc50(0x260)][_0x56cc50(0x263)]*1.5,_0x5b95fc=_0x3eefbe/_0x59b356+_0x522888*0x2,_0x244a28=_0x43e9eb/_0x59b356+_0x522888*0x2,_0x90c3cf=_0x522888*_0x59b356;_0x345057[_0x56cc50(0x26e)]-=_0x90c3cf,_0x345057['ymin']-=_0x90c3cf,_0x345057['xmax']+=_0x90c3cf,_0x345057[_0x56cc50(0x251)]+=_0x90c3cf,this['_scale']=_0x59b356,_0x4dc723=geLatLngBounds(_0x345057),this['_rectangle']=Cesium['Rectangle'][_0x56cc50(0x284)](_0x4dc723[_0x56cc50(0x26e)],_0x4dc723[_0x56cc50(0x267)],_0x4dc723[_0x56cc50(0x23b)],_0x4dc723['ymax']);var _0x15a8b7=(_0xf8d751=_0x50c339[0x0][_0x56cc50(0x210)])!==null&&_0xf8d751!==void 0x0?_0xf8d751:0x1,_0x34257b=(_0xb32e1=_0x50c339[0x0][_0x56cc50(0x210)])!==null&&_0xb32e1!==void 0x0?_0xb32e1:0x0,_0x404eca=[];_0x50c339['forEach'](function(_0x4052d0){var _0x47ce41=_0x56cc50,_0xbc8c1a=mars3d__namespace['PointTrans'][_0x47ce41(0x25e)]([_0x4052d0[_0x47ce41(0x220)],_0x4052d0[_0x47ce41(0x209)]]),_0x2ca0ad=_0x4052d0[_0x47ce41(0x210)]||0x1,_0x5915df=Math['round']((_0xbc8c1a[0x0]-_0x345057['xmin'])/_0x59b356),_0xb57fe3=Math[_0x47ce41(0x21d)]((_0x345057[_0x47ce41(0x251)]-_0xbc8c1a[0x1])/_0x59b356);_0x15a8b7=Math[_0x47ce41(0x217)](_0x15a8b7,_0x2ca0ad),_0x34257b=Math[_0x47ce41(0x24e)](_0x34257b,_0x2ca0ad),_0x404eca[_0x47ce41(0x200)]({'x':_0x5915df,'y':_0xb57fe3,'value':_0x2ca0ad});});var _0x223aeb={'min':Cesium[_0x56cc50(0x28a)](this[_0x56cc50(0x229)]['min'],_0x34257b),'max':Cesium[_0x56cc50(0x28a)](this[_0x56cc50(0x229)][_0x56cc50(0x217)],_0x15a8b7),'data':_0x404eca};this[_0x56cc50(0x205)]=_0x223aeb;(!this['_last_mBounds']||_0x345057[_0x56cc50(0x26e)]!==this[_0x56cc50(0x295)][_0x56cc50(0x26e)]||_0x345057[_0x56cc50(0x267)]!==this['_last_mBounds'][_0x56cc50(0x267)]||_0x345057[_0x56cc50(0x23b)]!==this[_0x56cc50(0x295)]['xmax']||_0x345057[_0x56cc50(0x251)]!==this[_0x56cc50(0x295)]['ymax'])&&(this[_0x56cc50(0x295)]=_0x345057,!this[_0x56cc50(0x260)][_0x56cc50(0x21e)]&&(this[_0x56cc50(0x260)][_0x56cc50(0x21e)]=mars3d__namespace[_0x56cc50(0x216)][_0x56cc50(0x254)](_0x56cc50(0x231),_0x56cc50(0x23e),this[_0x56cc50(0x274)][_0x56cc50(0x21e)])),this[_0x56cc50(0x260)][_0x56cc50(0x21e)][_0x56cc50(0x25d)][_0x56cc50(0x235)]='width:'[_0x56cc50(0x1f3)](_0x5b95fc,_0x56cc50(0x250))[_0x56cc50(0x1f3)](_0x244a28,_0x56cc50(0x22c)),!this['_heat']?this[_0x56cc50(0x22d)]=h337__namespace[_0x56cc50(0x254)](this[_0x56cc50(0x260)]):this[_0x56cc50(0x22d)][_0x56cc50(0x21a)](this['heatStyle']));this[_0x56cc50(0x22d)][_0x56cc50(0x296)](_0x223aeb);var _0x5630be=mars3d__namespace['DomUtil'][_0x56cc50(0x232)](this['_heat'][_0x56cc50(0x20d)][_0x56cc50(0x22f)]);return _0x5630be;}},{'key':_0x51f13b(0x258),'value':function _0xe2b6ac(){var _0x52b8ee=_0x51f13b;this[_0x52b8ee(0x22d)][_0x52b8ee(0x21a)]({'radius':this[_0x52b8ee(0x260)][_0x52b8ee(0x263)]*this[_0x52b8ee(0x25d)][_0x52b8ee(0x290)],'blur':this[_0x52b8ee(0x260)][_0x52b8ee(0x1f8)]*this['style']['arcBlurScale'],'gradient':this[_0x52b8ee(0x260)][_0x52b8ee(0x27a)]||{0.25:_0x52b8ee(0x1f7),0.55:'rgb(140,140,140)',0.85:'rgb(216,216,216)',0x1:_0x52b8ee(0x23d)}});var _0x22d2e6=mars3d__namespace[_0x52b8ee(0x216)]['copyCanvas'](this[_0x52b8ee(0x22d)]['_renderer']['canvas']);return this['_heat'][_0x52b8ee(0x21a)](this['options']['heatStyle']),_0x22d2e6;}},{'key':_0x51f13b(0x273),'value':function _0xdd1cfb(_0x2b9f77){var _0xe7e374=_0x51f13b,_0xead2e=mars3d__namespace['LngLatPoint']['parse'](_0x2b9f77);if(!_0xead2e)return{};var _0x3c61de=mars3d__namespace[_0xe7e374(0x22a)][_0xe7e374(0x25e)]([_0xead2e[_0xe7e374(0x220)],_0xead2e[_0xe7e374(0x209)]]),_0x17a6cb=this['_last_mBounds'],_0x99745a=Math[_0xe7e374(0x21d)]((_0x3c61de[0x0]-_0x17a6cb[_0xe7e374(0x26e)])/this[_0xe7e374(0x201)]),_0x5df4f0=Math['round']((_0x17a6cb[_0xe7e374(0x251)]-_0x3c61de[0x1])/this[_0xe7e374(0x201)]),_0x263adb=this[_0xe7e374(0x22d)][_0xe7e374(0x26d)]({'x':_0x99745a,'y':_0x5df4f0}),_0x133397=this[_0xe7e374(0x22d)][_0xe7e374(0x20d)][_0xe7e374(0x256)][_0xe7e374(0x25c)](_0x99745a-0x1,_0x5df4f0-0x1,0x1,0x1)[_0xe7e374(0x1fd)];return{'x':_0x99745a,'y':_0x5df4f0,'value':_0x263adb,'color':'rgba('+_0x133397[0x0]+','+_0x133397[0x1]+','+_0x133397[0x2]+','+_0x133397[0x3]+')'};}}]),_0x5a710f;}(BaseLayer);mars3d__namespace[_0x10320d(0x20e)][_0x10320d(0x275)]=HeatLayer,mars3d__namespace[_0x10320d(0x203)][_0x10320d(0x272)](_0x10320d(0x20a),HeatLayer);function getMercatorBounds(_0x129e55){var _0x405f76=_0x10320d,_0x1311dd=mars3d__namespace[_0x405f76(0x22a)][_0x405f76(0x25e)]([_0x129e55[_0x405f76(0x26e)],_0x129e55['ymin']]),_0x299bc7=mars3d__namespace[_0x405f76(0x22a)][_0x405f76(0x25e)]([_0x129e55[_0x405f76(0x23b)],_0x129e55[_0x405f76(0x251)]]);return{'xmin':_0x1311dd[0x0],'ymin':_0x1311dd[0x1],'xmax':_0x299bc7[0x0],'ymax':_0x299bc7[0x1]};}function geLatLngBounds(_0x24b486){var _0x4dadfe=_0x10320d,_0x298e54=mars3d__namespace[_0x4dadfe(0x22a)]['mercator2lonlat']([_0x24b486[_0x4dadfe(0x26e)],_0x24b486[_0x4dadfe(0x267)]]),_0x5a7e98=mars3d__namespace[_0x4dadfe(0x22a)][_0x4dadfe(0x233)]([_0x24b486['xmax'],_0x24b486[_0x4dadfe(0x251)]]);return{'xmin':_0x298e54[0x0],'ymin':_0x298e54[0x1],'xmax':_0x5a7e98[0x0],'ymax':_0x5a7e98[0x1]};}function _0x22e6(_0x595d58,_0x53f6ee){var _0xea5879=_0xea58();return _0x22e6=function(_0x22e67d,_0x14f311){_0x22e67d=_0x22e67d-0x1f1;var _0x2e450d=_0xea5879[_0x22e67d];if(_0x22e6['GrpUgd']===undefined){var _0x3e1baa=function(_0x12a948){var _0x3cb9db='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x2396b8='',_0x272dcc='';for(var _0x1867c0=0x0,_0x321ca9,_0x1001d7,_0x46a12e=0x0;_0x1001d7=_0x12a948['charAt'](_0x46a12e++);~_0x1001d7&&(_0x321ca9=_0x1867c0%0x4?_0x321ca9*0x40+_0x1001d7:_0x1001d7,_0x1867c0++%0x4)?_0x2396b8+=String['fromCharCode'](0xff&_0x321ca9>>(-0x2*_0x1867c0&0x6)):0x0){_0x1001d7=_0x3cb9db['indexOf'](_0x1001d7);}for(var _0x23e883=0x0,_0x2e74f5=_0x2396b8['length'];_0x23e883<_0x2e74f5;_0x23e883++){_0x272dcc+='%'+('00'+_0x2396b8['charCodeAt'](_0x23e883)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x272dcc);};_0x22e6['osyFEp']=_0x3e1baa,_0x595d58=arguments,_0x22e6['GrpUgd']=!![];}var _0x1c779f=_0xea5879[0x0],_0x2ef6bd=_0x22e67d+_0x1c779f,_0x14523b=_0x595d58[_0x2ef6bd];return!_0x14523b?(_0x2e450d=_0x22e6['osyFEp'](_0x2e450d),_0x595d58[_0x2ef6bd]=_0x2e450d):_0x2e450d=_0x14523b,_0x2e450d;},_0x22e6(_0x595d58,_0x53f6ee);}exports[_0x10320d(0x275)]=HeatLayer,Object['defineProperty'](exports,_0x10320d(0x288),{'value':!![]});
}));
