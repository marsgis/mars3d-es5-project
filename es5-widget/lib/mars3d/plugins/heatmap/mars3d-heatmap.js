/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.3.8
 * 编译日期：2022-05-04 11:41:13
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';var _0x46e429=_0x3f98;(function(_0x481417,_0x548bdc){var _0x3e574e=_0x3f98,_0x2e6011=_0x481417();while(!![]){try{var _0x334a2b=parseInt(_0x3e574e(0x218))/0x1+-parseInt(_0x3e574e(0x21c))/0x2*(-parseInt(_0x3e574e(0x206))/0x3)+-parseInt(_0x3e574e(0x236))/0x4*(-parseInt(_0x3e574e(0x22f))/0x5)+-parseInt(_0x3e574e(0x23c))/0x6*(-parseInt(_0x3e574e(0x1fb))/0x7)+parseInt(_0x3e574e(0x1dd))/0x8*(parseInt(_0x3e574e(0x223))/0x9)+parseInt(_0x3e574e(0x1cb))/0xa*(-parseInt(_0x3e574e(0x1f8))/0xb)+parseInt(_0x3e574e(0x20a))/0xc*(-parseInt(_0x3e574e(0x259))/0xd);if(_0x334a2b===_0x548bdc)break;else _0x2e6011['push'](_0x2e6011['shift']());}catch(_0x113f8c){_0x2e6011['push'](_0x2e6011['shift']());}}}(_0x5536,0x2ba45));function _0x5536(){var _0x13abc2=['qMXLBMrPBMDtDgf0zq','ChvZAa','x2XHC3rFAgvHDerHDge','C2v0uhjVDg90ExbLt2y','zM9YrwfJAa','y2XPzw50v2LKDgG','mZLSz3P3C1e','A2v5CW','Ew1PBG','Eg1HEa','Ew1HEa','y2fUDMfZ','zgvMAw5LuhjVCgvYDhK','uMvUzgvYu3rHDgu','u3vWzxiGzxHWCMvZC2LVBIbTDxn0igvPDgHLCIbIzsbUDwXSig9YigeGzNvUy3rPB24','mtb5A3DSAKG','AxngB3jTyxq','BwfYCZnKlwHLyxrTyxa','A2v5','ug9SEvv0AwW','quXqsefFqKXftKq','q2fUBM90ignHBgWGysbJBgfZCYbHCYbHigz1BMn0Aw9U','y2fSBa','q2fYDgvZAwfUmG','z2v0t3DUuhjVCgvYDhLtEw1IB2XZ','x2DLDeHLyxrdyw52yxnjBwC','Dw5PzM9YBsbZyw1WBgvYmKqGAw1Hz2u7cMn6Bv9TyxrLCMLHBcbJEM1Fz2v0twf0zxjPywWOy3PTx21HDgvYAwfSsw5WDxqGBwf0zxjPywXjBNb1DcL7cIaGy3PTx21HDgvYAwfSig1HDgvYAwfSid0Gy3PTx2DLDerLzMf1BhrnyxrLCMLHBcHTyxrLCMLHBeLUChv0ktSkicb2zwmYihn0id0GBwf0zxjPywXjBNb1Dc5ZDdSkicb2zwm0ignVBg9Ysw1Hz2uGpsb0zxH0DxjLmKqOAw1Hz2uSC3qPoWOGigLMkgnVBg9Ysw1Hz2uUCMDIid09ihzLyZmOms4Wksb8FcbJB2XVCKLTywDLlNjNyIa9psb2zwmZkdaUmcKPEWOGicaGzgLZy2fYzdSkicb9cIaGBwf0zxjPywWUzgLMzNvZzsa9ignVBg9Ysw1Hz2uUCMDIoWOGig1HDgvYAwfSlMfSCgHHid0Gy29SB3jjBwfNzs5HoWOGihjLDhvYBIbTyxrLCMLHBdSkFqO','x2nYzwf0zufYy0DYyxbOAwm','yM9KEq','C2HHBq','zM9YBwf0uMvJDgfUz2XL','zMX5vg9cEufUAw1HDgLVBKvUza','y29UDgfPBMvY','oe9ltNPIqq','Dw5KzwzPBMvK','CM91BMq','y29Uy2f0','ChjVDg90ExbL','zNjVBurLz3jLzxm','uMvJDgfUz2XLuhjPBwL0AxzL','zNjVBunHy2HL','u3rLBMnPBez1BMn0Aw9U','DgHPCYbOyxnUj3qGyMvLBIbPBML0AwfSAxnLzcaTihn1CgvYkcKGAgfZBID0igjLzw4Gy2fSBgvK','q29SB3i','B2jQzwn0','rwXSAxbZB2LKu3vYzMfJzufWCgvHCMfUy2u','cIaGicaGicaGBwfYz2LUoJa7cIaGicaGicaGD2LKDgG6','Dg9eyxrHvvjm','Aw1Hz2uVCg5N','CMvTB3zLtgf5zxi','oWOGicaGicaGicaGicbWicS9DMvJncHKAxnqB3mSmc4WktSkicaGicaGicaGicaGz2XFug9ZAxrPB24GpsbJEM1FBw9KzwXwAwv3uhjVAMvJDgLVBLjLBgf0AxzLvg9fEwuGkIbWoWOGicaGicaGicaGFqOGicaGicaGia','zgvMAw5LuhjVCgvYDgLLCW','x21cB3vUzhnnyxG','Cg9ZAxrPB25Z','vKvsvevyx0zpuK1bva','Eg1PBG','CMfKAxvZ','yxjJqMX1CLnJywXL','zMX5vg8','q2vZAxvT','mZaWmtK3n2HmugPwsa','ywjZ','Bgf0','ntqXodD3CNHpD3u','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9YCW','u3rLBMnPBe9WzxjHDgLVBG','CMDIkdiXnIWYmtySmJe2kq','C2v0rgf0yq','x2DYyxbOAwm','Bg5N','BwvYy2f0B3iYBg9UBgf0','AgvHDfn0EwXL','x2nYzwf0zuDYyxbOAwm','yMX1zq','nKfWvefysW','D2LKDgG','Bwf4q2fUDMfZu2L6zq','ywrKug9ZAxrPB24','mJmWnZu0mgnqzgTUqG','twf0zxjPywW','y29UC3rYDwn0B3i','AgvHDa','z3jLzw4','x3vWzgf0zvbVC2L0Aw9UC0HVB2S','CMDIkde0mcWXndaSmtqWkq','BwvYz2u','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','CMvTB3zLq2HPBgq','y2XPzw50sgvPz2H0','yxjJ','Bgf5zxi','DMfSDwu','mJG3nZiYC2Ppu3DM','Bwf4','x19LC01VzhvSzq','tg5Ntgf0ug9PBNq','mJuXntuYt0LYwhjy','CMDIkdaSmcWWkq','uKvqtefdrq','zgvMyxvSDfzHBhvL','D3jPDgfIBgu','AgvPz2H0','s0vfua','mJuWntG5n055B3PMwG','BwLU','vxrPBa','z3jHCgHPyW','x2XHEwvY','y29UzMLNDxjL','x3nLDe9WDgLVBNniB29R','x21HCa','x3bVC2L0Aw9UCW','z2v0','x3jLBMrLCMvY','C3bSAxroDw0','nwjNugPhDq','CMvK','zNvUy3rPB24','CMvJDgfUz2XL','ug9PBNruCMfUCW','zw51BwvYywjSzq','y3jLyxrL','mJu1mduYqKHRuKrQ','Dg9bCNjHEq','ChG7cIaGicaGicaGAgvPz2H0oG','x3jLy3rHBMDSzq','x2XHC3rFBujVDw5KCW','ywrKtgf5zxi','mte0vvLesvvq','qMfZzuXHEwvY','ChG7','zgLMzKHLAwDODa','y2XLyxi','zgL2','z2v0uhjVDg90ExbLt2y','y29UC3rYDwn0','Bg9UBgf0mM1LCMnHDg9Y','x21VDw50zwriB29R','x19WCM90B19F','BwLUq2fUDMfZu2L6zq','ywrKr3jHCgHPyW','BgvUz3rO','zMXVB3i','x3jLBw92zwriB29R','x2HLyxq','EwvSBg93','CgfYC2u','C3r5Bgu','CMvNAxn0zxi','x21HCNmZzf9WCML2yxrL','B3b0Aw9UCW'];_0x5536=function(){return _0x13abc2;};return _0x5536();}function _interopNamespace(_0x476085){var _0x57e52f=_0x3f98;if(_0x476085&&_0x476085[_0x57e52f(0x21a)])return _0x476085;var _0x21d70e=Object[_0x57e52f(0x235)](null);return _0x476085&&Object[_0x57e52f(0x25a)](_0x476085)[_0x57e52f(0x257)](function(_0xf77aa7){var _0x2bd988=_0x57e52f;if(_0xf77aa7!=='default'){var _0x237700=Object[_0x2bd988(0x212)](_0x476085,_0xf77aa7);Object[_0x2bd988(0x1c8)](_0x21d70e,_0xf77aa7,_0x237700[_0x2bd988(0x22c)]?_0x237700:{'enumerable':!![],'get':function(){return _0x476085[_0xf77aa7];}});}}),_0x21d70e['default']=_0x476085,_0x21d70e;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337);function ownKeys(_0x4cbd03,_0x50c963){var _0x47651b=_0x3f98,_0x435415=Object[_0x47651b(0x25a)](_0x4cbd03);if(Object[_0x47651b(0x1d4)]){var _0x6942f5=Object[_0x47651b(0x1d4)](_0x4cbd03);_0x50c963&&(_0x6942f5=_0x6942f5['filter'](function(_0x3538e3){var _0x4af5ff=_0x47651b;return Object['getOwnPropertyDescriptor'](_0x4cbd03,_0x3538e3)[_0x4af5ff(0x234)];})),_0x435415[_0x47651b(0x254)]['apply'](_0x435415,_0x6942f5);}return _0x435415;}function _objectSpread2(_0x471a73){var _0x21c7d4=_0x3f98;for(var _0x9d58f2=0x1;_0x9d58f2<arguments[_0x21c7d4(0x249)];_0x9d58f2++){var _0x145a89=null!=arguments[_0x9d58f2]?arguments[_0x9d58f2]:{};_0x9d58f2%0x2?ownKeys(Object(_0x145a89),!0x0)[_0x21c7d4(0x257)](function(_0x3af2b7){_defineProperty(_0x471a73,_0x3af2b7,_0x145a89[_0x3af2b7]);}):Object[_0x21c7d4(0x1fc)]?Object[_0x21c7d4(0x1ef)](_0x471a73,Object['getOwnPropertyDescriptors'](_0x145a89)):ownKeys(Object(_0x145a89))['forEach'](function(_0x4f60c1){var _0x259860=_0x21c7d4;Object[_0x259860(0x1c8)](_0x471a73,_0x4f60c1,Object[_0x259860(0x212)](_0x145a89,_0x4f60c1));});}return _0x471a73;}function _classCallCheck(_0x28453a,_0x159bcb){var _0x284803=_0x3f98;if(!(_0x28453a instanceof _0x159bcb))throw new TypeError(_0x284803(0x1d1));}function _defineProperties(_0x134291,_0x3a4bff){var _0x4b8538=_0x3f98;for(var _0x1cbf7f=0x0;_0x1cbf7f<_0x3a4bff[_0x4b8538(0x249)];_0x1cbf7f++){var _0x19809d=_0x3a4bff[_0x1cbf7f];_0x19809d[_0x4b8538(0x234)]=_0x19809d[_0x4b8538(0x234)]||![],_0x19809d['configurable']=!![];if(_0x4b8538(0x217)in _0x19809d)_0x19809d[_0x4b8538(0x220)]=!![];Object['defineProperty'](_0x134291,_0x19809d[_0x4b8538(0x1ce)],_0x19809d);}}function _createClass(_0x315121,_0x2ea444,_0x451c18){var _0x214152=_0x3f98;if(_0x2ea444)_defineProperties(_0x315121['prototype'],_0x2ea444);if(_0x451c18)_defineProperties(_0x315121,_0x451c18);return Object[_0x214152(0x1c8)](_0x315121,_0x214152(0x1e1),{'writable':![]}),_0x315121;}function _defineProperty(_0x5009b0,_0x349396,_0x338544){var _0x2cbdd7=_0x3f98;return _0x349396 in _0x5009b0?Object[_0x2cbdd7(0x1c8)](_0x5009b0,_0x349396,{'value':_0x338544,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x5009b0[_0x349396]=_0x338544,_0x5009b0;}function _inherits(_0x5ebbad,_0x2f38ff){var _0x37f3c9=_0x3f98;if(typeof _0x2f38ff!=='function'&&_0x2f38ff!==null)throw new TypeError(_0x37f3c9(0x1ca));_0x5ebbad[_0x37f3c9(0x1e1)]=Object['create'](_0x2f38ff&&_0x2f38ff[_0x37f3c9(0x1e1)],{'constructor':{'value':_0x5ebbad,'writable':!![],'configurable':!![]}}),Object[_0x37f3c9(0x1c8)](_0x5ebbad,_0x37f3c9(0x1e1),{'writable':![]});if(_0x2f38ff)_setPrototypeOf(_0x5ebbad,_0x2f38ff);}function _getPrototypeOf(_0x31005a){var _0x326e4e=_0x3f98;return _getPrototypeOf=Object[_0x326e4e(0x256)]?Object[_0x326e4e(0x242)]:function _0x23f44a(_0x3610a9){var _0x5666f2=_0x326e4e;return _0x3610a9[_0x5666f2(0x246)]||Object[_0x5666f2(0x242)](_0x3610a9);},_getPrototypeOf(_0x31005a);}function _setPrototypeOf(_0x476253,_0x571377){var _0x1f3409=_0x3f98;return _setPrototypeOf=Object[_0x1f3409(0x256)]||function _0x4eb096(_0x41078b,_0xd88976){return _0x41078b['__proto__']=_0xd88976,_0x41078b;},_setPrototypeOf(_0x476253,_0x571377);}function _isNativeReflectConstruct(){var _0x206450=_0x3f98;if(typeof Reflect===_0x206450(0x1de)||!Reflect[_0x206450(0x243)])return![];if(Reflect['construct'][_0x206450(0x1d9)])return![];if(typeof Proxy===_0x206450(0x231))return!![];try{return Boolean['prototype']['valueOf']['call'](Reflect['construct'](Boolean,[],function(){})),!![];}catch(_0x1d2393){return![];}}function _assertThisInitialized(_0x23456e){var _0x9a2a93=_0x3f98;if(_0x23456e===void 0x0)throw new ReferenceError(_0x9a2a93(0x1e6));return _0x23456e;}function _possibleConstructorReturn(_0x1ebd01,_0x1c8b74){var _0x42b863=_0x3f98;if(_0x1c8b74&&(typeof _0x1c8b74===_0x42b863(0x1e8)||typeof _0x1c8b74===_0x42b863(0x231)))return _0x1c8b74;else{if(_0x1c8b74!==void 0x0)throw new TypeError('Derived\x20constructors\x20may\x20only\x20return\x20object\x20or\x20undefined');}return _assertThisInitialized(_0x1ebd01);}function _createSuper(_0x53e2c8){var _0x5bf4fa=_isNativeReflectConstruct();return function _0x551438(){var _0x247edc=_0x3f98,_0x254a4f=_getPrototypeOf(_0x53e2c8),_0x4d72be;if(_0x5bf4fa){var _0x4bfa27=_getPrototypeOf(this)[_0x247edc(0x20c)];_0x4d72be=Reflect[_0x247edc(0x243)](_0x254a4f,arguments,_0x4bfa27);}else _0x4d72be=_0x254a4f['apply'](this,arguments);return _possibleConstructorReturn(this,_0x4d72be);};}var HeatMaterial=_0x46e429(0x1d6),Cesium=mars3d__namespace[_0x46e429(0x1f7)],BaseLayer=mars3d__namespace[_0x46e429(0x216)][_0x46e429(0x23d)],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:_0x46e429(0x205),0.6:_0x46e429(0x20e),0.8:_0x46e429(0x24d),0.9:_0x46e429(0x230)}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium[_0x46e429(0x1e9)][_0x46e429(0x1f2)]},HeatLayer=function(_0x590a28){var _0x147685=_0x46e429;_inherits(_0x1933f9,_0x590a28);var _0x15cd67=_createSuper(_0x1933f9);function _0x1933f9(){var _0x343b23=_0x3f98,_0x495f69,_0x434bfd=arguments[_0x343b23(0x249)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x1933f9),_0x495f69=_0x15cd67[_0x343b23(0x1d2)](this,_0x434bfd),_0x495f69[_0x343b23(0x252)][_0x343b23(0x208)]=Cesium[_0x343b23(0x21f)](_0x495f69['options'][_0x343b23(0x208)],document[_0x343b23(0x1d8)][_0x343b23(0x258)]),_0x495f69['options'][_0x343b23(0x208)]=Math[_0x343b23(0x224)](_0x495f69['options'][_0x343b23(0x208)],0x1388),_0x495f69[_0x343b23(0x252)][_0x343b23(0x247)]=Cesium['defaultValue'](_0x495f69['options'][_0x343b23(0x247)],document['body'][_0x343b23(0x214)]),_0x495f69[_0x343b23(0x252)][_0x343b23(0x247)]=Math[_0x343b23(0x219)](_0x495f69[_0x343b23(0x252)][_0x343b23(0x247)],0x2bc),_0x495f69['options'][_0x343b23(0x203)]=_objectSpread2(_objectSpread2({},DEF_HEATSTYLE),_0x495f69[_0x343b23(0x252)]['heatStyle']||{}),_0x495f69[_0x343b23(0x252)][_0x343b23(0x24f)]=_objectSpread2(_objectSpread2({},DEF_STYLE),_0x495f69['options'][_0x343b23(0x24f)]||{}),_0x495f69;}return _createClass(_0x1933f9,[{'key':_0x147685(0x216),'get':function _0x14335c(){var _0x2618a1=_0x147685;return this[_0x2618a1(0x227)];}},{'key':'heatStyle','get':function _0x4d6e02(){var _0x2e85e6=_0x147685;return this['options'][_0x2e85e6(0x203)];},'set':function _0x5ad0fc(_0x870390){var _0x2c7536=_0x147685;this[_0x2c7536(0x252)][_0x2c7536(0x203)]=mars3d__namespace[_0x2c7536(0x225)][_0x2c7536(0x211)](this[_0x2c7536(0x252)]['heatStyle'],_0x870390),this[_0x2c7536(0x24c)]&&this[_0x2c7536(0x24c)][_0x2c7536(0x228)](this[_0x2c7536(0x252)][_0x2c7536(0x203)]);}},{'key':_0x147685(0x24f),'get':function _0x17802b(){var _0x53fcd8=_0x147685;return this[_0x53fcd8(0x252)][_0x53fcd8(0x24f)];},'set':function _0x1a45cf(_0x5e2c67){var _0x4a7939=_0x147685;this[_0x4a7939(0x252)]['style']=mars3d__namespace[_0x4a7939(0x225)][_0x4a7939(0x211)](this[_0x4a7939(0x252)][_0x4a7939(0x24f)],_0x5e2c67);}},{'key':'positions','get':function _0x38fbd1(){var _0x37d3d6=_0x147685;return this[_0x37d3d6(0x22b)];},'set':function _0x2a97b6(_0x117b0d){var _0x16fdb8=_0x147685;this['_positions']=_0x117b0d,this[_0x16fdb8(0x20f)]();}},{'key':'coordinates','get':function _0x382d90(){var _0x2cf1f8=_0x147685,_0x470cf6=[];return this['points'][_0x2cf1f8(0x257)](function(_0x2f500b){var _0x42c087=_0x2cf1f8;_0x470cf6['push'](_0x2f500b[_0x42c087(0x237)]());}),_0x470cf6;}},{'key':_0x147685(0x232),'get':function _0x490699(){var _0x18dba2=_0x147685;return this[_0x18dba2(0x239)];}},{'key':_0x147685(0x229),'value':function _0x42fa2c(_0x5b17e0){var _0x40dbc2=_0x147685;_0x5b17e0[_0x40dbc2(0x1f1)]&&(this[_0x40dbc2(0x1f1)]=_0x5b17e0['positions']);}},{'key':_0x147685(0x245),'value':function _0x473698(){var _0x956ee1=_0x147685;this[_0x956ee1(0x227)]=new mars3d__namespace[(_0x956ee1(0x216))]['GraphicLayer']({'noLayerManage':!![]}),this['_layer'][_0x956ee1(0x251)]=!![];}},{'key':'_addedHook','value':function _0x2a941c(){var _0x49a0cf=_0x147685;this['_map'][_0x49a0cf(0x23b)](this[_0x49a0cf(0x227)]),this[_0x49a0cf(0x252)][_0x49a0cf(0x1f1)]&&(this[_0x49a0cf(0x1f1)]=this[_0x49a0cf(0x252)]['positions']),this['options'][_0x49a0cf(0x1f6)]&&this[_0x49a0cf(0x1db)]();}},{'key':_0x147685(0x24b),'value':function _0x4f5ab8(){var _0x47a7c6=_0x147685;this[_0x47a7c6(0x203)][_0x47a7c6(0x1dc)]&&(this[_0x47a7c6(0x22a)][_0x47a7c6(0x1dc)][_0x47a7c6(0x213)](this[_0x47a7c6(0x203)]['container']),delete this[_0x47a7c6(0x203)][_0x47a7c6(0x1dc)]),this['clear'](),this['_map'][_0x47a7c6(0x1ed)](this[_0x47a7c6(0x227)]);}},{'key':_0x147685(0x209),'value':function _0x3a8a54(_0x45525c){var _0x111f48=_0x147685;this['_positions']=this[_0x111f48(0x22b)]||[],this['_positions']['push'](_0x45525c),this[_0x111f48(0x20f)]();}},{'key':_0x147685(0x240),'value':function _0x2772c3(){var _0x29dd30=_0x147685;this[_0x29dd30(0x200)]&&(this[_0x29dd30(0x227)]['removeGraphic'](this[_0x29dd30(0x200)],!![]),delete this[_0x29dd30(0x200)]);}},{'key':_0x147685(0x20f),'value':function _0x4c1056(){var _0x4ce34f=_0x147685;if(!this['show']||!this['_map']||!this['positions']||this[_0x4ce34f(0x1f1)][_0x4ce34f(0x249)]===0x0)return this;var _0x1840de=this[_0x4ce34f(0x1d5)]();return this[_0x4ce34f(0x24f)][_0x4ce34f(0x215)]?this[_0x4ce34f(0x1d7)](_0x1840de):this['_createGraphic'](_0x1840de),this;}},{'key':_0x147685(0x1d5),'value':function _0x53e1ae(){var _0x203918=_0x147685,_0x5a1212,_0x11a6d4,_0x22c271=this[_0x203918(0x22b)],_0x458a56=[],_0x52b0ed,_0x579132,_0x30c598,_0x3de633;_0x22c271[_0x203918(0x257)](function(_0x2564af){var _0x21ce21=_0x203918,_0x5e5a4e=mars3d__namespace[_0x21ce21(0x21b)][_0x21ce21(0x24e)](_0x2564af);if(!_0x5e5a4e)return;_0x5e5a4e['value']=_0x2564af[_0x21ce21(0x217)]||0x1,_0x52b0ed===undefined?(_0x52b0ed=_0x5e5a4e[_0x21ce21(0x201)],_0x579132=_0x5e5a4e['lng'],_0x30c598=_0x5e5a4e[_0x21ce21(0x1fa)],_0x3de633=_0x5e5a4e[_0x21ce21(0x1fa)]):(_0x52b0ed=Math[_0x21ce21(0x224)](_0x52b0ed,_0x5e5a4e[_0x21ce21(0x201)]),_0x579132=Math['max'](_0x579132,_0x5e5a4e[_0x21ce21(0x201)]),_0x30c598=Math['min'](_0x30c598,_0x5e5a4e[_0x21ce21(0x1fa)]),_0x3de633=Math[_0x21ce21(0x219)](_0x3de633,_0x5e5a4e[_0x21ce21(0x1fa)])),_0x458a56[_0x21ce21(0x254)](_0x5e5a4e);});var _0x3a0495=this['heatStyle'][_0x203918(0x1f4)]*1.5,_0x549211={'xmin':_0x52b0ed,'xmax':_0x579132,'ymin':_0x30c598,'ymax':_0x3de633},_0x5e2bc5=getMercatorBounds(_0x549211),_0x2369b3=Math[_0x203918(0x1f9)](_0x5e2bc5[_0x203918(0x1c5)]-_0x5e2bc5[_0x203918(0x1f3)]),_0x58e2f8=Math[_0x203918(0x1f9)](_0x5e2bc5[_0x203918(0x1c6)]-_0x5e2bc5[_0x203918(0x25b)]),_0x4fd410=Math['max'](_0x2369b3,_0x58e2f8),_0x17d81f=Math[_0x203918(0x224)](_0x2369b3,_0x58e2f8);this[_0x203918(0x1f0)]=_0x4fd410;var _0x2bb11d=0x1;if(_0x4fd410>this[_0x203918(0x252)]['maxCanvasSize'])_0x2bb11d=_0x4fd410/this[_0x203918(0x252)][_0x203918(0x208)],_0x17d81f/_0x2bb11d<this[_0x203918(0x252)]['minCanvasSize']&&(_0x2bb11d=_0x17d81f/this[_0x203918(0x252)]['minCanvasSize']);else _0x17d81f<this['options'][_0x203918(0x247)]&&(_0x2bb11d=_0x17d81f/this['options']['minCanvasSize'],_0x4fd410/_0x2bb11d>this['options'][_0x203918(0x208)]&&(_0x2bb11d=_0x4fd410/this[_0x203918(0x252)][_0x203918(0x208)]));var _0x586043=_0x2369b3/_0x2bb11d+_0x3a0495*0x2,_0x3173f4=_0x58e2f8/_0x2bb11d+_0x3a0495*0x2,_0x23dfd0=_0x3a0495*_0x2bb11d;_0x5e2bc5[_0x203918(0x1f3)]-=_0x23dfd0,_0x5e2bc5[_0x203918(0x25b)]-=_0x23dfd0,_0x5e2bc5[_0x203918(0x1c5)]+=_0x23dfd0,_0x5e2bc5[_0x203918(0x1c6)]+=_0x23dfd0,_0x549211=geLatLngBounds(_0x5e2bc5),this['_rectangle']=Cesium['Rectangle'][_0x203918(0x1e2)](_0x549211[_0x203918(0x1f3)],_0x549211[_0x203918(0x25b)],_0x549211['xmax'],_0x549211[_0x203918(0x1c6)]);var _0x3475ca=(_0x5a1212=_0x458a56[0x0][_0x203918(0x217)])!==null&&_0x5a1212!==void 0x0?_0x5a1212:0x1,_0x26d4bb=(_0x11a6d4=_0x458a56[0x0][_0x203918(0x217)])!==null&&_0x11a6d4!==void 0x0?_0x11a6d4:0x0,_0x4f2f90=[];_0x458a56[_0x203918(0x257)](function(_0x555e2d){var _0x58b0a2=_0x203918,_0x3efa4b=mars3d__namespace['PointTrans'][_0x58b0a2(0x244)]([_0x555e2d[_0x58b0a2(0x201)],_0x555e2d[_0x58b0a2(0x1fa)]]),_0xda15af=_0x555e2d['value']||0x1,_0x5b4c0f=Math[_0x58b0a2(0x1df)]((_0x3efa4b[0x0]-_0x5e2bc5[_0x58b0a2(0x1f3)])/_0x2bb11d),_0x17bde0=Math[_0x58b0a2(0x1df)]((_0x5e2bc5[_0x58b0a2(0x1c6)]-_0x3efa4b[0x1])/_0x2bb11d);_0x3475ca=Math[_0x58b0a2(0x219)](_0x3475ca,_0xda15af),_0x26d4bb=Math[_0x58b0a2(0x224)](_0x26d4bb,_0xda15af),_0x4f2f90[_0x58b0a2(0x254)]({'x':_0x5b4c0f,'y':_0x17bde0,'value':_0xda15af});});var _0x1bf50c={'min':_0x26d4bb,'max':_0x3475ca,'data':_0x4f2f90};this[_0x203918(0x255)]=_0x1bf50c;(!this[_0x203918(0x23a)]||_0x5e2bc5[_0x203918(0x1f3)]!==this[_0x203918(0x23a)]['xmin']||_0x5e2bc5[_0x203918(0x25b)]!==this[_0x203918(0x23a)][_0x203918(0x25b)]||_0x5e2bc5['xmax']!==this[_0x203918(0x23a)][_0x203918(0x1c5)]||_0x5e2bc5[_0x203918(0x1c6)]!==this['_last_mBounds'][_0x203918(0x1c6)])&&(this[_0x203918(0x23a)]=_0x5e2bc5,!this[_0x203918(0x203)][_0x203918(0x1dc)]&&(this['heatStyle'][_0x203918(0x1dc)]=mars3d__namespace['DomUtil'][_0x203918(0x235)](_0x203918(0x241),_0x203918(0x1cd),this[_0x203918(0x22a)][_0x203918(0x1dc)])),this[_0x203918(0x203)][_0x203918(0x1dc)][_0x203918(0x24f)]['cssText']=_0x203918(0x1ea)[_0x203918(0x1e0)](_0x586043,_0x203918(0x238))[_0x203918(0x1e0)](_0x3173f4,_0x203918(0x23e)),!this[_0x203918(0x24c)]?this[_0x203918(0x24c)]=h337__namespace['create'](this[_0x203918(0x203)]):this['_heat'][_0x203918(0x228)](this['heatStyle']));this['_heat'][_0x203918(0x1ff)](_0x1bf50c);var _0x25474d=this[_0x203918(0x24c)][_0x203918(0x22d)][_0x203918(0x1c7)][_0x203918(0x1eb)](_0x203918(0x1ec));return this['heatStyle'][_0x203918(0x1dc)]&&(this[_0x203918(0x22a)]['container'][_0x203918(0x213)](this[_0x203918(0x203)][_0x203918(0x1dc)]),delete this[_0x203918(0x203)][_0x203918(0x1dc)]),_0x25474d;}},{'key':_0x147685(0x204),'value':function _0x531a88(_0x146a50){var _0x3f2b7e=_0x147685;this[_0x3f2b7e(0x240)](),this[_0x3f2b7e(0x200)]=new mars3d__namespace[(_0x3f2b7e(0x226))][(_0x3f2b7e(0x1e3))](_objectSpread2(_objectSpread2({},this['options']),{},{'rectangle':this[_0x3f2b7e(0x239)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':new Cesium[(_0x3f2b7e(0x20b))]({'fabric':{'uniforms':{'image':_0x146a50},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})})),this['_layer']['addGraphic'](this[_0x3f2b7e(0x200)]);}},{'key':_0x147685(0x1d7),'value':function _0xb7b697(_0xdb793c){var _0x5e88e8=_0x147685;this[_0x5e88e8(0x240)](),this[_0x5e88e8(0x24c)][_0x5e88e8(0x228)](_objectSpread2(_objectSpread2({},this[_0x5e88e8(0x203)]),{},{'radius':this['heatStyle'][_0x5e88e8(0x1f4)]*this[_0x5e88e8(0x24f)]['arcRadiusScale'],'blur':this[_0x5e88e8(0x203)]['blur']*this['style'][_0x5e88e8(0x1f5)],'gradient':this[_0x5e88e8(0x203)]['gradientArc']||{0.25:_0x5e88e8(0x21d),0.55:_0x5e88e8(0x210),0.85:_0x5e88e8(0x1fe),0x1:'rgb(255,255,255)'}}));var _0x2ca4a2=this[_0x5e88e8(0x24c)]['_renderer'][_0x5e88e8(0x1c7)][_0x5e88e8(0x1eb)](_0x5e88e8(0x1ec)),_0x146cae=Cesium[_0x5e88e8(0x1c9)][_0x5e88e8(0x1e4)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium['StencilFunction']['ALWAYS'],'frontOperation':{'fail':Cesium[_0x5e88e8(0x1fd)][_0x5e88e8(0x222)],'zFail':Cesium[_0x5e88e8(0x1fd)][_0x5e88e8(0x222)],'zPass':Cesium[_0x5e88e8(0x1fd)][_0x5e88e8(0x21e)]},'backFunction':Cesium[_0x5e88e8(0x1e5)]['ALWAYS'],'backOperation':{'fail':Cesium['StencilOperation'][_0x5e88e8(0x222)],'zFail':Cesium[_0x5e88e8(0x1fd)][_0x5e88e8(0x222)],'zPass':Cesium[_0x5e88e8(0x1fd)][_0x5e88e8(0x21e)]},'reference':0x2,'mask':0x2},'blending':Cesium[_0x5e88e8(0x253)][_0x5e88e8(0x1d0)]}),_0x48e89c=Math[_0x5e88e8(0x24a)](Cesium['defaultValue'](this['style']['diffHeight'],this[_0x5e88e8(0x1f0)]*0.02))+0.1;this[_0x5e88e8(0x24f)][_0x5e88e8(0x23f)]&&delete this[_0x5e88e8(0x24f)][_0x5e88e8(0x23f)];var _0x534164=Cesium['defaultValue'](this[_0x5e88e8(0x24f)][_0x5e88e8(0x22e)],0x64),_0xb644aa=Math[_0x5e88e8(0x219)](this['_rectangle'][_0x5e88e8(0x221)],this[_0x5e88e8(0x239)][_0x5e88e8(0x207)]);this['style']['granularity']=_0xb644aa/=_0x534164,this[_0x5e88e8(0x200)]=new mars3d__namespace['graphic'][(_0x5e88e8(0x1e3))](_objectSpread2(_objectSpread2({},this[_0x5e88e8(0x252)]),{},{'rectangle':this[_0x5e88e8(0x239)],'appearance':new Cesium[(_0x5e88e8(0x1e9))]({'aboveGround':!![],'renderState':_0x146cae,'material':new Cesium['Material']({'fabric':{'uniforms':{'image':_0xdb793c,'repeat':new Cesium[(_0x5e88e8(0x1d3))](0x1,0x1),'color':new Cesium[(_0x5e88e8(0x1e7))](0x1,0x1,0x1,0.01),'bumpMap':_0x2ca4a2},'source':HeatMaterial},'translucent':!![]}),'vertexShaderSource':'attribute\x20vec3\x20position3DHigh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20attribute\x20vec3\x20position3DLow;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20attribute\x20vec2\x20st;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20attribute\x20float\x20batchId;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20v_positionMC;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20v_positionEC;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20v_st;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20color\x20=\x20texture2D(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'[_0x5e88e8(0x1e0)](_0x48e89c,_0x5e88e8(0x1ee)),'flat':!![]})})),this['_layer'][_0x5e88e8(0x248)](this[_0x5e88e8(0x200)]);}},{'key':'getRectangle','value':function _0x2e25db(_0x357216){var _0x2588f0=_0x147685;return _0x357216!==null&&_0x357216!==void 0x0&&_0x357216[_0x2588f0(0x1cc)]&&this[_0x2588f0(0x239)]?mars3d__namespace[_0x2588f0(0x1cf)][_0x2588f0(0x1da)](this['_rectangle']):this[_0x2588f0(0x239)];}}]),_0x1933f9;}(BaseLayer);mars3d__namespace[_0x46e429(0x216)]['HeatLayer']=HeatLayer,mars3d__namespace['LayerUtil'][_0x46e429(0x250)](_0x46e429(0x20d),HeatLayer);function getMercatorBounds(_0x545ba1){var _0x376926=_0x46e429,_0x28c69e=mars3d__namespace[_0x376926(0x233)][_0x376926(0x244)]([_0x545ba1['xmin'],_0x545ba1[_0x376926(0x25b)]]),_0x4481e6=mars3d__namespace[_0x376926(0x233)]['lonlat2mercator']([_0x545ba1[_0x376926(0x1c5)],_0x545ba1['ymax']]);return{'xmin':_0x28c69e[0x0],'ymin':_0x28c69e[0x1],'xmax':_0x4481e6[0x0],'ymax':_0x4481e6[0x1]};}function geLatLngBounds(_0x4e9a99){var _0x3599b6=_0x46e429,_0x9322bc=mars3d__namespace['PointTrans'][_0x3599b6(0x202)]([_0x4e9a99[_0x3599b6(0x1f3)],_0x4e9a99['ymin']]),_0x42e48c=mars3d__namespace[_0x3599b6(0x233)][_0x3599b6(0x202)]([_0x4e9a99['xmax'],_0x4e9a99[_0x3599b6(0x1c6)]]);return{'xmin':_0x9322bc[0x0],'ymin':_0x9322bc[0x1],'xmax':_0x42e48c[0x0],'ymax':_0x42e48c[0x1]};}function _0x3f98(_0x35b343,_0x257140){var _0x5536ca=_0x5536();return _0x3f98=function(_0x3f98db,_0x2881b8){_0x3f98db=_0x3f98db-0x1c5;var _0x5ee58d=_0x5536ca[_0x3f98db];if(_0x3f98['HaKoIi']===undefined){var _0x210c31=function(_0x476085){var _0x21d70e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0xf77aa7='',_0x237700='';for(var _0x4cbd03=0x0,_0x50c963,_0x435415,_0x6942f5=0x0;_0x435415=_0x476085['charAt'](_0x6942f5++);~_0x435415&&(_0x50c963=_0x4cbd03%0x4?_0x50c963*0x40+_0x435415:_0x435415,_0x4cbd03++%0x4)?_0xf77aa7+=String['fromCharCode'](0xff&_0x50c963>>(-0x2*_0x4cbd03&0x6)):0x0){_0x435415=_0x21d70e['indexOf'](_0x435415);}for(var _0x3538e3=0x0,_0x471a73=_0xf77aa7['length'];_0x3538e3<_0x471a73;_0x3538e3++){_0x237700+='%'+('00'+_0xf77aa7['charCodeAt'](_0x3538e3)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x237700);};_0x3f98['VIZcKy']=_0x210c31,_0x35b343=arguments,_0x3f98['HaKoIi']=!![];}var _0x310dac=_0x5536ca[0x0],_0x1acdcd=_0x3f98db+_0x310dac,_0x323c90=_0x35b343[_0x1acdcd];return!_0x323c90?(_0x5ee58d=_0x3f98['VIZcKy'](_0x5ee58d),_0x35b343[_0x1acdcd]=_0x5ee58d):_0x5ee58d=_0x323c90,_0x5ee58d;},_0x3f98(_0x35b343,_0x257140);}exports['HeatLayer']=HeatLayer,Object[_0x46e429(0x1c8)](exports,_0x46e429(0x21a),{'value':!![]});
}));
