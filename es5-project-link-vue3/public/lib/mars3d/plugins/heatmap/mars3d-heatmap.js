/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.3.9
 * 编译日期：2022-05-17 11:16:09
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';var _0x467030=_0x3ec6;function _0x3ec6(_0x3c229d,_0x476001){var _0x2cfe6a=_0x2cfe();return _0x3ec6=function(_0x3ec621,_0x4cf444){_0x3ec621=_0x3ec621-0xfb;var _0x335b5e=_0x2cfe6a[_0x3ec621];if(_0x3ec6['eylOlC']===undefined){var _0x55e449=function(_0x505c25){var _0x2d8f70='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x3fd534='',_0x49b208='';for(var _0x54e807=0x0,_0x237030,_0x3a1bde,_0x56ec21=0x0;_0x3a1bde=_0x505c25['charAt'](_0x56ec21++);~_0x3a1bde&&(_0x237030=_0x54e807%0x4?_0x237030*0x40+_0x3a1bde:_0x3a1bde,_0x54e807++%0x4)?_0x3fd534+=String['fromCharCode'](0xff&_0x237030>>(-0x2*_0x54e807&0x6)):0x0){_0x3a1bde=_0x2d8f70['indexOf'](_0x3a1bde);}for(var _0x5c2d36=0x0,_0x49d3fc=_0x3fd534['length'];_0x5c2d36<_0x49d3fc;_0x5c2d36++){_0x49b208+='%'+('00'+_0x3fd534['charCodeAt'](_0x5c2d36)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x49b208);};_0x3ec6['IlpoAp']=_0x55e449,_0x3c229d=arguments,_0x3ec6['eylOlC']=!![];}var _0x24db86=_0x2cfe6a[0x0],_0x537065=_0x3ec621+_0x24db86,_0x3a659f=_0x3c229d[_0x537065];return!_0x3a659f?(_0x335b5e=_0x3ec6['IlpoAp'](_0x335b5e),_0x3c229d[_0x537065]=_0x335b5e):_0x335b5e=_0x3a659f,_0x335b5e;},_0x3ec6(_0x3c229d,_0x476001);}(function(_0x53f814,_0x39e6ef){var _0x5d9a9b=_0x3ec6,_0x56a150=_0x53f814();while(!![]){try{var _0x15eb7a=parseInt(_0x5d9a9b(0x149))/0x1*(parseInt(_0x5d9a9b(0x169))/0x2)+-parseInt(_0x5d9a9b(0x16e))/0x3+-parseInt(_0x5d9a9b(0x16c))/0x4*(-parseInt(_0x5d9a9b(0x118))/0x5)+parseInt(_0x5d9a9b(0x167))/0x6+-parseInt(_0x5d9a9b(0x123))/0x7+parseInt(_0x5d9a9b(0x116))/0x8*(parseInt(_0x5d9a9b(0x10f))/0x9)+parseInt(_0x5d9a9b(0x12d))/0xa;if(_0x15eb7a===_0x39e6ef)break;else _0x56a150['push'](_0x56a150['shift']());}catch(_0x274d24){_0x56a150['push'](_0x56a150['shift']());}}}(_0x2cfe,0x8359b));function _interopNamespace(_0x505c25){var _0x456317=_0x3ec6;if(_0x505c25&&_0x505c25['__esModule'])return _0x505c25;var _0x2d8f70=Object[_0x456317(0x130)](null);return _0x505c25&&Object['keys'](_0x505c25)[_0x456317(0x181)](function(_0x3fd534){var _0x50a0cf=_0x456317;if(_0x3fd534!==_0x50a0cf(0xfe)){var _0x49b208=Object[_0x50a0cf(0x163)](_0x505c25,_0x3fd534);Object[_0x50a0cf(0x186)](_0x2d8f70,_0x3fd534,_0x49b208[_0x50a0cf(0x184)]?_0x49b208:{'enumerable':!![],'get':function(){return _0x505c25[_0x3fd534];}});}}),_0x2d8f70[_0x456317(0xfe)]=_0x505c25,_0x2d8f70;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337);function ownKeys(_0x54e807,_0x237030){var _0x3bf2cd=_0x3ec6,_0x3a1bde=Object[_0x3bf2cd(0x154)](_0x54e807);if(Object['getOwnPropertySymbols']){var _0x56ec21=Object['getOwnPropertySymbols'](_0x54e807);_0x237030&&(_0x56ec21=_0x56ec21[_0x3bf2cd(0x11c)](function(_0x5c2d36){var _0x4bb693=_0x3bf2cd;return Object[_0x4bb693(0x163)](_0x54e807,_0x5c2d36)['enumerable'];})),_0x3a1bde[_0x3bf2cd(0x166)]['apply'](_0x3a1bde,_0x56ec21);}return _0x3a1bde;}function _objectSpread2(_0x49d3fc){var _0x4c49d4=_0x3ec6;for(var _0x25fc6d=0x1;_0x25fc6d<arguments['length'];_0x25fc6d++){var _0x3cfd0d=null!=arguments[_0x25fc6d]?arguments[_0x25fc6d]:{};_0x25fc6d%0x2?ownKeys(Object(_0x3cfd0d),!0x0)[_0x4c49d4(0x181)](function(_0x378a79){_defineProperty(_0x49d3fc,_0x378a79,_0x3cfd0d[_0x378a79]);}):Object[_0x4c49d4(0x145)]?Object[_0x4c49d4(0x147)](_0x49d3fc,Object[_0x4c49d4(0x145)](_0x3cfd0d)):ownKeys(Object(_0x3cfd0d))[_0x4c49d4(0x181)](function(_0x4381d0){var _0x4f1afb=_0x4c49d4;Object['defineProperty'](_0x49d3fc,_0x4381d0,Object[_0x4f1afb(0x163)](_0x3cfd0d,_0x4381d0));});}return _0x49d3fc;}function _classCallCheck(_0x19386a,_0x512207){var _0x5d687f=_0x3ec6;if(!(_0x19386a instanceof _0x512207))throw new TypeError(_0x5d687f(0x11d));}function _defineProperties(_0x1879b5,_0x285317){var _0x1f5c90=_0x3ec6;for(var _0x30b91a=0x0;_0x30b91a<_0x285317[_0x1f5c90(0x18d)];_0x30b91a++){var _0x5414ff=_0x285317[_0x30b91a];_0x5414ff[_0x1f5c90(0x155)]=_0x5414ff[_0x1f5c90(0x155)]||![],_0x5414ff['configurable']=!![];if('value'in _0x5414ff)_0x5414ff[_0x1f5c90(0x182)]=!![];Object[_0x1f5c90(0x186)](_0x1879b5,_0x5414ff[_0x1f5c90(0x152)],_0x5414ff);}}function _createClass(_0x519880,_0x3442ac,_0x59f81c){var _0x2191c6=_0x3ec6;if(_0x3442ac)_defineProperties(_0x519880[_0x2191c6(0x13a)],_0x3442ac);if(_0x59f81c)_defineProperties(_0x519880,_0x59f81c);return Object[_0x2191c6(0x186)](_0x519880,_0x2191c6(0x13a),{'writable':![]}),_0x519880;}function _defineProperty(_0x2b7eae,_0x16bd87,_0x2e73d3){return _0x16bd87 in _0x2b7eae?Object['defineProperty'](_0x2b7eae,_0x16bd87,{'value':_0x2e73d3,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x2b7eae[_0x16bd87]=_0x2e73d3,_0x2b7eae;}function _inherits(_0x51af10,_0x23b4af){var _0x177eee=_0x3ec6;if(typeof _0x23b4af!=='function'&&_0x23b4af!==null)throw new TypeError(_0x177eee(0x190));_0x51af10[_0x177eee(0x13a)]=Object[_0x177eee(0x130)](_0x23b4af&&_0x23b4af[_0x177eee(0x13a)],{'constructor':{'value':_0x51af10,'writable':!![],'configurable':!![]}}),Object[_0x177eee(0x186)](_0x51af10,_0x177eee(0x13a),{'writable':![]});if(_0x23b4af)_setPrototypeOf(_0x51af10,_0x23b4af);}function _getPrototypeOf(_0x587998){var _0x17c2a3=_0x3ec6;return _getPrototypeOf=Object[_0x17c2a3(0x120)]?Object[_0x17c2a3(0x162)]:function _0xf9d7d4(_0x2f5781){var _0x1cb3ce=_0x17c2a3;return _0x2f5781[_0x1cb3ce(0x133)]||Object[_0x1cb3ce(0x162)](_0x2f5781);},_getPrototypeOf(_0x587998);}function _setPrototypeOf(_0x59972e,_0x1c0292){return _setPrototypeOf=Object['setPrototypeOf']||function _0x53b82e(_0xcbb1f5,_0x141ac3){var _0x5d690d=_0x3ec6;return _0xcbb1f5[_0x5d690d(0x133)]=_0x141ac3,_0xcbb1f5;},_setPrototypeOf(_0x59972e,_0x1c0292);}function _isNativeReflectConstruct(){var _0x1ae3d1=_0x3ec6;if(typeof Reflect==='undefined'||!Reflect[_0x1ae3d1(0x171)])return![];if(Reflect['construct'][_0x1ae3d1(0x146)])return![];if(typeof Proxy==='function')return!![];try{return Boolean[_0x1ae3d1(0x13a)][_0x1ae3d1(0x17d)][_0x1ae3d1(0x11b)](Reflect['construct'](Boolean,[],function(){})),!![];}catch(_0x32516c){return![];}}function _assertThisInitialized(_0x23970e){var _0x59ea17=_0x3ec6;if(_0x23970e===void 0x0)throw new ReferenceError(_0x59ea17(0x183));return _0x23970e;}function _possibleConstructorReturn(_0x1cbd28,_0x4e209e){var _0xbf5f28=_0x3ec6;if(_0x4e209e&&(typeof _0x4e209e===_0xbf5f28(0x108)||typeof _0x4e209e===_0xbf5f28(0x143)))return _0x4e209e;else{if(_0x4e209e!==void 0x0)throw new TypeError(_0xbf5f28(0x140));}return _assertThisInitialized(_0x1cbd28);}function _createSuper(_0x1c22bb){var _0x59bafc=_isNativeReflectConstruct();return function _0x108d08(){var _0x50688f=_0x3ec6,_0x3e5bfe=_getPrototypeOf(_0x1c22bb),_0x194873;if(_0x59bafc){var _0x308b3b=_getPrototypeOf(this)['constructor'];_0x194873=Reflect[_0x50688f(0x171)](_0x3e5bfe,arguments,_0x308b3b);}else _0x194873=_0x3e5bfe[_0x50688f(0x14b)](this,arguments);return _possibleConstructorReturn(this,_0x194873);};}var HeatMaterial='uniform\x20sampler2D\x20image;\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput){\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture2D(image,st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0)){\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a';if(!h337__namespace[_0x467030(0x130)])throw new Error(_0x467030(0x141));var Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x467030(0x179)][_0x467030(0x157)],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:_0x467030(0x178),0.6:_0x467030(0x18a),0.8:'yellow',0.9:_0x467030(0x14f)}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium[_0x467030(0x15e)]['VERTEX_FORMAT']},HeatLayer=function(_0xd18089){var _0x4b2dab=_0x467030;_inherits(_0x2935e2,_0xd18089);var _0x353173=_createSuper(_0x2935e2);function _0x2935e2(){var _0x3eee0d=_0x3ec6,_0x4ec4c4,_0x76ccf7=arguments[_0x3eee0d(0x18d)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x2935e2),_0x4ec4c4=_0x353173[_0x3eee0d(0x11b)](this,_0x76ccf7),_0x4ec4c4[_0x3eee0d(0x16d)][_0x3eee0d(0x180)]=Cesium[_0x3eee0d(0xfd)](_0x4ec4c4[_0x3eee0d(0x16d)]['maxCanvasSize'],document[_0x3eee0d(0x12a)][_0x3eee0d(0x150)]),_0x4ec4c4[_0x3eee0d(0x16d)][_0x3eee0d(0x180)]=Math[_0x3eee0d(0x15d)](_0x4ec4c4[_0x3eee0d(0x16d)][_0x3eee0d(0x180)],0x1388),_0x4ec4c4[_0x3eee0d(0x16d)][_0x3eee0d(0x14d)]=Cesium[_0x3eee0d(0xfd)](_0x4ec4c4['options'][_0x3eee0d(0x14d)],document['body'][_0x3eee0d(0x127)]),_0x4ec4c4[_0x3eee0d(0x16d)][_0x3eee0d(0x14d)]=Math['max'](_0x4ec4c4[_0x3eee0d(0x16d)][_0x3eee0d(0x14d)],0x2bc),_0x4ec4c4[_0x3eee0d(0x16d)]['heatStyle']=_objectSpread2(_objectSpread2({},DEF_HEATSTYLE),_0x4ec4c4['options'][_0x3eee0d(0x10a)]||{}),_0x4ec4c4['options'][_0x3eee0d(0x13e)]=_objectSpread2(_objectSpread2({},DEF_STYLE),_0x4ec4c4[_0x3eee0d(0x16d)][_0x3eee0d(0x13e)]||{}),_0x4ec4c4;}return _createClass(_0x2935e2,[{'key':_0x4b2dab(0x179),'get':function _0x1b78d5(){var _0x2d2382=_0x4b2dab;return this[_0x2d2382(0x164)];}},{'key':_0x4b2dab(0x10a),'get':function _0x2932c7(){var _0x5f55e7=_0x4b2dab;return this['options'][_0x5f55e7(0x10a)];},'set':function _0x108e9b(_0x4cba7e){var _0x3dec5b=_0x4b2dab;this[_0x3dec5b(0x16d)]['heatStyle']=mars3d__namespace[_0x3dec5b(0x148)]['merge'](this[_0x3dec5b(0x16d)][_0x3dec5b(0x10a)],_0x4cba7e),this['_heat']&&this[_0x3dec5b(0x176)][_0x3dec5b(0x161)](this[_0x3dec5b(0x16d)][_0x3dec5b(0x10a)]);}},{'key':_0x4b2dab(0x13e),'get':function _0x20d92f(){var _0x14380e=_0x4b2dab;return this[_0x14380e(0x16d)][_0x14380e(0x13e)];},'set':function _0x5cc282(_0x212d80){var _0x4f7951=_0x4b2dab;this[_0x4f7951(0x16d)][_0x4f7951(0x13e)]=mars3d__namespace[_0x4f7951(0x148)][_0x4f7951(0x107)](this[_0x4f7951(0x16d)][_0x4f7951(0x13e)],_0x212d80);}},{'key':_0x4b2dab(0x101),'get':function _0x5f1095(){var _0x5d516f=_0x4b2dab;return this[_0x5d516f(0x12e)];},'set':function _0x4cb523(_0x37786f){var _0x2dc393=_0x4b2dab;this[_0x2dc393(0x12e)]=_0x37786f,this['_updatePositionsHook']();}},{'key':'coordinates','get':function _0x84ba1f(){var _0x34fe8e=_0x4b2dab,_0x25d60b=[];return this[_0x34fe8e(0x139)]['forEach'](function(_0x3ad8ee){var _0x375159=_0x34fe8e;_0x25d60b[_0x375159(0x166)](_0x3ad8ee[_0x375159(0x185)]());}),_0x25d60b;}},{'key':'rectangle','get':function _0x5ab198(){var _0x401643=_0x4b2dab;return this[_0x401643(0x10b)];}},{'key':_0x4b2dab(0x125),'value':function _0x2e236b(_0x306c21){var _0x383904=_0x4b2dab;_0x306c21[_0x383904(0x101)]&&(this['positions']=_0x306c21['positions']);}},{'key':_0x4b2dab(0x109),'value':function _0x22b804(){var _0xc45bee=_0x4b2dab;this[_0xc45bee(0x164)]=new mars3d__namespace[(_0xc45bee(0x179))][(_0xc45bee(0x111))]({'noLayerManage':!![]}),this[_0xc45bee(0x164)][_0xc45bee(0x153)]=!![];}},{'key':'_addedHook','value':function _0x5e285b(){var _0x3f82c6=_0x4b2dab;this[_0x3f82c6(0x13f)][_0x3f82c6(0x114)](this[_0x3f82c6(0x164)]),this[_0x3f82c6(0x16d)][_0x3f82c6(0x101)]&&(this['positions']=this[_0x3f82c6(0x16d)][_0x3f82c6(0x101)]),this['options']['flyTo']&&this['flyToByAnimationEnd']();}},{'key':_0x4b2dab(0x117),'value':function _0x584fd1(){var _0x34d536=_0x4b2dab;this[_0x34d536(0x10a)]['container']&&(this['_map'][_0x34d536(0x18c)]['removeChild'](this['heatStyle'][_0x34d536(0x18c)]),delete this[_0x34d536(0x10a)][_0x34d536(0x18c)]),this[_0x34d536(0x12c)](),this[_0x34d536(0x13f)][_0x34d536(0x103)](this['_layer']);}},{'key':_0x4b2dab(0x14a),'value':function _0x5864a2(_0x369f61){var _0x4c5875=_0x4b2dab;this[_0x4c5875(0x12e)]=this[_0x4c5875(0x12e)]||[],this[_0x4c5875(0x12e)][_0x4c5875(0x166)](_0x369f61),this[_0x4c5875(0x14c)]();}},{'key':'clear','value':function _0xad6e18(){var _0x1d86bd=_0x4b2dab;this[_0x1d86bd(0x192)]&&(this['_layer'][_0x1d86bd(0x174)](this['_graphic'],!![]),delete this[_0x1d86bd(0x192)]);}},{'key':_0x4b2dab(0x14c),'value':function _0x386e72(){var _0x3a556f=_0x4b2dab;if(!this[_0x3a556f(0x160)]||!this[_0x3a556f(0x13f)]||!this['positions']||this[_0x3a556f(0x101)]['length']===0x0)return this;var _0x363db7=this[_0x3a556f(0x10d)]();return this['style'][_0x3a556f(0x18b)]?this[_0x3a556f(0x17a)](_0x363db7):this[_0x3a556f(0x11e)](_0x363db7),this;}},{'key':'getPointData','value':function _0x31bb75(_0x34ed12){var _0x3b8616=_0x4b2dab,_0x1cb5b2=mars3d__namespace[_0x3b8616(0x12b)]['parse'](_0x34ed12);if(!_0x1cb5b2)return{};var _0x33875f=mars3d__namespace[_0x3b8616(0x17e)]['lonlat2mercator']([_0x1cb5b2[_0x3b8616(0x134)],_0x1cb5b2[_0x3b8616(0x110)]]),_0xe8c7de=this[_0x3b8616(0x14e)],_0xcc24d=Math[_0x3b8616(0x135)]((_0x33875f[0x0]-_0xe8c7de['xmin'])/this['_scale']),_0x340700=Math[_0x3b8616(0x135)]((_0xe8c7de['ymax']-_0x33875f[0x1])/this[_0x3b8616(0x128)]),_0x46447c=this[_0x3b8616(0x176)][_0x3b8616(0x122)]({'x':_0xcc24d,'y':_0x340700}),_0x20ac7a=this[_0x3b8616(0x176)][_0x3b8616(0x15a)][_0x3b8616(0x137)]['getImageData'](_0xcc24d-0x1,_0x340700-0x1,0x1,0x1)[_0x3b8616(0x102)];return{'x':_0xcc24d,'y':_0x340700,'value':_0x46447c,'color':'rgba('+_0x20ac7a[0x0]+','+_0x20ac7a[0x1]+','+_0x20ac7a[0x2]+','+_0x20ac7a[0x3]+')'};}},{'key':_0x4b2dab(0x10d),'value':function _0xfbeb00(){var _0x768b2=_0x4b2dab,_0x3fd56e,_0x3b54a6,_0x4f0a5e=this['_positions'],_0x9702a8=[],_0x22b190,_0x47fd45,_0x3a5ae2,_0x4d2535;_0x4f0a5e[_0x768b2(0x181)](function(_0x10ef2a){var _0xc59d8=_0x768b2,_0x407027=mars3d__namespace['LngLatPoint'][_0xc59d8(0x100)](_0x10ef2a);if(!_0x407027)return;_0x407027[_0xc59d8(0x136)]=_0x10ef2a['value']||0x1,_0x22b190===undefined?(_0x22b190=_0x407027['lng'],_0x47fd45=_0x407027['lng'],_0x3a5ae2=_0x407027[_0xc59d8(0x110)],_0x4d2535=_0x407027[_0xc59d8(0x110)]):(_0x22b190=Math[_0xc59d8(0x15d)](_0x22b190,_0x407027[_0xc59d8(0x134)]),_0x47fd45=Math[_0xc59d8(0x17f)](_0x47fd45,_0x407027[_0xc59d8(0x134)]),_0x3a5ae2=Math[_0xc59d8(0x15d)](_0x3a5ae2,_0x407027[_0xc59d8(0x110)]),_0x4d2535=Math[_0xc59d8(0x17f)](_0x4d2535,_0x407027[_0xc59d8(0x110)])),_0x9702a8[_0xc59d8(0x166)](_0x407027);});var _0x27c586=this[_0x768b2(0x10a)]['radius']*1.5,_0x24a862={'xmin':_0x22b190,'xmax':_0x47fd45,'ymin':_0x3a5ae2,'ymax':_0x4d2535},_0x35096d=getMercatorBounds(_0x24a862),_0x47c5e9=Math[_0x768b2(0x113)](_0x35096d['xmax']-_0x35096d[_0x768b2(0x13b)]),_0x5bdb66=Math[_0x768b2(0x113)](_0x35096d[_0x768b2(0x131)]-_0x35096d[_0x768b2(0x151)]),_0x24e4ce=Math['max'](_0x47c5e9,_0x5bdb66),_0x5a7367=Math[_0x768b2(0x15d)](_0x47c5e9,_0x5bdb66);this[_0x768b2(0x17b)]=_0x24e4ce;var _0x489eff=0x1;if(_0x24e4ce>this[_0x768b2(0x16d)][_0x768b2(0x180)])_0x489eff=_0x24e4ce/this['options'][_0x768b2(0x180)],_0x5a7367/_0x489eff<this[_0x768b2(0x16d)][_0x768b2(0x14d)]&&(_0x489eff=_0x5a7367/this[_0x768b2(0x16d)][_0x768b2(0x14d)]);else _0x5a7367<this[_0x768b2(0x16d)][_0x768b2(0x14d)]&&(_0x489eff=_0x5a7367/this[_0x768b2(0x16d)][_0x768b2(0x14d)],_0x24e4ce/_0x489eff>this['options']['maxCanvasSize']&&(_0x489eff=_0x24e4ce/this[_0x768b2(0x16d)][_0x768b2(0x180)]));var _0x4a06f5=_0x47c5e9/_0x489eff+_0x27c586*0x2,_0x427811=_0x5bdb66/_0x489eff+_0x27c586*0x2,_0x56d281=_0x27c586*_0x489eff;_0x35096d['xmin']-=_0x56d281,_0x35096d['ymin']-=_0x56d281,_0x35096d[_0x768b2(0xfb)]+=_0x56d281,_0x35096d[_0x768b2(0x131)]+=_0x56d281,this[_0x768b2(0x128)]=_0x489eff,_0x24a862=geLatLngBounds(_0x35096d),this['_rectangle']=Cesium['Rectangle'][_0x768b2(0x10c)](_0x24a862[_0x768b2(0x13b)],_0x24a862[_0x768b2(0x151)],_0x24a862[_0x768b2(0xfb)],_0x24a862[_0x768b2(0x131)]);var _0x20790c=(_0x3fd56e=_0x9702a8[0x0][_0x768b2(0x136)])!==null&&_0x3fd56e!==void 0x0?_0x3fd56e:0x1,_0x45c1e3=(_0x3b54a6=_0x9702a8[0x0]['value'])!==null&&_0x3b54a6!==void 0x0?_0x3b54a6:0x0,_0x52045c=[];_0x9702a8[_0x768b2(0x181)](function(_0x35356c){var _0x185bef=_0x768b2,_0x51b545=mars3d__namespace[_0x185bef(0x17e)]['lonlat2mercator']([_0x35356c[_0x185bef(0x134)],_0x35356c[_0x185bef(0x110)]]),_0x5a5d60=_0x35356c['value']||0x1,_0xd9ab1d=Math[_0x185bef(0x135)]((_0x51b545[0x0]-_0x35096d[_0x185bef(0x13b)])/_0x489eff),_0xf9e035=Math['round']((_0x35096d[_0x185bef(0x131)]-_0x51b545[0x1])/_0x489eff);_0x20790c=Math[_0x185bef(0x17f)](_0x20790c,_0x5a5d60),_0x45c1e3=Math[_0x185bef(0x15d)](_0x45c1e3,_0x5a5d60),_0x52045c[_0x185bef(0x166)]({'x':_0xd9ab1d,'y':_0xf9e035,'value':_0x5a5d60});});var _0x708cd3={'min':_0x45c1e3,'max':_0x20790c,'data':_0x52045c};this[_0x768b2(0x144)]=_0x708cd3;(!this['_last_mBounds']||_0x35096d['xmin']!==this[_0x768b2(0x14e)][_0x768b2(0x13b)]||_0x35096d['ymin']!==this[_0x768b2(0x14e)][_0x768b2(0x151)]||_0x35096d[_0x768b2(0xfb)]!==this[_0x768b2(0x14e)]['xmax']||_0x35096d[_0x768b2(0x131)]!==this[_0x768b2(0x14e)][_0x768b2(0x131)])&&(this[_0x768b2(0x14e)]=_0x35096d,!this[_0x768b2(0x10a)]['container']&&(this[_0x768b2(0x10a)][_0x768b2(0x18c)]=mars3d__namespace[_0x768b2(0x16a)][_0x768b2(0x130)]('div',_0x768b2(0x189),this[_0x768b2(0x13f)][_0x768b2(0x18c)])),this[_0x768b2(0x10a)]['container']['style']['cssText']=_0x768b2(0x18e)[_0x768b2(0x158)](_0x4a06f5,_0x768b2(0x188))[_0x768b2(0x158)](_0x427811,'px;'),!this[_0x768b2(0x176)]?this[_0x768b2(0x176)]=h337__namespace[_0x768b2(0x130)](this[_0x768b2(0x10a)]):this[_0x768b2(0x176)][_0x768b2(0x161)](this['heatStyle']));this[_0x768b2(0x176)][_0x768b2(0x15b)](_0x708cd3);var _0x6c6f1f=this[_0x768b2(0x176)][_0x768b2(0x15a)][_0x768b2(0x16b)]['toDataURL']('image/png');return this[_0x768b2(0x10a)]['container']&&(this[_0x768b2(0x13f)][_0x768b2(0x18c)][_0x768b2(0x159)](this[_0x768b2(0x10a)]['container']),delete this[_0x768b2(0x10a)][_0x768b2(0x18c)]),_0x6c6f1f;}},{'key':_0x4b2dab(0x11e),'value':function _0x362985(_0x18e5a9){var _0x13b982=_0x4b2dab;this['clear'](),this[_0x13b982(0x192)]=new mars3d__namespace['graphic'][(_0x13b982(0x112))](_objectSpread2(_objectSpread2({},this[_0x13b982(0x16d)]),{},{'rectangle':this['_rectangle'],'appearance':new Cesium[(_0x13b982(0x15e))]({'material':new Cesium[(_0x13b982(0x12f))]({'fabric':{'uniforms':{'image':_0x18e5a9},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})})),this[_0x13b982(0x164)]['addGraphic'](this[_0x13b982(0x192)]);}},{'key':'_createArcGraphic','value':function _0x370303(_0x504f0d){var _0x2b7ae5=_0x4b2dab;this[_0x2b7ae5(0x12c)](),this[_0x2b7ae5(0x176)][_0x2b7ae5(0x161)](_objectSpread2(_objectSpread2({},this[_0x2b7ae5(0x10a)]),{},{'radius':this[_0x2b7ae5(0x10a)][_0x2b7ae5(0x115)]*this['style'][_0x2b7ae5(0x175)],'blur':this[_0x2b7ae5(0x10a)]['blur']*this['style'][_0x2b7ae5(0x119)],'gradient':this[_0x2b7ae5(0x10a)][_0x2b7ae5(0xff)]||{0.25:_0x2b7ae5(0x15f),0.55:'rgb(140,140,140)',0.85:_0x2b7ae5(0x104),0x1:_0x2b7ae5(0x15c)}}));var _0xfe6452=this[_0x2b7ae5(0x176)]['_renderer'][_0x2b7ae5(0x16b)][_0x2b7ae5(0x168)](_0x2b7ae5(0x129)),_0x5f2c6f=Cesium[_0x2b7ae5(0x106)]['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x2b7ae5(0x18f)][_0x2b7ae5(0x10e)],'frontOperation':{'fail':Cesium[_0x2b7ae5(0x156)]['KEEP'],'zFail':Cesium[_0x2b7ae5(0x156)][_0x2b7ae5(0x126)],'zPass':Cesium[_0x2b7ae5(0x156)][_0x2b7ae5(0x132)]},'backFunction':Cesium[_0x2b7ae5(0x18f)][_0x2b7ae5(0x10e)],'backOperation':{'fail':Cesium[_0x2b7ae5(0x156)][_0x2b7ae5(0x126)],'zFail':Cesium['StencilOperation'][_0x2b7ae5(0x126)],'zPass':Cesium[_0x2b7ae5(0x156)][_0x2b7ae5(0x132)]},'reference':0x2,'mask':0x2},'blending':Cesium[_0x2b7ae5(0x13d)][_0x2b7ae5(0x173)]}),_0x3f8dd7=Math[_0x2b7ae5(0x11f)](Cesium[_0x2b7ae5(0xfd)](this[_0x2b7ae5(0x13e)][_0x2b7ae5(0x17c)],this[_0x2b7ae5(0x17b)]*0.02))+0.1;this[_0x2b7ae5(0x13e)][_0x2b7ae5(0x17c)]&&delete this[_0x2b7ae5(0x13e)]['diffHeight'];var _0x479070=Cesium[_0x2b7ae5(0xfd)](this[_0x2b7ae5(0x13e)]['splitNum'],0x64),_0x5df673=Math['max'](this[_0x2b7ae5(0x10b)][_0x2b7ae5(0x13c)],this[_0x2b7ae5(0x10b)][_0x2b7ae5(0x121)]);this['style'][_0x2b7ae5(0x105)]=_0x5df673/=_0x479070,this['_graphic']=new mars3d__namespace[(_0x2b7ae5(0x11a))]['RectanglePrimitive'](_objectSpread2(_objectSpread2({},this['options']),{},{'rectangle':this[_0x2b7ae5(0x10b)],'appearance':new Cesium[(_0x2b7ae5(0x15e))]({'aboveGround':!![],'renderState':_0x5f2c6f,'material':new Cesium['Material']({'fabric':{'uniforms':{'image':_0x504f0d,'repeat':new Cesium[(_0x2b7ae5(0x172))](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0.01),'bumpMap':_0xfe6452},'source':HeatMaterial},'translucent':!![]}),'vertexShaderSource':'attribute\x20vec3\x20position3DHigh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20attribute\x20vec3\x20position3DLow;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20attribute\x20vec2\x20st;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20attribute\x20float\x20batchId;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20v_positionMC;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20v_positionEC;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20v_st;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20color\x20=\x20texture2D(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'['concat'](_0x3f8dd7,_0x2b7ae5(0x138)),'flat':!![]})})),this['_layer']['addGraphic'](this[_0x2b7ae5(0x192)]);}},{'key':'getRectangle','value':function _0x16cbce(_0x390283){var _0x4e9b92=_0x4b2dab;return _0x390283!==null&&_0x390283!==void 0x0&&_0x390283['isFormat']&&this[_0x4e9b92(0x10b)]?mars3d__namespace[_0x4e9b92(0x187)][_0x4e9b92(0x142)](this['_rectangle']):this['_rectangle'];}}]),_0x2935e2;}(BaseLayer);mars3d__namespace[_0x467030(0x179)][_0x467030(0x16f)]=HeatLayer,mars3d__namespace[_0x467030(0x165)][_0x467030(0x191)](_0x467030(0xfc),HeatLayer);function getMercatorBounds(_0x4439e4){var _0x2fe861=_0x467030,_0x373bcc=mars3d__namespace[_0x2fe861(0x17e)][_0x2fe861(0x124)]([_0x4439e4['xmin'],_0x4439e4[_0x2fe861(0x151)]]),_0x5da5bf=mars3d__namespace['PointTrans'][_0x2fe861(0x124)]([_0x4439e4['xmax'],_0x4439e4[_0x2fe861(0x131)]]);return{'xmin':_0x373bcc[0x0],'ymin':_0x373bcc[0x1],'xmax':_0x5da5bf[0x0],'ymax':_0x5da5bf[0x1]};}function geLatLngBounds(_0x2a4e22){var _0x2241b0=_0x467030,_0x4a9424=mars3d__namespace[_0x2241b0(0x17e)]['mercator2lonlat']([_0x2a4e22[_0x2241b0(0x13b)],_0x2a4e22[_0x2241b0(0x151)]]),_0x2df64c=mars3d__namespace[_0x2241b0(0x17e)][_0x2241b0(0x170)]([_0x2a4e22['xmax'],_0x2a4e22[_0x2241b0(0x131)]]);return{'xmin':_0x4a9424[0x0],'ymin':_0x4a9424[0x1],'xmax':_0x2df64c[0x0],'ymax':_0x2df64c[0x1]};}exports[_0x467030(0x16f)]=HeatLayer,Object[_0x467030(0x186)](exports,_0x467030(0x177),{'value':!![]});function _0x2cfe(){var _0x5c7715=['DMfSDwvpzG','ug9PBNruCMfUCW','Bwf4','Bwf4q2fUDMfZu2L6zq','zM9YrwfJAa','D3jPDgfIBgu','DgHPCYbOyxnUj3qGyMvLBIbPBML0AwfSAxnLzcaTihn1CgvYkcKGAgfZBID0igjLzw4Gy2fSBgvK','z2v0','Dg9bCNjHEq','zgvMAw5LuhjVCgvYDhK','ug9SEvv0AwW','ChG7cIaGicaGicaGAgvPz2H0oG','BwfYCZnKlwHLyxrTyxa','z3jLzw4','yxjJ','y29UDgfPBMvY','BgvUz3rO','cIaGicaGicaGBwfYz2LUoJa7cIaGicaGicaGD2LKDgG6','u3rLBMnPBez1BMn0Aw9U','u3vWzxiGzxHWCMvZC2LVBIbTDxn0igvPDgHLCIbIzsbUDwXSig9YigeGzNvUy3rPB24','CMvNAxn0zxi','x2DYyxbOAwm','Eg1HEa','AgvHDa','zgvMyxvSDfzHBhvL','zgvMyxvSDa','z3jHzgLLBNrbCMm','CgfYC2u','Cg9ZAxrPB25Z','zgf0yq','CMvTB3zLtgf5zxi','CMDIkdiXnIWYmtySmJe2kq','z3jHBNvSyxjPDhK','uMvUzgvYu3rHDgu','BwvYz2u','B2jQzwn0','x21VDw50zwriB29R','AgvHDfn0EwXL','x3jLy3rHBMDSzq','zNjVBurLz3jLzxm','x2DLDeHLyxrdyw52yxnjBwC','quXxqvLt','ndqXDe5Nv1jo','Bgf0','r3jHCgHPy0XHEwvY','uMvJDgfUz2XLuhjPBwL0AxzL','ywjZ','ywrKtgf5zxi','CMfKAxvZ','mZK3nJHquujuyxq','x3jLBw92zwriB29R','mtbswM9Ttxy','yxjJqMX1CLnJywXL','z3jHCgHPyW','y2fSBa','zMLSDgvY','q2fUBM90ignHBgWGysbJBgfZCYbHCYbHigz1BMn0Aw9U','x2nYzwf0zuDYyxbOAwm','zMXVB3i','C2v0uhjVDg90ExbLt2y','D2LKDgG','z2v0vMfSDwvbDa','ndGZmdG2oeXAr2PlBW','Bg9UBgf0mM1LCMnHDg9Y','x3nLDe9WDgLVBNniB29R','s0vfua','y2XPzw50sgvPz2H0','x3nJywXL','Aw1Hz2uVCg5N','yM9KEq','tg5Ntgf0ug9PBNq','y2XLyxi','mtqYnZuZmfj0t1zXqG','x3bVC2L0Aw9UCW','twf0zxjPywW','y3jLyxrL','Ew1HEa','uKvqtefdrq','x19WCM90B19F','Bg5N','CM91BMq','DMfSDwu','y3r4','oWOGicaGicaGicaGicbWicS9DMvJncHKAxnqB3mSmc4WktSkicaGicaGicaGicaGz2XFug9ZAxrPB24GpsbJEM1FBw9KzwXwAwv3uhjVAMvJDgLVBLjLBgf0AxzLvg9fEwuGkIbWoWOGicaGicaGicaGFqOGicaGicaGia','Cg9PBNrZ','ChjVDg90ExbL','Eg1PBG','AgvPz2H0','qMXLBMrPBMDtDgf0zq','C3r5Bgu','x21HCa','rgvYAxzLzcbJB25ZDhj1y3rVCNmGBwf5ig9UBhKGCMv0DxjUig9IAMvJDcbVCIb1BMrLzMLUzwq','6k+35BYv5ywLigHLyxrTyxaUANmG5BQtia','zM9YBwf0uMvJDgfUz2XL','zNvUy3rPB24','x2XHC3rFAgvHDerHDge','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9YCW','C2HHBq','zgvMAw5LuhjVCgvYDgLLCW','vxrPBa','ndGWmvDRq3nzDG','ywrKug9ZAxrPB24','yxbWBhK','x3vWzgf0zvbVC2L0Aw9UC0HVB2S','BwLUq2fUDMfZu2L6zq','x2XHC3rFBujVDw5KCW','CMvK','y2XPzw50v2LKDgG','Ew1PBG','A2v5','x21HCNmZzf9WCML2yxrL','A2v5CW','zw51BwvYywjSzq','u3rLBMnPBe9WzxjHDgLVBG','qMfZzuXHEwvY','y29Uy2f0','CMvTB3zLq2HPBgq','x3jLBMrLCMvY','C2v0rgf0yq','CMDIkdi1nsWYntuSmJu1kq','BwLU','rwXSAxbZB2LKu3vYzMfJzufWCgvHCMfUy2u','CMDIkdaSmcWWkq','C2HVDW','y29UzMLNDxjL','z2v0uhjVDg90ExbLt2y','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','x2XHEwvY','tgf5zxjvDgLS','ChvZAa','nda5nZm0wwDXtu1U','Dg9eyxrHvvjm','mtm0tK5uBK91','rg9TvxrPBa','y2fUDMfZ','mte3oduZnM5bzwHYrG','B3b0Aw9UCW','ndeYmJyZzhvKvu5p','sgvHDeXHEwvY','BwvYy2f0B3iYBg9UBgf0','y29UC3rYDwn0','q2fYDgvZAwfUmG','quXqsefFqKXftKq','CMvTB3zLr3jHCgHPyW','yxjJuMfKAxvZu2nHBgu','x2HLyxq','x19LC01VzhvSzq','yMX1zq','Bgf5zxi','x2nYzwf0zufYy0DYyxbOAwm','x21cB3vUzhnnyxG','zgLMzKHLAwDODa'];_0x2cfe=function(){return _0x5c7715;};return _0x2cfe();}
}));
