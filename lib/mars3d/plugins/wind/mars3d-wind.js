/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.1
 * 编译日期：2025-08-03 16:22
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x3f5ab3,_0x556353){function _0x34c732(_0x392d2a,_0xb8c12f){return _0x2182(_0xb8c12f-0x251,_0x392d2a);}const _0x2660f9=_0x3f5ab3();function _0x16de5e(_0x3e2526,_0x47d82e){return _0x2182(_0x3e2526-0x1d1,_0x47d82e);}while(!![]){try{const _0x2ee6a0=-parseInt(_0x16de5e(0x2f2,0x281))/0x1*(-parseInt(_0x34c732(0x391,0x350))/0x2)+parseInt(_0x34c732(0x387,0x37e))/0x3+-parseInt(_0x16de5e(0x355,0x32d))/0x4+-parseInt(_0x34c732(0x3f9,0x397))/0x5*(-parseInt(_0x34c732(0x295,0x2e3))/0x6)+parseInt(_0x16de5e(0x2f0,0x2c4))/0x7+parseInt(_0x34c732(0x3e5,0x373))/0x8+-parseInt(_0x34c732(0x3ad,0x39d))/0x9;if(_0x2ee6a0===_0x556353)break;else _0x2660f9['push'](_0x2660f9['shift']());}catch(_0x3474d4){_0x2660f9['push'](_0x2660f9['shift']());}}}(_0x25d5,0xcfea9));function _interopNamespace(_0x28f929){if(_0x28f929&&_0x28f929[_0x2c1e68(-0x27d,-0x2a8)])return _0x28f929;var _0x4c1ae4=Object['create'](null);function _0x5545a4(_0x2222a2,_0x4b072f){return _0x2182(_0x4b072f-0xf6,_0x2222a2);}function _0x2c1e68(_0x585775,_0x56457e){return _0x2182(_0x56457e- -0x36c,_0x585775);}return _0x28f929&&Object['keys'](_0x28f929)[_0x2c1e68(-0x23d,-0x252)](function(_0x6dba9d){if(_0x6dba9d!=='default'){var _0x594327=Object['getOwnPropertyDescriptor'](_0x28f929,_0x6dba9d);Object['defineProperty'](_0x4c1ae4,_0x6dba9d,_0x594327['get']?_0x594327:{'enumerable':!![],'get':function(){return _0x28f929[_0x6dba9d];}});}}),_0x4c1ae4[_0x2c1e68(-0x276,-0x26c)]=_0x28f929,_0x4c1ae4;}function _0x5d6852(_0xb83a3e,_0x59bdcb){return _0x2182(_0x59bdcb- -0x1c9,_0xb83a3e);}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x53ae5e,_0x2db9e7){const _0x447da1=_0x53ae5e*Math['cos'](Cesium$2['Math']['toRadians'](_0x2db9e7));return _0x447da1;}function getV(_0x36b578,_0x3975c3){const _0x3251e2=_0x36b578*Math['sin'](Cesium$2[_0x4daefb(-0x220,-0x1e3)][_0x4daefb(-0x105,-0x15d)](_0x3975c3));function _0x4daefb(_0x10fc65,_0x538504){return _0x2182(_0x538504- -0x2b9,_0x10fc65);}function _0x594f46(_0x3a0224,_0x476d85){return _0x2182(_0x3a0224-0x1dc,_0x476d85);}return _0x3251e2;}function getSpeed(_0x384467,_0x11074c){function _0x48abe2(_0x38b334,_0x4cd8f4){return _0x2182(_0x4cd8f4- -0x6,_0x38b334);}function _0x24b264(_0x329792,_0x180d51){return _0x2182(_0x329792-0x24f,_0x180d51);}const _0x229093=Math[_0x24b264(0x35c,0x3b3)](Math['pow'](_0x384467,0x2)+Math[_0x48abe2(0x6e,0xad)](_0x11074c,0x2));return _0x229093;}function getDirection(_0x55a792,_0x5b9aff){let _0x37804b=Cesium$2['Math']['toDegrees'](Math[_0x45048c(-0xb9,-0x6d)](_0x5b9aff,_0x55a792));_0x37804b+=_0x37804b<0x0?0x168:0x0;function _0x45048c(_0x51360d,_0x2193c1){return _0x2182(_0x51360d- -0x221,_0x2193c1);}return _0x37804b;}function _0x2182(_0x4dcae0,_0x15318f){const _0x25d5da=_0x25d5();return _0x2182=function(_0x218258,_0x2e31cb){_0x218258=_0x218258-0x82;let _0x30e8b8=_0x25d5da[_0x218258];return _0x30e8b8;},_0x2182(_0x4dcae0,_0x15318f);}const _0x1e610a={};_0x1e610a['__proto__']=null,_0x1e610a[_0x5d6852(-0x17c,-0xf8)]=getU,_0x1e610a[_0x5d6852(-0x127,-0xe4)]=getV,_0x1e610a['getSpeed']=getSpeed,_0x1e610a[_0x5d6852(-0x6c,-0xe2)]=getDirection;var WindUtil=_0x1e610a,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader=_0x5d6852(-0x40,-0x5b);const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static[_0x5d6852(-0x91,-0xa0)](){const _0x355ebb={};_0x355ebb[_0x9d0fbd(0x44b,0x442)]=[calculateSpeedShader];function _0x9d0fbd(_0x3459b7,_0xf8a940){return _0x5d6852(_0xf8a940,_0x3459b7-0x586);}return new ShaderSource$1(_0x355ebb);}static['getUpdatePositionShader'](){const _0x20d339={};function _0x533cf8(_0x511925,_0x3193a4){return _0x5d6852(_0x511925,_0x3193a4-0x50c);}return _0x20d339[_0x533cf8(0x369,0x3d1)]=[updatePositionShader],new ShaderSource$1(_0x20d339);}static[_0x2d32e9(0x3d2,0x3c7)](){const _0x1dd2a5={};return _0x1dd2a5['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x1dd2a5);}static[_0x5d6852(0x23,-0x40)](){const _0x43c1d6={};_0x43c1d6[_0x306ad9(0x28b,0x238)]=[renderParticlesFragmentShader];function _0x306ad9(_0x5a4af8,_0x35531f){return _0x2d32e9(_0x5a4af8- -0x11b,_0x35531f);}return new ShaderSource$1(_0x43c1d6);}static['getPostProcessingPositionShader'](){const _0x2e0868={};return _0x2e0868['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x2e0868);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x109cbf){this[_0x40b1fd(-0x292,-0x2eb)]=_0x109cbf[_0x3b0b36(-0x2e0,-0x339)],this[_0x40b1fd(-0x26a,-0x298)]=_0x109cbf['geometry'],this['attributeLocations']=_0x109cbf['attributeLocations'],this[_0x3b0b36(-0x291,-0x2aa)]=_0x109cbf['primitiveType'],this[_0x40b1fd(-0x22a,-0x28d)]=_0x109cbf['uniformMap']||{};function _0x40b1fd(_0x140052,_0x813589){return _0x5d6852(_0x813589,_0x140052- -0x1bc);}this['vertexShaderSource']=_0x109cbf['vertexShaderSource'];function _0x3b0b36(_0x58eb78,_0x4e4c36){return _0x5d6852(_0x4e4c36,_0x58eb78- -0x20a);}this[_0x40b1fd(-0x2e6,-0x262)]=_0x109cbf[_0x40b1fd(-0x2e6,-0x277)],this['rawRenderState']=_0x109cbf['rawRenderState'],this['framebuffer']=_0x109cbf[_0x3b0b36(-0x31b,-0x2f4)],this[_0x40b1fd(-0x219,-0x21c)]=_0x109cbf[_0x40b1fd(-0x219,-0x282)],this['autoClear']=_0x109cbf[_0x40b1fd(-0x251,-0x236)]??![],this['preExecute']=_0x109cbf[_0x3b0b36(-0x2a4,-0x2f7)],this[_0x3b0b36(-0x24e,-0x266)]=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this['isDynamic']=_0x109cbf['isDynamic']??(()=>!![]),this['autoClear']&&(this[_0x3b0b36(-0x275,-0x2ae)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x40b1fd(-0x2cd,-0x34a)],'pass':Pass$1[_0x3b0b36(-0x271,-0x2c5)]}));}[_0x5d6852(-0x16d,-0x10c)](_0x59d9a9){function _0x193ff6(_0x154efb,_0x427474){return _0x2d32e9(_0x427474- -0x5c5,_0x154efb);}function _0x1337bf(_0x48c89f,_0xd93e7e){return _0x5d6852(_0xd93e7e,_0x48c89f-0x3e1);}if(this['commandType']==='Draw'){const _0x13fb37={};_0x13fb37['context']=_0x59d9a9,_0x13fb37['geometry']=this[_0x1337bf(0x333,0x340)],_0x13fb37['attributeLocations']=this['attributeLocations'],_0x13fb37['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x46368f=VertexArray$1['fromGeometry'](_0x13fb37),_0x4d416e={};_0x4d416e['context']=_0x59d9a9,_0x4d416e[_0x1337bf(0x36b,0x3e0)]=this[_0x193ff6(-0x15c,-0x15a)],_0x4d416e[_0x193ff6(-0x25e,-0x20e)]=this['fragmentShaderSource'],_0x4d416e['attributeLocations']=this['attributeLocations'];const _0x1f9d26=ShaderProgram[_0x193ff6(-0x125,-0x199)](_0x4d416e),_0x32cf53=RenderState['fromCache'](this['rawRenderState']),_0x2f7ccb={};return _0x2f7ccb[_0x193ff6(-0x1fa,-0x1ee)]=this,_0x2f7ccb['vertexArray']=_0x46368f,_0x2f7ccb['primitiveType']=this['primitiveType'],_0x2f7ccb[_0x193ff6(-0x194,-0x1ed)]=Matrix4['IDENTITY'],_0x2f7ccb['renderState']=_0x32cf53,_0x2f7ccb['shaderProgram']=_0x1f9d26,_0x2f7ccb['framebuffer']=this['framebuffer'],_0x2f7ccb['uniformMap']=this['uniformMap'],_0x2f7ccb[_0x1337bf(0x358,0x2d9)]=Pass$1['OPAQUE'],new DrawCommand(_0x2f7ccb);}else{if(this[_0x193ff6(-0x14b,-0x1ba)]===_0x1337bf(0x2f7,0x329)){const _0x338147={};return _0x338147['owner']=this,_0x338147['fragmentShaderSource']=this['fragmentShaderSource'],_0x338147['uniformMap']=this['uniformMap'],_0x338147[_0x193ff6(-0x11f,-0x141)]=this['outputTexture'],_0x338147['persists']=!![],new ComputeCommand(_0x338147);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0x48bc38,_0x359f48){function _0x3c2470(_0x5cdb34,_0x2ba159){return _0x5d6852(_0x5cdb34,_0x2ba159- -0x1b7);}function _0x1396fd(_0xfcfc5d,_0x4d8cd6){return _0x5d6852(_0xfcfc5d,_0x4d8cd6-0x244);}this[_0x3c2470(-0x20a,-0x265)]=_0x359f48,defined(this['commandToExecute'])&&(this['commandToExecute'][_0x3c2470(-0x354,-0x2dc)]=VertexArray$1['fromGeometry']({'context':_0x48bc38,'geometry':this[_0x1396fd(0x17d,0x196)],'attributeLocations':this[_0x1396fd(0x1cf,0x1e4)],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}[_0x2d32e9(0x416,0x3e7)](_0x54367b){function _0x4ee9ce(_0x30ac6c,_0x26229d){return _0x2d32e9(_0x26229d- -0x1f5,_0x30ac6c);}if(!this[_0x25c653(0x471,0x45c)]())return;if(!this[_0x25c653(0x4ae,0x45b)]||!defined(_0x54367b))return;function _0x25c653(_0x2720c2,_0x171544){return _0x2d32e9(_0x2720c2-0x11,_0x171544);}!defined(this['commandToExecute'])&&(this[_0x4ee9ce(0x17d,0x1e4)]=this['createCommand'](_0x54367b['context']));defined(this[_0x4ee9ce(0x2b1,0x252)])&&this['preExecute']();if(!_0x54367b[_0x25c653(0x489,0x4c8)]){console['warn']('frameState.commandList\x20is\x20undefined');return;}defined(this['clearCommand'])&&_0x54367b['commandList']['push'](this['clearCommand']),defined(this[_0x4ee9ce(0x198,0x1e4)])&&_0x54367b['commandList']['push'](this['commandToExecute']);}[_0x2d32e9(0x47b,0x3ff)](){return![];}[_0x5d6852(-0x63,-0x70)](){function _0x525ae5(_0x2daa91,_0x1a22c2){return _0x5d6852(_0x2daa91,_0x1a22c2-0x433);}if(defined(this['commandToExecute'])){var _0x3f19bb;(_0x3f19bb=this['commandToExecute']['shaderProgram'])===null||_0x3f19bb===void 0x0||_0x3f19bb['destroy'](),this['commandToExecute'][_0x525ae5(0x3e0,0x3c1)]=undefined;}return destroyObject(this);}}function deepMerge(_0x5e15f3,_0x58a23f){if(!_0x5e15f3)return _0x58a23f;if(!_0x58a23f)return _0x5e15f3;const _0x29f2ff={..._0x58a23f},_0x93e2af=_0x29f2ff;function _0x1e5556(_0x23bf3d,_0x4a2f89){return _0x2d32e9(_0x4a2f89- -0x12e,_0x23bf3d);}for(const _0x1640de in _0x5e15f3){if(Object[_0x228721(0x492,0x45c)]['hasOwnProperty']['call'](_0x5e15f3,_0x1640de)){const _0x13dab8=_0x5e15f3[_0x1640de],_0x26f345=_0x58a23f[_0x1640de];if(Array['isArray'](_0x13dab8)){_0x93e2af[_0x1640de]=_0x13dab8[_0x1e5556(0x35f,0x334)]();continue;}if(_0x13dab8&&typeof _0x13dab8===_0x228721(0x3d4,0x3c4)){_0x93e2af[_0x1640de]=deepMerge(_0x13dab8,_0x26f345||{});continue;}_0x13dab8!==undefined&&(_0x93e2af[_0x1640de]=_0x13dab8);}}function _0x228721(_0x562541,_0x33de37){return _0x5d6852(_0x562541,_0x33de37-0x4b2);}return _0x93e2af;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x2d32e9(0x3b1,0x43d)];class WindParticlesComputing{constructor(_0x7d7aa5,_0x1448c8,_0x23dc00,_0x4a78f2,_0x3ed382){this['context']=_0x7d7aa5;function _0x1fea11(_0x2c1ac6,_0x5c7796){return _0x5d6852(_0x5c7796,_0x2c1ac6-0x26e);}function _0x27a9ed(_0x2163ff,_0x36c7ab){return _0x2d32e9(_0x36c7ab- -0x379,_0x2163ff);}this[_0x27a9ed(0x92,0xf7)]=_0x23dc00,this[_0x1fea11(0x150,0x13c)]=_0x4a78f2,this['windData']=_0x1448c8,this[_0x27a9ed(0xfa,0xa0)]=0x3c,this[_0x27a9ed(0x108,0x119)]=0x1;const _0x3d96d5={};_0x3d96d5['scene']=_0x3ed382,_0x3d96d5[_0x1fea11(0x145,0x192)]=0x1,_0x3d96d5['quietPeriod']=0x0,this[_0x27a9ed(0xb2,0x74)]=new FrameRateMonitor(_0x3d96d5),this['initFrameRate'](),this['createWindTextures'](),this[_0x27a9ed(0xc2,0xef)](),this['createComputingPrimitives']();}['initFrameRate'](){const _0x558500=()=>{function _0x42aa3c(_0x40940f,_0x45ba47){return _0x2182(_0x40940f-0x28e,_0x45ba47);}function _0xa7e1dd(_0x5a2c3f,_0x1277d0){return _0x2182(_0x1277d0- -0x1ab,_0x5a2c3f);}this[_0x42aa3c(0x363,0x385)][_0xa7e1dd(0x53,-0x35)]>0x14&&(this['frameRate']=this['frameRateMonitor'][_0xa7e1dd(-0x72,-0x35)],this[_0x42aa3c(0x408,0x41e)]=0x3c/Math['max'](this[_0x42aa3c(0x38f,0x403)],0x1));};_0x558500();const _0x366056=setInterval(_0x558500,0x3e8),_0x32b056=this[_0x3fd41e(0x416,0x3ee)]['bind'](this);function _0x14e228(_0x27849c,_0x303e32){return _0x5d6852(_0x303e32,_0x27849c-0x78);}function _0x3fd41e(_0x377806,_0xb6324c){return _0x5d6852(_0xb6324c,_0x377806-0x486);}this[_0x3fd41e(0x416,0x493)]=()=>{clearInterval(_0x366056),_0x32b056();};}['createWindTextures'](){const _0x58e894={};_0x58e894[_0xbf2bfb(0x1b1,0x20f)]=TextureMinificationFilter$1['LINEAR'];function _0xde1c80(_0x5ac7cc,_0x303d71){return _0x5d6852(_0x303d71,_0x5ac7cc-0x4c3);}_0x58e894['magnificationFilter']=TextureMagnificationFilter$1[_0xde1c80(0x3ef,0x47c)];const _0x2d198e={'context':this['context'],'width':this['windData']['width'],'height':this['windData']['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0xde1c80(0x452,0x488)]['flipY']??![],'sampler':new Sampler$1(_0x58e894)};function _0xbf2bfb(_0x5e8698,_0xd4c1b9){return _0x5d6852(_0xd4c1b9,_0x5e8698-0x1df);}this['windTextures']={'U':new Texture$1({..._0x2d198e,'source':{'arrayBufferView':new Float32Array(this[_0xbf2bfb(0x106,0xba)]['u'][_0xbf2bfb(0x16a,0x1db)])}}),'V':new Texture$1({..._0x2d198e,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}['createParticlesTextures'](){function _0x57b732(_0x237df6,_0x3ab330){return _0x5d6852(_0x237df6,_0x3ab330-0x247);}const _0x40b02b={};_0x40b02b[_0x29d98f(-0xb1,-0x13d)]=TextureMinificationFilter$1['NEAREST'],_0x40b02b['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];const _0x4627a9={'context':this['context'],'width':this['options']['particlesTextureSize'],'height':this[_0x57b732(0x215,0x1d6)][_0x29d98f(-0x1e0,-0x22b)],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options'][_0x57b732(0x1ae,0x12b)]*this[_0x29d98f(-0x16d,-0x180)][_0x29d98f(-0x1fa,-0x22b)]*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x40b02b)};function _0x29d98f(_0x22e2e5,_0x341942){return _0x2d32e9(_0x341942- -0x5f0,_0x22e2e5);}this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x4627a9),'currentParticlesPosition':new Texture$1(_0x4627a9),'nextParticlesPosition':new Texture$1(_0x4627a9),'postProcessingPosition':new Texture$1(_0x4627a9),'particlesSpeed':new Texture$1(_0x4627a9)};}['destroyParticlesTextures'](){function _0x320517(_0x3cb7a6,_0x9b8f7){return _0x2d32e9(_0x3cb7a6- -0x211,_0x9b8f7);}function _0x3844aa(_0x1a3fdf,_0x360aa6){return _0x5d6852(_0x360aa6,_0x1a3fdf-0x239);}Object['values'](this['particlesTextures'])[_0x320517(0x221,0x267)](_0x177480=>_0x177480[_0x3844aa(0x1c9,0x164)]());}[_0x2d32e9(0x3e7,0x3fd)](){function _0x164cbe(_0x3707d6,_0x3e2eca){return _0x2d32e9(_0x3e2eca- -0x69,_0x3707d6);}function _0x4006c2(_0x11140f,_0x3b5b1a){return _0x5d6852(_0x11140f,_0x3b5b1a-0x4d6);}this[_0x164cbe(0x310,0x357)]={'calculateSpeed':new CustomPrimitive({'commandType':_0x4006c2(0x3e1,0x3ec),'uniformMap':{'U':()=>this[_0x4006c2(0x473,0x48f)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x164cbe(0x30e,0x389)],this['windData']['u'][_0x4006c2(0x3dd,0x443)]),'vRange':()=>new Cartesian2$1(this[_0x164cbe(0x392,0x39f)]['v'][_0x4006c2(0x462,0x3e7)],this[_0x4006c2(0x3be,0x3fd)]['v']['max']),'speedRange':()=>new Cartesian2$1(this['windData']['speed'][_0x4006c2(0x362,0x3e7)],this['windData'][_0x4006c2(0x401,0x409)]['max']),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x2c4a61(_0x19d770,_0x3156c2){return _0x164cbe(_0x3156c2,_0x19d770- -0x671);}return(this['viewerParameters']['pixelSize']+0x32)*this[_0x2c4a61(-0x26a,-0x2e0)]['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData']['width'],this['windData'][_0x164cbe(0x362,0x331)]),'minimum':()=>new Cartesian2$1(this[_0x4006c2(0x376,0x3fd)]['bounds']['west'],this['windData'][_0x164cbe(0x3cd,0x435)]['south']),'maximum':()=>new Cartesian2$1(this[_0x164cbe(0x333,0x39f)][_0x4006c2(0x438,0x493)][_0x4006c2(0x3c0,0x3d3)],this['windData']['bounds']['north'])},'fragmentShaderSource':ShaderManager[_0x4006c2(0x453,0x436)](),'outputTexture':this[_0x4006c2(0x3c5,0x448)]['particlesSpeed'],'preExecute':()=>{const _0x2c7017=this[_0xff92d4(0x2fd,0x2a6)]['previousParticlesPosition'];this['particlesTextures'][_0xff92d4(0x1df,0x219)]=this['particlesTextures'][_0x12e3ef(-0x384,-0x348)],this['particlesTextures'][_0x12e3ef(-0x32d,-0x348)]=this[_0xff92d4(0x260,0x2a6)][_0xff92d4(0x277,0x1fe)];function _0x12e3ef(_0x728c1b,_0x1b70b8){return _0x164cbe(_0x728c1b,_0x1b70b8- -0x68f);}function _0xff92d4(_0x147305,_0x4eef5e){return _0x4006c2(_0x147305,_0x4eef5e- -0x1a2);}this[_0xff92d4(0x30c,0x2a6)]['postProcessingPosition']=_0x2c7017,this['primitives'][_0x12e3ef(-0x35c,-0x33b)]['commandToExecute']&&(this[_0xff92d4(0x281,0x213)][_0x12e3ef(-0x381,-0x33b)]['commandToExecute'][_0xff92d4(0x339,0x2d7)]=this[_0x12e3ef(-0x2aa,-0x2a5)][_0x12e3ef(-0x2fb,-0x30e)]);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this[_0x4006c2(0x4d5,0x448)]['currentParticlesPosition'],'particlesSpeed':()=>this[_0x4006c2(0x447,0x448)]['particlesSpeed']},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this[_0x164cbe(0x366,0x3ea)][_0x164cbe(0x2e9,0x366)],'preExecute':()=>{function _0x3379a6(_0x19333b,_0x518521){return _0x164cbe(_0x19333b,_0x518521- -0x365);}function _0x41287a(_0x5e7126,_0x1832b6){return _0x164cbe(_0x1832b6,_0x5e7126- -0x485);}this[_0x41287a(-0x12e,-0x17f)]['updatePosition']['commandToExecute']&&(this['primitives']['updatePosition'][_0x3379a6(0x5d,0xb)]['outputTexture']=this['particlesTextures'][_0x41287a(-0x11f,-0x191)]);},'isDynamic':()=>this['options'][_0x164cbe(0x3e7,0x3e6)]}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this[_0x164cbe(0x399,0x3ea)]['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this[_0x4006c2(0x414,0x3b8)][_0x4006c2(0x416,0x3c2)],'latRange':()=>this[_0x164cbe(0x3c1,0x35a)]['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds'][_0x164cbe(0x346,0x375)]),'dataLatRange':()=>new Cartesian2$1(this[_0x164cbe(0x381,0x39f)]['bounds']['south'],this['windData'][_0x164cbe(0x43c,0x435)]['north']),'randomCoefficient':function(){function _0x23291f(_0x59ff5e,_0x23f591){return _0x4006c2(_0x23f591,_0x59ff5e- -0x6c9);}return Math[_0x23291f(-0x2d9,-0x31b)]();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this[_0x164cbe(0x3e8,0x407)]['dropRateBump'],'useViewerBounds':()=>this['options'][_0x4006c2(0x44e,0x424)]},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this[_0x4006c2(0x4cb,0x448)]['postProcessingPosition'],'preExecute':()=>{function _0x4c7f14(_0xca9b40,_0xd895df){return _0x164cbe(_0xd895df,_0xca9b40- -0x47e);}function _0x5d877d(_0x1b3bd3,_0x1328fa){return _0x164cbe(_0x1328fa,_0x1b3bd3- -0x2a4);}this['primitives'][_0x5d877d(0x9e,0x127)]['commandToExecute']&&(this[_0x5d877d(0xb3,0xea)][_0x4c7f14(-0x13c,-0x12a)][_0x5d877d(0xcc,0x14e)]['outputTexture']=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this[_0x4006c2(0x408,0x465)]['dynamic']})};}['reCreateWindTextures'](){this['windTextures']['U'][_0x7ef7d7(0x354,0x3b7)]();function _0x7ef7d7(_0x5557aa,_0xd15fcf){return _0x5d6852(_0x5557aa,_0xd15fcf-0x427);}function _0x4ba6fc(_0xa98f5d,_0x5b4753){return _0x5d6852(_0xa98f5d,_0x5b4753- -0xd);}this[_0x7ef7d7(0x40f,0x3e0)]['V']['destroy'](),this['createWindTextures']();}['updateWindData'](_0x560f4a){this['windData']=_0x560f4a,this['reCreateWindTextures']();}[_0x5d6852(-0x127,-0x122)](_0x1b6616){function _0x226d3a(_0xffc27d,_0x1a49e7){return _0x5d6852(_0xffc27d,_0x1a49e7-0xc6);}function _0x5a43dc(_0x45de46,_0x460b83){return _0x2d32e9(_0x45de46- -0x3e9,_0x460b83);}const _0x22a5bc=_0x1b6616['flipY']!==undefined&&_0x1b6616['flipY']!==this[_0x5a43dc(0x87,0x7d)]['flipY'];this[_0x226d3a(0xc6,0x55)]=deepMerge(_0x1b6616,this['options']),_0x22a5bc&&this['reCreateWindTextures']();}['processWindData'](_0x4be304){function _0x107609(_0x2fe81d,_0xe02993){return _0x2d32e9(_0xe02993- -0x67d,_0x2fe81d);}const {array:_0x264d74}=_0x4be304;let {min:_0x35e71f,max:_0x4c16ca}=_0x4be304;const _0x2cf716=new Float32Array(_0x264d74['length']);function _0x4a0f9e(_0x383292,_0x2a5737){return _0x2d32e9(_0x2a5737- -0x361,_0x383292);}_0x35e71f===undefined&&(console[_0x107609(-0x2a0,-0x230)]('min\x20is\x20undefined,\x20calculate\x20min'),_0x35e71f=Math['min'](..._0x264d74));_0x4c16ca===undefined&&(console['warn']('max\x20is\x20undefined,\x20calculate\x20max'),_0x4c16ca=Math['max'](..._0x264d74));const _0x24b321=Math['max'](Math['abs'](_0x35e71f),Math['abs'](_0x4c16ca));for(let _0x3f7042=0x0;_0x3f7042<_0x264d74[_0x107609(-0x1a2,-0x1d0)];_0x3f7042++){const _0x229689=_0x264d74[_0x3f7042]/_0x24b321;_0x2cf716[_0x3f7042]=_0x229689;}return _0x2cf716;}[_0x2d32e9(0x471,0x459)](){function _0x427206(_0x303f3b,_0x28670d){return _0x2d32e9(_0x303f3b- -0x3cd,_0x28670d);}Object['values'](this['windTextures'])[_0x15a699(-0x246,-0x292)](_0x21057e=>_0x21057e[_0x427206(0xa4,0x1d)]()),Object['values'](this['particlesTextures'])['forEach'](_0x5f119a=>_0x5f119a['destroy']());function _0x15a699(_0x2f23fb,_0x59315d){return _0x5d6852(_0x59315d,_0x2f23fb- -0x197);}Object[_0x15a699(-0x2b1,-0x2b4)](this['primitives'])['forEach'](_0x263b07=>_0x263b07['destroy']()),this['frameRateMonitor'][_0x15a699(-0x207,-0x28e)]();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];function _0x25d5(){const _0x35eb3b=['object','type','ymax','PointTrans','Compute','framebuffers','particlesNumber','_map','random','UNSIGNED_BYTE','getV','worker','getDirection','Cartesian3','updateWindData','original','getUVByXY','speedRate','canvasHeight','_canrefresh','colorTable','windData','fromDegrees','isInExtent','commandType','visibility','LINEAR','alt','clientWidth','tlng','particles','hidden','zIndex','speed','xmax','update','10VVTjxo','default','frameRate','_tomap','lighter','blending','_pointerEvents','mouse_down','segments','moveTo','alpha','domain','mars3d-wind插件\x20注册成功','visible','sqrt','fromCssColorString','bufferUsage','tlat','clientHeight','_speedRate','logInfo','fromCache','flatMap','_colorRamp','useViewerBounds','CanvasWindField','componentsPerAttribute','forEach','geometry','lineTo','_onMouseDownEvent','bind','3403379TsYjiZ','particlesTextureSize\x20must\x20be\x20greater\x20than\x200','212348HzLwje','13069760dpQpHx','_bilinearInterpolation','flipY','toDegrees','canvasContext','segmentsColor','ColorRamp','getCalculateSpeedShader','createRenderingFramebuffers','setOptions','clear','2395227rwHJZM','_addedHook','preExecute','floor','execute','_onMouseMoveEvent','windField','autoClear','warn','max','dynamic','xmin','changeOptions','mouse_move','particlesTextures','absolute','rows','SRC_ALPHA','EventType','pass','SceneMode','primitiveType','_drawLines','mode','getDataAtLonLat','25mSzhuK','removeChild','isDynamic','fixedHeight','slice','refreshTimer','32359869toOzVt','lineWidth','abs','reverse','createParticlesTextures','latRange','MIN_VALUE','vertexShaderSource','array','west','age','shaderProgram','options','destroy','rgb(206,255,255)','uniformMap','toRadians','lng','clearCommand','push','commandList','_calcUV','OPAQUE','isDestroyed','mouseDown','applyViewerParameters','_onMouseUpEvent','initWorker','atan2','attributeLocations','changed','canvas','outputTexture','displayRange','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','blendFuncDestination','bindEvent','ellipsoid','pickEllipsoid','prototype','vdata','init','lastFramesPerSecond','_mountedHook','scene','textures','frameRateAdjustment','setData','south','_createCanvas','createRenderingTextures','rendering','drawingBufferHeight','camera','windTextures','magnificationFilter','3098920fVplkx','show','bounds','width','postMessage','getSegmentDrawFragmentShader','_showHook','maxAge','addEventListener','Rectangle','color','north','container','redraw','componentDatatype','beginPath','wheel','length','requestAnimationFrame','error','updateViewerParameters','grid','getPrimitives','minificationFilter','height','pointer-events','resize','isDestroy','processWindData','ymin','getParticles','colors','context','wrapT','_calc_speedRate','depthMask','sources','value','top','onParticlesTextureSizeChange','1490196jVRYjQ','postProcessingPosition','cols','particleSystem','cartesianToCartographic','lat','currentParticlesPosition','Cesium','blendEquation','remove','auto','_animateFrame','clearFramebuffers','fragmentShaderSource','samplingWindow','pixelFormat','toWindowCoordinates','mouseMove','vertexArray','calculateSpeed','_maxAge','updateOptions','primitives','pointerEvents','dropRateBump','viewerParameters','strokeStyle','particlesTextureSize','previousParticlesPosition','values','computing','segmentsDepth','blue','pow','data','lonRange','frameTime','nextParticlesPosition','framebuffer','requestRender','getSegmentDrawVertexShader','Log','Cartesian2','createCommand','sceneMode','owner','modelMatrix','commandToExecute','canvasWidth','canvasWind','__esModule','register','east','drawingBufferWidth','green','number','#ffffff','_randomParticle','createSegmentsGeometry','getUVByPoint','off','createComputingPrimitives','globalCompositeOperation','getU','particlesSpeed','_onMapWhellEvent','FLOAT','frameRateMonitor','Math','style','layer','_setOptionsHook','min'];_0x25d5=function(){return _0x35eb3b;};return _0x25d5();}class WindParticlesRendering{constructor(_0x1374ca,_0x4d6122,_0x238925,_0x512b61){this[_0x598f7f(0x1dc,0x222)]=_0x1374ca,this['options']=_0x4d6122,this['viewerParameters']=_0x238925,this['computing']=_0x512b61;function _0x2a3a27(_0x2dfebe,_0x3bf416){return _0x5d6852(_0x2dfebe,_0x3bf416-0x2d0);}function _0x598f7f(_0x176054,_0x53a520){return _0x5d6852(_0x53a520,_0x176054-0x31b);}(typeof this['options']['particlesTextureSize']!==_0x598f7f(0x21b,0x27c)||this['options'][_0x598f7f(0x1ff,0x20e)]<=0x0)&&(console[_0x2a3a27(0x26b,0x29e)]('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options'][_0x598f7f(0x1ff,0x26f)]=0x100),this['colorTable']=this['createColorTableTexture'](),this[_0x2a3a27(0x294,0x280)]=this['createRenderingTextures'](),this[_0x2a3a27(0x225,0x1e7)]=this['createRenderingFramebuffers'](),this['primitives']=this['createPrimitives']();}[_0x5d6852(0x3,-0x4b)](){const _0x46d2be={};_0x46d2be['context']=this[_0x22e3af(0x2df,0x299)],_0x46d2be['width']=this['context']['drawingBufferWidth'],_0x46d2be['height']=this['context']['drawingBufferHeight'],_0x46d2be['pixelFormat']=PixelFormat['RGBA'],_0x46d2be['pixelDatatype']=PixelDatatype[_0x22e3af(0x2cc,0x2f3)];const _0x37f542=_0x46d2be,_0x3fc719={};_0x3fc719['context']=this[_0x22e3af(0x307,0x299)],_0x3fc719[_0x3f7c55(0x1c,0x4e)]=this['context'][_0x3f7c55(-0xa4,-0xa4)];function _0x3f7c55(_0x22833d,_0x5b8d95){return _0x2d32e9(_0x22833d- -0x483,_0x5b8d95);}_0x3fc719[_0x3f7c55(-0xe9,-0x91)]=this[_0x3f7c55(-0xe1,-0x13e)][_0x3f7c55(0x15,-0x67)],_0x3fc719[_0x3f7c55(-0xca,-0x7a)]=PixelFormat['DEPTH_COMPONENT'],_0x3fc719['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];function _0x22e3af(_0x42f182,_0x365a73){return _0x2d32e9(_0x365a73- -0x109,_0x42f182);}const _0x175a4f=_0x3fc719;return{'segmentsColor':new Texture(_0x37f542),'segmentsDepth':new Texture(_0x175a4f)};}[_0x5d6852(-0x3c,-0x9f)](){function _0xa00eb2(_0x4b9b79,_0x34f9e4){return _0x5d6852(_0x34f9e4,_0x4b9b79-0x344);}const _0x48df47={};function _0x3b7499(_0x4d0c3b,_0x106b57){return _0x5d6852(_0x4d0c3b,_0x106b57-0x33a);}return _0x48df47['context']=this['context'],_0x48df47['colorTextures']=[this[_0xa00eb2(0x2f4,0x2af)][_0x3b7499(0x2b1,0x298)]],_0x48df47['depthTexture']=this[_0xa00eb2(0x2f4,0x35d)]['segmentsDepth'],{'segments':new Framebuffer(_0x48df47)};}['destoryRenderingFramebuffers'](){Object['values'](this['framebuffers'])['forEach'](_0x5976a8=>{_0x5976a8['destroy']();});}['createColorTableTexture'](){const _0x215728=new Float32Array(this['options']['colors'][_0x3d9608(0x3b5,0x3cc)](_0x2ccf22=>{function _0x23e204(_0x4255b6,_0x37e6bd){return _0x3d9608(_0x4255b6,_0x37e6bd- -0x327);}function _0x5479a0(_0x4f1d95,_0x4ea16e){return _0x3d9608(_0x4f1d95,_0x4ea16e- -0x384);}const _0x5553ab=Color$1[_0x5479a0(0x99,0x41)](_0x2ccf22);return[_0x5553ab['red'],_0x5553ab[_0x5479a0(0x6,-0x5)],_0x5553ab[_0x23e204(0x7a,0x42)],_0x5553ab[_0x23e204(0xc1,0x99)]];})),_0x45c356={};_0x45c356['minificationFilter']=TextureMinificationFilter['LINEAR'],_0x45c356[_0x2f6fbb(-0x223,-0x1cf)]=TextureMagnificationFilter[_0x3d9608(0x361,0x3ac)],_0x45c356['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x45c356[_0x3d9608(0x31e,0x342)]=TextureWrap['CLAMP_TO_EDGE'];function _0x2f6fbb(_0x575863,_0x214d7d){return _0x2d32e9(_0x575863- -0x6be,_0x214d7d);}function _0x3d9608(_0xca9294,_0x463464){return _0x2d32e9(_0x463464- -0x61,_0xca9294);}return new Texture({'context':this['context'],'width':this['options']['colors'][_0x3d9608(0x3c3,0x44c)],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype[_0x3d9608(0x382,0x38b)],'sampler':new Sampler(_0x45c356),'source':{'width':this[_0x3d9608(0x3cd,0x40f)]['colors']['length'],'height':0x1,'arrayBufferView':_0x215728}});}[_0x2d32e9(0x3e4,0x390)](){function _0x4de750(_0x14b25a,_0x188646){return _0x2d32e9(_0x14b25a- -0x429,_0x188646);}const _0x29c34a=0x4,_0x541835=this['options'][_0x4de750(-0x64,0xd)];let _0x3ba708=[];function _0x413bc1(_0xf045a6,_0x389da4){return _0x2d32e9(_0x389da4-0x74,_0xf045a6);}for(let _0x4be754=0x0;_0x4be754<_0x541835;_0x4be754++){for(let _0x357568=0x0;_0x357568<_0x541835;_0x357568++){for(let _0x57698a=0x0;_0x57698a<_0x29c34a;_0x57698a++){_0x3ba708['push'](_0x4be754/_0x541835),_0x3ba708['push'](_0x357568/_0x541835);}}}_0x3ba708=new Float32Array(_0x3ba708);const _0x35f9bd=this[_0x413bc1(0x528,0x4e4)][_0x4de750(-0x64,0xc)]**0x2;let _0x49cbda=[];for(let _0x2e9f91=0x0;_0x2e9f91<_0x35f9bd;_0x2e9f91++){_0x49cbda['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x49cbda=new Float32Array(_0x49cbda);let _0x20cd1d=[];for(let _0x31e790=0x0,_0x1dfdf8=0x0;_0x31e790<_0x35f9bd;_0x31e790++){_0x20cd1d[_0x413bc1(0x4bf,0x4eb)](_0x1dfdf8+0x0,_0x1dfdf8+0x1,_0x1dfdf8+0x2,_0x1dfdf8+0x2,_0x1dfdf8+0x1,_0x1dfdf8+0x3),_0x1dfdf8+=_0x29c34a;}_0x20cd1d=new Uint32Array(_0x20cd1d);const _0x21c732={};_0x21c732[_0x4de750(0x81,0xc8)]=ComponentDatatype['FLOAT'],_0x21c732[_0x4de750(0x8,-0x3f)]=0x2,_0x21c732[_0x413bc1(0x49d,0x43b)]=_0x3ba708;const _0x59920a={};_0x59920a['componentDatatype']=ComponentDatatype['FLOAT'],_0x59920a['componentsPerAttribute']=0x3,_0x59920a[_0x413bc1(0x45e,0x43b)]=_0x49cbda;const _0x26c6fa=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x21c732),'normal':new GeometryAttribute(_0x59920a)}),'indices':_0x20cd1d});return _0x26c6fa;}['createRawRenderState'](_0x4e3452){const _0x507868={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x4e3452};return Appearance['getDefaultRenderState'](!![],![],_0x507868);}['createPrimitives'](){const _0x3b825f={};_0x3b825f['st']=0x0,_0x3b825f['normal']=0x1;const _0x28ec57={};_0x28ec57['enabled']=!![];const _0x292720={};_0x292720['enabled']=!![],_0x292720[_0x33f150(-0x60,-0xa7)]=WebGLRenderingContext['FUNC_ADD'],_0x292720['blendFuncSource']=WebGLRenderingContext[_0x183341(-0x153,-0xd0)],_0x292720[_0x183341(-0x122,-0x11b)]=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x276c9e={};_0x276c9e['viewport']=undefined;function _0x183341(_0x33fc94,_0x4caca8){return _0x5d6852(_0x4caca8,_0x33fc94- -0xc8);}_0x276c9e['depthTest']=_0x28ec57,_0x276c9e[_0x183341(-0x204,-0x1c0)]=!![],_0x276c9e[_0x33f150(-0x3f,-0x3d)]=_0x292720;function _0x33f150(_0x1a79d1,_0x2e1b6b){return _0x2d32e9(_0x2e1b6b- -0x459,_0x1a79d1);}const _0x6cf42a=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x3b825f,'geometry':this[_0x183341(-0x1c5,-0x164)](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this['computing'][_0x183341(-0x156,-0x121)]['currentParticlesPosition'],'postProcessingPosition':()=>this['computing']['particlesTextures'][_0x183341(-0x1fe,-0x1a9)],'particlesSpeed':()=>this[_0x183341(-0x1e1,-0x1b2)]['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this[_0x33f150(-0x33,-0x91)]['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{function _0x450cdb(_0x5429e9,_0x404b9b){return _0x183341(_0x5429e9- -0x3c,_0x404b9b);}function _0x365d40(_0x1cf8a6,_0x498466){return _0x33f150(_0x498466,_0x1cf8a6-0x315);}var _0x20d1ca,_0x6c26ee;const _0x42b888=new Cartesian2(((_0x20d1ca=this['options'][_0x365d40(0x2de,0x2af)])===null||_0x20d1ca===void 0x0?void 0x0:_0x20d1ca['min'])??this['computing']['windData']['speed']['min'],((_0x6c26ee=this[_0x365d40(0x32c,0x309)][_0x450cdb(-0x1c3,-0x16d)])===null||_0x6c26ee===void 0x0?void 0x0:_0x6c26ee[_0x365d40(0x30a,0x2d2)])??this[_0x365d40(0x284,0x225)][_0x450cdb(-0x1dd,-0x243)][_0x450cdb(-0x1d1,-0x19d)]['max']);return _0x42b888;},'displayRange':()=>{function _0x3c10a7(_0x22d041,_0x40d36b){return _0x183341(_0x40d36b-0xe,_0x22d041);}function _0x54f24b(_0x166cd4,_0x24cb42){return _0x183341(_0x24cb42- -0x11d,_0x166cd4);}var _0x492c40,_0x11449f;const _0x1435a3=new Cartesian2(((_0x492c40=this['options']['displayRange'])===null||_0x492c40===void 0x0?void 0x0:_0x492c40['min'])??this['computing']['windData'][_0x54f24b(-0x31b,-0x2b2)][_0x3c10a7(-0x134,-0x1a9)],((_0x11449f=this['options'][_0x3c10a7(-0xd4,-0x116)])===null||_0x11449f===void 0x0?void 0x0:_0x11449f[_0x3c10a7(-0x176,-0x14d)])??this[_0x3c10a7(-0x1ba,-0x1d3)]['windData'][_0x3c10a7(-0x12b,-0x187)][_0x3c10a7(-0x1aa,-0x14d)]);return _0x1435a3;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this['context']['drawingBufferHeight'],'pixelSize':()=>this[_0x183341(-0x1e6,-0x1e6)]['pixelSize'],'lineWidth':()=>{const _0x55a322={};_0x55a322['min']=0x1,_0x55a322['max']=0x2;function _0x3d4d1f(_0x40ae9f,_0xbaddf6){return _0x183341(_0xbaddf6- -0x146,_0x40ae9f);}const _0x505ea8=this[_0x547d68(0x6e,0x1)][_0x3d4d1f(-0x28b,-0x28a)]||_0x55a322;function _0x547d68(_0x370962,_0x282686){return _0x33f150(_0x370962,_0x282686- -0x16);}return new Cartesian2(_0x505ea8['min'],_0x505ea8['max']);},'lineLength':()=>{function _0x897d44(_0x21a934,_0x4a5070){return _0x183341(_0x21a934-0x16e,_0x4a5070);}const _0x3cda03={};_0x3cda03['min']=0x14,_0x3cda03['max']=0x64;const _0x272b95=this['options']['lineLength']||_0x3cda03;function _0x1a55cc(_0x5a0b38,_0x125bb5){return _0x33f150(_0x5a0b38,_0x125bb5-0x453);}return new Cartesian2(_0x272b95[_0x1a55cc(0x372,0x3ec)],_0x272b95[_0x897d44(0x13,-0x44)]);},'is3D':()=>this['viewerParameters']['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this[_0x33f150(-0x32,0x38)][_0x183341(-0x1e0,-0x1a2)]},'vertexShaderSource':ShaderManager[_0x183341(-0x1d7,-0x1f4)](),'fragmentShaderSource':ShaderManager[_0x183341(-0x108,-0x165)](),'rawRenderState':this['createRawRenderState'](_0x276c9e)}),_0x537ffd={};return _0x537ffd['segments']=_0x6cf42a,_0x537ffd;}[_0x5d6852(-0x15c,-0x138)](){function _0x14c9d6(_0xef0184,_0x398ecc){return _0x5d6852(_0xef0184,_0x398ecc-0x49b);}const _0x67dcf=this['createSegmentsGeometry']();this['primitives']['segments']['geometry']=_0x67dcf;const _0x56a9fb={};_0x56a9fb[_0x3e8a6f(-0x134,-0xa9)]=this[_0x3e8a6f(-0x9e,-0xa9)],_0x56a9fb['geometry']=_0x67dcf;function _0x3e8a6f(_0x579bc1,_0x44f37f){return _0x2d32e9(_0x44f37f- -0x44b,_0x579bc1);}_0x56a9fb['attributeLocations']=this[_0x14c9d6(0x3ba,0x37a)]['segments']['attributeLocations'],_0x56a9fb[_0x3e8a6f(0x1a,-0x24)]=BufferUsage['STATIC_DRAW'];const _0xc32d28=VertexArray['fromGeometry'](_0x56a9fb);this['primitives']['segments'][_0x14c9d6(0x3fe,0x393)]&&(this[_0x3e8a6f(-0x4f,-0x8b)]['segments'][_0x3e8a6f(-0x11,-0x72)]['vertexArray']=_0xc32d28);}['onColorTableChange'](){function _0x396677(_0x3bb628,_0x1fb0ef){return _0x2d32e9(_0x1fb0ef-0xa1,_0x3bb628);}this[_0x396677(0x4b2,0x4a8)]['destroy'](),this['colorTable']=this['createColorTableTexture']();}[_0x2d32e9(0x3bf,0x3af)](_0x3ba74c){function _0x4c43e6(_0x19b251,_0x1fb8b3){return _0x5d6852(_0x1fb8b3,_0x19b251- -0x181);}function _0x45fbd2(_0xc99235,_0x3f38f6){return _0x2d32e9(_0xc99235- -0x3c0,_0x3f38f6);}const _0x19552f=_0x3ba74c[_0x4c43e6(-0x2c1,-0x25e)]&&JSON['stringify'](_0x3ba74c[_0x4c43e6(-0x2c1,-0x320)])!==JSON['stringify'](this['options']['colors']);this['options']=deepMerge(_0x3ba74c,this['options']),_0x19552f&&this['onColorTableChange']();}[_0x5d6852(-0xa8,-0x70)](){Object[_0x22e010(-0x221,-0x2a9)](this['framebuffers'])['forEach'](_0xfaa0c0=>{_0xfaa0c0['destroy']();}),Object['values'](this[_0xd0bccb(0x1c4,0x182)])['forEach'](_0xca7c25=>{function _0x494d9a(_0x3002b3,_0x47a42c){return _0xd0bccb(_0x3002b3- -0x25d,_0x47a42c);}_0xca7c25[_0x494d9a(0x18,-0xc)]();});function _0xd0bccb(_0x1fe597,_0x179610){return _0x2d32e9(_0x1fe597- -0x1fc,_0x179610);}function _0x22e010(_0x29aa02,_0x3ad614){return _0x5d6852(_0x3ad614,_0x29aa02- -0x107);}this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x5d6852(-0x14a,-0x130)];class WindParticleSystem{constructor(_0x325a53,_0x27dc5a,_0x191084,_0x4395b5,_0x29c22){function _0x2c449a(_0x17b110,_0x3afd3e){return _0x5d6852(_0x17b110,_0x3afd3e-0x1d8);}this[_0x2c449a(0x73,0x99)]=_0x325a53,this['options']=_0x191084,this['viewerParameters']=_0x4395b5,this['computing']=new WindParticlesComputing(_0x325a53,_0x27dc5a,_0x191084,_0x4395b5,_0x29c22),this[_0x2c449a(0x1f5,0x18e)]=new WindParticlesRendering(_0x325a53,_0x191084,_0x4395b5,this[_0x2c449a(0x63,0xbf)]);function _0x33f4e1(_0x140b6d,_0x3cf40f){return _0x2d32e9(_0x3cf40f- -0x518,_0x140b6d);}this['clearFramebuffers']();}['getPrimitives'](){const _0x15d4f2=[this[_0x452f82(0x1e1,0x203)][_0x2ad721(-0x33c,-0x2dd)]['calculateSpeed'],this['computing']['primitives']['updatePosition'],this['computing']['primitives']['postProcessingPosition'],this[_0x2ad721(-0x265,-0x242)]['primitives'][_0x2ad721(-0x2dd,-0x275)]];function _0x2ad721(_0x26defa,_0x48b150){return _0x2d32e9(_0x26defa- -0x6fc,_0x48b150);}function _0x452f82(_0x21487a,_0x5742ff){return _0x5d6852(_0x5742ff,_0x21487a-0x2fa);}return _0x15d4f2;}[_0x2d32e9(0x3b6,0x38a)](){const _0x4de599=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});Object['keys'](this['rendering']['framebuffers'])['forEach'](_0x339113=>{_0x4de599[_0x38975c(-0x232,-0x1f7)]=this['rendering'][_0x555ff3(0x1db,0x230)][_0x339113];function _0x555ff3(_0x3d14d3,_0x4c67c5){return _0x2182(_0x3d14d3-0xfb,_0x4c67c5);}function _0x38975c(_0x2354a2,_0x255b66){return _0x2182(_0x255b66- -0x2af,_0x2354a2);}_0x4de599[_0x38975c(-0x103,-0x17e)](this[_0x555ff3(0x185,0x1d3)]);});}[_0x5d6852(-0x21,-0x90)](_0x1fadfd){let _0x53bea0=![];_0x1fadfd[_0x2f2707(-0x43,-0x4c)]&&this[_0x2f2707(0x68,0x64)][_0x20a786(0x1f5,0x20f)]!==_0x1fadfd[_0x2f2707(-0x43,0x7)]&&(_0x53bea0=!![]);function _0x20a786(_0x1aee1b,_0x528d31){return _0x5d6852(_0x1aee1b,_0x528d31-0x32b);}const _0x3e5f6d=deepMerge(_0x1fadfd,this['options']);if(_0x3e5f6d['particlesTextureSize']<0x1)throw new Error(_0x2f2707(0x30,0xd));function _0x2f2707(_0x3bbdbe,_0x45d7b1){return _0x2d32e9(_0x3bbdbe- -0x408,_0x45d7b1);}this['options']=_0x3e5f6d,this['rendering']['updateOptions'](_0x1fadfd),this['computing'][_0x20a786(0x1e3,0x209)](_0x1fadfd),_0x53bea0&&(this['computing']['destroyParticlesTextures'](),this[_0x20a786(0x27b,0x212)]['createParticlesTextures'](),this[_0x2f2707(0x8f,0xa4)][_0x20a786(0x1fe,0x1f3)]());}[_0x2d32e9(0x47d,0x42b)](_0x367ef8){function _0x5e7d78(_0x3f8c20,_0x36092e){return _0x2d32e9(_0x3f8c20- -0x32d,_0x36092e);}this['viewerParameters']=_0x367ef8,this[_0x5e7d78(0x9b,0xed)]['viewerParameters']=_0x367ef8;function _0x468f35(_0x594c78,_0xc9d494){return _0x2d32e9(_0x594c78-0x16,_0xc9d494);}this[_0x5e7d78(0x16a,0x19f)]['viewerParameters']=_0x367ef8;}['destroy'](){this['computing']['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace[_0x2d32e9(0x3b1,0x411)],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x2e08e6={};_0x2e08e6['min']=0x1,_0x2e08e6['max']=0x2;const _0x1c4345={};_0x1c4345[_0x2d32e9(0x3f2,0x3ff)]=0x14,_0x1c4345[_0x5d6852(-0x11e,-0x93)]=0x64;const _0x2a4ad0={};_0x2a4ad0[_0x2d32e9(0x3c5,0x3fc)]=0x64,_0x2a4ad0[_0x5d6852(-0x9b,-0x80)]=0x0,_0x2a4ad0[_0x2d32e9(0x465,0x4b9)]=_0x2e08e6,_0x2a4ad0['lineLength']=_0x1c4345,_0x2a4ad0['speedFactor']=0x1,_0x2a4ad0['dropRate']=0.003,_0x2a4ad0[_0x5d6852(-0xb9,-0x11f)]=0.001,_0x2a4ad0['colors']=[_0x2d32e9(0x472,0x444)],_0x2a4ad0[_0x2d32e9(0x43c,0x3c6)]=![],_0x2a4ad0[_0x2d32e9(0x44f,0x460)]=!![];const DEF_OPTIONS=_0x2a4ad0;class WindLayer extends BaseLayer$1{constructor(_0x4d2922={}){_0x4d2922={...DEF_OPTIONS,..._0x4d2922};function _0x5db06e(_0x4d9b6a,_0xbeb667){return _0x2d32e9(_0x4d9b6a- -0x9e,_0xbeb667);}super(_0x4d2922),this[_0x5db06e(0x353,0x31a)](_0x4d2922,_0x4d2922);}get['layer'](){return this['primitives'];}get[_0x5d6852(-0x164,-0x115)](){function _0xc08f3f(_0x31aa7,_0x46819e){return _0x5d6852(_0x31aa7,_0x46819e-0x534);}return this['options'][_0xc08f3f(0x450,0x41f)];}set['data'](_0x43924d){function _0x37f9bc(_0x59b8db,_0x4d90d3){return _0x2d32e9(_0x59b8db- -0x282,_0x4d90d3);}this['options']['data']=_0x43924d,this[_0x37f9bc(0x211,0x1a9)](_0x43924d);}get[_0x2d32e9(0x3a1,0x3f7)](){return this['options']['colors'];}set['colors'](_0x45ab72){this['options'][_0x1442a7(-0x237,-0x213)]=_0x45ab72;function _0x1442a7(_0x52b0e6,_0x27e5fe){return _0x2d32e9(_0x27e5fe- -0x5b4,_0x52b0e6);}const _0x356ef5={};_0x356ef5['colors']=_0x45ab72,this['_setOptionsHook'](this['options'],_0x356ef5);}['_showHook'](_0x812916){_0x812916?this['_addedHook']():this['_removedHook']();}['_mountedHook'](){}['_addedHook'](){this['scene']=this[_0x206c89(-0x71,-0x66)][_0x11f144(0x282,0x210)],this[_0x11f144(0x1c9,0x219)]=this['_map']['camera'];this[_0x11f144(0x256,0x1f0)]['data']&&this['setData'](this['options'][_0x206c89(-0x9f,-0xe9)]);if(!this['windData']||!this['show'])return;function _0x11f144(_0x3c5777,_0x2403d2){return _0x5d6852(_0x3c5777,_0x2403d2-0x261);}this['viewerParameters']={'lonRange':new Cesium$1[(_0x206c89(-0x97,-0x99))](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']},this[_0x11f144(0x281,0x230)](),this[_0x11f144(0x182,0x12d)]=new WindParticleSystem(this[_0x11f144(0x1ff,0x210)][_0x206c89(-0xc9,-0xe7)],this['windData'],this['options'],this[_0x11f144(0xe4,0x143)],this['scene']),this[_0x11f144(0x1cb,0x140)]=this['particleSystem'][_0x11f144(0x1e7,0x232)](),this['primitives']['forEach'](_0x4822c0=>{this['scene']['primitives']['add'](_0x4822c0);}),this['camera']['percentageChanged']=0.01,this['camera']['changed'][_0x11f144(0x1de,0x224)](this[_0x206c89(0x45,0x36)]['bind'](this)),this[_0x11f144(0x264,0x210)]['morphComplete']['addEventListener'](this['updateViewerParameters']['bind'](this));function _0x206c89(_0x2ff6b4,_0x1d3935){return _0x2d32e9(_0x2ff6b4- -0x46b,_0x1d3935);}window[_0x206c89(0x39,-0x25)](_0x11f144(0x101,0x11c),this['updateViewerParameters']['bind'](this));}['_removedHook'](){function _0x44e961(_0x46f256,_0x9569c7){return _0x5d6852(_0x9569c7,_0x46f256-0x56a);}this[_0x44e961(0x522,0x552)][_0x44e961(0x50b,0x4ee)]['removeEventListener'](this['updateViewerParameters']['bind'](this)),this[_0x53a0fe(0x2db,0x31f)]['morphComplete']['removeEventListener'](this[_0x44e961(0x539,0x544)]['bind'](this)),window['removeEventListener'](_0x53a0fe(0x1e7,0x19f),this['updateViewerParameters']['bind'](this));function _0x53a0fe(_0x591984,_0x49c2bc){return _0x5d6852(_0x49c2bc,_0x591984-0x32c);}this['primitives']&&(this['primitives'][_0x44e961(0x4bb,0x443)](_0x462316=>{function _0x29914f(_0x5ed7a5,_0xed2ea){return _0x44e961(_0xed2ea- -0x1fa,_0x5ed7a5);}function _0x3b7555(_0x277305,_0x7ef8f0){return _0x53a0fe(_0x7ef8f0- -0x23f,_0x277305);}this[_0x29914f(0x320,0x31f)]['primitives'][_0x3b7555(-0x1d,-0x41)](_0x462316);}),delete this['primitives']),this['particleSystem']&&(this[_0x53a0fe(0x1f8,0x1c0)]['destroy'](),delete this['particleSystem']);}['setData'](_0x27fb2b,_0x1730e5){this[_0x570ad8(-0x185,-0x1d8)]=this[_0x570ad8(-0x1ef,-0x1cf)](_0x27fb2b);function _0x1963b8(_0x5cd322,_0x492a99){return _0x5d6852(_0x492a99,_0x5cd322-0x47e);}function _0x570ad8(_0x20f958,_0x3e5dfb){return _0x2d32e9(_0x20f958- -0x58d,_0x3e5dfb);}if(_0x1730e5){this['_removedHook'](),this[_0x1963b8(0x3e3,0x3e7)]();return;}this['particleSystem']?(this['particleSystem']['computing'][_0x1963b8(0x39e,0x35d)](this[_0x1963b8(0x3a5,0x31d)]),this[_0x570ad8(-0xfd,-0x9e)][_0x1963b8(0x36e,0x35e)]()):this['_addedHook']();}['_setOptionsHook'](_0x3443fb,_0x1f1b7d){function _0x74d96c(_0x58044c,_0x2de136){return _0x2d32e9(_0x58044c- -0x271,_0x2de136);}function _0x220669(_0x4f7ae9,_0xa8ef6d){return _0x5d6852(_0xa8ef6d,_0x4f7ae9-0x33);}this[_0x220669(-0x101,-0x135)]&&(this[_0x220669(-0x101,-0x79)][_0x74d96c(0x1e0,0x197)](_0x1f1b7d),this['scene']['requestRender']());}[_0x5d6852(-0xf3,-0x143)](_0x4fa53b){var _0x2b0132,_0x4cc674;const _0x4c467f={..._0x4fa53b},_0x1aa6ec=_0x4c467f;!_0x1aa6ec['height']&&_0x1aa6ec['rows']&&(_0x1aa6ec[_0x51afb1(-0x1ce,-0x149)]=_0x1aa6ec['rows']);!_0x1aa6ec[_0x48cbee(-0x18f,-0x1a5)]&&_0x1aa6ec['cols']&&(_0x1aa6ec['width']=_0x1aa6ec['cols']);!_0x1aa6ec['bounds']&&(_0x1aa6ec[_0x48cbee(-0x190,-0x20c)]={'west':_0x1aa6ec['xmin'],'south':_0x1aa6ec['ymin'],'east':_0x1aa6ec['xmax'],'north':_0x1aa6ec['ymax']});if(!_0x1aa6ec['u']){const _0x6a26dc={};_0x6a26dc['array']=_0x4fa53b['udata'],_0x6a26dc['min']=_0x4fa53b['umin'],_0x6a26dc['max']=_0x4fa53b['umax'],_0x1aa6ec['u']=_0x6a26dc;}function _0x51afb1(_0x468a6c,_0x5480ca){return _0x2d32e9(_0x468a6c- -0x568,_0x5480ca);}if(!_0x1aa6ec['v']){const _0x3da5dd={};_0x3da5dd['array']=_0x4fa53b[_0x48cbee(-0x1a2,-0x13a)],_0x3da5dd['min']=_0x4fa53b['vmin'],_0x3da5dd['max']=_0x4fa53b['vmax'],_0x1aa6ec['v']=_0x3da5dd;}function _0x48cbee(_0x99106d,_0x3bd299){return _0x2d32e9(_0x99106d- -0x62e,_0x3bd299);}if(((_0x2b0132=_0x1aa6ec[_0x48cbee(-0x21a,-0x258)])===null||_0x2b0132===void 0x0?void 0x0:_0x2b0132['min'])===undefined||((_0x4cc674=_0x1aa6ec[_0x51afb1(-0x154,-0x19a)])===null||_0x4cc674===void 0x0?void 0x0:_0x4cc674['max'])===undefined||_0x1aa6ec['speed'][_0x48cbee(-0x1c2,-0x22d)]===undefined){const _0x5509f5={'array':new Float32Array(_0x1aa6ec['u'][_0x51afb1(-0xfc,-0x109)][_0x51afb1(-0xbb,-0x98)]),'min':Number['MAX_VALUE'],'max':Number[_0x51afb1(-0xfe,-0xae)]};for(let _0x72610=0x0;_0x72610<_0x1aa6ec['u']['array']['length'];_0x72610++){_0x5509f5[_0x48cbee(-0x1c2,-0x1a5)][_0x72610]=Math['sqrt'](_0x1aa6ec['u'][_0x51afb1(-0xfc,-0x166)][_0x72610]*_0x1aa6ec['u'][_0x48cbee(-0x1c2,-0x195)][_0x72610]+_0x1aa6ec['v'][_0x51afb1(-0xfc,-0x118)][_0x72610]*_0x1aa6ec['v'][_0x51afb1(-0xfc,-0x170)][_0x72610]),_0x5509f5['array'][_0x72610]!==0x0&&(_0x5509f5[_0x51afb1(-0x176,-0x165)]=Math['min'](_0x5509f5['min'],_0x5509f5[_0x51afb1(-0xfc,-0x176)][_0x72610]),_0x5509f5['max']=Math['max'](_0x5509f5['max'],_0x5509f5[_0x51afb1(-0xfc,-0x183)][_0x72610]));}_0x1aa6ec['speed']=_0x5509f5;}return _0x1aa6ec;}[_0x2d32e9(0x4b0,0x4cb)](){var _0x45c327;const _0x40c47=this['scene'];if(!_0x40c47)return;const _0x4c178f=_0x40c47[_0xa63e28(0x1a7,0x13b)],_0x48ac5a={};_0x48ac5a['x']=0x0,_0x48ac5a['y']=0x0;const _0xe062b0={};function _0xa63e28(_0x18a1b9,_0x437b62){return _0x5d6852(_0x437b62,_0x18a1b9-0x205);}function _0x376916(_0x260c58,_0x1d3c1c){return _0x2d32e9(_0x260c58- -0x544,_0x1d3c1c);}_0xe062b0['x']=0x0,_0xe062b0['y']=_0x4c178f[_0xa63e28(0x14d,0x1a7)];const _0x1772fa={};_0x1772fa['x']=_0x4c178f['clientWidth'],_0x1772fa['y']=0x0;const _0x219b29={};_0x219b29['x']=_0x4c178f['clientWidth'],_0x219b29['y']=_0x4c178f[_0x376916(-0x11b,-0x127)];const _0x2d35e1=[_0x48ac5a,_0xe062b0,_0x1772fa,_0x219b29];let _0x2f1809=0xb4,_0x45df3a=-0xb4,_0x3f3aaf=0x5a,_0x1e13fd=-0x5a,_0x2615de=![];for(const _0x1a1175 of _0x2d35e1){const _0x42d018=_0x40c47['camera'][_0xa63e28(0x1ae,0x203)](new Cesium$1['Cartesian2'](_0x1a1175['x'],_0x1a1175['y']),_0x40c47['globe']['ellipsoid']);if(!_0x42d018){_0x2615de=!![];break;}const _0x135a33=_0x40c47['globe'][_0xa63e28(0x1ad,0x1b1)][_0xa63e28(0xd2,0x15b)](_0x42d018),_0x44091b=Cesium$1['Math']['toDegrees'](_0x135a33['longitude']),_0x3adc73=Cesium$1['Math'][_0xa63e28(0x161,0x1de)](_0x135a33['latitude']);_0x2f1809=Math[_0x376916(-0x152,-0x10a)](_0x2f1809,_0x44091b),_0x45df3a=Math[_0x376916(-0xf6,-0x9c)](_0x45df3a,_0x44091b),_0x3f3aaf=Math[_0xa63e28(0x116,0xb8)](_0x3f3aaf,_0x3adc73),_0x1e13fd=Math['max'](_0x1e13fd,_0x3adc73);}if(!_0x2615de){const _0x386f0e=new Cesium$1[(_0xa63e28(0xf8,0x138))](Math['max'](this['windData'][_0x376916(-0xa6,-0x46)][_0x376916(-0xd7,-0x13a)],_0x2f1809),Math[_0x376916(-0x152,-0x1cd)](this['windData']['bounds']['east'],_0x45df3a)),_0x539067=new Cesium$1[(_0x376916(-0x170,-0x171))](Math['max'](this[_0xa63e28(0x12c,0x1aa)]['bounds'][_0xa63e28(0x1b8,0x21a)],_0x3f3aaf),Math['min'](this[_0xa63e28(0x12c,0x103)]['bounds']['north'],_0x1e13fd)),_0x4ea5c0=(_0x386f0e['y']-_0x386f0e['x'])*0.05,_0x2ff327=(_0x539067['y']-_0x539067['x'])*0.05;_0x386f0e['x']=Math['max'](this[_0xa63e28(0x12c,0xa7)][_0xa63e28(0x1c2,0x204)]['west'],_0x386f0e['x']-_0x4ea5c0),_0x386f0e['y']=Math[_0x376916(-0x152,-0x182)](this['windData']['bounds'][_0x376916(-0x166,-0x1dd)],_0x386f0e['y']+_0x4ea5c0),_0x539067['x']=Math['max'](this['windData'][_0x376916(-0xa6,-0xf5)]['south'],_0x539067['x']-_0x2ff327),_0x539067['y']=Math['min'](this['windData']['bounds']['north'],_0x539067['y']+_0x2ff327),this['viewerParameters']['lonRange']=_0x386f0e,this['viewerParameters'][_0x376916(-0xdb,-0xe4)]=_0x539067;const _0x1a2ae2=this['windData'][_0x376916(-0xa6,-0xb3)][_0xa63e28(0x102,0x79)]-this['windData'][_0x376916(-0xa6,-0xfc)]['west'],_0x35c079=this['windData'][_0x376916(-0xa6,-0x127)]['north']-this['windData'][_0xa63e28(0x1c2,0x225)][_0xa63e28(0x1b8,0x200)],_0x45fcb0=(_0x386f0e['y']-_0x386f0e['x'])/_0x1a2ae2,_0xa4d0f8=(_0x539067['y']-_0x539067['x'])/_0x35c079,_0x5ee7fe=Math['min'](_0x45fcb0,_0xa4d0f8),_0xaa8f57=0x3e8*_0x5ee7fe;_0xaa8f57>0x0&&(this[_0xa63e28(0xe7,0x11a)]['pixelSize']=Math['max'](0x0,Math[_0x376916(-0x152,-0x114)](0x3e8,_0xaa8f57)));}this[_0x376916(-0x181,-0x18d)][_0x376916(-0x16e,-0x1d7)]=this[_0x376916(-0xb4,-0x11e)]['mode'],(_0x45c327=this['particleSystem'])===null||_0x45c327===void 0x0||_0x45c327['applyViewerParameters'](this['viewerParameters']);}[_0x2d32e9(0x45d,0x3dc)](_0x14c092,_0x5ad1a){const {bounds:_0x1149a3,width:_0x3084a4,height:_0x36dc7e,u:_0x53fd55,v:_0x1e57f8,speed:_0x486e41}=this[_0x533b84(0x3c,0x1b)],{flipY:_0x26ecdb}=this['options'];if(_0x14c092<_0x1149a3[_0x533b84(0x79,0x80)]||_0x14c092>_0x1149a3[_0x533b84(0xd,-0xf)]||_0x5ad1a<_0x1149a3[_0x33bd03(0x435,0x42e)]||_0x5ad1a>_0x1149a3[_0x533b84(0x118,0xba)])return null;const _0x51b60d=(_0x14c092-_0x1149a3[_0x533b84(0xdd,0x80)])/(_0x1149a3['east']-_0x1149a3['west'])*(_0x3084a4-0x1);let _0x56c4f1=(_0x5ad1a-_0x1149a3['south'])/(_0x1149a3[_0x533b84(0x67,0xba)]-_0x1149a3[_0x533b84(0x59,0xa7)])*(_0x36dc7e-0x1);_0x26ecdb&&(_0x56c4f1=_0x36dc7e-0x1-_0x56c4f1);const _0x33f38e=Math[_0x33bd03(0x46d,0x3e2)](_0x51b60d),_0x5006d6=Math['floor'](_0x56c4f1),_0x8e2249=Math[_0x533b84(-0x22,0x5b)](_0x51b60d),_0x4828c0=Math[_0x33bd03(0x32f,0x38c)](_0x8e2249+0x1,_0x3084a4-0x1),_0x4cc072=Math[_0x33bd03(0x404,0x3e2)](_0x56c4f1),_0x53ecfd=Math['min'](_0x4cc072+0x1,_0x36dc7e-0x1),_0x3231cb=_0x51b60d-_0x8e2249,_0x1fdd1d=_0x56c4f1-_0x4cc072,_0x7cd9d7=_0x5006d6*_0x3084a4+_0x33f38e,_0x1e2723=_0x4cc072*_0x3084a4+_0x8e2249,_0x38bfd4=_0x4cc072*_0x3084a4+_0x4828c0;function _0x33bd03(_0x2f3d47,_0x56b225){return _0x5d6852(_0x2f3d47,_0x56b225-0x47b);}const _0x5de078=_0x53ecfd*_0x3084a4+_0x8e2249,_0x545712=_0x53ecfd*_0x3084a4+_0x4828c0,_0x1ba9f0=_0x53fd55['array'][_0x1e2723],_0x1318bb=_0x53fd55[_0x533b84(0x9,0x7f)][_0x38bfd4],_0x3ffacb=_0x53fd55[_0x533b84(0xe1,0x7f)][_0x5de078];function _0x533b84(_0x171732,_0x1ec7e9){return _0x2d32e9(_0x1ec7e9- -0x3ed,_0x171732);}const _0x587a09=_0x53fd55[_0x33bd03(0x3b7,0x406)][_0x545712],_0x29ac20=(0x1-_0x3231cb)*(0x1-_0x1fdd1d)*_0x1ba9f0+_0x3231cb*(0x1-_0x1fdd1d)*_0x1318bb+(0x1-_0x3231cb)*_0x1fdd1d*_0x3ffacb+_0x3231cb*_0x1fdd1d*_0x587a09,_0x518350=_0x1e57f8[_0x533b84(0x5c,0x7f)][_0x1e2723],_0x55ee1d=_0x1e57f8['array'][_0x38bfd4],_0x4f8281=_0x1e57f8[_0x33bd03(0x45e,0x406)][_0x5de078],_0x3f26b4=_0x1e57f8['array'][_0x545712],_0x2ff7f3=(0x1-_0x3231cb)*(0x1-_0x1fdd1d)*_0x518350+_0x3231cb*(0x1-_0x1fdd1d)*_0x55ee1d+(0x1-_0x3231cb)*_0x1fdd1d*_0x4f8281+_0x3231cb*_0x1fdd1d*_0x3f26b4,_0x194798=Math['sqrt'](_0x29ac20*_0x29ac20+_0x2ff7f3*_0x2ff7f3),_0x211740={};_0x211740['u']=_0x53fd55[_0x533b84(0x43,0x7f)][_0x7cd9d7],_0x211740['v']=_0x1e57f8['array'][_0x7cd9d7],_0x211740['speed']=_0x486e41[_0x33bd03(0x467,0x406)][_0x7cd9d7];const _0x52b9b5={};_0x52b9b5['u']=_0x29ac20,_0x52b9b5['v']=_0x2ff7f3,_0x52b9b5['speed']=_0x194798;const _0x17ea56={};return _0x17ea56[_0x533b84(0x24,0x15)]=_0x211740,_0x17ea56['interpolated']=_0x52b9b5,_0x17ea56;}}mars3d__namespace['LayerUtil'][_0x5d6852(-0x18c,-0x104)]('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null;function _0x4f6f99(_0x1fd3d5,_0x3b69cf){return _0x5d6852(_0x3b69cf,_0x1fd3d5- -0xb5);}function _0x39bd26(_0x46c62f,_0x4bb966){return _0x5d6852(_0x4bb966,_0x46c62f-0x508);}this['lat']=null,this['tlng']=null,this[_0x39bd26(0x44f,0x3d5)]=null,this['age']=null,this[_0x4f6f99(-0x182,-0x18f)]=null;}[_0x2d32e9(0x471,0x3f5)](){for(const _0x332696 in this){delete this[_0x332696];}}}class CanvasWindField{constructor(_0x5b5589){this['setOptions'](_0x5b5589);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x51a112){function _0x551707(_0xf66484,_0x401006){return _0x2d32e9(_0x401006- -0x367,_0xf66484);}function _0x9d84cc(_0x348bf0,_0x28ce8e){return _0x2d32e9(_0x28ce8e- -0x5b3,_0x348bf0);}this[_0x551707(0x91,0xc3)]=(0x64-(_0x51a112>0x63?0x63:_0x51a112))*0x64,this[_0x551707(0x4,0x3d)]=[(this[_0x551707(0x3a,0xae)]-this[_0x551707(0xde,0xe9)])/this[_0x551707(0x137,0xc3)],(this['ymax']-this[_0x551707(-0x33,0x38)])/this['_speedRate']];}get[_0x2d32e9(0x4a3,0x45e)](){function _0x29dcc6(_0x2c772f,_0x2f0a58){return _0x2d32e9(_0x2c772f- -0x3b0,_0x2f0a58);}return this[_0x29dcc6(0xe,0x87)];}set[_0x5d6852(0x33,-0x3e)](_0x44d6f0){this['_maxAge']=_0x44d6f0;}['setOptions'](_0x4e58ff){function _0x307634(_0x3c7fdb,_0x2860b8){return _0x2d32e9(_0x2860b8- -0x74,_0x3c7fdb);}this['options']=_0x4e58ff,this['maxAge']=_0x4e58ff[_0x307634(0x3ef,0x42f)]||0x78,this['speedRate']=_0x4e58ff['speedRate']||0x32;function _0x2f34a1(_0x3e1e54,_0xc73a80){return _0x2d32e9(_0x3e1e54- -0x47d,_0xc73a80);}this['particles']=[];const _0x1b9a42=_0x4e58ff[_0x307634(0x39b,0x385)]||0x1000;for(let _0x42ceaf=0x0;_0x42ceaf<_0x1b9a42;_0x42ceaf++){const _0x2ea74e=this[_0x307634(0x311,0x36f)](new CanvasParticle());this['particles']['push'](_0x2ea74e);}}['setDate'](_0x594502){this['rows']=_0x594502[_0x1b777e(0x380,0x3ee)],this[_0x20c395(-0x2e3,-0x31e)]=_0x594502[_0x1b777e(0x2cf,0x345)],this[_0x1b777e(0x3da,0x3e9)]=_0x594502[_0x20c395(-0x2fc,-0x27a)],this[_0x20c395(-0x2b6,-0x2b5)]=_0x594502[_0x20c395(-0x301,-0x2b5)],this['ymin']=_0x594502[_0x20c395(-0x37f,-0x32b)],this['ymax']=_0x594502[_0x1b777e(0x38f,0x38e)],this[_0x1b777e(0x41f,0x44a)]=[];const _0x4fddfb=_0x594502['udata'],_0x257eaf=_0x594502['vdata'];let _0x286ea0=![];function _0x1b777e(_0x3f79ac,_0x2a8e65){return _0x2d32e9(_0x2a8e65- -0x67,_0x3f79ac);}_0x4fddfb['length']===this['rows']&&_0x4fddfb[0x0]['length']===this['cols']&&(_0x286ea0=!![]);let _0x23e5c1=0x0,_0x390480=null,_0x126fff=null;function _0x20c395(_0x90b4b4,_0x1061fd){return _0x5d6852(_0x90b4b4,_0x1061fd- -0x1e9);}for(let _0x2ea9b7=0x0;_0x2ea9b7<this[_0x20c395(-0x1f6,-0x275)];_0x2ea9b7++){_0x390480=[];for(let _0x543579=0x0;_0x543579<this['cols'];_0x543579++,_0x23e5c1++){_0x286ea0?_0x126fff=this[_0x1b777e(0x38f,0x412)](_0x4fddfb[_0x2ea9b7][_0x543579],_0x257eaf[_0x2ea9b7][_0x543579]):_0x126fff=this['_calcUV'](_0x4fddfb[_0x23e5c1],_0x257eaf[_0x23e5c1]),_0x390480['push'](_0x126fff);}this['grid'][_0x20c395(-0x275,-0x253)](_0x390480);}!this['options']['flipY']&&this['grid'][_0x1b777e(0x411,0x400)]();}['clear'](){delete this['rows'],delete this[_0x3adf9d(0x413,0x3b3)],delete this[_0x41148f(-0xea,-0x151)],delete this[_0x41148f(-0x1de,-0x18c)],delete this[_0x41148f(-0x28a,-0x202)],delete this[_0x3adf9d(0x472,0x3fc)],delete this['grid'];function _0x41148f(_0x169bc6,_0x5c9fe2){return _0x2d32e9(_0x5c9fe2- -0x5a1,_0x169bc6);}function _0x3adf9d(_0x226648,_0x42065e){return _0x5d6852(_0x226648,_0x42065e-0x4e8);}delete this['particles'];}['toGridXY'](_0x255ccd,_0x1e162a){function _0x3b79fa(_0x5c4d3c,_0x8679df){return _0x5d6852(_0x8679df,_0x5c4d3c- -0x18d);}function _0x23fa58(_0x4636b5,_0x5a8490){return _0x5d6852(_0x4636b5,_0x5a8490- -0x132);}const _0x3bdeaa=(_0x255ccd-this['xmin'])/(this[_0x23fa58(-0x284,-0x1fe)]-this['xmin'])*(this[_0x3b79fa(-0x2c2,-0x25d)]-0x1),_0x37442c=(this[_0x23fa58(-0x1b5,-0x21e)]-_0x1e162a)/(this[_0x3b79fa(-0x279,-0x29f)]-this['ymin'])*(this['rows']-0x1);return[_0x3bdeaa,_0x37442c];}['getUVByXY'](_0x85dfae,_0xb41991){if(_0x85dfae<0x0||_0x85dfae>=this[_0xc7ea20(-0xc,0x1f)]||_0xb41991>=this[_0xc7ea20(0x9d,0xac)])return[0x0,0x0,0x0];const _0x2f05e5=Math[_0x5ead5f(0x31,0x26)](_0x85dfae),_0x4f7508=Math['floor'](_0xb41991);function _0xc7ea20(_0x195862,_0x25ea4f){return _0x2d32e9(_0x195862- -0x3b8,_0x25ea4f);}if(_0x2f05e5===_0x85dfae&&_0x4f7508===_0xb41991)return this['grid'][_0xb41991][_0x85dfae];const _0x2611be=_0x2f05e5+0x1,_0x30fcd4=_0x4f7508+0x1,_0x315d83=this['getUVByXY'](_0x2f05e5,_0x4f7508),_0xc2f660=this[_0x5ead5f(-0x14,0x5f)](_0x2611be,_0x4f7508),_0x5edcf5=this['getUVByXY'](_0x2f05e5,_0x30fcd4);function _0x5ead5f(_0x88fb,_0x39c54c){return _0x5d6852(_0x39c54c,_0x88fb-0xca);}const _0x55efbc=this['getUVByXY'](_0x2611be,_0x30fcd4);let _0x55af5f=null;try{_0x55af5f=this[_0x5ead5f(0x24,0x76)](_0x85dfae-_0x2f05e5,_0xb41991-_0x4f7508,_0x315d83,_0xc2f660,_0x5edcf5,_0x55efbc);}catch(_0x4fd048){console['log'](_0x85dfae,_0xb41991);}return _0x55af5f;}['_bilinearInterpolation'](_0x1163ab,_0x29c59d,_0x422a92,_0x593bb4,_0x334ede,_0x18da89){const _0xe4d252=0x1-_0x1163ab,_0xae3667=0x1-_0x29c59d,_0x1f2053=_0xe4d252*_0xae3667,_0x1509a5=_0x1163ab*_0xae3667,_0x441b47=_0xe4d252*_0x29c59d,_0x35cf89=_0x1163ab*_0x29c59d,_0x392957=_0x422a92[0x0]*_0x1f2053+_0x593bb4[0x0]*_0x1509a5+_0x334ede[0x0]*_0x441b47+_0x18da89[0x0]*_0x35cf89,_0x471e50=_0x422a92[0x1]*_0x1f2053+_0x593bb4[0x1]*_0x1509a5+_0x334ede[0x1]*_0x441b47+_0x18da89[0x1]*_0x35cf89;function _0x214073(_0x4c0601,_0x154e52){return _0x5d6852(_0x154e52,_0x4c0601-0x353);}return this[_0x214073(0x2eb,0x32f)](_0x392957,_0x471e50);}['_calcUV'](_0x42c25d,_0x4b752c){return[+_0x42c25d,+_0x4b752c,Math['sqrt'](_0x42c25d*_0x42c25d+_0x4b752c*_0x4b752c)];}['getUVByPoint'](_0x3dd2c9,_0x5c34e5){function _0x302d6f(_0x39b4ec,_0x6906f5){return _0x2d32e9(_0x6906f5- -0x195,_0x39b4ec);}if(!this[_0x302d6f(0x2c2,0x275)](_0x3dd2c9,_0x5c34e5))return null;const _0xe9aba9=this['toGridXY'](_0x3dd2c9,_0x5c34e5),_0x34250e=this[_0x302d6f(0x214,0x26e)](_0xe9aba9[0x0],_0xe9aba9[0x1]);function _0x9431d2(_0x2857bd,_0x43b4af){return _0x2d32e9(_0x43b4af- -0x5f8,_0x2857bd);}return _0x34250e;}['isInExtent'](_0x23699a,_0x3b25df){function _0x266f2f(_0x5b0b35,_0x3d8215){return _0x2d32e9(_0x3d8215- -0x355,_0x5b0b35);}function _0x3af436(_0x294899,_0xe14832){return _0x5d6852(_0x294899,_0xe14832-0x472);}return _0x23699a>=this['xmin']&&_0x23699a<=this[_0x266f2f(0xde,0xc0)]&&_0x3b25df>=this[_0x3af436(0x2cd,0x330)]&&_0x3b25df<=this['ymax']?!![]:![];}['getRandomLatLng'](){function _0x30eded(_0x3cbbb7,_0x10d205){return _0x5d6852(_0x10d205,_0x3cbbb7- -0x1b1);}function _0x3d34be(_0x18c288,_0x11092f){return _0x5d6852(_0x18c288,_0x11092f- -0x1ef);}const _0x5b7ffc=fRandomByfloat(this[_0x30eded(-0x242,-0x2c6)],this['xmax']),_0x3b9e9f=fRandomByfloat(this[_0x30eded(-0x2f3,-0x2da)],this[_0x3d34be(-0x250,-0x2db)]),_0x2afccc={};return _0x2afccc['lat']=_0x3b9e9f,_0x2afccc['lng']=_0x5b7ffc,_0x2afccc;}[_0x2d32e9(0x3a0,0x31e)](){let _0x1a1772,_0x1fe870,_0x24ac7f;function _0x4a6505(_0x409228,_0x1f0755){return _0x2d32e9(_0x1f0755- -0x23d,_0x409228);}function _0x3fb82a(_0x2bef8c,_0x2d2ab4){return _0x5d6852(_0x2bef8c,_0x2d2ab4- -0x41);}for(let _0x24e5be=0x0,_0x535279=this[_0x4a6505(0x165,0x1d4)][_0x3fb82a(-0xb7,-0x75)];_0x24e5be<_0x535279;_0x24e5be++){let _0x2c41c6=this['particles'][_0x24e5be];_0x2c41c6['age']<=0x0&&(_0x2c41c6=this[_0x3fb82a(-0x190,-0x13f)](_0x2c41c6));if(_0x2c41c6['age']>0x0){const _0x380477=_0x2c41c6['tlng'],_0x558653=_0x2c41c6['tlat'];_0x24ac7f=this[_0x3fb82a(-0x107,-0x13d)](_0x380477,_0x558653),_0x24ac7f?(_0x1a1772=_0x380477+this['_calc_speedRate'][0x0]*_0x24ac7f[0x0],_0x1fe870=_0x558653+this['_calc_speedRate'][0x1]*_0x24ac7f[0x1],_0x2c41c6[_0x4a6505(0x276,0x238)]=_0x380477,_0x2c41c6[_0x4a6505(0x1d9,0x172)]=_0x558653,_0x2c41c6[_0x3fb82a(-0xee,-0x112)]=_0x1a1772,_0x2c41c6[_0x4a6505(0x1df,0x1eb)]=_0x1fe870,_0x2c41c6[_0x3fb82a(-0xf5,-0x10e)]=_0x24ac7f[0x2],_0x2c41c6[_0x3fb82a(-0x2a,-0xb4)]--):_0x2c41c6['age']=0x0;}}return this['particles'];}[_0x5d6852(-0xa1,-0xfe)](_0x1eed15){let _0x2cf0d0,_0x36d516;for(let _0x21bf5d=0x0;_0x21bf5d<0x1e;_0x21bf5d++){_0x2cf0d0=this['getRandomLatLng'](),_0x36d516=this[_0xaaadf1(0x2ae,0x304)](_0x2cf0d0['lng'],_0x2cf0d0[_0xaaadf1(0x278,0x2f7)]);if(_0x36d516&&_0x36d516[0x2]>0x0)break;}function _0x59ecdc(_0x3f1796,_0x150c4a){return _0x2d32e9(_0x3f1796- -0x622,_0x150c4a);}if(!_0x36d516)return _0x1eed15;const _0x314fac=_0x2cf0d0[_0x59ecdc(-0x1ad,-0x13c)]+this[_0x59ecdc(-0x27e,-0x23b)][0x0]*_0x36d516[0x0],_0x34c3f0=_0x2cf0d0[_0x59ecdc(-0x273,-0x23c)]+this[_0xaaadf1(0x26d,0x1f5)][0x1]*_0x36d516[0x1];_0x1eed15['lng']=_0x2cf0d0['lng'],_0x1eed15[_0xaaadf1(0x278,0x2da)]=_0x2cf0d0['lat'],_0x1eed15['tlng']=_0x314fac;function _0xaaadf1(_0x3f104b,_0x49d0b7){return _0x2d32e9(_0x3f104b- -0x137,_0x49d0b7);}return _0x1eed15[_0xaaadf1(0x2f1,0x2bb)]=_0x34c3f0,_0x1eed15['age']=Math['round'](0xa+Math['random']()*this['maxAge']),_0x1eed15[_0x59ecdc(-0x20e,-0x229)]=_0x36d516[0x2],_0x1eed15;}[_0x5d6852(-0xed,-0x70)](){for(const _0x19b628 in this){delete this[_0x19b628];}}}function fRandomByfloat(_0x13469f,_0x3ecf5d){return _0x13469f+Math['random']()*(_0x3ecf5d-_0x13469f);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x585de1={}){super(_0x585de1),this[_0x5a3614(-0x120,-0x93)](_0x585de1),this[_0x5a3614(-0x8e,-0xaf)]=null;function _0x2de3e1(_0x5b6b4f,_0x189987){return _0x2d32e9(_0x189987- -0x3e,_0x5b6b4f);}function _0x5a3614(_0x205118,_0x24487c){return _0x2d32e9(_0x205118- -0x511,_0x24487c);}_0x585de1['colors']&&_0x585de1['steps']&&(this[_0x2de3e1(0x399,0x3f0)]=new mars3d__namespace[(_0x5a3614(-0xd1,-0x9b))](_0x585de1));}['_setOptionsHook'](_0x2586bb,_0x4adfe1){function _0x2a41cc(_0x2591c7,_0x257b8f){return _0x5d6852(_0x2591c7,_0x257b8f- -0xcc);}this[_0x2a41cc(-0x1bd,-0x1df)]=0x3e8/(_0x2586bb[_0xb2b8b(-0x176,-0x123)]||0xa),this['_pointerEvents']=this['options'][_0x2a41cc(-0x160,-0x1ec)]??![];function _0xb2b8b(_0x441453,_0x555599){return _0x5d6852(_0x441453,_0x555599- -0x5b);}this[_0x2a41cc(-0x12e,-0x107)]=_0x2586bb[_0xb2b8b(-0xe0,-0x96)]||_0xb2b8b(-0xd8,-0x15a),this[_0x2a41cc(-0x101,-0x148)]=_0x2586bb['lineWidth']||0x1,this['fixedHeight']=_0x2586bb['fixedHeight']??0x0,this[_0x2a41cc(-0x1fb,-0x171)]=_0x2586bb[_0x2a41cc(-0x169,-0x171)]??![],this[_0x2a41cc(-0x17b,-0x162)]&&this[_0x2a41cc(-0x1c4,-0x162)]['setOptions'](_0x2586bb);}get[_0x5d6852(-0xb6,-0xf1)](){function _0xa3ef38(_0x2b2a3c,_0x4ea7e8){return _0x5d6852(_0x2b2a3c,_0x4ea7e8- -0xbc);}return this[_0xa3ef38(-0xe6,-0x11a)];}get[_0x2d32e9(0x3da,0x3c4)](){return this['_map']['scene']['canvas']['clientWidth'];}get[_0x2d32e9(0x405,0x44f)](){return this['_map']['scene']['canvas']['clientHeight'];}get['pointerEvents'](){function _0x39bc39(_0xb61330,_0x327633){return _0x2d32e9(_0xb61330- -0x3ec,_0x327633);}return this[_0x39bc39(0x31,-0x2)];}set['pointerEvents'](_0x4130db){this[_0x4715c3(0x8e,0x93)]=_0x4130db;if(!this['canvas'])return;function _0x4715c3(_0x42efdb,_0x36c240){return _0x2d32e9(_0x36c240- -0x38a,_0x42efdb);}function _0x55c09f(_0x444d81,_0x31835c){return _0x5d6852(_0x444d81,_0x31835c-0x530);}_0x4130db?this[_0x4715c3(0x15f,0xf9)]['style'][_0x4715c3(0x45,0x11)]='all':this[_0x4715c3(0x84,0xf9)]['style']['pointer-events']='none';}get[_0x5d6852(-0xa5,-0xe8)](){function _0x1b0a6e(_0x2d0a1d,_0x2171c8){return _0x2d32e9(_0x2171c8- -0x5ed,_0x2d0a1d);}function _0x24e4c8(_0x4aab48,_0x11d240){return _0x2d32e9(_0x11d240- -0x158,_0x4aab48);}return this[_0x24e4c8(0x2f7,0x318)][_0x1b0a6e(-0x1bd,-0x1f4)];}set['particlesNumber'](_0x2ada2b){this['options']['particlesNumber']=_0x2ada2b;function _0xe52545(_0x2bfe8d,_0x3b354b){return _0x2d32e9(_0x3b354b- -0x59a,_0x2bfe8d);}clearTimeout(this['_canrefresh']),this[_0xe52545(-0x142,-0x194)]=setTimeout(()=>{function _0x5793fe(_0x49cd60,_0x4468a2){return _0xe52545(_0x49cd60,_0x4468a2-0x19d);}this[_0x5793fe(0x9c,0xac)]();},0x1f4);}get['speedRate'](){return this['options']['speedRate'];}set[_0x2d32e9(0x404,0x3e8)](_0x4c1e72){function _0x1ea4f6(_0x2c4ae4,_0x1d25bc){return _0x2d32e9(_0x1d25bc-0x1d,_0x2c4ae4);}this['options']['speedRate']=_0x4c1e72;function _0x25ce51(_0x87a2bd,_0x170031){return _0x2d32e9(_0x87a2bd-0x1a,_0x170031);}this[_0x1ea4f6(0x459,0x468)]&&(this['windField'][_0x1ea4f6(0x3bb,0x421)]=_0x4c1e72);}get[_0x5d6852(-0xbb,-0x3e)](){return this['options']['maxAge'];}set[_0x2d32e9(0x4a3,0x428)](_0x3e9589){function _0x416f0b(_0x4a92cb,_0x42583a){return _0x2d32e9(_0x42583a- -0x104,_0x4a92cb);}this['options']['maxAge']=_0x3e9589,this['windField']&&(this['windField'][_0x416f0b(0x40b,0x39f)]=_0x3e9589);}get['data'](){function _0x54a6eb(_0x1ae760,_0x591bf1){return _0x2d32e9(_0x591bf1-0x32,_0x1ae760);}return this[_0x54a6eb(0x469,0x43a)];}set[_0x5d6852(-0x191,-0x115)](_0x430baf){this['setData'](_0x430baf);}get['rectangle'](){let _0x56c7f7=this[_0x5656b3(0x42b,0x425)]['xmin'],_0x5e8e62=this['windData']['xmax'];function _0x60eaae(_0x2901c0,_0x5bef63){return _0x2d32e9(_0x2901c0- -0x42d,_0x5bef63);}function _0x5656b3(_0xa10c6e,_0x5e3fd0){return _0x2d32e9(_0xa10c6e-0x23,_0x5e3fd0);}let _0xdd1b18=this['windData']['ymin'],_0x4f5499=this[_0x60eaae(-0x25,0x58)]['ymax'];return _0x5e8e62>=0x167&&_0x56c7f7===0x0&&(_0x56c7f7=-0xb4,_0x5e8e62=0xb4),_0x56c7f7=Math[_0x60eaae(0x21,0x5b)](_0x56c7f7,-0xb4),_0x5e8e62=Math['min'](_0x5e8e62,0xb4),_0xdd1b18=Math[_0x60eaae(0x21,-0xe)](_0xdd1b18,-0x5a),_0x4f5499=Math['min'](_0x4f5499,0x5a),Cesium[_0x60eaae(0x78,0xd)][_0x60eaae(-0x24,0x60)](_0x56c7f7,_0xdd1b18,_0x5e8e62,_0x4f5499);}[_0x2d32e9(0x4a2,0x4b7)](_0x46f9a7){function _0x24f1c6(_0x3dba70,_0x42be1a){return _0x2d32e9(_0x42be1a- -0x1bc,_0x3dba70);}function _0x27e260(_0x39499d,_0x46ccd7){return _0x2d32e9(_0x46ccd7- -0xf1,_0x39499d);}_0x46f9a7?this['_addedHook']():(this[_0x27e260(0x2e8,0x317)]&&(this[_0x27e260(0x2fe,0x37f)]['data']=this[_0x24f1c6(0x2c6,0x24c)]),this['_removedHook']());}[_0x2d32e9(0x48f,0x4d7)](){function _0x487ed7(_0x5353d1,_0x2bfb44){return _0x5d6852(_0x5353d1,_0x2bfb44-0x3a0);}function _0x895fa6(_0x3d8e26,_0x4409bc){return _0x5d6852(_0x4409bc,_0x3d8e26- -0x186);}this[_0x895fa6(-0x1f7,-0x210)]['worker']?this[_0x895fa6(-0x1e8,-0x20d)]():this['windField']=new CanvasWindField(this[_0x895fa6(-0x1f7,-0x174)]);}['_addedHook'](){function _0x5675f8(_0x5e2937,_0x11c6ef){return _0x2d32e9(_0x11c6ef-0x6d,_0x5e2937);}this[_0x5675f8(0x46f,0x4f0)]=this[_0x32fdb0(0x246,0x20f)]();const _0x26bf36={};_0x26bf36['willReadFrequently']=!![],this['canvasContext']=this[_0x32fdb0(0x23c,0x1fd)]['getContext']('2d',_0x26bf36),this['bindEvent']();function _0x32fdb0(_0x5ca642,_0x4e2a22){return _0x2d32e9(_0x4e2a22- -0x286,_0x5ca642);}this['options']['data']&&this['setData'](this['options']['data']);}['_removedHook'](){function _0x4cf135(_0x5dc34b,_0x83f60e){return _0x2d32e9(_0x5dc34b- -0x40d,_0x83f60e);}this[_0x1205de(-0x219,-0x1fd)]();function _0x1205de(_0x5e77ed,_0x20a66e){return _0x5d6852(_0x20a66e,_0x5e77ed- -0x17c);}this['unbindEvent'](),this['canvas']&&(this['_map'][_0x1205de(-0x1b5,-0x22e)][_0x4cf135(0x52,0xa5)](this['canvas']),delete this['canvas']);}['_createCanvas'](){const _0x325488=mars3d__namespace['DomUtil']['create'](_0x595ae2(0x4e2,0x4ac),'mars3d-canvasWind',this['_map']['container']);_0x325488['style']['position']=_0x595ae2(0x476,0x47d),_0x325488['style'][_0x595ae2(0x3c3,0x3d1)]='0px',_0x325488['style']['left']='0px';function _0xde6a15(_0x5af57e,_0x5b69d8){return _0x2d32e9(_0x5af57e-0x2e,_0x5b69d8);}_0x325488['style'][_0xde6a15(0x4cd,0x492)]=this[_0xde6a15(0x428,0x423)]['scene']['canvas']['clientWidth']+'px',_0x325488[_0xde6a15(0x41d,0x41b)][_0x595ae2(0x44f,0x3c3)]=this[_0xde6a15(0x428,0x440)]['scene']['canvas'][_0xde6a15(0x457,0x3dd)]+'px',_0x325488['style']['pointerEvents']=this['_pointerEvents']?_0xde6a15(0x3e2,0x363):'none';function _0x595ae2(_0x370ba0,_0x4fd86d){return _0x5d6852(_0x370ba0,_0x4fd86d-0x50a);}return _0x325488[_0xde6a15(0x41d,0x3ba)][_0x595ae2(0x4c0,0x43c)]=this['options'][_0xde6a15(0x441,0x3d1)]??0x9,_0x325488['width']=this[_0x595ae2(0x39f,0x423)][_0xde6a15(0x4be,0x4cc)][_0x595ae2(0x52d,0x4ac)]['clientWidth'],_0x325488[_0x595ae2(0x39d,0x3c3)]=this[_0xde6a15(0x428,0x41c)][_0x595ae2(0x53d,0x4b9)][_0x595ae2(0x489,0x4ac)]['clientHeight'],_0x325488;}['resize'](){function _0x1ecdea(_0x105bcb,_0xf3a2bf){return _0x2d32e9(_0xf3a2bf- -0x231,_0x105bcb);}function _0x728df0(_0x5aaee5,_0x556bf1){return _0x5d6852(_0x5aaee5,_0x556bf1-0x4e3);}this['canvas']&&(this['canvas']['style'][_0x728df0(0x4fe,0x4a1)]=this['_map']['scene'][_0x728df0(0x409,0x485)]['clientWidth']+'px',this['canvas'][_0x728df0(0x3bd,0x3f1)]['height']=this[_0x728df0(0x3bf,0x3fc)][_0x1ecdea(0x231,0x25f)]['canvas'][_0x728df0(0x41d,0x42b)]+'px',this['canvas'][_0x1ecdea(0x2b5,0x26e)]=this[_0x728df0(0x429,0x3fc)]['scene'][_0x728df0(0x408,0x485)][_0x728df0(0x452,0x411)],this['canvas'][_0x1ecdea(0x10b,0x169)]=this['_map']['scene'][_0x1ecdea(0x242,0x252)]['clientHeight']);}[_0x2d32e9(0x488,0x4e8)](){const _0x290526=this;let _0x5a0392=Date['now']();function _0x447a19(_0x375550,_0x47a84f){return _0x2d32e9(_0x47a84f- -0x2eb,_0x375550);}(function _0x58b282(){if(_0x290526[_0x151c02(0x38f,0x3e1)])return;function _0x20ea3f(_0x3f7660,_0x2da71a){return _0x2182(_0x3f7660- -0xb4,_0x2da71a);}function _0x151c02(_0x58c38f,_0x3eff91){return _0x2182(_0x3eff91-0x35c,_0x58c38f);}_0x290526['_animateFrame']=window[_0x20ea3f(0xe2,0x11f)](_0x58b282);if(_0x290526['show']&&_0x290526['windField']){const _0x14f77f=Date['now'](),_0x2dda8f=_0x14f77f-_0x5a0392;_0x2dda8f>_0x290526['frameTime']&&(_0x5a0392=_0x14f77f-_0x2dda8f%_0x290526['frameTime'],_0x290526['update']());}}(),window['addEventListener']('resize',this['resize'][_0x3df5a2(0x1a4,0x215)](this),![]),this[_0x447a19(0xcc,0x133)]=![],this['mouse_move']=![]);function _0x3df5a2(_0x55204b,_0x2d63bc){return _0x5d6852(_0x55204b,_0x2d63bc-0x2c0);}this[_0x3df5a2(0x25c,0x24f)]['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x447a19(0x18e,0x16c)][_0x3df5a2(0x2bf,0x28b)],this[_0x447a19(0x17c,0x100)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x447a19(0x1b9,0x14a)],this),this[_0x3df5a2(0x24a,0x1d9)]['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this));}['unbindEvent'](){function _0x15fd16(_0x1c7920,_0x531987){return _0x2d32e9(_0x531987- -0x677,_0x1c7920);}function _0x2e756d(_0x66a54e,_0x506efa){return _0x2d32e9(_0x506efa-0x1b,_0x66a54e);}window['cancelAnimationFrame'](this['_animateFrame']),delete this[_0x15fd16(-0x2d9,-0x2c2)],window['removeEventListener'](_0x15fd16(-0x2df,-0x2db),this['resize']),this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace[_0x2e756d(0x42f,0x472)]['wheel'],this['_onMapWhellEvent'],this),this[_0x15fd16(-0x235,-0x27d)]['off'](mars3d__namespace['EventType'][_0x2e756d(0x464,0x497)],this['_onMouseDownEvent'],this),this[_0x2e756d(0x49a,0x415)]['off'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this['_map'][_0x15fd16(-0x209,-0x291)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x51aaac){clearTimeout(this[_0x475093(0x320,0x329)]);function _0x475093(_0x5de8d8,_0x11d95b){return _0x2d32e9(_0x11d95b- -0x13a,_0x5de8d8);}if(!this['show']||!this['canvas'])return;function _0x404e38(_0x49f0ed,_0xede98a){return _0x5d6852(_0xede98a,_0x49f0ed- -0x7f);}this['canvas'][_0x404e38(-0x171,-0x144)][_0x404e38(-0x154,-0x13e)]=_0x404e38(-0x14e,-0x1ab),this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;function _0x3907fa(_0x465514,_0x4f4eb4){return _0x404e38(_0x465514-0x622,_0x4f4eb4);}this[_0x4dd529(-0x19a,-0x180)]();function _0x4dd529(_0x20f3c8,_0x2b50b1){return _0x475093(_0x20f3c8,_0x2b50b1- -0x4ef);}this['canvas']['style'][_0x4dd529(-0x249,-0x21d)]=_0x4dd529(-0x22b,-0x205);},0xc8);}['_onMouseDownEvent'](_0x2fde74){this['mouse_down']=!![];function _0x3b970c(_0x575255,_0x54c97d){return _0x2d32e9(_0x54c97d- -0x1c0,_0x575255);}this['_map']['off'](mars3d__namespace[_0x3b970c(0x216,0x297)][_0x3b970c(0x1e9,0x1fb)],this['_onMouseMoveEvent'],this);function _0x59ec9b(_0x388e12,_0x5c69f8){return _0x2d32e9(_0x388e12- -0x135,_0x5c69f8);}this[_0x59ec9b(0x2c5,0x30d)]['on'](mars3d__namespace['EventType'][_0x59ec9b(0x286,0x253)],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x257627){function _0x575b23(_0x469e9c,_0x49d899){return _0x2d32e9(_0x469e9c- -0x6a7,_0x49d899);}if(!this['show']||!this[_0x506d55(-0x39,-0x35)])return;function _0x506d55(_0x39ced5,_0x490d83){return _0x5d6852(_0x490d83,_0x39ced5-0x25);}this[_0x506d55(-0x9e,-0xb0)]&&(this['canvas']['style']['visibility']=_0x506d55(-0xaa,-0x54),this[_0x506d55(-0x6a,-0x95)]=!![]);}[_0x5d6852(-0x73,-0x63)](_0x5b4b46){if(!this['show']||!this['canvas'])return;this[_0x1a3944(-0x270,-0x205)]['off'](mars3d__namespace[_0x1a3944(-0x213,-0x222)]['mouseMove'],this[_0x315c2e(-0x3c,0x9)],this);this[_0x1a3944(-0x24c,-0x26e)]&&this['mouse_move']&&this['redraw']();this[_0x1a3944(-0x1e7,-0x1d5)]['style'][_0x315c2e(0x36,-0x35)]='visible';function _0x315c2e(_0x535172,_0x1dc3d4){return _0x5d6852(_0x535172,_0x1dc3d4-0xa0);}this[_0x1a3944(-0x24c,-0x21b)]=![];function _0x1a3944(_0x309476,_0x45e9a3){return _0x2d32e9(_0x309476- -0x66a,_0x45e9a3);}this['mouse_move']=![];}['setData'](_0x42d9d8){function _0x636765(_0x2c14c7,_0x56d406){return _0x5d6852(_0x56d406,_0x2c14c7-0x4b8);}this[_0x636765(0x41b,0x49b)](),this['windData']=_0x42d9d8;function _0x432741(_0x59e0de,_0x4e3c54){return _0x5d6852(_0x4e3c54,_0x59e0de-0x177);}this[_0x432741(0xe1,0xf0)]['setDate'](_0x42d9d8),this['redraw']();}['redraw'](){if(!this[_0x2a99b4(0x4fb,0x4c8)])return;function _0x2a99b4(_0x1667dd,_0xa3f22b){return _0x5d6852(_0xa3f22b,_0x1667dd-0x53f);}function _0x4a0af2(_0x4dfa0e,_0x37a8c0){return _0x5d6852(_0x37a8c0,_0x4dfa0e- -0x59);}this[_0x2a99b4(0x4a9,0x42d)]['setOptions'](this['options']),this['update']();}['update'](){if(this['_updateIng'])return;this['_updateIng']=!![];function _0xd2bb2c(_0x2f28f5,_0xa8df3c){return _0x5d6852(_0xa8df3c,_0x2f28f5-0x86);}if(this['worker'])this['windField'][_0xd2bb2c(-0x45,-0x2e)]();else{const _0x5e5c42=this[_0xd2bb2c(-0x10,-0x9c)][_0x52d601(0x27c,0x211)]();this['_drawLines'](_0x5e5c42);}function _0x52d601(_0xb63c23,_0x23364f){return _0x5d6852(_0x23364f,_0xb63c23-0x3bd);}this['_updateIng']=![];}['_drawLines'](_0x3bada0){this['_canvasParticles']=_0x3bada0,this[_0x59d633(-0x262,-0x26f)]['globalCompositeOperation']='destination-in',this['canvasContext']['fillRect'](0x0,0x0,this[_0x385c9f(-0x1de,-0x169)],this['canvasHeight']),this['canvasContext'][_0x385c9f(-0x12b,-0x15b)]=_0x385c9f(-0x108,-0x128);function _0x59d633(_0x32db94,_0x348864){return _0x5d6852(_0x32db94,_0x348864- -0x1cc);}this['canvasContext']['globalAlpha']=0.9;const _0xbe72d5=this[_0x385c9f(-0x128,-0x149)][_0x59d633(-0x1a8,-0x21d)]['mode']!==Cesium['SceneMode']['SCENE3D'];function _0x385c9f(_0x5aa6b2,_0x5dbb46){return _0x5d6852(_0x5aa6b2,_0x5dbb46- -0x62);}const _0x32bf01=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x2439d7=0x0,_0x3c63c0=_0x3bada0[_0x59d633(-0x20a,-0x200)];_0x2439d7<_0x3c63c0;_0x2439d7++){const _0x17decc=_0x3bada0[_0x2439d7],_0x2f6a88=this['_tomap'](_0x17decc,_0x17decc['lng'],_0x17decc['lat'],_0x17decc['alt']),_0x5271c0=this['_tomap'](_0x17decc,_0x17decc[_0x59d633(-0x323,-0x29d)],_0x17decc['tlat'],_0x17decc['talt']);if(!_0x2f6a88||!_0x5271c0)continue;if(_0xbe72d5&&Math[_0x59d633(-0x1eb,-0x247)](_0x2f6a88[0x0]-_0x5271c0[0x0])>=_0x32bf01)continue;this['canvasContext'][_0x385c9f(-0x62,-0x98)](),this['canvasContext']['lineWidth']=this[_0x59d633(-0x215,-0x248)],this[_0x59d633(-0x290,-0x26f)][_0x385c9f(-0x1e6,-0x17f)]=this[_0x59d633(-0x2c1,-0x27f)]['getColor'](_0x17decc[_0x59d633(-0x215,-0x299)]),this['canvasContext']['moveTo'](_0x2f6a88[0x0],_0x2f6a88[0x1]),this[_0x59d633(-0x2dc,-0x26f)]['lineTo'](_0x5271c0[0x0],_0x5271c0[0x1]),this['canvasContext']['stroke']();}else{this[_0x385c9f(-0x9e,-0x105)][_0x385c9f(-0x51,-0x98)](),this[_0x59d633(-0x1f0,-0x26f)][_0x59d633(-0x276,-0x248)]=this['lineWidth'],this[_0x59d633(-0x2dd,-0x26f)][_0x59d633(-0x35c,-0x2e9)]=this[_0x59d633(-0x1ee,-0x207)];for(let _0x28ad5f=0x0,_0x1fc883=_0x3bada0[_0x385c9f(-0x91,-0x96)];_0x28ad5f<_0x1fc883;_0x28ad5f++){const _0x10ff98=_0x3bada0[_0x28ad5f],_0x2d9e0b=this[_0x59d633(-0x29d,-0x293)](_0x10ff98,_0x10ff98[_0x385c9f(-0x82,-0xce)],_0x10ff98['lat'],_0x10ff98[_0x59d633(-0x2a1,-0x29f)]),_0x3787ce=this[_0x59d633(-0x2e0,-0x293)](_0x10ff98,_0x10ff98[_0x385c9f(-0x11b,-0x133)],_0x10ff98[_0x385c9f(-0xeb,-0x11b)],_0x10ff98['talt']);if(!_0x2d9e0b||!_0x3787ce)continue;if(_0xbe72d5&&Math['abs'](_0x2d9e0b[0x0]-_0x3787ce[0x0])>=_0x32bf01)continue;this['canvasContext'][_0x385c9f(-0x117,-0x123)](_0x2d9e0b[0x0],_0x2d9e0b[0x1]),this['canvasContext'][_0x385c9f(-0x11a,-0x10f)](_0x3787ce[0x0],_0x3787ce[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x14e6c2,_0x30778a,_0x412ac0,_0x116d35){function _0x5e24ea(_0xf20a54,_0x4d4764){return _0x2d32e9(_0x4d4764- -0x1ce,_0xf20a54);}function _0x424c41(_0x4640e9,_0x9d820){return _0x2d32e9(_0x4640e9- -0xe0,_0x9d820);}const _0x8dae21=Cesium[_0x5e24ea(0x21e,0x232)]['fromDegrees'](_0x30778a,_0x412ac0,_0x116d35??this[_0x5e24ea(0x251,0x293)]),_0x3b8688=this['_map'][_0x424c41(0x3b0,0x429)];if(_0x3b8688[_0x5e24ea(0x2b8,0x28e)]===Cesium[_0x5e24ea(0x216,0x28b)]['SCENE3D']){const _0x519290=new Cesium['EllipsoidalOccluder'](_0x3b8688['globe'][_0x5e24ea(0x303,0x2bb)],_0x3b8688['camera']['positionWC']),_0xe8b05a=_0x519290['isPointVisible'](_0x8dae21);if(!_0xe8b05a)return _0x14e6c2['age']=0x0,null;}const _0x3d89c4=mars3d__namespace[_0x424c41(0x316,0x373)][_0x5e24ea(0x199,0x1ec)](this['_map']['scene'],_0x8dae21);return _0x3d89c4?[_0x3d89c4['x'],_0x3d89c4['y']]:null;}['clear'](){function _0x503cdc(_0x4ef827,_0x28f132){return _0x5d6852(_0x4ef827,_0x28f132- -0x212);}this['windField'][_0x503cdc(-0x289,-0x2af)](),delete this['windData'];}[_0x5d6852(0x3,-0x62)](){this['worker']=new Worker(this['options'][_0x20e071(0xcb,0x95)]),this[_0x20e071(0x57,0x95)]['onmessage']=_0x4d0726=>{this[_0x56cce8(-0x1a1,-0x1be)](_0x4d0726[_0x56cce8(-0x230,-0x224)]['particles']);function _0x49b0b8(_0x7ac696,_0x2e2b19){return _0x20e071(_0x7ac696,_0x2e2b19-0x40c);}function _0x56cce8(_0x547c82,_0x421246){return _0x20e071(_0x421246,_0x547c82- -0x293);}this['_updateIng2']=![];};function _0x20e071(_0x3eae7b,_0xfcdc01){return _0x5d6852(_0x3eae7b,_0xfcdc01-0x178);}this['windField']={'init':_0x36f5b5=>{const _0x2225f6={};_0x2225f6['type']='init',_0x2225f6[_0x58dd52(0x281,0x271)]=_0x36f5b5;function _0x57f645(_0x306e37,_0x4bc020){return _0x5f1b72(_0x306e37,_0x4bc020- -0x207);}function _0x58dd52(_0x1cf49d,_0x18b5d6){return _0x5f1b72(_0x1cf49d,_0x18b5d6- -0x72);}this['worker'][_0x58dd52(0x301,0x2a1)](_0x2225f6);},'setOptions':_0x12c263=>{function _0x40019b(_0x54abc4,_0x35d6be){return _0x20e071(_0x35d6be,_0x54abc4-0x15e);}const _0x2507ae={};_0x2507ae[_0x40019b(0x1e9,0x1c7)]=_0x4855e4(-0x4a,-0x6c),_0x2507ae[_0x40019b(0x265,0x201)]=_0x12c263;function _0x4855e4(_0x433b1d,_0x2c50cb){return _0x20e071(_0x433b1d,_0x2c50cb- -0x146);}this[_0x40019b(0x1f3,0x214)]['postMessage'](_0x2507ae);},'setDate':_0x55b14d=>{const _0x26bb12={};function _0x371c26(_0x49bd00,_0x54888a){return _0x20e071(_0x49bd00,_0x54888a-0x9b);}function _0x45689c(_0x152404,_0x4c32ab){return _0x20e071(_0x4c32ab,_0x152404- -0xd0);}_0x26bb12['type']='setDate',_0x26bb12[_0x45689c(-0x6d,-0x97)]=_0x55b14d,this[_0x371c26(0x197,0x130)][_0x371c26(0x232,0x1d2)](_0x26bb12);},'update':()=>{if(this['_updateIng2'])return;this['_updateIng2']=!![];const _0x32bb1d={};_0x32bb1d['type']='update',this['worker']['postMessage'](_0x32bb1d);},'clear':()=>{const _0x5029fb={};_0x5029fb[_0xb7c9c4(0x3d7,0x359)]=_0x4b9265(-0x112,-0xf7);function _0xb7c9c4(_0x10c16c,_0x4d937d){return _0x20e071(_0x4d937d,_0x10c16c-0x34c);}function _0x4b9265(_0x3da94e,_0x231ead){return _0x5f1b72(_0x231ead,_0x3da94e- -0x3c9);}this[_0x4b9265(-0x158,-0x1db)][_0xb7c9c4(0x483,0x4a2)](_0x5029fb);}};function _0x5f1b72(_0x2d346d,_0x5b2866){return _0x2d32e9(_0x5b2866- -0x18d,_0x2d346d);}this[_0x20e071(0xfd,0xe2)][_0x20e071(0x18e,0x124)](this['options']);}}function _0x2d32e9(_0x353ee0,_0x2875bf){return _0x2182(_0x353ee0-0x318,_0x2875bf);}mars3d__namespace['LayerUtil']['register'](_0x2d32e9(0x3db,0x35a),CanvasWindLayer),mars3d__namespace[_0x5d6852(-0x145,-0xf1)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x5d6852(-0xd1,-0xb1)]=CanvasWindField,mars3d__namespace[_0x5d6852(-0xc8,-0x10e)][_0x5d6852(-0xaf,-0xb6)](_0x2d32e9(0x423,0x44e)),mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x391a01={};_0x391a01[_0x5d6852(-0x14c,-0x13a)]=!![],Object['defineProperty'](exports,_0x5d6852(-0x18d,-0x105),_0x391a01);
}));
