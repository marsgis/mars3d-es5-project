/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.4.15
 * 编译日期：2022-12-05 19:38:19
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-06-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';var _0x3fcf80=_0x34dd;(function(_0x28aa62,_0x3be754){var _0x446adf=_0x34dd,_0x44132a=_0x28aa62();while(!![]){try{var _0x14d4cd=-parseInt(_0x446adf(0x2af))/0x1+parseInt(_0x446adf(0x2e3))/0x2*(parseInt(_0x446adf(0x251))/0x3)+-parseInt(_0x446adf(0x225))/0x4*(-parseInt(_0x446adf(0x2bd))/0x5)+-parseInt(_0x446adf(0x2ce))/0x6*(-parseInt(_0x446adf(0x2ed))/0x7)+-parseInt(_0x446adf(0x316))/0x8*(-parseInt(_0x446adf(0x325))/0x9)+-parseInt(_0x446adf(0x22c))/0xa*(-parseInt(_0x446adf(0x286))/0xb)+parseInt(_0x446adf(0x1dd))/0xc*(-parseInt(_0x446adf(0x216))/0xd);if(_0x14d4cd===_0x3be754)break;else _0x44132a['push'](_0x44132a['shift']());}catch(_0x548979){_0x44132a['push'](_0x44132a['shift']());}}}(_0x3a9f,0xa9391));function _interopNamespace(_0x2019e5){var _0x27ce69=_0x34dd;if(_0x2019e5&&_0x2019e5['__esModule'])return _0x2019e5;var _0x3319ea=Object['create'](null);return _0x2019e5&&Object[_0x27ce69(0x1a4)](_0x2019e5)['forEach'](function(_0x3350ad){var _0x4f67f2=_0x27ce69;if(_0x3350ad!=='default'){var _0x10c621=Object[_0x4f67f2(0x1e6)](_0x2019e5,_0x3350ad);Object[_0x4f67f2(0x1a8)](_0x3319ea,_0x3350ad,_0x10c621[_0x4f67f2(0x1bb)]?_0x10c621:{'enumerable':!![],'get':function(){return _0x2019e5[_0x3350ad];}});}}),_0x3319ea[_0x27ce69(0x2a1)]=_0x2019e5,_0x3319ea;}var mars3d__namespace=_interopNamespace(mars3d),Cesium$7=mars3d__namespace[_0x3fcf80(0x1da)];function getU(_0x27d5b6,_0x2d59a0){var _0x5b2f02=_0x3fcf80,_0x35d3e6=_0x27d5b6*Math[_0x5b2f02(0x2cd)](Cesium$7[_0x5b2f02(0x2da)][_0x5b2f02(0x236)](_0x2d59a0));return _0x35d3e6;}function _0x34dd(_0xd3f90c,_0x5c11f2){var _0x3a9f00=_0x3a9f();return _0x34dd=function(_0x34dd65,_0x100346){_0x34dd65=_0x34dd65-0x1a1;var _0x12490a=_0x3a9f00[_0x34dd65];return _0x12490a;},_0x34dd(_0xd3f90c,_0x5c11f2);}function getV(_0x16b557,_0x283378){var _0x47c97f=_0x3fcf80,_0x213cc7=_0x16b557*Math[_0x47c97f(0x1b6)](Cesium$7[_0x47c97f(0x2da)][_0x47c97f(0x236)](_0x283378));return _0x213cc7;}function getSpeed(_0x4b74f4,_0x33e899){var _0x25caad=_0x3fcf80,_0x522a1c=Math[_0x25caad(0x2e1)](Math[_0x25caad(0x1ff)](_0x4b74f4,0x2)+Math[_0x25caad(0x1ff)](_0x33e899,0x2));return _0x522a1c;}function getDirection(_0xcb5a00,_0x22159e){var _0xb382cd=_0x3fcf80,_0x378578=Cesium$7[_0xb382cd(0x2da)][_0xb382cd(0x306)](Math[_0xb382cd(0x248)](_0x22159e,_0xcb5a00));return _0x378578+=_0x378578<0x0?0x168:0x0,_0x378578;}var WindUtil={'__proto__':null,'getU':getU,'getV':getV,'getSpeed':getSpeed,'getDirection':getDirection};function ownKeys(_0x6187b6,_0x438f7e){var _0x3ca7e4=_0x3fcf80,_0x3c9958=Object['keys'](_0x6187b6);if(Object[_0x3ca7e4(0x259)]){var _0x5cf8fb=Object['getOwnPropertySymbols'](_0x6187b6);_0x438f7e&&(_0x5cf8fb=_0x5cf8fb[_0x3ca7e4(0x253)](function(_0x4e669e){var _0x149407=_0x3ca7e4;return Object[_0x149407(0x1e6)](_0x6187b6,_0x4e669e)[_0x149407(0x305)];})),_0x3c9958[_0x3ca7e4(0x1ed)][_0x3ca7e4(0x2eb)](_0x3c9958,_0x5cf8fb);}return _0x3c9958;}function _objectSpread2(_0x1dc0e7){var _0x5518fe=_0x3fcf80;for(var _0x57b569=0x1;_0x57b569<arguments[_0x5518fe(0x29f)];_0x57b569++){var _0x5e0796=null!=arguments[_0x57b569]?arguments[_0x57b569]:{};_0x57b569%0x2?ownKeys(Object(_0x5e0796),!0x0)[_0x5518fe(0x2a8)](function(_0x17dbcb){_defineProperty(_0x1dc0e7,_0x17dbcb,_0x5e0796[_0x17dbcb]);}):Object[_0x5518fe(0x1be)]?Object['defineProperties'](_0x1dc0e7,Object[_0x5518fe(0x1be)](_0x5e0796)):ownKeys(Object(_0x5e0796))[_0x5518fe(0x2a8)](function(_0x383488){var _0x22cbf3=_0x5518fe;Object[_0x22cbf3(0x1a8)](_0x1dc0e7,_0x383488,Object['getOwnPropertyDescriptor'](_0x5e0796,_0x383488));});}return _0x1dc0e7;}function _classCallCheck(_0x56d303,_0x30bf91){var _0x5a3c56=_0x3fcf80;if(!(_0x56d303 instanceof _0x30bf91))throw new TypeError(_0x5a3c56(0x1f2));}function _defineProperties(_0x333ff1,_0x5ec8f4){var _0x21f1cd=_0x3fcf80;for(var _0x6618e6=0x0;_0x6618e6<_0x5ec8f4['length'];_0x6618e6++){var _0x2d843b=_0x5ec8f4[_0x6618e6];_0x2d843b[_0x21f1cd(0x305)]=_0x2d843b['enumerable']||![],_0x2d843b[_0x21f1cd(0x200)]=!![];if(_0x21f1cd(0x2ef)in _0x2d843b)_0x2d843b[_0x21f1cd(0x23d)]=!![];Object['defineProperty'](_0x333ff1,_0x2d843b[_0x21f1cd(0x26b)],_0x2d843b);}}function _createClass(_0x3cb99c,_0x2fed59,_0x43af75){var _0x541fb3=_0x3fcf80;if(_0x2fed59)_defineProperties(_0x3cb99c[_0x541fb3(0x291)],_0x2fed59);if(_0x43af75)_defineProperties(_0x3cb99c,_0x43af75);return Object[_0x541fb3(0x1a8)](_0x3cb99c,_0x541fb3(0x291),{'writable':![]}),_0x3cb99c;}function _defineProperty(_0x276f5d,_0x2eb94b,_0x18ffa6){return _0x2eb94b in _0x276f5d?Object['defineProperty'](_0x276f5d,_0x2eb94b,{'value':_0x18ffa6,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x276f5d[_0x2eb94b]=_0x18ffa6,_0x276f5d;}function _inherits(_0x98841c,_0x106c80){var _0x1a761f=_0x3fcf80;if(typeof _0x106c80!==_0x1a761f(0x1e8)&&_0x106c80!==null)throw new TypeError(_0x1a761f(0x1d3));_0x98841c['prototype']=Object[_0x1a761f(0x2f6)](_0x106c80&&_0x106c80[_0x1a761f(0x291)],{'constructor':{'value':_0x98841c,'writable':!![],'configurable':!![]}}),Object[_0x1a761f(0x1a8)](_0x98841c,'prototype',{'writable':![]});if(_0x106c80)_setPrototypeOf(_0x98841c,_0x106c80);}function _getPrototypeOf(_0x433aa4){var _0x217a9b=_0x3fcf80;return _getPrototypeOf=Object[_0x217a9b(0x1e2)]?Object[_0x217a9b(0x2d9)][_0x217a9b(0x1c1)]():function _0x24d43c(_0x5f162e){var _0x8bc60c=_0x217a9b;return _0x5f162e[_0x8bc60c(0x327)]||Object[_0x8bc60c(0x2d9)](_0x5f162e);},_getPrototypeOf(_0x433aa4);}function _setPrototypeOf(_0x27d84a,_0xd4ad43){var _0x59cca6=_0x3fcf80;return _setPrototypeOf=Object[_0x59cca6(0x1e2)]?Object[_0x59cca6(0x1e2)][_0x59cca6(0x1c1)]():function _0x2b2229(_0x4aaa53,_0xaf6622){var _0x103213=_0x59cca6;return _0x4aaa53[_0x103213(0x327)]=_0xaf6622,_0x4aaa53;},_setPrototypeOf(_0x27d84a,_0xd4ad43);}function _isNativeReflectConstruct(){var _0x76d3d5=_0x3fcf80;if(typeof Reflect==='undefined'||!Reflect[_0x76d3d5(0x2b0)])return![];if(Reflect[_0x76d3d5(0x2b0)][_0x76d3d5(0x31f)])return![];if(typeof Proxy===_0x76d3d5(0x1e8))return!![];try{return Boolean[_0x76d3d5(0x291)]['valueOf'][_0x76d3d5(0x26d)](Reflect[_0x76d3d5(0x2b0)](Boolean,[],function(){})),!![];}catch(_0x365e22){return![];}}function _assertThisInitialized(_0x4681b8){var _0x242ca7=_0x3fcf80;if(_0x4681b8===void 0x0)throw new ReferenceError(_0x242ca7(0x298));return _0x4681b8;}function _possibleConstructorReturn(_0x3ea637,_0x399ec7){var _0x38f466=_0x3fcf80;if(_0x399ec7&&(typeof _0x399ec7===_0x38f466(0x241)||typeof _0x399ec7===_0x38f466(0x1e8)))return _0x399ec7;else{if(_0x399ec7!==void 0x0)throw new TypeError(_0x38f466(0x223));}return _assertThisInitialized(_0x3ea637);}function _0x3a9f(){var _0x3b8a01=['latRange','vertexShaderSource','create','setData','Compute','getOptions','tlat','WindUtil','Texture','createRawRenderState','mouse_move','options','_maxAge','maxParticles','fadeOpacity','BoundingSphere','textures','enumerable','toDegrees','lng','segmentsDepth','_onMouseMoveEvent','getColorTexture','data','Object','Geometry','lon','globe','preExecute','position','ceil','randomBetween','NEAREST','canvasWindy','96tknPfj','isPointVisible','uniform\x20sampler2D\x20segmentsColorTexture;\x0d\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0d\x0a\x0d\x0auniform\x20sampler2D\x20currentTrailsColor;\x0d\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0d\x0a\x0d\x0auniform\x20float\x20fadeOpacity;\x0d\x0a\x0d\x0avarying\x20vec2\x20textureCoordinate;\x0d\x0a\x0d\x0avoid\x20main()\x20{\x0d\x0a\x20\x20\x20\x20vec4\x20pointsColor\x20=\x20texture2D(segmentsColorTexture,\x20textureCoordinate);\x0d\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture2D(currentTrailsColor,\x20textureCoordinate);\x0d\x0a\x0d\x0a\x20\x20\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0\x20*\x20trailsColor)\x20/\x20255.0;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0d\x0a\x0d\x0a\x20\x20\x20\x20float\x20pointsDepth\x20=\x20texture2D(segmentsDepthTexture,\x20textureCoordinate).r;\x0d\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture2D(trailsDepthTexture,\x20textureCoordinate).r;\x0d\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture2D(czm_globeDepthTexture,\x20textureCoordinate));\x0d\x0a\x0d\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(0.0);\x0d\x0a\x20\x20\x20\x20if\x20(pointsDepth\x20<\x20globeDepth)\x20{\x0d\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20gl_FragColor\x20+\x20pointsColor;\x0d\x0a\x20\x20\x20\x20}\x0d\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0d\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20gl_FragColor\x20+\x20trailsColor;\x0d\x0a\x20\x20\x20\x20}\x0d\x0a\x20\x20\x20\x20gl_FragDepthEXT\x20=\x20min(pointsDepth,\x20trailsDepth);\x0d\x0a}','moveTo','uniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0auniform\x20sampler2D\x20particlesWind;\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20speedFactor;\x0a\x0avarying\x20vec2\x20v_textureCoordinates;\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec3\x20percent\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20\x20\x20float\x20normalization\x20=\x20length(percent);\x0a\x0a\x20\x20\x20\x20return\x20normalization;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20//\x20vec3\x20currentSpeed\x20=\x20texture2D(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20texture2D(particlesWind,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20vec4(speedFactor\x20*\x20pixelSize\x20*\x20windVector,\x20calculateWindNorm(windVector));\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20nextSpeed;\x0a}','unbindEvent','createComputingPrimitives','xmax','attributeLocations','sham','UNSIGNED_BYTE','defined','nextTrails','getExtent','ShaderSource','718299eLhrln','now','__proto__','all','getRandomLatLng','scene','commandType','keys','clear','uniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0avarying\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20\x20\x20float\x20term1\x20=\x20111132.92;\x0a\x20\x20\x20\x20float\x20term2\x20=\x20559.82\x20*\x20cos(2.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term3\x20=\x201.175\x20*\x20cos(4.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term4\x20=\x200.0023\x20*\x20cos(6.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20\x20\x20float\x20term5\x20=\x20111412.84\x20*\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20term6\x20=\x2093.5\x20*\x20cos(3.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term7\x20=\x200.118\x20*\x20cos(5.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avoid\x20updatePosition(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20windVectorInLonLatLev;\x0a\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture2D(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20speed\x20=\x20texture2D(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20updatePosition(lonLatLev,\x20speed);\x0a}','_tomap','defineProperty','vertexArray','redraw','trails','Cartesian3','LayerUtil','lonRange','pointer-events','Color','CanvasWindLayer','off','_mountedHook','hidden','fromCache','sin','_showHook','outputTexture','FLOAT','bindEvent','get','pointerEvents','updateSpeed','getOwnPropertyDescriptors','currentParticlesPosition','_calc_speedRate','bind','mouseUp','strokeStyle','particlesComputing','drawingBufferHeight','abs','ComponentDatatype','depthMask','log','stroke','createRenderingPrimitives','refreshParticles','animateFrame','mouse_down','#ffffff','tlng','udata','postProcessingPosition','Super\x20expression\x20must\x20either\x20be\x20null\x20or\x20a\x20function','particlesNumber','currentTrails','toString','addEventListener','from','createRenderingTextures','Cesium','createRenderingFramebuffers','updatePosition','10020JGFWTC','PrimitiveCollection','worker','isInExtent','_calcUV','setPrototypeOf','refreshTimer','nextParticlesSpeed','ALWAYS','getOwnPropertyDescriptor','createTexture','function','Draw','fromDegrees','ymin','particleHeight','push','add','windTextures','speedRate','west','Cannot\x20call\x20a\x20class\x20as\x20a\x20function','CanvasWindField','Map','fromGeometry','canvasResize','particlesWind','framebuffer','_onMouseUpEvent','setDate','canvasWidth','particles','_map','IDENTITY','pow','configurable','getFullscreenQuad','clientHeight','vdata','GeometryAttribute','postProcessingSpeed','particleSystem','height','ShaderProgram','Matrix4','GeometryAttributes','0px','clearCommand','attribute\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20normal\x0aattribute\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20postProcessingSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0avarying\x20float\x20speedNormalization;\x0a\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x20\x0a\x20\x20\x20\x20float\x20a\x20=\x206378137.0;\x20//\x20Semi-major\x20axis\x20\x0a\x20\x20\x20\x20float\x20b\x20=\x206356752.3142;\x20//\x20Semi-minor\x20axis\x20\x0a\x20\x20\x20\x20float\x20e2\x20=\x206.69437999014e-3;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x0a\x20\x20\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calcProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0,\x20360.0)\x20-\x20180.0;\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0);\x0a\x20\x20\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calcOffset(vec4\x20currentProjectedCoordinate,\x20vec4\x20nextProjectedCoordinate,\x20float\x20offsetSign)\x20{\x0a\x20\x20\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0);\x0a\x20\x20\x20\x20vec2\x20currentXY\x20=\x20(currentProjectedCoordinate.xy\x20/\x20currentProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x20\x20\x20\x20vec2\x20nextXY\x20=\x20(nextProjectedCoordinate.xy\x20/\x20nextProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0;\x0a\x20\x20\x20\x20vec2\x20direction\x20=\x20normalize(nextXY\x20-\x20currentXY);\x0a\x20\x20\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0,\x200.0);\x0a\x20\x20\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20\x20\x20vec3\x20currentPosition\x20=\x20texture2D(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20\x20\x20vec4\x20nextPosition\x20=\x20texture2D(postProcessingPosition,\x20particleIndex);\x0a\x0a\x20\x20\x20\x20vec4\x20currentProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20vec4\x20nextProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(nextPosition.w\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(nextPosition.xyz);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20float\x20pointToUse\x20=\x20normal.x;\x20//\x20-1\x20is\x20currentProjectedCoordinate\x20and\x20+1\x20is\x20nextProjectedCoordinate\x0a\x20\x20\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20pixelSize\x20*\x20calcOffset(currentProjectedCoordinate,\x20nextProjectedCoordinate,\x20offsetSign);\x0a\x20\x20\x20\x20if\x20(pointToUse\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20currentProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20nextProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20speedNormalization\x20=\x20texture2D(postProcessingSpeed,\x20particleIndex).a;\x0a}','clampToLatitudeRange','Rectangle','TWO_PI','_updateIng','BaseLayer','canvas','ComputeCommand','drawingBufferWidth','30511pncZQx','createParticlesTextures','_canrefresh','style','getContext','postMessage','dropRateBump','mouseHidden','setOptions','age','globeBoundingSphere','layer','maxAge','Derived\x20constructors\x20may\x20only\x20return\x20object\x20or\x20undefined','currentParticlesSpeed','4292420XTAeyF','frameRate','Pass','frameTime','globalAlpha','_removedHook','context','110KrMGJH','autoClear','dropRate','vmax','destroy','particlesTextures','geometry','isDestroyed','color','destination-in','toRadians','fixedHeight','reverseY','primitiveType','round','ymax','WindLayer','writable','toGridXY','getParticles','umin','object','_addedHook','STATIC_DRAW','floor','once','fragmentShaderSource','canvasHeight','atan2','positionWC','requestAnimationFrame','framebuffers','colors','destroyParticlesTextures','iterator','class','randomizeParticles','1790562gQJtGN','windData','filter','100%','applyViewerParameters','destroyObject','_createCanvas','wheel','getOwnPropertySymbols','cols','initWorker','RGB','segments','top','viewerParameters','SCENE3D','Cartesian2','setAttribute','container','_updateIng2','BufferUsage','_onMouseDownEvent','name','depthTexture','min','random','key','blue','call','currentTrailsColor','clientWidth','_onMapWhellEvent','execute','lev','array','fromCssColorString','pixelSize','Sampler','createElement','PI_OVER_THREE','visibility','EventType','xmin','ClearCommand','_onMap_preRenderEvent','_pointerEvents','mouseMove','camera','rawRenderState','visible','max','uniform\x20sampler2D\x20colorTable;\x0a\x0avarying\x20float\x20speedNormalization;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20texture2D(colorTable,\x20vec2(speedNormalization,\x200.0));\x0a}','_data','854029RpucrR','uniformMap','canvasContext','OPAQUE','mod','SceneMode','DrawCommand','particlesTextureSize','mouseDown','fill','TextureMagnificationFilter','prototype','DISABLE_LOG_DEPTH_FRAGMENT_WRITE','updateViewerParameters','commandList','getUVByXY','SceneTransforms','LUMINANCE','this\x20hasn\x27t\x20been\x20initialised\x20-\x20super()\x20hasn\x27t\x20been\x20called','THREE_PI_OVER_TWO','canvasWind','createSegmentsGeometry','string','_bilinearInterpolation','EllipsoidalOccluder','length','Appearance','default','blending','PixelFormat','source','none','Framebuffer','PixelDatatype','forEach','lineWidth','createFramebuffer','ZERO','wind','setGeometry','shaderProgram','1348828yKDPIB','construct','_drawLines','mode','show','rows','PrimitiveType','uniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0auniform\x20float\x20dropRate;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0auniform\x20float\x20dropRateBump;\x0a\x0avarying\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898,\x2078.233,\x204375.85453);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0,\x201.0);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0);\x0a\x20\x20\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20lev);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20\x20\x20return\x20particle.y\x20<\x20-90.0\x20||\x20particle.y\x20>\x2090.0;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20texture2D(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20texture2D(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20nextSpeed.a;\x0a\x0a\x20\x20\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20\x20\x20if\x20(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(randomParticle,\x201.0);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a\x20\x20\x20\x20}\x0a}','uniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x0a\x0avarying\x20vec2\x20v_textureCoordinates;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20randomParticle\x20=\x20texture2D(postProcessingPosition,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20vec4\x20particleSpeed\x20=\x20texture2D(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x0a\x20\x20\x20\x20if\x20(randomParticle.a\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20particleSpeed;\x0a\x20\x20\x20\x20}\x0a}','appendChild','_randomParticle','speedFactor','removeAll','slice','5nAfLFk','width','TRIANGLES','addPrimitives','constructor','getUVByPoint','globalCompositeOperation','windField','depthTest','lighter','resize','removeEventListener','register','cancelAnimationFrame','screen','uniform\x20sampler2D\x20trailsColorTexture;\x0d\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0d\x0a\x0d\x0avarying\x20vec2\x20textureCoordinate;\x0d\x0a\x0d\x0avoid\x20main()\x20{\x0d\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture2D(trailsColorTexture,\x20textureCoordinate);\x0d\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture2D(trailsDepthTexture,\x20textureCoordinate).r;\x0d\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture2D(czm_globeDepthTexture,\x20textureCoordinate));\x0d\x0a\x0d\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0d\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20trailsColor;\x0d\x0a\x20\x20\x20\x20}\x20else\x20{\x0d\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(0.0);\x0d\x0a\x20\x20\x20\x20}\x0d\x0a}','cos','6StXlNR','green','undefined','dimensions','RGBA','createCommand','preRender','DISABLE_GL_POSITION_LOG_DEPTH','_speedRate','_setOptionsHook','update','getPrototypeOf','Math','ellipsoid','beginPath','createWindTextures','commandToExecute','colorTable','lat','sqrt','particlesRendering','2hcACbc','grid','zIndex','@@iterator','TextureMinificationFilter','absolute','LINEAR','canrefresh','apply','Invalid\x20attempt\x20to\x20spread\x20non-iterable\x20instance.\x0aIn\x20order\x20to\x20be\x20iterable,\x20non-array\x20objects\x20must\x20have\x20a\x20[Symbol.iterator]()\x20method.','3639930QMWghX','fillRect','value','nextParticlesPosition','getWind','primitives','init'];_0x3a9f=function(){return _0x3b8a01;};return _0x3a9f();}function _createSuper(_0x53ec6e){var _0x4fdd81=_isNativeReflectConstruct();return function _0x26015d(){var _0x22c517=_0x34dd,_0x5bbc3f=_getPrototypeOf(_0x53ec6e),_0x353307;if(_0x4fdd81){var _0xf6b7e3=_getPrototypeOf(this)[_0x22c517(0x2c1)];_0x353307=Reflect[_0x22c517(0x2b0)](_0x5bbc3f,arguments,_0xf6b7e3);}else _0x353307=_0x5bbc3f[_0x22c517(0x2eb)](this,arguments);return _possibleConstructorReturn(this,_0x353307);};}function _toConsumableArray(_0x6a4b50){return _arrayWithoutHoles(_0x6a4b50)||_iterableToArray(_0x6a4b50)||_unsupportedIterableToArray(_0x6a4b50)||_nonIterableSpread();}function _arrayWithoutHoles(_0x5796aa){if(Array['isArray'](_0x5796aa))return _arrayLikeToArray(_0x5796aa);}function _iterableToArray(_0x2f4f4a){var _0x59911c=_0x3fcf80;if(typeof Symbol!==_0x59911c(0x2d0)&&_0x2f4f4a[Symbol[_0x59911c(0x24e)]]!=null||_0x2f4f4a[_0x59911c(0x2e6)]!=null)return Array[_0x59911c(0x1d8)](_0x2f4f4a);}function _unsupportedIterableToArray(_0x57aa82,_0x7ba6c7){var _0x15d7aa=_0x3fcf80;if(!_0x57aa82)return;if(typeof _0x57aa82===_0x15d7aa(0x29c))return _arrayLikeToArray(_0x57aa82,_0x7ba6c7);var _0x258db2=Object[_0x15d7aa(0x291)][_0x15d7aa(0x1d6)][_0x15d7aa(0x26d)](_0x57aa82)[_0x15d7aa(0x2bc)](0x8,-0x1);if(_0x258db2===_0x15d7aa(0x30c)&&_0x57aa82[_0x15d7aa(0x2c1)])_0x258db2=_0x57aa82['constructor'][_0x15d7aa(0x267)];if(_0x258db2===_0x15d7aa(0x1f4)||_0x258db2==='Set')return Array[_0x15d7aa(0x1d8)](_0x57aa82);if(_0x258db2==='Arguments'||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/['test'](_0x258db2))return _arrayLikeToArray(_0x57aa82,_0x7ba6c7);}function _arrayLikeToArray(_0x5cfcd1,_0x28471f){var _0x2b5ed9=_0x3fcf80;if(_0x28471f==null||_0x28471f>_0x5cfcd1[_0x2b5ed9(0x29f)])_0x28471f=_0x5cfcd1[_0x2b5ed9(0x29f)];for(var _0x1c1190=0x0,_0x44b51a=new Array(_0x28471f);_0x1c1190<_0x28471f;_0x1c1190++)_0x44b51a[_0x1c1190]=_0x5cfcd1[_0x1c1190];return _0x44b51a;}function _nonIterableSpread(){var _0xa82836=_0x3fcf80;throw new TypeError(_0xa82836(0x2ec));}var Cesium$6=mars3d__namespace[_0x3fcf80(0x1da)],CustomPrimitive=(function(){var _0x129150=_0x3fcf80;function _0x4aa981(_0x12b069){var _0x196a29=_0x34dd,_0x2d4b9a;_classCallCheck(this,_0x4aa981),this[_0x196a29(0x1a3)]=_0x12b069[_0x196a29(0x1a3)],this[_0x196a29(0x232)]=_0x12b069[_0x196a29(0x232)],this[_0x196a29(0x31e)]=_0x12b069['attributeLocations'],this[_0x196a29(0x239)]=_0x12b069['primitiveType'],this[_0x196a29(0x287)]=_0x12b069[_0x196a29(0x287)],this[_0x196a29(0x2f5)]=_0x12b069[_0x196a29(0x2f5)],this[_0x196a29(0x246)]=_0x12b069['fragmentShaderSource'],this[_0x196a29(0x281)]=_0x12b069[_0x196a29(0x281)],this['framebuffer']=_0x12b069['framebuffer'],this[_0x196a29(0x1b8)]=_0x12b069[_0x196a29(0x1b8)],this['autoClear']=(_0x2d4b9a=_0x12b069[_0x196a29(0x22d)])!==null&&_0x2d4b9a!==void 0x0?_0x2d4b9a:![],this['preExecute']=_0x12b069[_0x196a29(0x310)],this[_0x196a29(0x2b3)]=!![],this[_0x196a29(0x2de)]=undefined,this[_0x196a29(0x20c)]=undefined,this[_0x196a29(0x22d)]&&(this[_0x196a29(0x20c)]=new Cesium$6['ClearCommand']({'color':new Cesium$6['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Cesium$6[_0x196a29(0x227)]['OPAQUE']}));}return _createClass(_0x4aa981,[{'key':_0x129150(0x2d3),'value':function _0x3bb802(_0x4ddcf5){var _0x1a1646=_0x129150;switch(this['commandType']){case _0x1a1646(0x1e9):{var _0x415afa=Cesium$6['VertexArray'][_0x1a1646(0x1f5)]({'context':_0x4ddcf5,'geometry':this[_0x1a1646(0x232)],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']}),_0x5a9874=Cesium$6[_0x1a1646(0x208)][_0x1a1646(0x1b5)]({'context':_0x4ddcf5,'attributeLocations':this[_0x1a1646(0x31e)],'vertexShaderSource':this['vertexShaderSource'],'fragmentShaderSource':this[_0x1a1646(0x246)]}),_0x22722c=Cesium$6['RenderState'][_0x1a1646(0x1b5)](this[_0x1a1646(0x281)]);return new Cesium$6[(_0x1a1646(0x28c))]({'primitiveType':this[_0x1a1646(0x239)],'shaderProgram':_0x5a9874,'vertexArray':_0x415afa,'modelMatrix':Cesium$6[_0x1a1646(0x209)][_0x1a1646(0x1fe)],'renderState':_0x22722c,'uniformMap':this[_0x1a1646(0x287)],'castShadows':![],'receiveShadows':![],'framebuffer':this[_0x1a1646(0x1f8)],'pass':Cesium$6[_0x1a1646(0x227)][_0x1a1646(0x289)],'pickOnly':!![],'owner':this});}case _0x1a1646(0x2f8):{return new Cesium$6[(_0x1a1646(0x214))]({'owner':this,'fragmentShaderSource':this[_0x1a1646(0x246)],'uniformMap':this[_0x1a1646(0x287)],'outputTexture':this[_0x1a1646(0x1b8)],'persists':!![]});}}}},{'key':_0x129150(0x2ad),'value':function _0x54b7ac(_0x4b40e1,_0x36b759){var _0x2a1d11=_0x129150;this[_0x2a1d11(0x232)]=_0x36b759;var _0x3557ac=Cesium$6['VertexArray'][_0x2a1d11(0x1f5)]({'context':_0x4b40e1,'geometry':this[_0x2a1d11(0x232)],'attributeLocations':this[_0x2a1d11(0x31e)],'bufferUsage':Cesium$6[_0x2a1d11(0x265)][_0x2a1d11(0x243)]});this[_0x2a1d11(0x2de)]['vertexArray']=_0x3557ac;}},{'key':_0x129150(0x2d8),'value':function _0x535050(_0x2769d2){var _0x20d21e=_0x129150;if(!this[_0x20d21e(0x2b3)])return;if(_0x2769d2['mode']!==Cesium$6[_0x20d21e(0x28b)]['SCENE3D'])return;!Cesium$6[_0x20d21e(0x321)](this[_0x20d21e(0x2de)])&&(this['commandToExecute']=this[_0x20d21e(0x2d3)](_0x2769d2[_0x20d21e(0x22b)])),Cesium$6[_0x20d21e(0x321)](this['preExecute'])&&this['preExecute'](),Cesium$6[_0x20d21e(0x321)](this[_0x20d21e(0x20c)])&&_0x2769d2[_0x20d21e(0x294)][_0x20d21e(0x1ed)](this['clearCommand']),_0x2769d2[_0x20d21e(0x294)][_0x20d21e(0x1ed)](this[_0x20d21e(0x2de)]);}},{'key':_0x129150(0x233),'value':function _0xc80916(){return![];}},{'key':_0x129150(0x230),'value':function _0x53167c(){var _0x289d20=_0x129150;if(this[_0x289d20(0x20c)]){var _0x23e8c2,_0x179ae6;(_0x23e8c2=this['clearCommand'])!==null&&_0x23e8c2!==void 0x0&&_0x23e8c2[_0x289d20(0x1a9)]&&this[_0x289d20(0x20c)][_0x289d20(0x1a9)][_0x289d20(0x230)](),(_0x179ae6=this[_0x289d20(0x20c)])!==null&&_0x179ae6!==void 0x0&&_0x179ae6[_0x289d20(0x2ae)]&&this[_0x289d20(0x20c)][_0x289d20(0x2ae)][_0x289d20(0x230)](),delete this[_0x289d20(0x20c)];}return this[_0x289d20(0x2de)]&&(this[_0x289d20(0x2de)][_0x289d20(0x1a9)]&&this[_0x289d20(0x2de)][_0x289d20(0x1a9)][_0x289d20(0x230)](),this['commandToExecute'][_0x289d20(0x2ae)]&&this[_0x289d20(0x2de)]['shaderProgram'][_0x289d20(0x230)](),delete this[_0x289d20(0x2de)]),Cesium$6[_0x289d20(0x256)](this);}}]),_0x4aa981;}()),Cesium$5=mars3d__namespace[_0x3fcf80(0x1da)],Util=(function(){var _0x464ba5=function _0x4ce9ff(){var _0x2546ed=_0x34dd,_0x22b67f=new Cesium$5['Geometry']({'attributes':new Cesium$5[(_0x2546ed(0x20a))]({'position':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0x2546ed(0x1c7)][_0x2546ed(0x1b9)],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5['ComponentDatatype'][_0x2546ed(0x1b9)],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});return _0x22b67f;},_0xf6ef3b=function _0x26b727(_0xd828af,_0x3ce60b){var _0x2101f1=_0x34dd;if(Cesium$5[_0x2101f1(0x321)](_0x3ce60b)){var _0x1865df={};_0x1865df['arrayBufferView']=_0x3ce60b,_0xd828af[_0x2101f1(0x2a4)]=_0x1865df;}var _0x292ae7=new Cesium$5[(_0x2101f1(0x2fc))](_0xd828af);return _0x292ae7;},_0x1350d1=function _0xde7c3e(_0x4b8401,_0x4a13a0,_0x2b3276){var _0x323742=_0x34dd,_0x365bc3=new Cesium$5[(_0x323742(0x2a6))]({'context':_0x4b8401,'colorTextures':[_0x4a13a0],'depthTexture':_0x2b3276});return _0x365bc3;},_0x3f0061=function _0x3bf7e8(_0x675676){var _0x3f7003=_0x34dd,_0xfbaac2=!![],_0x28f578=![],_0x334935={'viewport':_0x675676['viewport'],'depthTest':_0x675676[_0x3f7003(0x2c5)],'depthMask':_0x675676[_0x3f7003(0x1c8)],'blending':_0x675676[_0x3f7003(0x2a2)]},_0x48f9f8=Cesium$5[_0x3f7003(0x2a0)]['getDefaultRenderState'](_0xfbaac2,_0x28f578,_0x334935);return _0x48f9f8;},_0x5575c7=function _0x30e98e(_0x379adf){var _0x1597c6=_0x34dd,_0x2bdad1={},_0x11f59f=Cesium$5[_0x1597c6(0x2da)][_0x1597c6(0x28a)](_0x379adf[_0x1597c6(0x1f1)],Cesium$5['Math'][_0x1597c6(0x210)]),_0x52b90d=Cesium$5['Math'][_0x1597c6(0x28a)](_0x379adf['east'],Cesium$5[_0x1597c6(0x2da)][_0x1597c6(0x210)]),_0xa58e2a=_0x379adf[_0x1597c6(0x2be)],_0x5ca3ed,_0x4f1b5f;_0xa58e2a>Cesium$5[_0x1597c6(0x2da)][_0x1597c6(0x299)]?(_0x5ca3ed=0x0,_0x4f1b5f=Cesium$5[_0x1597c6(0x2da)][_0x1597c6(0x210)]):_0x52b90d-_0x11f59f<_0xa58e2a?(_0x5ca3ed=_0x11f59f,_0x4f1b5f=_0x11f59f+_0xa58e2a):(_0x5ca3ed=_0x11f59f,_0x4f1b5f=_0x52b90d);_0x2bdad1[_0x1597c6(0x30e)]={'min':Cesium$5[_0x1597c6(0x2da)]['toDegrees'](_0x5ca3ed),'max':Cesium$5[_0x1597c6(0x2da)][_0x1597c6(0x306)](_0x4f1b5f)};var _0x4eacf0=_0x379adf['south'],_0x9510ba=_0x379adf['north'],_0x2de438=_0x379adf[_0x1597c6(0x207)],_0x2f336f=_0x2de438>Cesium$5['Math']['PI']/0xc?_0x2de438/0x2:0x0,_0x4f9f26=Cesium$5[_0x1597c6(0x2da)][_0x1597c6(0x20e)](_0x4eacf0-_0x2f336f),_0x1085c1=Cesium$5['Math'][_0x1597c6(0x20e)](_0x9510ba+_0x2f336f);return _0x4f9f26<-Cesium$5[_0x1597c6(0x2da)][_0x1597c6(0x278)]&&(_0x4f9f26=-Cesium$5[_0x1597c6(0x2da)]['PI_OVER_TWO']),_0x1085c1>Cesium$5['Math'][_0x1597c6(0x278)]&&(_0x1085c1=Cesium$5['Math']['PI_OVER_TWO']),_0x2bdad1[_0x1597c6(0x2e0)]={'min':Cesium$5['Math'][_0x1597c6(0x306)](_0x4f9f26),'max':Cesium$5['Math'][_0x1597c6(0x306)](_0x1085c1)},_0x2bdad1;};return{'getFullscreenQuad':_0x464ba5,'createTexture':_0xf6ef3b,'createFramebuffer':_0x1350d1,'createRawRenderState':_0x3f0061,'viewRectangleToLonLatRange':_0x5575c7};}()),segmentDraw_vert=_0x3fcf80(0x20d),segmentDraw_frag=_0x3fcf80(0x284),fullscreen_vert='attribute\x20vec3\x20position;\x0d\x0aattribute\x20vec2\x20st;\x0d\x0a\x0d\x0avarying\x20vec2\x20textureCoordinate;\x0d\x0a\x0d\x0avoid\x20main()\x20{\x0d\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20st;\x0d\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(position,\x201.0);\x0d\x0a}',trailDraw_frag=_0x3fcf80(0x318),screenDraw_frag=_0x3fcf80(0x2cc),Cesium$4=mars3d__namespace[_0x3fcf80(0x1da)],ParticlesRendering=(function(){var _0x919f53=_0x3fcf80;function _0x5eaa65(_0x25cf62,_0x21be73,_0x9871c4,_0x4272b4,_0x7295b6){var _0x2f2e7a=_0x34dd;_classCallCheck(this,_0x5eaa65),this['createRenderingTextures'](_0x25cf62,_0x21be73,_0x9871c4[_0x2f2e7a(0x24c)]),this[_0x2f2e7a(0x1db)](_0x25cf62),this[_0x2f2e7a(0x1cb)](_0x25cf62,_0x9871c4,_0x4272b4,_0x7295b6);}return _createClass(_0x5eaa65,[{'key':_0x919f53(0x1d9),'value':function _0x2a1c06(_0x1e2fd2,_0x5c94f7,_0x10a0e2){var _0x2fc176=_0x919f53,_0x2f0004={'context':_0x1e2fd2,'width':_0x1e2fd2['drawingBufferWidth'],'height':_0x1e2fd2[_0x2fc176(0x1c5)],'pixelFormat':Cesium$4['PixelFormat'][_0x2fc176(0x2d2)],'pixelDatatype':Cesium$4[_0x2fc176(0x2a7)][_0x2fc176(0x320)]},_0x13b9ae={'context':_0x1e2fd2,'width':_0x1e2fd2[_0x2fc176(0x215)],'height':_0x1e2fd2[_0x2fc176(0x1c5)],'pixelFormat':Cesium$4['PixelFormat']['DEPTH_COMPONENT'],'pixelDatatype':Cesium$4[_0x2fc176(0x2a7)]['UNSIGNED_INT']},_0x5e8f43=_0x10a0e2['length'],_0x2057cb=new Float32Array(_0x5e8f43*0x3);for(var _0x20a4cf=0x0;_0x20a4cf<_0x5e8f43;_0x20a4cf++){var _0x389171=Cesium$4[_0x2fc176(0x1b0)][_0x2fc176(0x274)](_0x10a0e2[_0x20a4cf]);_0x2057cb[0x3*_0x20a4cf]=_0x389171['red'],_0x2057cb[0x3*_0x20a4cf+0x1]=_0x389171[_0x2fc176(0x2cf)],_0x2057cb[0x3*_0x20a4cf+0x2]=_0x389171[_0x2fc176(0x26c)];}var _0x18ef78={'context':_0x1e2fd2,'width':_0x5e8f43,'height':0x1,'pixelFormat':Cesium$4[_0x2fc176(0x2a3)][_0x2fc176(0x25c)],'pixelDatatype':Cesium$4['PixelDatatype'][_0x2fc176(0x1b9)],'sampler':new Cesium$4[(_0x2fc176(0x276))]({'minificationFilter':Cesium$4['TextureMinificationFilter'][_0x2fc176(0x2e9)],'magnificationFilter':Cesium$4[_0x2fc176(0x290)][_0x2fc176(0x2e9)]})};this['textures']={'segmentsColor':Util[_0x2fc176(0x1e7)](_0x2f0004),'segmentsDepth':Util[_0x2fc176(0x1e7)](_0x13b9ae),'currentTrailsColor':Util['createTexture'](_0x2f0004),'currentTrailsDepth':Util['createTexture'](_0x13b9ae),'nextTrailsColor':Util['createTexture'](_0x2f0004),'nextTrailsDepth':Util[_0x2fc176(0x1e7)](_0x13b9ae),'colorTable':Util[_0x2fc176(0x1e7)](_0x18ef78,_0x2057cb)};}},{'key':_0x919f53(0x1db),'value':function _0x194d75(_0x5d08c3){var _0xadda82=_0x919f53;this['framebuffers']={'segments':Util[_0xadda82(0x2aa)](_0x5d08c3,this[_0xadda82(0x304)]['segmentsColor'],this['textures'][_0xadda82(0x308)]),'currentTrails':Util[_0xadda82(0x2aa)](_0x5d08c3,this[_0xadda82(0x304)][_0xadda82(0x26e)],this[_0xadda82(0x304)]['currentTrailsDepth']),'nextTrails':Util[_0xadda82(0x2aa)](_0x5d08c3,this['textures']['nextTrailsColor'],this[_0xadda82(0x304)]['nextTrailsDepth'])};}},{'key':_0x919f53(0x29b),'value':function _0x14a8f8(_0x3e36e9){var _0x1edce9=_0x919f53,_0x6bb741=0x4,_0x41c6c8=[];for(var _0x57dfc3=0x0;_0x57dfc3<_0x3e36e9[_0x1edce9(0x28d)];_0x57dfc3++){for(var _0x321632=0x0;_0x321632<_0x3e36e9[_0x1edce9(0x28d)];_0x321632++){for(var _0x2e8449=0x0;_0x2e8449<_0x6bb741;_0x2e8449++){_0x41c6c8[_0x1edce9(0x1ed)](_0x57dfc3/_0x3e36e9[_0x1edce9(0x28d)]),_0x41c6c8['push'](_0x321632/_0x3e36e9[_0x1edce9(0x28d)]);}}}_0x41c6c8=new Float32Array(_0x41c6c8);var _0x259222=[],_0x2a9b5a=[-0x1,0x1],_0x45c4b1=[-0x1,0x1];for(var _0x267e7a=0x0;_0x267e7a<_0x3e36e9['maxParticles'];_0x267e7a++){for(var _0x2fb706=0x0;_0x2fb706<_0x6bb741/0x2;_0x2fb706++){for(var _0x658d09=0x0;_0x658d09<_0x6bb741/0x2;_0x658d09++){_0x259222[_0x1edce9(0x1ed)](_0x2a9b5a[_0x2fb706]),_0x259222[_0x1edce9(0x1ed)](_0x45c4b1[_0x658d09]),_0x259222[_0x1edce9(0x1ed)](0x0);}}}_0x259222=new Float32Array(_0x259222);var _0x204a27=0x6*_0x3e36e9['maxParticles'],_0x1658d3=new Uint32Array(_0x204a27);for(var _0x1ba17b=0x0,_0x5609b3=0x0,_0x5cc645=0x0;_0x1ba17b<_0x3e36e9[_0x1edce9(0x301)];_0x1ba17b++){_0x1658d3[_0x5609b3++]=_0x5cc645+0x0,_0x1658d3[_0x5609b3++]=_0x5cc645+0x1,_0x1658d3[_0x5609b3++]=_0x5cc645+0x2,_0x1658d3[_0x5609b3++]=_0x5cc645+0x2,_0x1658d3[_0x5609b3++]=_0x5cc645+0x1,_0x1658d3[_0x5609b3++]=_0x5cc645+0x3,_0x5cc645+=0x4;}var _0x3e2a48=new Cesium$4[(_0x1edce9(0x30d))]({'attributes':new Cesium$4[(_0x1edce9(0x20a))]({'st':new Cesium$4[(_0x1edce9(0x204))]({'componentDatatype':Cesium$4[_0x1edce9(0x1c7)][_0x1edce9(0x1b9)],'componentsPerAttribute':0x2,'values':_0x41c6c8}),'normal':new Cesium$4[(_0x1edce9(0x204))]({'componentDatatype':Cesium$4[_0x1edce9(0x1c7)][_0x1edce9(0x1b9)],'componentsPerAttribute':0x3,'values':_0x259222})}),'indices':_0x1658d3});return _0x3e2a48;}},{'key':_0x919f53(0x1cb),'value':function _0xae84a6(_0xf9303a,_0x26df8e,_0x584ae7,_0x177c46){var _0x2f5d60=_0x919f53,_0x22b489=this;this['primitives']={'segments':new CustomPrimitive({'commandType':_0x2f5d60(0x1e9),'attributeLocations':{'st':0x0,'normal':0x1},'geometry':this[_0x2f5d60(0x29b)](_0x26df8e),'primitiveType':Cesium$4[_0x2f5d60(0x2b5)][_0x2f5d60(0x2bf)],'uniformMap':{'currentParticlesPosition':function _0x3f1a34(){return _0x177c46['particlesTextures']['currentParticlesPosition'];},'postProcessingPosition':function _0x595be3(){var _0x56a70f=_0x2f5d60;return _0x177c46[_0x56a70f(0x231)]['postProcessingPosition'];},'postProcessingSpeed':function _0x3b48cb(){var _0x450e1e=_0x2f5d60;return _0x177c46[_0x450e1e(0x231)][_0x450e1e(0x205)];},'colorTable':function _0x4cd70a(){var _0x5dd9fb=_0x2f5d60;return _0x22b489[_0x5dd9fb(0x304)][_0x5dd9fb(0x2df)];},'aspect':function _0x5b0f2d(){var _0x42492b=_0x2f5d60;return _0xf9303a[_0x42492b(0x215)]/_0xf9303a[_0x42492b(0x1c5)];},'pixelSize':function _0x373c72(){var _0x5dbd38=_0x2f5d60;return _0x584ae7[_0x5dbd38(0x275)];},'lineWidth':function _0x3290e4(){var _0x43d1f4=_0x2f5d60;return _0x26df8e[_0x43d1f4(0x2a9)];},'particleHeight':function _0x4818e0(){var _0x4a8ee0=_0x2f5d60;return _0x26df8e[_0x4a8ee0(0x1ec)];}},'vertexShaderSource':new Cesium$4[(_0x2f5d60(0x324))]({'sources':[segmentDraw_vert]}),'fragmentShaderSource':new Cesium$4['ShaderSource']({'sources':[segmentDraw_frag]}),'rawRenderState':Util[_0x2f5d60(0x2fd)]({'viewport':undefined,'depthTest':{'enabled':!![]},'depthMask':!![]}),'framebuffer':this[_0x2f5d60(0x24b)][_0x2f5d60(0x25d)],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':_0x2f5d60(0x1e9),'attributeLocations':{'position':0x0,'st':0x1},'geometry':Util[_0x2f5d60(0x201)](),'primitiveType':Cesium$4[_0x2f5d60(0x2b5)][_0x2f5d60(0x2bf)],'uniformMap':{'segmentsColorTexture':function _0x42caf2(){var _0x246646=_0x2f5d60;return _0x22b489[_0x246646(0x304)]['segmentsColor'];},'segmentsDepthTexture':function _0x3ae2db(){var _0x268751=_0x2f5d60;return _0x22b489[_0x268751(0x304)][_0x268751(0x308)];},'currentTrailsColor':function _0x237431(){var _0x483627=_0x2f5d60;return _0x22b489[_0x483627(0x24b)][_0x483627(0x1d5)][_0x483627(0x30a)](0x0);},'trailsDepthTexture':function _0x5ac64b(){var _0x20aec6=_0x2f5d60;return _0x22b489['framebuffers'][_0x20aec6(0x1d5)][_0x20aec6(0x268)];},'fadeOpacity':function _0x49c819(){var _0x281227=_0x2f5d60;return _0x26df8e[_0x281227(0x302)];}},'vertexShaderSource':new Cesium$4['ShaderSource']({'defines':['DISABLE_GL_POSITION_LOG_DEPTH'],'sources':[fullscreen_vert]}),'fragmentShaderSource':new Cesium$4['ShaderSource']({'defines':['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],'sources':[trailDraw_frag]}),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4['DepthFunction'][_0x2f5d60(0x1e5)]},'depthMask':!![]}),'framebuffer':this['framebuffers']['nextTrails'],'autoClear':!![],'preExecute':function _0x43b9df(){var _0x423905=_0x2f5d60,_0x33039c=_0x22b489[_0x423905(0x24b)][_0x423905(0x1d5)];_0x22b489[_0x423905(0x24b)][_0x423905(0x1d5)]=_0x22b489[_0x423905(0x24b)][_0x423905(0x322)],_0x22b489[_0x423905(0x24b)][_0x423905(0x322)]=_0x33039c,_0x22b489[_0x423905(0x2f2)][_0x423905(0x1ab)][_0x423905(0x2de)][_0x423905(0x1f8)]=_0x22b489['framebuffers'][_0x423905(0x322)],_0x22b489[_0x423905(0x2f2)]['trails']['clearCommand'][_0x423905(0x1f8)]=_0x22b489['framebuffers']['nextTrails'];}}),'screen':new CustomPrimitive({'commandType':_0x2f5d60(0x1e9),'attributeLocations':{'position':0x0,'st':0x1},'geometry':Util[_0x2f5d60(0x201)](),'primitiveType':Cesium$4[_0x2f5d60(0x2b5)][_0x2f5d60(0x2bf)],'uniformMap':{'trailsColorTexture':function _0x4fa6d2(){var _0x1245b2=_0x2f5d60;return _0x22b489[_0x1245b2(0x24b)][_0x1245b2(0x322)]['getColorTexture'](0x0);},'trailsDepthTexture':function _0x3734f3(){var _0x539b90=_0x2f5d60;return _0x22b489[_0x539b90(0x24b)][_0x539b90(0x322)]['depthTexture'];}},'vertexShaderSource':new Cesium$4[(_0x2f5d60(0x324))]({'defines':[_0x2f5d60(0x2d5)],'sources':[fullscreen_vert]}),'fragmentShaderSource':new Cesium$4[(_0x2f5d60(0x324))]({'defines':[_0x2f5d60(0x292)],'sources':[screenDraw_frag]}),'rawRenderState':Util[_0x2f5d60(0x2fd)]({'viewport':undefined,'depthTest':{'enabled':![]},'depthMask':!![],'blending':{'enabled':!![]}}),'framebuffer':undefined})};}}]),_0x5eaa65;}()),getWind_frag='//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x20\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0avarying\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x,\x20360.0);\x0a\x20\x20\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20-90.0,\x2090.0);\x0a\x0a\x20\x20\x20\x20vec3\x20index3D\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20index3D.z\x20=\x20(lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z;\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205],\x20width\x20=\x203,\x20height\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x203\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x202\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWind(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20\x20\x20float\x20result\x20=\x20texture2D(windTexture,\x20normalizedIndex2D).r;\x0a\x20\x20\x20\x20return\x20result;\x0a}\x0a\x0aconst\x20mat4\x20kernelMatrix\x20=\x20mat4(\x0a\x20\x20\x20\x200.0,\x20-1.0,\x202.0,\x20-1.0,\x20//\x20first\x20column\x0a\x20\x20\x20\x202.0,\x200.0,\x20-5.0,\x203.0,\x20//\x20second\x20column\x0a\x20\x20\x20\x200.0,\x201.0,\x204.0,\x20-3.0,\x20//\x20third\x20column\x0a\x20\x20\x20\x200.0,\x200.0,\x20-1.0,\x201.0\x20//\x20fourth\x20column\x0a);\x0afloat\x20oneDimensionInterpolation(float\x20t,\x20float\x20p0,\x20float\x20p1,\x20float\x20p2,\x20float\x20p3)\x20{\x0a\x20\x20\x20\x20vec4\x20tVec4\x20=\x20vec4(1.0,\x20t,\x20t\x20*\x20t,\x20t\x20*\x20t\x20*\x20t);\x0a\x20\x20\x20\x20tVec4\x20=\x20tVec4\x20/\x202.0;\x0a\x20\x20\x20\x20vec4\x20pVec4\x20=\x20vec4(p0,\x20p1,\x20p2,\x20p3);\x0a\x20\x20\x20\x20return\x20dot((tVec4\x20*\x20kernelMatrix),\x20pVec4);\x0a}\x0a\x0afloat\x20calculateB(sampler2D\x20windTexture,\x20float\x20t,\x20float\x20lon,\x20float\x20lat,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20float\x20lon0\x20=\x20floor(lon)\x20-\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon1\x20=\x20floor(lon);\x0a\x20\x20\x20\x20float\x20lon2\x20=\x20floor(lon)\x20+\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon3\x20=\x20floor(lon)\x20+\x202.0\x20*\x20interval.x;\x0a\x0a\x20\x20\x20\x20float\x20p0\x20=\x20getWind(windTexture,\x20vec3(lon0,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p1\x20=\x20getWind(windTexture,\x20vec3(lon1,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p2\x20=\x20getWind(windTexture,\x20vec3(lon2,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p3\x20=\x20getWind(windTexture,\x20vec3(lon3,\x20lat,\x20lev));\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(t,\x20p0,\x20p1,\x20p2,\x20p3);\x0a}\x0a\x0afloat\x20interpolateOneTexture(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20\x20\x20float\x20lat0\x20=\x20floor(lat)\x20-\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat1\x20=\x20floor(lat);\x0a\x20\x20\x20\x20float\x20lat2\x20=\x20floor(lat)\x20+\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat3\x20=\x20floor(lat)\x20+\x202.0\x20*\x20interval.y;\x0a\x0a\x20\x20\x20\x20vec2\x20coefficient\x20=\x20lonLatLev.xy\x20-\x20floor(lonLatLev.xy);\x0a\x20\x20\x20\x20float\x20b0\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat0,\x20lev);\x0a\x20\x20\x20\x20float\x20b1\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat1,\x20lev);\x0a\x20\x20\x20\x20float\x20b2\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat2,\x20lev);\x0a\x20\x20\x20\x20float\x20b3\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat3,\x20lev);\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(coefficient.y,\x20b0,\x20b1,\x20b2,\x20b3);\x0a}\x0a\x0avec3\x20bicubic(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\x0a\x20\x20\x20\x20float\x20u\x20=\x20interpolateOneTexture(U,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20v\x20=\x20interpolateOneTexture(V,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture2D(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20bicubic(lonLatLev);\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(windVector,\x200.0);\x0a}',updateSpeed_frag=_0x3fcf80(0x31a),updatePosition_frag=_0x3fcf80(0x1a6),postProcessingPosition_frag=_0x3fcf80(0x2b6),postProcessingSpeed_frag=_0x3fcf80(0x2b7),Cesium$3=mars3d__namespace[_0x3fcf80(0x1da)],ParticlesComputing=(function(){var _0x5ac1fe=_0x3fcf80;function _0x569edd(_0x3e2308,_0x1d85d5,_0x4815e3,_0x3fcb69){var _0x297bc6=_0x34dd;_classCallCheck(this,_0x569edd),this[_0x297bc6(0x30b)]=_0x1d85d5,this[_0x297bc6(0x2dd)](_0x3e2308,_0x1d85d5),this[_0x297bc6(0x217)](_0x3e2308,_0x4815e3,_0x3fcb69),this[_0x297bc6(0x31c)](_0x1d85d5,_0x4815e3,_0x3fcb69);}return _createClass(_0x569edd,[{'key':_0x5ac1fe(0x2dd),'value':function _0x3332af(_0xb2d4d9,_0x2edb28){var _0x471b98=_0x5ac1fe,_0x32aaab={'context':_0xb2d4d9,'width':_0x2edb28[_0x471b98(0x2d1)][_0x471b98(0x30e)],'height':_0x2edb28[_0x471b98(0x2d1)][_0x471b98(0x2e0)]*(_0x2edb28['dimensions'][_0x471b98(0x272)]||0x1),'pixelFormat':Cesium$3[_0x471b98(0x2a3)][_0x471b98(0x297)],'pixelDatatype':Cesium$3[_0x471b98(0x2a7)]['FLOAT'],'flipY':![],'sampler':new Cesium$3[(_0x471b98(0x276))]({'minificationFilter':Cesium$3[_0x471b98(0x2e7)]['NEAREST'],'magnificationFilter':Cesium$3[_0x471b98(0x290)]['NEAREST']})};this['windTextures']={'U':Util[_0x471b98(0x1e7)](_0x32aaab,_0x2edb28['U']['array']),'V':Util['createTexture'](_0x32aaab,_0x2edb28['V'][_0x471b98(0x273)])};}},{'key':_0x5ac1fe(0x217),'value':function _0x2a657b(_0x2931c3,_0x4732be,_0x438f64){var _0x13d790=_0x5ac1fe,_0xaecac4={'context':_0x2931c3,'width':_0x4732be[_0x13d790(0x28d)],'height':_0x4732be[_0x13d790(0x28d)],'pixelFormat':Cesium$3[_0x13d790(0x2a3)]['RGBA'],'pixelDatatype':Cesium$3[_0x13d790(0x2a7)][_0x13d790(0x1b9)],'flipY':![],'sampler':new Cesium$3[(_0x13d790(0x276))]({'minificationFilter':Cesium$3['TextureMinificationFilter']['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x13d790(0x314)]})},_0x560d22=this['randomizeParticles'](_0x4732be[_0x13d790(0x301)],_0x438f64),_0x354a79=new Float32Array(0x4*_0x4732be['maxParticles'])[_0x13d790(0x28f)](0x0);this[_0x13d790(0x231)]={'particlesWind':Util[_0x13d790(0x1e7)](_0xaecac4),'currentParticlesPosition':Util[_0x13d790(0x1e7)](_0xaecac4,_0x560d22),'nextParticlesPosition':Util[_0x13d790(0x1e7)](_0xaecac4,_0x560d22),'currentParticlesSpeed':Util['createTexture'](_0xaecac4,_0x354a79),'nextParticlesSpeed':Util[_0x13d790(0x1e7)](_0xaecac4,_0x354a79),'postProcessingPosition':Util[_0x13d790(0x1e7)](_0xaecac4,_0x560d22),'postProcessingSpeed':Util[_0x13d790(0x1e7)](_0xaecac4,_0x354a79)};}},{'key':_0x5ac1fe(0x250),'value':function _0x26cb0b(_0x14aa53,_0x1ac705){var _0x12215a=_0x5ac1fe,_0x2ddfeb=new Float32Array(0x4*_0x14aa53);for(var _0xae1e83=0x0;_0xae1e83<_0x14aa53;_0xae1e83++){_0x2ddfeb[0x4*_0xae1e83]=Cesium$3[_0x12215a(0x2da)][_0x12215a(0x313)](_0x1ac705['lonRange']['x'],_0x1ac705[_0x12215a(0x1ae)]['y']),_0x2ddfeb[0x4*_0xae1e83+0x1]=Cesium$3[_0x12215a(0x2da)][_0x12215a(0x313)](_0x1ac705[_0x12215a(0x2f4)]['x'],_0x1ac705[_0x12215a(0x2f4)]['y']),_0x2ddfeb[0x4*_0xae1e83+0x2]=Cesium$3['Math'][_0x12215a(0x313)](this[_0x12215a(0x30b)][_0x12215a(0x272)]['min'],this[_0x12215a(0x30b)][_0x12215a(0x272)][_0x12215a(0x283)]),_0x2ddfeb[0x4*_0xae1e83+0x3]=0x0;}return _0x2ddfeb;}},{'key':_0x5ac1fe(0x24d),'value':function _0x3acab8(){var _0x267882=_0x5ac1fe,_0x5a84a3=this;Object[_0x267882(0x1a4)](this['particlesTextures'])[_0x267882(0x2a8)](function(_0x26d4f5){var _0x3536d8=_0x267882;_0x5a84a3[_0x3536d8(0x231)][_0x26d4f5][_0x3536d8(0x230)]();});}},{'key':_0x5ac1fe(0x31c),'value':function _0x4b364c(_0x1fe0f4,_0x4ac683,_0x4adad3){var _0x549590=_0x5ac1fe,_0x51b523=new Cesium$3[(_0x549590(0x1ac))](_0x1fe0f4[_0x549590(0x2d1)][_0x549590(0x30e)],_0x1fe0f4[_0x549590(0x2d1)][_0x549590(0x2e0)],_0x1fe0f4[_0x549590(0x2d1)][_0x549590(0x272)]),_0x32b33b=new Cesium$3[(_0x549590(0x1ac))](_0x1fe0f4[_0x549590(0x30e)]['min'],_0x1fe0f4['lat'][_0x549590(0x269)],_0x1fe0f4['lev'][_0x549590(0x269)]),_0x3b06c8=new Cesium$3['Cartesian3'](_0x1fe0f4[_0x549590(0x30e)][_0x549590(0x283)],_0x1fe0f4[_0x549590(0x2e0)][_0x549590(0x283)],_0x1fe0f4[_0x549590(0x272)]['max']),_0x3d95a8=new Cesium$3[(_0x549590(0x1ac))]((_0x3b06c8['x']-_0x32b33b['x'])/(_0x51b523['x']-0x1),(_0x3b06c8['y']-_0x32b33b['y'])/(_0x51b523['y']-0x1),_0x51b523['z']>0x1?(_0x3b06c8['z']-_0x32b33b['z'])/(_0x51b523['z']-0x1):0x1),_0x52df90=new Cesium$3['Cartesian2'](_0x1fe0f4['U'][_0x549590(0x269)],_0x1fe0f4['U'][_0x549590(0x283)]),_0x1d2479=new Cesium$3[(_0x549590(0x261))](_0x1fe0f4['V'][_0x549590(0x269)],_0x1fe0f4['V']['max']),_0x183930=this;this[_0x549590(0x2f2)]={'getWind':new CustomPrimitive({'commandType':_0x549590(0x2f8),'uniformMap':{'U':function _0x17942e(){var _0x3140f1=_0x549590;return _0x183930[_0x3140f1(0x1ef)]['U'];},'V':function _0x1b0e9f(){var _0x5bc44c=_0x549590;return _0x183930[_0x5bc44c(0x1ef)]['V'];},'currentParticlesPosition':function _0x14faca(){var _0x133183=_0x549590;return _0x183930[_0x133183(0x231)]['currentParticlesPosition'];},'dimension':function _0xc9b82c(){return _0x51b523;},'minimum':function _0x573b10(){return _0x32b33b;},'maximum':function _0x584d6a(){return _0x3b06c8;},'interval':function _0x3107c(){return _0x3d95a8;}},'fragmentShaderSource':new Cesium$3[(_0x549590(0x324))]({'sources':[getWind_frag]}),'outputTexture':this['particlesTextures']['particlesWind'],'preExecute':function _0x5baf79(){var _0x28e1d0=_0x549590;_0x183930['primitives']['getWind']['commandToExecute'][_0x28e1d0(0x1b8)]=_0x183930[_0x28e1d0(0x231)][_0x28e1d0(0x1f7)];}}),'updateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesSpeed':function _0x12f782(){var _0x35174b=_0x549590;return _0x183930[_0x35174b(0x231)][_0x35174b(0x224)];},'particlesWind':function _0x3dabf8(){var _0x11be37=_0x549590;return _0x183930[_0x11be37(0x231)][_0x11be37(0x1f7)];},'uSpeedRange':function _0x58a94c(){return _0x52df90;},'vSpeedRange':function _0x598620(){return _0x1d2479;},'pixelSize':function _0x49a479(){var _0x57df57=_0x549590;return _0x4adad3[_0x57df57(0x275)];},'speedFactor':function _0x4989e6(){var _0x338ae5=_0x549590;return _0x4ac683[_0x338ae5(0x2ba)];}},'fragmentShaderSource':new Cesium$3[(_0x549590(0x324))]({'sources':[updateSpeed_frag]}),'outputTexture':this[_0x549590(0x231)]['nextParticlesSpeed'],'preExecute':function _0x550947(){var _0x519348=_0x549590,_0x3230db=_0x183930['particlesTextures']['currentParticlesSpeed'];_0x183930[_0x519348(0x231)][_0x519348(0x224)]=_0x183930[_0x519348(0x231)]['postProcessingSpeed'],_0x183930[_0x519348(0x231)][_0x519348(0x205)]=_0x3230db,_0x183930[_0x519348(0x2f2)][_0x519348(0x1bd)][_0x519348(0x2de)][_0x519348(0x1b8)]=_0x183930['particlesTextures']['nextParticlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':_0x549590(0x2f8),'uniformMap':{'currentParticlesPosition':function _0x1a7ee3(){var _0xa85296=_0x549590;return _0x183930[_0xa85296(0x231)]['currentParticlesPosition'];},'currentParticlesSpeed':function _0x5d4d54(){var _0x50abe5=_0x549590;return _0x183930[_0x50abe5(0x231)][_0x50abe5(0x224)];}},'fragmentShaderSource':new Cesium$3[(_0x549590(0x324))]({'sources':[updatePosition_frag]}),'outputTexture':this[_0x549590(0x231)][_0x549590(0x2f0)],'preExecute':function _0x2d2d3f(){var _0x3b6633=_0x549590,_0x91ea87=_0x183930['particlesTextures'][_0x3b6633(0x1bf)];_0x183930[_0x3b6633(0x231)]['currentParticlesPosition']=_0x183930['particlesTextures'][_0x3b6633(0x1d2)],_0x183930['particlesTextures'][_0x3b6633(0x1d2)]=_0x91ea87,_0x183930[_0x3b6633(0x2f2)][_0x3b6633(0x1dc)][_0x3b6633(0x2de)][_0x3b6633(0x1b8)]=_0x183930[_0x3b6633(0x231)][_0x3b6633(0x2f0)];}}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x549590(0x2f8),'uniformMap':{'nextParticlesPosition':function _0x4b58b6(){var _0x483785=_0x549590;return _0x183930[_0x483785(0x231)][_0x483785(0x2f0)];},'nextParticlesSpeed':function _0x306034(){var _0x412683=_0x549590;return _0x183930[_0x412683(0x231)][_0x412683(0x1e4)];},'lonRange':function _0x41d4ba(){var _0x15783b=_0x549590;return _0x4adad3[_0x15783b(0x1ae)];},'latRange':function _0xf0baa2(){return _0x4adad3['latRange'];},'randomCoefficient':function _0x31a62b(){var _0x237965=Math['random']();return _0x237965;},'dropRate':function _0x290657(){var _0x459ee5=_0x549590;return _0x4ac683[_0x459ee5(0x22e)];},'dropRateBump':function _0x31587c(){var _0x15eed0=_0x549590;return _0x4ac683[_0x15eed0(0x21c)];}},'fragmentShaderSource':new Cesium$3['ShaderSource']({'sources':[postProcessingPosition_frag]}),'outputTexture':this['particlesTextures'][_0x549590(0x1d2)],'preExecute':function _0x355393(){var _0x3fb7f0=_0x549590;_0x183930[_0x3fb7f0(0x2f2)][_0x3fb7f0(0x1d2)][_0x3fb7f0(0x2de)][_0x3fb7f0(0x1b8)]=_0x183930[_0x3fb7f0(0x231)][_0x3fb7f0(0x1d2)];}}),'postProcessingSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'postProcessingPosition':function _0x4d1de5(){var _0x5547fd=_0x549590;return _0x183930[_0x5547fd(0x231)][_0x5547fd(0x1d2)];},'nextParticlesSpeed':function _0x38a6c3(){var _0x3742f9=_0x549590;return _0x183930[_0x3742f9(0x231)]['nextParticlesSpeed'];}},'fragmentShaderSource':new Cesium$3[(_0x549590(0x324))]({'sources':[postProcessingSpeed_frag]}),'outputTexture':this['particlesTextures'][_0x549590(0x205)],'preExecute':function _0x156ca1(){var _0x247ef3=_0x549590;_0x183930[_0x247ef3(0x2f2)]['postProcessingSpeed'][_0x247ef3(0x2de)][_0x247ef3(0x1b8)]=_0x183930['particlesTextures'][_0x247ef3(0x205)];}})};}}]),_0x569edd;}()),Cesium$2=mars3d__namespace[_0x3fcf80(0x1da)],ParticleSystem=(function(){var _0x2dc78b=_0x3fcf80;function _0x48b53a(_0x25e895,_0x28b56c,_0x581fb5,_0xa22a4c){var _0x23226e=_0x34dd;_classCallCheck(this,_0x48b53a),this['context']=_0x25e895,_0x28b56c=_objectSpread2({},_0x28b56c);if(_0x28b56c['udata']&&_0x28b56c[_0x23226e(0x203)]){var _0x2c43a6,_0x160427,_0x31d922,_0x5488da,_0x10964b,_0x35884e;_0x28b56c[_0x23226e(0x2d1)]={},_0x28b56c[_0x23226e(0x2d1)][_0x23226e(0x30e)]=_0x28b56c[_0x23226e(0x25a)],_0x28b56c[_0x23226e(0x2d1)][_0x23226e(0x2e0)]=_0x28b56c[_0x23226e(0x2b4)],_0x28b56c[_0x23226e(0x2d1)][_0x23226e(0x272)]=_0x28b56c[_0x23226e(0x272)]||0x1,_0x28b56c[_0x23226e(0x30e)]={},_0x28b56c[_0x23226e(0x30e)][_0x23226e(0x269)]=_0x28b56c[_0x23226e(0x27b)],_0x28b56c[_0x23226e(0x30e)][_0x23226e(0x283)]=_0x28b56c[_0x23226e(0x31d)],_0x28b56c['lat']={},_0x28b56c['lat'][_0x23226e(0x269)]=_0x28b56c[_0x23226e(0x1eb)],_0x28b56c['lat'][_0x23226e(0x283)]=_0x28b56c[_0x23226e(0x23b)],_0x28b56c[_0x23226e(0x272)]={},_0x28b56c[_0x23226e(0x272)][_0x23226e(0x269)]=(_0x2c43a6=_0x28b56c['levmin'])!==null&&_0x2c43a6!==void 0x0?_0x2c43a6:0x1,_0x28b56c['lev'][_0x23226e(0x283)]=(_0x160427=_0x28b56c['levmax'])!==null&&_0x160427!==void 0x0?_0x160427:0x1,_0x28b56c['U']={},_0x28b56c['U'][_0x23226e(0x273)]=new Float32Array(_0x28b56c[_0x23226e(0x1d1)]),_0x28b56c['U'][_0x23226e(0x269)]=(_0x31d922=_0x28b56c[_0x23226e(0x240)])!==null&&_0x31d922!==void 0x0?_0x31d922:Math[_0x23226e(0x269)][_0x23226e(0x2eb)](Math,_toConsumableArray(_0x28b56c['udata'])),_0x28b56c['U']['max']=(_0x5488da=_0x28b56c['umax'])!==null&&_0x5488da!==void 0x0?_0x5488da:Math[_0x23226e(0x283)]['apply'](Math,_toConsumableArray(_0x28b56c[_0x23226e(0x1d1)])),_0x28b56c['V']={},_0x28b56c['V'][_0x23226e(0x273)]=new Float32Array(_0x28b56c[_0x23226e(0x203)]),_0x28b56c['V'][_0x23226e(0x269)]=(_0x10964b=_0x28b56c['vmin'])!==null&&_0x10964b!==void 0x0?_0x10964b:Math['min'][_0x23226e(0x2eb)](Math,_toConsumableArray(_0x28b56c['vdata'])),_0x28b56c['V'][_0x23226e(0x283)]=(_0x35884e=_0x28b56c[_0x23226e(0x22f)])!==null&&_0x35884e!==void 0x0?_0x35884e:Math[_0x23226e(0x283)][_0x23226e(0x2eb)](Math,_toConsumableArray(_0x28b56c[_0x23226e(0x203)]));}this['data']=_0x28b56c,this[_0x23226e(0x2ff)]=_0x581fb5,this['viewerParameters']=_0xa22a4c,this['particlesComputing']=new ParticlesComputing(this[_0x23226e(0x22b)],this[_0x23226e(0x30b)],this[_0x23226e(0x2ff)],this['viewerParameters']),this[_0x23226e(0x2e2)]=new ParticlesRendering(this[_0x23226e(0x22b)],this['data'],this['options'],this[_0x23226e(0x25f)],this['particlesComputing']);}return _createClass(_0x48b53a,[{'key':'canvasResize','value':function _0x5c8ba7(_0x5353b7){var _0x168f8e=_0x34dd,_0x481a02=this;this[_0x168f8e(0x1c4)][_0x168f8e(0x24d)](),Object[_0x168f8e(0x1a4)](this[_0x168f8e(0x1c4)][_0x168f8e(0x1ef)])['forEach'](function(_0xf0cca0){var _0x50ed31=_0x168f8e;_0x481a02[_0x50ed31(0x1c4)][_0x50ed31(0x1ef)][_0xf0cca0]['destroy']();}),this['particlesRendering']['textures']['colorTable'][_0x168f8e(0x230)](),Object['keys'](this[_0x168f8e(0x2e2)][_0x168f8e(0x24b)])[_0x168f8e(0x2a8)](function(_0x374247){var _0x53a8f3=_0x168f8e;_0x481a02[_0x53a8f3(0x2e2)]['framebuffers'][_0x374247]['destroy']();}),this[_0x168f8e(0x22b)]=_0x5353b7,this[_0x168f8e(0x1c4)]=new ParticlesComputing(this['context'],this['data'],this[_0x168f8e(0x2ff)],this[_0x168f8e(0x25f)]),this[_0x168f8e(0x2e2)]=new ParticlesRendering(this[_0x168f8e(0x22b)],this[_0x168f8e(0x30b)],this['options'],this[_0x168f8e(0x25f)],this[_0x168f8e(0x1c4)]);}},{'key':'clearFramebuffers','value':function _0x396009(){var _0x47da33=_0x34dd,_0xaa6c10=this,_0x29f3cf=new Cesium$2[(_0x47da33(0x27c))]({'color':new Cesium$2[(_0x47da33(0x1b0))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2[_0x47da33(0x227)][_0x47da33(0x289)]});Object[_0x47da33(0x1a4)](this[_0x47da33(0x2e2)]['framebuffers'])[_0x47da33(0x2a8)](function(_0x2c92a2){var _0x380282=_0x47da33;_0x29f3cf[_0x380282(0x1f8)]=_0xaa6c10[_0x380282(0x2e2)][_0x380282(0x24b)][_0x2c92a2],_0x29f3cf[_0x380282(0x271)](_0xaa6c10['context']);});}},{'key':'refreshParticles','value':function _0x4979e6(_0x378a26){var _0x46f4ff=_0x34dd;this['clearFramebuffers'](),this[_0x46f4ff(0x1c4)]['destroyParticlesTextures'](),this['particlesComputing'][_0x46f4ff(0x217)](this['context'],this[_0x46f4ff(0x2ff)],this[_0x46f4ff(0x25f)]);if(_0x378a26){var _0x47c0f2=this[_0x46f4ff(0x2e2)]['createSegmentsGeometry'](this[_0x46f4ff(0x2ff)]);this['particlesRendering']['primitives'][_0x46f4ff(0x25d)][_0x46f4ff(0x232)]=_0x47c0f2;var _0x26969c=Cesium$2['VertexArray'][_0x46f4ff(0x1f5)]({'context':this['context'],'geometry':_0x47c0f2,'attributeLocations':this[_0x46f4ff(0x2e2)][_0x46f4ff(0x2f2)][_0x46f4ff(0x25d)][_0x46f4ff(0x31e)],'bufferUsage':Cesium$2['BufferUsage'][_0x46f4ff(0x243)]});this['particlesRendering'][_0x46f4ff(0x2f2)][_0x46f4ff(0x25d)][_0x46f4ff(0x2de)][_0x46f4ff(0x1a9)]=_0x26969c;}}},{'key':'setOptions','value':function _0x43a60b(_0x111af6){var _0x2d9581=_0x34dd,_0x1b7427=this,_0x525b5e=![];this[_0x2d9581(0x2ff)][_0x2d9581(0x301)]!==_0x111af6[_0x2d9581(0x301)]&&(_0x525b5e=!![]),Object['keys'](_0x111af6)['forEach'](function(_0x3705d2){_0x1b7427['options'][_0x3705d2]=_0x111af6[_0x3705d2];}),this[_0x2d9581(0x1cc)](_0x525b5e);}},{'key':'applyViewerParameters','value':function _0x257b4e(_0x3a288e){var _0x4586b3=_0x34dd,_0x436c6c=this;Object[_0x4586b3(0x1a4)](_0x3a288e)[_0x4586b3(0x2a8)](function(_0x1cf5f9){var _0x5d58ee=_0x4586b3;_0x436c6c[_0x5d58ee(0x25f)][_0x1cf5f9]=_0x3a288e[_0x1cf5f9];}),this['refreshParticles'](![]);}},{'key':_0x2dc78b(0x230),'value':function _0x2b226b(){var _0x3d8fb9=_0x2dc78b,_0x514392=this;clearTimeout(this[_0x3d8fb9(0x2ea)]),this[_0x3d8fb9(0x1c4)][_0x3d8fb9(0x24d)](),Object['keys'](this[_0x3d8fb9(0x1c4)]['windTextures'])[_0x3d8fb9(0x2a8)](function(_0x4ec770){var _0x43fe56=_0x3d8fb9;_0x514392[_0x43fe56(0x1c4)]['windTextures'][_0x4ec770][_0x43fe56(0x230)]();}),this[_0x3d8fb9(0x2e2)][_0x3d8fb9(0x304)][_0x3d8fb9(0x2df)][_0x3d8fb9(0x230)](),Object[_0x3d8fb9(0x1a4)](this['particlesRendering'][_0x3d8fb9(0x24b)])[_0x3d8fb9(0x2a8)](function(_0xd2836d){var _0x46be9b=_0x3d8fb9;_0x514392[_0x46be9b(0x2e2)][_0x46be9b(0x24b)][_0xd2836d][_0x46be9b(0x230)]();});for(var _0x40fe1b in this){delete this[_0x40fe1b];}}}]),_0x48b53a;}()),Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace[_0x3fcf80(0x221)][_0x3fcf80(0x212)],DEF_OPTIONS={'particlesNumber':0x1000,'fixedHeight':0x0,'fadeOpacity':0.996,'dropRate':0.003,'dropRateBump':0.01,'speedFactor':0.5,'lineWidth':0x2,'colors':['rgb(206,255,255)']},WindLayer=function(_0x93742d){var _0x10daf6=_0x3fcf80;_inherits(_0x305112,_0x93742d);var _0x3a996a=_createSuper(_0x305112);function _0x305112(){var _0x3a8953=_0x34dd,_0x5222b0,_0x3b94bc=arguments[_0x3a8953(0x29f)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x305112),_0x3b94bc=_objectSpread2(_objectSpread2({},DEF_OPTIONS),_0x3b94bc),_0x5222b0=_0x3a996a[_0x3a8953(0x26d)](this,_0x3b94bc),_0x5222b0[_0x3a8953(0x2d7)](_0x3b94bc),_0x5222b0;}return _createClass(_0x305112,[{'key':'layer','get':function _0x339967(){var _0x2db82c=_0x34dd;return this[_0x2db82c(0x2f2)];}},{'key':_0x10daf6(0x30b),'get':function _0xdb422d(){return this['_data'];},'set':function _0x488a8f(_0x2a97e6){var _0xb6c754=_0x10daf6;this[_0xb6c754(0x2f7)](_0x2a97e6);}},{'key':_0x10daf6(0x24c),'get':function _0x12ce60(){var _0xd0117b=_0x10daf6;return this[_0xd0117b(0x2ff)][_0xd0117b(0x24c)];},'set':function _0x2e988b(_0x2edcc1){var _0x12a4a0=_0x10daf6;this[_0x12a4a0(0x2ff)]['colors']=_0x2edcc1,this[_0x12a4a0(0x206)]&&this[_0x12a4a0(0x206)][_0x12a4a0(0x21e)]({'colors':_0x2edcc1}),this[_0x12a4a0(0x2c7)]();}},{'key':_0x10daf6(0x1b3),'value':function _0x31c9e9(){}},{'key':_0x10daf6(0x242),'value':function _0x5c42c9(){var _0x4ab66c=_0x10daf6;this[_0x4ab66c(0x1a2)]=this['_map']['scene'],this['camera']=this[_0x4ab66c(0x1fd)]['camera'],this[_0x4ab66c(0x2f2)]=new Cesium$1[(_0x4ab66c(0x1de))](),this[_0x4ab66c(0x1fd)][_0x4ab66c(0x1a2)][_0x4ab66c(0x2f2)][_0x4ab66c(0x1ee)](this[_0x4ab66c(0x2f2)]),this['viewerParameters']={'lonRange':new Cesium$1[(_0x4ab66c(0x261))](),'latRange':new Cesium$1['Cartesian2'](),'pixelSize':0x0},this[_0x4ab66c(0x220)]=new Cesium$1[(_0x4ab66c(0x303))](Cesium$1[_0x4ab66c(0x1ac)][_0x4ab66c(0x2ab)],0.99*0x615299),this[_0x4ab66c(0x293)](),window['addEventListener'](_0x4ab66c(0x2c7),this['resize'][_0x4ab66c(0x1c1)](this),![]),this[_0x4ab66c(0x1ce)]=![],this[_0x4ab66c(0x2fe)]=![],this[_0x4ab66c(0x1fd)]['on'](mars3d__namespace['EventType']['wheel'],this[_0x4ab66c(0x270)],this),this[_0x4ab66c(0x1fd)]['on'](mars3d__namespace[_0x4ab66c(0x27a)][_0x4ab66c(0x28e)],this[_0x4ab66c(0x266)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x4ab66c(0x1c2)],this[_0x4ab66c(0x1f9)],this),this[_0x4ab66c(0x1fd)]['on'](mars3d__namespace['EventType'][_0x4ab66c(0x27f)],this[_0x4ab66c(0x309)],this),this[_0x4ab66c(0x285)]&&this['setData'](this[_0x4ab66c(0x285)]);}},{'key':_0x10daf6(0x22a),'value':function _0x2efedd(){var _0x15f7ba=_0x10daf6;window[_0x15f7ba(0x2c8)](_0x15f7ba(0x2c7),this[_0x15f7ba(0x2c7)]),this[_0x15f7ba(0x1fd)][_0x15f7ba(0x1b2)](mars3d__namespace[_0x15f7ba(0x27a)][_0x15f7ba(0x2d4)],this[_0x15f7ba(0x27d)],this),this[_0x15f7ba(0x1fd)][_0x15f7ba(0x1b2)](mars3d__namespace[_0x15f7ba(0x27a)][_0x15f7ba(0x258)],this['_onMapWhellEvent'],this),this[_0x15f7ba(0x1fd)][_0x15f7ba(0x1b2)](mars3d__namespace[_0x15f7ba(0x27a)][_0x15f7ba(0x28e)],this[_0x15f7ba(0x266)],this),this[_0x15f7ba(0x1fd)]['off'](mars3d__namespace['EventType'][_0x15f7ba(0x1c2)],this['_onMouseUpEvent'],this),this[_0x15f7ba(0x1fd)][_0x15f7ba(0x1b2)](mars3d__namespace[_0x15f7ba(0x27a)]['mouseMove'],this[_0x15f7ba(0x309)],this),this[_0x15f7ba(0x2f2)][_0x15f7ba(0x2bb)](),this['_map']['scene'][_0x15f7ba(0x2f2)]['remove'](this[_0x15f7ba(0x2f2)]);}},{'key':_0x10daf6(0x2c7),'value':function _0x4bc640(){var _0x565c69=_0x10daf6;if(!this[_0x565c69(0x2b3)]||!this[_0x565c69(0x206)])return;this[_0x565c69(0x2f2)][_0x565c69(0x2b3)]=![],this[_0x565c69(0x2f2)]['removeAll'](),this['_map'][_0x565c69(0x245)](mars3d__namespace[_0x565c69(0x27a)]['preRender'],this['_onMap_preRenderEvent'],this);}},{'key':'_onMap_preRenderEvent','value':function _0x237c8b(_0x2ca701){var _0x1582f3=_0x10daf6;this[_0x1582f3(0x206)][_0x1582f3(0x1f6)](this[_0x1582f3(0x1a2)][_0x1582f3(0x22b)]),this[_0x1582f3(0x2c0)](),this[_0x1582f3(0x2f2)][_0x1582f3(0x2b3)]=!![];}},{'key':'_onMapWhellEvent','value':function _0x31b67d(_0x3ca886){var _0x1aefd1=_0x10daf6,_0x532abb=this;clearTimeout(this[_0x1aefd1(0x1e3)]);if(!this[_0x1aefd1(0x2b3)]||!this[_0x1aefd1(0x206)])return;this[_0x1aefd1(0x2f2)]['show']=![],this['refreshTimer']=setTimeout(function(){var _0x5f0fca=_0x1aefd1;if(!_0x532abb[_0x5f0fca(0x2b3)])return;_0x532abb[_0x5f0fca(0x1aa)]();},0xc8);}},{'key':'_onMouseDownEvent','value':function _0x2b7f81(_0x570503){var _0x1e9869=_0x10daf6;this[_0x1e9869(0x1ce)]=!![];}},{'key':_0x10daf6(0x309),'value':function _0xcafaa9(_0xe04c6c){var _0x704703=_0x10daf6;if(!this['show']||!this['particleSystem'])return;this[_0x704703(0x1ce)]&&(this['primitives'][_0x704703(0x2b3)]=![],this[_0x704703(0x2fe)]=!![]);}},{'key':_0x10daf6(0x1f9),'value':function _0x485c98(_0x284015){var _0x3debee=_0x10daf6;if(!this[_0x3debee(0x2b3)]||!this[_0x3debee(0x206)])return;this[_0x3debee(0x1ce)]&&this[_0x3debee(0x2fe)]&&this[_0x3debee(0x1aa)](),this[_0x3debee(0x2f2)][_0x3debee(0x2b3)]=!![],this[_0x3debee(0x1ce)]=![],this[_0x3debee(0x2fe)]=![];}},{'key':'redraw','value':function _0x426e45(){var _0x676e88=_0x10daf6;if(!this[_0x676e88(0x1fd)]||!this[_0x676e88(0x2b3)])return;this['updateViewerParameters'](),this[_0x676e88(0x206)][_0x676e88(0x255)](this[_0x676e88(0x25f)]),this[_0x676e88(0x2f2)][_0x676e88(0x2b3)]=!![];}},{'key':'setData','value':function _0x325727(_0xadebb9){var _0x161936=_0x10daf6;this['_data']=_0xadebb9,this['particleSystem']&&this[_0x161936(0x206)]['destroy'](),this[_0x161936(0x206)]=new ParticleSystem(this[_0x161936(0x1a2)][_0x161936(0x22b)],_0xadebb9,this[_0x161936(0x2f9)](),this[_0x161936(0x25f)]),this['addPrimitives']();}},{'key':_0x10daf6(0x2d7),'value':function _0x1ee401(_0x3cd8ca,_0xa7e146){var _0x3e99aa=_0x10daf6;if(_0x3cd8ca)for(var _0x41a5d6 in _0x3cd8ca){this[_0x41a5d6]=_0x3cd8ca[_0x41a5d6];}this[_0x3e99aa(0x206)]&&this['particleSystem'][_0x3e99aa(0x21e)](this[_0x3e99aa(0x2f9)]());}},{'key':_0x10daf6(0x2f9),'value':function _0x30d2ee(){var _0x44ddc9=_0x10daf6,_0x52329d=Math[_0x44ddc9(0x312)](Math[_0x44ddc9(0x2e1)](this[_0x44ddc9(0x1d4)]));return this['particlesNumber']=_0x52329d*_0x52329d,{'particlesTextureSize':_0x52329d,'maxParticles':this['particlesNumber'],'particleHeight':this[_0x44ddc9(0x237)],'fadeOpacity':this[_0x44ddc9(0x302)],'dropRate':this['dropRate'],'dropRateBump':this[_0x44ddc9(0x21c)],'speedFactor':this['speedFactor'],'lineWidth':this[_0x44ddc9(0x2a9)],'colors':this[_0x44ddc9(0x24c)]};}},{'key':'addPrimitives','value':function _0x32fdea(){var _0x4744a0=_0x10daf6;this[_0x4744a0(0x2f2)]['add'](this[_0x4744a0(0x206)][_0x4744a0(0x1c4)][_0x4744a0(0x2f2)][_0x4744a0(0x2f1)]),this[_0x4744a0(0x2f2)][_0x4744a0(0x1ee)](this[_0x4744a0(0x206)][_0x4744a0(0x1c4)][_0x4744a0(0x2f2)][_0x4744a0(0x1bd)]),this[_0x4744a0(0x2f2)][_0x4744a0(0x1ee)](this[_0x4744a0(0x206)]['particlesComputing'][_0x4744a0(0x2f2)][_0x4744a0(0x1dc)]),this[_0x4744a0(0x2f2)][_0x4744a0(0x1ee)](this[_0x4744a0(0x206)]['particlesComputing'][_0x4744a0(0x2f2)][_0x4744a0(0x1d2)]),this[_0x4744a0(0x2f2)]['add'](this['particleSystem']['particlesComputing'][_0x4744a0(0x2f2)]['postProcessingSpeed']),this[_0x4744a0(0x2f2)][_0x4744a0(0x1ee)](this['particleSystem'][_0x4744a0(0x2e2)][_0x4744a0(0x2f2)][_0x4744a0(0x25d)]),this[_0x4744a0(0x2f2)][_0x4744a0(0x1ee)](this[_0x4744a0(0x206)][_0x4744a0(0x2e2)][_0x4744a0(0x2f2)][_0x4744a0(0x1ab)]),this[_0x4744a0(0x2f2)][_0x4744a0(0x1ee)](this['particleSystem'][_0x4744a0(0x2e2)][_0x4744a0(0x2f2)][_0x4744a0(0x2cb)]);}},{'key':'updateViewerParameters','value':function _0x33f74c(){var _0x431ad9=_0x10daf6,_0x57e890=this[_0x431ad9(0x280)]['computeViewRectangle'](this[_0x431ad9(0x1a2)]['globe'][_0x431ad9(0x2db)]);if(!_0x57e890){var _0x5808b5=this[_0x431ad9(0x1fd)][_0x431ad9(0x323)]();_0x57e890=Cesium$1[_0x431ad9(0x20f)][_0x431ad9(0x1ea)](_0x5808b5[_0x431ad9(0x27b)],_0x5808b5[_0x431ad9(0x1eb)],_0x5808b5['xmax'],_0x5808b5['ymax']);}var _0x2a8f2b=Util['viewRectangleToLonLatRange'](_0x57e890);this['viewerParameters'][_0x431ad9(0x1ae)]['x']=_0x2a8f2b['lon'][_0x431ad9(0x269)],this[_0x431ad9(0x25f)][_0x431ad9(0x1ae)]['y']=_0x2a8f2b['lon'][_0x431ad9(0x283)],this[_0x431ad9(0x25f)]['latRange']['x']=_0x2a8f2b[_0x431ad9(0x2e0)][_0x431ad9(0x269)],this[_0x431ad9(0x25f)]['latRange']['y']=_0x2a8f2b['lat'][_0x431ad9(0x283)];var _0x2c4b88=this[_0x431ad9(0x280)]['getPixelSize'](this[_0x431ad9(0x220)],this[_0x431ad9(0x1a2)][_0x431ad9(0x215)],this[_0x431ad9(0x1a2)][_0x431ad9(0x1c5)]);_0x2c4b88>0x0&&(this[_0x431ad9(0x25f)][_0x431ad9(0x275)]=_0x2c4b88);}}]),_0x305112;}(BaseLayer$1);mars3d__namespace[_0x3fcf80(0x1ad)][_0x3fcf80(0x2c9)](_0x3fcf80(0x2ac),WindLayer),mars3d__namespace[_0x3fcf80(0x221)][_0x3fcf80(0x23c)]=WindLayer;var CanvasParticle=(function(){var _0x557fa5=_0x3fcf80;function _0x782426(){var _0x122c22=_0x34dd;_classCallCheck(this,_0x782426),this[_0x122c22(0x307)]=null,this[_0x122c22(0x2e0)]=null,this['tlng']=null,this[_0x122c22(0x2fa)]=null,this['age']=null;}return _createClass(_0x782426,[{'key':_0x557fa5(0x230),'value':function _0x337ae0(){for(var _0x457c39 in this){delete this[_0x457c39];}}}]),_0x782426;}()),CanvasWindField=(function(){var _0x18418c=_0x3fcf80;function _0x49c2f9(_0x430084){_classCallCheck(this,_0x49c2f9),this['setOptions'](_0x430084);}return _createClass(_0x49c2f9,[{'key':_0x18418c(0x1f0),'get':function _0x499a59(){var _0x4b752c=_0x18418c;return this[_0x4b752c(0x2d6)];},'set':function _0x208f52(_0x48b08b){var _0xd1c939=_0x18418c;this[_0xd1c939(0x2d6)]=(0x64-(_0x48b08b>0x63?0x63:_0x48b08b))*0x64,this['_calc_speedRate']=[(this['xmax']-this[_0xd1c939(0x27b)])/this[_0xd1c939(0x2d6)],(this[_0xd1c939(0x23b)]-this[_0xd1c939(0x1eb)])/this[_0xd1c939(0x2d6)]];}},{'key':_0x18418c(0x222),'get':function _0x3ed9a1(){var _0x12e471=_0x18418c;return this[_0x12e471(0x300)];},'set':function _0x2727a0(_0x2361b3){var _0x4e3ddc=_0x18418c;this[_0x4e3ddc(0x300)]=_0x2361b3;}},{'key':_0x18418c(0x21e),'value':function _0x4f2198(_0x150e9c){var _0x58025c=_0x18418c;this[_0x58025c(0x2ff)]=_0x150e9c,this[_0x58025c(0x222)]=_0x150e9c['maxAge']||0x78,this[_0x58025c(0x1f0)]=_0x150e9c[_0x58025c(0x1f0)]||0x32,this[_0x58025c(0x1fc)]=[];var _0x2d02c6=_0x150e9c[_0x58025c(0x1d4)]||0x1000;for(var _0x19c42c=0x0;_0x19c42c<_0x2d02c6;_0x19c42c++){var _0x4a1739=this[_0x58025c(0x2b9)](new CanvasParticle());this[_0x58025c(0x1fc)][_0x58025c(0x1ed)](_0x4a1739);}}},{'key':'setDate','value':function _0x2ea902(_0xb82267){var _0x199ce3=_0x18418c;this[_0x199ce3(0x2b4)]=_0xb82267[_0x199ce3(0x2b4)],this['cols']=_0xb82267['cols'],this[_0x199ce3(0x27b)]=_0xb82267[_0x199ce3(0x27b)],this[_0x199ce3(0x31d)]=_0xb82267[_0x199ce3(0x31d)],this[_0x199ce3(0x1eb)]=_0xb82267[_0x199ce3(0x1eb)],this[_0x199ce3(0x23b)]=_0xb82267['ymax'],this[_0x199ce3(0x2e4)]=[];var _0x1c9006=_0xb82267[_0x199ce3(0x1d1)],_0x5a6dc0=_0xb82267[_0x199ce3(0x203)],_0x120bcb=![];_0x1c9006[_0x199ce3(0x29f)]===this[_0x199ce3(0x2b4)]&&_0x1c9006[0x0]['length']===this[_0x199ce3(0x25a)]&&(_0x120bcb=!![]);var _0x285fcb=0x0,_0x5cab63=null,_0xcfc2eb=null;for(var _0x420736=0x0;_0x420736<this[_0x199ce3(0x2b4)];_0x420736++){_0x5cab63=[];for(var _0x72551=0x0;_0x72551<this[_0x199ce3(0x25a)];_0x72551++,_0x285fcb++){_0x120bcb?_0xcfc2eb=this[_0x199ce3(0x1e1)](_0x1c9006[_0x420736][_0x72551],_0x5a6dc0[_0x420736][_0x72551]):_0xcfc2eb=this[_0x199ce3(0x1e1)](_0x1c9006[_0x285fcb],_0x5a6dc0[_0x285fcb]),_0x5cab63[_0x199ce3(0x1ed)](_0xcfc2eb);}this['grid'][_0x199ce3(0x1ed)](_0x5cab63);}this[_0x199ce3(0x2ff)][_0x199ce3(0x238)]&&this[_0x199ce3(0x2e4)]['reverse']();}},{'key':_0x18418c(0x1a5),'value':function _0x5c1eeb(){var _0x46c4ef=_0x18418c;delete this[_0x46c4ef(0x2b4)],delete this[_0x46c4ef(0x25a)],delete this[_0x46c4ef(0x27b)],delete this[_0x46c4ef(0x31d)],delete this[_0x46c4ef(0x1eb)],delete this[_0x46c4ef(0x23b)],delete this[_0x46c4ef(0x2e4)],delete this[_0x46c4ef(0x1fc)];}},{'key':_0x18418c(0x23e),'value':function _0x2fd807(_0x4bafd3,_0x14d42c){var _0x25b317=_0x18418c,_0x269ccf=(_0x4bafd3-this[_0x25b317(0x27b)])/(this[_0x25b317(0x31d)]-this[_0x25b317(0x27b)])*(this[_0x25b317(0x25a)]-0x1),_0x235231=(this[_0x25b317(0x23b)]-_0x14d42c)/(this[_0x25b317(0x23b)]-this[_0x25b317(0x1eb)])*(this['rows']-0x1);return[_0x269ccf,_0x235231];}},{'key':'getUVByXY','value':function _0x5d90a0(_0x2d3818,_0x14bb2c){var _0x213ec8=_0x18418c;if(_0x2d3818<0x0||_0x2d3818>=this[_0x213ec8(0x25a)]||_0x14bb2c>=this['rows'])return[0x0,0x0,0x0];var _0x31c18d=Math[_0x213ec8(0x244)](_0x2d3818),_0x4e1ba3=Math['floor'](_0x14bb2c);if(_0x31c18d===_0x2d3818&&_0x4e1ba3===_0x14bb2c)return this[_0x213ec8(0x2e4)][_0x14bb2c][_0x2d3818];var _0x3dcd4d=_0x31c18d+0x1,_0x62d0e9=_0x4e1ba3+0x1,_0x3e63d1=this['getUVByXY'](_0x31c18d,_0x4e1ba3),_0x53723c=this['getUVByXY'](_0x3dcd4d,_0x4e1ba3),_0x220c48=this[_0x213ec8(0x295)](_0x31c18d,_0x62d0e9),_0x5d17f9=this[_0x213ec8(0x295)](_0x3dcd4d,_0x62d0e9),_0x16f197=null;try{_0x16f197=this[_0x213ec8(0x29d)](_0x2d3818-_0x31c18d,_0x14bb2c-_0x4e1ba3,_0x3e63d1,_0x53723c,_0x220c48,_0x5d17f9);}catch(_0x25a021){console[_0x213ec8(0x1c9)](_0x2d3818,_0x14bb2c);}return _0x16f197;}},{'key':_0x18418c(0x29d),'value':function _0x2bb0a3(_0x4379a3,_0x318098,_0x26405c,_0x68fd3f,_0x1ef35d,_0x5118b3){var _0x518d0d=0x1-_0x4379a3,_0x2160ea=0x1-_0x318098,_0x51b710=_0x518d0d*_0x2160ea,_0x2fe7cd=_0x4379a3*_0x2160ea,_0x30991d=_0x518d0d*_0x318098,_0x210e82=_0x4379a3*_0x318098,_0x1acbd7=_0x26405c[0x0]*_0x51b710+_0x68fd3f[0x0]*_0x2fe7cd+_0x1ef35d[0x0]*_0x30991d+_0x5118b3[0x0]*_0x210e82,_0x3a3320=_0x26405c[0x1]*_0x51b710+_0x68fd3f[0x1]*_0x2fe7cd+_0x1ef35d[0x1]*_0x30991d+_0x5118b3[0x1]*_0x210e82;return this['_calcUV'](_0x1acbd7,_0x3a3320);}},{'key':_0x18418c(0x1e1),'value':function _0x1806f0(_0x5e61e2,_0x3a7bf7){var _0x5542f3=_0x18418c;return[+_0x5e61e2,+_0x3a7bf7,Math[_0x5542f3(0x2e1)](_0x5e61e2*_0x5e61e2+_0x3a7bf7*_0x3a7bf7)];}},{'key':'getUVByPoint','value':function _0x37534e(_0x38f9e9,_0x3778f9){var _0x5dd7db=_0x18418c;if(!this[_0x5dd7db(0x1e0)](_0x38f9e9,_0x3778f9))return null;var _0x2c9fe6=this['toGridXY'](_0x38f9e9,_0x3778f9),_0xb6ef97=this[_0x5dd7db(0x295)](_0x2c9fe6[0x0],_0x2c9fe6[0x1]);return _0xb6ef97;}},{'key':_0x18418c(0x1e0),'value':function _0x4b4843(_0x18232e,_0x24c972){var _0x2a65a0=_0x18418c;return _0x18232e>=this[_0x2a65a0(0x27b)]&&_0x18232e<=this[_0x2a65a0(0x31d)]&&_0x24c972>=this['ymin']&&_0x24c972<=this[_0x2a65a0(0x23b)]?!![]:![];}},{'key':_0x18418c(0x1a1),'value':function _0x2e203f(){var _0x543e31=_0x18418c,_0x16cea1=fRandomByfloat(this[_0x543e31(0x27b)],this['xmax']),_0x24beed=fRandomByfloat(this[_0x543e31(0x1eb)],this[_0x543e31(0x23b)]);return{'lat':_0x24beed,'lng':_0x16cea1};}},{'key':_0x18418c(0x23f),'value':function _0x4f4a31(){var _0xf0e443=_0x18418c,_0x3da326,_0x2373f3,_0x5c2076;for(var _0x150046=0x0,_0x42c7a0=this['particles'][_0xf0e443(0x29f)];_0x150046<_0x42c7a0;_0x150046++){var _0x3814f9=this[_0xf0e443(0x1fc)][_0x150046];_0x3814f9[_0xf0e443(0x21f)]<=0x0&&(_0x3814f9=this[_0xf0e443(0x2b9)](_0x3814f9));if(_0x3814f9['age']>0x0){var _0x3e3f46=_0x3814f9[_0xf0e443(0x1d0)],_0x3a2907=_0x3814f9[_0xf0e443(0x2fa)];_0x5c2076=this[_0xf0e443(0x2c2)](_0x3e3f46,_0x3a2907),_0x5c2076?(_0x3da326=_0x3e3f46+this[_0xf0e443(0x1c0)][0x0]*_0x5c2076[0x0],_0x2373f3=_0x3a2907+this[_0xf0e443(0x1c0)][0x1]*_0x5c2076[0x1],_0x3814f9[_0xf0e443(0x307)]=_0x3e3f46,_0x3814f9[_0xf0e443(0x2e0)]=_0x3a2907,_0x3814f9[_0xf0e443(0x1d0)]=_0x3da326,_0x3814f9[_0xf0e443(0x2fa)]=_0x2373f3,_0x3814f9[_0xf0e443(0x21f)]--):_0x3814f9[_0xf0e443(0x21f)]=0x0;}}return this['particles'];}},{'key':_0x18418c(0x2b9),'value':function _0x2dfe4b(_0x5e0245){var _0xc6a887=_0x18418c,_0x104993,_0x493035;for(var _0x12536b=0x0;_0x12536b<0x1e;_0x12536b++){_0x104993=this['getRandomLatLng'](),_0x493035=this[_0xc6a887(0x2c2)](_0x104993[_0xc6a887(0x307)],_0x104993[_0xc6a887(0x2e0)]);if(_0x493035&&_0x493035[0x2]>0x0)break;}if(!_0x493035)return _0x5e0245;var _0x3d2ebf=_0x104993[_0xc6a887(0x307)]+this['_calc_speedRate'][0x0]*_0x493035[0x0],_0x2743e4=_0x104993[_0xc6a887(0x2e0)]+this['_calc_speedRate'][0x1]*_0x493035[0x1];return _0x5e0245[_0xc6a887(0x307)]=_0x104993[_0xc6a887(0x307)],_0x5e0245[_0xc6a887(0x2e0)]=_0x104993[_0xc6a887(0x2e0)],_0x5e0245[_0xc6a887(0x1d0)]=_0x3d2ebf,_0x5e0245[_0xc6a887(0x2fa)]=_0x2743e4,_0x5e0245[_0xc6a887(0x21f)]=Math[_0xc6a887(0x23a)](Math[_0xc6a887(0x26a)]()*this[_0xc6a887(0x222)]),_0x5e0245;}},{'key':'destroy','value':function _0x5c18a1(){for(var _0x464eae in this){delete this[_0x464eae];}}}]),_0x49c2f9;}());function fRandomByfloat(_0x178f32,_0xfa6c2d){var _0x3cbf3b=_0x3fcf80;return _0x178f32+Math[_0x3cbf3b(0x26a)]()*(_0xfa6c2d-_0x178f32);}var Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x3fcf80(0x212)],CanvasWindLayer=function(_0x23992d){var _0x1b9c42=_0x3fcf80;_inherits(_0x2191ba,_0x23992d);var _0x2d7fdb=_createSuper(_0x2191ba);function _0x2191ba(){var _0x4e0819=_0x34dd,_0x5eaa88,_0x33ace2=arguments[_0x4e0819(0x29f)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x2191ba),_0x5eaa88=_0x2d7fdb[_0x4e0819(0x26d)](this,_0x33ace2),_0x5eaa88[_0x4e0819(0x2d7)](_0x33ace2),_0x5eaa88[_0x4e0819(0x213)]=null,_0x5eaa88;}return _createClass(_0x2191ba,[{'key':'_setOptionsHook','value':function _0x9edb24(_0x3a5cc8,_0x44dfff){var _0x1a0c49=_0x34dd,_0x119c9c,_0x12ccae,_0x55ca6b;this[_0x1a0c49(0x228)]=0x3e8/(_0x3a5cc8[_0x1a0c49(0x226)]||0xa),this[_0x1a0c49(0x27e)]=(_0x119c9c=this[_0x1a0c49(0x2ff)][_0x1a0c49(0x1bc)])!==null&&_0x119c9c!==void 0x0?_0x119c9c:![],this[_0x1a0c49(0x234)]=_0x3a5cc8[_0x1a0c49(0x234)]||_0x1a0c49(0x1cf),this[_0x1a0c49(0x2a9)]=_0x3a5cc8['lineWidth']||0x1,this[_0x1a0c49(0x237)]=(_0x12ccae=_0x3a5cc8[_0x1a0c49(0x237)])!==null&&_0x12ccae!==void 0x0?_0x12ccae:0x0,this[_0x1a0c49(0x238)]=(_0x55ca6b=_0x3a5cc8[_0x1a0c49(0x238)])!==null&&_0x55ca6b!==void 0x0?_0x55ca6b:![],this[_0x1a0c49(0x2c4)]&&this['windField'][_0x1a0c49(0x21e)](_0x3a5cc8);}},{'key':'layer','get':function _0x43dd34(){var _0x23167b=_0x34dd;return this[_0x23167b(0x213)];}},{'key':'canvasWidth','get':function _0x2aacc9(){var _0x5568b=_0x34dd;return this[_0x5568b(0x1fd)]['scene']['canvas'][_0x5568b(0x26f)];}},{'key':_0x1b9c42(0x247),'get':function _0xccd765(){var _0x3c2a83=_0x1b9c42;return this[_0x3c2a83(0x1fd)]['scene'][_0x3c2a83(0x213)][_0x3c2a83(0x202)];}},{'key':_0x1b9c42(0x1bc),'get':function _0x3095b9(){var _0xeadeff=_0x1b9c42;return this[_0xeadeff(0x27e)];},'set':function _0x4f3bec(_0x449df0){var _0x2ca0bc=_0x1b9c42;this[_0x2ca0bc(0x27e)]=_0x449df0;if(!this[_0x2ca0bc(0x213)])return;_0x449df0?this[_0x2ca0bc(0x213)][_0x2ca0bc(0x219)]['pointer-events']=_0x2ca0bc(0x328):this[_0x2ca0bc(0x213)][_0x2ca0bc(0x219)][_0x2ca0bc(0x1af)]=_0x2ca0bc(0x2a5);}},{'key':_0x1b9c42(0x1d4),'get':function _0x54df37(){var _0x43729f=_0x1b9c42;return this[_0x43729f(0x2ff)][_0x43729f(0x1d4)];},'set':function _0x36ff27(_0x1cbbe2){var _0x4857e4=_0x1b9c42,_0x1604fa=this;this[_0x4857e4(0x2ff)][_0x4857e4(0x1d4)]=_0x1cbbe2,clearTimeout(this[_0x4857e4(0x218)]),this[_0x4857e4(0x218)]=setTimeout(function(){var _0x2ba392=_0x4857e4;_0x1604fa[_0x2ba392(0x1aa)]();},0x1f4);}},{'key':'speedRate','get':function _0x328bdd(){var _0x102b42=_0x1b9c42;return this[_0x102b42(0x2ff)][_0x102b42(0x1f0)];},'set':function _0x5b447e(_0xd712bc){var _0x4e5084=_0x1b9c42;this[_0x4e5084(0x2ff)]['speedRate']=_0xd712bc,this['windField']&&(this['windField'][_0x4e5084(0x1f0)]=_0xd712bc);}},{'key':'maxAge','get':function _0x4728dc(){return this['options']['maxAge'];},'set':function _0x3a020d(_0x25fd74){var _0x4164ad=_0x1b9c42;this['options']['maxAge']=_0x25fd74,this['windField']&&(this['windField'][_0x4164ad(0x222)]=_0x25fd74);}},{'key':_0x1b9c42(0x30b),'get':function _0x27ce72(){var _0x5f5950=_0x1b9c42;return this[_0x5f5950(0x252)];},'set':function _0xf7eef9(_0x592ddc){var _0x1e5a75=_0x1b9c42;this[_0x1e5a75(0x2f7)](_0x592ddc);}},{'key':_0x1b9c42(0x1b7),'value':function _0x15262d(_0x48acde){var _0x30e945=_0x1b9c42;_0x48acde?this['_addedHook']():(this[_0x30e945(0x252)]&&(this['options']['data']=this[_0x30e945(0x252)]),this['_removedHook']());}},{'key':_0x1b9c42(0x1b3),'value':function _0x2fc57f(){var _0x1f8ba2=_0x1b9c42;this[_0x1f8ba2(0x2ff)]['worker']?this[_0x1f8ba2(0x25b)]():this[_0x1f8ba2(0x2c4)]=new CanvasWindField(this[_0x1f8ba2(0x2ff)]);}},{'key':'_addedHook','value':function _0x3046ba(){var _0x1185e1=_0x1b9c42;this[_0x1185e1(0x213)]=this[_0x1185e1(0x257)](),this['canvasContext']=this['canvas'][_0x1185e1(0x21a)]('2d',{'willReadFrequently':!![]}),this[_0x1185e1(0x1ba)](),this[_0x1185e1(0x2ff)][_0x1185e1(0x30b)]&&this['setData'](this[_0x1185e1(0x2ff)]['data']);}},{'key':'_removedHook','value':function _0x3caa6f(){var _0x58bc4e=_0x1b9c42;this[_0x58bc4e(0x1a5)](),this['unbindEvent'](),this[_0x58bc4e(0x213)]&&(this['_map'][_0x58bc4e(0x263)]['removeChild'](this['canvas']),delete this[_0x58bc4e(0x213)]);}},{'key':'_createCanvas','value':function _0x2811c4(){var _0x2f6624=_0x1b9c42,_0x371b8e=document[_0x2f6624(0x277)](_0x2f6624(0x213));_0x371b8e[_0x2f6624(0x219)][_0x2f6624(0x311)]=_0x2f6624(0x2e8),_0x371b8e[_0x2f6624(0x219)][_0x2f6624(0x25e)]=_0x2f6624(0x20b),_0x371b8e[_0x2f6624(0x219)]['left']=_0x2f6624(0x20b),_0x371b8e[_0x2f6624(0x219)][_0x2f6624(0x2be)]=_0x2f6624(0x254),_0x371b8e[_0x2f6624(0x219)][_0x2f6624(0x207)]=_0x2f6624(0x254),_0x371b8e[_0x2f6624(0x219)][_0x2f6624(0x1bc)]=this['_pointerEvents']?'auto':'none',_0x371b8e[_0x2f6624(0x219)][_0x2f6624(0x2e5)]=0xa,_0x371b8e[_0x2f6624(0x262)]('id',_0x2f6624(0x315)),_0x371b8e[_0x2f6624(0x262)](_0x2f6624(0x24f),_0x2f6624(0x315)),this[_0x2f6624(0x1fd)][_0x2f6624(0x263)][_0x2f6624(0x2b8)](_0x371b8e);var _0x1ae0b4=this['_map'][_0x2f6624(0x1a2)];return _0x371b8e[_0x2f6624(0x2be)]=_0x1ae0b4[_0x2f6624(0x213)][_0x2f6624(0x26f)],_0x371b8e[_0x2f6624(0x207)]=_0x1ae0b4['canvas'][_0x2f6624(0x202)],_0x371b8e;}},{'key':_0x1b9c42(0x2c7),'value':function _0x202e7d(){var _0x28f53f=_0x1b9c42;this['canvas']&&(this[_0x28f53f(0x213)][_0x28f53f(0x2be)]=this[_0x28f53f(0x1fb)],this['canvas'][_0x28f53f(0x207)]=this[_0x28f53f(0x247)]);}},{'key':_0x1b9c42(0x1ba),'value':function _0x5c5904(){var _0x2f41c0=_0x1b9c42,_0x599335=this,_0x3a2c59=Date[_0x2f41c0(0x326)]();(function _0x3e79ca(){var _0x521a24=_0x2f41c0;_0x599335[_0x521a24(0x1cd)]=window[_0x521a24(0x24a)](_0x3e79ca);if(_0x599335[_0x521a24(0x2b3)]&&_0x599335['windField']){var _0x4dcabd=Date['now'](),_0x1cb696=_0x4dcabd-_0x3a2c59;_0x1cb696>_0x599335[_0x521a24(0x228)]&&(_0x3a2c59=_0x4dcabd-_0x1cb696%_0x599335['frameTime'],_0x599335[_0x521a24(0x2d8)]());}}(),window[_0x2f41c0(0x1d7)](_0x2f41c0(0x2c7),this[_0x2f41c0(0x2c7)]['bind'](this),![]),this[_0x2f41c0(0x1ce)]=![],this['mouse_move']=![],this['options']['mouseHidden']&&(this[_0x2f41c0(0x1fd)]['on'](mars3d__namespace['EventType'][_0x2f41c0(0x258)],this[_0x2f41c0(0x270)],this),this[_0x2f41c0(0x1fd)]['on'](mars3d__namespace['EventType'][_0x2f41c0(0x28e)],this[_0x2f41c0(0x266)],this),this[_0x2f41c0(0x1fd)]['on'](mars3d__namespace[_0x2f41c0(0x27a)][_0x2f41c0(0x1c2)],this[_0x2f41c0(0x1f9)],this)));}},{'key':_0x1b9c42(0x31b),'value':function _0x53d96f(){var _0x14907d=_0x1b9c42;window[_0x14907d(0x2ca)](this['animateFrame']),delete this[_0x14907d(0x1cd)],window['removeEventListener'](_0x14907d(0x2c7),this[_0x14907d(0x2c7)]),this['options'][_0x14907d(0x21d)]&&(this['_map'][_0x14907d(0x1b2)](mars3d__namespace[_0x14907d(0x27a)][_0x14907d(0x258)],this[_0x14907d(0x270)],this),this[_0x14907d(0x1fd)][_0x14907d(0x1b2)](mars3d__namespace[_0x14907d(0x27a)][_0x14907d(0x28e)],this['_onMouseDownEvent'],this),this['_map'][_0x14907d(0x1b2)](mars3d__namespace['EventType'][_0x14907d(0x1c2)],this['_onMouseUpEvent'],this),this[_0x14907d(0x1fd)][_0x14907d(0x1b2)](mars3d__namespace[_0x14907d(0x27a)][_0x14907d(0x27f)],this[_0x14907d(0x309)],this));}},{'key':_0x1b9c42(0x270),'value':function _0x40d46b(_0x2431d4){var _0x1fe41e=_0x1b9c42,_0x2e81bd=this;clearTimeout(this[_0x1fe41e(0x1e3)]);if(!this[_0x1fe41e(0x2b3)]||!this['canvas'])return;this[_0x1fe41e(0x213)][_0x1fe41e(0x219)][_0x1fe41e(0x279)]=_0x1fe41e(0x1b4),this[_0x1fe41e(0x1e3)]=setTimeout(function(){var _0x35e9f4=_0x1fe41e;if(!_0x2e81bd[_0x35e9f4(0x2b3)])return;_0x2e81bd[_0x35e9f4(0x1aa)](),_0x2e81bd[_0x35e9f4(0x213)][_0x35e9f4(0x219)][_0x35e9f4(0x279)]=_0x35e9f4(0x282);},0xc8);}},{'key':'_onMouseDownEvent','value':function _0x192989(_0x79f403){var _0x197f59=_0x1b9c42;this[_0x197f59(0x1ce)]=!![],this[_0x197f59(0x1fd)]['off'](mars3d__namespace['EventType'][_0x197f59(0x27f)],this[_0x197f59(0x309)],this),this[_0x197f59(0x1fd)]['on'](mars3d__namespace[_0x197f59(0x27a)]['mouseMove'],this['_onMouseMoveEvent'],this);}},{'key':'_onMouseMoveEvent','value':function _0x206d0f(_0x29b7d1){var _0x340316=_0x1b9c42;if(!this['show']||!this[_0x340316(0x213)])return;this[_0x340316(0x1ce)]&&(this['canvas']['style'][_0x340316(0x279)]=_0x340316(0x1b4),this[_0x340316(0x2fe)]=!![]);}},{'key':_0x1b9c42(0x1f9),'value':function _0x4d0394(_0x593bad){var _0x59f141=_0x1b9c42;if(!this[_0x59f141(0x2b3)]||!this[_0x59f141(0x213)])return;this['_map'][_0x59f141(0x1b2)](mars3d__namespace[_0x59f141(0x27a)][_0x59f141(0x27f)],this[_0x59f141(0x309)],this),this['mouse_down']&&this[_0x59f141(0x2fe)]&&this[_0x59f141(0x1aa)](),this[_0x59f141(0x213)][_0x59f141(0x219)][_0x59f141(0x279)]=_0x59f141(0x282),this[_0x59f141(0x1ce)]=![],this[_0x59f141(0x2fe)]=![];}},{'key':_0x1b9c42(0x2f7),'value':function _0x158f7d(_0x2f45a2){var _0x11afcb=_0x1b9c42;this[_0x11afcb(0x1a5)](),this[_0x11afcb(0x252)]=_0x2f45a2,this['windField'][_0x11afcb(0x1fa)](_0x2f45a2),this['redraw']();}},{'key':_0x1b9c42(0x1aa),'value':function _0x4d8af5(){var _0x21c2fc=_0x1b9c42;if(!this[_0x21c2fc(0x2b3)])return;this[_0x21c2fc(0x2c4)][_0x21c2fc(0x21e)](this[_0x21c2fc(0x2ff)]),this['update']();}},{'key':'update','value':function _0x30bb05(){var _0x5d43e5=_0x1b9c42;if(this['_updateIng'])return;this[_0x5d43e5(0x211)]=!![];if(this[_0x5d43e5(0x1df)])this[_0x5d43e5(0x2c4)][_0x5d43e5(0x2d8)]();else{var _0x23bb0d=this['windField'][_0x5d43e5(0x23f)]();this[_0x5d43e5(0x2b1)](_0x23bb0d);}this['_updateIng']=![];}},{'key':'_drawLines','value':function _0x80afdd(_0x381861){var _0x10a23b=_0x1b9c42;this['canvasContext'][_0x10a23b(0x2c3)]=_0x10a23b(0x235),this[_0x10a23b(0x288)][_0x10a23b(0x2ee)](0x0,0x0,this[_0x10a23b(0x1fb)],this[_0x10a23b(0x247)]),this[_0x10a23b(0x288)][_0x10a23b(0x2c3)]=_0x10a23b(0x2c6),this[_0x10a23b(0x288)][_0x10a23b(0x229)]=0.9,this[_0x10a23b(0x288)][_0x10a23b(0x2dc)](),this['canvasContext']['lineWidth']=this['lineWidth'],this[_0x10a23b(0x288)][_0x10a23b(0x1c3)]=this[_0x10a23b(0x234)];var _0x375d07=this['_map']['scene'][_0x10a23b(0x2b2)]!==Cesium[_0x10a23b(0x28b)][_0x10a23b(0x260)];for(var _0x57ebce=0x0,_0x209b3e=_0x381861[_0x10a23b(0x29f)];_0x57ebce<_0x209b3e;_0x57ebce++){var _0x3c7ee=_0x381861[_0x57ebce],_0x538ff0=this['_tomap'](_0x3c7ee[_0x10a23b(0x307)],_0x3c7ee[_0x10a23b(0x2e0)],_0x3c7ee),_0x208d38=this[_0x10a23b(0x1a7)](_0x3c7ee[_0x10a23b(0x1d0)],_0x3c7ee[_0x10a23b(0x2fa)],_0x3c7ee);if(!_0x538ff0||!_0x208d38)continue;if(_0x375d07&&Math[_0x10a23b(0x1c6)](_0x538ff0[0x0]-_0x208d38[0x0])>=this[_0x10a23b(0x1fb)])continue;this[_0x10a23b(0x288)][_0x10a23b(0x319)](_0x538ff0[0x0],_0x538ff0[0x1]),this['canvasContext']['lineTo'](_0x208d38[0x0],_0x208d38[0x1]);}this['canvasContext'][_0x10a23b(0x1ca)]();}},{'key':_0x1b9c42(0x1a7),'value':function _0x52a9b8(_0x13d519,_0x56e8fd,_0x201362){var _0x437099=_0x1b9c42,_0x427944=Cesium[_0x437099(0x1ac)]['fromDegrees'](_0x13d519,_0x56e8fd,this[_0x437099(0x237)]),_0xe67b65=this[_0x437099(0x1fd)][_0x437099(0x1a2)];if(_0xe67b65[_0x437099(0x2b2)]===Cesium['SceneMode'][_0x437099(0x260)]){var _0x37579d=new Cesium[(_0x437099(0x29e))](_0xe67b65[_0x437099(0x30f)][_0x437099(0x2db)],_0xe67b65['camera'][_0x437099(0x249)]),_0x4a4425=_0x37579d[_0x437099(0x317)](_0x427944);if(!_0x4a4425)return _0x201362[_0x437099(0x21f)]=0x0,null;}var _0x17edb1=Cesium[_0x437099(0x296)]['wgs84ToWindowCoordinates'](this[_0x437099(0x1fd)]['scene'],_0x427944);return _0x17edb1?[_0x17edb1['x'],_0x17edb1['y']]:null;}},{'key':_0x1b9c42(0x1a5),'value':function _0x4eadf1(){var _0x3ddbbd=_0x1b9c42;this[_0x3ddbbd(0x2c4)]['clear'](),delete this[_0x3ddbbd(0x252)];}},{'key':'initWorker','value':function _0x18a170(){var _0x2816e8=_0x1b9c42,_0xc27dae=this;this[_0x2816e8(0x1df)]=new Worker(this[_0x2816e8(0x2ff)][_0x2816e8(0x1df)]),this[_0x2816e8(0x1df)]['onmessage']=function(_0xe1cb5c){var _0x3a7b9d=_0x2816e8;_0xc27dae[_0x3a7b9d(0x2b1)](_0xe1cb5c[_0x3a7b9d(0x30b)][_0x3a7b9d(0x1fc)]),_0xc27dae[_0x3a7b9d(0x264)]=![];},this[_0x2816e8(0x2c4)]={'init':function _0x5e9b39(_0x51274c){var _0x38c249=_0x2816e8;_0xc27dae[_0x38c249(0x1df)][_0x38c249(0x21b)]({'type':'init','options':_0x51274c});},'setOptions':function _0x5dad5a(_0x1dce25){var _0x53536f=_0x2816e8;_0xc27dae[_0x53536f(0x1df)][_0x53536f(0x21b)]({'type':'setOptions','options':_0x1dce25});},'setDate':function _0x11df76(_0x109d74){var _0x1e99db=_0x2816e8;_0xc27dae[_0x1e99db(0x1df)]['postMessage']({'type':_0x1e99db(0x1fa),'data':_0x109d74});},'update':function _0x392a3a(){var _0x36beca=_0x2816e8;if(_0xc27dae[_0x36beca(0x264)])return;_0xc27dae[_0x36beca(0x264)]=!![],_0xc27dae[_0x36beca(0x1df)][_0x36beca(0x21b)]({'type':'update'});},'clear':function _0x59d493(){var _0x341b07=_0x2816e8;_0xc27dae[_0x341b07(0x1df)][_0x341b07(0x21b)]({'type':_0x341b07(0x1a5)});}},this[_0x2816e8(0x2c4)][_0x2816e8(0x2f3)](this[_0x2816e8(0x2ff)]);}}]),_0x2191ba;}(BaseLayer);mars3d__namespace[_0x3fcf80(0x1ad)]['register'](_0x3fcf80(0x29a),CanvasWindLayer),mars3d__namespace[_0x3fcf80(0x221)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x3fcf80(0x1f3)]=CanvasWindField,mars3d__namespace[_0x3fcf80(0x2fb)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports[_0x3fcf80(0x1b1)]=CanvasWindLayer,exports[_0x3fcf80(0x23c)]=WindLayer,exports[_0x3fcf80(0x2fb)]=WindUtil,Object[_0x3fcf80(0x1a8)](exports,'__esModule',{'value':!![]});
}));
