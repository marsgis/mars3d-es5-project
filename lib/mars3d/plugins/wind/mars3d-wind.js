/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.0
 * 编译日期：2025-07-06 20:28
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0xe9ef01,_0x4369aa){const _0x3db338=_0xe9ef01();function _0x2894a9(_0x5c3a39,_0x2277d8){return _0x41ec(_0x2277d8-0x3c9,_0x5c3a39);}function _0x448cac(_0x4ad247,_0x2ad541){return _0x41ec(_0x4ad247- -0x276,_0x2ad541);}while(!![]){try{const _0x5f2507=-parseInt(_0x448cac(-0x79,-0x2a))/0x1*(-parseInt(_0x2894a9(0x586,0x52a))/0x2)+-parseInt(_0x448cac(-0x9e,-0xef))/0x3+-parseInt(_0x2894a9(0x4d3,0x522))/0x4+parseInt(_0x448cac(-0x48,-0x46))/0x5+parseInt(_0x448cac(-0xb4,-0x110))/0x6*(parseInt(_0x2894a9(0x4c7,0x512))/0x7)+-parseInt(_0x2894a9(0x5cb,0x61a))/0x8+-parseInt(_0x2894a9(0x5e6,0x575))/0x9;if(_0x5f2507===_0x4369aa)break;else _0x3db338['push'](_0x3db338['shift']());}catch(_0x1f8499){_0x3db338['push'](_0x3db338['shift']());}}}(_0x4e3a,0xea0c6));function _interopNamespace(_0x46b443){function _0x376e47(_0x16ff5d,_0x117bc4){return _0x41ec(_0x117bc4-0x50,_0x16ff5d);}if(_0x46b443&&_0x46b443[_0x376e47(0x29b,0x259)])return _0x46b443;var _0x5d2456=Object['create'](null);function _0x31530b(_0x2798fb,_0x5cb8a9){return _0x41ec(_0x2798fb- -0x325,_0x5cb8a9);}return _0x46b443&&Object[_0x31530b(-0x132,-0x1a0)](_0x46b443)['forEach'](function(_0x39d6d7){function _0x179eeb(_0x2796e1,_0xd6b8ac){return _0x31530b(_0xd6b8ac-0x217,_0x2796e1);}if(_0x39d6d7!==_0x179eeb(0x139,0x114)){var _0x2afdbc=Object['getOwnPropertyDescriptor'](_0x46b443,_0x39d6d7);Object['defineProperty'](_0x5d2456,_0x39d6d7,_0x2afdbc['get']?_0x2afdbc:{'enumerable':!![],'get':function(){return _0x46b443[_0x39d6d7];}});}}),_0x5d2456[_0x31530b(-0x103,-0x107)]=_0x46b443,_0x5d2456;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x2ba9f1,_0x39feb8){const _0x47c523=_0x2ba9f1*Math[_0x5e3da4(0x32f,0x2fa)](Cesium$2['Math']['toRadians'](_0x39feb8));function _0x5e3da4(_0x44c911,_0x108a7b){return _0x41ec(_0x44c911-0x161,_0x108a7b);}return _0x47c523;}function getV(_0x4ece40,_0xff6722){const _0x2ae550=_0x4ece40*Math[_0x56399c(0x4d3,0x4e0)](Cesium$2['Math']['toRadians'](_0xff6722));function _0x56399c(_0x347191,_0x14740e){return _0x41ec(_0x347191-0x321,_0x14740e);}return _0x2ae550;}function getSpeed(_0x5859f9,_0x39f6b4){const _0x5096a4=Math['sqrt'](Math['pow'](_0x5859f9,0x2)+Math['pow'](_0x39f6b4,0x2));return _0x5096a4;}function getDirection(_0x55884b,_0x465dd3){function _0x5289ae(_0x4a7352,_0x30690f){return _0x41ec(_0x4a7352-0x391,_0x30690f);}let _0xe3b61f=Cesium$2['Math'][_0x5289ae(0x5b5,0x5b3)](Math[_0x5289ae(0x5c7,0x573)](_0x465dd3,_0x55884b));function _0x559909(_0x3a2103,_0x5639ce){return _0x41ec(_0x3a2103- -0x62,_0x5639ce);}return _0xe3b61f+=_0xe3b61f<0x0?0x168:0x0,_0xe3b61f;}const _0x4406c5={};_0x4406c5['__proto__']=null,_0x4406c5[_0xba4d96(0x31d,0x317)]=getU,_0x4406c5[_0x57d5a5(0x450,0x400)]=getV,_0x4406c5['getSpeed']=getSpeed;function _0xba4d96(_0xfbbc8f,_0x72c9f8){return _0x41ec(_0xfbbc8f-0x1cd,_0x72c9f8);}_0x4406c5['getDirection']=getDirection;var WindUtil=_0x4406c5,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static['getCalculateSpeedShader'](){const _0x8551b1={};_0x8551b1[_0x1d321f(-0x173,-0x1f3)]=[calculateSpeedShader];function _0x1d321f(_0x40ed22,_0x5120b2){return _0x57d5a5(_0x5120b2,_0x40ed22- -0x52c);}return new ShaderSource$1(_0x8551b1);}static[_0x57d5a5(0x3f5,0x3bd)](){const _0x1ebf7b={};function _0x321074(_0x569fe0,_0x2e8a7c){return _0x57d5a5(_0x2e8a7c,_0x569fe0- -0x76);}return _0x1ebf7b[_0x321074(0x343,0x36d)]=[updatePositionShader],new ShaderSource$1(_0x1ebf7b);}static['getSegmentDrawVertexShader'](){const _0x441b74={};return _0x441b74['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x441b74);}static[_0x57d5a5(0x3fe,0x3e1)](){const _0x2da67b={};return _0x2da67b['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x2da67b);}static['getPostProcessingPositionShader'](){const _0x210d02={};return _0x210d02['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x210d02);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x4df2a0){this['commandType']=_0x4df2a0[_0x19d0fa(-0xca,-0x141)],this[_0x2eefc3(0x27a,0x2a3)]=_0x4df2a0[_0x2eefc3(0x27a,0x281)];function _0x19d0fa(_0x49fda2,_0x22e645){return _0x57d5a5(_0x22e645,_0x49fda2- -0x4fd);}this['attributeLocations']=_0x4df2a0[_0x19d0fa(-0x14b,-0x1ce)],this['primitiveType']=_0x4df2a0['primitiveType'],this['uniformMap']=_0x4df2a0['uniformMap']||{},this['vertexShaderSource']=_0x4df2a0[_0x19d0fa(-0xc6,-0xf7)],this['fragmentShaderSource']=_0x4df2a0[_0x19d0fa(-0x18e,-0x12b)],this['rawRenderState']=_0x4df2a0[_0x19d0fa(-0x13c,-0xbb)],this[_0x2eefc3(0x2ee,0x2bd)]=_0x4df2a0['framebuffer'];function _0x2eefc3(_0x2da4b2,_0x41f930){return _0xba4d96(_0x2da4b2- -0x132,_0x41f930);}this['outputTexture']=_0x4df2a0['outputTexture'],this[_0x19d0fa(-0x160,-0x1e3)]=_0x4df2a0['autoClear']??![],this['preExecute']=_0x4df2a0['preExecute'],this[_0x19d0fa(-0x16b,-0x15c)]=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this['isDynamic']=_0x4df2a0['isDynamic']??(()=>!![]),this['autoClear']&&(this[_0x19d0fa(-0xc5,-0xa7)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1[_0x2eefc3(0x2de,0x2f8)]}));}['createCommand'](_0x38e84b){function _0x963575(_0x1d07a2,_0x316b37){return _0x57d5a5(_0x316b37,_0x1d07a2- -0x4cd);}function _0x25e52b(_0x3ea0be,_0x344316){return _0xba4d96(_0x3ea0be- -0x321,_0x344316);}if(this[_0x963575(-0x9a,-0x84)]==='Draw'){const _0x42d29a={};_0x42d29a['context']=_0x38e84b,_0x42d29a['geometry']=this['geometry'],_0x42d29a['attributeLocations']=this[_0x25e52b(0x66,0xa2)],_0x42d29a['bufferUsage']=BufferUsage$1[_0x963575(-0x12b,-0x166)];const _0xf677e4=VertexArray$1['fromGeometry'](_0x42d29a),_0xd57472={};_0xd57472[_0x963575(-0x18f,-0x1e2)]=_0x38e84b,_0xd57472[_0x25e52b(0xeb,0xbb)]=this['vertexShaderSource'],_0xd57472[_0x25e52b(0x23,-0x8)]=this['fragmentShaderSource'],_0xd57472['attributeLocations']=this[_0x25e52b(0x66,0x41)];const _0x494a4e=ShaderProgram['fromCache'](_0xd57472),_0x54c0b2=RenderState['fromCache'](this['rawRenderState']),_0x5d8490={};return _0x5d8490['owner']=this,_0x5d8490[_0x25e52b(0x9e,0x1e)]=_0xf677e4,_0x5d8490['primitiveType']=this['primitiveType'],_0x5d8490['modelMatrix']=Matrix4[_0x25e52b(0x104,0xb9)],_0x5d8490['renderState']=_0x54c0b2,_0x5d8490[_0x963575(-0xde,-0x13c)]=_0x494a4e,_0x5d8490[_0x25e52b(0xff,0xaf)]=this[_0x963575(-0x82,-0x73)],_0x5d8490[_0x963575(-0x10a,-0xbe)]=this['uniformMap'],_0x5d8490[_0x25e52b(0x0,0x47)]=Pass$1['OPAQUE'],new DrawCommand(_0x5d8490);}else{if(this['commandType']==='Compute'){const _0x1c171f={};return _0x1c171f['owner']=this,_0x1c171f[_0x963575(-0x15e,-0x16c)]=this['fragmentShaderSource'],_0x1c171f['uniformMap']=this[_0x963575(-0x10a,-0xed)],_0x1c171f[_0x25e52b(0xf2,0x157)]=this[_0x25e52b(0xf2,0x107)],_0x1c171f[_0x963575(-0x178,-0x17d)]=!![],new ComputeCommand(_0x1c171f);}else throw new Error('Unknown\x20command\x20type');}}[_0xba4d96(0x371,0x356)](_0xdbdd5a,_0xaf4acf){this[_0x5e640d(0x22d,0x1ce)]=_0xaf4acf;function _0x5e640d(_0xfa54c3,_0x4850cf){return _0x57d5a5(_0xfa54c3,_0x4850cf- -0x209);}function _0x270b57(_0x81466a,_0x56e1c5){return _0xba4d96(_0x56e1c5-0x94,_0x81466a);}defined(this['commandToExecute'])&&(this['commandToExecute']['vertexArray']=VertexArray$1[_0x5e640d(0x1bf,0x1af)]({'context':_0xdbdd5a,'geometry':this['geometry'],'attributeLocations':this[_0x270b57(0x3fb,0x41b)],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x5d54ea){if(!this[_0x273ce3(0x304,0x2df)]())return;function _0x24653c(_0x1e0c3c,_0x95adc0){return _0xba4d96(_0x95adc0- -0x1b2,_0x1e0c3c);}if(!this['show']||!defined(_0x5d54ea))return;!defined(this['commandToExecute'])&&(this[_0x273ce3(0x357,0x2ef)]=this['createCommand'](_0x5d54ea[_0x24653c(0x173,0x161)]));defined(this['preExecute'])&&this['preExecute']();if(!_0x5d54ea['commandList']){console['warn']('frameState.commandList\x20is\x20undefined');return;}defined(this['clearCommand'])&&_0x5d54ea['commandList'][_0x24653c(0x185,0x19d)](this[_0x273ce3(0x3bb,0x441)]);function _0x273ce3(_0x1d3a1d,_0xe13f55){return _0x57d5a5(_0xe13f55,_0x1d3a1d- -0x7d);}defined(this[_0x24653c(0x17e,0x1f7)])&&_0x5d54ea['commandList']['push'](this['commandToExecute']);}['isDestroyed'](){return![];}[_0x57d5a5(0x3bb,0x38d)](){if(defined(this['commandToExecute'])){var _0x3421a3;(_0x3421a3=this['commandToExecute'][_0x4a3691(0x1a3,0x1c0)])===null||_0x3421a3===void 0x0||_0x3421a3['destroy'](),this['commandToExecute'][_0x30b52a(0x1b3,0x1ec)]=undefined;}function _0x30b52a(_0x38e1e6,_0x23cbda){return _0x57d5a5(_0x38e1e6,_0x23cbda- -0x203);}function _0x4a3691(_0x1e6a9c,_0x3ede3a){return _0x57d5a5(_0x1e6a9c,_0x3ede3a- -0x22f);}return destroyObject(this);}}function deepMerge(_0x277f4b,_0x53b37e){if(!_0x277f4b)return _0x53b37e;function _0x371bdd(_0x408008,_0x3fbf3b){return _0x57d5a5(_0x3fbf3b,_0x408008- -0x27);}if(!_0x53b37e)return _0x277f4b;function _0x5b1534(_0x4f603a,_0xb8b3b3){return _0x57d5a5(_0xb8b3b3,_0x4f603a- -0x1aa);}const _0x5419fa={..._0x53b37e},_0x6090ee=_0x5419fa;for(const _0x54ca01 in _0x277f4b){if(Object['prototype']['hasOwnProperty'][_0x5b1534(0x2a7,0x281)](_0x277f4b,_0x54ca01)){const _0x292d3d=_0x277f4b[_0x54ca01],_0x23e90e=_0x53b37e[_0x54ca01];if(Array[_0x371bdd(0x3c1,0x3b7)](_0x292d3d)){_0x6090ee[_0x54ca01]=_0x292d3d[_0x5b1534(0x1c9,0x157)]();continue;}if(_0x292d3d&&typeof _0x292d3d==='object'){_0x6090ee[_0x54ca01]=deepMerge(_0x292d3d,_0x23e90e||{});continue;}_0x292d3d!==undefined&&(_0x6090ee[_0x54ca01]=_0x292d3d);}}return _0x6090ee;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x47444c,_0x1e2a36,_0x62c83d,_0x3a9963,_0x4f5fd2){function _0xf521e1(_0x5a254f,_0x25b835){return _0x57d5a5(_0x5a254f,_0x25b835- -0x3fa);}this[_0x49d774(-0x1d3,-0x21f)]=_0x47444c,this['options']=_0x62c83d,this[_0xf521e1(-0x3d,0x1f)]=_0x3a9963,this['windData']=_0x1e2a36,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;const _0x550a83={};_0x550a83[_0xf521e1(0x56,0x38)]=_0x4f5fd2,_0x550a83['samplingWindow']=0x1,_0x550a83['quietPeriod']=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x550a83);function _0x49d774(_0x456e5f,_0x3e84e9){return _0x57d5a5(_0x456e5f,_0x3e84e9- -0x55d);}this['initFrameRate'](),this['createWindTextures'](),this['createParticlesTextures'](),this['createComputingPrimitives']();}['initFrameRate'](){const _0x4a0f6b=()=>{function _0x1943b5(_0x3a7d5b,_0x1f42d3){return _0x41ec(_0x1f42d3-0xad,_0x3a7d5b);}function _0x15bb91(_0x5b94e4,_0x113896){return _0x41ec(_0x5b94e4- -0x47,_0x113896);}this[_0x15bb91(0x133,0x110)]['lastFramesPerSecond']>0x14&&(this[_0x1943b5(0x210,0x26b)]=this[_0x1943b5(0x1e1,0x227)][_0x1943b5(0x225,0x25b)],this['frameRateAdjustment']=0x3c/Math[_0x15bb91(0x203,0x22d)](this['frameRate'],0x1));};_0x4a0f6b();const _0x5cc692=setInterval(_0x4a0f6b,0x3e8);function _0x3e2be6(_0x592648,_0x4ba49b){return _0xba4d96(_0x592648-0x14,_0x4ba49b);}const _0x95f60f=this['destroy']['bind'](this);this[_0x3e2be6(0x376,0x3b4)]=()=>{clearInterval(_0x5cc692),_0x95f60f();};}[_0x57d5a5(0x487,0x448)](){const _0x27120d={};function _0x49c7cc(_0x42c092,_0x44f9dc){return _0xba4d96(_0x44f9dc-0xc6,_0x42c092);}_0x27120d['minificationFilter']=TextureMinificationFilter$1[_0x49c7cc(0x4e0,0x4af)];function _0x5e8d3c(_0x42d3a3,_0x1560d9){return _0xba4d96(_0x42d3a3- -0x2a7,_0x1560d9);}_0x27120d[_0x5e8d3c(0x121,0x148)]=TextureMagnificationFilter$1[_0x49c7cc(0x501,0x4af)];const _0x5b2664={'context':this['context'],'width':this['windData']['width'],'height':this['windData']['height'],'pixelFormat':PixelFormat$1[_0x5e8d3c(0x77,0x18)],'pixelDatatype':PixelDatatype$1[_0x49c7cc(0x428,0x4ac)],'flipY':this['options']['flipY']??![],'sampler':new Sampler$1(_0x27120d)};this['windTextures']={'U':new Texture$1({..._0x5b2664,'source':{'arrayBufferView':new Float32Array(this[_0x5e8d3c(0x17d,0x1b0)]['u'][_0x5e8d3c(0xd9,0x124)])}}),'V':new Texture$1({..._0x5b2664,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}[_0x57d5a5(0x442,0x40f)](){const _0xe74765={};_0xe74765['minificationFilter']=TextureMinificationFilter$1['NEAREST'];function _0x418b60(_0x23467e,_0x2e403e){return _0xba4d96(_0x2e403e- -0x325,_0x23467e);}_0xe74765[_0x82be4f(0x2ff,0x2ec)]=TextureMagnificationFilter$1['NEAREST'];function _0x82be4f(_0x2a5700,_0x1e482c){return _0xba4d96(_0x2a5700- -0xc9,_0x1e482c);}const _0x2f965b={'context':this[_0x418b60(0x43,-0x12)],'width':this['options']['particlesTextureSize'],'height':this[_0x418b60(0x41,0x47)]['particlesTextureSize'],'pixelFormat':PixelFormat$1[_0x82be4f(0x2a0,0x216)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options'][_0x418b60(-0x49,0x3)]*this['options'][_0x418b60(-0xd,0x3)]*0x4)[_0x418b60(0x99,0x25)](0x0)},'sampler':new Sampler$1(_0xe74765)};this[_0x418b60(0x42,0x4e)]={'previousParticlesPosition':new Texture$1(_0x2f965b),'currentParticlesPosition':new Texture$1(_0x2f965b),'nextParticlesPosition':new Texture$1(_0x2f965b),'postProcessingPosition':new Texture$1(_0x2f965b),'particlesSpeed':new Texture$1(_0x2f965b)};}['destroyParticlesTextures'](){Object['values'](this['particlesTextures'])['forEach'](_0x154250=>_0x154250['destroy']());}[_0xba4d96(0x3de,0x3e2)](){function _0x2f9907(_0x2c27ef,_0x50d024){return _0xba4d96(_0x2c27ef- -0x3c,_0x50d024);}function _0x534fe1(_0x1f196f,_0x308f44){return _0x57d5a5(_0x1f196f,_0x308f44-0x140);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x2f9907(0x2eb,0x2ee),'uniformMap':{'U':()=>this[_0x2f9907(0x37c,0x302)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x2f9907(0x393,0x372)],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v']['min'],this[_0x534fe1(0x5ca,0x58f)]['v'][_0x534fe1(0x5e6,0x582)]),'speedRange':()=>new Cartesian2$1(this['windData']['speed']['min'],this['windData'][_0x2f9907(0x34c,0x319)]['max']),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x15a6a8(_0x54efc4,_0xdd77f9){return _0x534fe1(_0x54efc4,_0xdd77f9- -0x1a);}return(this[_0x15a6a8(0x5c0,0x53f)]['pixelSize']+0x32)*this['options']['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this[_0x2f9907(0x3e8,0x3a2)]['width'],this['windData'][_0x534fe1(0x55d,0x558)]),'minimum':()=>new Cartesian2$1(this[_0x2f9907(0x3e8,0x454)]['bounds']['west'],this['windData']['bounds']['south']),'maximum':()=>new Cartesian2$1(this[_0x2f9907(0x3e8,0x44c)]['bounds']['east'],this[_0x2f9907(0x3e8,0x399)]['bounds'][_0x534fe1(0x58e,0x530)])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this[_0x2f9907(0x337,0x3ab)][_0x534fe1(0x52e,0x4a5)],'preExecute':()=>{const _0x5c72ac=this['particlesTextures']['previousParticlesPosition'];this['particlesTextures']['previousParticlesPosition']=this['particlesTextures']['currentParticlesPosition'],this[_0x1e03fc(0x5b,0x1a)]['currentParticlesPosition']=this['particlesTextures'][_0x1e03fc(0x8,0x68)],this[_0x1e03fc(0x58,0x1a)]['postProcessingPosition']=_0x5c72ac;function _0x1e03fc(_0x5ab9ce,_0x22dd0a){return _0x2f9907(_0x22dd0a- -0x31d,_0x5ab9ce);}function _0x2faa39(_0x5939ab,_0x551be8){return _0x2f9907(_0x5939ab- -0x144,_0x551be8);}this['primitives']['calculateSpeed']['commandToExecute']&&(this['primitives']['calculateSpeed']['commandToExecute']['outputTexture']=this[_0x1e03fc(-0x1d,0x1a)][_0x2faa39(0x1ba,0x161)]);},'isDynamic':()=>this[_0x534fe1(0x4d1,0x4d7)]['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures'][_0x534fe1(0x524,0x4a1)],'particlesSpeed':()=>this['particlesTextures'][_0x534fe1(0x464,0x4a5)]},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures'][_0x2f9907(0x368,0x31b)],'preExecute':()=>{function _0x243f9d(_0x58edb3,_0x3dd437){return _0x2f9907(_0x58edb3-0x232,_0x3dd437);}function _0x577213(_0x164212,_0x1a56db){return _0x534fe1(_0x1a56db,_0x164212- -0x23f);}this['primitives']['updatePosition'][_0x577213(0x2d5,0x2ea)]&&(this[_0x577213(0x336,0x37a)]['updatePosition'][_0x577213(0x2d5,0x2b8)]['outputTexture']=this[_0x243f9d(0x569,0x57e)]['nextParticlesPosition']);},'isDynamic':()=>this[_0x2f9907(0x330,0x34b)]['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this[_0x534fe1(0x509,0x4de)][_0x2f9907(0x2fe,0x34b)],'lonRange':()=>this[_0x534fe1(0x572,0x559)]['lonRange'],'latRange':()=>this[_0x534fe1(0x5ae,0x559)]['latRange'],'dataLonRange':()=>new Cartesian2$1(this[_0x534fe1(0x5d2,0x58f)][_0x534fe1(0x4cc,0x53d)]['west'],this[_0x534fe1(0x555,0x58f)][_0x2f9907(0x396,0x366)][_0x2f9907(0x338,0x3a1)]),'dataLatRange':()=>new Cartesian2$1(this[_0x534fe1(0x5ee,0x58f)][_0x534fe1(0x59a,0x53d)]['south'],this[_0x534fe1(0x5df,0x58f)][_0x534fe1(0x518,0x53d)]['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options'][_0x534fe1(0x4b4,0x518)],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager[_0x2f9907(0x3b8,0x346)](),'outputTexture':this[_0x2f9907(0x337,0x2de)]['postProcessingPosition'],'preExecute':()=>{function _0x79668f(_0x46a055,_0x43410e){return _0x2f9907(_0x46a055- -0x53d,_0x43410e);}function _0x7c30d(_0x14891f,_0x2b8c5a){return _0x534fe1(_0x2b8c5a,_0x14891f- -0x4a7);}this['primitives']['postProcessingPosition']['commandToExecute']&&(this['primitives']['postProcessingPosition'][_0x79668f(-0x1d0,-0x173)]['outputTexture']=this[_0x79668f(-0x206,-0x281)]['postProcessingPosition']);},'isDynamic':()=>this['options'][_0x2f9907(0x3a3,0x40d)]})};}['reCreateWindTextures'](){this['windTextures']['U'][_0x11eb76(0x52,0x35)]();function _0x11eb76(_0x5b1784,_0x45be1b){return _0xba4d96(_0x5b1784- -0x310,_0x45be1b);}this['windTextures']['V'][_0x11eb76(0x52,0xcc)]();function _0x21a76c(_0x286fa3,_0x51c956){return _0x57d5a5(_0x286fa3,_0x51c956- -0xc);}this['createWindTextures']();}['updateWindData'](_0x5e676a){function _0xa75b4a(_0x25b462,_0x283057){return _0x57d5a5(_0x25b462,_0x283057-0x5b);}this[_0xa75b4a(0x452,0x4aa)]=_0x5e676a;function _0x380ac5(_0x4d7a0c,_0x2c5690){return _0xba4d96(_0x2c5690- -0x317,_0x4d7a0c);}this[_0x380ac5(0xfa,0xf7)]();}[_0x57d5a5(0x350,0x379)](_0x20d4bb){function _0x4f48f3(_0x581b57,_0x45963c){return _0x57d5a5(_0x45963c,_0x581b57-0x159);}const _0x4e66bd=_0x20d4bb['flipY']!==undefined&&_0x20d4bb['flipY']!==this['options']['flipY'];function _0x25ba0b(_0x447d88,_0x435ac2){return _0xba4d96(_0x435ac2- -0xe,_0x447d88);}this[_0x4f48f3(0x4f0,0x4de)]=deepMerge(_0x20d4bb,this[_0x25ba0b(0x307,0x35e)]),_0x4e66bd&&this[_0x4f48f3(0x592,0x60a)]();}[_0x57d5a5(0x422,0x3ca)](_0x863409){function _0x365d32(_0x45df58,_0xf7097a){return _0x57d5a5(_0xf7097a,_0x45df58-0xf0);}const {array:_0x5bc471}=_0x863409;let {min:_0x228f2f,max:_0x4a9123}=_0x863409;const _0x2b4e40=new Float32Array(_0x5bc471['length']);_0x228f2f===undefined&&(console['warn'](_0x365d32(0x4d2,0x53b)),_0x228f2f=Math['min'](..._0x5bc471));_0x4a9123===undefined&&(console[_0xe1c536(-0x237,-0x298)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x4a9123=Math[_0xe1c536(-0x17b,-0x154)](..._0x5bc471));function _0xe1c536(_0x5b8445,_0x5a01fe){return _0x57d5a5(_0x5a01fe,_0x5b8445- -0x5bd);}const _0xf7e25f=Math['max'](Math['abs'](_0x228f2f),Math['abs'](_0x4a9123));for(let _0x50a062=0x0;_0x50a062<_0x5bc471['length'];_0x50a062++){const _0x48987d=_0x5bc471[_0x50a062]/_0xf7e25f;_0x2b4e40[_0x50a062]=_0x48987d;}return _0x2b4e40;}['destroy'](){Object[_0x5d4bb6(0xae,0xe0)](this[_0x5d4bb6(0xe1,0x82)])['forEach'](_0x5866ec=>_0x5866ec['destroy']()),Object[_0x5d4bb6(0xae,0x6f)](this[_0x5d4bb6(0x9c,0xbd)])['forEach'](_0x66bd13=>_0x66bd13['destroy']());function _0x5d4bb6(_0x27c18f,_0x5831b9){return _0xba4d96(_0x27c18f- -0x2d7,_0x5831b9);}Object['values'](this[_0x14e6d7(-0x145,-0x115)])['forEach'](_0x5a2096=>_0x5a2096[_0x5d4bb6(0x8b,0xf2)]());function _0x14e6d7(_0x36b74e,_0x512c52){return _0xba4d96(_0x36b74e- -0x54f,_0x512c52);}this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0xba4d96(0x3a0,0x37d)];class WindParticlesRendering{constructor(_0x536306,_0x143d6a,_0x568329,_0x4fc8c4){this[_0x310273(0x4d3,0x558)]=_0x536306,this['options']=_0x143d6a,this[_0x315a86(-0x143,-0x1a7)]=_0x568329,this['computing']=_0x4fc8c4;function _0x315a86(_0x3ffc0c,_0x4cdbcf){return _0xba4d96(_0x3ffc0c- -0x531,_0x4cdbcf);}function _0x310273(_0x39576e,_0x30312e){return _0xba4d96(_0x39576e-0x1c0,_0x30312e);}(typeof this['options']['particlesTextureSize']!==_0x310273(0x55c,0x56f)||this['options']['particlesTextureSize']<=0x0)&&(console[_0x315a86(-0x1fc,-0x184)](_0x315a86(-0x1de,-0x1dc)),this['options']['particlesTextureSize']=0x100),this['colorTable']=this['createColorTableTexture'](),this[_0x310273(0x58b,0x5c3)]=this['createRenderingTextures'](),this['framebuffers']=this['createRenderingFramebuffers'](),this[_0x310273(0x5ca,0x5b9)]=this['createPrimitives']();}['createRenderingTextures'](){const _0x185e98={};_0x185e98[_0x272613(0xfa,0xff)]=this[_0x2af335(0x26d,0x293)];function _0x2af335(_0x1b3979,_0x1e3519){return _0xba4d96(_0x1b3979- -0xa6,_0x1e3519);}_0x185e98['width']=this['context'][_0x272613(0x173,0x15b)],_0x185e98[_0x2af335(0x347,0x316)]=this['context'][_0x2af335(0x2ee,0x342)],_0x185e98['pixelFormat']=PixelFormat['RGBA'],_0x185e98[_0x2af335(0x30c,0x2fe)]=PixelDatatype['UNSIGNED_BYTE'];const _0x20eb31=_0x185e98;function _0x272613(_0x24900e,_0x476e67){return _0x57d5a5(_0x476e67,_0x24900e- -0x244);}const _0x559f22={};_0x559f22[_0x272613(0xfa,0x11f)]=this['context'],_0x559f22[_0x272613(0x139,0xbc)]=this['context'][_0x2af335(0x2e6,0x2ab)],_0x559f22['height']=this[_0x272613(0xfa,0xfb)]['drawingBufferHeight'],_0x559f22['pixelFormat']=PixelFormat[_0x2af335(0x2d2,0x2ed)],_0x559f22['pixelDatatype']=PixelDatatype[_0x2af335(0x372,0x34c)];const _0x47120e=_0x559f22;return{'segmentsColor':new Texture(_0x20eb31),'segmentsDepth':new Texture(_0x47120e)};}['createRenderingFramebuffers'](){function _0x205a13(_0x152d04,_0x2171e4){return _0xba4d96(_0x152d04-0x218,_0x2171e4);}const _0x37348e={};function _0x357792(_0x4baebd,_0x350b5f){return _0x57d5a5(_0x4baebd,_0x350b5f- -0xcd);}return _0x37348e['context']=this[_0x205a13(0x52b,0x5a8)],_0x37348e[_0x205a13(0x563,0x4de)]=[this['textures'][_0x205a13(0x54b,0x4eb)]],_0x37348e['depthTexture']=this[_0x205a13(0x5e3,0x5b2)]['segmentsDepth'],{'segments':new Framebuffer(_0x37348e)};}[_0xba4d96(0x358,0x3e2)](){function _0x2c345b(_0x164d2d,_0xa1a6b2){return _0xba4d96(_0x164d2d- -0x3d9,_0xa1a6b2);}function _0x3365a3(_0x12f1dd,_0x519887){return _0x57d5a5(_0x519887,_0x12f1dd-0x181);}Object[_0x3365a3(0x531,0x54d)](this[_0x2c345b(-0x8,0x11)])['forEach'](_0x915849=>{function _0x789e6f(_0x33810d,_0x4cef9a){return _0x2c345b(_0x33810d-0x56d,_0x4cef9a);}_0x915849[_0x789e6f(0x4f6,0x471)]();});}['createColorTableTexture'](){const _0x237c6c=new Float32Array(this[_0x4bbc96(0x2a3,0x309)][_0x1b73ef(0x19e,0x18d)][_0x4bbc96(0x333,0x3b7)](_0x524648=>{const _0x4c8a09=Color$1['fromCssColorString'](_0x524648);return[_0x4c8a09['red'],_0x4c8a09['green'],_0x4c8a09['blue'],_0x4c8a09['alpha']];}));function _0x1b73ef(_0x3b9dcd,_0x51fb61){return _0x57d5a5(_0x51fb61,_0x3b9dcd- -0x280);}const _0x1238bb={};_0x1238bb[_0x1b73ef(0x165,0x166)]=TextureMinificationFilter[_0x1b73ef(0x194,0x1a6)],_0x1238bb[_0x4bbc96(0x2ff,0x2cd)]=TextureMagnificationFilter[_0x4bbc96(0x320,0x2ce)],_0x1238bb['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x1238bb['wrapT']=TextureWrap['CLAMP_TO_EDGE'];function _0x4bbc96(_0x5de605,_0x456d56){return _0x57d5a5(_0x456d56,_0x5de605- -0xf4);}return new Texture({'context':this[_0x4bbc96(0x24a,0x267)],'width':this['options']['colors']['length'],'height':0x1,'pixelFormat':PixelFormat[_0x4bbc96(0x2a0,0x31b)],'pixelDatatype':PixelDatatype[_0x4bbc96(0x31d,0x2dc)],'sampler':new Sampler(_0x1238bb),'source':{'width':this['options'][_0x1b73ef(0x19e,0x1dc)][_0x1b73ef(0x12d,0x1b0)],'height':0x1,'arrayBufferView':_0x237c6c}});}['createSegmentsGeometry'](){const _0x8772c8=0x4,_0x5a8cea=this[_0x2a806d(-0x15c,-0x10d)]['particlesTextureSize'];let _0x375661=[];for(let _0x5c4121=0x0;_0x5c4121<_0x5a8cea;_0x5c4121++){for(let _0x493659=0x0;_0x493659<_0x5a8cea;_0x493659++){for(let _0x40f8ed=0x0;_0x40f8ed<_0x8772c8;_0x40f8ed++){_0x375661[_0x2a806d(-0x179,-0x1f2)](_0x5c4121/_0x5a8cea),_0x375661[_0x2ab2f3(-0x149,-0x10a)](_0x493659/_0x5a8cea);}}}_0x375661=new Float32Array(_0x375661);const _0x575ce6=this['options']['particlesTextureSize']**0x2;let _0x4894fe=[];for(let _0x13865a=0x0;_0x13865a<_0x575ce6;_0x13865a++){_0x4894fe[_0x2a806d(-0x179,-0x10c)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x4894fe=new Float32Array(_0x4894fe);let _0x24793d=[];function _0x2ab2f3(_0x30b7fb,_0x3a07b1){return _0xba4d96(_0x3a07b1- -0x459,_0x30b7fb);}for(let _0x16f65a=0x0,_0x76911d=0x0;_0x16f65a<_0x575ce6;_0x16f65a++){_0x24793d['push'](_0x76911d+0x0,_0x76911d+0x1,_0x76911d+0x2,_0x76911d+0x2,_0x76911d+0x1,_0x76911d+0x3),_0x76911d+=_0x8772c8;}_0x24793d=new Uint32Array(_0x24793d);const _0x1ce5b4={};_0x1ce5b4['componentDatatype']=ComponentDatatype['FLOAT'];function _0x2a806d(_0x594f8d,_0x142458){return _0xba4d96(_0x594f8d- -0x4c8,_0x142458);}_0x1ce5b4[_0x2ab2f3(-0xc7,-0x59)]=0x2,_0x1ce5b4[_0x2ab2f3(-0x8e,-0xd4)]=_0x375661;const _0x257df7={};_0x257df7[_0x2ab2f3(-0x48,-0xa9)]=ComponentDatatype['FLOAT'],_0x257df7['componentsPerAttribute']=0x3,_0x257df7['values']=_0x4894fe;const _0x90501c=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x1ce5b4),'normal':new GeometryAttribute(_0x257df7)}),'indices':_0x24793d});return _0x90501c;}['createRawRenderState'](_0x80cda0){function _0x42ac3a(_0x1572f2,_0x3d414a){return _0xba4d96(_0x3d414a-0xa4,_0x1572f2);}const _0x331128={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x80cda0};return Appearance[_0x42ac3a(0x4ee,0x4b6)](!![],![],_0x331128);}['createPrimitives'](){const _0x2b17c6={};_0x2b17c6['st']=0x0,_0x2b17c6[_0x146718(0x24a,0x1c8)]=0x1;const _0x28dff7={};_0x28dff7[_0x535821(0x5bc,0x578)]=!![];const _0x5a7319={};_0x5a7319[_0x146718(0x260,0x1d6)]=!![],_0x5a7319[_0x146718(0x1a1,0x175)]=WebGLRenderingContext[_0x535821(0x5b4,0x5f7)],_0x5a7319[_0x535821(0x599,0x5ca)]=WebGLRenderingContext[_0x146718(0x140,0x151)],_0x5a7319['blendFuncDestination']=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];function _0x146718(_0x22c224,_0x18bdb3){return _0xba4d96(_0x18bdb3- -0x214,_0x22c224);}const _0x1b0dd2={};function _0x535821(_0x9f47fd,_0x371abe){return _0xba4d96(_0x9f47fd-0x1d2,_0x371abe);}_0x1b0dd2['viewport']=undefined,_0x1b0dd2[_0x535821(0x570,0x521)]=_0x28dff7,_0x1b0dd2['depthMask']=!![],_0x1b0dd2[_0x146718(0x15d,0x10b)]=_0x5a7319;const _0x490c62=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x2b17c6,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this[_0x535821(0x4f6,0x53e)][_0x146718(0x197,0x15f)][_0x535821(0x4f5,0x50d)],'currentParticlesPosition':()=>this['computing']['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this['computing']['particlesTextures'][_0x535821(0x593,0x516)],'particlesSpeed':()=>this['computing']['particlesTextures'][_0x146718(0x128,0x126)],'frameRateAdjustment':()=>this['computing'][_0x535821(0x5b5,0x5d4)],'colorTable':()=>this[_0x535821(0x5f1,0x575)],'domain':()=>{var _0x169585,_0x39f607;const _0x4f1b80=new Cartesian2(((_0x169585=this[_0x276be1(0x492,0x4ea)]['domain'])===null||_0x169585===void 0x0?void 0x0:_0x169585['min'])??this[_0x39c067(0x362,0x30e)][_0x276be1(0x51c,0x5a2)]['speed'][_0x39c067(0x3e3,0x3b9)],((_0x39f607=this[_0x276be1(0x523,0x4ea)][_0x276be1(0x50c,0x573)])===null||_0x39f607===void 0x0?void 0x0:_0x39f607[_0x276be1(0x5a0,0x595)])??this[_0x276be1(0x4de,0x4a2)][_0x276be1(0x5c4,0x5a2)][_0x276be1(0x54d,0x506)]['max']);function _0x276be1(_0x2d17b6,_0x4b4296){return _0x535821(_0x4b4296- -0x54,_0x2d17b6);}function _0x39c067(_0x395d08,_0x227147){return _0x535821(_0x227147- -0x1e8,_0x395d08);}return _0x4f1b80;},'displayRange':()=>{var _0x13c2d6,_0x1f15ee;function _0x1d9352(_0x3d7389,_0x1325d3){return _0x146718(_0x1325d3,_0x3d7389- -0xfc);}function _0x17c944(_0x5aaf77,_0x1dd726){return _0x535821(_0x1dd726- -0x152,_0x5aaf77);}const _0x2a2fc8=new Cartesian2(((_0x13c2d6=this['options']['displayRange'])===null||_0x13c2d6===void 0x0?void 0x0:_0x13c2d6['min'])??this['computing']['windData']['speed'][_0x17c944(0x3ea,0x44f)],((_0x1f15ee=this['options']['displayRange'])===null||_0x1f15ee===void 0x0?void 0x0:_0x1f15ee['max'])??this[_0x17c944(0x3cb,0x3a4)][_0x17c944(0x525,0x4a4)]['speed'][_0x1d9352(0x107,0x99)]);return _0x2a2fc8;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters'][_0x146718(0x220,0x205)],'lineWidth':()=>{const _0x35d946={};_0x35d946[_0xeea924(-0x155,-0x1d9)]=0x1;function _0xeea924(_0x2ffdc3,_0x3378a6){return _0x146718(_0x3378a6,_0x2ffdc3- -0x310);}_0x35d946[_0xeea924(-0x10d,-0x13a)]=0x2;const _0x487474=this[_0x2412bb(0x202,0x201)]['lineWidth']||_0x35d946;function _0x2412bb(_0x5a71c4,_0x50b8f9){return _0x146718(_0x5a71c4,_0x50b8f9-0xa9);}return new Cartesian2(_0x487474[_0x2412bb(0x217,0x264)],_0x487474[_0xeea924(-0x10d,-0x16f)]);},'lineLength':()=>{const _0x544dd9={};_0x544dd9[_0x12d214(0x1ff,0x281)]=0x14,_0x544dd9['max']=0x64;const _0x4f194c=this[_0x172f48(-0x154,-0x19a)]['lineLength']||_0x544dd9;function _0x172f48(_0x3bb93b,_0x44913b){return _0x535821(_0x3bb93b- -0x692,_0x44913b);}function _0x12d214(_0x5e5ab5,_0xf2c7c0){return _0x535821(_0x5e5ab5- -0x3a2,_0xf2c7c0);}return new Cartesian2(_0x4f194c[_0x12d214(0x1ff,0x211)],_0x4f194c[_0x12d214(0x247,0x2a4)]);},'is3D':()=>this['viewerParameters']['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures'][_0x535821(0x5f5,0x604)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x1b0dd2)}),_0x5a22af={};return _0x5a22af[_0x535821(0x556,0x595)]=_0x490c62,_0x5a22af;}[_0x57d5a5(0x4a1,0x425)](){const _0x2dddc9=this[_0x269d29(-0x104,-0x94)]();function _0x5ca0f9(_0x179cae,_0xa1d592){return _0x57d5a5(_0xa1d592,_0x179cae- -0x92);}this[_0x5ca0f9(0x3a3,0x3cd)]['segments'][_0x5ca0f9(0x345,0x365)]=_0x2dddc9;const _0x41d415={};_0x41d415['context']=this[_0x269d29(-0x136,-0x123)],_0x41d415[_0x5ca0f9(0x345,0x32b)]=_0x2dddc9;function _0x269d29(_0x598ad8,_0x59f478){return _0xba4d96(_0x59f478- -0x436,_0x598ad8);}_0x41d415['attributeLocations']=this[_0x5ca0f9(0x3a3,0x39b)][_0x269d29(-0x11f,-0xb2)]['attributeLocations'],_0x41d415['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x4c1bca=VertexArray[_0x5ca0f9(0x326,0x3ab)](_0x41d415);this[_0x269d29(-0x62,-0x2c)][_0x5ca0f9(0x31d,0x30c)]['commandToExecute']&&(this['primitives']['segments']['commandToExecute']['vertexArray']=_0x4c1bca);}['onColorTableChange'](){this['colorTable'][_0x53b7f9(0x3f3,0x3d1)]();function _0x53b7f9(_0x33d4ea,_0x5e7b1d){return _0xba4d96(_0x33d4ea-0x91,_0x5e7b1d);}this['colorTable']=this['createColorTableTexture']();}['updateOptions'](_0x1258bc){const _0x343ad7=_0x1258bc[_0x56752c(0x39e,0x320)]&&JSON[_0x46d99d(0xae,0x39)](_0x1258bc[_0x56752c(0x309,0x320)])!==JSON[_0x56752c(0x341,0x2fa)](this['options'][_0x46d99d(-0x10,0x5f)]);this['options']=deepMerge(_0x1258bc,this[_0x56752c(0x2f6,0x299)]);function _0x46d99d(_0x40406d,_0x59ff56){return _0xba4d96(_0x59ff56- -0x394,_0x40406d);}function _0x56752c(_0x398a08,_0x383400){return _0xba4d96(_0x383400- -0xd3,_0x398a08);}_0x343ad7&&this['onColorTableChange']();}[_0x57d5a5(0x317,0x38d)](){Object['values'](this[_0x33663e(0x1e1,0x204)])['forEach'](_0xf7c1f2=>{_0xf7c1f2['destroy']();}),Object['values'](this['primitives'])[_0x1f6746(0x2a7,0x2d2)](_0x1b0ab6=>{_0x1b0ab6['destroy']();});function _0x33663e(_0x15631c,_0xb34aa5){return _0x57d5a5(_0x15631c,_0xb34aa5- -0x1f8);}function _0x1f6746(_0x44b31b,_0x5734ea){return _0xba4d96(_0x5734ea- -0xab,_0x44b31b);}this['colorTable'][_0x33663e(0x133,0x195)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x1f7895,_0x1d0f07,_0x2bca3a,_0x50a0e9,_0x52fb9e){this[_0x7e2ee7(-0x22a,-0x242)]=_0x1f7895;function _0x3753b1(_0x5daace,_0x1d096c){return _0x57d5a5(_0x1d096c,_0x5daace- -0x20d);}this['options']=_0x2bca3a,this['viewerParameters']=_0x50a0e9,this['computing']=new WindParticlesComputing(_0x1f7895,_0x1d0f07,_0x2bca3a,_0x50a0e9,_0x52fb9e),this[_0x3753b1(0x1cd,0x1ff)]=new WindParticlesRendering(_0x1f7895,_0x2bca3a,_0x50a0e9,this['computing']);function _0x7e2ee7(_0x5db4f6,_0x2db542){return _0x57d5a5(_0x2db542,_0x5db4f6- -0x568);}this['clearFramebuffers']();}[_0xba4d96(0x36b,0x373)](){function _0x887397(_0x7ef224,_0x14840e){return _0xba4d96(_0x14840e- -0x56,_0x7ef224);}const _0x35f917=[this['computing'][_0x2a4eae(0x2c2,0x313)][_0x887397(0x2c2,0x2e7)],this['computing']['primitives']['updatePosition'],this['computing'][_0x887397(0x400,0x3b4)][_0x887397(0x3b7,0x36b)],this['rendering']['primitives']['segments']];function _0x2a4eae(_0xe189e0,_0x278e6d){return _0x57d5a5(_0xe189e0,_0x278e6d- -0x122);}return _0x35f917;}[_0xba4d96(0x35a,0x301)](){function _0x112498(_0x8eeb06,_0x5b312b){return _0xba4d96(_0x5b312b-0x67,_0x8eeb06);}const _0x1a1960=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x112498(0x411,0x477)]});function _0x20281e(_0x37c636,_0x456b2e){return _0x57d5a5(_0x37c636,_0x456b2e- -0x17c);}Object['keys'](this[_0x112498(0x408,0x416)]['framebuffers'])['forEach'](_0x221ba9=>{function _0x22d35b(_0x1a3a3c,_0x394baa){return _0x112498(_0x1a3a3c,_0x394baa-0x1aa);}_0x1a1960['framebuffer']=this['rendering'][_0x28b850(0x2ca,0x2eb)][_0x221ba9];function _0x28b850(_0x8d1d2d,_0x3d7e1d){return _0x112498(_0x3d7e1d,_0x8d1d2d- -0x16e);}_0x1a1960['execute'](this[_0x22d35b(0x56f,0x524)]);});}['changeOptions'](_0x181ced){function _0x4c8202(_0xb0eb60,_0x313b86){return _0x57d5a5(_0x313b86,_0xb0eb60- -0x53a);}let _0x21632f=![];function _0x116a57(_0x3d1079,_0x2cbdb4){return _0xba4d96(_0x2cbdb4- -0x569,_0x3d1079);}_0x181ced[_0x4c8202(-0x1e7,-0x233)]&&this[_0x116a57(-0x233,-0x1fd)]['particlesTextureSize']!==_0x181ced[_0x4c8202(-0x1e7,-0x253)]&&(_0x21632f=!![]);const _0x58007c=deepMerge(_0x181ced,this['options']);if(_0x58007c[_0x116a57(-0x1c9,-0x241)]<0x1)throw new Error(_0x116a57(-0x162,-0x1a0));this['options']=_0x58007c,this['rendering']['updateOptions'](_0x181ced),this['computing'][_0x4c8202(-0x1c1,-0x203)](_0x181ced),_0x21632f&&(this['computing']['destroyParticlesTextures'](),this['computing']['createParticlesTextures'](),this['rendering']['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0x486496){this['viewerParameters']=_0x486496;function _0x3e6100(_0x294495,_0x3c5d5a){return _0xba4d96(_0x294495- -0x440,_0x3c5d5a);}this[_0x3e6100(-0x11c,-0x118)]['viewerParameters']=_0x486496,this['rendering']['viewerParameters']=_0x486496;}[_0xba4d96(0x362,0x31f)](){function _0x34ee45(_0x538a41,_0x56a9fe){return _0xba4d96(_0x538a41- -0x418,_0x56a9fe);}this[_0x34ee45(-0xf4,-0xd7)]['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace[_0x57d5a5(0x3e9,0x3cb)],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x4629a9={};_0x4629a9[_0x57d5a5(0x45b,0x3fa)]=0x1,_0x4629a9['max']=0x2;const _0x290d4c={};_0x290d4c[_0xba4d96(0x3cf,0x361)]=0x14,_0x290d4c[_0xba4d96(0x417,0x499)]=0x64;const _0x170d11={};_0x170d11[_0x57d5a5(0x35a,0x353)]=0x64,_0x170d11[_0xba4d96(0x318,0x2f9)]=0x0,_0x170d11['lineWidth']=_0x4629a9,_0x170d11['lineLength']=_0x290d4c,_0x170d11['speedFactor']=0x1,_0x170d11['dropRate']=0.003,_0x170d11[_0xba4d96(0x3ad,0x424)]=0.001,_0x170d11['colors']=[_0xba4d96(0x406,0x386)];function _0x57d5a5(_0x5a9644,_0x3505ab){return _0x41ec(_0x3505ab-0x1f8,_0x5a9644);}_0x170d11[_0xba4d96(0x3f7,0x421)]=![],_0x170d11['dynamic']=!![];const DEF_OPTIONS=_0x170d11;class WindLayer extends BaseLayer$1{constructor(_0x479431={}){_0x479431={...DEF_OPTIONS,..._0x479431},super(_0x479431),this['_setOptionsHook'](_0x479431,_0x479431);}get['layer'](){function _0x1e54f5(_0xc1b6d8,_0x451fd5){return _0x57d5a5(_0xc1b6d8,_0x451fd5- -0x2d9);}return this[_0x1e54f5(0xe2,0x15c)];}get[_0xba4d96(0x3ab,0x390)](){function _0x149227(_0x17e672,_0x50beb5){return _0x57d5a5(_0x17e672,_0x50beb5- -0x2ee);}return this['options'][_0x149227(0x154,0xe8)];}set['data'](_0x3d29e4){this[_0x3a3f15(0x279,0x213)][_0x16e1ec(0x3a1,0x370)]=_0x3d29e4;function _0x16e1ec(_0x9b1822,_0x32b5d0){return _0x57d5a5(_0x9b1822,_0x32b5d0- -0x66);}function _0x3a3f15(_0x2a42b8,_0x48f5f0){return _0xba4d96(_0x48f5f0- -0x159,_0x2a42b8);}this['setData'](_0x3d29e4);}get['colors'](){return this['options']['colors'];}set[_0x57d5a5(0x49d,0x41e)](_0x1c8455){this['options']['colors']=_0x1c8455;function _0x195ea8(_0x945e6e,_0x15cfb9){return _0xba4d96(_0x15cfb9- -0x24e,_0x945e6e);}function _0x3e32f5(_0xddda64,_0x410deb){return _0xba4d96(_0x410deb- -0x52c,_0xddda64);}const _0x43a861={};_0x43a861['colors']=_0x1c8455,this[_0x195ea8(0x1e0,0x1aa)](this[_0x3e32f5(-0x1e0,-0x1c0)],_0x43a861);}['_showHook'](_0x5747a8){_0x5747a8?this['_addedHook']():this['_removedHook']();}['_mountedHook'](){}['_addedHook'](){function _0x21da3d(_0x23ed23,_0x24cb22){return _0x57d5a5(_0x23ed23,_0x24cb22- -0x411);}this['scene']=this['_map']['scene'],this['camera']=this['_map']['camera'];this['options'][_0x1f2808(0xe2,0x14a)]&&this['setData'](this['options']['data']);if(!this[_0x1f2808(0x1ed,0x1c3)]||!this[_0x1f2808(0x80,0x106)])return;this['viewerParameters']={'lonRange':new Cesium$1[(_0x1f2808(0x1b2,0x142))](-0xb4,0xb4),'latRange':new Cesium$1[(_0x1f2808(0x12e,0x142))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']};function _0x1f2808(_0x378880,_0x1e7f18){return _0x57d5a5(_0x378880,_0x1e7f18- -0x28c);}this['updateViewerParameters'](),this['particleSystem']=new WindParticleSystem(this['scene']['context'],this[_0x1f2808(0x1e2,0x1c3)],this['options'],this['viewerParameters'],this['scene']),this['primitives']=this[_0x1f2808(0x12c,0x129)]['getPrimitives'](),this['primitives'][_0x21da3d(-0x2c,-0x69)](_0x5a0448=>{function _0x1a2b40(_0x2ccd6a,_0x1653dc){return _0x1f2808(_0x1653dc,_0x2ccd6a-0x169);}function _0x92a033(_0x49f5cd,_0x41236b){return _0x1f2808(_0x41236b,_0x49f5cd-0x338);}this[_0x92a033(0x4de,0x525)][_0x92a033(0x4e1,0x53b)]['add'](_0x5a0448);}),this['camera'][_0x21da3d(-0x101,-0xc1)]=0.01,this['camera'][_0x21da3d(0x11,0x36)]['addEventListener'](this[_0x21da3d(-0x7f,-0x80)][_0x1f2808(0x1a3,0x184)](this)),this['scene']['morphComplete']['addEventListener'](this['updateViewerParameters']['bind'](this)),window[_0x21da3d(0x40,0x30)]('resize',this['updateViewerParameters']['bind'](this));}['_removedHook'](){this['camera']['changed']['removeEventListener'](this['updateViewerParameters']['bind'](this));function _0x4bbcc2(_0x298877,_0x1d8a19){return _0x57d5a5(_0x1d8a19,_0x298877- -0x56f);}this[_0x4bbcc2(-0x13d,-0xec)][_0x4979fa(0x54f,0x589)]['removeEventListener'](this['updateViewerParameters']['bind'](this));function _0x4979fa(_0x11ec77,_0x8d6eb3){return _0xba4d96(_0x11ec77-0x151,_0x8d6eb3);}window['removeEventListener']('resize',this[_0x4979fa(0x4b7,0x4b5)]['bind'](this)),this['primitives']&&(this['primitives']['forEach'](_0x3cb51a=>{function _0x2d0246(_0x5491ef,_0x469a22){return _0x4979fa(_0x5491ef- -0x17d,_0x469a22);}this[_0x2d0246(0x3db,0x3c0)]['primitives']['remove'](_0x3cb51a);}),delete this[_0x4bbcc2(-0x13a,-0x139)]),this['particleSystem']&&(this[_0x4979fa(0x4db,0x46b)][_0x4979fa(0x4b3,0x4e5)](),delete this[_0x4979fa(0x4db,0x4d2)]);}[_0xba4d96(0x339,0x35e)](_0x39a67d,_0x5ec1af){this['windData']=this[_0x38e471(0x4bb,0x490)](_0x39a67d);function _0x18a231(_0x46c65c,_0x37da85){return _0xba4d96(_0x46c65c-0x7,_0x37da85);}if(_0x5ec1af){this[_0x18a231(0x3c9,0x3be)](),this[_0x38e471(0x4a2,0x48a)]();return;}function _0x38e471(_0x429c77,_0x4ba994){return _0x57d5a5(_0x4ba994,_0x429c77-0xf1);}this[_0x38e471(0x4a6,0x491)]?(this[_0x38e471(0x4a6,0x436)][_0x38e471(0x440,0x491)]['updateWindData'](this[_0x18a231(0x42b,0x3e8)]),this[_0x18a231(0x40e,0x476)][_0x18a231(0x364,0x3b9)]()):this['_addedHook']();}['_setOptionsHook'](_0x100de1,_0x1564bd){function _0x3185c7(_0x167dd8,_0x347055){return _0x57d5a5(_0x167dd8,_0x347055- -0x3ed);}function _0x49c8e8(_0x66b3b4,_0x3a334d){return _0x57d5a5(_0x3a334d,_0x66b3b4-0x14a);}this[_0x49c8e8(0x4ff,0x510)]&&(this[_0x49c8e8(0x4ff,0x547)]['changeOptions'](_0x1564bd),this[_0x49c8e8(0x57c,0x5ea)]['requestRender']());}['processWindData'](_0x19eaed){function _0xaefc89(_0x54ebfb,_0xed178){return _0x57d5a5(_0x54ebfb,_0xed178- -0xd7);}function _0x54b96e(_0x57e838,_0x18b1d1){return _0x57d5a5(_0x57e838,_0x18b1d1- -0xda);}var _0x167867,_0x1f08af;const _0x1a47e7={..._0x19eaed},_0x584e89=_0x1a47e7;!_0x584e89['height']&&_0x584e89['rows']&&(_0x584e89['height']=_0x584e89[_0x54b96e(0x2e0,0x27c)]);!_0x584e89['width']&&_0x584e89['cols']&&(_0x584e89[_0xaefc89(0x255,0x2a6)]=_0x584e89[_0xaefc89(0x265,0x292)]);!_0x584e89[_0xaefc89(0x394,0x326)]&&(_0x584e89[_0x54b96e(0x349,0x323)]={'west':_0x584e89[_0x54b96e(0x37e,0x321)],'south':_0x584e89['ymin'],'east':_0x584e89['xmax'],'north':_0x584e89['ymax']});if(!_0x584e89['u']){const _0x3dd766={};_0x3dd766[_0x54b96e(0x2ed,0x2d1)]=_0x19eaed[_0xaefc89(0x291,0x283)],_0x3dd766[_0xaefc89(0x306,0x323)]=_0x19eaed[_0x54b96e(0x241,0x2ad)],_0x3dd766[_0xaefc89(0x392,0x36b)]=_0x19eaed[_0xaefc89(0x374,0x34d)],_0x584e89['u']=_0x3dd766;}if(!_0x584e89['v']){const _0x5c5395={};_0x5c5395['array']=_0x19eaed[_0xaefc89(0x281,0x2a0)],_0x5c5395[_0x54b96e(0x2a6,0x320)]=_0x19eaed['vmin'],_0x5c5395[_0x54b96e(0x3c6,0x368)]=_0x19eaed[_0x54b96e(0x342,0x2f7)],_0x584e89['v']=_0x5c5395;}if(((_0x167867=_0x584e89['speed'])===null||_0x167867===void 0x0?void 0x0:_0x167867[_0xaefc89(0x2ec,0x323)])===undefined||((_0x1f08af=_0x584e89['speed'])===null||_0x1f08af===void 0x0?void 0x0:_0x1f08af['max'])===undefined||_0x584e89['speed'][_0xaefc89(0x32b,0x2d4)]===undefined){const _0x4c8079={'array':new Float32Array(_0x584e89['u']['array']['length']),'min':Number['MAX_VALUE'],'max':Number['MIN_VALUE']};for(let _0x90a074=0x0;_0x90a074<_0x584e89['u']['array']['length'];_0x90a074++){_0x4c8079[_0x54b96e(0x28e,0x2d1)][_0x90a074]=Math[_0x54b96e(0x2ef,0x324)](_0x584e89['u'][_0xaefc89(0x2a3,0x2d4)][_0x90a074]*_0x584e89['u']['array'][_0x90a074]+_0x584e89['v']['array'][_0x90a074]*_0x584e89['v']['array'][_0x90a074]),_0x4c8079['array'][_0x90a074]!==0x0&&(_0x4c8079['min']=Math['min'](_0x4c8079['min'],_0x4c8079[_0xaefc89(0x30d,0x2d4)][_0x90a074]),_0x4c8079['max']=Math['max'](_0x4c8079[_0x54b96e(0x3e3,0x368)],_0x4c8079['array'][_0x90a074]));}_0x584e89[_0xaefc89(0x2f7,0x2dc)]=_0x4c8079;}return _0x584e89;}[_0xba4d96(0x366,0x2e3)](){var _0x2934ed;const _0x4e4f2b=this['scene'];if(!_0x4e4f2b)return;const _0x3f15d1=_0x4e4f2b['canvas'],_0x139344={};_0x139344['x']=0x0,_0x139344['y']=0x0;const _0x20affb={};_0x20affb['x']=0x0,_0x20affb['y']=_0x3f15d1[_0x44e604(0x430,0x3c6)];const _0x6b9a55={};_0x6b9a55['x']=_0x3f15d1[_0x44e604(0x441,0x4bc)],_0x6b9a55['y']=0x0;const _0x545a08={};_0x545a08['x']=_0x3f15d1['clientWidth'],_0x545a08['y']=_0x3f15d1[_0x5ea745(0x431,0x3b5)];const _0x1fe95c=[_0x139344,_0x20affb,_0x6b9a55,_0x545a08];let _0x5c42f5=0xb4;function _0x5ea745(_0x3e827e,_0x595c0a){return _0x57d5a5(_0x3e827e,_0x595c0a-0x31);}function _0x44e604(_0x53583a,_0x54ab81){return _0xba4d96(_0x53583a-0xd7,_0x54ab81);}let _0x4b02a6=-0xb4,_0xe21cd1=0x5a,_0x43009e=-0x5a,_0x566353=![];for(const _0x4f8406 of _0x1fe95c){const _0x10c80b=_0x4e4f2b['camera']['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x4f8406['x'],_0x4f8406['y']),_0x4e4f2b['globe'][_0x44e604(0x46e,0x3fe)]);if(!_0x10c80b){_0x566353=!![];break;}const _0x2469b9=_0x4e4f2b[_0x44e604(0x4b2,0x46f)][_0x44e604(0x46e,0x4df)]['cartesianToCartographic'](_0x10c80b),_0x8701a5=Cesium$1['Math'][_0x5ea745(0x473,0x44d)](_0x2469b9['longitude']),_0x16c1d9=Cesium$1['Math']['toDegrees'](_0x2469b9['latitude']);_0x5c42f5=Math[_0x5ea745(0x3cb,0x42b)](_0x5c42f5,_0x8701a5),_0x4b02a6=Math[_0x44e604(0x4ee,0x54b)](_0x4b02a6,_0x8701a5),_0xe21cd1=Math['min'](_0xe21cd1,_0x16c1d9),_0x43009e=Math[_0x44e604(0x4ee,0x56c)](_0x43009e,_0x16c1d9);}if(!_0x566353){const _0x159f65=new Cesium$1['Cartesian2'](Math[_0x5ea745(0x466,0x473)](this[_0x5ea745(0x507,0x480)][_0x44e604(0x4a9,0x45e)]['west'],_0x5c42f5),Math[_0x44e604(0x4a6,0x46e)](this['windData']['bounds']['east'],_0x4b02a6)),_0x218d1f=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds'][_0x5ea745(0x411,0x3ed)],_0xe21cd1),Math[_0x5ea745(0x491,0x42b)](this[_0x44e604(0x4fb,0x505)]['bounds'][_0x5ea745(0x484,0x421)],_0x43009e)),_0xa69d9e=(_0x159f65['y']-_0x159f65['x'])*0.05,_0x3e78b1=(_0x218d1f['y']-_0x218d1f['x'])*0.05;_0x159f65['x']=Math[_0x44e604(0x4ee,0x4e3)](this[_0x5ea745(0x4c6,0x480)]['bounds'][_0x44e604(0x436,0x4bc)],_0x159f65['x']-_0xa69d9e),_0x159f65['y']=Math[_0x44e604(0x4a6,0x4b4)](this['windData']['bounds']['east'],_0x159f65['y']+_0xa69d9e),_0x218d1f['x']=Math[_0x44e604(0x4ee,0x4bc)](this[_0x44e604(0x4fb,0x570)]['bounds'][_0x44e604(0x468,0x446)],_0x218d1f['x']-_0x3e78b1),_0x218d1f['y']=Math['min'](this['windData'][_0x5ea745(0x468,0x42e)]['north'],_0x218d1f['y']+_0x3e78b1),this['viewerParameters'][_0x5ea745(0x400,0x3d2)]=_0x159f65,this['viewerParameters']['latRange']=_0x218d1f;const _0x2e0ca6=this['windData'][_0x5ea745(0x492,0x42e)]['east']-this['windData']['bounds'][_0x44e604(0x436,0x446)],_0x15be18=this['windData'][_0x44e604(0x4a9,0x4e3)]['north']-this['windData']['bounds'][_0x44e604(0x468,0x3eb)],_0x1ab803=(_0x159f65['y']-_0x159f65['x'])/_0x2e0ca6,_0xf0bbbc=(_0x218d1f['y']-_0x218d1f['x'])/_0x15be18,_0x417730=Math[_0x44e604(0x4a6,0x48d)](_0x1ab803,_0xf0bbbc),_0x5dbd9b=0x3e8*_0x417730;_0x5dbd9b>0x0&&(this['viewerParameters']['pixelSize']=Math[_0x44e604(0x4ee,0x515)](0x0,Math['min'](0x3e8,_0x5dbd9b)));}this[_0x44e604(0x4c5,0x495)][_0x5ea745(0x4cb,0x46b)]=this['scene'][_0x5ea745(0x358,0x3b1)],(_0x2934ed=this['particleSystem'])===null||_0x2934ed===void 0x0||_0x2934ed['applyViewerParameters'](this['viewerParameters']);}[_0x57d5a5(0x43b,0x3e4)](_0x17483,_0x3d3cc3){const {bounds:_0x391d12,width:_0xa31b14,height:_0x26e13b,u:_0x39e277,v:_0x342d04,speed:_0x5acd57}=this['windData'],{flipY:_0x45a920}=this['options'];if(_0x17483<_0x391d12['west']||_0x17483>_0x391d12['east']||_0x3d3cc3<_0x391d12[_0x956791(0x166,0x130)]||_0x3d3cc3>_0x391d12['north'])return null;const _0x448943=(_0x17483-_0x391d12['west'])/(_0x391d12[_0x956791(0x149,0x1c2)]-_0x391d12[_0x956791(0x134,0x18f)])*(_0xa31b14-0x1);let _0x4028c4=(_0x3d3cc3-_0x391d12['south'])/(_0x391d12['north']-_0x391d12[_0x2c0512(0xfa,0x8e)])*(_0x26e13b-0x1);_0x45a920&&(_0x4028c4=_0x26e13b-0x1-_0x4028c4);const _0x3b51c6=Math[_0x2c0512(0x94,0x92)](_0x448943),_0x132ed8=Math['floor'](_0x4028c4),_0x253d86=Math[_0x956791(0x16a,0xeb)](_0x448943),_0x1cd6a7=Math['min'](_0x253d86+0x1,_0xa31b14-0x1),_0x383c6a=Math['floor'](_0x4028c4),_0x41c7bc=Math['min'](_0x383c6a+0x1,_0x26e13b-0x1),_0x1fbb35=_0x448943-_0x253d86,_0x5c2cf8=_0x4028c4-_0x383c6a,_0x66c3fc=_0x132ed8*_0xa31b14+_0x3b51c6,_0x4d056b=_0x383c6a*_0xa31b14+_0x253d86,_0x33f0b0=_0x383c6a*_0xa31b14+_0x1cd6a7,_0x180df4=_0x41c7bc*_0xa31b14+_0x253d86;function _0x956791(_0x2b0389,_0x152556){return _0xba4d96(_0x2b0389- -0x22b,_0x152556);}const _0x5e3100=_0x41c7bc*_0xa31b14+_0x1cd6a7,_0xfa16b=_0x39e277[_0x2c0512(0x87,0x7d)][_0x4d056b],_0x392d6f=_0x39e277['array'][_0x33f0b0],_0x4568f7=_0x39e277[_0x2c0512(0xb1,0x7d)][_0x180df4],_0x249ba7=_0x39e277['array'][_0x5e3100],_0x383439=(0x1-_0x1fbb35)*(0x1-_0x5c2cf8)*_0xfa16b+_0x1fbb35*(0x1-_0x5c2cf8)*_0x392d6f+(0x1-_0x1fbb35)*_0x5c2cf8*_0x4568f7+_0x1fbb35*_0x5c2cf8*_0x249ba7,_0x2b134b=_0x342d04['array'][_0x4d056b],_0x17d73f=_0x342d04['array'][_0x33f0b0],_0x2f28f5=_0x342d04[_0x2c0512(0x106,0x7d)][_0x180df4],_0x4a6907=_0x342d04['array'][_0x5e3100],_0x131032=(0x1-_0x1fbb35)*(0x1-_0x5c2cf8)*_0x2b134b+_0x1fbb35*(0x1-_0x5c2cf8)*_0x17d73f+(0x1-_0x1fbb35)*_0x5c2cf8*_0x2f28f5+_0x1fbb35*_0x5c2cf8*_0x4a6907,_0x40db31=Math['sqrt'](_0x383439*_0x383439+_0x131032*_0x131032),_0xae699b={};_0xae699b['u']=_0x39e277['array'][_0x66c3fc];function _0x2c0512(_0x5a5517,_0x5bb71d){return _0xba4d96(_0x5bb71d- -0x303,_0x5a5517);}_0xae699b['v']=_0x342d04[_0x956791(0x155,0xe5)][_0x66c3fc],_0xae699b[_0x956791(0x15d,0x16d)]=_0x5acd57[_0x956791(0x155,0xcb)][_0x66c3fc];const _0x2663c3={};_0x2663c3['u']=_0x383439,_0x2663c3['v']=_0x131032,_0x2663c3['speed']=_0x40db31;const _0x4a3bbc={};return _0x4a3bbc['original']=_0xae699b,_0x4a3bbc['interpolated']=_0x2663c3,_0x4a3bbc;}}mars3d__namespace['LayerUtil']['register']('wind',WindLayer),mars3d__namespace['layer'][_0x57d5a5(0x383,0x34b)]=WindLayer;class CanvasParticle{constructor(){this[_0x5f0f42(0x220,0x291)]=null,this[_0x22922f(-0x170,-0xeb)]=null;function _0x5f0f42(_0x2845c1,_0x5c410c){return _0x57d5a5(_0x5c410c,_0x2845c1- -0x20d);}this[_0x5f0f42(0x1cf,0x214)]=null,this['tlat']=null;function _0x22922f(_0x3543ff,_0x306372){return _0x57d5a5(_0x306372,_0x3543ff- -0x57b);}this['age']=null,this['speed']=null;}['destroy'](){for(const _0x2458b3 in this){delete this[_0x2458b3];}}}class CanvasWindField{constructor(_0x15e214){this['setOptions'](_0x15e214);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x59d193){function _0x555661(_0x464758,_0x5a6d95){return _0x57d5a5(_0x464758,_0x5a6d95-0x11f);}this['_speedRate']=(0x64-(_0x59d193>0x63?0x63:_0x59d193))*0x64,this['_calc_speedRate']=[(this['xmax']-this['xmin'])/this['_speedRate'],(this['ymax']-this['ymin'])/this[_0x555661(0x529,0x4ba)]];}get['maxAge'](){function _0x517bc0(_0x4cc3cd,_0x438c19){return _0x57d5a5(_0x4cc3cd,_0x438c19- -0x3de);}return this[_0x517bc0(-0xc1,-0x6d)];}set['maxAge'](_0x1d45c4){function _0x201f23(_0x140f6d,_0xaa78a1){return _0x57d5a5(_0xaa78a1,_0x140f6d- -0x1fe);}this[_0x201f23(0x173,0x1a4)]=_0x1d45c4;}[_0x57d5a5(0x3df,0x35d)](_0x23e6b5){function _0x432f8e(_0x5d3c45,_0x2f7ac4){return _0x57d5a5(_0x2f7ac4,_0x5d3c45-0x131);}this[_0x154fa6(0x4a8,0x4d4)]=_0x23e6b5;function _0x154fa6(_0x336ac4,_0x554ea8){return _0xba4d96(_0x336ac4-0x13c,_0x554ea8);}this[_0x432f8e(0x565,0x553)]=_0x23e6b5['maxAge']||0x78,this[_0x154fa6(0x4d5,0x470)]=_0x23e6b5[_0x154fa6(0x4d5,0x4fe)]||0x32,this['particles']=[];const _0x22bb73=_0x23e6b5['particlesNumber']||0x1000;for(let _0x18f2ec=0x0;_0x18f2ec<_0x22bb73;_0x18f2ec++){const _0x26f4c9=this[_0x432f8e(0x54e,0x5d5)](new CanvasParticle());this['particles'][_0x154fa6(0x48b,0x4da)](_0x26f4c9);}}[_0x57d5a5(0x474,0x3ff)](_0x1d2c82){this['rows']=_0x1d2c82[_0x5301d6(0x62,-0xd)],this['cols']=_0x1d2c82[_0x282e58(0x3e,0x22)];function _0x282e58(_0x18b009,_0x1f4df6){return _0xba4d96(_0x1f4df6- -0x31c,_0x18b009);}this[_0x282e58(0x2c,0xb4)]=_0x1d2c82[_0x5301d6(0x107,0x174)],this[_0x5301d6(0x97,0x66)]=_0x1d2c82[_0x5301d6(0x97,0x93)],this['ymin']=_0x1d2c82[_0x5301d6(0x72,0xd)],this[_0x282e58(0x72,0x77)]=_0x1d2c82['ymax'],this['grid']=[];const _0x4ddd65=_0x1d2c82['udata'],_0x5e3fb0=_0x1d2c82[_0x5301d6(0x83,0x8e)];let _0x4ef3b8=![];_0x4ddd65['length']===this[_0x5301d6(0x62,0x3)]&&_0x4ddd65[0x0]['length']===this[_0x282e58(0x65,0x22)]&&(_0x4ef3b8=!![]);function _0x5301d6(_0x1a36b5,_0x3acc68){return _0x57d5a5(_0x3acc68,_0x1a36b5- -0x2f4);}let _0x423a23=0x0,_0x19383d=null,_0x66fa0e=null;for(let _0x3b0af3=0x0;_0x3b0af3<this[_0x5301d6(0x62,-0x12)];_0x3b0af3++){_0x19383d=[];for(let _0x6744f9=0x0;_0x6744f9<this[_0x282e58(0x22,0x22)];_0x6744f9++,_0x423a23++){_0x4ef3b8?_0x66fa0e=this['_calcUV'](_0x4ddd65[_0x3b0af3][_0x6744f9],_0x5e3fb0[_0x3b0af3][_0x6744f9]):_0x66fa0e=this['_calcUV'](_0x4ddd65[_0x423a23],_0x5e3fb0[_0x423a23]),_0x19383d['push'](_0x66fa0e);}this[_0x5301d6(0x13b,0x123)]['push'](_0x19383d);}!this[_0x5301d6(0xa3,0xb5)][_0x5301d6(0x12e,0x11a)]&&this['grid']['reverse']();}[_0xba4d96(0x3d8,0x448)](){delete this['rows'],delete this['cols'];function _0x3ca178(_0x46ebfc,_0x12f106){return _0xba4d96(_0x12f106- -0x3a2,_0x46ebfc);}delete this[_0x3ca178(0x15,0x2e)],delete this['xmax'],delete this[_0x1dd56b(-0x2c,-0xae)];function _0x1dd56b(_0xb999ca,_0x1ba89a){return _0xba4d96(_0x1ba89a- -0x3e9,_0xb999ca);}delete this['ymax'],delete this['grid'],delete this['particles'];}['toGridXY'](_0x4fe80e,_0x11f720){const _0x5bbae7=(_0x4fe80e-this['xmin'])/(this['xmax']-this['xmin'])*(this[_0x12180a(0x29b,0x2e1)]-0x1),_0xf5f4aa=(this['ymax']-_0x11f720)/(this['ymax']-this['ymin'])*(this['rows']-0x1);function _0x12180a(_0x4b8eeb,_0x3958e7){return _0xba4d96(_0x3958e7- -0x5d,_0x4b8eeb);}return[_0x5bbae7,_0xf5f4aa];}['getUVByXY'](_0x5c71ab,_0x3c6dff){if(_0x5c71ab<0x0||_0x5c71ab>=this['cols']||_0x3c6dff>=this[_0x3cff00(-0x1f6,-0x1cd)])return[0x0,0x0,0x0];function _0x3cff00(_0x323c80,_0x16f51d){return _0xba4d96(_0x16f51d- -0x4f8,_0x323c80);}const _0x2e9e02=Math['floor'](_0x5c71ab),_0x57e89e=Math['floor'](_0x3c6dff);function _0x3cc517(_0x1e0d5d,_0x35252b){return _0xba4d96(_0x1e0d5d- -0x4bc,_0x35252b);}if(_0x2e9e02===_0x5c71ab&&_0x57e89e===_0x3c6dff)return this['grid'][_0x3c6dff][_0x5c71ab];const _0x2244de=_0x2e9e02+0x1,_0x1b9fad=_0x57e89e+0x1,_0x2d8d12=this['getUVByXY'](_0x2e9e02,_0x57e89e),_0x196cae=this[_0x3cff00(-0x101,-0x13a)](_0x2244de,_0x57e89e),_0x5be275=this['getUVByXY'](_0x2e9e02,_0x1b9fad),_0x1f1d8e=this['getUVByXY'](_0x2244de,_0x1b9fad);let _0x462252=null;try{_0x462252=this[_0x3cff00(-0x1b9,-0x1a1)](_0x5c71ab-_0x2e9e02,_0x3c6dff-_0x57e89e,_0x2d8d12,_0x196cae,_0x5be275,_0x1f1d8e);}catch(_0x292a1b){console['log'](_0x5c71ab,_0x3c6dff);}return _0x462252;}['_bilinearInterpolation'](_0x577eaa,_0x39996f,_0x332045,_0xc1ec8a,_0x1b0ead,_0x52db6d){const _0x335a53=0x1-_0x577eaa,_0x424a75=0x1-_0x39996f,_0x23f225=_0x335a53*_0x424a75,_0xea96a1=_0x577eaa*_0x424a75,_0x25f0be=_0x335a53*_0x39996f,_0x51ec20=_0x577eaa*_0x39996f,_0x2bae40=_0x332045[0x0]*_0x23f225+_0xc1ec8a[0x0]*_0xea96a1+_0x1b0ead[0x0]*_0x25f0be+_0x52db6d[0x0]*_0x51ec20,_0x504772=_0x332045[0x1]*_0x23f225+_0xc1ec8a[0x1]*_0xea96a1+_0x1b0ead[0x1]*_0x25f0be+_0x52db6d[0x1]*_0x51ec20;return this['_calcUV'](_0x2bae40,_0x504772);}['_calcUV'](_0x5b0e8e,_0x11f200){return[+_0x5b0e8e,+_0x11f200,Math['sqrt'](_0x5b0e8e*_0x5b0e8e+_0x11f200*_0x11f200)];}[_0x57d5a5(0x389,0x367)](_0x1df800,_0x1d47f0){if(!this['isInExtent'](_0x1df800,_0x1d47f0))return null;const _0x24ad0c=this['toGridXY'](_0x1df800,_0x1d47f0),_0x5ad315=this['getUVByXY'](_0x24ad0c[0x0],_0x24ad0c[0x1]);return _0x5ad315;}['isInExtent'](_0x4b8ce1,_0x3fb695){function _0x3de9a2(_0x1ea7f1,_0xc6420b){return _0x57d5a5(_0xc6420b,_0x1ea7f1- -0x43);}function _0x2b19ea(_0x26ee22,_0x4e38af){return _0x57d5a5(_0x4e38af,_0x26ee22-0x1a6);}return _0x4b8ce1>=this[_0x2b19ea(0x5a1,0x543)]&&_0x4b8ce1<=this[_0x3de9a2(0x348,0x393)]&&_0x3fb695>=this[_0x3de9a2(0x323,0x2f7)]&&_0x3fb695<=this['ymax']?!![]:![];}['getRandomLatLng'](){function _0x39a7e0(_0x43c1a2,_0x28223d){return _0xba4d96(_0x28223d-0x19d,_0x43c1a2);}const _0x50aed0=fRandomByfloat(this['xmin'],this['xmax']),_0x45f3fb=fRandomByfloat(this['ymin'],this[_0x47f3ba(0x496,0x4ea)]),_0x2f21ea={};_0x2f21ea['lat']=_0x45f3fb;function _0x47f3ba(_0x54d9a1,_0x156807){return _0xba4d96(_0x156807-0x157,_0x54d9a1);}return _0x2f21ea[_0x39a7e0(0x53d,0x59f)]=_0x50aed0,_0x2f21ea;}['getParticles'](){function _0x3c2901(_0x2cf05f,_0xcaca7){return _0x57d5a5(_0x2cf05f,_0xcaca7-0x1f);}let _0x4bb8f8,_0x15ce30,_0x181363;function _0x559e71(_0x2fae33,_0x229c3d){return _0xba4d96(_0x229c3d- -0x4f,_0x2fae33);}for(let _0x4c1852=0x0,_0x1a9373=this['particles']['length'];_0x4c1852<_0x1a9373;_0x4c1852++){let _0x4a3940=this['particles'][_0x4c1852];_0x4a3940['age']<=0x0&&(_0x4a3940=this[_0x3c2901(0x4a9,0x43c)](_0x4a3940));if(_0x4a3940['age']>0x0){const _0x58812a=_0x4a3940[_0x559e71(0x306,0x362)],_0xd620c2=_0x4a3940[_0x559e71(0x33f,0x2de)];_0x181363=this[_0x559e71(0x2f6,0x2ed)](_0x58812a,_0xd620c2),_0x181363?(_0x4bb8f8=_0x58812a+this['_calc_speedRate'][0x0]*_0x181363[0x0],_0x15ce30=_0xd620c2+this[_0x559e71(0x418,0x3a7)][0x1]*_0x181363[0x1],_0x4a3940['lng']=_0x58812a,_0x4a3940['lat']=_0xd620c2,_0x4a3940['tlng']=_0x4bb8f8,_0x4a3940['tlat']=_0x15ce30,_0x4a3940['speed']=_0x181363[0x2],_0x4a3940['age']--):_0x4a3940['age']=0x0;}}return this[_0x559e71(0x385,0x31e)];}[_0x57d5a5(0x39c,0x41d)](_0x11fee6){let _0x4d0d8b,_0x4761ee;for(let _0xe36a73=0x0;_0xe36a73<0x1e;_0xe36a73++){_0x4d0d8b=this[_0x7c9c3b(0x5ee,0x60a)](),_0x4761ee=this['getUVByPoint'](_0x4d0d8b['lng'],_0x4d0d8b['lat']);if(_0x4761ee&&_0x4761ee[0x2]>0x0)break;}if(!_0x4761ee)return _0x11fee6;const _0x49c695=_0x4d0d8b['lng']+this['_calc_speedRate'][0x0]*_0x4761ee[0x0],_0x121c2a=_0x4d0d8b['lat']+this['_calc_speedRate'][0x1]*_0x4761ee[0x1];_0x11fee6['lng']=_0x4d0d8b['lng'],_0x11fee6['lat']=_0x4d0d8b['lat'];function _0x10947b(_0x4a94bd,_0x4997b1){return _0x57d5a5(_0x4997b1,_0x4a94bd- -0x343);}_0x11fee6['tlng']=_0x49c695,_0x11fee6[_0x7c9c3b(0x4db,0x536)]=_0x121c2a;function _0x7c9c3b(_0x4fc1e1,_0x42ae5a){return _0x57d5a5(_0x4fc1e1,_0x42ae5a-0x1de);}return _0x11fee6['age']=Math[_0x10947b(0x69,0x10)](0xa+Math['random']()*this[_0x10947b(0xf1,0x6c)]),_0x11fee6['speed']=_0x4761ee[0x2],_0x11fee6;}['destroy'](){for(const _0x28144c in this){delete this[_0x28144c];}}}function fRandomByfloat(_0x375061,_0x447b29){function _0x11d36e(_0x481ed8,_0x3d1d61){return _0x57d5a5(_0x481ed8,_0x3d1d61- -0x387);}return _0x375061+Math[_0x11d36e(0x82,0xa9)]()*(_0x447b29-_0x375061);}const Cesium=mars3d__namespace[_0x57d5a5(0x3f9,0x3cb)],BaseLayer=mars3d__namespace['layer'][_0x57d5a5(0x329,0x342)];function _0x41ec(_0x2d2bc3,_0x1eea45){const _0x4e3a0c=_0x4e3a();return _0x41ec=function(_0x41ec3c,_0xfc95a2){_0x41ec3c=_0x41ec3c-0x146;let _0x23b23a=_0x4e3a0c[_0x41ec3c];return _0x23b23a;},_0x41ec(_0x2d2bc3,_0x1eea45);}class CanvasWindLayer extends BaseLayer{constructor(_0x836591={}){super(_0x836591),this['_setOptionsHook'](_0x836591),this['canvas']=null;function _0x54892e(_0x21446a,_0x28df8d){return _0x57d5a5(_0x28df8d,_0x21446a- -0x6);}_0x836591['colors']&&_0x836591['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0x54892e(0x389,0x356))](_0x836591));}[_0x57d5a5(0x3dd,0x423)](_0x54170b,_0x4f665a){this[_0x6241c7(0x12a,0x163)]=0x3e8/(_0x54170b['frameRate']||0xa),this['_pointerEvents']=this['options'][_0x6241c7(0xef,0xd2)]??![],this[_0x6241c7(0xa1,0xb4)]=_0x54170b['color']||'#ffffff',this[_0x6241c7(0x16d,0xfe)]=_0x54170b[_0x6241c7(0x7e,0xfe)]||0x1,this[_0x2172ca(-0x18d,-0x208)]=_0x54170b[_0x6241c7(0x18,0x7c)]??0x0;function _0x6241c7(_0x4c1b4e,_0x153fb8){return _0xba4d96(_0x153fb8- -0x29c,_0x4c1b4e);}this['flipY']=_0x54170b['flipY']??![];function _0x2172ca(_0x139d6b,_0x4c8833){return _0x57d5a5(_0x139d6b,_0x4c8833- -0x54b);}this['windField']&&this['windField'][_0x6241c7(0xcd,0x96)](_0x54170b);}get[_0x57d5a5(0x39f,0x36d)](){return this['canvas'];}get['canvasWidth'](){function _0x3399de(_0x52db02,_0x2741b4){return _0xba4d96(_0x2741b4- -0x16,_0x52db02);}function _0x2f3872(_0x4f2b36,_0x2e8102){return _0xba4d96(_0x2e8102- -0x14b,_0x4f2b36);}return this['_map'][_0x2f3872(0x27a,0x2bc)][_0x3399de(0x310,0x37a)]['clientWidth'];}get[_0xba4d96(0x341,0x38f)](){return this['_map']['scene']['canvas']['clientHeight'];}get['pointerEvents'](){function _0x2f1816(_0x51c666,_0x3da730){return _0xba4d96(_0x3da730- -0x232,_0x51c666);}return this[_0x2f1816(0x1ed,0x19a)];}set['pointerEvents'](_0xd96105){function _0x2ac455(_0x8a3d49,_0x3174f2){return _0x57d5a5(_0x3174f2,_0x8a3d49-0x168);}this[_0x2ac455(0x55f,0x5c7)]=_0xd96105;if(!this['canvas'])return;function _0x354232(_0x141c34,_0x19a483){return _0xba4d96(_0x19a483- -0xdf,_0x141c34);}_0xd96105?this['canvas'][_0x2ac455(0x546,0x4f7)]['pointer-events']='all':this['canvas']['style']['pointer-events']='none';}get[_0x57d5a5(0x3de,0x3d3)](){function _0x2ce171(_0x10dba8,_0x926a70){return _0x57d5a5(_0x10dba8,_0x926a70- -0x313);}return this[_0x2ce171(0x5f,0x84)]['particlesNumber'];}set[_0x57d5a5(0x3f3,0x3d3)](_0x4b5744){function _0x5af7de(_0x547e8e,_0x160fe1){return _0xba4d96(_0x160fe1- -0x44f,_0x547e8e);}this['options'][_0x26a43d(0x17f,0x1ab)]=_0x4b5744;function _0x26a43d(_0x22fb31,_0x26f2bc){return _0xba4d96(_0x22fb31- -0x229,_0x26f2bc);}clearTimeout(this['_canrefresh']),this[_0x26a43d(0x1b4,0x1a0)]=setTimeout(()=>{function _0x385db0(_0x4a5d2f,_0x5de725){return _0x26a43d(_0x4a5d2f-0x3e5,_0x5de725);}this[_0x385db0(0x5c7,0x5ea)]();},0x1f4);}get['speedRate'](){return this['options']['speedRate'];}set[_0xba4d96(0x399,0x3dd)](_0x410dd9){function _0x2d8351(_0x3d3438,_0x2aa294){return _0x57d5a5(_0x3d3438,_0x2aa294- -0x45b);}this['options']['speedRate']=_0x410dd9;function _0x39dda1(_0x2b0f8f,_0x202b2b){return _0xba4d96(_0x2b0f8f- -0x279,_0x202b2b);}this[_0x2d8351(-0xcc,-0x45)]&&(this[_0x39dda1(0x172,0x13b)]['speedRate']=_0x410dd9);}get['maxAge'](){return this['options']['maxAge'];}set['maxAge'](_0x1ce0c4){this['options']['maxAge']=_0x1ce0c4;function _0x3696f9(_0x1a5732,_0x53a885){return _0x57d5a5(_0x53a885,_0x1a5732- -0x2fb);}this['windField']&&(this[_0x3696f9(0x11b,0x169)]['maxAge']=_0x1ce0c4);}get['data'](){function _0x36857b(_0x3d0e93,_0x509b67){return _0x57d5a5(_0x3d0e93,_0x509b67- -0x511);}return this[_0x36857b(-0xfa,-0xc2)];}set['data'](_0x52817c){function _0x25b2ba(_0x55a913,_0x13f831){return _0x57d5a5(_0x13f831,_0x55a913- -0x565);}this[_0x25b2ba(-0x201,-0x1f4)](_0x52817c);}get[_0xba4d96(0x315,0x333)](){let _0x7aebbc=this[_0x158517(0x140,0x1b2)]['xmin'];function _0x158517(_0x77d79,_0x55fa0f){return _0x57d5a5(_0x77d79,_0x55fa0f- -0x29d);}let _0x562c31=this[_0x158517(0x140,0x1b2)][_0x158517(0x141,0xee)],_0x3211a3=this[_0x150b81(0x5d,0x41)]['ymin'],_0x38c1ae=this['windData']['ymax'];_0x562c31>=0x167&&_0x7aebbc===0x0&&(_0x7aebbc=-0xb4,_0x562c31=0xb4);_0x7aebbc=Math['max'](_0x7aebbc,-0xb4),_0x562c31=Math['min'](_0x562c31,0xb4);function _0x150b81(_0x1582c9,_0x1784bd){return _0xba4d96(_0x1582c9- -0x3c7,_0x1784bd);}return _0x3211a3=Math['max'](_0x3211a3,-0x5a),_0x38c1ae=Math['min'](_0x38c1ae,0x5a),Cesium[_0x158517(0xa5,0x10a)]['fromDegrees'](_0x7aebbc,_0x3211a3,_0x562c31,_0x38c1ae);}['_showHook'](_0x12d849){function _0x439f78(_0x313843,_0x1e5542){return _0xba4d96(_0x313843-0x65,_0x1e5542);}function _0x21e924(_0x78bba0,_0x359d04){return _0x57d5a5(_0x359d04,_0x78bba0- -0x49f);}_0x12d849?this[_0x21e924(-0xee,-0x8c)]():(this['windData']&&(this[_0x439f78(0x3d1,0x3f8)]['data']=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0x572db3(_0x57cad7,_0x2921ff){return _0x57d5a5(_0x57cad7,_0x2921ff-0x9c);}function _0x2195fa(_0x5aef59,_0x126ac1){return _0x57d5a5(_0x126ac1,_0x5aef59- -0x383);}this[_0x572db3(0x3e9,0x433)]['worker']?this['initWorker']():this['windField']=new CanvasWindField(this[_0x572db3(0x468,0x433)]);}['_addedHook'](){this['canvas']=this['_createCanvas']();function _0x5b8c81(_0x54264a,_0xf41efb){return _0xba4d96(_0x54264a- -0x54f,_0xf41efb);}const _0x8cb0e2={};_0x8cb0e2['willReadFrequently']=!![],this['canvasContext']=this['canvas']['getContext']('2d',_0x8cb0e2),this['bindEvent']();function _0x32a486(_0x5b0349,_0x59a054){return _0xba4d96(_0x59a054- -0x3d6,_0x5b0349);}this[_0x5b8c81(-0x1e3,-0x17b)]['data']&&this['setData'](this['options'][_0x32a486(-0x89,-0x2b)]);}['_removedHook'](){this['clear']();function _0x12fa0e(_0x363ef4,_0x33b89e){return _0xba4d96(_0x33b89e- -0x3f9,_0x363ef4);}function _0x424947(_0x10acf8,_0x188b40){return _0x57d5a5(_0x188b40,_0x10acf8-0xa6);}this['unbindEvent'](),this[_0x424947(0x461,0x463)]&&(this['_map']['container']['removeChild'](this[_0x424947(0x461,0x4e9)]),delete this['canvas']);}['_createCanvas'](){const _0x2a31da=mars3d__namespace['DomUtil']['create']('canvas','mars3d-canvasWind',this['_map']['container']);_0x2a31da['style']['position']='absolute',_0x2a31da['style']['top']='0px',_0x2a31da['style'][_0x5a864a(0x56b,0x5d8)]='0px',_0x2a31da[_0x3a7237(0x419,0x3d4)]['width']=this[_0x3a7237(0x3b2,0x335)][_0x3a7237(0x3f5,0x428)]['canvas'][_0x3a7237(0x3ba,0x38b)]+'px',_0x2a31da['style'][_0x3a7237(0x3dc,0x40e)]=this['_map'][_0x3a7237(0x430,0x428)]['canvas']['clientHeight']+'px',_0x2a31da['style']['pointerEvents']=this['_pointerEvents']?_0x3a7237(0x4b8,0x443):_0x3a7237(0x3e3,0x3f8),_0x2a31da['style'][_0x3a7237(0x3cc,0x3fb)]=this['options'][_0x3a7237(0x3c0,0x3fb)]??0x9,_0x2a31da[_0x3a7237(0x32b,0x373)]=this['_map']['scene']['canvas']['clientWidth'];function _0x5a864a(_0x51095d,_0x4c8a9e){return _0xba4d96(_0x51095d-0x20d,_0x4c8a9e);}function _0x3a7237(_0x37b7bf,_0x264442){return _0xba4d96(_0x264442-0x21,_0x37b7bf);}return _0x2a31da[_0x5a864a(0x5fa,0x599)]=this[_0x3a7237(0x36d,0x335)]['scene'][_0x5a864a(0x59d,0x581)][_0x3a7237(0x398,0x37a)],_0x2a31da;}['resize'](){function _0x37e27c(_0x7538b4,_0x34123b){return _0x57d5a5(_0x34123b,_0x7538b4-0x3d);}function _0x1f9ee8(_0x2e82a4,_0x24cb96){return _0xba4d96(_0x2e82a4-0x20d,_0x24cb96);}this[_0x1f9ee8(0x59d,0x5b2)]&&(this['canvas']['style'][_0x37e27c(0x3ba,0x353)]=this[_0x37e27c(0x37c,0x38a)][_0x37e27c(0x46f,0x3ed)]['canvas'][_0x1f9ee8(0x577,0x579)]+'px',this[_0x1f9ee8(0x59d,0x562)]['style'][_0x37e27c(0x455,0x4a7)]=this['_map']['scene'][_0x37e27c(0x3f8,0x40c)][_0x37e27c(0x3c1,0x438)]+'px',this[_0x1f9ee8(0x59d,0x54c)][_0x1f9ee8(0x55f,0x575)]=this[_0x1f9ee8(0x521,0x550)]['scene']['canvas']['clientWidth'],this['canvas'][_0x1f9ee8(0x5fa,0x654)]=this['_map']['scene']['canvas'][_0x1f9ee8(0x566,0x5d0)]);}[_0xba4d96(0x3aa,0x3ff)](){const _0x2339d8=this;let _0x4fd335=Date['now']();(function _0x53126b(){if(_0x2339d8[_0xb055(0x337,0x349)])return;function _0xb055(_0x5a7abe,_0x9f7a30){return _0x41ec(_0x9f7a30-0x1ed,_0x5a7abe);}_0x2339d8[_0x2d4107(0x31c,0x292)]=window[_0xb055(0x3c2,0x371)](_0x53126b);function _0x2d4107(_0x53d976,_0x1f48f1){return _0x41ec(_0x1f48f1-0x77,_0x53d976);}if(_0x2339d8[_0x2d4107(0x213,0x211)]&&_0x2339d8['windField']){const _0x16af6d=Date[_0x2d4107(0x29e,0x2cb)](),_0x4bb401=_0x16af6d-_0x4fd335;_0x4bb401>_0x2339d8['frameTime']&&(_0x4fd335=_0x16af6d-_0x4bb401%_0x2339d8['frameTime'],_0x2339d8[_0xb055(0x3e9,0x3a3)]());}}());function _0x2c4cb4(_0x4a2245,_0x3aad8a){return _0xba4d96(_0x3aad8a-0x127,_0x4a2245);}window[_0x2c4cb4(0x541,0x53d)]('resize',this['resize']['bind'](this),![]);function _0x58f04e(_0x586d98,_0x56f375){return _0x57d5a5(_0x586d98,_0x56f375- -0x31c);}this['mouse_down']=![],this[_0x58f04e(0xae,0xfb)]=![],this[_0x58f04e(0x99,0x7b)][_0x2c4cb4(0x573,0x538)]&&(this['_map']['on'](mars3d__namespace[_0x2c4cb4(0x4c7,0x4e2)]['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x58f04e(0xae,0x5c)],this),this[_0x58f04e(0x3d,0x23)]['on'](mars3d__namespace[_0x58f04e(0x47,0xca)]['mouseUp'],this['_onMouseUpEvent'],this));}[_0xba4d96(0x375,0x3e9)](){window['cancelAnimationFrame'](this['_animateFrame']),delete this['_animateFrame'],window[_0x513d18(-0x92,-0x38)](_0x355d76(-0xad,-0x7b),this['resize']);function _0x355d76(_0x4c11b3,_0x1d4d7f){return _0x57d5a5(_0x1d4d7f,_0x4c11b3- -0x49e);}function _0x513d18(_0x4d7a2e,_0x5697d5){return _0xba4d96(_0x5697d5- -0x428,_0x4d7a2e);}this[_0x513d18(-0x102,-0xbc)]['mouseHidden']&&(this['_map']['off'](mars3d__namespace[_0x355d76(-0xb8,-0x57)]['wheel'],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['mouseDown'],this[_0x355d76(-0x126,-0x187)],this),this['_map']['off'](mars3d__namespace['EventType']['mouseUp'],this[_0x513d18(0x1,-0x73)],this),this[_0x355d76(-0x15f,-0x147)][_0x513d18(-0xc1,-0x47)](mars3d__namespace['EventType']['mouseMove'],this[_0x355d76(-0x157,-0x147)],this));}['_onMapWhellEvent'](_0x5daba1){function _0x4e4d68(_0x16f5bc,_0x4ec944){return _0xba4d96(_0x16f5bc- -0x51c,_0x4ec944);}clearTimeout(this[_0x56f3d8(0x3d2,0x3b5)]);if(!this[_0x56f3d8(0x320,0x359)]||!this[_0x4e4d68(-0x18c,-0x116)])return;function _0x56f3d8(_0x286490,_0xdef13c){return _0x57d5a5(_0x286490,_0xdef13c- -0x39);}this['canvas'][_0x56f3d8(0x31c,0x3a5)]['visibility']='hidden',this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;this['redraw'](),this['canvas']['style']['visibility']='visible';},0xc8);}['_onMouseDownEvent'](_0x9e7be4){function _0x193091(_0x446db1,_0x3de5d2){return _0x57d5a5(_0x446db1,_0x3de5d2- -0x4ab);}function _0x5b9d79(_0x381028,_0x39fd54){return _0xba4d96(_0x39fd54-0xea,_0x381028);}this['mouse_down']=!![],this[_0x193091(-0x12c,-0x16c)]['off'](mars3d__namespace[_0x193091(-0xcd,-0xc5)][_0x5b9d79(0x478,0x421)],this[_0x5b9d79(0x43b,0x406)],this),this['_map']['on'](mars3d__namespace[_0x193091(-0xcf,-0xc5)]['mouseMove'],this[_0x5b9d79(0x389,0x406)],this);}[_0xba4d96(0x31c,0x2e3)](_0xcf7f2d){function _0x2073a5(_0x17e6c3,_0x44c90e){return _0x57d5a5(_0x44c90e,_0x17e6c3- -0x11b);}if(!this[_0x2073a5(0x277,0x27f)]||!this['canvas'])return;function _0x446fe8(_0x7829c4,_0x1bf74b){return _0x57d5a5(_0x7829c4,_0x1bf74b- -0x517);}this[_0x446fe8(-0x166,-0x11e)]&&(this['canvas'][_0x446fe8(-0x141,-0x139)]['visibility']='hidden',this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x2d91a2){if(!this['show']||!this['canvas'])return;this[_0x48e811(0x1f7,0x21d)]['off'](mars3d__namespace['EventType'][_0x48e811(0x21a,0x240)],this['_onMouseMoveEvent'],this);function _0x558ec9(_0x534fb4,_0x2abe71){return _0xba4d96(_0x2abe71-0x1eb,_0x534fb4);}this[_0x48e811(0x35d,0x2d7)]&&this[_0x48e811(0x26b,0x2f5)]&&this[_0x558ec9(0x63b,0x5f6)]();function _0x48e811(_0x4fc3b4,_0x5597f5){return _0xba4d96(_0x5597f5- -0xf7,_0x4fc3b4);}this['canvas'][_0x558ec9(0x527,0x59e)]['visibility']=_0x558ec9(0x4e9,0x54e),this['mouse_down']=![],this['mouse_move']=![];}['setData'](_0x55cafd){function _0x5df20f(_0x278e20,_0x52f763){return _0x57d5a5(_0x278e20,_0x52f763- -0x3b4);}function _0x374759(_0x25d456,_0x171d7c){return _0xba4d96(_0x171d7c- -0x400,_0x25d456);}this[_0x5df20f(0x9,0x4f)](),this['windData']=_0x55cafd,this['windField']['setDate'](_0x55cafd),this[_0x374759(-0x72,0xb)]();}['redraw'](){if(!this['show'])return;this[_0x31c65f(0x515,0x4f4)]['setOptions'](this['options']);function _0x231076(_0xcd620b,_0xac8582){return _0x57d5a5(_0xcd620b,_0xac8582- -0x5b9);}function _0x31c65f(_0x4907cd,_0x41c176){return _0xba4d96(_0x4907cd-0x12a,_0x41c176);}this[_0x231076(-0x243,-0x20b)]();}['update'](){function _0x3570f8(_0xc01619,_0x1fef75){return _0xba4d96(_0x1fef75- -0x270,_0xc01619);}if(this['_updateIng'])return;this[_0x208e44(0x8c,0x6d)]=!![];if(this[_0x3570f8(0x12c,0xd5)])this['windField'][_0x208e44(0x5b,-0x29)]();else{const _0x16d970=this['windField'][_0x3570f8(0x19d,0x169)]();this['_drawLines'](_0x16d970);}function _0x208e44(_0x467aeb,_0x4bde47){return _0x57d5a5(_0x4bde47,_0x467aeb- -0x353);}this['_updateIng']=![];}['_drawLines'](_0x59c487){function _0x1b2659(_0x3c77f1,_0x2a4f17){return _0x57d5a5(_0x2a4f17,_0x3c77f1- -0x450);}this['_canvasParticles']=_0x59c487,this['canvasContext'][_0x1b2659(-0xf9,-0xf9)]=_0x1b2659(-0xdc,-0x138),this['canvasContext'][_0x1b2659(-0x10c,-0x169)](0x0,0x0,this[_0x1b2659(-0x10b,-0x16f)],this[_0x1b2659(-0xe4,-0x131)]),this[_0x1b2659(-0xe6,-0xa0)]['globalCompositeOperation']='lighter',this['canvasContext']['globalAlpha']=0.9;const _0x339fea=this['_map'][_0x1b2659(-0x1e,0x39)][_0x1baeb1(-0x14a,-0x19b)]!==Cesium[_0x1baeb1(-0x15f,-0xd5)]['SCENE3D'];function _0x1baeb1(_0x3ba106,_0x21ed1f){return _0xba4d96(_0x3ba106- -0x49f,_0x21ed1f);}const _0x30650f=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x440ed7=0x0,_0x306759=_0x59c487['length'];_0x440ed7<_0x306759;_0x440ed7++){const _0x4aee0e=_0x59c487[_0x440ed7],_0x2cea51=this['_tomap'](_0x4aee0e,_0x4aee0e['lng'],_0x4aee0e[_0x1baeb1(-0xbf,-0xb5)],_0x4aee0e[_0x1b2659(-0x7e,-0xeb)]),_0xc465ee=this['_tomap'](_0x4aee0e,_0x4aee0e['tlng'],_0x4aee0e[_0x1baeb1(-0x172,-0x1e5)],_0x4aee0e['talt']);if(!_0x2cea51||!_0xc465ee)continue;if(_0x339fea&&Math['abs'](_0x2cea51[0x0]-_0xc465ee[0x0])>=_0x30650f)continue;this[_0x1b2659(-0xe6,-0x123)]['beginPath'](),this['canvasContext'][_0x1baeb1(-0x105,-0x140)]=this['lineWidth'],this[_0x1baeb1(-0x160,-0x1ca)]['strokeStyle']=this[_0x1b2659(-0xd1,-0xee)][_0x1b2659(-0x10,-0x2c)](_0x4aee0e['speed']),this['canvasContext'][_0x1b2659(-0x88,-0x88)](_0x2cea51[0x0],_0x2cea51[0x1]),this[_0x1b2659(-0xe6,-0x101)][_0x1b2659(-0x10a,-0xe9)](_0xc465ee[0x0],_0xc465ee[0x1]),this[_0x1baeb1(-0x160,-0xef)]['stroke']();}else{this[_0x1baeb1(-0x160,-0xdc)]['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this[_0x1b2659(-0xe6,-0x75)]['strokeStyle']=this['color'];for(let _0x536f55=0x0,_0x581645=_0x59c487['length'];_0x536f55<_0x581645;_0x536f55++){const _0x3a6bbb=_0x59c487[_0x536f55],_0x284e2f=this[_0x1b2659(-0xa,-0x75)](_0x3a6bbb,_0x3a6bbb['lng'],_0x3a6bbb[_0x1baeb1(-0xbf,-0x135)],_0x3a6bbb[_0x1baeb1(-0xf8,-0x136)]),_0x1b7bc3=this['_tomap'](_0x3a6bbb,_0x3a6bbb[_0x1b2659(-0x74,-0x53)],_0x3a6bbb[_0x1b2659(-0xf8,-0xaf)],_0x3a6bbb['talt']);if(!_0x284e2f||!_0x1b7bc3)continue;if(_0x339fea&&Math[_0x1b2659(-0xab,-0x38)](_0x284e2f[0x0]-_0x1b7bc3[0x0])>=_0x30650f)continue;this['canvasContext']['moveTo'](_0x284e2f[0x0],_0x284e2f[0x1]),this[_0x1b2659(-0xe6,-0x6b)]['lineTo'](_0x1b7bc3[0x0],_0x1b7bc3[0x1]);}this['canvasContext'][_0x1b2659(-0xed,-0xd5)]();}}['_tomap'](_0x2e5c5a,_0x520bf1,_0x326d6e,_0x814958){function _0x445e43(_0x4ea942,_0x3a4a53){return _0xba4d96(_0x3a4a53- -0x2c5,_0x4ea942);}const _0x45422e=Cesium[_0x58f949(0x34b,0x386)][_0x445e43(0x125,0xdc)](_0x520bf1,_0x326d6e,_0x814958??this[_0x58f949(0x320,0x33a)]);function _0x58f949(_0x21764a,_0x568dd1){return _0x57d5a5(_0x568dd1,_0x21764a- -0x23);}const _0x3c1d86=this[_0x58f949(0x31c,0x352)]['scene'];if(_0x3c1d86['mode']===Cesium['SceneMode'][_0x58f949(0x370,0x378)]){const _0x37af06=new Cesium[(_0x445e43(0xd1,0xb9))](_0x3c1d86[_0x445e43(0xd5,0x116)][_0x58f949(0x39f,0x428)],_0x3c1d86[_0x445e43(0xcf,0xaa)][_0x58f949(0x3ef,0x3b9)]),_0x2fe426=_0x37af06['isPointVisible'](_0x45422e);if(!_0x2fe426)return _0x2e5c5a['age']=0x0,null;}const _0x3da20c=mars3d__namespace['PointTrans']['toWindowCoordinates'](this[_0x58f949(0x31c,0x326)]['scene'],_0x45422e);return _0x3da20c?[_0x3da20c['x'],_0x3da20c['y']]:null;}['clear'](){this[_0x318ac4(0x388,0x3b1)]['clear']();function _0x318ac4(_0x557d28,_0x53418c){return _0x57d5a5(_0x53418c,_0x557d28- -0x8e);}delete this['windData'];}[_0xba4d96(0x322,0x298)](){function _0x2f54f3(_0x391433,_0x1b77af){return _0x57d5a5(_0x391433,_0x1b77af- -0x28c);}this[_0x2f54f3(0xdf,0xe4)]=new Worker(this['options']['worker']),this['worker'][_0x3b97d9(0x275,0x20b)]=_0x12c433=>{function _0x2fd8df(_0x39fde1,_0x2a686d){return _0x2f54f3(_0x2a686d,_0x39fde1- -0xd9);}function _0x445186(_0x381baf,_0x5838a0){return _0x2f54f3(_0x381baf,_0x5838a0- -0x280);}this[_0x2fd8df(-0x6,-0x1)](_0x12c433['data'][_0x445186(-0x1b5,-0x174)]),this[_0x2fd8df(0xda,0x9d)]=![];},this[_0x3b97d9(0x2a4,0x28f)]={'init':_0x8302af=>{function _0x3ce2d5(_0x38910b,_0x2767a7){return _0x3b97d9(_0x38910b- -0x3f8,_0x2767a7);}const _0x551455={};_0x551455['type']=_0x2a7c56(0x364,0x391),_0x551455[_0x3ce2d5(-0x1d3,-0x199)]=_0x8302af;function _0x2a7c56(_0x57754a,_0x275d48){return _0x2f54f3(_0x275d48,_0x57754a-0x264);}this[_0x3ce2d5(-0x1fa,-0x271)][_0x3ce2d5(-0x125,-0xca)](_0x551455);},'setOptions':_0x4bf124=>{const _0x2c751c={};_0x2c751c['type']='setOptions';function _0x50a9ab(_0x4f049f,_0x3101e5){return _0x2f54f3(_0x3101e5,_0x4f049f-0x436);}_0x2c751c['options']=_0x4bf124,this['worker'][_0x50a9ab(0x5ef,0x630)](_0x2c751c);},'setDate':_0x34b901=>{const _0x173146={};_0x173146[_0x6872c9(0x2cc,0x2b6)]=_0x5e7987(0x3b4,0x32f),_0x173146['data']=_0x34b901;function _0x5e7987(_0x2d0309,_0x501f46){return _0x3b97d9(_0x2d0309-0x127,_0x501f46);}function _0x6872c9(_0x2e1049,_0x2b3df1){return _0x3b97d9(_0x2e1049-0xe3,_0x2b3df1);}this['worker'][_0x6872c9(0x3b6,0x371)](_0x173146);},'update':()=>{if(this[_0x579b6a(-0x18d,-0x118)])return;this['_updateIng2']=!![];const _0x4d4a4f={};_0x4d4a4f['type']='update';function _0x579b6a(_0x31197c,_0x25bb73){return _0x2f54f3(_0x31197c,_0x25bb73- -0x2cb);}function _0xc3e716(_0x39ee1b,_0x4efdc3){return _0x3b97d9(_0x39ee1b- -0x1d9,_0x4efdc3);}this[_0x579b6a(-0x22b,-0x1e7)]['postMessage'](_0x4d4a4f);},'clear':()=>{function _0x1cb4ca(_0x1aad65,_0x11e906){return _0x3b97d9(_0x1aad65-0xaa,_0x11e906);}const _0x2b2821={};_0x2b2821[_0x1cb4ca(0x293,0x2f7)]=_0x4f4138(0x215,0x256);function _0x4f4138(_0x382c4b,_0x36b2d8){return _0x3b97d9(_0x382c4b- -0x7c,_0x36b2d8);}this['worker']['postMessage'](_0x2b2821);}};function _0x3b97d9(_0x5b2da3,_0x1e606c){return _0x57d5a5(_0x1e606c,_0x5b2da3- -0x172);}this[_0x2f54f3(0x1dc,0x18a)]['init'](this[_0x2f54f3(0x137,0x10b)]);}}mars3d__namespace[_0xba4d96(0x3ae,0x33e)]['register']('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x57d5a5(0x3dc,0x35c)]=CanvasWindField,mars3d__namespace['Log']['logInfo']('mars3d-wind插件\x20注册成功'),mars3d__namespace[_0xba4d96(0x3fd,0x429)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;function _0x4e3a(){const _0x2e39c8=['camera','_speedRate','setGeometry','autoClear','particlesTextures','east','unbindEvent','lonRange','STATIC_DRAW','DEPTH_COMPONENT','4976091MmHMQJ','abs','lastFramesPerSecond','Rectangle','forEach','EllipsoidalOccluder','sin','array','round','length','update','segments','values','_addedHook','attributeLocations','speed','blendEquation','particleSystem','frameRate','drawingBufferWidth','fromGeometry','sources','6ykAIMu','canvas','south','getUpdatePositionShader','ymax','drawingBufferHeight','floor','rawRenderState','ellipsoid','uniformMap','speedRate','lineWidth','cos','number','moveTo','depthTest','processWindData','Cesium','fromDegrees','createSegmentsGeometry','Cartesian2','nextParticlesPosition','870132zkDMnr','vmax','alt','particlesNumber','commandToExecute','bindEvent','data','geometry','dropRateBump','LayerUtil','rendering','componentDatatype','tlng','pixelDatatype','style','_updateIng','_onMouseUpEvent','getSegmentDrawFragmentShader','min\x20is\x20undefined,\x20calculate\x20min','windTextures','getDataAtLonLat','minificationFilter','EventType','onmessage','isArray','getUVByXY','vertexArray','keys','postProcessingPosition','_removedHook','refreshTimer','shaderProgram','north','resize','blendFuncSource','magnificationFilter','particlesTextureSize\x20must\x20be\x20greater\x20than\x200','7231TijSlS','textures','_pointerEvents','stringify','mouse_down','min','xmin','framebuffers','bounds','sqrt','setDate','getV','__esModule','none','clear','getParticles','zIndex','globe','normal','_canrefresh','createComputingPrimitives','dynamic','lat','off','FUNC_ADD','frameRateAdjustment','createParticlesTextures','bind','FLOAT','positionWC','_animateFrame','LINEAR','enabled','windField','mouse_move','height','viewerParameters','default','removeEventListener','toDegrees','_randomParticle','colors','getPostProcessingPositionShader','domain','_calc_speedRate','flipY','_setOptionsHook','umax','onParticlesTextureSizeChange','8561450pFMBJz','flatMap','WindUtil','morphComplete','frameTime','componentsPerAttribute','getRandomLatLng','lng','atan2','grid','random','rgb(206,255,255)','scene','commandType','maxAge','primitives','redraw','vertexShaderSource','clearCommand','reCreateWindTextures','sceneMode','OPAQUE','mouseHidden','getDefaultRenderState','outputTexture','_updateIng2','getColor','addEventListener','max','UNSIGNED_INT','pixelSize','postMessage','_tomap','changed','createWindTextures','8795344FqJGil','colorTable','framebuffer','now','auto','segmentsDepth','windData','IDENTITY','call','context','_map','rectangle','10418653WlTiAV','BaseLayer','fixedHeight','fillRect','canvasWidth','lineTo','_onMouseMoveEvent','getU','RED','blending','WindLayer','pass','initWorker','previousParticlesPosition','computing','percentageChanged','1516748exzoHH','Compute','particlesTextureSize','isDestroy','persists','rows','globalCompositeOperation','tlat','22dWREKI','udata','type','CanvasWindField','setOptions','segmentsColor','_drawLines','error','currentParticlesPosition','mouseMove','stroke','setData','particlesSpeed','ymin','getUVByPoint','calculateSpeed','cols','canvasContext','SceneMode','canvasHeight','layer','Cartesian3','fragmentShaderSource','worker','_maxAge','frameRateMonitor','slice','destination-in','fill','colorTextures','vdata','_onMouseDownEvent','updateOptions','push','color','requestAnimationFrame','width','Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.','_colorRamp','mode','isDynamic','_bilinearInterpolation','destoryRenderingFramebuffers','clientHeight','clearFramebuffers','warn','umin','requestRender','left','west','xmax','init','destroy','visible','ColorRamp','SRC_ALPHA','updateViewerParameters','show','SCENE3D','RGBA','clientWidth','getPrimitives','options','particles','pointerEvents'];_0x4e3a=function(){return _0x2e39c8;};return _0x4e3a();}const _0x443713={};_0x443713['value']=!![],Object['defineProperty'](exports,'__esModule',_0x443713);
}));
