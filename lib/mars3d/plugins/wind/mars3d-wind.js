/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.4.11
 * 编译日期：2022-10-24 19:02:15
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-06-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';const _0x3eb257=_0x550f;function _0x597b(){const _0x15229b=['yxjYyxLcDwzMzxjwAwv3','yMLUza','y29UDgfPBMvY','Axnezxn0CM95zwq','Dg9hCMLKwfK','nJC1ndy4meTOCeDYvW','Bw91C2vnB3zL','q2fYDgvZAwfUmG','y2XPzw50sgvPz2H0','DMrHDge','C2nLBMu','B2zM','rxzLBNruExbL','y2fUDMfZuMvZAxPL','zNjVBuDLB21LDhj5','zxHLy3v0zq','x2rHDge','x21HEefNzq','CMfUzg9TAxPLugfYDgLJBgvZ','r2vVBwv0CNLbDhrYAwj1DgvZ','reLtqujmrv9mt0DFrevqveHFrLjbr01ftLrFv1jjveu','Eg1HEa','u2fTCgXLCG','zgvMyxvSDa','mtuXmNzTCxHHva','C2v0qxr0CMLIDxrL','z2XVyMu','x2nYzwf0zunHBNzHCW','mtjRwvDpzvi','r2vVBwv0CNLbDhrYAwj1Dgu','Cg93','C2LU','vfjjqu5htevt','ChjLrxHLy3v0zq','u2nLBMvnB2rL','Bg5N','quXxqvLt','z2XVyMfSq29TCg9ZAxrLt3bLCMf0Aw9U','z2v0rNvSBhnJCMvLBLf1ywq','zgvZDhjVEvbHCNrPy2XLC1rLEhr1CMvZ','Dg9W','zMXVB3i','y3jLyxrLvgv4DhvYzq','y2XPzw50v2LKDgG','zgvWDgHuzxn0','y2fUy2vSqw5PBwf0Aw9UrNjHBwu','y2XLyxjgCMfTzwj1zMzLCNm','DhjHAwXZ','z2XVyMvmyxLLCG','CMvMCMvZAfbHCNrPy2XLCW','tKvbuKvtva','DxbKyxrL','z2XVyMvcB3vUzgLUz1nWAgvYzq','yxrHBJi','x3bVAw50zxjfDMvUDhm','x29Utw91C2vvCev2zw50','BM9YDgG','x3jLBw92zwriB29R','y3jLyxrLugfYDgLJBgvZvgv4DhvYzxm','CMvZAxPL','CMf3uMvUzgvYu3rHDgu','y2fUDMfZv2LUzhK','C3fYDa','Cg9PBNrLCKv2zw50CW','CMfUzg9TqMv0D2vLBG','D2LUzfrLEhr1CMvZ','Cg9ZAxrPB25xqW','zhjHD2LUz0j1zMzLCLDPzhrO','BM9Uzq','v2LUzeXHEwvY','C2v0t3b0Aw9UCW','Cg9PBNrLCI1LDMvUDhm','BM93','ywjZB2X1Dgu','vfDpx1bj','y2fSy19ZCgvLzfjHDgu','ChvZAa','Eg1PBG','B3v0Chv0vgv4DhvYzq','Bw91C2vFzg93BG','CgfYDgLJBgvZvgv4DhvYzvnPEMu','D2LKDgG','CM93CW','u0nftKuZra','yMvNAw5qyxrO','CMvNAxn0zxi','yMLUzev2zw50','DMLZAwjPBgL0Eq','DMLLD2vYugfYyw1LDgvYCW','x21VDw50zwriB29R','ChjLuMvUzgvY','C3rYB2TLu3r5Bgu','DMLZAwjSzq','CgfYDgLJBgvizwLNAhq','t1bbuvvf','CgfYDgLJBgvZvgv4DhvYzxm','Bw9Kzq','twf0Aa','x2jPBgLUzwfYsw50zxjWB2XHDgLVBG','veHsruvFueLFt1zfuL9uv08','Bgv2Bwf4','u2nLBMvuCMfUC2zVCM1Z','x29Utw91C2veB3DUrxzLBNq','y29SB3i','y2fUDMfZq29UDgv4Da','DgXHDa','y3vYCMvUDfrYywLSC0nVBg9Y','zML4zwrizwLNAhq','CMv2zxjZzq','C2vNBwvUDhndB2XVCG','z2v0rgvMyxvSDfjLBMrLCLn0yxrL','y3jLyxrLu2vNBwvUDhnhzw9TzxrYEq','x19LC01VzhvSzq','BgLUzvDPzhrO','y2fTzxjH','z2v0ugL4zwXtAxPL','z2v0vvzcEvbVAw50','Bw92zvrV','r2vVBwv0CNK','y3jLyxrL','y29Z','Bwf4','x29UtwfWv2HLBgXfDMvUDa','y3jLyxrLuMvUzgvYAw5NuhjPBwL0AxzLCW','AgvPz2H0','zNjVBunZC0nVBg9Yu3rYAw5N','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','zMLSBa','rgvWDgHgDw5JDgLVBG','x3nWzwvKuMf0zq','D2LUzerHDge','Bgv2','Bw91C2veB3DU','reLtqujmrv9htf9qt1njveLptL9mt0DFrevqveG','x3bHCNrPy2XLC051BwjLCG','ywDL','Dgv4DhvYzxm','y3jLyxrLuMf3uMvUzgvYu3rHDgu','z3jPza','zNjHBwvIDwzMzxjZ','CgfYDgLJBgvZv2LUza','mteYnJnVu2TPtLq','CMDIysGWlcaWlcaWlcaWlJK3kq','C2vNBwvUDhm','yMX1zq','zNjVBunHy2HL','zhjHD1DPBMq','v01tx1vsta','y2fUDMfZsgvPz2H0','ugL4zwXgB3jTyxq','mtaWjq','z2v0q29SB3juzxH0DxjL','Dg9sywrPyw5Z','zgvWDgHnyxnR','vMvYDgv4qxjYyxK','y2XHC3m','Bwf4qwDL','C2HVDW','CMvTB3zLqwXS','zhjVCfjHDgu','y29SCW','y29SB3juywjSzq','y3jLyxrLuMvUzgvYAw5Nvgv4DhvYzxm','CMfUzg9TugfYDgLJBgu','Ew1HEa','Dw5IAw5KrxzLBNq','zgvMAw5Lza','BgLNAhrLCG','BMv4DfrYywLSCW','BwLU','zNjVBurLz3jLzxm','y3vYCMvUDfbHCNrPy2XLC1nWzwvK','x2nHBgntDgvW','surftLrjvfK','A2v5CW','DxbKyxrLu3bLzwq','q29SB3i','Bw91C2vvCa','DgXUzW','C3bLzwrgywn0B3i','y3jLyxrLq29TChv0Aw5NuhjPBwL0AxzLCW','Dw5PzM9YBsbZyw1WBgvYmKqGCg9ZDfbYB2nLC3nPBMDqB3nPDgLVBJSkDw5PzM9YBsbZyw1WBgvYmKqGBMv4DfbHCNrPy2XLC1nWzwvKoWOkDMfYEwLUzYb2zwmYihzFDgv4DhvYzunVB3jKAw5HDgvZoWOkDM9PzcbTywLUkcKGEWOGicaGDMvJncbYyw5KB21qyxj0AwnSzsa9ihrLEhr1CMuYrcHWB3n0uhjVy2vZC2LUz1bVC2L0Aw9Ulcb2x3rLEhr1CMvdB29YzgLUyxrLCYK7cIaGicb2zwm0ihbHCNrPy2XLu3bLzwqGpsb0zxH0DxjLmKqOBMv4DfbHCNrPy2XLC1nWzwvKlcb2x3rLEhr1CMvdB29YzgLUyxrLCYK7cGOGicaGAwyGkhjHBMrVBvbHCNrPy2XLlMeGpIaWlJaPihSkicaGicaGicbNBf9gCMfNq29SB3iGpsb2zwm0kdaUmcK7cIaGicb9igvSC2uGEWOGicaGicaGigDSx0zYywDdB2XVCIa9ihbHCNrPy2XLu3bLzwq7cIaGicb9cN0','odu3ote1uNv4q1PZ','wKvstW','tgf5zxjvDgLS','ueLFt1zfuL9usfjfrq','vgv4DhvYzu1PBMLMAwnHDgLVBKzPBhrLCG','zgvWDgHuzxH0DxjL','C291DgG','x29UtwfWx3bYzvjLBMrLCKv2zw50','y29TBwfUzeXPC3q','ywjZ','DMLLD3bVCNq','q2XLyxjdB21Tyw5K','y2fUDMfZ','Ew1PBG','Bw9K','C2nYzwvU','teLorufs','z2v0uMfUzg9Ttgf0tg5N','CMvTB3zLq2HPBgq','y3vYCMvUDfrYywLSC0rLChrO','DxbKyxrLvMLLD2vYugfYyw1LDgvYCW','u2HHzgvYu291CMnL','q2fUDMfZv2LUzeXHEwvY','CMvMCMvZAfrPBwvY','rwXSAxbZB2LKywXpy2nSDwrLCG','rhjHD0nVBw1HBMq','zMLSBfjLy3q','q29TCg9Uzw50rgf0yxr5Cgu','yxv0B0nSzwfY','y29TBwfUzfr5Cgu','Dw5PzM9YBsbZyw1WBgvYmKqGC2vNBwvUDhndB2XVCLrLEhr1CMu7dqP1BMLMB3jTihnHBxbSzxiYrcbZzwDTzw50C0rLChrOvgv4DhvYztSncG0kDw5PzM9YBsbZyw1WBgvYmKqGy3vYCMvUDfrYywLSC0nVBg9YoW0kDw5PzM9YBsbZyw1WBgvYmKqGDhjHAwXZrgvWDgHuzxH0DxjLoW0kdqP1BMLMB3jTigzSB2f0igzHzgvpCgfJAxr5oW0kdqP2yxj5Aw5NihzLyZiGDgv4DhvYzunVB3jKAw5HDgu7dqOncNzVAwqGBwfPBIGPihSncIaGicb2zwm0ihbVAw50C0nVBg9Yid0GDgv4DhvYztjekhnLz21LBNrZq29SB3juzxH0DxjLlcb0zxH0DxjLq29VCMrPBMf0zsK7dqOGicaGDMvJncb0CMfPBhndB2XVCIa9ihrLEhr1CMuYrcHJDxjYzw50vhjHAwXZq29SB3iSihrLEhr1CMvdB29YzgLUyxrLktSncG0kicaGihrYywLSC0nVBg9Yid0GzMXVB3iOzMfKzu9WywnPDhKGkIaYntuUmcaQihrYywLSC0nVBg9YksaVidi1ns4WoYaVlYbTywTLihn1CMuGDgHLihrYywLSC0nVBg9YihDPBgWGyMuGC3rYAwn0BhKGzgvJCMvHC2vKdqOncIaGicbMBg9HDcbWB2LUDhnezxb0Aca9ihrLEhr1CMuYrcHZzwDTzw50C0rLChrOvgv4DhvYzsWGDgv4DhvYzunVB3jKAw5HDguPlNi7dqOGicaGzMXVyxqGDhjHAwXZrgvWDgGGpsb0zxH0DxjLmKqODhjHAwXZrgvWDgHuzxH0DxjLlcb0zxH0DxjLq29VCMrPBMf0zsKUCJSncIaGicbMBg9HDcbNBg9IzurLChrOid0Gy3PTx3vUCgfJA0rLChrOkhrLEhr1CMuYrcHJEM1Fz2XVyMvezxb0AfrLEhr1CMuSihrLEhr1CMvdB29YzgLUyxrLksK7dqOncIaGicbNBf9gCMfNq29SB3iGpsb2zwm0kdaUmcK7dqOGicaGAwyGkhbVAw50C0rLChrOidWGz2XVyMvezxb0AcKGEW0kicaGicaGicbNBf9gCMfNq29SB3iGpsbNBf9gCMfNq29SB3iGkYbWB2LUDhndB2XVCJSncIaGicb9dqOGicaGAwyGkhrYywLSC0rLChrOidWGz2XVyMvezxb0AcKGEW0kicaGicaGicbNBf9gCMfNq29SB3iGpsbNBf9gCMfNq29SB3iGkYb0CMfPBhndB2XVCJSncIaGicb9dqOGicaGz2XFrNjHz0rLChrOrvHuid0GBwLUkhbVAw50C0rLChrOlcb0CMfPBhnezxb0AcK7dqP9','zNjHBwvIDwzMzxi','B25Jzq','ugL4zwXeyxrHDhLWzq','Dw5PzM9YBsbZyw1WBgvYmKqGy3vYCMvUDfbHCNrPy2XLC1nWzwvKoYaVlYaODsWGDIWGDYWGBM9YBwfSAxPHDgLVBIKkDw5PzM9YBsbZyw1WBgvYmKqGCgfYDgLJBgvZv2LUzdSkcI8VihvZzwqGDg8Gy2fSy3vSyxrLihrOzsb3Aw5Kig5VCM0kDw5PzM9YBsb2zwmYihvtCgvLzfjHBMDLoYaVlYaOBwLUlcbTyxGPoWP1BMLMB3jTihzLyZiGDLnWzwvKuMfUz2u7cNvUAwzVCM0GzMXVyxqGCgL4zwXtAxPLoWP1BMLMB3jTigzSB2f0ihnWzwvKrMfJDg9YoWOkDMfYEwLUzYb2zwmYihzFDgv4DhvYzunVB3jKAw5HDgvZoWOkzMXVyxqGy2fSy3vSyxrLv2LUze5VCM0ODMvJmYbZCgvLzcKGEWOGicaGDMvJmYbWzxjJzw50id0GDMvJmYGWlJaPoWOGicaGCgvYy2vUDc54id0GkhnWzwvKlNGGlsb1u3bLzwrsyw5Nzs54ksaVicH1u3bLzwrsyw5Nzs55ic0GDvnWzwvKuMfUz2uUEcK7cIaGicbWzxjJzw50lNKGpsaOC3bLzwqUEsaTihztCgvLzfjHBMDLlNGPic8GkhztCgvLzfjHBMDLlNKGlsb2u3bLzwrsyw5Nzs54ktSkicaGigzSB2f0ig5VCM1HBgL6yxrPB24GpsbSzw5NDgGOCgvYy2vUDcK7cGOGicaGCMv0DxjUig5VCM1HBgL6yxrPB247cN0kcNzVAwqGBwfPBIGPihSkicaGic8VihrLEhr1CMuGy29VCMrPBMf0zsbTDxn0igjLig5VCM1HBgL6zwqkicaGihzLyZmGy3vYCMvUDfnWzwvKid0GDgv4DhvYztjekgn1CNjLBNrqyxj0AwnSzxntCgvLzcWGDL90zxH0DxjLq29VCMrPBMf0zxmPlNjNyJSkicaGihzLyZmGD2LUzfzLy3rVCIa9ihrLEhr1CMuYrcHWyxj0AwnSzxnxAw5Klcb2x3rLEhr1CMvdB29YzgLUyxrLCYKUCMDIoWOkicaGihzLyZqGBMv4DfnWzwvKid0GDMvJncHZCgvLzezHy3rVCIaQihbPEgvSu2L6zsaQihDPBMrwzwn0B3iSignHBgn1Bgf0zvDPBMroB3jTkhDPBMrwzwn0B3iPktSkicaGigDSx0zYywDdB2XVCIa9ig5LEhrtCgvLzdSkFq','DMvYDgv4qxjYyxK','mKPtqvj3sG','zgf0yq','z3jLzw4','zM9YrwfJAa','CgfYDgLJBgvZtNvTyMvY','y29TBwfUzfrVrxHLy3v0zq','BgLUzvrV','DMLLD1jLy3rHBMDSzvrVtg9Utgf0uMfUz2u','Dg9ezwDYzwvZ','x3rVBwfW','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','CgfYDgLJBgvZq29TChv0Aw5N','uMvUzgvYu3rHDgu','AxnjBKv4DgvUDa','q2fYDgvZAwfUmW','yMXLBMrPBMC','vgv4DhvYzq','x3nOB3DiB29R','BMv4DfbHCNrPy2XLC1nWzwvK','CgfYDgLJBgvZuMvUzgvYAw5N','zhjVCfjHDgvcDw1W','y3vYCMvUDfbHCNrPy2XLC1bVC2L0Aw9U','vgv4DhvYzu1Hz25PzMLJyxrPB25gAwX0zxi','C2v0rgf0yq','ywrK','y3jLyxrLuMvUzgvYAw5NrNjHBwvIDwzMzxjZ','CgfYDgLJBgvZ','mtuWmdq4oeT5rfLdzG','z2v0vvzcEvHz','Cg9ZDfbYB2nLC3nPBMDqB3nPDgLVBG','ChjPBwL0AxzLCW','mZi5ndCYowzKu3roAW','CMDIkdiWnIWYntuSmJu1kq','zgvZDhjVEu9IAMvJDa','z2v0t3b0Aw9UCW','Bgf5zxi','zgvMAw5LuhjVCgvYDhK','C2HHzgvYuhjVz3jHBq','y29SB3jZ','zMfKzu9WywnPDhK','z2v0rxH0zw50','ueLFt1zfuL9uv08','zwXSAxbZB2LK','x2nHBgnvvG','y3jLyxrLrNjHBwvIDwzMzxi','Cg9ZDfbYB2nLC3nPBMDtCgvLza','D2LUzezPzwXK','CgL4zwXtAxPL','revqveHFq09nue9oru5u','Dw1HEa','Dw5PzM9YBu1HCa','x3nLDe9WDgLVBNniB29R','C2v0r2vVBwv0CNK','Bg9N','ywrKrxzLBNrmAxn0zw5LCG','C291CMnL','ugfZCW','Dw5PzM9YBsbZyw1WBgvYmKqGDhjHAwXZq29SB3juzxH0DxjLoW0kDw5PzM9YBsbZyw1WBgvYmKqGDhjHAwXZrgvWDgHuzxH0DxjLoW0kdqP2yxj5Aw5NihzLyZiGDgv4DhvYzunVB3jKAw5HDgu7dqOncNzVAwqGBwfPBIGPihSncIaGicb2zwm0ihrYywLSC0nVBg9Yid0GDgv4DhvYztjekhrYywLSC0nVBg9Yvgv4DhvYzsWGDgv4DhvYzunVB3jKAw5HDguPoW0kicaGigzSB2f0ihrYywLSC0rLChrOid0GDgv4DhvYztjekhrYywLSC0rLChrOvgv4DhvYzsWGDgv4DhvYzunVB3jKAw5HDguPlNi7dqOGicaGzMXVyxqGz2XVyMvezxb0Aca9ign6Bv91BNbHy2Tezxb0AcH0zxH0DxjLmKqOy3PTx2DSB2jLrgvWDgHuzxH0DxjLlcb0zxH0DxjLq29VCMrPBMf0zsKPoW0kdqOGicaGAwyGkhrYywLSC0rLChrOidWGz2XVyMvezxb0AcKGEW0kicaGicaGicbNBf9gCMfNq29SB3iGpsb0CMfPBhndB2XVCJSncIaGicb9igvSC2uGEW0kicaGicaGicbNBf9gCMfNq29SB3iGpsb2zwm0kdaUmcK7dqOGicaGFq0kFq','zNjHz21LBNrtAgfKzxjtB3vYy2u','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','z2v0v2LUza','x2rYyxDmAw5LCW','y2fUCMvMCMvZAa','Bgf0','zhjHD2LUz0j1zMzLCKHLAwDODa','u1rbveLdx0rsqvC','y2XHBxbuB0XHDgL0DwrLuMfUz2u','qNvMzMvYvxnHz2u','C3r5Bgu','zgLTzw5ZAw9UCW','x29Utw91C2vnB3zLrxzLBNq','Bg9U','yxr0CMLIDxrLihzLyZmGCg9ZAxrPB247dqPHDhrYAwj1DguGDMvJmIbZDdSncG0kDMfYEwLUzYb2zwmYihrLEhr1CMvdB29YzgLUyxrLoW0kdqP2B2LKig1HAw4Oksb7dqOGicaGDgv4DhvYzunVB3jKAw5HDguGpsbZDdSncIaGicbNBf9qB3nPDgLVBIa9ihzLyZqOCg9ZAxrPB24SideUmcK7dqP9','q29TChv0zq','v2LUzfv0AwW','z2v0','BMv4DfbHCNrPy2XLC1bVC2L0Aw9U','yxbWBhLwAwv3zxjqyxjHBwv0zxjZ','yxbWzw5Kq2HPBgq','y3jLyxrLv2LUzfrLEhr1CMvZ','BgvUz3rO','yw5PBwf0zuzYyw1L','x2nHBNjLzNjLC2G','BgvMDa','ChjPBwL0AxzLvhLWzq','CMfUzg9T','twf0CML4na','yxr0CMLIDxrLtg9JyxrPB25Z','vu5tsuDorurFqLLurq','zNjHBwvuAw1L','rhjHDW','CMvK','z2v0q29UDgv4Da','Bgf0uMfUz2u','y2XLyxi','AgLKzgvU','D2HLzwW','DM1HEa','C2vNBwvUDhnezxb0Aa','CgfYDgLJBgvtExn0zw0','C3bLzwrsyxrL','y2fUDMfZv2LKDgG','uKDc','nJCYzfH3BurU','x2fKzgvKsg9VAW','Cg9ZAxrPB24','C3rYB2TL','z2XVyMfSqwXWAge','uKDcqq','zgvZDhjVEq','y29UDgv4Da','y3vYCMvUDfrYywLSCW','mJq3mZC3sxHMzvzK','yxjYyxK','y2XLyxjdB21Tyw5K','DMvYDgv4u2HHzgvYu291CMnL','Bwf4ugfYDgLJBgvZ','uhjPBwL0AxzLvhLWzq','CMvTB3zLrxzLBNrmAxn0zw5LCG','DwrHDge','Bg9UuMfUz2u','nta3ovf6q29jzG','z2vVBwv0CNK','B3b0Aw9UCW','y2vPBa','Bw91C2vFBw92zq','y29TChv0zvzPzxDszwn0yw5NBgu','CMvKCMf3','y3jLyxrLrwXLBwvUDa','x21HCa','rKXpqvq','CMvTB3zL','Bgv2BwLU','zNjHBwvsyxrL','ywrKuhjPBwL0AxzLCW','zgvZDgLUyxrPB24TAw4','q2vZAxvT'];_0x597b=function(){return _0x15229b;};return _0x597b();}(function(_0x31ccf0,_0x2b1151){const _0x34dfa8=_0x550f,_0x1960b1=_0x31ccf0();while(!![]){try{const _0x8159e8=parseInt(_0x34dfa8(0x116))/0x1*(-parseInt(_0x34dfa8(0x209))/0x2)+parseInt(_0x34dfa8(0x11f))/0x3*(-parseInt(_0x34dfa8(0x10d))/0x4)+-parseInt(_0x34dfa8(0x1e5))/0x5*(-parseInt(_0x34dfa8(0x14b))/0x6)+parseInt(_0x34dfa8(0x1bc))/0x7*(parseInt(_0x34dfa8(0x147))/0x8)+-parseInt(_0x34dfa8(0x228))/0x9+parseInt(_0x34dfa8(0x134))/0xa+parseInt(_0x34dfa8(0x224))/0xb;if(_0x8159e8===_0x2b1151)break;else _0x1960b1['push'](_0x1960b1['shift']());}catch(_0x574acd){_0x1960b1['push'](_0x1960b1['shift']());}}}(_0x597b,0x8906d));function _interopNamespace(_0xc5c8fa){const _0x3d9bde=_0x550f;if(_0xc5c8fa&&_0xc5c8fa['__esModule'])return _0xc5c8fa;var _0x3fc838=Object[_0x3d9bde(0x1a6)](null);return _0xc5c8fa&&Object[_0x3d9bde(0x1dd)](_0xc5c8fa)[_0x3d9bde(0x20c)](function(_0x43d835){const _0x16f597=_0x3d9bde;if(_0x43d835!==_0x16f597(0x146)){var _0x5ce718=Object[_0x16f597(0x244)](_0xc5c8fa,_0x43d835);Object[_0x16f597(0x22d)](_0x3fc838,_0x43d835,_0x5ce718[_0x16f597(0x254)]?_0x5ce718:{'enumerable':!![],'get':function(){return _0xc5c8fa[_0x43d835];}});}}),_0x3fc838[_0x3d9bde(0x146)]=_0xc5c8fa,_0x3fc838;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace[_0x3eb257(0x12e)];function getU(_0x4a59a6,_0x1b4100){const _0x192bb2=_0x3eb257,_0x18ab5b=_0x4a59a6*Math[_0x192bb2(0x1a7)](Cesium$7[_0x192bb2(0x190)][_0x192bb2(0x1c7)](_0x1b4100));return _0x18ab5b;}function getV(_0x3929fc,_0x5d14c9){const _0x2dc018=_0x3eb257,_0x595657=_0x3929fc*Math[_0x2dc018(0x14e)](Cesium$7['Math']['toRadians'](_0x5d14c9));return _0x595657;}function getSpeed(_0x17231b,_0x2fa4c8){const _0x2789d5=_0x3eb257,_0x400a71=Math['sqrt'](Math[_0x2789d5(0x14d)](_0x17231b,0x2)+Math[_0x2789d5(0x14d)](_0x2fa4c8,0x2));return _0x400a71;}function getDirection(_0x592b4e,_0x15963b){const _0x16099a=_0x3eb257;let _0x381da9=Cesium$7[_0x16099a(0x190)][_0x16099a(0x211)](Math[_0x16099a(0x164)](_0x15963b,_0x592b4e));return _0x381da9+=_0x381da9<0x0?0x168:0x0,_0x381da9;}var WindUtil={'__proto__':null,'getU':getU,'getV':getV,'getSpeed':getSpeed,'getDirection':getDirection};const Cesium$6=mars3d__namespace[_0x3eb257(0x12e)];class CustomPrimitive{constructor(_0x5e0b04){const _0x37ac92=_0x3eb257;this[_0x37ac92(0x202)]=_0x5e0b04['commandType'],this[_0x37ac92(0x120)]=_0x5e0b04[_0x37ac92(0x120)],this[_0x37ac92(0x260)]=_0x5e0b04[_0x37ac92(0x260)],this[_0x37ac92(0x25d)]=_0x5e0b04[_0x37ac92(0x25d)],this[_0x37ac92(0x23b)]=_0x5e0b04[_0x37ac92(0x23b)],this[_0x37ac92(0x119)]=_0x5e0b04[_0x37ac92(0x119)],this[_0x37ac92(0x243)]=_0x5e0b04['fragmentShaderSource'],this[_0x37ac92(0x16b)]=_0x5e0b04[_0x37ac92(0x16b)],this[_0x37ac92(0x204)]=_0x5e0b04[_0x37ac92(0x204)],this[_0x37ac92(0x17d)]=_0x5e0b04[_0x37ac92(0x17d)],this[_0x37ac92(0x201)]=_0x5e0b04[_0x37ac92(0x201)]??![],this['preExecute']=_0x5e0b04[_0x37ac92(0x150)],this[_0x37ac92(0x1cc)]=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this['autoClear']&&(this[_0x37ac92(0x118)]=new Cesium$6[(_0x37ac92(0x1f0))]({'color':new Cesium$6[(_0x37ac92(0x1df))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x37ac92(0x204)],'pass':Cesium$6[_0x37ac92(0x241)]['OPAQUE']}));}['createCommand'](_0x43b55f){const _0x59e895=_0x3eb257;switch(this[_0x59e895(0x202)]){case'Draw':{const _0x2444c2=Cesium$6[_0x59e895(0x1c9)][_0x59e895(0x13d)]({'context':_0x43b55f,'geometry':this[_0x59e895(0x120)],'attributeLocations':this[_0x59e895(0x260)],'bufferUsage':Cesium$6['BufferUsage'][_0x59e895(0x24a)]}),_0x24bdf1=Cesium$6['ShaderProgram'][_0x59e895(0x1c0)]({'context':_0x43b55f,'attributeLocations':this[_0x59e895(0x260)],'vertexShaderSource':this[_0x59e895(0x119)],'fragmentShaderSource':this[_0x59e895(0x243)]}),_0x988a01=Cesium$6[_0x59e895(0x215)][_0x59e895(0x1c0)](this[_0x59e895(0x16b)]);return new Cesium$6[(_0x59e895(0x1fe))]({'owner':this,'vertexArray':_0x2444c2,'primitiveType':this[_0x59e895(0x25d)],'uniformMap':this[_0x59e895(0x23b)],'modelMatrix':Cesium$6[_0x59e895(0x25f)][_0x59e895(0x1dc)],'shaderProgram':_0x24bdf1,'framebuffer':this['framebuffer'],'renderState':_0x988a01,'pass':Cesium$6[_0x59e895(0x241)][_0x59e895(0x18d)]});}case _0x59e895(0x252):{return new Cesium$6['ComputeCommand']({'owner':this,'fragmentShaderSource':this[_0x59e895(0x243)],'uniformMap':this['uniformMap'],'outputTexture':this[_0x59e895(0x17d)],'persists':!![]});}}}[_0x3eb257(0x23d)](_0x5695fe,_0x3851b3){const _0x19cce6=_0x3eb257;this[_0x19cce6(0x120)]=_0x3851b3;const _0x1a5d8c=Cesium$6[_0x19cce6(0x1c9)][_0x19cce6(0x13d)]({'context':_0x5695fe,'geometry':this['geometry'],'attributeLocations':this[_0x19cce6(0x260)],'bufferUsage':Cesium$6['BufferUsage'][_0x19cce6(0x24a)]});this[_0x19cce6(0x20e)][_0x19cce6(0x208)]=_0x1a5d8c;}[_0x3eb257(0x162)](_0x40fd6f){const _0x14d4bc=_0x3eb257;if(!this[_0x14d4bc(0x1cc)])return;if(_0x40fd6f[_0x14d4bc(0x18f)]!==Cesium$6['SceneMode'][_0x14d4bc(0x182)])return;!Cesium$6['defined'](this[_0x14d4bc(0x20e)])&&(this[_0x14d4bc(0x20e)]=this['createCommand'](_0x40fd6f['context'])),Cesium$6[_0x14d4bc(0x1d5)](this[_0x14d4bc(0x150)])&&this['preExecute'](),Cesium$6[_0x14d4bc(0x1d5)](this[_0x14d4bc(0x118)])&&_0x40fd6f[_0x14d4bc(0x1ed)][_0x14d4bc(0x17b)](this['clearCommand']),_0x40fd6f[_0x14d4bc(0x1ed)][_0x14d4bc(0x17b)](this[_0x14d4bc(0x20e)]);}[_0x3eb257(0x132)](){return![];}['destroy'](){const _0x182ea3=_0x3eb257;return Cesium$6['defined'](this['commandToExecute'])&&(this[_0x182ea3(0x20e)][_0x182ea3(0x22e)]=this[_0x182ea3(0x20e)][_0x182ea3(0x22e)]&&this[_0x182ea3(0x20e)]['shaderProgram']['destroy']()),Cesium$6[_0x182ea3(0x22a)](this);}}const Cesium$5=mars3d__namespace[_0x3eb257(0x12e)],Util=(function(){const _0x2eca5e=function(){const _0x4ece7e=_0x550f,_0x45715f=new Cesium$5[(_0x4ece7e(0x1a5))]({'attributes':new Cesium$5[(_0x4ece7e(0x142))]({'position':new Cesium$5[(_0x4ece7e(0x14c))]({'componentDatatype':Cesium$5['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5[(_0x4ece7e(0x14c))]({'componentDatatype':Cesium$5[_0x4ece7e(0x200)]['FLOAT'],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});return _0x45715f;},_0x1f3460=function(_0x2338fd,_0x3f0bc5){const _0x265b7e=_0x550f;if(Cesium$5[_0x265b7e(0x1d5)](_0x3f0bc5)){const _0xdfa9fa={};_0xdfa9fa[_0x265b7e(0x12f)]=_0x3f0bc5,_0x2338fd[_0x265b7e(0x240)]=_0xdfa9fa;}const _0x42a29d=new Cesium$5[(_0x265b7e(0x219))](_0x2338fd);return _0x42a29d;},_0x4990bd=function(_0x459385,_0x308b01,_0x4be72e){const _0x62cf74=new Cesium$5['Framebuffer']({'context':_0x459385,'colorTextures':[_0x308b01],'depthTexture':_0x4be72e});return _0x62cf74;},_0x5560a0=function(_0x25df9e){const _0x1b2b1a=_0x550f,_0x27ecd0=!![],_0x20a84e=![],_0x37e27d={'viewport':_0x25df9e[_0x1b2b1a(0x1ef)],'depthTest':_0x25df9e[_0x1b2b1a(0x15b)],'depthMask':_0x25df9e[_0x1b2b1a(0x1c8)],'blending':_0x25df9e[_0x1b2b1a(0x218)]},_0x1555f5=Cesium$5['Appearance'][_0x1b2b1a(0x19d)](_0x27ecd0,_0x20a84e,_0x37e27d);return _0x1555f5;},_0x1262f1=function(_0x159e48){const _0x42a9e0=_0x550f,_0xb40866={},_0x3db547=Cesium$5[_0x42a9e0(0x190)]['mod'](_0x159e48['west'],Cesium$5[_0x42a9e0(0x190)][_0x42a9e0(0x179)]),_0x5b49bc=Cesium$5['Math'][_0x42a9e0(0x1f3)](_0x159e48['east'],Cesium$5['Math'][_0x42a9e0(0x179)]),_0x19eaa9=_0x159e48['width'];let _0x210f56,_0x39d126;_0x19eaa9>Cesium$5[_0x42a9e0(0x190)][_0x42a9e0(0x192)]?(_0x210f56=0x0,_0x39d126=Cesium$5[_0x42a9e0(0x190)]['TWO_PI']):_0x5b49bc-_0x3db547<_0x19eaa9?(_0x210f56=_0x3db547,_0x39d126=_0x3db547+_0x19eaa9):(_0x210f56=_0x3db547,_0x39d126=_0x5b49bc);_0xb40866[_0x42a9e0(0x250)]={'min':Cesium$5[_0x42a9e0(0x190)][_0x42a9e0(0x211)](_0x210f56),'max':Cesium$5[_0x42a9e0(0x190)][_0x42a9e0(0x211)](_0x39d126)};const _0x303d70=_0x159e48[_0x42a9e0(0x1eb)],_0x47eae6=_0x159e48[_0x42a9e0(0x167)],_0x2acb4d=_0x159e48[_0x42a9e0(0x1ab)],_0xac347c=_0x2acb4d>Cesium$5[_0x42a9e0(0x190)]['PI']/0xc?_0x2acb4d/0x2:0x0;let _0x2905c9=Cesium$5[_0x42a9e0(0x190)][_0x42a9e0(0x24b)](_0x303d70-_0xac347c),_0xce758c=Cesium$5['Math'][_0x42a9e0(0x24b)](_0x47eae6+_0xac347c);return _0x2905c9<-Cesium$5[_0x42a9e0(0x190)]['PI_OVER_THREE']&&(_0x2905c9=-Cesium$5[_0x42a9e0(0x190)][_0x42a9e0(0x232)]),_0xce758c>Cesium$5[_0x42a9e0(0x190)][_0x42a9e0(0x1e8)]&&(_0xce758c=Cesium$5[_0x42a9e0(0x190)][_0x42a9e0(0x232)]),_0xb40866[_0x42a9e0(0x248)]={'min':Cesium$5[_0x42a9e0(0x190)]['toDegrees'](_0x2905c9),'max':Cesium$5[_0x42a9e0(0x190)][_0x42a9e0(0x211)](_0xce758c)},_0xb40866;};return{'getFullscreenQuad':_0x2eca5e,'createTexture':_0x1f3460,'createFramebuffer':_0x4990bd,'createRawRenderState':_0x5560a0,'viewRectangleToLonLatRange':_0x1262f1};}());var segmentDraw_vert='attribute\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20normal\x0aattribute\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20postProcessingSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0avarying\x20float\x20speedNormalization;\x0a\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x20\x0a\x20\x20\x20\x20float\x20a\x20=\x206378137.0;\x20//\x20Semi-major\x20axis\x20\x0a\x20\x20\x20\x20float\x20b\x20=\x206356752.3142;\x20//\x20Semi-minor\x20axis\x20\x0a\x20\x20\x20\x20float\x20e2\x20=\x206.69437999014e-3;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x0a\x20\x20\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calcProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0,\x20360.0)\x20-\x20180.0;\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0);\x0a\x20\x20\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calcOffset(vec4\x20currentProjectedCoordinate,\x20vec4\x20nextProjectedCoordinate,\x20float\x20offsetSign)\x20{\x0a\x20\x20\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0);\x0a\x20\x20\x20\x20vec2\x20currentXY\x20=\x20(currentProjectedCoordinate.xy\x20/\x20currentProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x20\x20\x20\x20vec2\x20nextXY\x20=\x20(nextProjectedCoordinate.xy\x20/\x20nextProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0;\x0a\x20\x20\x20\x20vec2\x20direction\x20=\x20normalize(nextXY\x20-\x20currentXY);\x0a\x20\x20\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0,\x200.0);\x0a\x20\x20\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20\x20\x20vec3\x20currentPosition\x20=\x20texture2D(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20\x20\x20vec4\x20nextPosition\x20=\x20texture2D(postProcessingPosition,\x20particleIndex);\x0a\x0a\x20\x20\x20\x20vec4\x20currentProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20vec4\x20nextProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(nextPosition.w\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(nextPosition.xyz);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20float\x20pointToUse\x20=\x20normal.x;\x20//\x20-1\x20is\x20currentProjectedCoordinate\x20and\x20+1\x20is\x20nextProjectedCoordinate\x0a\x20\x20\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20pixelSize\x20*\x20calcOffset(currentProjectedCoordinate,\x20nextProjectedCoordinate,\x20offsetSign);\x0a\x20\x20\x20\x20if\x20(pointToUse\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20currentProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20nextProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20speedNormalization\x20=\x20texture2D(postProcessingSpeed,\x20particleIndex).a;\x0a}',segmentDraw_frag='uniform\x20sampler2D\x20colorTable;\x0a\x0avarying\x20float\x20speedNormalization;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20texture2D(colorTable,\x20vec2(speedNormalization,\x200.0));\x0a}',fullscreen_vert=_0x3eb257(0x251),trailDraw_frag=_0x3eb257(0x203),screenDraw_frag=_0x3eb257(0x242);const Cesium$4=mars3d__namespace[_0x3eb257(0x12e)];class ParticlesRendering{constructor(_0x2a23a1,_0x3815e5,_0x1583f0,_0x3c1e39,_0x12126c){const _0x2f7a89=_0x3eb257;this[_0x2f7a89(0x1d1)](_0x2a23a1,_0x3815e5,_0x1583f0[_0x2f7a89(0x22f)]),this[_0x2f7a89(0x222)](_0x2a23a1),this[_0x2f7a89(0x1aa)](_0x2a23a1,_0x1583f0,_0x3c1e39,_0x12126c);}[_0x3eb257(0x1d1)](_0x2b2685,_0x4df185,_0x4177d2){const _0x158b14=_0x3eb257,_0x4fb126={'context':_0x2b2685,'width':_0x2b2685[_0x158b14(0x172)],'height':_0x2b2685[_0x158b14(0x249)],'pixelFormat':Cesium$4['PixelFormat'][_0x158b14(0x112)],'pixelDatatype':Cesium$4[_0x158b14(0x206)][_0x158b14(0xfe)]},_0x598915={'context':_0x2b2685,'width':_0x2b2685[_0x158b14(0x172)],'height':_0x2b2685[_0x158b14(0x249)],'pixelFormat':Cesium$4[_0x158b14(0x1c4)][_0x158b14(0x239)],'pixelDatatype':Cesium$4[_0x158b14(0x206)]['UNSIGNED_INT']},_0x186e32=_0x4177d2[_0x158b14(0x259)],_0x3da996=new Float32Array(_0x186e32*0x3);for(let _0x3a82a5=0x0;_0x3a82a5<_0x186e32;_0x3a82a5++){const _0x1f5b15=Cesium$4['Color'][_0x158b14(0x1ac)](_0x4177d2[_0x3a82a5]);_0x3da996[0x3*_0x3a82a5]=_0x1f5b15[_0x158b14(0x101)],_0x3da996[0x3*_0x3a82a5+0x1]=_0x1f5b15[_0x158b14(0x20b)],_0x3da996[0x3*_0x3a82a5+0x2]=_0x1f5b15[_0x158b14(0x1bf)];}const _0x5adf35={'context':_0x2b2685,'width':_0x186e32,'height':0x1,'pixelFormat':Cesium$4[_0x158b14(0x1c4)][_0x158b14(0x10c)],'pixelDatatype':Cesium$4[_0x158b14(0x206)][_0x158b14(0x128)],'sampler':new Cesium$4['Sampler']({'minificationFilter':Cesium$4[_0x158b14(0x1e9)]['LINEAR'],'magnificationFilter':Cesium$4['TextureMagnificationFilter'][_0x158b14(0x1f5)]})};this[_0x158b14(0x1b7)]={'segmentsColor':Util[_0x158b14(0x159)](_0x4fb126),'segmentsDepth':Util[_0x158b14(0x159)](_0x598915),'currentTrailsColor':Util[_0x158b14(0x159)](_0x4fb126),'currentTrailsDepth':Util['createTexture'](_0x598915),'nextTrailsColor':Util['createTexture'](_0x4fb126),'nextTrailsDepth':Util['createTexture'](_0x598915),'colorTable':Util[_0x158b14(0x159)](_0x5adf35,_0x3da996)};}[_0x3eb257(0x222)](_0x1882fa){const _0x356c1f=_0x3eb257;this[_0x356c1f(0x1ba)]={'segments':Util['createFramebuffer'](_0x1882fa,this[_0x356c1f(0x1b7)][_0x356c1f(0x19c)],this[_0x356c1f(0x1b7)][_0x356c1f(0x108)]),'currentTrails':Util['createFramebuffer'](_0x1882fa,this[_0x356c1f(0x1b7)][_0x356c1f(0x199)],this['textures'][_0x356c1f(0x1f8)]),'nextTrails':Util[_0x356c1f(0x235)](_0x1882fa,this[_0x356c1f(0x1b7)]['nextTrailsColor'],this[_0x356c1f(0x1b7)]['nextTrailsDepth'])};}[_0x3eb257(0x19e)](_0x1e73be){const _0x358183=_0x3eb257,_0x259ac2=0x4;let _0x288110=[];for(let _0x20730a=0x0;_0x20730a<_0x1e73be['particlesTextureSize'];_0x20730a++){for(let _0x35b301=0x0;_0x35b301<_0x1e73be['particlesTextureSize'];_0x35b301++){for(let _0x144c1e=0x0;_0x144c1e<_0x259ac2;_0x144c1e++){_0x288110[_0x358183(0x17b)](_0x20730a/_0x1e73be[_0x358183(0x17f)]),_0x288110['push'](_0x35b301/_0x1e73be[_0x358183(0x17f)]);}}}_0x288110=new Float32Array(_0x288110);let _0x40facd=[];const _0x7c8932=[-0x1,0x1],_0x3e8469=[-0x1,0x1];for(let _0x19aa8a=0x0;_0x19aa8a<_0x1e73be[_0x358183(0x11a)];_0x19aa8a++){for(let _0x56540f=0x0;_0x56540f<_0x259ac2/0x2;_0x56540f++){for(let _0x15f5d7=0x0;_0x15f5d7<_0x259ac2/0x2;_0x15f5d7++){_0x40facd[_0x358183(0x17b)](_0x7c8932[_0x56540f]),_0x40facd['push'](_0x3e8469[_0x15f5d7]),_0x40facd[_0x358183(0x17b)](0x0);}}}_0x40facd=new Float32Array(_0x40facd);const _0x465499=0x6*_0x1e73be[_0x358183(0x11a)],_0x50a209=new Uint32Array(_0x465499);for(let _0x469c21=0x0,_0x3c48a8=0x0,_0x4f37ab=0x0;_0x469c21<_0x1e73be[_0x358183(0x11a)];_0x469c21++){_0x50a209[_0x3c48a8++]=_0x4f37ab+0x0,_0x50a209[_0x3c48a8++]=_0x4f37ab+0x1,_0x50a209[_0x3c48a8++]=_0x4f37ab+0x2,_0x50a209[_0x3c48a8++]=_0x4f37ab+0x2,_0x50a209[_0x3c48a8++]=_0x4f37ab+0x1,_0x50a209[_0x3c48a8++]=_0x4f37ab+0x3,_0x4f37ab+=0x4;}const _0x106ae8=new Cesium$4[(_0x358183(0x1a5))]({'attributes':new Cesium$4[(_0x358183(0x142))]({'st':new Cesium$4[(_0x358183(0x14c))]({'componentDatatype':Cesium$4['ComponentDatatype'][_0x358183(0x128)],'componentsPerAttribute':0x2,'values':_0x288110}),'normal':new Cesium$4[(_0x358183(0x14c))]({'componentDatatype':Cesium$4[_0x358183(0x200)][_0x358183(0x128)],'componentsPerAttribute':0x3,'values':_0x40facd})}),'indices':_0x50a209});return _0x106ae8;}[_0x3eb257(0x1aa)](_0x312504,_0xf7ac5,_0x172515,_0x5f1850){const _0x2daa5d=_0x3eb257,_0x3ab172=this;this[_0x2daa5d(0x227)]={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':{'st':0x0,'normal':0x1},'geometry':this[_0x2daa5d(0x19e)](_0xf7ac5),'primitiveType':Cesium$4[_0x2daa5d(0x11b)]['TRIANGLES'],'uniformMap':{'currentParticlesPosition':function(){const _0x8a247f=_0x2daa5d;return _0x5f1850['particlesTextures'][_0x8a247f(0x21e)];},'postProcessingPosition':function(){const _0x123a34=_0x2daa5d;return _0x5f1850[_0x123a34(0x18e)][_0x123a34(0x226)];},'postProcessingSpeed':function(){const _0x4b8149=_0x2daa5d;return _0x5f1850[_0x4b8149(0x18e)][_0x4b8149(0x236)];},'colorTable':function(){const _0x246bbf=_0x2daa5d;return _0x3ab172[_0x246bbf(0x1b7)][_0x246bbf(0x1d0)];},'aspect':function(){const _0x219e5f=_0x2daa5d;return _0x312504[_0x219e5f(0x172)]/_0x312504[_0x219e5f(0x249)];},'pixelSize':function(){const _0x1419f8=_0x2daa5d;return _0x172515[_0x1419f8(0x238)];},'lineWidth':function(){const _0x423057=_0x2daa5d;return _0xf7ac5[_0x423057(0x1a0)];},'particleHeight':function(){const _0x12d9d3=_0x2daa5d;return _0xf7ac5[_0x12d9d3(0x18c)];}},'vertexShaderSource':new Cesium$4[(_0x2daa5d(0x1fa))]({'sources':[segmentDraw_vert]}),'fragmentShaderSource':new Cesium$4[(_0x2daa5d(0x1fa))]({'sources':[segmentDraw_frag]}),'rawRenderState':Util[_0x2daa5d(0x1b8)]({'viewport':undefined,'depthTest':{'enabled':!![]},'depthMask':!![]}),'framebuffer':this[_0x2daa5d(0x1ba)][_0x2daa5d(0x1be)],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':_0x2daa5d(0x100),'attributeLocations':{'position':0x0,'st':0x1},'geometry':Util[_0x2daa5d(0x155)](),'primitiveType':Cesium$4[_0x2daa5d(0x11b)][_0x2daa5d(0x14f)],'uniformMap':{'segmentsColorTexture':function(){return _0x3ab172['textures']['segmentsColor'];},'segmentsDepthTexture':function(){return _0x3ab172['textures']['segmentsDepth'];},'currentTrailsColor':function(){const _0x3c31cd=_0x2daa5d;return _0x3ab172[_0x3c31cd(0x1ba)]['currentTrails'][_0x3c31cd(0x1c6)](0x0);},'trailsDepthTexture':function(){const _0x264bfd=_0x2daa5d;return _0x3ab172['framebuffers'][_0x264bfd(0x115)][_0x264bfd(0x1ea)];},'fadeOpacity':function(){const _0x365821=_0x2daa5d;return _0xf7ac5[_0x365821(0x230)];}},'vertexShaderSource':new Cesium$4[(_0x2daa5d(0x1fa))]({'defines':[_0x2daa5d(0x1b4)],'sources':[fullscreen_vert]}),'fragmentShaderSource':new Cesium$4[(_0x2daa5d(0x1fa))]({'defines':[_0x2daa5d(0x143)],'sources':[trailDraw_frag]}),'rawRenderState':Util[_0x2daa5d(0x1b8)]({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4[_0x2daa5d(0x1af)][_0x2daa5d(0x153)]},'depthMask':!![]}),'framebuffer':this[_0x2daa5d(0x1ba)]['nextTrails'],'autoClear':!![],'preExecute':function(){const _0x520c8d=_0x2daa5d,_0x3932b7=_0x3ab172[_0x520c8d(0x1ba)][_0x520c8d(0x115)];_0x3ab172['framebuffers'][_0x520c8d(0x115)]=_0x3ab172['framebuffers']['nextTrails'],_0x3ab172[_0x520c8d(0x1ba)]['nextTrails']=_0x3932b7,_0x3ab172['primitives']['trails'][_0x520c8d(0x20e)][_0x520c8d(0x204)]=_0x3ab172[_0x520c8d(0x1ba)][_0x520c8d(0x1d7)],_0x3ab172[_0x520c8d(0x227)][_0x520c8d(0x15e)][_0x520c8d(0x118)][_0x520c8d(0x204)]=_0x3ab172['framebuffers'][_0x520c8d(0x1d7)];}}),'screen':new CustomPrimitive({'commandType':_0x2daa5d(0x100),'attributeLocations':{'position':0x0,'st':0x1},'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4[_0x2daa5d(0x11b)]['TRIANGLES'],'uniformMap':{'trailsColorTexture':function(){const _0x3cea33=_0x2daa5d;return _0x3ab172[_0x3cea33(0x1ba)]['nextTrails'][_0x3cea33(0x1c6)](0x0);},'trailsDepthTexture':function(){const _0x14d143=_0x2daa5d;return _0x3ab172[_0x14d143(0x1ba)][_0x14d143(0x1d7)][_0x14d143(0x1ea)];}},'vertexShaderSource':new Cesium$4[(_0x2daa5d(0x1fa))]({'defines':[_0x2daa5d(0x1b4)],'sources':[fullscreen_vert]}),'fragmentShaderSource':new Cesium$4[(_0x2daa5d(0x1fa))]({'defines':[_0x2daa5d(0x143)],'sources':[screenDraw_frag]}),'rawRenderState':Util[_0x2daa5d(0x1b8)]({'viewport':undefined,'depthTest':{'enabled':![]},'depthMask':!![],'blending':{'enabled':!![]}}),'framebuffer':undefined})};}}var getWind_frag='//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x20\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0avarying\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x,\x20360.0);\x0a\x20\x20\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20-90.0,\x2090.0);\x0a\x0a\x20\x20\x20\x20vec3\x20index3D\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20index3D.z\x20=\x20(lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z;\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205],\x20width\x20=\x203,\x20height\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x203\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x202\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWind(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20\x20\x20float\x20result\x20=\x20texture2D(windTexture,\x20normalizedIndex2D).r;\x0a\x20\x20\x20\x20return\x20result;\x0a}\x0a\x0aconst\x20mat4\x20kernelMatrix\x20=\x20mat4(\x0a\x20\x20\x20\x200.0,\x20-1.0,\x202.0,\x20-1.0,\x20//\x20first\x20column\x0a\x20\x20\x20\x202.0,\x200.0,\x20-5.0,\x203.0,\x20//\x20second\x20column\x0a\x20\x20\x20\x200.0,\x201.0,\x204.0,\x20-3.0,\x20//\x20third\x20column\x0a\x20\x20\x20\x200.0,\x200.0,\x20-1.0,\x201.0\x20//\x20fourth\x20column\x0a);\x0afloat\x20oneDimensionInterpolation(float\x20t,\x20float\x20p0,\x20float\x20p1,\x20float\x20p2,\x20float\x20p3)\x20{\x0a\x20\x20\x20\x20vec4\x20tVec4\x20=\x20vec4(1.0,\x20t,\x20t\x20*\x20t,\x20t\x20*\x20t\x20*\x20t);\x0a\x20\x20\x20\x20tVec4\x20=\x20tVec4\x20/\x202.0;\x0a\x20\x20\x20\x20vec4\x20pVec4\x20=\x20vec4(p0,\x20p1,\x20p2,\x20p3);\x0a\x20\x20\x20\x20return\x20dot((tVec4\x20*\x20kernelMatrix),\x20pVec4);\x0a}\x0a\x0afloat\x20calculateB(sampler2D\x20windTexture,\x20float\x20t,\x20float\x20lon,\x20float\x20lat,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20float\x20lon0\x20=\x20floor(lon)\x20-\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon1\x20=\x20floor(lon);\x0a\x20\x20\x20\x20float\x20lon2\x20=\x20floor(lon)\x20+\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon3\x20=\x20floor(lon)\x20+\x202.0\x20*\x20interval.x;\x0a\x0a\x20\x20\x20\x20float\x20p0\x20=\x20getWind(windTexture,\x20vec3(lon0,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p1\x20=\x20getWind(windTexture,\x20vec3(lon1,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p2\x20=\x20getWind(windTexture,\x20vec3(lon2,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p3\x20=\x20getWind(windTexture,\x20vec3(lon3,\x20lat,\x20lev));\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(t,\x20p0,\x20p1,\x20p2,\x20p3);\x0a}\x0a\x0afloat\x20interpolateOneTexture(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20\x20\x20float\x20lat0\x20=\x20floor(lat)\x20-\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat1\x20=\x20floor(lat);\x0a\x20\x20\x20\x20float\x20lat2\x20=\x20floor(lat)\x20+\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat3\x20=\x20floor(lat)\x20+\x202.0\x20*\x20interval.y;\x0a\x0a\x20\x20\x20\x20vec2\x20coefficient\x20=\x20lonLatLev.xy\x20-\x20floor(lonLatLev.xy);\x0a\x20\x20\x20\x20float\x20b0\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat0,\x20lev);\x0a\x20\x20\x20\x20float\x20b1\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat1,\x20lev);\x0a\x20\x20\x20\x20float\x20b2\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat2,\x20lev);\x0a\x20\x20\x20\x20float\x20b3\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat3,\x20lev);\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(coefficient.y,\x20b0,\x20b1,\x20b2,\x20b3);\x0a}\x0a\x0avec3\x20bicubic(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\x0a\x20\x20\x20\x20float\x20u\x20=\x20interpolateOneTexture(U,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20v\x20=\x20interpolateOneTexture(V,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture2D(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20bicubic(lonLatLev);\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(windVector,\x200.0);\x0a}',updateSpeed_frag=_0x3eb257(0x207),updatePosition_frag=_0x3eb257(0x213),postProcessingPosition_frag=_0x3eb257(0x1ad),postProcessingSpeed_frag=_0x3eb257(0x1e4);const Cesium$3=mars3d__namespace[_0x3eb257(0x12e)];class ParticlesComputing{constructor(_0x3a4baf,_0x147db0,_0x2bb043,_0x3ea066){const _0x466c21=_0x3eb257;this[_0x466c21(0x20a)]=_0x147db0,this[_0x466c21(0x258)](_0x3a4baf,_0x147db0),this[_0x466c21(0x169)](_0x3a4baf,_0x2bb043,_0x3ea066),this[_0x466c21(0x1e3)](_0x147db0,_0x2bb043,_0x3ea066);}[_0x3eb257(0x258)](_0x456f69,_0x2b64c7){const _0x4015ba=_0x3eb257,_0x145884={'context':_0x456f69,'width':_0x2b64c7['dimensions']['lon'],'height':_0x2b64c7['dimensions']['lat']*(_0x2b64c7[_0x4015ba(0x24e)][_0x4015ba(0x1b2)]||0x1),'pixelFormat':Cesium$3[_0x4015ba(0x1c4)]['LUMINANCE'],'pixelDatatype':Cesium$3[_0x4015ba(0x206)][_0x4015ba(0x128)],'flipY':![],'sampler':new Cesium$3[(_0x4015ba(0x145))]({'minificationFilter':Cesium$3[_0x4015ba(0x1e9)][_0x4015ba(0x161)],'magnificationFilter':Cesium$3[_0x4015ba(0x21f)][_0x4015ba(0x161)]})};this[_0x4015ba(0x170)]={'U':Util[_0x4015ba(0x159)](_0x145884,_0x2b64c7['U'][_0x4015ba(0x117)]),'V':Util['createTexture'](_0x145884,_0x2b64c7['V'][_0x4015ba(0x117)])};}[_0x3eb257(0x169)](_0x712f91,_0x4319a8,_0x3b0564){const _0x131b06=_0x3eb257,_0x264dec={'context':_0x712f91,'width':_0x4319a8[_0x131b06(0x17f)],'height':_0x4319a8[_0x131b06(0x17f)],'pixelFormat':Cesium$3[_0x131b06(0x1c4)][_0x131b06(0x112)],'pixelDatatype':Cesium$3[_0x131b06(0x206)][_0x131b06(0x128)],'flipY':![],'sampler':new Cesium$3[(_0x131b06(0x145))]({'minificationFilter':Cesium$3[_0x131b06(0x1e9)]['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x131b06(0x161)]})},_0x5c5894=this[_0x131b06(0x141)](_0x4319a8[_0x131b06(0x11a)],_0x3b0564),_0x2f83cc=new Float32Array(0x4*_0x4319a8[_0x131b06(0x11a)])[_0x131b06(0x1ae)](0x0);this['particlesTextures']={'particlesWind':Util[_0x131b06(0x159)](_0x264dec),'currentParticlesPosition':Util[_0x131b06(0x159)](_0x264dec,_0x5c5894),'nextParticlesPosition':Util[_0x131b06(0x159)](_0x264dec,_0x5c5894),'currentParticlesSpeed':Util[_0x131b06(0x159)](_0x264dec,_0x2f83cc),'nextParticlesSpeed':Util[_0x131b06(0x159)](_0x264dec,_0x2f83cc),'postProcessingPosition':Util['createTexture'](_0x264dec,_0x5c5894),'postProcessingSpeed':Util[_0x131b06(0x159)](_0x264dec,_0x2f83cc)};}['randomizeParticles'](_0x4e7b1a,_0x500513){const _0x4940e0=_0x3eb257,_0x5d576b=new Float32Array(0x4*_0x4e7b1a);for(let _0x4793c4=0x0;_0x4793c4<_0x4e7b1a;_0x4793c4++){_0x5d576b[0x4*_0x4793c4]=Cesium$3[_0x4940e0(0x190)][_0x4940e0(0x16f)](_0x500513[_0x4940e0(0x11e)]['x'],_0x500513[_0x4940e0(0x11e)]['y']),_0x5d576b[0x4*_0x4793c4+0x1]=Cesium$3[_0x4940e0(0x190)][_0x4940e0(0x16f)](_0x500513[_0x4940e0(0x103)]['x'],_0x500513[_0x4940e0(0x103)]['y']),_0x5d576b[0x4*_0x4793c4+0x2]=Cesium$3[_0x4940e0(0x190)][_0x4940e0(0x16f)](this[_0x4940e0(0x20a)][_0x4940e0(0x1b2)][_0x4940e0(0x1d8)],this[_0x4940e0(0x20a)][_0x4940e0(0x1b2)]['max']),_0x5d576b[0x4*_0x4793c4+0x3]=0x0;}return _0x5d576b;}[_0x3eb257(0x156)](){const _0x2957b6=_0x3eb257;Object[_0x2957b6(0x1dd)](this[_0x2957b6(0x18e)])[_0x2957b6(0x20c)](_0x37026a=>{const _0x1d3d47=_0x2957b6;this[_0x1d3d47(0x18e)][_0x37026a]['destroy']();});}[_0x3eb257(0x1e3)](_0x4922f4,_0x3576f6,_0x4cc0af){const _0x5f5bac=_0x3eb257,_0x479980=new Cesium$3['Cartesian3'](_0x4922f4[_0x5f5bac(0x24e)]['lon'],_0x4922f4['dimensions']['lat'],_0x4922f4[_0x5f5bac(0x24e)]['lev']),_0x1e3efa=new Cesium$3['Cartesian3'](_0x4922f4[_0x5f5bac(0x250)][_0x5f5bac(0x1d8)],_0x4922f4[_0x5f5bac(0x248)][_0x5f5bac(0x1d8)],_0x4922f4[_0x5f5bac(0x1b2)][_0x5f5bac(0x1d8)]),_0x5ae420=new Cesium$3[(_0x5f5bac(0x217))](_0x4922f4[_0x5f5bac(0x250)][_0x5f5bac(0x1a8)],_0x4922f4[_0x5f5bac(0x248)][_0x5f5bac(0x1a8)],_0x4922f4[_0x5f5bac(0x1b2)][_0x5f5bac(0x1a8)]),_0x2811a7=new Cesium$3[(_0x5f5bac(0x217))]((_0x5ae420['x']-_0x1e3efa['x'])/(_0x479980['x']-0x1),(_0x5ae420['y']-_0x1e3efa['y'])/(_0x479980['y']-0x1),_0x479980['z']>0x1?(_0x5ae420['z']-_0x1e3efa['z'])/(_0x479980['z']-0x1):0x1),_0x4766ad=new Cesium$3[(_0x5f5bac(0x136))](_0x4922f4['U'][_0x5f5bac(0x1d8)],_0x4922f4['U'][_0x5f5bac(0x1a8)]),_0x7e7bff=new Cesium$3[(_0x5f5bac(0x136))](_0x4922f4['V'][_0x5f5bac(0x1d8)],_0x4922f4['V'][_0x5f5bac(0x1a8)]),_0xd3b8d=this;this[_0x5f5bac(0x227)]={'getWind':new CustomPrimitive({'commandType':_0x5f5bac(0x252),'uniformMap':{'U':function(){const _0x5a1c21=_0x5f5bac;return _0xd3b8d[_0x5a1c21(0x170)]['U'];},'V':function(){const _0x3d0d22=_0x5f5bac;return _0xd3b8d[_0x3d0d22(0x170)]['V'];},'currentParticlesPosition':function(){const _0x43dd88=_0x5f5bac;return _0xd3b8d[_0x43dd88(0x18e)][_0x43dd88(0x21e)];},'dimension':function(){return _0x479980;},'minimum':function(){return _0x1e3efa;},'maximum':function(){return _0x5ae420;},'interval':function(){return _0x2811a7;}},'fragmentShaderSource':new Cesium$3[(_0x5f5bac(0x1fa))]({'sources':[getWind_frag]}),'outputTexture':this[_0x5f5bac(0x18e)][_0x5f5bac(0x1bb)],'preExecute':function(){const _0x1c62d6=_0x5f5bac;_0xd3b8d['primitives'][_0x1c62d6(0x245)][_0x1c62d6(0x20e)]['outputTexture']=_0xd3b8d[_0x1c62d6(0x18e)][_0x1c62d6(0x1bb)];}}),'updateSpeed':new CustomPrimitive({'commandType':_0x5f5bac(0x252),'uniformMap':{'currentParticlesSpeed':function(){const _0x220f47=_0x5f5bac;return _0xd3b8d[_0x220f47(0x18e)][_0x220f47(0x1da)];},'particlesWind':function(){return _0xd3b8d['particlesTextures']['particlesWind'];},'uSpeedRange':function(){return _0x4766ad;},'vSpeedRange':function(){return _0x7e7bff;},'pixelSize':function(){const _0x5aab7d=_0x5f5bac;return _0x4cc0af[_0x5aab7d(0x238)];},'speedFactor':function(){return _0x3576f6['speedFactor'];}},'fragmentShaderSource':new Cesium$3['ShaderSource']({'sources':[updateSpeed_frag]}),'outputTexture':this[_0x5f5bac(0x18e)][_0x5f5bac(0x21b)],'preExecute':function(){const _0xa78a99=_0x5f5bac,_0x348a6e=_0xd3b8d[_0xa78a99(0x18e)][_0xa78a99(0x1da)];_0xd3b8d[_0xa78a99(0x18e)]['currentParticlesSpeed']=_0xd3b8d[_0xa78a99(0x18e)]['postProcessingSpeed'],_0xd3b8d[_0xa78a99(0x18e)][_0xa78a99(0x236)]=_0x348a6e,_0xd3b8d[_0xa78a99(0x227)][_0xa78a99(0x1de)]['commandToExecute'][_0xa78a99(0x17d)]=_0xd3b8d[_0xa78a99(0x18e)]['nextParticlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':_0x5f5bac(0x252),'uniformMap':{'currentParticlesPosition':function(){const _0x3264a5=_0x5f5bac;return _0xd3b8d['particlesTextures'][_0x3264a5(0x21e)];},'currentParticlesSpeed':function(){const _0x2c7b41=_0x5f5bac;return _0xd3b8d['particlesTextures'][_0x2c7b41(0x1da)];}},'fragmentShaderSource':new Cesium$3[(_0x5f5bac(0x1fa))]({'sources':[updatePosition_frag]}),'outputTexture':this[_0x5f5bac(0x18e)][_0x5f5bac(0x255)],'preExecute':function(){const _0x346bc8=_0x5f5bac,_0x42910b=_0xd3b8d[_0x346bc8(0x18e)]['currentParticlesPosition'];_0xd3b8d[_0x346bc8(0x18e)][_0x346bc8(0x21e)]=_0xd3b8d[_0x346bc8(0x18e)]['postProcessingPosition'],_0xd3b8d[_0x346bc8(0x18e)][_0x346bc8(0x226)]=_0x42910b,_0xd3b8d['primitives']['updatePosition'][_0x346bc8(0x20e)][_0x346bc8(0x17d)]=_0xd3b8d[_0x346bc8(0x18e)][_0x346bc8(0x255)];}}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x5f5bac(0x252),'uniformMap':{'nextParticlesPosition':function(){return _0xd3b8d['particlesTextures']['nextParticlesPosition'];},'nextParticlesSpeed':function(){const _0x115e90=_0x5f5bac;return _0xd3b8d['particlesTextures'][_0x115e90(0x21b)];},'lonRange':function(){const _0x2b5227=_0x5f5bac;return _0x4cc0af[_0x2b5227(0x11e)];},'latRange':function(){const _0xe59d6e=_0x5f5bac;return _0x4cc0af[_0xe59d6e(0x103)];},'randomCoefficient':function(){const _0x273816=_0x5f5bac,_0x1e08d1=Math[_0x273816(0x25e)]();return _0x1e08d1;},'dropRate':function(){return _0x3576f6['dropRate'];},'dropRateBump':function(){const _0x589416=_0x5f5bac;return _0x3576f6[_0x589416(0x21d)];}},'fragmentShaderSource':new Cesium$3[(_0x5f5bac(0x1fa))]({'sources':[postProcessingPosition_frag]}),'outputTexture':this[_0x5f5bac(0x18e)][_0x5f5bac(0x226)],'preExecute':function(){const _0x2a1324=_0x5f5bac;_0xd3b8d[_0x2a1324(0x227)]['postProcessingPosition']['commandToExecute'][_0x2a1324(0x17d)]=_0xd3b8d[_0x2a1324(0x18e)][_0x2a1324(0x226)];}}),'postProcessingSpeed':new CustomPrimitive({'commandType':_0x5f5bac(0x252),'uniformMap':{'postProcessingPosition':function(){return _0xd3b8d['particlesTextures']['postProcessingPosition'];},'nextParticlesSpeed':function(){const _0x5c4996=_0x5f5bac;return _0xd3b8d['particlesTextures'][_0x5c4996(0x21b)];}},'fragmentShaderSource':new Cesium$3['ShaderSource']({'sources':[postProcessingSpeed_frag]}),'outputTexture':this[_0x5f5bac(0x18e)][_0x5f5bac(0x236)],'preExecute':function(){const _0x1a5dd0=_0x5f5bac;_0xd3b8d['primitives'][_0x1a5dd0(0x236)]['commandToExecute'][_0x1a5dd0(0x17d)]=_0xd3b8d['particlesTextures']['postProcessingSpeed'];}})};}}function _0x550f(_0x3b0c9f,_0x5e5328){const _0x597b50=_0x597b();return _0x550f=function(_0x550f57,_0x1d1498){_0x550f57=_0x550f57-0xfe;let _0x5b0913=_0x597b50[_0x550f57];if(_0x550f['skUIie']===undefined){var _0x3d0c04=function(_0xc5c8fa){const _0x3fc838='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x43d835='',_0x5ce718='';for(let _0x4a59a6=0x0,_0x1b4100,_0x18ab5b,_0x3929fc=0x0;_0x18ab5b=_0xc5c8fa['charAt'](_0x3929fc++);~_0x18ab5b&&(_0x1b4100=_0x4a59a6%0x4?_0x1b4100*0x40+_0x18ab5b:_0x18ab5b,_0x4a59a6++%0x4)?_0x43d835+=String['fromCharCode'](0xff&_0x1b4100>>(-0x2*_0x4a59a6&0x6)):0x0){_0x18ab5b=_0x3fc838['indexOf'](_0x18ab5b);}for(let _0x5d14c9=0x0,_0x595657=_0x43d835['length'];_0x5d14c9<_0x595657;_0x5d14c9++){_0x5ce718+='%'+('00'+_0x43d835['charCodeAt'](_0x5d14c9)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5ce718);};_0x550f['CJiVGe']=_0x3d0c04,_0x3b0c9f=arguments,_0x550f['skUIie']=!![];}const _0xf22975=_0x597b50[0x0],_0x263c54=_0x550f57+_0xf22975,_0x25a478=_0x3b0c9f[_0x263c54];return!_0x25a478?(_0x5b0913=_0x550f['CJiVGe'](_0x5b0913),_0x3b0c9f[_0x263c54]=_0x5b0913):_0x5b0913=_0x25a478,_0x5b0913;},_0x550f(_0x3b0c9f,_0x5e5328);}const Cesium$2=mars3d__namespace[_0x3eb257(0x12e)];class ParticleSystem{constructor(_0x3f0807,_0x165c6c,_0x43e303,_0x42f7f2){const _0x5aec16=_0x3eb257;this[_0x5aec16(0x114)]=_0x3f0807,_0x165c6c={..._0x165c6c},_0x165c6c[_0x5aec16(0x11d)]&&_0x165c6c[_0x5aec16(0x138)]&&(_0x165c6c['dimensions']={},_0x165c6c['dimensions']['lon']=_0x165c6c[_0x5aec16(0x1cf)],_0x165c6c['dimensions'][_0x5aec16(0x248)]=_0x165c6c['rows'],_0x165c6c[_0x5aec16(0x24e)][_0x5aec16(0x1b2)]=_0x165c6c['lev']||0x1,_0x165c6c[_0x5aec16(0x250)]={},_0x165c6c[_0x5aec16(0x250)][_0x5aec16(0x1d8)]=_0x165c6c['xmin'],_0x165c6c['lon']['max']=_0x165c6c[_0x5aec16(0x144)],_0x165c6c[_0x5aec16(0x248)]={},_0x165c6c[_0x5aec16(0x248)][_0x5aec16(0x1d8)]=_0x165c6c[_0x5aec16(0x1f2)],_0x165c6c[_0x5aec16(0x248)]['max']=_0x165c6c[_0x5aec16(0x1d3)],_0x165c6c[_0x5aec16(0x1b2)]={},_0x165c6c[_0x5aec16(0x1b2)][_0x5aec16(0x1d8)]=_0x165c6c[_0x5aec16(0x12a)]??0x1,_0x165c6c['lev'][_0x5aec16(0x1a8)]=_0x165c6c[_0x5aec16(0x193)]??0x1,_0x165c6c['U']={},_0x165c6c['U'][_0x5aec16(0x117)]=new Float32Array(_0x165c6c[_0x5aec16(0x11d)]),_0x165c6c['U'][_0x5aec16(0x1d8)]=_0x165c6c['umin']??Math[_0x5aec16(0x1d8)](..._0x165c6c[_0x5aec16(0x11d)]),_0x165c6c['U']['max']=_0x165c6c[_0x5aec16(0x23a)]??Math[_0x5aec16(0x1a8)](..._0x165c6c[_0x5aec16(0x11d)]),_0x165c6c['V']={},_0x165c6c['V'][_0x5aec16(0x117)]=new Float32Array(_0x165c6c[_0x5aec16(0x138)]),_0x165c6c['V'][_0x5aec16(0x1d8)]=_0x165c6c['vmin']??Math['min'](..._0x165c6c[_0x5aec16(0x138)]),_0x165c6c['V'][_0x5aec16(0x1a8)]=_0x165c6c[_0x5aec16(0x107)]??Math[_0x5aec16(0x1a8)](..._0x165c6c[_0x5aec16(0x138)])),this[_0x5aec16(0x20a)]=_0x165c6c,this['options']=_0x43e303,this[_0x5aec16(0x187)]=_0x42f7f2,this[_0x5aec16(0x214)]=new ParticlesComputing(this['context'],this[_0x5aec16(0x20a)],this[_0x5aec16(0x121)],this['viewerParameters']),this[_0x5aec16(0x21c)]=new ParticlesRendering(this['context'],this[_0x5aec16(0x20a)],this[_0x5aec16(0x121)],this['viewerParameters'],this[_0x5aec16(0x214)]);}['canvasResize'](_0x557bbb){const _0x277e34=_0x3eb257;this['particlesComputing'][_0x277e34(0x156)](),Object[_0x277e34(0x1dd)](this[_0x277e34(0x214)][_0x277e34(0x170)])[_0x277e34(0x20c)](_0x3fc65d=>{const _0x4af50b=_0x277e34;this['particlesComputing'][_0x4af50b(0x170)][_0x3fc65d][_0x4af50b(0x113)]();}),this[_0x277e34(0x21c)][_0x277e34(0x1b7)]['colorTable'][_0x277e34(0x113)](),Object[_0x277e34(0x1dd)](this[_0x277e34(0x21c)][_0x277e34(0x1ba)])['forEach'](_0x420143=>{const _0x1df53f=_0x277e34;this[_0x1df53f(0x21c)]['framebuffers'][_0x420143][_0x1df53f(0x113)]();}),this[_0x277e34(0x114)]=_0x557bbb,this[_0x277e34(0x214)]=new ParticlesComputing(this[_0x277e34(0x114)],this['data'],this[_0x277e34(0x121)],this[_0x277e34(0x187)]),this['particlesRendering']=new ParticlesRendering(this[_0x277e34(0x114)],this[_0x277e34(0x20a)],this[_0x277e34(0x121)],this[_0x277e34(0x187)],this[_0x277e34(0x214)]);}[_0x3eb257(0x15d)](){const _0x2f5eb4=_0x3eb257,_0xefe346=new Cesium$2[(_0x2f5eb4(0x1f0))]({'color':new Cesium$2[(_0x2f5eb4(0x1df))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2['Pass'][_0x2f5eb4(0x18d)]});Object[_0x2f5eb4(0x1dd)](this[_0x2f5eb4(0x21c)]['framebuffers'])[_0x2f5eb4(0x20c)](_0x44815d=>{const _0x291da3=_0x2f5eb4;_0xefe346['framebuffer']=this['particlesRendering']['framebuffers'][_0x44815d],_0xefe346[_0x291da3(0x13e)](this['context']);});}[_0x3eb257(0x160)](_0x229163){const _0x3e9e8a=_0x3eb257;this['clearFramebuffers'](),this[_0x3e9e8a(0x214)][_0x3e9e8a(0x156)](),this[_0x3e9e8a(0x214)][_0x3e9e8a(0x169)](this[_0x3e9e8a(0x114)],this[_0x3e9e8a(0x121)],this['viewerParameters']);if(_0x229163){const _0x53f228=this[_0x3e9e8a(0x21c)][_0x3e9e8a(0x19e)](this[_0x3e9e8a(0x121)]);this['particlesRendering'][_0x3e9e8a(0x227)][_0x3e9e8a(0x1be)]['geometry']=_0x53f228;const _0x120724=Cesium$2[_0x3e9e8a(0x1c9)][_0x3e9e8a(0x13d)]({'context':this[_0x3e9e8a(0x114)],'geometry':_0x53f228,'attributeLocations':this['particlesRendering'][_0x3e9e8a(0x227)]['segments']['attributeLocations'],'bufferUsage':Cesium$2[_0x3e9e8a(0x24c)]['STATIC_DRAW']});this[_0x3e9e8a(0x21c)][_0x3e9e8a(0x227)][_0x3e9e8a(0x1be)]['commandToExecute'][_0x3e9e8a(0x208)]=_0x120724;}}[_0x3eb257(0x175)](_0x3839cd){const _0x522005=_0x3eb257;let _0xa50321=![];this['options'][_0x522005(0x11a)]!==_0x3839cd['maxParticles']&&(_0xa50321=!![]),Object[_0x522005(0x1dd)](_0x3839cd)[_0x522005(0x20c)](_0x27fa5f=>{const _0x10fe6b=_0x522005;this[_0x10fe6b(0x121)][_0x27fa5f]=_0x3839cd[_0x27fa5f];}),this[_0x522005(0x160)](_0xa50321);}[_0x3eb257(0x256)](_0x14ce6c){const _0xef256f=_0x3eb257;Object['keys'](_0x14ce6c)[_0xef256f(0x20c)](_0x22ca70=>{const _0x3756c3=_0xef256f;this[_0x3756c3(0x187)][_0x22ca70]=_0x14ce6c[_0x22ca70];}),this[_0xef256f(0x160)](![]);}[_0x3eb257(0x113)](){const _0x1387db=_0x3eb257;clearTimeout(this[_0x1387db(0x247)]),this['particlesComputing'][_0x1387db(0x156)](),Object['keys'](this[_0x1387db(0x214)][_0x1387db(0x170)])['forEach'](_0x2d4f3d=>{const _0x3be685=_0x1387db;this['particlesComputing'][_0x3be685(0x170)][_0x2d4f3d][_0x3be685(0x113)]();}),this[_0x1387db(0x21c)][_0x1387db(0x1b7)][_0x1387db(0x1d0)]['destroy'](),Object[_0x1387db(0x1dd)](this['particlesRendering'][_0x1387db(0x1ba)])[_0x1387db(0x20c)](_0x6ab797=>{const _0x35812c=_0x1387db;this[_0x35812c(0x21c)]['framebuffers'][_0x6ab797][_0x35812c(0x113)]();});for(const _0x165c3d in this){delete this[_0x165c3d];}}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace[_0x3eb257(0x22c)]['BaseLayer'],DEF_OPTIONS={'particlesNumber':0x1000,'fixedHeight':0x0,'fadeOpacity':0.996,'dropRate':0.003,'dropRateBump':0.01,'speedFactor':0.5,'lineWidth':0x2,'colors':[_0x3eb257(0x229)]};class WindLayer extends BaseLayer$1{constructor(){const _0x221449=_0x3eb257;let _0x556811=arguments[_0x221449(0x259)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};_0x556811={...DEF_OPTIONS,..._0x556811},super(_0x556811),this[_0x221449(0x23c)](_0x556811);}get[_0x3eb257(0x22c)](){const _0x3c7ac=_0x3eb257;return this[_0x3c7ac(0x227)];}get[_0x3eb257(0x20a)](){return this['_data'];}set[_0x3eb257(0x20a)](_0x219ba1){const _0x1eece5=_0x3eb257;this[_0x1eece5(0x220)](_0x219ba1);}get[_0x3eb257(0x22f)](){const _0x50eefa=_0x3eb257;return this[_0x50eefa(0x121)][_0x50eefa(0x22f)];}set[_0x3eb257(0x22f)](_0x1c0548){const _0x595388=_0x3eb257;this[_0x595388(0x121)][_0x595388(0x22f)]=_0x1c0548,this['particleSystem']&&this[_0x595388(0x109)][_0x595388(0x175)]({'colors':_0x1c0548}),this[_0x595388(0x16a)]();}[_0x3eb257(0x188)](){}[_0x3eb257(0x10e)](){const _0x310a66=_0x3eb257;this[_0x310a66(0x139)]=this[_0x310a66(0x127)][_0x310a66(0x139)],this[_0x310a66(0x1a1)]=this[_0x310a66(0x127)][_0x310a66(0x1a1)],this[_0x310a66(0x227)]=new Cesium$1['PrimitiveCollection'](),this[_0x310a66(0x127)][_0x310a66(0x139)]['primitives'][_0x310a66(0x221)](this['primitives']),this[_0x310a66(0x187)]={'lonRange':new Cesium$1[(_0x310a66(0x136))](),'latRange':new Cesium$1[(_0x310a66(0x136))](),'pixelSize':0x0},this[_0x310a66(0x163)]=new Cesium$1['BoundingSphere'](Cesium$1[_0x310a66(0x217)][_0x310a66(0x1e6)],0.99*0x615299),this[_0x310a66(0x1f9)](),window[_0x310a66(0x23f)]('resize',this['resize'][_0x310a66(0x130)](this),![]),this[_0x310a66(0x17e)]=![],this[_0x310a66(0x123)]=![],this['_map']['on'](mars3d__namespace[_0x310a66(0x13b)][_0x310a66(0x106)],this['_onMapWhellEvent'],this),this[_0x310a66(0x127)]['on'](mars3d__namespace[_0x310a66(0x13b)][_0x310a66(0x1b3)],this['_onMouseDownEvent'],this),this[_0x310a66(0x127)]['on'](mars3d__namespace[_0x310a66(0x13b)][_0x310a66(0x1e0)],this[_0x310a66(0x166)],this),this[_0x310a66(0x127)]['on'](mars3d__namespace[_0x310a66(0x13b)]['mouseMove'],this['_onMouseMoveEvent'],this),this[_0x310a66(0x13f)]&&this['setData'](this[_0x310a66(0x13f)]);}[_0x3eb257(0x168)](){const _0x1ac7ee=_0x3eb257;window[_0x1ac7ee(0x11c)](_0x1ac7ee(0x16a),this['resize']),this['_map'][_0x1ac7ee(0x13a)](mars3d__namespace[_0x1ac7ee(0x13b)][_0x1ac7ee(0x189)],this['_onMap_preRenderEvent'],this),this[_0x1ac7ee(0x127)][_0x1ac7ee(0x13a)](mars3d__namespace['EventType'][_0x1ac7ee(0x106)],this['_onMapWhellEvent'],this),this[_0x1ac7ee(0x127)][_0x1ac7ee(0x13a)](mars3d__namespace['EventType'][_0x1ac7ee(0x1b3)],this[_0x1ac7ee(0x195)],this),this['_map'][_0x1ac7ee(0x13a)](mars3d__namespace[_0x1ac7ee(0x13b)][_0x1ac7ee(0x1e0)],this[_0x1ac7ee(0x166)],this),this[_0x1ac7ee(0x127)][_0x1ac7ee(0x13a)](mars3d__namespace[_0x1ac7ee(0x13b)]['mouseMove'],this[_0x1ac7ee(0x24f)],this),this[_0x1ac7ee(0x227)][_0x1ac7ee(0x1cd)](),this[_0x1ac7ee(0x127)]['scene'][_0x1ac7ee(0x227)][_0x1ac7ee(0x129)](this[_0x1ac7ee(0x227)]);}[_0x3eb257(0x16a)](){const _0x527f3a=_0x3eb257;if(!this[_0x527f3a(0x1cc)]||!this['particleSystem'])return;this[_0x527f3a(0x227)]['show']=![],this['primitives']['removeAll'](),this[_0x527f3a(0x127)][_0x527f3a(0x205)](mars3d__namespace[_0x527f3a(0x13b)][_0x527f3a(0x189)],this[_0x527f3a(0x1ec)],this);}[_0x3eb257(0x1ec)](_0x44919d){const _0x1a121f=_0x3eb257;this[_0x1a121f(0x109)][_0x1a121f(0x13c)](this['scene'][_0x1a121f(0x114)]),this['addPrimitives'](),this[_0x1a121f(0x227)][_0x1a121f(0x1cc)]=!![];}[_0x3eb257(0x1a9)](_0x39a245){const _0x5614c5=_0x3eb257;clearTimeout(this[_0x5614c5(0x1fc)]);if(!this[_0x5614c5(0x1cc)]||!this['particleSystem'])return;this[_0x5614c5(0x227)][_0x5614c5(0x1cc)]=![],this[_0x5614c5(0x1fc)]=setTimeout(()=>{const _0x593353=_0x5614c5;if(!this['show'])return;this[_0x593353(0x125)]();},0xc8);}[_0x3eb257(0x195)](_0x234f20){const _0x552f2a=_0x3eb257;this[_0x552f2a(0x17e)]=!![];}[_0x3eb257(0x24f)](_0x304134){const _0x576f3e=_0x3eb257;if(!this[_0x576f3e(0x1cc)]||!this[_0x576f3e(0x109)])return;this[_0x576f3e(0x17e)]&&(this['primitives']['show']=![],this['mouse_move']=!![]);}[_0x3eb257(0x166)](_0x39115d){const _0x8cb43c=_0x3eb257;if(!this[_0x8cb43c(0x1cc)]||!this[_0x8cb43c(0x109)])return;this[_0x8cb43c(0x17e)]&&this[_0x8cb43c(0x123)]&&this['redraw'](),this[_0x8cb43c(0x227)]['show']=!![],this[_0x8cb43c(0x17e)]=![],this[_0x8cb43c(0x123)]=![];}[_0x3eb257(0x125)](){const _0x2581ca=_0x3eb257;if(!this[_0x2581ca(0x127)]||!this[_0x2581ca(0x1cc)])return;this[_0x2581ca(0x1f9)](),this[_0x2581ca(0x109)][_0x2581ca(0x256)](this[_0x2581ca(0x187)]),this[_0x2581ca(0x227)][_0x2581ca(0x1cc)]=!![];}[_0x3eb257(0x220)](_0x379f51){const _0x40d7fe=_0x3eb257;this[_0x40d7fe(0x13f)]=_0x379f51,this['particleSystem']&&this[_0x40d7fe(0x109)]['destroy'](),this[_0x40d7fe(0x109)]=new ParticleSystem(this[_0x40d7fe(0x139)]['context'],_0x379f51,this['getOptions'](),this[_0x40d7fe(0x187)]),this[_0x40d7fe(0x12c)]();}[_0x3eb257(0x23c)](_0xac6938,_0x339b6d){const _0x1c6143=_0x3eb257;if(_0xac6938)for(const _0x2564f7 in _0xac6938){this[_0x2564f7]=_0xac6938[_0x2564f7];}this[_0x1c6143(0x109)]&&this[_0x1c6143(0x109)][_0x1c6143(0x175)](this[_0x1c6143(0x22b)]());}[_0x3eb257(0x22b)](){const _0x52900e=_0x3eb257,_0x551238=Math[_0x52900e(0x122)](Math[_0x52900e(0x16d)](this[_0x52900e(0x20d)]));return this['particlesNumber']=_0x551238*_0x551238,{'particlesTextureSize':_0x551238,'maxParticles':this[_0x52900e(0x20d)],'particleHeight':this[_0x52900e(0x19a)],'fadeOpacity':this[_0x52900e(0x230)],'dropRate':this[_0x52900e(0x1ce)],'dropRateBump':this[_0x52900e(0x21d)],'speedFactor':this[_0x52900e(0x1e2)],'lineWidth':this['lineWidth'],'globeLayer':this[_0x52900e(0x15f)],'WMS_URL':this[_0x52900e(0x1c2)],'colors':this['colors']};}[_0x3eb257(0x12c)](){const _0x553e84=_0x3eb257;this['primitives'][_0x553e84(0x221)](this[_0x553e84(0x109)][_0x553e84(0x214)][_0x553e84(0x227)][_0x553e84(0x245)]),this[_0x553e84(0x227)][_0x553e84(0x221)](this[_0x553e84(0x109)][_0x553e84(0x214)][_0x553e84(0x227)][_0x553e84(0x1de)]),this[_0x553e84(0x227)][_0x553e84(0x221)](this[_0x553e84(0x109)][_0x553e84(0x214)][_0x553e84(0x227)]['updatePosition']),this['primitives']['add'](this[_0x553e84(0x109)]['particlesComputing'][_0x553e84(0x227)][_0x553e84(0x226)]),this['primitives'][_0x553e84(0x221)](this[_0x553e84(0x109)][_0x553e84(0x214)][_0x553e84(0x227)][_0x553e84(0x236)]),this[_0x553e84(0x227)][_0x553e84(0x221)](this[_0x553e84(0x109)][_0x553e84(0x21c)]['primitives'][_0x553e84(0x1be)]),this[_0x553e84(0x227)][_0x553e84(0x221)](this['particleSystem'][_0x553e84(0x21c)][_0x553e84(0x227)]['trails']),this[_0x553e84(0x227)][_0x553e84(0x221)](this[_0x553e84(0x109)][_0x553e84(0x21c)]['primitives'][_0x553e84(0x1f4)]);}[_0x3eb257(0x1f9)](){const _0x3712d4=_0x3eb257;let _0x2097f4=this['camera'][_0x3712d4(0x124)](this[_0x3712d4(0x139)]['globe'][_0x3712d4(0x233)]);if(!_0x2097f4){const _0x32e27e=this[_0x3712d4(0x127)][_0x3712d4(0x231)]();_0x2097f4=Cesium$1['Rectangle'][_0x3712d4(0x1d9)](_0x32e27e[_0x3712d4(0x17c)],_0x32e27e['ymin'],_0x32e27e['xmax'],_0x32e27e[_0x3712d4(0x1d3)]);}const _0x1f91b2=Util[_0x3712d4(0x210)](_0x2097f4);this['viewerParameters'][_0x3712d4(0x11e)]['x']=_0x1f91b2[_0x3712d4(0x250)]['min'],this['viewerParameters'][_0x3712d4(0x11e)]['y']=_0x1f91b2[_0x3712d4(0x250)][_0x3712d4(0x1a8)],this[_0x3712d4(0x187)][_0x3712d4(0x103)]['x']=_0x1f91b2[_0x3712d4(0x248)][_0x3712d4(0x1d8)],this[_0x3712d4(0x187)][_0x3712d4(0x103)]['y']=_0x1f91b2[_0x3712d4(0x248)][_0x3712d4(0x1a8)];const _0x419bca=this[_0x3712d4(0x1a1)][_0x3712d4(0x1a2)](this['globeBoundingSphere'],this[_0x3712d4(0x139)][_0x3712d4(0x172)],this[_0x3712d4(0x139)][_0x3712d4(0x249)]);_0x419bca>0x0&&(this[_0x3712d4(0x187)][_0x3712d4(0x238)]=_0x419bca);}}mars3d__namespace[_0x3eb257(0x1e7)][_0x3eb257(0x184)]('wind',WindLayer),mars3d__namespace[_0x3eb257(0x22c)][_0x3eb257(0x174)]=WindLayer;class CanvasParticle{constructor(){const _0x24823d=_0x3eb257;this['lng']=null,this[_0x24823d(0x248)]=null,this['tlng']=null,this[_0x24823d(0x198)]=null,this['age']=null;}}class CanvasWindField{constructor(_0x1bd15d,_0x2608f0){const _0x5bd234=_0x3eb257;this['rows']=_0x1bd15d[_0x5bd234(0x181)],this[_0x5bd234(0x1cf)]=_0x1bd15d['cols'],this[_0x5bd234(0x17c)]=_0x1bd15d[_0x5bd234(0x17c)],this[_0x5bd234(0x144)]=_0x1bd15d[_0x5bd234(0x144)],this[_0x5bd234(0x1f2)]=_0x1bd15d[_0x5bd234(0x1f2)],this['ymax']=_0x1bd15d[_0x5bd234(0x1d3)],this[_0x5bd234(0x1b9)]=[];const _0x423447=_0x1bd15d[_0x5bd234(0x11d)],_0x4f62dc=_0x1bd15d[_0x5bd234(0x138)];let _0x4d4094=![];_0x423447['length']===this[_0x5bd234(0x181)]&&_0x423447[0x0]['length']===this[_0x5bd234(0x1cf)]&&(_0x4d4094=!![]);let _0x462f5b=0x0,_0xa7ea93=null,_0x5c5e2f=null;for(let _0x3ae288=0x0;_0x3ae288<this[_0x5bd234(0x181)];_0x3ae288++){_0xa7ea93=[];for(let _0x50cb69=0x0;_0x50cb69<this[_0x5bd234(0x1cf)];_0x50cb69++,_0x462f5b++){_0x4d4094?_0x5c5e2f=this[_0x5bd234(0x234)](_0x423447[_0x3ae288][_0x50cb69],_0x4f62dc[_0x3ae288][_0x50cb69]):_0x5c5e2f=this[_0x5bd234(0x234)](_0x423447[_0x462f5b],_0x4f62dc[_0x462f5b]),_0xa7ea93[_0x5bd234(0x17b)](_0x5c5e2f);}this['grid'][_0x5bd234(0x17b)](_0xa7ea93);}_0x2608f0&&this[_0x5bd234(0x1b9)][_0x5bd234(0x19b)]();}[_0x3eb257(0x133)](_0x341b8b,_0x320de9){const _0x23e211=_0x3eb257,_0x16955d=(_0x341b8b-this[_0x23e211(0x17c)])/(this['xmax']-this[_0x23e211(0x17c)])*(this[_0x23e211(0x1cf)]-0x1),_0x384414=(this[_0x23e211(0x1d3)]-_0x320de9)/(this['ymax']-this[_0x23e211(0x1f2)])*(this[_0x23e211(0x181)]-0x1);return{'x':_0x16955d,'y':_0x384414};}[_0x3eb257(0x225)](_0x48a52a,_0x3a4ab5){const _0x5d15e8=_0x3eb257;if(_0x48a52a<0x0||_0x48a52a>=this[_0x5d15e8(0x1cf)]||_0x3a4ab5>=this[_0x5d15e8(0x181)])return[0x0,0x0,0x0];const _0x14867e=Math[_0x5d15e8(0x158)](_0x48a52a),_0x2ae2cd=Math[_0x5d15e8(0x158)](_0x3a4ab5);if(_0x14867e===_0x48a52a&&_0x2ae2cd===_0x3a4ab5)return this[_0x5d15e8(0x1b9)][_0x3a4ab5][_0x48a52a];const _0x49d11d=_0x14867e+0x1,_0x3952bb=_0x2ae2cd+0x1,_0x12366e=this['getUVByXY'](_0x14867e,_0x2ae2cd),_0x44b988=this['getUVByXY'](_0x49d11d,_0x2ae2cd),_0x373ac4=this[_0x5d15e8(0x225)](_0x14867e,_0x3952bb),_0x26e987=this[_0x5d15e8(0x225)](_0x49d11d,_0x3952bb);let _0x37588a=null;try{_0x37588a=this['_bilinearInterpolation'](_0x48a52a-_0x14867e,_0x3a4ab5-_0x2ae2cd,_0x12366e,_0x44b988,_0x373ac4,_0x26e987);}catch(_0x92f098){console[_0x5d15e8(0x23e)](_0x48a52a,_0x3a4ab5);}return _0x37588a;}[_0x3eb257(0x191)](_0x5b979f,_0x253084,_0x46425a,_0x10ba91,_0x4c988b,_0x1c9e20){const _0x3acc12=_0x3eb257,_0x1225ce=0x1-_0x5b979f,_0x3c445=0x1-_0x253084,_0x2d342c=_0x1225ce*_0x3c445,_0x20b1cf=_0x5b979f*_0x3c445,_0x674a42=_0x1225ce*_0x253084,_0x1d5a0c=_0x5b979f*_0x253084,_0x21a214=_0x46425a[0x0]*_0x2d342c+_0x10ba91[0x0]*_0x20b1cf+_0x4c988b[0x0]*_0x674a42+_0x1c9e20[0x0]*_0x1d5a0c,_0xc80f86=_0x46425a[0x1]*_0x2d342c+_0x10ba91[0x1]*_0x20b1cf+_0x4c988b[0x1]*_0x674a42+_0x1c9e20[0x1]*_0x1d5a0c;return this[_0x3acc12(0x234)](_0x21a214,_0xc80f86);}[_0x3eb257(0x234)](_0x25a0c6,_0x18af2d){const _0x33877b=_0x3eb257;return[+_0x25a0c6,+_0x18af2d,Math[_0x33877b(0x16d)](_0x25a0c6*_0x25a0c6+_0x18af2d*_0x18af2d)];}[_0x3eb257(0x1a3)](_0x8475ac,_0x3e44f1){const _0x21a62a=_0x3eb257;if(!this[_0x21a62a(0x216)](_0x8475ac,_0x3e44f1))return null;const _0x1db0cb=this[_0x21a62a(0x133)](_0x8475ac,_0x3e44f1),_0x1eb6b0=this[_0x21a62a(0x225)](_0x1db0cb['x'],_0x1db0cb['y']);return _0x1eb6b0;}[_0x3eb257(0x216)](_0x49b043,_0x19b20c){const _0x2eb5f4=_0x3eb257;return _0x49b043>=this['xmin']&&_0x49b043<=this[_0x2eb5f4(0x144)]&&_0x19b20c>=this['ymin']&&_0x19b20c<=this[_0x2eb5f4(0x1d3)]?!![]:![];}[_0x3eb257(0x1f6)](){const _0x5ae5c8=_0x3eb257,_0x44dbc9=fRandomByfloat(this[_0x5ae5c8(0x17c)],this[_0x5ae5c8(0x144)]),_0x221167=fRandomByfloat(this[_0x5ae5c8(0x1f2)],this[_0x5ae5c8(0x1d3)]);return{'lat':_0x221167,'lng':_0x44dbc9};}}function fRandomByfloat(_0x32d0ee,_0x54ee01){const _0x5018be=_0x3eb257;return _0x32d0ee+Math[_0x5018be(0x25e)]()*(_0x54ee01-_0x32d0ee);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x3eb257(0x22c)]['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(){const _0x411a8d=_0x3eb257;let _0x4f9e31=arguments[_0x411a8d(0x259)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};super(_0x4f9e31),this[_0x411a8d(0x23c)](_0x4f9e31),this[_0x411a8d(0x1f1)]=null;}[_0x3eb257(0x23c)](_0x327c3d,_0x352f59){const _0x5a30b8=_0x3eb257;this[_0x5a30b8(0x17a)]=[0x0,0x0],this['particles']=[],this[_0x5a30b8(0x10a)]=_0x327c3d['speedRate']||0x32,this['_particlesNumber']=_0x327c3d[_0x5a30b8(0x20d)]||0x1000,this[_0x5a30b8(0x140)]=_0x327c3d[_0x5a30b8(0x1cb)]||0x78,this[_0x5a30b8(0xff)]=0x3e8/(_0x327c3d[_0x5a30b8(0x12b)]||0xa),this['_pointerEvents']=this[_0x5a30b8(0x121)][_0x5a30b8(0x16e)]??![],this[_0x5a30b8(0x196)]=_0x327c3d['color']||'#ffffff',this[_0x5a30b8(0x1a0)]=_0x327c3d['lineWidth']||0x1,this['fixedHeight']=_0x327c3d[_0x5a30b8(0x19a)]??0x0,this['reverseY']=_0x327c3d['reverseY']??![];}get[_0x3eb257(0x22c)](){const _0x4b4d5f=_0x3eb257;return this[_0x4b4d5f(0x1f1)];}get[_0x3eb257(0x10b)](){const _0x6f48a9=_0x3eb257;return this[_0x6f48a9(0x127)][_0x6f48a9(0x139)]['canvas']['clientWidth'];}get[_0x3eb257(0x1c3)](){const _0x273d33=_0x3eb257;return this[_0x273d33(0x127)]['scene'][_0x273d33(0x1f1)][_0x273d33(0x137)];}get[_0x3eb257(0x16e)](){const _0x4dd808=_0x3eb257;return this[_0x4dd808(0x165)];}set['pointerEvents'](_0x1d415d){const _0x5604d2=_0x3eb257;this[_0x5604d2(0x165)]=_0x1d415d;if(!this[_0x5604d2(0x1f1)])return;_0x1d415d?this[_0x5604d2(0x1f1)]['style'][_0x5604d2(0x176)]='all':this[_0x5604d2(0x1f1)][_0x5604d2(0x24d)][_0x5604d2(0x176)]='none';}get['speedRate'](){const _0x1ab9f6=_0x3eb257;return this[_0x1ab9f6(0x1b0)];}set[_0x3eb257(0x10a)](_0x100fd0){const _0x515ce9=_0x3eb257;this[_0x515ce9(0x1b0)]=(0x64-(_0x100fd0>0x63?0x63:_0x100fd0))*0x64,this[_0x515ce9(0x1db)]();}get[_0x3eb257(0x20d)](){const _0xbe2066=_0x3eb257;return this[_0xbe2066(0x1b5)];}set['particlesNumber'](_0x30ffd6){const _0x1ac2f1=_0x3eb257;this[_0x1ac2f1(0x1b5)]=_0x30ffd6,clearTimeout(this[_0x1ac2f1(0x25b)]),this['_canrefresh']=setTimeout(()=>{const _0x18f8b7=_0x1ac2f1;this[_0x18f8b7(0x125)]();},0x1f4);}get['maxAge'](){const _0x2ae10a=_0x3eb257;return this[_0x2ae10a(0x140)];}set['maxAge'](_0x58ed38){const _0x589266=_0x3eb257;this['_maxAge']=_0x58ed38,clearTimeout(this['_canrefresh']),this[_0x589266(0x25b)]=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x3eb257(0x20a)](){return this['windData'];}set[_0x3eb257(0x20a)](_0x3296a6){this['setData'](_0x3296a6);}[_0x3eb257(0x21a)](_0x35e82b){const _0x8f3e4b=_0x3eb257;_0x35e82b?this[_0x8f3e4b(0x10e)]():(this[_0x8f3e4b(0x1b1)]&&(this[_0x8f3e4b(0x121)][_0x8f3e4b(0x20a)]=this[_0x8f3e4b(0x1b1)]),this[_0x8f3e4b(0x168)]());}[_0x3eb257(0x188)](){}[_0x3eb257(0x10e)](){const _0x2ec9b2=_0x3eb257;this['canvas']=this[_0x2ec9b2(0x14a)](),this['canvasContext']=this[_0x2ec9b2(0x1f1)][_0x2ec9b2(0x102)]('2d'),this[_0x2ec9b2(0x185)](),this['options'][_0x2ec9b2(0x20a)]&&this[_0x2ec9b2(0x220)](this[_0x2ec9b2(0x121)][_0x2ec9b2(0x20a)]);}[_0x3eb257(0x168)](){const _0x48c21e=_0x3eb257;this[_0x48c21e(0x104)](),this[_0x48c21e(0x1d4)](),this['canvas']&&(this[_0x48c21e(0x127)]['container'][_0x48c21e(0x1f7)](this[_0x48c21e(0x1f1)]),delete this[_0x48c21e(0x1f1)]);}['_createCanvas'](){const _0x5dc42c=_0x3eb257,_0xdfdd2a=document[_0x5dc42c(0x126)](_0x5dc42c(0x1f1));_0xdfdd2a[_0x5dc42c(0x24d)][_0x5dc42c(0x10f)]=_0x5dc42c(0x178),_0xdfdd2a['style'][_0x5dc42c(0x157)]='0px',_0xdfdd2a[_0x5dc42c(0x24d)][_0x5dc42c(0x25c)]='0px',_0xdfdd2a[_0x5dc42c(0x24d)][_0x5dc42c(0x180)]=_0x5dc42c(0x1c5),_0xdfdd2a[_0x5dc42c(0x24d)][_0x5dc42c(0x1ab)]=_0x5dc42c(0x1c5),_0xdfdd2a[_0x5dc42c(0x24d)]['pointerEvents']=this[_0x5dc42c(0x165)]?'auto':_0x5dc42c(0x173),_0xdfdd2a[_0x5dc42c(0x24d)]['zIndex']=0xa,_0xdfdd2a[_0x5dc42c(0x148)]('id',_0x5dc42c(0x16c)),_0xdfdd2a[_0x5dc42c(0x148)](_0x5dc42c(0x1ca),_0x5dc42c(0x16c)),this['_map'][_0x5dc42c(0x131)][_0x5dc42c(0x257)](_0xdfdd2a);const _0xb2d84b=this['_map'][_0x5dc42c(0x139)];return _0xdfdd2a[_0x5dc42c(0x180)]=_0xb2d84b[_0x5dc42c(0x1f1)][_0x5dc42c(0x15a)],_0xdfdd2a[_0x5dc42c(0x1ab)]=_0xb2d84b[_0x5dc42c(0x1f1)][_0x5dc42c(0x137)],_0xdfdd2a;}[_0x3eb257(0x16a)](){const _0xc3ef17=_0x3eb257;this[_0xc3ef17(0x1f1)]&&(this[_0xc3ef17(0x1f1)][_0xc3ef17(0x180)]=this[_0xc3ef17(0x10b)],this[_0xc3ef17(0x1f1)][_0xc3ef17(0x1ab)]=this[_0xc3ef17(0x1c3)]);}['bindEvent'](){const _0x48d585=_0x3eb257,_0x561ffd=this;let _0x97a115=Date[_0x48d585(0x177)]();(function _0x22bdc8(){const _0x3be165=_0x48d585;_0x561ffd[_0x3be165(0x25a)]=window['requestAnimationFrame'](_0x22bdc8);const _0x3caa24=Date[_0x3be165(0x177)](),_0x40cf54=_0x3caa24-_0x97a115;_0x40cf54>_0x561ffd[_0x3be165(0xff)]&&(_0x97a115=_0x3caa24-_0x40cf54%_0x561ffd[_0x3be165(0xff)],_0x561ffd['update']());}(),window[_0x48d585(0x23f)](_0x48d585(0x16a),this[_0x48d585(0x16a)][_0x48d585(0x130)](this),![]),this[_0x48d585(0x17e)]=![],this[_0x48d585(0x123)]=![],this[_0x48d585(0x127)]['on'](mars3d__namespace[_0x48d585(0x13b)][_0x48d585(0x106)],this[_0x48d585(0x1a9)],this),this[_0x48d585(0x127)]['on'](mars3d__namespace[_0x48d585(0x13b)][_0x48d585(0x1b3)],this[_0x48d585(0x195)],this),this[_0x48d585(0x127)]['on'](mars3d__namespace[_0x48d585(0x13b)][_0x48d585(0x1e0)],this[_0x48d585(0x166)],this));}['unbindEvent'](){const _0x2d6756=_0x3eb257;window[_0x2d6756(0x15c)](this[_0x2d6756(0x25a)]),delete this[_0x2d6756(0x25a)],window[_0x2d6756(0x11c)](_0x2d6756(0x16a),this[_0x2d6756(0x16a)]),this[_0x2d6756(0x127)][_0x2d6756(0x13a)](mars3d__namespace[_0x2d6756(0x13b)][_0x2d6756(0x106)],this[_0x2d6756(0x1a9)],this),this[_0x2d6756(0x127)]['off'](mars3d__namespace[_0x2d6756(0x13b)]['mouseDown'],this[_0x2d6756(0x195)],this),this[_0x2d6756(0x127)][_0x2d6756(0x13a)](mars3d__namespace[_0x2d6756(0x13b)]['mouseUp'],this[_0x2d6756(0x166)],this),this[_0x2d6756(0x127)][_0x2d6756(0x13a)](mars3d__namespace[_0x2d6756(0x13b)][_0x2d6756(0x135)],this[_0x2d6756(0x24f)],this);}['_onMapWhellEvent'](_0x5ec506){const _0x46cdcf=_0x3eb257;clearTimeout(this[_0x46cdcf(0x1fc)]);if(!this[_0x46cdcf(0x1cc)]||!this['canvas'])return;this[_0x46cdcf(0x1f1)][_0x46cdcf(0x24d)][_0x46cdcf(0x186)]=_0x46cdcf(0x105),this['refreshTimer']=setTimeout(()=>{const _0x3fb6e1=_0x46cdcf;if(!this[_0x3fb6e1(0x1cc)])return;this['redraw'](),this[_0x3fb6e1(0x1f1)]['style']['visibility']='visible';},0xc8);}[_0x3eb257(0x195)](_0x1bdd64){const _0x2bcec3=_0x3eb257;this[_0x2bcec3(0x17e)]=!![],this[_0x2bcec3(0x127)]['off'](mars3d__namespace[_0x2bcec3(0x13b)][_0x2bcec3(0x135)],this[_0x2bcec3(0x24f)],this),this[_0x2bcec3(0x127)]['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x2bcec3(0x24f)],this);}[_0x3eb257(0x24f)](_0xd43580){const _0x2c6908=_0x3eb257;if(!this[_0x2c6908(0x1cc)]||!this[_0x2c6908(0x1f1)])return;this['mouse_down']&&(this[_0x2c6908(0x1f1)][_0x2c6908(0x24d)]['visibility']=_0x2c6908(0x105),this[_0x2c6908(0x123)]=!![]);}[_0x3eb257(0x166)](_0x2aaeee){const _0x4c4c61=_0x3eb257;if(!this['show']||!this['canvas'])return;this['_map']['off'](mars3d__namespace[_0x4c4c61(0x13b)][_0x4c4c61(0x135)],this['_onMouseMoveEvent'],this),this['mouse_down']&&this[_0x4c4c61(0x123)]&&this['redraw'](),this[_0x4c4c61(0x1f1)][_0x4c4c61(0x24d)][_0x4c4c61(0x186)]=_0x4c4c61(0x18b),this['mouse_down']=![],this[_0x4c4c61(0x123)]=![];}['redraw'](){const _0xa0c541=_0x3eb257;if(!this['show']||!this[_0xa0c541(0x237)])return;this['particles']=[],this[_0xa0c541(0x1c1)]();}['setData'](_0x4b618b){const _0x29ebd9=_0x3eb257;this[_0x29ebd9(0x104)](),this['windData']=_0x4b618b,this[_0x29ebd9(0x237)]=new CanvasWindField(this[_0x29ebd9(0x1b1)],this['reverseY']),this['drawWind']();}[_0x3eb257(0x1c1)](){const _0x1c3a00=_0x3eb257;this[_0x1c3a00(0x1db)]();for(let _0x10d250=0x0;_0x10d250<this['particlesNumber'];_0x10d250++){const _0x54e1b1=this['randomParticle'](new CanvasParticle());this[_0x1c3a00(0x223)][_0x1c3a00(0x17b)](_0x54e1b1);}this[_0x1c3a00(0x197)]['fillStyle']=_0x1c3a00(0x1bd),this[_0x1c3a00(0x197)][_0x1c3a00(0x111)]=0.6,this[_0x1c3a00(0x162)]();}[_0x3eb257(0x1db)](){const _0x5a2c62=_0x3eb257;if(!this[_0x5a2c62(0x237)])return;this[_0x5a2c62(0x17a)]=[(this[_0x5a2c62(0x237)]['xmax']-this['windField'][_0x5a2c62(0x17c)])/this[_0x5a2c62(0x10a)],(this[_0x5a2c62(0x237)][_0x5a2c62(0x1d3)]-this[_0x5a2c62(0x237)][_0x5a2c62(0x1f2)])/this[_0x5a2c62(0x10a)]];}[_0x3eb257(0x162)](){const _0xe6f1f=_0x3eb257;if(!this['show']||this[_0xe6f1f(0x223)]['length']<=0x0)return;let _0x24db9c=null,_0x3687ec=null,_0xf94783=null;for(let _0x5056c7=0x0,_0x2a3a64=this[_0xe6f1f(0x223)]['length'];_0x5056c7<_0x2a3a64;_0x5056c7++){const _0xe6c929=this[_0xe6f1f(0x223)][_0x5056c7];_0xe6c929[_0xe6f1f(0x1b6)]<=0x0&&this[_0xe6f1f(0x1d2)](_0xe6c929);if(_0xe6c929[_0xe6f1f(0x1b6)]>0x0){const _0x1d06c8=_0xe6c929[_0xe6f1f(0x1e1)],_0x59dc9f=_0xe6c929['tlat'];_0xf94783=this[_0xe6f1f(0x237)]['getUVByPoint'](_0x1d06c8,_0x59dc9f),_0xf94783?(_0x24db9c=_0x1d06c8+this[_0xe6f1f(0x17a)][0x0]*_0xf94783[0x0],_0x3687ec=_0x59dc9f+this[_0xe6f1f(0x17a)][0x1]*_0xf94783[0x1],_0xe6c929['lng']=_0x1d06c8,_0xe6c929['lat']=_0x59dc9f,_0xe6c929[_0xe6f1f(0x1e1)]=_0x24db9c,_0xe6c929[_0xe6f1f(0x198)]=_0x3687ec,_0xe6c929[_0xe6f1f(0x1b6)]--):_0xe6c929[_0xe6f1f(0x1b6)]=0x0;}}this[_0xe6f1f(0x246)]();}[_0x3eb257(0x212)](_0x3d4e90,_0x14ff62,_0x505573){const _0x142007=_0x3eb257,_0x14912a=Cesium[_0x142007(0x217)]['fromDegrees'](_0x3d4e90,_0x14ff62,this['fixedHeight']),_0x8ccd0a=this[_0x142007(0x127)][_0x142007(0x139)];if(_0x8ccd0a[_0x142007(0x18f)]===Cesium[_0x142007(0x151)]['SCENE3D']){const _0x10f184=new Cesium[(_0x142007(0x1fd))](_0x8ccd0a[_0x142007(0x149)][_0x142007(0x233)],_0x8ccd0a[_0x142007(0x1a1)][_0x142007(0x171)]),_0x57c8f5=_0x10f184['isPointVisible'](_0x14912a);if(!_0x57c8f5)return _0x505573[_0x142007(0x1b6)]=0x0,null;}const _0x5c94e8=Cesium[_0x142007(0x194)]['wgs84ToWindowCoordinates'](this[_0x142007(0x127)]['scene'],_0x14912a);return _0x5c94e8?[_0x5c94e8['x'],_0x5c94e8['y']]:null;}[_0x3eb257(0x246)](){const _0x5c9a74=_0x3eb257,_0x9c42b2=this,_0xd5b23b=this['particles'];this[_0x5c9a74(0x197)][_0x5c9a74(0x1a0)]=_0x9c42b2[_0x5c9a74(0x1a0)],this[_0x5c9a74(0x197)][_0x5c9a74(0x154)]=_0x5c9a74(0x12d),this['canvasContext'][_0x5c9a74(0x1ff)](0x0,0x0,this[_0x5c9a74(0x10b)],this[_0x5c9a74(0x1c3)]),this[_0x5c9a74(0x197)][_0x5c9a74(0x154)]=_0x5c9a74(0x1d6),this[_0x5c9a74(0x197)][_0x5c9a74(0x111)]=0.9,this['canvasContext'][_0x5c9a74(0x183)](),this[_0x5c9a74(0x197)][_0x5c9a74(0x18a)]=this[_0x5c9a74(0x196)];const _0x34ab5e=this[_0x5c9a74(0x127)][_0x5c9a74(0x139)]['mode']!==Cesium[_0x5c9a74(0x151)][_0x5c9a74(0x182)];for(let _0x1f719f=0x0,_0x4e9b50=_0xd5b23b[_0x5c9a74(0x259)];_0x1f719f<_0x4e9b50;_0x1f719f++){const _0x2bd73b=_0xd5b23b[_0x1f719f],_0x44f84c=_0x9c42b2[_0x5c9a74(0x212)](_0x2bd73b['lng'],_0x2bd73b[_0x5c9a74(0x248)],_0x2bd73b),_0x1add1b=_0x9c42b2[_0x5c9a74(0x212)](_0x2bd73b[_0x5c9a74(0x1e1)],_0x2bd73b[_0x5c9a74(0x198)],_0x2bd73b);if(_0x44f84c!=null&&_0x1add1b!=null){const _0x5e3e5d=Math[_0x5c9a74(0x1ee)](_0x44f84c[0x0]-_0x1add1b[0x0]);if(_0x34ab5e&&_0x5e3e5d>=_0x9c42b2[_0x5c9a74(0x10b)]);else _0x9c42b2[_0x5c9a74(0x197)][_0x5c9a74(0x1a4)](_0x44f84c[0x0],_0x44f84c[0x1]),_0x9c42b2[_0x5c9a74(0x197)][_0x5c9a74(0x20f)](_0x1add1b[0x0],_0x1add1b[0x1]);}}this[_0x5c9a74(0x197)][_0x5c9a74(0x110)]();}[_0x3eb257(0x1d2)](_0x436cc4){const _0x58dcc1=_0x3eb257;let _0x3cc878,_0x3b2e1b;for(let _0x159145=0x0;_0x159145<0x1e;_0x159145++){_0x3cc878=this[_0x58dcc1(0x237)][_0x58dcc1(0x1f6)](),_0x3b2e1b=this['windField'][_0x58dcc1(0x1a3)](_0x3cc878[_0x58dcc1(0x152)],_0x3cc878[_0x58dcc1(0x248)]);if(_0x3b2e1b&&_0x3b2e1b[0x2]>0x0)break;}if(!_0x3b2e1b)return _0x436cc4;const _0x106735=_0x3cc878[_0x58dcc1(0x152)]+this['calc_speedRate'][0x0]*_0x3b2e1b[0x0],_0x3d2bcc=_0x3cc878[_0x58dcc1(0x248)]+this['calc_speedRate'][0x1]*_0x3b2e1b[0x1];return _0x436cc4[_0x58dcc1(0x152)]=_0x3cc878[_0x58dcc1(0x152)],_0x436cc4['lat']=_0x3cc878[_0x58dcc1(0x248)],_0x436cc4[_0x58dcc1(0x1e1)]=_0x106735,_0x436cc4[_0x58dcc1(0x198)]=_0x3d2bcc,_0x436cc4[_0x58dcc1(0x1b6)]=Math['round'](Math[_0x58dcc1(0x25e)]()*this['maxAge']),_0x436cc4;}[_0x3eb257(0x104)](){const _0x1f59a0=_0x3eb257;this['particles']=[],delete this[_0x1f59a0(0x237)],delete this['windData'];}}mars3d__namespace[_0x3eb257(0x1e7)][_0x3eb257(0x184)]('canvasWind',CanvasWindLayer),mars3d__namespace[_0x3eb257(0x22c)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x3eb257(0x253)]=WindUtil,exports[_0x3eb257(0x1fb)]=CanvasWindLayer,exports['WindLayer']=WindLayer,exports[_0x3eb257(0x253)]=WindUtil,Object[_0x3eb257(0x22d)](exports,_0x3eb257(0x19f),{'value':!![]});
}));
