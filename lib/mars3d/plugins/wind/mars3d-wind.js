/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.4.14
 * 编译日期：2022-11-23 15:09:35
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-06-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';var _0x30f976=_0x458d;(function(_0x21e1fe,_0x43d58d){var _0x583a9f=_0x458d,_0xb576ab=_0x21e1fe();while(!![]){try{var _0x4cbf61=-parseInt(_0x583a9f(0x19d))/0x1*(parseInt(_0x583a9f(0x159))/0x2)+-parseInt(_0x583a9f(0x18d))/0x3+parseInt(_0x583a9f(0x15a))/0x4+parseInt(_0x583a9f(0xff))/0x5+parseInt(_0x583a9f(0x218))/0x6+parseInt(_0x583a9f(0x1d4))/0x7+parseInt(_0x583a9f(0x150))/0x8;if(_0x4cbf61===_0x43d58d)break;else _0xb576ab['push'](_0xb576ab['shift']());}catch(_0x1ffe39){_0xb576ab['push'](_0xb576ab['shift']());}}}(_0x5343,0x275d1));function _0x5343(){var _0x1d823a=['getWind','geometry','south','ceil','getOptions','getUVByXY','canvas','auto','2080JbzULK','921848TsovJh','dropRateBump','@@iterator','getOwnPropertyDescriptor','commandList','enumerable','PI_OVER_TWO','random','lineWidth','TextureMagnificationFilter','particlesWind','_createCanvas','colorTable','setAttribute','getExtent','options','particlesTextures','rawRenderState','framebuffers','framebuffer','zIndex','cols','fillRect','color','blue','drawingBufferWidth','rgb(206,255,255)','name','reverse','Cartesian3','min','age','PixelFormat','umax','Cartesian2','appendChild','Sampler','Compute','uniform\x20sampler2D\x20segmentsColorTexture;\x0d\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0d\x0a\x0d\x0auniform\x20sampler2D\x20currentTrailsColor;\x0d\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0d\x0a\x0d\x0auniform\x20float\x20fadeOpacity;\x0d\x0a\x0d\x0avarying\x20vec2\x20textureCoordinate;\x0d\x0a\x0d\x0avoid\x20main()\x20{\x0d\x0a\x20\x20\x20\x20vec4\x20pointsColor\x20=\x20texture2D(segmentsColorTexture,\x20textureCoordinate);\x0d\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture2D(currentTrailsColor,\x20textureCoordinate);\x0d\x0a\x0d\x0a\x20\x20\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0\x20*\x20trailsColor)\x20/\x20255.0;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0d\x0a\x0d\x0a\x20\x20\x20\x20float\x20pointsDepth\x20=\x20texture2D(segmentsDepthTexture,\x20textureCoordinate).r;\x0d\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture2D(trailsDepthTexture,\x20textureCoordinate).r;\x0d\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture2D(czm_globeDepthTexture,\x20textureCoordinate));\x0d\x0a\x0d\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(0.0);\x0d\x0a\x20\x20\x20\x20if\x20(pointsDepth\x20<\x20globeDepth)\x20{\x0d\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20gl_FragColor\x20+\x20pointsColor;\x0d\x0a\x20\x20\x20\x20}\x0d\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0d\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20gl_FragColor\x20+\x20trailsColor;\x0d\x0a\x20\x20\x20\x20}\x0d\x0a\x20\x20\x20\x20gl_FragDepthEXT\x20=\x20min(pointsDepth,\x20trailsDepth);\x0d\x0a}','wind','#ffffff','uniformMap','camera','umin','fill','fromCssColorString','strokeStyle','postProcessingPosition','mouseUp','TWO_PI','_bilinearInterpolation','570426oKmbIv','createRenderingPrimitives','from','attribute\x20vec3\x20position;\x0d\x0aattribute\x20vec2\x20st;\x0d\x0a\x0d\x0avarying\x20vec2\x20textureCoordinate;\x0d\x0a\x0d\x0avoid\x20main()\x20{\x0d\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20st;\x0d\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(position,\x201.0);\x0d\x0a}','100%','particlesComputing','forEach','DISABLE_LOG_DEPTH_FRAGMENT_WRITE','addPrimitives','max','applyViewerParameters','NEAREST','_randomParticle','PrimitiveType','PixelDatatype','reverseY','157HEddoD','autoClear','onmessage','grid','left','clearCommand','defined','width','DEPTH_COMPONENT','function','maxParticles','refreshTimer','north','_canrefresh','container','globalCompositeOperation','style','frameRate','wheel','object','OPAQUE','fromCache','Set','toGridXY','setGeometry','beginPath','_tomap','pointer-events','none','PI_OVER_THREE','toString','getContext','getOwnPropertyDescriptors','value','globeLayer','Invalid\x20attempt\x20to\x20spread\x20non-iterable\x20instance.\x0aIn\x20order\x20to\x20be\x20iterable,\x20non-array\x20objects\x20must\x20have\x20a\x20[Symbol.iterator]()\x20method.','screen','register','requestAnimationFrame','pow','frameTime','Cesium','attribute\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20normal\x0aattribute\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20postProcessingSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0avarying\x20float\x20speedNormalization;\x0a\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x20\x0a\x20\x20\x20\x20float\x20a\x20=\x206378137.0;\x20//\x20Semi-major\x20axis\x20\x0a\x20\x20\x20\x20float\x20b\x20=\x206356752.3142;\x20//\x20Semi-minor\x20axis\x20\x0a\x20\x20\x20\x20float\x20e2\x20=\x206.69437999014e-3;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x0a\x20\x20\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calcProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0,\x20360.0)\x20-\x20180.0;\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0);\x0a\x20\x20\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calcOffset(vec4\x20currentProjectedCoordinate,\x20vec4\x20nextProjectedCoordinate,\x20float\x20offsetSign)\x20{\x0a\x20\x20\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0);\x0a\x20\x20\x20\x20vec2\x20currentXY\x20=\x20(currentProjectedCoordinate.xy\x20/\x20currentProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x20\x20\x20\x20vec2\x20nextXY\x20=\x20(nextProjectedCoordinate.xy\x20/\x20nextProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0;\x0a\x20\x20\x20\x20vec2\x20direction\x20=\x20normalize(nextXY\x20-\x20currentXY);\x0a\x20\x20\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0,\x200.0);\x0a\x20\x20\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20\x20\x20vec3\x20currentPosition\x20=\x20texture2D(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20\x20\x20vec4\x20nextPosition\x20=\x20texture2D(postProcessingPosition,\x20particleIndex);\x0a\x0a\x20\x20\x20\x20vec4\x20currentProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20vec4\x20nextProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(nextPosition.w\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(nextPosition.xyz);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20float\x20pointToUse\x20=\x20normal.x;\x20//\x20-1\x20is\x20currentProjectedCoordinate\x20and\x20+1\x20is\x20nextProjectedCoordinate\x0a\x20\x20\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20pixelSize\x20*\x20calcOffset(currentProjectedCoordinate,\x20nextProjectedCoordinate,\x20offsetSign);\x0a\x20\x20\x20\x20if\x20(pointToUse\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20currentProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20nextProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20speedNormalization\x20=\x20texture2D(postProcessingSpeed,\x20particleIndex).a;\x0a}','ymin','globe','setOptions','colors','canvasWindy','mod','Color','floor','Pass','createRenderingTextures','abs','SCENE3D','555947JCMecZ','red','postMessage','Matrix4','Derived\x20constructors\x20may\x20only\x20return\x20object\x20or\x20undefined','particlesNumber','_updateIng','removeEventListener','blending','_showHook','data','Draw','now','createCommand','mouse_move','BufferUsage','lev','resize','mouse_down','particlesRendering','depthMask','destroyObject','visibility','LINEAR','vmin','setPrototypeOf','_mountedHook','uniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x0a\x0avarying\x20vec2\x20v_textureCoordinates;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20randomParticle\x20=\x20texture2D(postProcessingPosition,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20vec4\x20particleSpeed\x20=\x20texture2D(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x0a\x20\x20\x20\x20if\x20(randomParticle.a\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20particleSpeed;\x0a\x20\x20\x20\x20}\x0a}','windField','clientHeight','getOwnPropertySymbols','nextTrails','udata','construct','_onMouseUpEvent','ComputeCommand','unbindEvent','scene','slice','hidden','globeBoundingSphere','latRange','levmin','_setOptionsHook','_maxAge','getPrototypeOf','this\x20hasn\x27t\x20been\x20initialised\x20-\x20super()\x20hasn\x27t\x20been\x20called','getFullscreenQuad','getRandomLatLng','TextureMinificationFilter','nextParticlesSpeed','preRender','textures','nextParticlesPosition','primitives','undefined','uniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0auniform\x20float\x20dropRate;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0auniform\x20float\x20dropRateBump;\x0a\x0avarying\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898,\x2078.233,\x204375.85453);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0,\x201.0);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0);\x0a\x20\x20\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20lev);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20\x20\x20return\x20particle.y\x20<\x20-90.0\x20||\x20particle.y\x20>\x2090.0;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20texture2D(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20texture2D(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20nextSpeed.a;\x0a\x0a\x20\x20\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20\x20\x20if\x20(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(randomParticle,\x201.0);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a\x20\x20\x20\x20}\x0a}','show','EventType','positionWC','depthTexture','GeometryAttribute','randomizeParticles','levmax','RenderState','vertexShaderSource','ZERO','iterator','198204bFkquD','string','update','speedFactor','WindLayer','top','CanvasWindField','attributeLocations','apply','createRawRenderState','getColorTexture','SceneMode','LayerUtil','configurable','updateSpeed','lng','height','atan2','0px','class','createRenderingFramebuffers','clientWidth','_removedHook','viewerParameters','refreshParticles','STATIC_DRAW','PrimitiveCollection','shaderProgram','dimensions','BaseLayer','vdata','drawingBufferHeight','writable','currentParticlesPosition','UNSIGNED_INT','preExecute','animateFrame','sqrt','dropRate','all','rows','LUMINANCE','Rectangle','_pointerEvents','currentTrails','lighter','_data','sin','lat','canrefresh','Map','context','Texture','segments','segmentsColor','ComponentDatatype','Math','IDENTITY','addEventListener','_drawLines','randomBetween','prototype','getPixelSize','particlesTextureSize','currentParticlesSpeed','_onMouseDownEvent','depthTest','clampToLatitudeRange','FLOAT','_calcUV','add','filter','stroke','ymax','default','CanvasWindLayer','lonRange','getUVByPoint','TRIANGLES','createTexture','updatePosition','isDestroyed','xmin','speedRate','postProcessingSpeed','outputTexture','toDegrees','createComputingPrimitives','bindEvent','windData','THREE_PI_OVER_TWO','createElement','mouseHidden','maxAge','array','lon','east','createSegmentsGeometry','visible','_addedHook','get','execute','pixelSize','fadeOpacity','VertexArray','currentTrailsColor','off','BoundingSphere','fromGeometry','WindUtil','keys','fromDegrees','particleSystem','ClearCommand','ShaderSource','setData','482025vWsRqZ','mouseMove','isInExtent','bind','segmentsDepth','init','defineProperty','destroy','xmax','computeViewRectangle','cancelAnimationFrame','removeAll','push','uniform\x20sampler2D\x20trailsColorTexture;\x0d\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0d\x0a\x0d\x0avarying\x20vec2\x20textureCoordinate;\x0d\x0a\x0d\x0avoid\x20main()\x20{\x0d\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture2D(trailsColorTexture,\x20textureCoordinate);\x0d\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture2D(trailsDepthTexture,\x20textureCoordinate).r;\x0d\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture2D(czm_globeDepthTexture,\x20textureCoordinate));\x0d\x0a\x0d\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0d\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20trailsColor;\x0d\x0a\x20\x20\x20\x20}\x20else\x20{\x0d\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(0.0);\x0d\x0a\x20\x20\x20\x20}\x0d\x0a}','log','createWindTextures','GeometryAttributes','updateViewerParameters','destination-in','_speedRate','Appearance','commandType','createParticlesTextures','lineTo','absolute','DISABLE_GL_POSITION_LOG_DEPTH','canvasResize','_updateIng2','redraw','setDate','clear','_onMouseMoveEvent','layer','fragmentShaderSource','mode','UNSIGNED_BYTE','vmax','canvasWidth','ALWAYS','moveTo','Cannot\x20call\x20a\x20class\x20as\x20a\x20function','_onMap_preRenderEvent','_map','_calc_speedRate','fixedHeight','canvasHeight','particles','length','_onMapWhellEvent','__esModule','uniform\x20sampler2D\x20colorTable;\x0a\x0avarying\x20float\x20speedNormalization;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20texture2D(colorTable,\x20vec2(speedNormalization,\x200.0));\x0a}','wgs84ToWindowCoordinates','//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x20\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0avarying\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x,\x20360.0);\x0a\x20\x20\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20-90.0,\x2090.0);\x0a\x0a\x20\x20\x20\x20vec3\x20index3D\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20index3D.z\x20=\x20(lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z;\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205],\x20width\x20=\x203,\x20height\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x203\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x202\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWind(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20\x20\x20float\x20result\x20=\x20texture2D(windTexture,\x20normalizedIndex2D).r;\x0a\x20\x20\x20\x20return\x20result;\x0a}\x0a\x0aconst\x20mat4\x20kernelMatrix\x20=\x20mat4(\x0a\x20\x20\x20\x200.0,\x20-1.0,\x202.0,\x20-1.0,\x20//\x20first\x20column\x0a\x20\x20\x20\x202.0,\x200.0,\x20-5.0,\x203.0,\x20//\x20second\x20column\x0a\x20\x20\x20\x200.0,\x201.0,\x204.0,\x20-3.0,\x20//\x20third\x20column\x0a\x20\x20\x20\x200.0,\x200.0,\x20-1.0,\x201.0\x20//\x20fourth\x20column\x0a);\x0afloat\x20oneDimensionInterpolation(float\x20t,\x20float\x20p0,\x20float\x20p1,\x20float\x20p2,\x20float\x20p3)\x20{\x0a\x20\x20\x20\x20vec4\x20tVec4\x20=\x20vec4(1.0,\x20t,\x20t\x20*\x20t,\x20t\x20*\x20t\x20*\x20t);\x0a\x20\x20\x20\x20tVec4\x20=\x20tVec4\x20/\x202.0;\x0a\x20\x20\x20\x20vec4\x20pVec4\x20=\x20vec4(p0,\x20p1,\x20p2,\x20p3);\x0a\x20\x20\x20\x20return\x20dot((tVec4\x20*\x20kernelMatrix),\x20pVec4);\x0a}\x0a\x0afloat\x20calculateB(sampler2D\x20windTexture,\x20float\x20t,\x20float\x20lon,\x20float\x20lat,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20float\x20lon0\x20=\x20floor(lon)\x20-\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon1\x20=\x20floor(lon);\x0a\x20\x20\x20\x20float\x20lon2\x20=\x20floor(lon)\x20+\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon3\x20=\x20floor(lon)\x20+\x202.0\x20*\x20interval.x;\x0a\x0a\x20\x20\x20\x20float\x20p0\x20=\x20getWind(windTexture,\x20vec3(lon0,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p1\x20=\x20getWind(windTexture,\x20vec3(lon1,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p2\x20=\x20getWind(windTexture,\x20vec3(lon2,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p3\x20=\x20getWind(windTexture,\x20vec3(lon3,\x20lat,\x20lev));\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(t,\x20p0,\x20p1,\x20p2,\x20p3);\x0a}\x0a\x0afloat\x20interpolateOneTexture(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20\x20\x20float\x20lat0\x20=\x20floor(lat)\x20-\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat1\x20=\x20floor(lat);\x0a\x20\x20\x20\x20float\x20lat2\x20=\x20floor(lat)\x20+\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat3\x20=\x20floor(lat)\x20+\x202.0\x20*\x20interval.y;\x0a\x0a\x20\x20\x20\x20vec2\x20coefficient\x20=\x20lonLatLev.xy\x20-\x20floor(lonLatLev.xy);\x0a\x20\x20\x20\x20float\x20b0\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat0,\x20lev);\x0a\x20\x20\x20\x20float\x20b1\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat1,\x20lev);\x0a\x20\x20\x20\x20float\x20b2\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat2,\x20lev);\x0a\x20\x20\x20\x20float\x20b3\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat3,\x20lev);\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(coefficient.y,\x20b0,\x20b1,\x20b2,\x20b3);\x0a}\x0a\x0avec3\x20bicubic(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\x0a\x20\x20\x20\x20float\x20u\x20=\x20interpolateOneTexture(U,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20v\x20=\x20interpolateOneTexture(V,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture2D(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20bicubic(lonLatLev);\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(windVector,\x200.0);\x0a}','viewport','destroyParticlesTextures','__proto__','tlng','tlat','call','worker','create','ShaderProgram','initWorker','key','Geometry','createFramebuffer','mouseDown','windTextures','removeChild','primitiveType','Object','commandToExecute','toRadians','constructor','getParticles','test','trails','WMS_URL','pointerEvents','canvasContext','particleHeight','602664zuQteY'];_0x5343=function(){return _0x1d823a;};return _0x5343();}function _interopNamespace(_0x2492b8){var _0xf83503=_0x458d;if(_0x2492b8&&_0x2492b8[_0xf83503(0x130)])return _0x2492b8;var _0x474fc7=Object[_0xf83503(0x13b)](null);return _0x2492b8&&Object['keys'](_0x2492b8)[_0xf83503(0x193)](function(_0x29613c){var _0x5c7b53=_0xf83503;if(_0x29613c!==_0x5c7b53(0xd5)){var _0x3c7169=Object[_0x5c7b53(0x15d)](_0x2492b8,_0x29613c);Object['defineProperty'](_0x474fc7,_0x29613c,_0x3c7169[_0x5c7b53(0xef)]?_0x3c7169:{'enumerable':!![],'get':function(){return _0x2492b8[_0x29613c];}});}}),_0x474fc7[_0xf83503(0xd5)]=_0x2492b8,_0x474fc7;}var mars3d__namespace=_interopNamespace(mars3d),Cesium$7=mars3d__namespace[_0x30f976(0x1c6)];function getU(_0x2065f1,_0x37c5eb){var _0x4da039=_0x30f976,_0x213b14=_0x2065f1*Math['cos'](Cesium$7['Math'][_0x4da039(0x147)](_0x37c5eb));return _0x213b14;}function getV(_0x14cd87,_0x18695c){var _0x2b4f47=_0x30f976,_0x1b276a=_0x14cd87*Math[_0x2b4f47(0xba)](Cesium$7[_0x2b4f47(0xc3)][_0x2b4f47(0x147)](_0x18695c));return _0x1b276a;}function getSpeed(_0x18e4a2,_0x443dd0){var _0x1773c1=_0x30f976,_0x46a2e4=Math[_0x1773c1(0xb0)](Math[_0x1773c1(0x1c4)](_0x18e4a2,0x2)+Math[_0x1773c1(0x1c4)](_0x443dd0,0x2));return _0x46a2e4;}function getDirection(_0x557233,_0x44f25b){var _0x39cc35=_0x30f976,_0x4bad9a=Cesium$7['Math']['toDegrees'](Math[_0x39cc35(0x9c)](_0x44f25b,_0x557233));return _0x4bad9a+=_0x4bad9a<0x0?0x168:0x0,_0x4bad9a;}var WindUtil={'__proto__':null,'getU':getU,'getV':getV,'getSpeed':getSpeed,'getDirection':getDirection};function ownKeys(_0x58fac7,_0x545d5b){var _0x15610c=_0x30f976,_0x37e1b0=Object[_0x15610c(0xf9)](_0x58fac7);if(Object[_0x15610c(0x1f2)]){var _0x34ba67=Object[_0x15610c(0x1f2)](_0x58fac7);_0x545d5b&&(_0x34ba67=_0x34ba67[_0x15610c(0xd2)](function(_0x18a855){var _0x1f90ac=_0x15610c;return Object[_0x1f90ac(0x15d)](_0x58fac7,_0x18a855)[_0x1f90ac(0x15f)];})),_0x37e1b0['push'][_0x15610c(0x93)](_0x37e1b0,_0x34ba67);}return _0x37e1b0;}function _objectSpread2(_0x130be9){var _0x2c2ae8=_0x30f976;for(var _0x2f1f7b=0x1;_0x2f1f7b<arguments[_0x2c2ae8(0x12e)];_0x2f1f7b++){var _0x32cf73=null!=arguments[_0x2f1f7b]?arguments[_0x2f1f7b]:{};_0x2f1f7b%0x2?ownKeys(Object(_0x32cf73),!0x0)[_0x2c2ae8(0x193)](function(_0x385a38){_defineProperty(_0x130be9,_0x385a38,_0x32cf73[_0x385a38]);}):Object[_0x2c2ae8(0x1bd)]?Object['defineProperties'](_0x130be9,Object['getOwnPropertyDescriptors'](_0x32cf73)):ownKeys(Object(_0x32cf73))[_0x2c2ae8(0x193)](function(_0x2fa46b){var _0x8f7b76=_0x2c2ae8;Object[_0x8f7b76(0x105)](_0x130be9,_0x2fa46b,Object[_0x8f7b76(0x15d)](_0x32cf73,_0x2fa46b));});}return _0x130be9;}function _classCallCheck(_0x2e140e,_0x43d08b){var _0x4f48a8=_0x30f976;if(!(_0x2e140e instanceof _0x43d08b))throw new TypeError(_0x4f48a8(0x127));}function _defineProperties(_0x5dbf46,_0x9d976f){var _0x26e752=_0x30f976;for(var _0x1bc2b1=0x0;_0x1bc2b1<_0x9d976f[_0x26e752(0x12e)];_0x1bc2b1++){var _0x48b095=_0x9d976f[_0x1bc2b1];_0x48b095['enumerable']=_0x48b095[_0x26e752(0x15f)]||![],_0x48b095[_0x26e752(0x98)]=!![];if(_0x26e752(0x1be)in _0x48b095)_0x48b095[_0x26e752(0xab)]=!![];Object['defineProperty'](_0x5dbf46,_0x48b095[_0x26e752(0x13e)],_0x48b095);}}function _createClass(_0x393729,_0x599db2,_0x442a80){var _0x44ec1b=_0x30f976;if(_0x599db2)_defineProperties(_0x393729[_0x44ec1b(0xc8)],_0x599db2);if(_0x442a80)_defineProperties(_0x393729,_0x442a80);return Object['defineProperty'](_0x393729,_0x44ec1b(0xc8),{'writable':![]}),_0x393729;}function _defineProperty(_0x1c1e1e,_0x59519e,_0x1bd3f7){var _0x990a55=_0x30f976;return _0x59519e in _0x1c1e1e?Object[_0x990a55(0x105)](_0x1c1e1e,_0x59519e,{'value':_0x1bd3f7,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x1c1e1e[_0x59519e]=_0x1bd3f7,_0x1c1e1e;}function _inherits(_0x5d6f4d,_0x9a3e8d){var _0x437781=_0x30f976;if(typeof _0x9a3e8d!==_0x437781(0x1a6)&&_0x9a3e8d!==null)throw new TypeError('Super\x20expression\x20must\x20either\x20be\x20null\x20or\x20a\x20function');_0x5d6f4d[_0x437781(0xc8)]=Object[_0x437781(0x13b)](_0x9a3e8d&&_0x9a3e8d['prototype'],{'constructor':{'value':_0x5d6f4d,'writable':!![],'configurable':!![]}}),Object[_0x437781(0x105)](_0x5d6f4d,_0x437781(0xc8),{'writable':![]});if(_0x9a3e8d)_setPrototypeOf(_0x5d6f4d,_0x9a3e8d);}function _getPrototypeOf(_0x190a23){var _0x1750d9=_0x30f976;return _getPrototypeOf=Object[_0x1750d9(0x1ed)]?Object[_0x1750d9(0x201)][_0x1750d9(0x102)]():function _0x54d1c7(_0x330600){var _0x5a4019=_0x1750d9;return _0x330600[_0x5a4019(0x136)]||Object[_0x5a4019(0x201)](_0x330600);},_getPrototypeOf(_0x190a23);}function _setPrototypeOf(_0xecec3b,_0x2ff885){var _0x3bf57b=_0x30f976;return _setPrototypeOf=Object[_0x3bf57b(0x1ed)]?Object[_0x3bf57b(0x1ed)][_0x3bf57b(0x102)]():function _0x31aa77(_0x4373df,_0x29021b){var _0x49bf12=_0x3bf57b;return _0x4373df[_0x49bf12(0x136)]=_0x29021b,_0x4373df;},_setPrototypeOf(_0xecec3b,_0x2ff885);}function _isNativeReflectConstruct(){var _0x5ea98c=_0x30f976;if(typeof Reflect===_0x5ea98c(0x20b)||!Reflect[_0x5ea98c(0x1f5)])return![];if(Reflect[_0x5ea98c(0x1f5)]['sham'])return![];if(typeof Proxy===_0x5ea98c(0x1a6))return!![];try{return Boolean[_0x5ea98c(0xc8)]['valueOf']['call'](Reflect[_0x5ea98c(0x1f5)](Boolean,[],function(){})),!![];}catch(_0xec7d72){return![];}}function _assertThisInitialized(_0x13ad70){var _0xe8be8=_0x30f976;if(_0x13ad70===void 0x0)throw new ReferenceError(_0xe8be8(0x202));return _0x13ad70;}function _possibleConstructorReturn(_0x20de5c,_0x4d0f3f){var _0x3f0f31=_0x30f976;if(_0x4d0f3f&&(typeof _0x4d0f3f===_0x3f0f31(0x1b0)||typeof _0x4d0f3f===_0x3f0f31(0x1a6)))return _0x4d0f3f;else{if(_0x4d0f3f!==void 0x0)throw new TypeError(_0x3f0f31(0x1d8));}return _assertThisInitialized(_0x20de5c);}function _createSuper(_0x47a3e4){var _0x26c419=_isNativeReflectConstruct();return function _0x317e5e(){var _0x2de60c=_0x458d,_0x5e3bfb=_getPrototypeOf(_0x47a3e4),_0x2227c7;if(_0x26c419){var _0x445093=_getPrototypeOf(this)[_0x2de60c(0x148)];_0x2227c7=Reflect[_0x2de60c(0x1f5)](_0x5e3bfb,arguments,_0x445093);}else _0x2227c7=_0x5e3bfb[_0x2de60c(0x93)](this,arguments);return _possibleConstructorReturn(this,_0x2227c7);};}function _toConsumableArray(_0x55dcef){return _arrayWithoutHoles(_0x55dcef)||_iterableToArray(_0x55dcef)||_unsupportedIterableToArray(_0x55dcef)||_nonIterableSpread();}function _arrayWithoutHoles(_0x4bdc12){if(Array['isArray'](_0x4bdc12))return _arrayLikeToArray(_0x4bdc12);}function _iterableToArray(_0x238384){var _0xe06e33=_0x30f976;if(typeof Symbol!==_0xe06e33(0x20b)&&_0x238384[Symbol[_0xe06e33(0x217)]]!=null||_0x238384[_0xe06e33(0x15c)]!=null)return Array[_0xe06e33(0x18f)](_0x238384);}function _unsupportedIterableToArray(_0x513f80,_0x120bb7){var _0x2eba4b=_0x30f976;if(!_0x513f80)return;if(typeof _0x513f80===_0x2eba4b(0x219))return _arrayLikeToArray(_0x513f80,_0x120bb7);var _0x40e2eb=Object[_0x2eba4b(0xc8)][_0x2eba4b(0x1bb)]['call'](_0x513f80)[_0x2eba4b(0x1fa)](0x8,-0x1);if(_0x40e2eb===_0x2eba4b(0x145)&&_0x513f80[_0x2eba4b(0x148)])_0x40e2eb=_0x513f80[_0x2eba4b(0x148)][_0x2eba4b(0x175)];if(_0x40e2eb===_0x2eba4b(0xbd)||_0x40e2eb===_0x2eba4b(0x1b3))return Array[_0x2eba4b(0x18f)](_0x513f80);if(_0x40e2eb==='Arguments'||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[_0x2eba4b(0x14a)](_0x40e2eb))return _arrayLikeToArray(_0x513f80,_0x120bb7);}function _arrayLikeToArray(_0x522709,_0x15d482){if(_0x15d482==null||_0x15d482>_0x522709['length'])_0x15d482=_0x522709['length'];for(var _0xeee7e2=0x0,_0x2d5a30=new Array(_0x15d482);_0xeee7e2<_0x15d482;_0xeee7e2++)_0x2d5a30[_0xeee7e2]=_0x522709[_0xeee7e2];return _0x2d5a30;}function _nonIterableSpread(){var _0xf65b2f=_0x30f976;throw new TypeError(_0xf65b2f(0x1c0));}var Cesium$6=mars3d__namespace[_0x30f976(0x1c6)],CustomPrimitive=(function(){var _0xf72c33=_0x30f976;function _0x2b4004(_0x2c609c){var _0x1f11ec=_0x458d,_0x389858;_classCallCheck(this,_0x2b4004),this[_0x1f11ec(0x114)]=_0x2c609c['commandType'],this[_0x1f11ec(0x152)]=_0x2c609c[_0x1f11ec(0x152)],this[_0x1f11ec(0x92)]=_0x2c609c['attributeLocations'],this[_0x1f11ec(0x144)]=_0x2c609c[_0x1f11ec(0x144)],this[_0x1f11ec(0x183)]=_0x2c609c['uniformMap'],this[_0x1f11ec(0x215)]=_0x2c609c[_0x1f11ec(0x215)],this[_0x1f11ec(0x120)]=_0x2c609c[_0x1f11ec(0x120)],this[_0x1f11ec(0x16b)]=_0x2c609c[_0x1f11ec(0x16b)],this[_0x1f11ec(0x16d)]=_0x2c609c[_0x1f11ec(0x16d)],this[_0x1f11ec(0xe0)]=_0x2c609c['outputTexture'],this[_0x1f11ec(0x19e)]=(_0x389858=_0x2c609c[_0x1f11ec(0x19e)])!==null&&_0x389858!==void 0x0?_0x389858:![],this[_0x1f11ec(0xae)]=_0x2c609c['preExecute'],this[_0x1f11ec(0x20d)]=!![],this[_0x1f11ec(0x146)]=undefined,this['clearCommand']=undefined,this[_0x1f11ec(0x19e)]&&(this[_0x1f11ec(0x1a2)]=new Cesium$6[(_0x1f11ec(0xfc))]({'color':new Cesium$6[(_0x1f11ec(0x1ce))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x1f11ec(0x16d)],'pass':Cesium$6[_0x1f11ec(0x1d0)][_0x1f11ec(0x1b1)]}));}return _createClass(_0x2b4004,[{'key':_0xf72c33(0x1e1),'value':function _0x8e4243(_0x2b8259){var _0x1c112=_0xf72c33;switch(this[_0x1c112(0x114)]){case _0x1c112(0x1df):{var _0x3c55bf=Cesium$6[_0x1c112(0xf3)][_0x1c112(0xf7)]({'context':_0x2b8259,'geometry':this[_0x1c112(0x152)],'attributeLocations':this[_0x1c112(0x92)],'bufferUsage':Cesium$6[_0x1c112(0x1e3)][_0x1c112(0xa4)]}),_0x33cd8f=Cesium$6[_0x1c112(0x13c)][_0x1c112(0x1b2)]({'context':_0x2b8259,'attributeLocations':this[_0x1c112(0x92)],'vertexShaderSource':this[_0x1c112(0x215)],'fragmentShaderSource':this[_0x1c112(0x120)]}),_0x3f9a8a=Cesium$6[_0x1c112(0x214)][_0x1c112(0x1b2)](this[_0x1c112(0x16b)]);return new Cesium$6['DrawCommand']({'owner':this,'vertexArray':_0x3c55bf,'primitiveType':this[_0x1c112(0x144)],'uniformMap':this[_0x1c112(0x183)],'modelMatrix':Cesium$6[_0x1c112(0x1d7)][_0x1c112(0xc4)],'shaderProgram':_0x33cd8f,'framebuffer':this['framebuffer'],'renderState':_0x3f9a8a,'pass':Cesium$6[_0x1c112(0x1d0)][_0x1c112(0x1b1)]});}case _0x1c112(0x17f):{return new Cesium$6[(_0x1c112(0x1f7))]({'owner':this,'fragmentShaderSource':this[_0x1c112(0x120)],'uniformMap':this[_0x1c112(0x183)],'outputTexture':this['outputTexture'],'persists':!![]});}}}},{'key':_0xf72c33(0x1b5),'value':function _0x11e517(_0x34165c,_0x2cefa3){var _0xd314a0=_0xf72c33;this['geometry']=_0x2cefa3;var _0x527e83=Cesium$6['VertexArray']['fromGeometry']({'context':_0x34165c,'geometry':this[_0xd314a0(0x152)],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6[_0xd314a0(0x1e3)]['STATIC_DRAW']});this['commandToExecute']['vertexArray']=_0x527e83;}},{'key':'update','value':function _0x1e62f7(_0x5a0780){var _0x916180=_0xf72c33;if(!this[_0x916180(0x20d)])return;if(_0x5a0780[_0x916180(0x121)]!==Cesium$6[_0x916180(0x96)]['SCENE3D'])return;!Cesium$6[_0x916180(0x1a3)](this[_0x916180(0x146)])&&(this['commandToExecute']=this[_0x916180(0x1e1)](_0x5a0780[_0x916180(0xbe)])),Cesium$6['defined'](this[_0x916180(0xae)])&&this[_0x916180(0xae)](),Cesium$6['defined'](this[_0x916180(0x1a2)])&&_0x5a0780[_0x916180(0x15e)][_0x916180(0x10b)](this['clearCommand']),_0x5a0780['commandList']['push'](this[_0x916180(0x146)]);}},{'key':_0xf72c33(0xdc),'value':function _0x1a21bf(){return![];}},{'key':_0xf72c33(0x106),'value':function _0x2bd299(){var _0xb84111=_0xf72c33;return Cesium$6[_0xb84111(0x1a3)](this[_0xb84111(0x146)])&&(this[_0xb84111(0x146)][_0xb84111(0xa6)]=this['commandToExecute'][_0xb84111(0xa6)]&&this[_0xb84111(0x146)]['shaderProgram'][_0xb84111(0x106)]()),Cesium$6[_0xb84111(0x1e9)](this);}}]),_0x2b4004;}()),Cesium$5=mars3d__namespace['Cesium'],Util=(function(){var _0x404d43=function _0x2612c4(){var _0x3d1fbc=_0x458d,_0x534753=new Cesium$5[(_0x3d1fbc(0x13f))]({'attributes':new Cesium$5[(_0x3d1fbc(0x10f))]({'position':new Cesium$5[(_0x3d1fbc(0x211))]({'componentDatatype':Cesium$5[_0x3d1fbc(0xc2)]['FLOAT'],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5[(_0x3d1fbc(0x211))]({'componentDatatype':Cesium$5[_0x3d1fbc(0xc2)][_0x3d1fbc(0xcf)],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});return _0x534753;},_0x4ca166=function _0x3b061b(_0x3f27d3,_0xfc02f6){var _0x40007e=_0x458d;if(Cesium$5['defined'](_0xfc02f6)){var _0x39b5d6={};_0x39b5d6['arrayBufferView']=_0xfc02f6,_0x3f27d3['source']=_0x39b5d6;}var _0x54e7d7=new Cesium$5[(_0x40007e(0xbf))](_0x3f27d3);return _0x54e7d7;},_0x42d9f5=function _0x135131(_0x46cbaa,_0x48d13c,_0x20423e){var _0x458e19=new Cesium$5['Framebuffer']({'context':_0x46cbaa,'colorTextures':[_0x48d13c],'depthTexture':_0x20423e});return _0x458e19;},_0xf205f8=function _0x1b609b(_0xdcb53a){var _0x4b280c=_0x458d,_0x260f1a=!![],_0x42cb51=![],_0x382041={'viewport':_0xdcb53a[_0x4b280c(0x134)],'depthTest':_0xdcb53a[_0x4b280c(0xcd)],'depthMask':_0xdcb53a[_0x4b280c(0x1e8)],'blending':_0xdcb53a[_0x4b280c(0x1dc)]},_0x1bb764=Cesium$5[_0x4b280c(0x113)]['getDefaultRenderState'](_0x260f1a,_0x42cb51,_0x382041);return _0x1bb764;},_0x511eff=function _0x54dbab(_0x2faed2){var _0x213f76=_0x458d,_0x47ba69={},_0x44a332=Cesium$5[_0x213f76(0xc3)][_0x213f76(0x1cd)](_0x2faed2['west'],Cesium$5[_0x213f76(0xc3)]['TWO_PI']),_0x3b374e=Cesium$5[_0x213f76(0xc3)][_0x213f76(0x1cd)](_0x2faed2[_0x213f76(0xeb)],Cesium$5[_0x213f76(0xc3)][_0x213f76(0x18b)]),_0x51f721=_0x2faed2[_0x213f76(0x1a4)],_0x33be4d,_0x19b852;_0x51f721>Cesium$5['Math'][_0x213f76(0xe5)]?(_0x33be4d=0x0,_0x19b852=Cesium$5[_0x213f76(0xc3)][_0x213f76(0x18b)]):_0x3b374e-_0x44a332<_0x51f721?(_0x33be4d=_0x44a332,_0x19b852=_0x44a332+_0x51f721):(_0x33be4d=_0x44a332,_0x19b852=_0x3b374e);_0x47ba69['lon']={'min':Cesium$5['Math'][_0x213f76(0xe1)](_0x33be4d),'max':Cesium$5[_0x213f76(0xc3)][_0x213f76(0xe1)](_0x19b852)};var _0x405a04=_0x2faed2[_0x213f76(0x153)],_0x18c9dd=_0x2faed2[_0x213f76(0x1a9)],_0x4f24c9=_0x2faed2[_0x213f76(0x9b)],_0x284d59=_0x4f24c9>Cesium$5[_0x213f76(0xc3)]['PI']/0xc?_0x4f24c9/0x2:0x0,_0x24c149=Cesium$5['Math']['clampToLatitudeRange'](_0x405a04-_0x284d59),_0x3dfd2d=Cesium$5[_0x213f76(0xc3)][_0x213f76(0xce)](_0x18c9dd+_0x284d59);return _0x24c149<-Cesium$5['Math'][_0x213f76(0x1ba)]&&(_0x24c149=-Cesium$5['Math']['PI_OVER_TWO']),_0x3dfd2d>Cesium$5[_0x213f76(0xc3)][_0x213f76(0x1ba)]&&(_0x3dfd2d=Cesium$5[_0x213f76(0xc3)][_0x213f76(0x160)]),_0x47ba69['lat']={'min':Cesium$5[_0x213f76(0xc3)][_0x213f76(0xe1)](_0x24c149),'max':Cesium$5[_0x213f76(0xc3)][_0x213f76(0xe1)](_0x3dfd2d)},_0x47ba69;};return{'getFullscreenQuad':_0x404d43,'createTexture':_0x4ca166,'createFramebuffer':_0x42d9f5,'createRawRenderState':_0xf205f8,'viewRectangleToLonLatRange':_0x511eff};}()),segmentDraw_vert=_0x30f976(0x1c7),segmentDraw_frag=_0x30f976(0x131),fullscreen_vert=_0x30f976(0x190),trailDraw_frag=_0x30f976(0x180),screenDraw_frag=_0x30f976(0x10c),Cesium$4=mars3d__namespace['Cesium'],ParticlesRendering=(function(){var _0x41661b=_0x30f976;function _0xbeec03(_0x1f9620,_0x355e06,_0x5eb649,_0x4b02e3,_0x473ee2){var _0x4283b0=_0x458d;_classCallCheck(this,_0xbeec03),this[_0x4283b0(0x1d1)](_0x1f9620,_0x355e06,_0x5eb649['colors']),this[_0x4283b0(0x9f)](_0x1f9620),this[_0x4283b0(0x18e)](_0x1f9620,_0x5eb649,_0x4b02e3,_0x473ee2);}return _createClass(_0xbeec03,[{'key':_0x41661b(0x1d1),'value':function _0x351685(_0x21383b,_0x531b37,_0x21d2e6){var _0x5ab4f9=_0x41661b,_0x42a3b6={'context':_0x21383b,'width':_0x21383b[_0x5ab4f9(0x173)],'height':_0x21383b['drawingBufferHeight'],'pixelFormat':Cesium$4[_0x5ab4f9(0x17a)]['RGBA'],'pixelDatatype':Cesium$4['PixelDatatype'][_0x5ab4f9(0x122)]},_0xf76201={'context':_0x21383b,'width':_0x21383b[_0x5ab4f9(0x173)],'height':_0x21383b[_0x5ab4f9(0xaa)],'pixelFormat':Cesium$4[_0x5ab4f9(0x17a)][_0x5ab4f9(0x1a5)],'pixelDatatype':Cesium$4['PixelDatatype'][_0x5ab4f9(0xad)]},_0x2b161a=_0x21d2e6[_0x5ab4f9(0x12e)],_0x30959f=new Float32Array(_0x2b161a*0x3);for(var _0x2436e6=0x0;_0x2436e6<_0x2b161a;_0x2436e6++){var _0x3eab5e=Cesium$4['Color'][_0x5ab4f9(0x187)](_0x21d2e6[_0x2436e6]);_0x30959f[0x3*_0x2436e6]=_0x3eab5e[_0x5ab4f9(0x1d5)],_0x30959f[0x3*_0x2436e6+0x1]=_0x3eab5e['green'],_0x30959f[0x3*_0x2436e6+0x2]=_0x3eab5e[_0x5ab4f9(0x172)];}var _0x56e9b9={'context':_0x21383b,'width':_0x2b161a,'height':0x1,'pixelFormat':Cesium$4['PixelFormat']['RGB'],'pixelDatatype':Cesium$4[_0x5ab4f9(0x19b)][_0x5ab4f9(0xcf)],'sampler':new Cesium$4[(_0x5ab4f9(0x17e))]({'minificationFilter':Cesium$4[_0x5ab4f9(0x205)]['LINEAR'],'magnificationFilter':Cesium$4[_0x5ab4f9(0x163)][_0x5ab4f9(0x1eb)]})};this[_0x5ab4f9(0x208)]={'segmentsColor':Util[_0x5ab4f9(0xda)](_0x42a3b6),'segmentsDepth':Util[_0x5ab4f9(0xda)](_0xf76201),'currentTrailsColor':Util[_0x5ab4f9(0xda)](_0x42a3b6),'currentTrailsDepth':Util[_0x5ab4f9(0xda)](_0xf76201),'nextTrailsColor':Util[_0x5ab4f9(0xda)](_0x42a3b6),'nextTrailsDepth':Util[_0x5ab4f9(0xda)](_0xf76201),'colorTable':Util['createTexture'](_0x56e9b9,_0x30959f)};}},{'key':_0x41661b(0x9f),'value':function _0x1c17c2(_0x184d10){var _0x456c68=_0x41661b;this[_0x456c68(0x16c)]={'segments':Util[_0x456c68(0x140)](_0x184d10,this[_0x456c68(0x208)][_0x456c68(0xc1)],this['textures'][_0x456c68(0x103)]),'currentTrails':Util[_0x456c68(0x140)](_0x184d10,this[_0x456c68(0x208)][_0x456c68(0xf4)],this[_0x456c68(0x208)]['currentTrailsDepth']),'nextTrails':Util[_0x456c68(0x140)](_0x184d10,this[_0x456c68(0x208)]['nextTrailsColor'],this[_0x456c68(0x208)]['nextTrailsDepth'])};}},{'key':_0x41661b(0xec),'value':function _0x37793f(_0x5e8c0e){var _0x136434=_0x41661b,_0x6b1fbf=0x4,_0x33db18=[];for(var _0x11b313=0x0;_0x11b313<_0x5e8c0e[_0x136434(0xca)];_0x11b313++){for(var _0xb41f1a=0x0;_0xb41f1a<_0x5e8c0e['particlesTextureSize'];_0xb41f1a++){for(var _0x2a7bc2=0x0;_0x2a7bc2<_0x6b1fbf;_0x2a7bc2++){_0x33db18[_0x136434(0x10b)](_0x11b313/_0x5e8c0e['particlesTextureSize']),_0x33db18[_0x136434(0x10b)](_0xb41f1a/_0x5e8c0e['particlesTextureSize']);}}}_0x33db18=new Float32Array(_0x33db18);var _0x31fb3e=[],_0x55b336=[-0x1,0x1],_0x4fcf85=[-0x1,0x1];for(var _0x51069d=0x0;_0x51069d<_0x5e8c0e[_0x136434(0x1a7)];_0x51069d++){for(var _0x27d02c=0x0;_0x27d02c<_0x6b1fbf/0x2;_0x27d02c++){for(var _0x54dfe5=0x0;_0x54dfe5<_0x6b1fbf/0x2;_0x54dfe5++){_0x31fb3e['push'](_0x55b336[_0x27d02c]),_0x31fb3e[_0x136434(0x10b)](_0x4fcf85[_0x54dfe5]),_0x31fb3e[_0x136434(0x10b)](0x0);}}}_0x31fb3e=new Float32Array(_0x31fb3e);var _0x11feb2=0x6*_0x5e8c0e[_0x136434(0x1a7)],_0x40e03a=new Uint32Array(_0x11feb2);for(var _0x288a8f=0x0,_0x3b56e2=0x0,_0x49c093=0x0;_0x288a8f<_0x5e8c0e[_0x136434(0x1a7)];_0x288a8f++){_0x40e03a[_0x3b56e2++]=_0x49c093+0x0,_0x40e03a[_0x3b56e2++]=_0x49c093+0x1,_0x40e03a[_0x3b56e2++]=_0x49c093+0x2,_0x40e03a[_0x3b56e2++]=_0x49c093+0x2,_0x40e03a[_0x3b56e2++]=_0x49c093+0x1,_0x40e03a[_0x3b56e2++]=_0x49c093+0x3,_0x49c093+=0x4;}var _0x175ca7=new Cesium$4['Geometry']({'attributes':new Cesium$4[(_0x136434(0x10f))]({'st':new Cesium$4[(_0x136434(0x211))]({'componentDatatype':Cesium$4['ComponentDatatype'][_0x136434(0xcf)],'componentsPerAttribute':0x2,'values':_0x33db18}),'normal':new Cesium$4[(_0x136434(0x211))]({'componentDatatype':Cesium$4[_0x136434(0xc2)]['FLOAT'],'componentsPerAttribute':0x3,'values':_0x31fb3e})}),'indices':_0x40e03a});return _0x175ca7;}},{'key':'createRenderingPrimitives','value':function _0x4933ef(_0x1fd9bb,_0x382393,_0x100626,_0x5088e3){var _0x4ffaa4=_0x41661b,_0x3b8753=this;this[_0x4ffaa4(0x20a)]={'segments':new CustomPrimitive({'commandType':_0x4ffaa4(0x1df),'attributeLocations':{'st':0x0,'normal':0x1},'geometry':this['createSegmentsGeometry'](_0x382393),'primitiveType':Cesium$4[_0x4ffaa4(0x19a)][_0x4ffaa4(0xd9)],'uniformMap':{'currentParticlesPosition':function _0x31a5c5(){var _0x2afebd=_0x4ffaa4;return _0x5088e3[_0x2afebd(0x16a)][_0x2afebd(0xac)];},'postProcessingPosition':function _0x1e5dd2(){var _0xbbaf0=_0x4ffaa4;return _0x5088e3[_0xbbaf0(0x16a)][_0xbbaf0(0x189)];},'postProcessingSpeed':function _0xc8d851(){return _0x5088e3['particlesTextures']['postProcessingSpeed'];},'colorTable':function _0x36d3a3(){var _0x102f53=_0x4ffaa4;return _0x3b8753[_0x102f53(0x208)]['colorTable'];},'aspect':function _0x40af25(){var _0x589730=_0x4ffaa4;return _0x1fd9bb[_0x589730(0x173)]/_0x1fd9bb[_0x589730(0xaa)];},'pixelSize':function _0x40e43c(){var _0x147f7f=_0x4ffaa4;return _0x100626[_0x147f7f(0xf1)];},'lineWidth':function _0x470cde(){return _0x382393['lineWidth'];},'particleHeight':function _0x427fa8(){var _0x142ea5=_0x4ffaa4;return _0x382393[_0x142ea5(0x14f)];}},'vertexShaderSource':new Cesium$4[(_0x4ffaa4(0xfd))]({'sources':[segmentDraw_vert]}),'fragmentShaderSource':new Cesium$4[(_0x4ffaa4(0xfd))]({'sources':[segmentDraw_frag]}),'rawRenderState':Util[_0x4ffaa4(0x94)]({'viewport':undefined,'depthTest':{'enabled':!![]},'depthMask':!![]}),'framebuffer':this[_0x4ffaa4(0x16c)][_0x4ffaa4(0xc0)],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':_0x4ffaa4(0x1df),'attributeLocations':{'position':0x0,'st':0x1},'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4[_0x4ffaa4(0x19a)][_0x4ffaa4(0xd9)],'uniformMap':{'segmentsColorTexture':function _0xb04208(){var _0x1085a1=_0x4ffaa4;return _0x3b8753['textures'][_0x1085a1(0xc1)];},'segmentsDepthTexture':function _0x51789e(){return _0x3b8753['textures']['segmentsDepth'];},'currentTrailsColor':function _0x414e0f(){var _0x2b90b7=_0x4ffaa4;return _0x3b8753[_0x2b90b7(0x16c)][_0x2b90b7(0xb7)][_0x2b90b7(0x95)](0x0);},'trailsDepthTexture':function _0x38d511(){var _0xc4c112=_0x4ffaa4;return _0x3b8753[_0xc4c112(0x16c)][_0xc4c112(0xb7)][_0xc4c112(0x210)];},'fadeOpacity':function _0x2b9b90(){return _0x382393['fadeOpacity'];}},'vertexShaderSource':new Cesium$4['ShaderSource']({'defines':[_0x4ffaa4(0x118)],'sources':[fullscreen_vert]}),'fragmentShaderSource':new Cesium$4[(_0x4ffaa4(0xfd))]({'defines':[_0x4ffaa4(0x194)],'sources':[trailDraw_frag]}),'rawRenderState':Util[_0x4ffaa4(0x94)]({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4['DepthFunction'][_0x4ffaa4(0x125)]},'depthMask':!![]}),'framebuffer':this['framebuffers'][_0x4ffaa4(0x1f3)],'autoClear':!![],'preExecute':function _0x5e1e19(){var _0x217293=_0x4ffaa4,_0x253c2d=_0x3b8753[_0x217293(0x16c)][_0x217293(0xb7)];_0x3b8753[_0x217293(0x16c)][_0x217293(0xb7)]=_0x3b8753[_0x217293(0x16c)][_0x217293(0x1f3)],_0x3b8753[_0x217293(0x16c)]['nextTrails']=_0x253c2d,_0x3b8753[_0x217293(0x20a)][_0x217293(0x14b)]['commandToExecute'][_0x217293(0x16d)]=_0x3b8753[_0x217293(0x16c)][_0x217293(0x1f3)],_0x3b8753[_0x217293(0x20a)][_0x217293(0x14b)][_0x217293(0x1a2)][_0x217293(0x16d)]=_0x3b8753[_0x217293(0x16c)][_0x217293(0x1f3)];}}),'screen':new CustomPrimitive({'commandType':_0x4ffaa4(0x1df),'attributeLocations':{'position':0x0,'st':0x1},'geometry':Util[_0x4ffaa4(0x203)](),'primitiveType':Cesium$4[_0x4ffaa4(0x19a)][_0x4ffaa4(0xd9)],'uniformMap':{'trailsColorTexture':function _0xa08bf(){var _0x1dda9b=_0x4ffaa4;return _0x3b8753[_0x1dda9b(0x16c)]['nextTrails'][_0x1dda9b(0x95)](0x0);},'trailsDepthTexture':function _0x45667d(){var _0x13d6ff=_0x4ffaa4;return _0x3b8753[_0x13d6ff(0x16c)][_0x13d6ff(0x1f3)][_0x13d6ff(0x210)];}},'vertexShaderSource':new Cesium$4[(_0x4ffaa4(0xfd))]({'defines':[_0x4ffaa4(0x118)],'sources':[fullscreen_vert]}),'fragmentShaderSource':new Cesium$4[(_0x4ffaa4(0xfd))]({'defines':[_0x4ffaa4(0x194)],'sources':[screenDraw_frag]}),'rawRenderState':Util[_0x4ffaa4(0x94)]({'viewport':undefined,'depthTest':{'enabled':![]},'depthMask':!![],'blending':{'enabled':!![]}}),'framebuffer':undefined})};}}]),_0xbeec03;}()),getWind_frag=_0x30f976(0x133),updateSpeed_frag='uniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0auniform\x20sampler2D\x20particlesWind;\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20speedFactor;\x0a\x0avarying\x20vec2\x20v_textureCoordinates;\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec3\x20percent\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20\x20\x20float\x20normalization\x20=\x20length(percent);\x0a\x0a\x20\x20\x20\x20return\x20normalization;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20currentSpeed\x20=\x20texture2D(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20texture2D(particlesWind,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20vec4(speedFactor\x20*\x20pixelSize\x20*\x20windVector,\x20calculateWindNorm(windVector));\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20nextSpeed;\x0a}',updatePosition_frag='uniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0avarying\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20\x20\x20float\x20term1\x20=\x20111132.92;\x0a\x20\x20\x20\x20float\x20term2\x20=\x20559.82\x20*\x20cos(2.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term3\x20=\x201.175\x20*\x20cos(4.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term4\x20=\x200.0023\x20*\x20cos(6.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20\x20\x20float\x20term5\x20=\x20111412.84\x20*\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20term6\x20=\x2093.5\x20*\x20cos(3.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term7\x20=\x200.118\x20*\x20cos(5.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avoid\x20updatePosition(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20windVectorInLonLatLev;\x0a\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture2D(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20speed\x20=\x20texture2D(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20updatePosition(lonLatLev,\x20speed);\x0a}',postProcessingPosition_frag=_0x30f976(0x20c),postProcessingSpeed_frag=_0x30f976(0x1ef),Cesium$3=mars3d__namespace['Cesium'],ParticlesComputing=(function(){var _0x516448=_0x30f976;function _0x106a71(_0x2d4b2a,_0xdd260f,_0x2175c5,_0x527b16){var _0x4e372a=_0x458d;_classCallCheck(this,_0x106a71),this[_0x4e372a(0x1de)]=_0xdd260f,this[_0x4e372a(0x10e)](_0x2d4b2a,_0xdd260f),this[_0x4e372a(0x115)](_0x2d4b2a,_0x2175c5,_0x527b16),this[_0x4e372a(0xe2)](_0xdd260f,_0x2175c5,_0x527b16);}return _createClass(_0x106a71,[{'key':_0x516448(0x10e),'value':function _0x4e833a(_0x36a024,_0x73c91d){var _0x32d59e=_0x516448,_0x5330c5={'context':_0x36a024,'width':_0x73c91d[_0x32d59e(0xa7)][_0x32d59e(0xea)],'height':_0x73c91d[_0x32d59e(0xa7)][_0x32d59e(0xbb)]*(_0x73c91d['dimensions'][_0x32d59e(0x1e4)]||0x1),'pixelFormat':Cesium$3['PixelFormat'][_0x32d59e(0xb4)],'pixelDatatype':Cesium$3[_0x32d59e(0x19b)][_0x32d59e(0xcf)],'flipY':![],'sampler':new Cesium$3[(_0x32d59e(0x17e))]({'minificationFilter':Cesium$3[_0x32d59e(0x205)][_0x32d59e(0x198)],'magnificationFilter':Cesium$3['TextureMagnificationFilter']['NEAREST']})};this['windTextures']={'U':Util[_0x32d59e(0xda)](_0x5330c5,_0x73c91d['U'][_0x32d59e(0xe9)]),'V':Util[_0x32d59e(0xda)](_0x5330c5,_0x73c91d['V'][_0x32d59e(0xe9)])};}},{'key':_0x516448(0x115),'value':function _0xcee572(_0x7b6641,_0x246e2c,_0x4d9046){var _0x3e1747=_0x516448,_0x43b319={'context':_0x7b6641,'width':_0x246e2c['particlesTextureSize'],'height':_0x246e2c[_0x3e1747(0xca)],'pixelFormat':Cesium$3[_0x3e1747(0x17a)]['RGBA'],'pixelDatatype':Cesium$3[_0x3e1747(0x19b)][_0x3e1747(0xcf)],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3[_0x3e1747(0x205)][_0x3e1747(0x198)],'magnificationFilter':Cesium$3[_0x3e1747(0x163)][_0x3e1747(0x198)]})},_0x15ebb3=this[_0x3e1747(0x212)](_0x246e2c[_0x3e1747(0x1a7)],_0x4d9046),_0x265a73=new Float32Array(0x4*_0x246e2c['maxParticles'])[_0x3e1747(0x186)](0x0);this['particlesTextures']={'particlesWind':Util['createTexture'](_0x43b319),'currentParticlesPosition':Util[_0x3e1747(0xda)](_0x43b319,_0x15ebb3),'nextParticlesPosition':Util[_0x3e1747(0xda)](_0x43b319,_0x15ebb3),'currentParticlesSpeed':Util[_0x3e1747(0xda)](_0x43b319,_0x265a73),'nextParticlesSpeed':Util[_0x3e1747(0xda)](_0x43b319,_0x265a73),'postProcessingPosition':Util['createTexture'](_0x43b319,_0x15ebb3),'postProcessingSpeed':Util[_0x3e1747(0xda)](_0x43b319,_0x265a73)};}},{'key':_0x516448(0x212),'value':function _0xd3aaec(_0x5ea236,_0x1f9e40){var _0x586d15=_0x516448,_0x35c585=new Float32Array(0x4*_0x5ea236);for(var _0x27b621=0x0;_0x27b621<_0x5ea236;_0x27b621++){_0x35c585[0x4*_0x27b621]=Cesium$3[_0x586d15(0xc3)][_0x586d15(0xc7)](_0x1f9e40[_0x586d15(0xd7)]['x'],_0x1f9e40[_0x586d15(0xd7)]['y']),_0x35c585[0x4*_0x27b621+0x1]=Cesium$3[_0x586d15(0xc3)][_0x586d15(0xc7)](_0x1f9e40['latRange']['x'],_0x1f9e40[_0x586d15(0x1fd)]['y']),_0x35c585[0x4*_0x27b621+0x2]=Cesium$3['Math'][_0x586d15(0xc7)](this['data'][_0x586d15(0x1e4)][_0x586d15(0x178)],this['data'][_0x586d15(0x1e4)][_0x586d15(0x196)]),_0x35c585[0x4*_0x27b621+0x3]=0x0;}return _0x35c585;}},{'key':_0x516448(0x135),'value':function _0x5c8a78(){var _0x52f4de=_0x516448,_0x5768d0=this;Object['keys'](this[_0x52f4de(0x16a)])[_0x52f4de(0x193)](function(_0x1b066f){var _0x4880c0=_0x52f4de;_0x5768d0[_0x4880c0(0x16a)][_0x1b066f][_0x4880c0(0x106)]();});}},{'key':_0x516448(0xe2),'value':function _0x5e5b40(_0x41964e,_0x55b280,_0x5292dd){var _0x9300db=_0x516448,_0x141291=new Cesium$3[(_0x9300db(0x177))](_0x41964e[_0x9300db(0xa7)][_0x9300db(0xea)],_0x41964e['dimensions'][_0x9300db(0xbb)],_0x41964e['dimensions'][_0x9300db(0x1e4)]),_0x5c3ea5=new Cesium$3[(_0x9300db(0x177))](_0x41964e['lon'][_0x9300db(0x178)],_0x41964e[_0x9300db(0xbb)][_0x9300db(0x178)],_0x41964e[_0x9300db(0x1e4)][_0x9300db(0x178)]),_0x1024c0=new Cesium$3[(_0x9300db(0x177))](_0x41964e[_0x9300db(0xea)][_0x9300db(0x196)],_0x41964e['lat'][_0x9300db(0x196)],_0x41964e[_0x9300db(0x1e4)][_0x9300db(0x196)]),_0x16eac9=new Cesium$3[(_0x9300db(0x177))]((_0x1024c0['x']-_0x5c3ea5['x'])/(_0x141291['x']-0x1),(_0x1024c0['y']-_0x5c3ea5['y'])/(_0x141291['y']-0x1),_0x141291['z']>0x1?(_0x1024c0['z']-_0x5c3ea5['z'])/(_0x141291['z']-0x1):0x1),_0x57d0cc=new Cesium$3[(_0x9300db(0x17c))](_0x41964e['U']['min'],_0x41964e['U']['max']),_0x49e6c2=new Cesium$3[(_0x9300db(0x17c))](_0x41964e['V'][_0x9300db(0x178)],_0x41964e['V']['max']),_0x384dc8=this;this[_0x9300db(0x20a)]={'getWind':new CustomPrimitive({'commandType':_0x9300db(0x17f),'uniformMap':{'U':function _0x4dfc14(){var _0x24028a=_0x9300db;return _0x384dc8[_0x24028a(0x142)]['U'];},'V':function _0x59f587(){var _0x370022=_0x9300db;return _0x384dc8[_0x370022(0x142)]['V'];},'currentParticlesPosition':function _0x50d170(){var _0xa38147=_0x9300db;return _0x384dc8[_0xa38147(0x16a)]['currentParticlesPosition'];},'dimension':function _0x1c2524(){return _0x141291;},'minimum':function _0x41904e(){return _0x5c3ea5;},'maximum':function _0x45f2dc(){return _0x1024c0;},'interval':function _0xa8aefd(){return _0x16eac9;}},'fragmentShaderSource':new Cesium$3[(_0x9300db(0xfd))]({'sources':[getWind_frag]}),'outputTexture':this[_0x9300db(0x16a)][_0x9300db(0x164)],'preExecute':function _0x31b442(){var _0x1c2208=_0x9300db;_0x384dc8[_0x1c2208(0x20a)][_0x1c2208(0x151)][_0x1c2208(0x146)][_0x1c2208(0xe0)]=_0x384dc8['particlesTextures'][_0x1c2208(0x164)];}}),'updateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesSpeed':function _0x423225(){var _0x44e76=_0x9300db;return _0x384dc8['particlesTextures'][_0x44e76(0xcb)];},'particlesWind':function _0x58ac23(){var _0x40650a=_0x9300db;return _0x384dc8[_0x40650a(0x16a)][_0x40650a(0x164)];},'uSpeedRange':function _0x3d28ed(){return _0x57d0cc;},'vSpeedRange':function _0x13ca60(){return _0x49e6c2;},'pixelSize':function _0x4a2d26(){var _0x4ee42e=_0x9300db;return _0x5292dd[_0x4ee42e(0xf1)];},'speedFactor':function _0x14b311(){var _0x509b77=_0x9300db;return _0x55b280[_0x509b77(0x21b)];}},'fragmentShaderSource':new Cesium$3['ShaderSource']({'sources':[updateSpeed_frag]}),'outputTexture':this[_0x9300db(0x16a)]['nextParticlesSpeed'],'preExecute':function _0x21f273(){var _0x17e521=_0x9300db,_0x3fa2bb=_0x384dc8[_0x17e521(0x16a)][_0x17e521(0xcb)];_0x384dc8['particlesTextures'][_0x17e521(0xcb)]=_0x384dc8['particlesTextures'][_0x17e521(0xdf)],_0x384dc8[_0x17e521(0x16a)][_0x17e521(0xdf)]=_0x3fa2bb,_0x384dc8[_0x17e521(0x20a)][_0x17e521(0x99)]['commandToExecute'][_0x17e521(0xe0)]=_0x384dc8[_0x17e521(0x16a)][_0x17e521(0x206)];}}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':function _0x3e7476(){return _0x384dc8['particlesTextures']['currentParticlesPosition'];},'currentParticlesSpeed':function _0x561569(){var _0x49fe59=_0x9300db;return _0x384dc8[_0x49fe59(0x16a)][_0x49fe59(0xcb)];}},'fragmentShaderSource':new Cesium$3[(_0x9300db(0xfd))]({'sources':[updatePosition_frag]}),'outputTexture':this[_0x9300db(0x16a)][_0x9300db(0x209)],'preExecute':function _0x2db364(){var _0x591622=_0x9300db,_0x2d87a3=_0x384dc8[_0x591622(0x16a)]['currentParticlesPosition'];_0x384dc8[_0x591622(0x16a)][_0x591622(0xac)]=_0x384dc8[_0x591622(0x16a)]['postProcessingPosition'],_0x384dc8[_0x591622(0x16a)][_0x591622(0x189)]=_0x2d87a3,_0x384dc8[_0x591622(0x20a)][_0x591622(0xdb)][_0x591622(0x146)][_0x591622(0xe0)]=_0x384dc8[_0x591622(0x16a)]['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x9300db(0x17f),'uniformMap':{'nextParticlesPosition':function _0x4df7b1(){var _0x4ed492=_0x9300db;return _0x384dc8[_0x4ed492(0x16a)][_0x4ed492(0x209)];},'nextParticlesSpeed':function _0x23e137(){return _0x384dc8['particlesTextures']['nextParticlesSpeed'];},'lonRange':function _0x628929(){var _0x206d06=_0x9300db;return _0x5292dd[_0x206d06(0xd7)];},'latRange':function _0x5cfd1f(){return _0x5292dd['latRange'];},'randomCoefficient':function _0x1b1f0e(){var _0x5a88c2=_0x9300db,_0x331609=Math[_0x5a88c2(0x161)]();return _0x331609;},'dropRate':function _0x3f7b0c(){return _0x55b280['dropRate'];},'dropRateBump':function _0x56b1ad(){var _0x4f6506=_0x9300db;return _0x55b280[_0x4f6506(0x15b)];}},'fragmentShaderSource':new Cesium$3[(_0x9300db(0xfd))]({'sources':[postProcessingPosition_frag]}),'outputTexture':this['particlesTextures'][_0x9300db(0x189)],'preExecute':function _0x2cbfdd(){var _0x206a2f=_0x9300db;_0x384dc8[_0x206a2f(0x20a)][_0x206a2f(0x189)]['commandToExecute'][_0x206a2f(0xe0)]=_0x384dc8[_0x206a2f(0x16a)]['postProcessingPosition'];}}),'postProcessingSpeed':new CustomPrimitive({'commandType':_0x9300db(0x17f),'uniformMap':{'postProcessingPosition':function _0x30e011(){var _0x5a1f9d=_0x9300db;return _0x384dc8[_0x5a1f9d(0x16a)][_0x5a1f9d(0x189)];},'nextParticlesSpeed':function _0x369b15(){var _0x32b165=_0x9300db;return _0x384dc8[_0x32b165(0x16a)]['nextParticlesSpeed'];}},'fragmentShaderSource':new Cesium$3[(_0x9300db(0xfd))]({'sources':[postProcessingSpeed_frag]}),'outputTexture':this[_0x9300db(0x16a)]['postProcessingSpeed'],'preExecute':function _0x15b8db(){var _0x3f6066=_0x9300db;_0x384dc8['primitives'][_0x3f6066(0xdf)][_0x3f6066(0x146)][_0x3f6066(0xe0)]=_0x384dc8[_0x3f6066(0x16a)][_0x3f6066(0xdf)];}})};}}]),_0x106a71;}()),Cesium$2=mars3d__namespace[_0x30f976(0x1c6)],ParticleSystem=(function(){var _0x4b6a06=_0x30f976;function _0x1f377f(_0x1e3412,_0x5081a2,_0x289b76,_0x296048){var _0x584554=_0x458d;_classCallCheck(this,_0x1f377f),this[_0x584554(0xbe)]=_0x1e3412,_0x5081a2=_objectSpread2({},_0x5081a2);if(_0x5081a2[_0x584554(0x1f4)]&&_0x5081a2[_0x584554(0xa9)]){var _0xc24e76,_0x3a9d64,_0x45e3cf,_0x552657,_0x11fb4b,_0x166801;_0x5081a2[_0x584554(0xa7)]={},_0x5081a2[_0x584554(0xa7)][_0x584554(0xea)]=_0x5081a2[_0x584554(0x16f)],_0x5081a2[_0x584554(0xa7)][_0x584554(0xbb)]=_0x5081a2[_0x584554(0xb3)],_0x5081a2[_0x584554(0xa7)][_0x584554(0x1e4)]=_0x5081a2[_0x584554(0x1e4)]||0x1,_0x5081a2[_0x584554(0xea)]={},_0x5081a2[_0x584554(0xea)][_0x584554(0x178)]=_0x5081a2[_0x584554(0xdd)],_0x5081a2[_0x584554(0xea)][_0x584554(0x196)]=_0x5081a2[_0x584554(0x107)],_0x5081a2[_0x584554(0xbb)]={},_0x5081a2[_0x584554(0xbb)]['min']=_0x5081a2['ymin'],_0x5081a2[_0x584554(0xbb)][_0x584554(0x196)]=_0x5081a2[_0x584554(0xd4)],_0x5081a2[_0x584554(0x1e4)]={},_0x5081a2['lev'][_0x584554(0x178)]=(_0xc24e76=_0x5081a2[_0x584554(0x1fe)])!==null&&_0xc24e76!==void 0x0?_0xc24e76:0x1,_0x5081a2[_0x584554(0x1e4)]['max']=(_0x3a9d64=_0x5081a2[_0x584554(0x213)])!==null&&_0x3a9d64!==void 0x0?_0x3a9d64:0x1,_0x5081a2['U']={},_0x5081a2['U'][_0x584554(0xe9)]=new Float32Array(_0x5081a2[_0x584554(0x1f4)]),_0x5081a2['U'][_0x584554(0x178)]=(_0x45e3cf=_0x5081a2[_0x584554(0x185)])!==null&&_0x45e3cf!==void 0x0?_0x45e3cf:Math[_0x584554(0x178)][_0x584554(0x93)](Math,_toConsumableArray(_0x5081a2[_0x584554(0x1f4)])),_0x5081a2['U']['max']=(_0x552657=_0x5081a2[_0x584554(0x17b)])!==null&&_0x552657!==void 0x0?_0x552657:Math['max']['apply'](Math,_toConsumableArray(_0x5081a2[_0x584554(0x1f4)])),_0x5081a2['V']={},_0x5081a2['V'][_0x584554(0xe9)]=new Float32Array(_0x5081a2[_0x584554(0xa9)]),_0x5081a2['V'][_0x584554(0x178)]=(_0x11fb4b=_0x5081a2[_0x584554(0x1ec)])!==null&&_0x11fb4b!==void 0x0?_0x11fb4b:Math[_0x584554(0x178)][_0x584554(0x93)](Math,_toConsumableArray(_0x5081a2[_0x584554(0xa9)])),_0x5081a2['V'][_0x584554(0x196)]=(_0x166801=_0x5081a2[_0x584554(0x123)])!==null&&_0x166801!==void 0x0?_0x166801:Math[_0x584554(0x196)]['apply'](Math,_toConsumableArray(_0x5081a2[_0x584554(0xa9)]));}this[_0x584554(0x1de)]=_0x5081a2,this[_0x584554(0x169)]=_0x289b76,this[_0x584554(0xa2)]=_0x296048,this[_0x584554(0x192)]=new ParticlesComputing(this[_0x584554(0xbe)],this[_0x584554(0x1de)],this[_0x584554(0x169)],this[_0x584554(0xa2)]),this['particlesRendering']=new ParticlesRendering(this[_0x584554(0xbe)],this[_0x584554(0x1de)],this[_0x584554(0x169)],this[_0x584554(0xa2)],this[_0x584554(0x192)]);}return _createClass(_0x1f377f,[{'key':_0x4b6a06(0x119),'value':function _0x4cabc4(_0x3b7508){var _0x4ebe9b=_0x4b6a06,_0x25944a=this;this[_0x4ebe9b(0x192)][_0x4ebe9b(0x135)](),Object[_0x4ebe9b(0xf9)](this[_0x4ebe9b(0x192)][_0x4ebe9b(0x142)])['forEach'](function(_0x32c5af){var _0x1b6955=_0x4ebe9b;_0x25944a[_0x1b6955(0x192)][_0x1b6955(0x142)][_0x32c5af][_0x1b6955(0x106)]();}),this[_0x4ebe9b(0x1e7)]['textures']['colorTable'][_0x4ebe9b(0x106)](),Object[_0x4ebe9b(0xf9)](this[_0x4ebe9b(0x1e7)][_0x4ebe9b(0x16c)])[_0x4ebe9b(0x193)](function(_0x49f613){var _0x1febab=_0x4ebe9b;_0x25944a['particlesRendering'][_0x1febab(0x16c)][_0x49f613][_0x1febab(0x106)]();}),this[_0x4ebe9b(0xbe)]=_0x3b7508,this[_0x4ebe9b(0x192)]=new ParticlesComputing(this[_0x4ebe9b(0xbe)],this[_0x4ebe9b(0x1de)],this[_0x4ebe9b(0x169)],this[_0x4ebe9b(0xa2)]),this['particlesRendering']=new ParticlesRendering(this[_0x4ebe9b(0xbe)],this[_0x4ebe9b(0x1de)],this[_0x4ebe9b(0x169)],this[_0x4ebe9b(0xa2)],this['particlesComputing']);}},{'key':'clearFramebuffers','value':function _0x5e1d72(){var _0x44d397=_0x4b6a06,_0x4045c6=this,_0x407c3e=new Cesium$2[(_0x44d397(0xfc))]({'color':new Cesium$2[(_0x44d397(0x1ce))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2[_0x44d397(0x1d0)][_0x44d397(0x1b1)]});Object[_0x44d397(0xf9)](this['particlesRendering'][_0x44d397(0x16c)])[_0x44d397(0x193)](function(_0x383567){var _0x2e1497=_0x44d397;_0x407c3e[_0x2e1497(0x16d)]=_0x4045c6['particlesRendering'][_0x2e1497(0x16c)][_0x383567],_0x407c3e[_0x2e1497(0xf0)](_0x4045c6['context']);});}},{'key':_0x4b6a06(0xa3),'value':function _0xd83d50(_0x338771){var _0x13bd28=_0x4b6a06;this['clearFramebuffers'](),this[_0x13bd28(0x192)][_0x13bd28(0x135)](),this[_0x13bd28(0x192)]['createParticlesTextures'](this[_0x13bd28(0xbe)],this[_0x13bd28(0x169)],this[_0x13bd28(0xa2)]);if(_0x338771){var _0x394f72=this[_0x13bd28(0x1e7)][_0x13bd28(0xec)](this['options']);this[_0x13bd28(0x1e7)][_0x13bd28(0x20a)][_0x13bd28(0xc0)][_0x13bd28(0x152)]=_0x394f72;var _0xe1e8c3=Cesium$2['VertexArray']['fromGeometry']({'context':this[_0x13bd28(0xbe)],'geometry':_0x394f72,'attributeLocations':this[_0x13bd28(0x1e7)][_0x13bd28(0x20a)][_0x13bd28(0xc0)][_0x13bd28(0x92)],'bufferUsage':Cesium$2[_0x13bd28(0x1e3)]['STATIC_DRAW']});this['particlesRendering'][_0x13bd28(0x20a)][_0x13bd28(0xc0)][_0x13bd28(0x146)]['vertexArray']=_0xe1e8c3;}}},{'key':_0x4b6a06(0x1ca),'value':function _0x1d773e(_0x4465cb){var _0x4b4e7f=_0x4b6a06,_0x2eedfc=this,_0x546527=![];this[_0x4b4e7f(0x169)][_0x4b4e7f(0x1a7)]!==_0x4465cb[_0x4b4e7f(0x1a7)]&&(_0x546527=!![]),Object[_0x4b4e7f(0xf9)](_0x4465cb)['forEach'](function(_0x150422){_0x2eedfc['options'][_0x150422]=_0x4465cb[_0x150422];}),this['refreshParticles'](_0x546527);}},{'key':_0x4b6a06(0x197),'value':function _0x44acdf(_0x207a1e){var _0x2a38a5=_0x4b6a06,_0x694867=this;Object[_0x2a38a5(0xf9)](_0x207a1e)[_0x2a38a5(0x193)](function(_0x544fc9){var _0x21c7d6=_0x2a38a5;_0x694867[_0x21c7d6(0xa2)][_0x544fc9]=_0x207a1e[_0x544fc9];}),this['refreshParticles'](![]);}},{'key':_0x4b6a06(0x106),'value':function _0x24e5db(){var _0x5bb1cb=_0x4b6a06,_0x5a62de=this;clearTimeout(this[_0x5bb1cb(0xbc)]),this[_0x5bb1cb(0x192)][_0x5bb1cb(0x135)](),Object['keys'](this['particlesComputing'][_0x5bb1cb(0x142)])['forEach'](function(_0x523c25){var _0x40b402=_0x5bb1cb;_0x5a62de[_0x40b402(0x192)][_0x40b402(0x142)][_0x523c25][_0x40b402(0x106)]();}),this[_0x5bb1cb(0x1e7)][_0x5bb1cb(0x208)][_0x5bb1cb(0x166)]['destroy'](),Object[_0x5bb1cb(0xf9)](this[_0x5bb1cb(0x1e7)][_0x5bb1cb(0x16c)])[_0x5bb1cb(0x193)](function(_0x22e2c9){var _0x31f369=_0x5bb1cb;_0x5a62de[_0x31f369(0x1e7)]['framebuffers'][_0x22e2c9]['destroy']();});for(var _0x1ef9fb in this){delete this[_0x1ef9fb];}}}]),_0x1f377f;}()),Cesium$1=mars3d__namespace[_0x30f976(0x1c6)],BaseLayer$1=mars3d__namespace[_0x30f976(0x11f)][_0x30f976(0xa8)],DEF_OPTIONS={'particlesNumber':0x1000,'fixedHeight':0x0,'fadeOpacity':0.996,'dropRate':0.003,'dropRateBump':0.01,'speedFactor':0.5,'lineWidth':0x2,'colors':[_0x30f976(0x174)]},WindLayer=function(_0x4da06c){var _0x519ae8=_0x30f976;_inherits(_0x13a3bc,_0x4da06c);var _0x1adc68=_createSuper(_0x13a3bc);function _0x13a3bc(){var _0x203afc=_0x458d,_0x45728a,_0x1fd4d6=arguments[_0x203afc(0x12e)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x13a3bc),_0x1fd4d6=_objectSpread2(_objectSpread2({},DEF_OPTIONS),_0x1fd4d6),_0x45728a=_0x1adc68[_0x203afc(0x139)](this,_0x1fd4d6),_0x45728a[_0x203afc(0x1ff)](_0x1fd4d6),_0x45728a;}return _createClass(_0x13a3bc,[{'key':_0x519ae8(0x11f),'get':function _0xe9047(){var _0x1a402d=_0x519ae8;return this[_0x1a402d(0x20a)];}},{'key':_0x519ae8(0x1de),'get':function _0x895577(){var _0x2be767=_0x519ae8;return this[_0x2be767(0xb9)];},'set':function _0x3fd5fe(_0x3a528b){var _0x404175=_0x519ae8;this[_0x404175(0xfe)](_0x3a528b);}},{'key':_0x519ae8(0x1cb),'get':function _0x10889a(){var _0x145ba1=_0x519ae8;return this[_0x145ba1(0x169)][_0x145ba1(0x1cb)];},'set':function _0x1a50f3(_0x2d7baf){var _0x23a32a=_0x519ae8;this['options']['colors']=_0x2d7baf,this[_0x23a32a(0xfb)]&&this[_0x23a32a(0xfb)][_0x23a32a(0x1ca)]({'colors':_0x2d7baf}),this[_0x23a32a(0x1e5)]();}},{'key':'_mountedHook','value':function _0x4b742e(){}},{'key':_0x519ae8(0xee),'value':function _0x389ace(){var _0x55e347=_0x519ae8;this[_0x55e347(0x1f9)]=this[_0x55e347(0x129)][_0x55e347(0x1f9)],this[_0x55e347(0x184)]=this[_0x55e347(0x129)]['camera'],this[_0x55e347(0x20a)]=new Cesium$1[(_0x55e347(0xa5))](),this[_0x55e347(0x129)][_0x55e347(0x1f9)][_0x55e347(0x20a)]['add'](this[_0x55e347(0x20a)]),this['viewerParameters']={'lonRange':new Cesium$1[(_0x55e347(0x17c))](),'latRange':new Cesium$1['Cartesian2'](),'pixelSize':0x0},this[_0x55e347(0x1fc)]=new Cesium$1[(_0x55e347(0xf6))](Cesium$1['Cartesian3'][_0x55e347(0x216)],0.99*0x615299),this[_0x55e347(0x110)](),window[_0x55e347(0xc5)](_0x55e347(0x1e5),this[_0x55e347(0x1e5)][_0x55e347(0x102)](this),![]),this['mouse_down']=![],this[_0x55e347(0x1e2)]=![],this[_0x55e347(0x129)]['on'](mars3d__namespace['EventType'][_0x55e347(0x1af)],this[_0x55e347(0x12f)],this),this['_map']['on'](mars3d__namespace[_0x55e347(0x20e)][_0x55e347(0x141)],this[_0x55e347(0xcc)],this),this[_0x55e347(0x129)]['on'](mars3d__namespace[_0x55e347(0x20e)]['mouseUp'],this[_0x55e347(0x1f6)],this),this[_0x55e347(0x129)]['on'](mars3d__namespace[_0x55e347(0x20e)][_0x55e347(0x100)],this[_0x55e347(0x11e)],this),this[_0x55e347(0xb9)]&&this[_0x55e347(0xfe)](this['_data']);}},{'key':_0x519ae8(0xa1),'value':function _0xeb337e(){var _0x28f711=_0x519ae8;window[_0x28f711(0x1db)](_0x28f711(0x1e5),this[_0x28f711(0x1e5)]),this['_map'][_0x28f711(0xf5)](mars3d__namespace[_0x28f711(0x20e)][_0x28f711(0x207)],this['_onMap_preRenderEvent'],this),this[_0x28f711(0x129)][_0x28f711(0xf5)](mars3d__namespace['EventType'][_0x28f711(0x1af)],this['_onMapWhellEvent'],this),this[_0x28f711(0x129)][_0x28f711(0xf5)](mars3d__namespace[_0x28f711(0x20e)][_0x28f711(0x141)],this[_0x28f711(0xcc)],this),this['_map'][_0x28f711(0xf5)](mars3d__namespace[_0x28f711(0x20e)][_0x28f711(0x18a)],this['_onMouseUpEvent'],this),this['_map'][_0x28f711(0xf5)](mars3d__namespace[_0x28f711(0x20e)]['mouseMove'],this[_0x28f711(0x11e)],this),this[_0x28f711(0x20a)][_0x28f711(0x10a)](),this[_0x28f711(0x129)][_0x28f711(0x1f9)]['primitives']['remove'](this[_0x28f711(0x20a)]);}},{'key':'resize','value':function _0x3df1ac(){var _0x2c2c71=_0x519ae8;if(!this[_0x2c2c71(0x20d)]||!this[_0x2c2c71(0xfb)])return;this[_0x2c2c71(0x20a)][_0x2c2c71(0x20d)]=![],this[_0x2c2c71(0x20a)][_0x2c2c71(0x10a)](),this[_0x2c2c71(0x129)]['once'](mars3d__namespace[_0x2c2c71(0x20e)]['preRender'],this[_0x2c2c71(0x128)],this);}},{'key':'_onMap_preRenderEvent','value':function _0x1dd487(_0x339391){var _0x3fada1=_0x519ae8;this[_0x3fada1(0xfb)]['canvasResize'](this['scene'][_0x3fada1(0xbe)]),this[_0x3fada1(0x195)](),this[_0x3fada1(0x20a)][_0x3fada1(0x20d)]=!![];}},{'key':_0x519ae8(0x12f),'value':function _0x19a5e2(_0x1d0d98){var _0x43998d=_0x519ae8,_0x69a1ab=this;clearTimeout(this[_0x43998d(0x1a8)]);if(!this[_0x43998d(0x20d)]||!this['particleSystem'])return;this[_0x43998d(0x20a)]['show']=![],this[_0x43998d(0x1a8)]=setTimeout(function(){var _0x48a231=_0x43998d;if(!_0x69a1ab[_0x48a231(0x20d)])return;_0x69a1ab['redraw']();},0xc8);}},{'key':_0x519ae8(0xcc),'value':function _0x33caa7(_0x2fa722){var _0x46ae71=_0x519ae8;this[_0x46ae71(0x1e6)]=!![];}},{'key':_0x519ae8(0x11e),'value':function _0x493f7e(_0x22c010){var _0x3485f2=_0x519ae8;if(!this[_0x3485f2(0x20d)]||!this[_0x3485f2(0xfb)])return;this[_0x3485f2(0x1e6)]&&(this[_0x3485f2(0x20a)][_0x3485f2(0x20d)]=![],this[_0x3485f2(0x1e2)]=!![]);}},{'key':_0x519ae8(0x1f6),'value':function _0xe65c43(_0x3443b2){var _0x4557d5=_0x519ae8;if(!this[_0x4557d5(0x20d)]||!this[_0x4557d5(0xfb)])return;this[_0x4557d5(0x1e6)]&&this['mouse_move']&&this[_0x4557d5(0x11b)](),this[_0x4557d5(0x20a)][_0x4557d5(0x20d)]=!![],this[_0x4557d5(0x1e6)]=![],this[_0x4557d5(0x1e2)]=![];}},{'key':_0x519ae8(0x11b),'value':function _0x2210f6(){var _0x33a7e7=_0x519ae8;if(!this[_0x33a7e7(0x129)]||!this[_0x33a7e7(0x20d)])return;this[_0x33a7e7(0x110)](),this['particleSystem'][_0x33a7e7(0x197)](this[_0x33a7e7(0xa2)]),this[_0x33a7e7(0x20a)]['show']=!![];}},{'key':'setData','value':function _0x2500a4(_0x1d4515){var _0x4150b1=_0x519ae8;this['_data']=_0x1d4515,this[_0x4150b1(0xfb)]&&this[_0x4150b1(0xfb)][_0x4150b1(0x106)](),this[_0x4150b1(0xfb)]=new ParticleSystem(this['scene'][_0x4150b1(0xbe)],_0x1d4515,this[_0x4150b1(0x155)](),this[_0x4150b1(0xa2)]),this[_0x4150b1(0x195)]();}},{'key':_0x519ae8(0x1ff),'value':function _0x4effee(_0x53ec3b,_0x3111ba){var _0x41053e=_0x519ae8;if(_0x53ec3b)for(var _0x3d81d1 in _0x53ec3b){this[_0x3d81d1]=_0x53ec3b[_0x3d81d1];}this[_0x41053e(0xfb)]&&this[_0x41053e(0xfb)][_0x41053e(0x1ca)](this['getOptions']());}},{'key':_0x519ae8(0x155),'value':function _0x30cd4a(){var _0x1221a6=_0x519ae8,_0x2eeb3b=Math[_0x1221a6(0x154)](Math[_0x1221a6(0xb0)](this['particlesNumber']));return this[_0x1221a6(0x1d9)]=_0x2eeb3b*_0x2eeb3b,{'particlesTextureSize':_0x2eeb3b,'maxParticles':this['particlesNumber'],'particleHeight':this[_0x1221a6(0x12b)],'fadeOpacity':this[_0x1221a6(0xf2)],'dropRate':this[_0x1221a6(0xb1)],'dropRateBump':this[_0x1221a6(0x15b)],'speedFactor':this[_0x1221a6(0x21b)],'lineWidth':this[_0x1221a6(0x162)],'globeLayer':this[_0x1221a6(0x1bf)],'WMS_URL':this[_0x1221a6(0x14c)],'colors':this[_0x1221a6(0x1cb)]};}},{'key':_0x519ae8(0x195),'value':function _0x18b55d(){var _0x22d15c=_0x519ae8;this[_0x22d15c(0x20a)][_0x22d15c(0xd1)](this['particleSystem'][_0x22d15c(0x192)][_0x22d15c(0x20a)]['getWind']),this[_0x22d15c(0x20a)][_0x22d15c(0xd1)](this[_0x22d15c(0xfb)][_0x22d15c(0x192)]['primitives'][_0x22d15c(0x99)]),this[_0x22d15c(0x20a)][_0x22d15c(0xd1)](this['particleSystem'][_0x22d15c(0x192)][_0x22d15c(0x20a)][_0x22d15c(0xdb)]),this[_0x22d15c(0x20a)][_0x22d15c(0xd1)](this[_0x22d15c(0xfb)][_0x22d15c(0x192)]['primitives']['postProcessingPosition']),this['primitives'][_0x22d15c(0xd1)](this[_0x22d15c(0xfb)][_0x22d15c(0x192)][_0x22d15c(0x20a)]['postProcessingSpeed']),this[_0x22d15c(0x20a)][_0x22d15c(0xd1)](this[_0x22d15c(0xfb)]['particlesRendering'][_0x22d15c(0x20a)]['segments']),this['primitives'][_0x22d15c(0xd1)](this[_0x22d15c(0xfb)]['particlesRendering'][_0x22d15c(0x20a)][_0x22d15c(0x14b)]),this[_0x22d15c(0x20a)][_0x22d15c(0xd1)](this[_0x22d15c(0xfb)][_0x22d15c(0x1e7)][_0x22d15c(0x20a)][_0x22d15c(0x1c1)]);}},{'key':_0x519ae8(0x110),'value':function _0x3c17b6(){var _0x3c6253=_0x519ae8,_0x4d0965=this[_0x3c6253(0x184)][_0x3c6253(0x108)](this[_0x3c6253(0x1f9)][_0x3c6253(0x1c9)]['ellipsoid']);if(!_0x4d0965){var _0x4f9238=this[_0x3c6253(0x129)][_0x3c6253(0x168)]();_0x4d0965=Cesium$1[_0x3c6253(0xb5)][_0x3c6253(0xfa)](_0x4f9238[_0x3c6253(0xdd)],_0x4f9238[_0x3c6253(0x1c8)],_0x4f9238[_0x3c6253(0x107)],_0x4f9238['ymax']);}var _0x4d1ea9=Util['viewRectangleToLonLatRange'](_0x4d0965);this['viewerParameters'][_0x3c6253(0xd7)]['x']=_0x4d1ea9[_0x3c6253(0xea)][_0x3c6253(0x178)],this[_0x3c6253(0xa2)]['lonRange']['y']=_0x4d1ea9[_0x3c6253(0xea)][_0x3c6253(0x196)],this[_0x3c6253(0xa2)][_0x3c6253(0x1fd)]['x']=_0x4d1ea9['lat'][_0x3c6253(0x178)],this[_0x3c6253(0xa2)][_0x3c6253(0x1fd)]['y']=_0x4d1ea9[_0x3c6253(0xbb)][_0x3c6253(0x196)];var _0x184d66=this['camera'][_0x3c6253(0xc9)](this[_0x3c6253(0x1fc)],this[_0x3c6253(0x1f9)][_0x3c6253(0x173)],this[_0x3c6253(0x1f9)]['drawingBufferHeight']);_0x184d66>0x0&&(this[_0x3c6253(0xa2)][_0x3c6253(0xf1)]=_0x184d66);}}]),_0x13a3bc;}(BaseLayer$1);function _0x458d(_0x25566b,_0x447c5a){var _0x53434d=_0x5343();return _0x458d=function(_0x458d9e,_0x39bb21){_0x458d9e=_0x458d9e-0x90;var _0x5b2e18=_0x53434d[_0x458d9e];return _0x5b2e18;},_0x458d(_0x25566b,_0x447c5a);}mars3d__namespace[_0x30f976(0x97)][_0x30f976(0x1c2)](_0x30f976(0x181),WindLayer),mars3d__namespace[_0x30f976(0x11f)][_0x30f976(0x21c)]=WindLayer;var CanvasParticle=(function(){var _0x1593b1=_0x30f976;function _0x1d5406(){var _0x457930=_0x458d;_classCallCheck(this,_0x1d5406),this[_0x457930(0x9a)]=null,this[_0x457930(0xbb)]=null,this[_0x457930(0x137)]=null,this[_0x457930(0x138)]=null,this[_0x457930(0x179)]=null;}return _createClass(_0x1d5406,[{'key':_0x1593b1(0x106),'value':function _0x2d837d(){for(var _0x291234 in this){delete this[_0x291234];}}}]),_0x1d5406;}()),CanvasWindField=(function(){var _0x2fce42=_0x30f976;function _0x35ebbb(_0x531ff5){var _0x34da87=_0x458d;_classCallCheck(this,_0x35ebbb),this[_0x34da87(0x1ca)](_0x531ff5);}return _createClass(_0x35ebbb,[{'key':'speedRate','get':function _0x112454(){var _0x1715f4=_0x458d;return this[_0x1715f4(0x112)];},'set':function _0x3be515(_0x24f588){var _0x3ea0b6=_0x458d;this['_speedRate']=(0x64-(_0x24f588>0x63?0x63:_0x24f588))*0x64,this['_calc_speedRate']=[(this['xmax']-this[_0x3ea0b6(0xdd)])/this['_speedRate'],(this[_0x3ea0b6(0xd4)]-this[_0x3ea0b6(0x1c8)])/this[_0x3ea0b6(0x112)]];}},{'key':_0x2fce42(0xe8),'get':function _0x124a8f(){var _0x340a0b=_0x2fce42;return this[_0x340a0b(0x200)];},'set':function _0x1e496b(_0x3fa3dd){var _0x502e30=_0x2fce42;this[_0x502e30(0x200)]=_0x3fa3dd;}},{'key':'setOptions','value':function _0x1af709(_0x36bef9){var _0x34ea6b=_0x2fce42;this[_0x34ea6b(0x169)]=_0x36bef9,this['maxAge']=_0x36bef9[_0x34ea6b(0xe8)]||0x78,this[_0x34ea6b(0xde)]=_0x36bef9[_0x34ea6b(0xde)]||0x32,this[_0x34ea6b(0x12d)]=[];var _0x18047a=_0x36bef9['particlesNumber']||0x1000;for(var _0xf2db0f=0x0;_0xf2db0f<_0x18047a;_0xf2db0f++){var _0x197e3c=this['_randomParticle'](new CanvasParticle());this[_0x34ea6b(0x12d)]['push'](_0x197e3c);}}},{'key':_0x2fce42(0x11c),'value':function _0x11c5aa(_0x1f0e9a){var _0x1979d5=_0x2fce42;this['rows']=_0x1f0e9a[_0x1979d5(0xb3)],this[_0x1979d5(0x16f)]=_0x1f0e9a[_0x1979d5(0x16f)],this[_0x1979d5(0xdd)]=_0x1f0e9a['xmin'],this['xmax']=_0x1f0e9a[_0x1979d5(0x107)],this[_0x1979d5(0x1c8)]=_0x1f0e9a[_0x1979d5(0x1c8)],this[_0x1979d5(0xd4)]=_0x1f0e9a[_0x1979d5(0xd4)],this[_0x1979d5(0x1a0)]=[];var _0x498a97=_0x1f0e9a[_0x1979d5(0x1f4)],_0x1e257e=_0x1f0e9a[_0x1979d5(0xa9)],_0x2ae134=![];_0x498a97['length']===this['rows']&&_0x498a97[0x0][_0x1979d5(0x12e)]===this[_0x1979d5(0x16f)]&&(_0x2ae134=!![]);var _0x347e21=0x0,_0x30ee8c=null,_0x2a4a25=null;for(var _0x6ce9df=0x0;_0x6ce9df<this[_0x1979d5(0xb3)];_0x6ce9df++){_0x30ee8c=[];for(var _0x1cb544=0x0;_0x1cb544<this[_0x1979d5(0x16f)];_0x1cb544++,_0x347e21++){_0x2ae134?_0x2a4a25=this[_0x1979d5(0xd0)](_0x498a97[_0x6ce9df][_0x1cb544],_0x1e257e[_0x6ce9df][_0x1cb544]):_0x2a4a25=this['_calcUV'](_0x498a97[_0x347e21],_0x1e257e[_0x347e21]),_0x30ee8c[_0x1979d5(0x10b)](_0x2a4a25);}this['grid'][_0x1979d5(0x10b)](_0x30ee8c);}this['options'][_0x1979d5(0x19c)]&&this[_0x1979d5(0x1a0)][_0x1979d5(0x176)]();}},{'key':'clear','value':function _0x5c9108(){var _0x22c10c=_0x2fce42;delete this[_0x22c10c(0xb3)],delete this[_0x22c10c(0x16f)],delete this[_0x22c10c(0xdd)],delete this[_0x22c10c(0x107)],delete this[_0x22c10c(0x1c8)],delete this[_0x22c10c(0xd4)],delete this['grid'],delete this[_0x22c10c(0x12d)];}},{'key':_0x2fce42(0x1b4),'value':function _0x1e5cc4(_0xe16758,_0x40cfa5){var _0x598325=_0x2fce42,_0x1facff=(_0xe16758-this[_0x598325(0xdd)])/(this['xmax']-this['xmin'])*(this[_0x598325(0x16f)]-0x1),_0x76c781=(this[_0x598325(0xd4)]-_0x40cfa5)/(this[_0x598325(0xd4)]-this[_0x598325(0x1c8)])*(this[_0x598325(0xb3)]-0x1);return[_0x1facff,_0x76c781];}},{'key':_0x2fce42(0x156),'value':function _0x401a7d(_0x5273de,_0x3dcb46){var _0x4bae93=_0x2fce42;if(_0x5273de<0x0||_0x5273de>=this[_0x4bae93(0x16f)]||_0x3dcb46>=this[_0x4bae93(0xb3)])return[0x0,0x0,0x0];var _0x27cd53=Math[_0x4bae93(0x1cf)](_0x5273de),_0x54e72f=Math['floor'](_0x3dcb46);if(_0x27cd53===_0x5273de&&_0x54e72f===_0x3dcb46)return this['grid'][_0x3dcb46][_0x5273de];var _0x2d16ea=_0x27cd53+0x1,_0x3a7754=_0x54e72f+0x1,_0x1c0543=this[_0x4bae93(0x156)](_0x27cd53,_0x54e72f),_0x4571c8=this[_0x4bae93(0x156)](_0x2d16ea,_0x54e72f),_0x3b010b=this[_0x4bae93(0x156)](_0x27cd53,_0x3a7754),_0x3e7003=this[_0x4bae93(0x156)](_0x2d16ea,_0x3a7754),_0x5aa2c1=null;try{_0x5aa2c1=this[_0x4bae93(0x18c)](_0x5273de-_0x27cd53,_0x3dcb46-_0x54e72f,_0x1c0543,_0x4571c8,_0x3b010b,_0x3e7003);}catch(_0x4b32a8){console[_0x4bae93(0x10d)](_0x5273de,_0x3dcb46);}return _0x5aa2c1;}},{'key':_0x2fce42(0x18c),'value':function _0x2b4a64(_0x1abf13,_0x4f94de,_0x247429,_0x16dc9c,_0x543ff8,_0xcb7e6c){var _0x1220b8=_0x2fce42,_0x392028=0x1-_0x1abf13,_0x5536df=0x1-_0x4f94de,_0x2e65e7=_0x392028*_0x5536df,_0x56392c=_0x1abf13*_0x5536df,_0x35c9b2=_0x392028*_0x4f94de,_0x4298c3=_0x1abf13*_0x4f94de,_0x17aa77=_0x247429[0x0]*_0x2e65e7+_0x16dc9c[0x0]*_0x56392c+_0x543ff8[0x0]*_0x35c9b2+_0xcb7e6c[0x0]*_0x4298c3,_0x1cd77c=_0x247429[0x1]*_0x2e65e7+_0x16dc9c[0x1]*_0x56392c+_0x543ff8[0x1]*_0x35c9b2+_0xcb7e6c[0x1]*_0x4298c3;return this[_0x1220b8(0xd0)](_0x17aa77,_0x1cd77c);}},{'key':_0x2fce42(0xd0),'value':function _0x5e0842(_0x182039,_0x205632){var _0x1f7c4f=_0x2fce42;return[+_0x182039,+_0x205632,Math[_0x1f7c4f(0xb0)](_0x182039*_0x182039+_0x205632*_0x205632)];}},{'key':_0x2fce42(0xd8),'value':function _0xd8b5fa(_0x46eb3d,_0x36202f){var _0x3667ae=_0x2fce42;if(!this[_0x3667ae(0x101)](_0x46eb3d,_0x36202f))return null;var _0x17c385=this['toGridXY'](_0x46eb3d,_0x36202f),_0x358175=this['getUVByXY'](_0x17c385[0x0],_0x17c385[0x1]);return _0x358175;}},{'key':_0x2fce42(0x101),'value':function _0x2339f9(_0x2a5bca,_0x1e8168){var _0x1fb24c=_0x2fce42;return _0x2a5bca>=this[_0x1fb24c(0xdd)]&&_0x2a5bca<=this['xmax']&&_0x1e8168>=this[_0x1fb24c(0x1c8)]&&_0x1e8168<=this[_0x1fb24c(0xd4)]?!![]:![];}},{'key':_0x2fce42(0x204),'value':function _0x1d4691(){var _0x524d3e=_0x2fce42,_0x4c6ecd=fRandomByfloat(this[_0x524d3e(0xdd)],this[_0x524d3e(0x107)]),_0x502afa=fRandomByfloat(this[_0x524d3e(0x1c8)],this[_0x524d3e(0xd4)]);return{'lat':_0x502afa,'lng':_0x4c6ecd};}},{'key':_0x2fce42(0x149),'value':function _0x52c618(){var _0x418d24=_0x2fce42,_0x13bb90,_0x4a934c,_0x2a7eb5;for(var _0x4230c6=0x0,_0x4a241=this[_0x418d24(0x12d)][_0x418d24(0x12e)];_0x4230c6<_0x4a241;_0x4230c6++){var _0x2632be=this[_0x418d24(0x12d)][_0x4230c6];_0x2632be[_0x418d24(0x179)]<=0x0&&(_0x2632be=this[_0x418d24(0x199)](_0x2632be));if(_0x2632be['age']>0x0){var _0x20ed77=_0x2632be[_0x418d24(0x137)],_0x4a8538=_0x2632be[_0x418d24(0x138)];_0x2a7eb5=this[_0x418d24(0xd8)](_0x20ed77,_0x4a8538),_0x2a7eb5?(_0x13bb90=_0x20ed77+this[_0x418d24(0x12a)][0x0]*_0x2a7eb5[0x0],_0x4a934c=_0x4a8538+this[_0x418d24(0x12a)][0x1]*_0x2a7eb5[0x1],_0x2632be[_0x418d24(0x9a)]=_0x20ed77,_0x2632be[_0x418d24(0xbb)]=_0x4a8538,_0x2632be[_0x418d24(0x137)]=_0x13bb90,_0x2632be[_0x418d24(0x138)]=_0x4a934c,_0x2632be[_0x418d24(0x179)]--):_0x2632be[_0x418d24(0x179)]=0x0;}}return this[_0x418d24(0x12d)];}},{'key':'_randomParticle','value':function _0x131530(_0x48a6f8){var _0xe87689=_0x2fce42,_0x1d5405,_0x274343;for(var _0x350de4=0x0;_0x350de4<0x1e;_0x350de4++){_0x1d5405=this['getRandomLatLng'](),_0x274343=this[_0xe87689(0xd8)](_0x1d5405[_0xe87689(0x9a)],_0x1d5405['lat']);if(_0x274343&&_0x274343[0x2]>0x0)break;}if(!_0x274343)return _0x48a6f8;var _0x577a99=_0x1d5405[_0xe87689(0x9a)]+this[_0xe87689(0x12a)][0x0]*_0x274343[0x0],_0x145db9=_0x1d5405[_0xe87689(0xbb)]+this[_0xe87689(0x12a)][0x1]*_0x274343[0x1];return _0x48a6f8[_0xe87689(0x9a)]=_0x1d5405[_0xe87689(0x9a)],_0x48a6f8[_0xe87689(0xbb)]=_0x1d5405['lat'],_0x48a6f8[_0xe87689(0x137)]=_0x577a99,_0x48a6f8['tlat']=_0x145db9,_0x48a6f8['age']=Math['round'](Math[_0xe87689(0x161)]()*this[_0xe87689(0xe8)]),_0x48a6f8;}},{'key':_0x2fce42(0x106),'value':function _0x1df343(){for(var _0x1025eb in this){delete this[_0x1025eb];}}}]),_0x35ebbb;}());function fRandomByfloat(_0x2f94ca,_0x331c4b){var _0x2a6870=_0x30f976;return _0x2f94ca+Math[_0x2a6870(0x161)]()*(_0x331c4b-_0x2f94ca);}var Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x30f976(0xa8)],CanvasWindLayer=function(_0x433eb2){var _0x4873ba=_0x30f976;_inherits(_0x25468b,_0x433eb2);var _0x85c986=_createSuper(_0x25468b);function _0x25468b(){var _0x43372a=_0x458d,_0x51d10a,_0x3dcc42=arguments[_0x43372a(0x12e)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x25468b),_0x51d10a=_0x85c986[_0x43372a(0x139)](this,_0x3dcc42),_0x51d10a['_setOptionsHook'](_0x3dcc42),_0x51d10a[_0x43372a(0x157)]=null,_0x51d10a;}return _createClass(_0x25468b,[{'key':_0x4873ba(0x1ff),'value':function _0x3b000d(_0x5a8cdf,_0x486692){var _0xa8ff78=_0x4873ba,_0x3bebfa,_0x438ad3,_0x8ac2f8;this['frameTime']=0x3e8/(_0x5a8cdf[_0xa8ff78(0x1ae)]||0xa),this[_0xa8ff78(0xb6)]=(_0x3bebfa=this[_0xa8ff78(0x169)][_0xa8ff78(0x14d)])!==null&&_0x3bebfa!==void 0x0?_0x3bebfa:![],this[_0xa8ff78(0x171)]=_0x5a8cdf[_0xa8ff78(0x171)]||_0xa8ff78(0x182),this[_0xa8ff78(0x162)]=_0x5a8cdf[_0xa8ff78(0x162)]||0x1,this[_0xa8ff78(0x12b)]=(_0x438ad3=_0x5a8cdf[_0xa8ff78(0x12b)])!==null&&_0x438ad3!==void 0x0?_0x438ad3:0x0,this['reverseY']=(_0x8ac2f8=_0x5a8cdf[_0xa8ff78(0x19c)])!==null&&_0x8ac2f8!==void 0x0?_0x8ac2f8:![],this[_0xa8ff78(0x1f0)]&&this['windField'][_0xa8ff78(0x1ca)](_0x5a8cdf);}},{'key':_0x4873ba(0x11f),'get':function _0x40dc2f(){var _0x5132c9=_0x4873ba;return this[_0x5132c9(0x157)];}},{'key':'canvasWidth','get':function _0x51ee48(){var _0x6adc5c=_0x4873ba;return this[_0x6adc5c(0x129)][_0x6adc5c(0x1f9)][_0x6adc5c(0x157)][_0x6adc5c(0xa0)];}},{'key':_0x4873ba(0x12c),'get':function _0x547f31(){var _0x4aafd0=_0x4873ba;return this['_map']['scene'][_0x4aafd0(0x157)][_0x4aafd0(0x1f1)];}},{'key':_0x4873ba(0x14d),'get':function _0xc85f4d(){var _0x165e94=_0x4873ba;return this[_0x165e94(0xb6)];},'set':function _0x5e5e77(_0x572998){var _0x4fe5e3=_0x4873ba;this[_0x4fe5e3(0xb6)]=_0x572998;if(!this[_0x4fe5e3(0x157)])return;_0x572998?this[_0x4fe5e3(0x157)][_0x4fe5e3(0x1ad)][_0x4fe5e3(0x1b8)]=_0x4fe5e3(0xb2):this[_0x4fe5e3(0x157)][_0x4fe5e3(0x1ad)][_0x4fe5e3(0x1b8)]='none';}},{'key':_0x4873ba(0x1d9),'get':function _0x1a591e(){var _0x4953d0=_0x4873ba;return this[_0x4953d0(0x169)][_0x4953d0(0x1d9)];},'set':function _0x55b302(_0xfaddc9){var _0xf4c57a=_0x4873ba,_0x483e91=this;this[_0xf4c57a(0x169)][_0xf4c57a(0x1d9)]=_0xfaddc9,clearTimeout(this['_canrefresh']),this[_0xf4c57a(0x1aa)]=setTimeout(function(){var _0x55ec55=_0xf4c57a;_0x483e91[_0x55ec55(0x11b)]();},0x1f4);}},{'key':'speedRate','get':function _0x554f76(){var _0x57aeb3=_0x4873ba;return this[_0x57aeb3(0x169)][_0x57aeb3(0xde)];},'set':function _0x4c38ba(_0x2eeb5a){var _0x258c00=_0x4873ba;this[_0x258c00(0x169)][_0x258c00(0xde)]=_0x2eeb5a,this[_0x258c00(0x1f0)]&&(this[_0x258c00(0x1f0)][_0x258c00(0xde)]=_0x2eeb5a);}},{'key':_0x4873ba(0xe8),'get':function _0x3f2720(){var _0x501607=_0x4873ba;return this['options'][_0x501607(0xe8)];},'set':function _0x5d4bf2(_0x51bccf){var _0x16cb56=_0x4873ba;this[_0x16cb56(0x169)][_0x16cb56(0xe8)]=_0x51bccf,this[_0x16cb56(0x1f0)]&&(this[_0x16cb56(0x1f0)][_0x16cb56(0xe8)]=_0x51bccf);}},{'key':'data','get':function _0x559c6d(){var _0x4aa9e7=_0x4873ba;return this[_0x4aa9e7(0xe4)];},'set':function _0x31a7a8(_0x36ae49){var _0xc1c4d5=_0x4873ba;this[_0xc1c4d5(0xfe)](_0x36ae49);}},{'key':_0x4873ba(0x1dd),'value':function _0x54f4b0(_0x3b7cc2){var _0x3215c0=_0x4873ba;_0x3b7cc2?this['_addedHook']():(this[_0x3215c0(0xe4)]&&(this[_0x3215c0(0x169)][_0x3215c0(0x1de)]=this[_0x3215c0(0xe4)]),this[_0x3215c0(0xa1)]());}},{'key':_0x4873ba(0x1ee),'value':function _0x20e5f2(){var _0x190a4f=_0x4873ba;this[_0x190a4f(0x169)][_0x190a4f(0x13a)]?this[_0x190a4f(0x13d)]():this['windField']=new CanvasWindField(this[_0x190a4f(0x169)]);}},{'key':_0x4873ba(0xee),'value':function _0x38ae1a(){var _0x353b18=_0x4873ba;this[_0x353b18(0x157)]=this[_0x353b18(0x165)](),this[_0x353b18(0x14e)]=this[_0x353b18(0x157)][_0x353b18(0x1bc)]('2d'),this['bindEvent'](),this[_0x353b18(0x169)]['data']&&this[_0x353b18(0xfe)](this[_0x353b18(0x169)][_0x353b18(0x1de)]);}},{'key':'_removedHook','value':function _0x4e2d6a(){var _0x59444f=_0x4873ba;this[_0x59444f(0x11d)](),this[_0x59444f(0x1f8)](),this[_0x59444f(0x157)]&&(this[_0x59444f(0x129)][_0x59444f(0x1ab)][_0x59444f(0x143)](this['canvas']),delete this[_0x59444f(0x157)]);}},{'key':_0x4873ba(0x165),'value':function _0x5d4830(){var _0x3a03e1=_0x4873ba,_0x407c4b=document[_0x3a03e1(0xe6)]('canvas');_0x407c4b['style']['position']=_0x3a03e1(0x117),_0x407c4b[_0x3a03e1(0x1ad)][_0x3a03e1(0x90)]='0px',_0x407c4b[_0x3a03e1(0x1ad)][_0x3a03e1(0x1a1)]=_0x3a03e1(0x9d),_0x407c4b[_0x3a03e1(0x1ad)]['width']=_0x3a03e1(0x191),_0x407c4b[_0x3a03e1(0x1ad)][_0x3a03e1(0x9b)]=_0x3a03e1(0x191),_0x407c4b[_0x3a03e1(0x1ad)][_0x3a03e1(0x14d)]=this[_0x3a03e1(0xb6)]?_0x3a03e1(0x158):_0x3a03e1(0x1b9),_0x407c4b[_0x3a03e1(0x1ad)][_0x3a03e1(0x16e)]=0xa,_0x407c4b[_0x3a03e1(0x167)]('id',_0x3a03e1(0x1cc)),_0x407c4b[_0x3a03e1(0x167)](_0x3a03e1(0x9e),_0x3a03e1(0x1cc)),this['_map'][_0x3a03e1(0x1ab)][_0x3a03e1(0x17d)](_0x407c4b);var _0x496655=this['_map'][_0x3a03e1(0x1f9)];return _0x407c4b['width']=_0x496655[_0x3a03e1(0x157)][_0x3a03e1(0xa0)],_0x407c4b[_0x3a03e1(0x9b)]=_0x496655[_0x3a03e1(0x157)]['clientHeight'],_0x407c4b;}},{'key':_0x4873ba(0x1e5),'value':function _0x55e315(){var _0x43a9a1=_0x4873ba;this[_0x43a9a1(0x157)]&&(this[_0x43a9a1(0x157)][_0x43a9a1(0x1a4)]=this[_0x43a9a1(0x124)],this[_0x43a9a1(0x157)][_0x43a9a1(0x9b)]=this[_0x43a9a1(0x12c)]);}},{'key':_0x4873ba(0xe3),'value':function _0x70cdcc(){var _0x5e3c81=_0x4873ba,_0x5b3686=this,_0x26a697=Date['now']();(function _0xa0520d(){var _0x51f8c6=_0x458d;_0x5b3686[_0x51f8c6(0xaf)]=window[_0x51f8c6(0x1c3)](_0xa0520d);if(_0x5b3686[_0x51f8c6(0x20d)]&&_0x5b3686[_0x51f8c6(0x1f0)]){var _0x483d54=Date[_0x51f8c6(0x1e0)](),_0x55a6b0=_0x483d54-_0x26a697;_0x55a6b0>_0x5b3686['frameTime']&&(_0x26a697=_0x483d54-_0x55a6b0%_0x5b3686[_0x51f8c6(0x1c5)],_0x5b3686['update']());}}(),window[_0x5e3c81(0xc5)](_0x5e3c81(0x1e5),this['resize'][_0x5e3c81(0x102)](this),![]),this[_0x5e3c81(0x1e6)]=![],this[_0x5e3c81(0x1e2)]=![],this['options']['mouseHidden']&&(this[_0x5e3c81(0x129)]['on'](mars3d__namespace['EventType'][_0x5e3c81(0x1af)],this[_0x5e3c81(0x12f)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x5e3c81(0x141)],this[_0x5e3c81(0xcc)],this),this[_0x5e3c81(0x129)]['on'](mars3d__namespace[_0x5e3c81(0x20e)][_0x5e3c81(0x18a)],this[_0x5e3c81(0x1f6)],this)));}},{'key':_0x4873ba(0x1f8),'value':function _0x509fa6(){var _0x4ca9ac=_0x4873ba;window[_0x4ca9ac(0x109)](this[_0x4ca9ac(0xaf)]),delete this[_0x4ca9ac(0xaf)],window[_0x4ca9ac(0x1db)](_0x4ca9ac(0x1e5),this[_0x4ca9ac(0x1e5)]),this['options'][_0x4ca9ac(0xe7)]&&(this[_0x4ca9ac(0x129)][_0x4ca9ac(0xf5)](mars3d__namespace[_0x4ca9ac(0x20e)][_0x4ca9ac(0x1af)],this['_onMapWhellEvent'],this),this[_0x4ca9ac(0x129)][_0x4ca9ac(0xf5)](mars3d__namespace[_0x4ca9ac(0x20e)]['mouseDown'],this['_onMouseDownEvent'],this),this['_map'][_0x4ca9ac(0xf5)](mars3d__namespace[_0x4ca9ac(0x20e)][_0x4ca9ac(0x18a)],this['_onMouseUpEvent'],this),this['_map'][_0x4ca9ac(0xf5)](mars3d__namespace[_0x4ca9ac(0x20e)][_0x4ca9ac(0x100)],this[_0x4ca9ac(0x11e)],this));}},{'key':'_onMapWhellEvent','value':function _0x120237(_0x3a5316){var _0x19b4b2=_0x4873ba,_0x35567b=this;clearTimeout(this[_0x19b4b2(0x1a8)]);if(!this['show']||!this[_0x19b4b2(0x157)])return;this['canvas'][_0x19b4b2(0x1ad)][_0x19b4b2(0x1ea)]='hidden',this[_0x19b4b2(0x1a8)]=setTimeout(function(){var _0x13b8cc=_0x19b4b2;if(!_0x35567b[_0x13b8cc(0x20d)])return;_0x35567b[_0x13b8cc(0x11b)](),_0x35567b[_0x13b8cc(0x157)]['style'][_0x13b8cc(0x1ea)]='visible';},0xc8);}},{'key':_0x4873ba(0xcc),'value':function _0x44c1c1(_0x7f7ac1){var _0x8072ff=_0x4873ba;this[_0x8072ff(0x1e6)]=!![],this[_0x8072ff(0x129)][_0x8072ff(0xf5)](mars3d__namespace[_0x8072ff(0x20e)]['mouseMove'],this[_0x8072ff(0x11e)],this),this[_0x8072ff(0x129)]['on'](mars3d__namespace[_0x8072ff(0x20e)][_0x8072ff(0x100)],this['_onMouseMoveEvent'],this);}},{'key':'_onMouseMoveEvent','value':function _0x5c9733(_0x30c0ef){var _0x424a0a=_0x4873ba;if(!this['show']||!this[_0x424a0a(0x157)])return;this[_0x424a0a(0x1e6)]&&(this[_0x424a0a(0x157)][_0x424a0a(0x1ad)][_0x424a0a(0x1ea)]=_0x424a0a(0x1fb),this[_0x424a0a(0x1e2)]=!![]);}},{'key':_0x4873ba(0x1f6),'value':function _0x2b8dc3(_0x3ac7d7){var _0x54edc8=_0x4873ba;if(!this[_0x54edc8(0x20d)]||!this[_0x54edc8(0x157)])return;this[_0x54edc8(0x129)][_0x54edc8(0xf5)](mars3d__namespace[_0x54edc8(0x20e)]['mouseMove'],this[_0x54edc8(0x11e)],this),this[_0x54edc8(0x1e6)]&&this[_0x54edc8(0x1e2)]&&this[_0x54edc8(0x11b)](),this[_0x54edc8(0x157)][_0x54edc8(0x1ad)]['visibility']=_0x54edc8(0xed),this[_0x54edc8(0x1e6)]=![],this['mouse_move']=![];}},{'key':_0x4873ba(0xfe),'value':function _0x133359(_0xb87da3){var _0x584642=_0x4873ba;this[_0x584642(0x11d)](),this[_0x584642(0xe4)]=_0xb87da3,this[_0x584642(0x1f0)]['setDate'](_0xb87da3),this[_0x584642(0x11b)]();}},{'key':_0x4873ba(0x11b),'value':function _0x26c43e(){var _0xe2d103=_0x4873ba;if(!this[_0xe2d103(0x20d)])return;this[_0xe2d103(0x1f0)][_0xe2d103(0x1ca)](this[_0xe2d103(0x169)]),this[_0xe2d103(0x21a)]();}},{'key':_0x4873ba(0x21a),'value':function _0xd29d3a(){var _0x18c5b1=_0x4873ba;if(this['_updateIng'])return;this['_updateIng']=!![];if(this[_0x18c5b1(0x13a)])this[_0x18c5b1(0x1f0)][_0x18c5b1(0x21a)]();else{var _0x43a48f=this[_0x18c5b1(0x1f0)][_0x18c5b1(0x149)]();this[_0x18c5b1(0xc6)](_0x43a48f);}this[_0x18c5b1(0x1da)]=![];}},{'key':_0x4873ba(0xc6),'value':function _0x3d5bab(_0x266729){var _0x1b7dfe=_0x4873ba;this[_0x1b7dfe(0x14e)][_0x1b7dfe(0x1ac)]=_0x1b7dfe(0x111),this[_0x1b7dfe(0x14e)][_0x1b7dfe(0x170)](0x0,0x0,this[_0x1b7dfe(0x124)],this[_0x1b7dfe(0x12c)]),this[_0x1b7dfe(0x14e)]['globalCompositeOperation']=_0x1b7dfe(0xb8),this[_0x1b7dfe(0x14e)]['globalAlpha']=0.9,this[_0x1b7dfe(0x14e)][_0x1b7dfe(0x1b6)](),this[_0x1b7dfe(0x14e)][_0x1b7dfe(0x162)]=this[_0x1b7dfe(0x162)],this[_0x1b7dfe(0x14e)][_0x1b7dfe(0x188)]=this[_0x1b7dfe(0x171)];var _0x9c7442=this[_0x1b7dfe(0x129)][_0x1b7dfe(0x1f9)][_0x1b7dfe(0x121)]!==Cesium['SceneMode'][_0x1b7dfe(0x1d3)];for(var _0x52ffcb=0x0,_0x78a480=_0x266729[_0x1b7dfe(0x12e)];_0x52ffcb<_0x78a480;_0x52ffcb++){var _0x2ff789=_0x266729[_0x52ffcb],_0x34e50f=this[_0x1b7dfe(0x1b7)](_0x2ff789[_0x1b7dfe(0x9a)],_0x2ff789[_0x1b7dfe(0xbb)],_0x2ff789),_0x2767b1=this[_0x1b7dfe(0x1b7)](_0x2ff789[_0x1b7dfe(0x137)],_0x2ff789['tlat'],_0x2ff789);if(!_0x34e50f||!_0x2767b1)continue;if(_0x9c7442&&Math[_0x1b7dfe(0x1d2)](_0x34e50f[0x0]-_0x2767b1[0x0])>=this['canvasWidth'])continue;this[_0x1b7dfe(0x14e)][_0x1b7dfe(0x126)](_0x34e50f[0x0],_0x34e50f[0x1]),this['canvasContext'][_0x1b7dfe(0x116)](_0x2767b1[0x0],_0x2767b1[0x1]);}this[_0x1b7dfe(0x14e)][_0x1b7dfe(0xd3)]();}},{'key':_0x4873ba(0x1b7),'value':function _0x5f404b(_0x4f4ae2,_0x175d30,_0x4f6303){var _0x8b3eaf=_0x4873ba,_0x56684e=Cesium['Cartesian3']['fromDegrees'](_0x4f4ae2,_0x175d30,this[_0x8b3eaf(0x12b)]),_0x331132=this[_0x8b3eaf(0x129)]['scene'];if(_0x331132[_0x8b3eaf(0x121)]===Cesium[_0x8b3eaf(0x96)]['SCENE3D']){var _0x340239=new Cesium['EllipsoidalOccluder'](_0x331132[_0x8b3eaf(0x1c9)]['ellipsoid'],_0x331132['camera'][_0x8b3eaf(0x20f)]),_0x201aab=_0x340239['isPointVisible'](_0x56684e);if(!_0x201aab)return _0x4f6303['age']=0x0,null;}var _0x301519=Cesium['SceneTransforms'][_0x8b3eaf(0x132)](this[_0x8b3eaf(0x129)][_0x8b3eaf(0x1f9)],_0x56684e);return _0x301519?[_0x301519['x'],_0x301519['y']]:null;}},{'key':_0x4873ba(0x11d),'value':function _0x43d1da(){var _0x14988a=_0x4873ba;this['windField'][_0x14988a(0x11d)](),delete this[_0x14988a(0xe4)];}},{'key':_0x4873ba(0x13d),'value':function _0x5c9080(){var _0x11bd04=_0x4873ba,_0xbef872=this;this[_0x11bd04(0x13a)]=new Worker(this[_0x11bd04(0x169)]['worker']),this[_0x11bd04(0x13a)][_0x11bd04(0x19f)]=function(_0x25c5f2){var _0x232fb8=_0x11bd04;_0xbef872[_0x232fb8(0xc6)](_0x25c5f2['data']['particles']),_0xbef872[_0x232fb8(0x11a)]=![];},this[_0x11bd04(0x1f0)]={'init':function _0x1ca26d(_0x1266f7){var _0x1bfe58=_0x11bd04;_0xbef872['worker'][_0x1bfe58(0x1d6)]({'type':_0x1bfe58(0x104),'options':_0x1266f7});},'setOptions':function _0x4199d1(_0x226bc7){var _0x16c048=_0x11bd04;_0xbef872[_0x16c048(0x13a)][_0x16c048(0x1d6)]({'type':_0x16c048(0x1ca),'options':_0x226bc7});},'setDate':function _0x394714(_0x1b2417){var _0xe2ddbc=_0x11bd04;_0xbef872['worker']['postMessage']({'type':_0xe2ddbc(0x11c),'data':_0x1b2417});},'update':function _0x4787cb(){var _0x238c36=_0x11bd04;if(_0xbef872[_0x238c36(0x11a)])return;_0xbef872[_0x238c36(0x11a)]=!![],_0xbef872[_0x238c36(0x13a)][_0x238c36(0x1d6)]({'type':_0x238c36(0x21a)});},'clear':function _0x112186(){var _0x1d49c5=_0x11bd04;_0xbef872[_0x1d49c5(0x13a)][_0x1d49c5(0x1d6)]({'type':'clear'});}},this[_0x11bd04(0x1f0)][_0x11bd04(0x104)](this[_0x11bd04(0x169)]);}}]),_0x25468b;}(BaseLayer);mars3d__namespace[_0x30f976(0x97)]['register']('canvasWind',CanvasWindLayer),mars3d__namespace['layer'][_0x30f976(0xd6)]=CanvasWindLayer,mars3d__namespace[_0x30f976(0x91)]=CanvasWindField,mars3d__namespace[_0x30f976(0xf8)]=WindUtil,exports[_0x30f976(0x91)]=CanvasWindField,exports[_0x30f976(0xd6)]=CanvasWindLayer,exports[_0x30f976(0x21c)]=WindLayer,exports['WindUtil']=WindUtil,Object[_0x30f976(0x105)](exports,_0x30f976(0x130),{'value':!![]});
}));
