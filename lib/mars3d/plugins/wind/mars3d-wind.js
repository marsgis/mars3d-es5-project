/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.7.20
 * 编译日期：2024-07-04 22:51:36
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';function _0x17194a(_0x5ec965,_0x41bd4f){return _0x45bb(_0x5ec965-0x16e,_0x41bd4f);}(function(_0x352693,_0x35266b){function _0x118cb1(_0x56c0bd,_0x337b71){return _0x45bb(_0x56c0bd- -0x17,_0x337b71);}const _0x1d20e6=_0x352693();function _0x45cdb4(_0xdea4ee,_0x137edd){return _0x45bb(_0x137edd-0x159,_0xdea4ee);}while(!![]){try{const _0x1169d2=-parseInt(_0x118cb1(0x1fc,0x218))/0x1*(-parseInt(_0x118cb1(0x242,0x28e))/0x2)+parseInt(_0x118cb1(0x24c,0x2e4))/0x3*(parseInt(_0x45cdb4(0x34f,0x3c1))/0x4)+parseInt(_0x45cdb4(0x425,0x3ea))/0x5*(parseInt(_0x118cb1(0x2b0,0x22f))/0x6)+parseInt(_0x118cb1(0x1d1,0x198))/0x7+-parseInt(_0x118cb1(0x1bf,0x132))/0x8*(parseInt(_0x45cdb4(0x3d5,0x35c))/0x9)+-parseInt(_0x45cdb4(0x41e,0x39a))/0xa*(parseInt(_0x118cb1(0x2b5,0x30a))/0xb)+parseInt(_0x118cb1(0x2d3,0x296))/0xc;if(_0x1169d2===_0x35266b)break;else _0x1d20e6['push'](_0x1d20e6['shift']());}catch(_0x30871f){_0x1d20e6['push'](_0x1d20e6['shift']());}}}(_0x25a3,0xc51e3));function _interopNamespace(_0x116c1c){function _0x3c6dea(_0x111447,_0x4dc5e4){return _0x45bb(_0x111447-0x389,_0x4dc5e4);}if(_0x116c1c&&_0x116c1c[_0x3e7330(0x543,0x513)])return _0x116c1c;function _0x3e7330(_0x40e944,_0x3c5265){return _0x45bb(_0x3c5265-0x268,_0x40e944);}var _0x417b98=Object[_0x3e7330(0x44d,0x49a)](null);return _0x116c1c&&Object[_0x3e7330(0x41e,0x499)](_0x116c1c)[_0x3c6dea(0x555,0x581)](function(_0x50e9c5){function _0x5520aa(_0x5ace66,_0x29b564){return _0x3c6dea(_0x5ace66- -0x21,_0x29b564);}if(_0x50e9c5!==_0x5520aa(0x645,0x642)){var _0x47f194=Object['getOwnPropertyDescriptor'](_0x116c1c,_0x50e9c5);Object['defineProperty'](_0x417b98,_0x50e9c5,_0x47f194['get']?_0x47f194:{'enumerable':!![],'get':function(){return _0x116c1c[_0x50e9c5];}});}}),_0x417b98['default']=_0x116c1c,_0x417b98;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace[_0x17194a(0x447,0x487)];function getU(_0x12e4d4,_0x32dd3f){function _0x117543(_0x585116,_0x1f1ce3){return _0x17194a(_0x1f1ce3- -0x3c4,_0x585116);}function _0x254904(_0x45c41a,_0x4f398a){return _0x17194a(_0x4f398a- -0x169,_0x45c41a);}const _0x277653=_0x12e4d4*Math['cos'](Cesium$7[_0x117543(-0x66,-0xe)][_0x254904(0x252,0x2c5)](_0x32dd3f));return _0x277653;}function _0x25a3(){const _0x1b40de=['createRawRenderState','canvasContext','enabled','getOptions','nextParticlesPosition','windData','addEventListener','particlesWind','ColorRamp','uniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20randomParticle\x20=\x20texture(postProcessingPosition,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20vec4\x20particleSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x0a\x20\x20\x20\x20if\x20(randomParticle.a\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20particleSpeed;\x0a\x20\x20\x20\x20}\x0a}\x0a','_map','_canrefresh','getUVByPoint','PI_OVER_TWO','autoClear','uniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20trailsColor;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x0a}\x0a','options','umax','_onMouseDownEvent','createFramebuffer','init','addPrimitives','2697291UvmSAg','mouse_move','random','mouse_down','preExecute','ShaderProgram','getUVByXY','viewerParameters','pointerEvents','refreshParticles','canvas','particlesTextures','rgb(206,255,255)','_animateFrame','uniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20\x20\x20float\x20term1\x20=\x20111132.92;\x0a\x20\x20\x20\x20float\x20term2\x20=\x20559.82\x20*\x20cos(2.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term3\x20=\x201.175\x20*\x20cos(4.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term4\x20=\x200.0023\x20*\x20cos(6.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20\x20\x20float\x20term5\x20=\x20111412.84\x20*\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20term6\x20=\x2093.5\x20*\x20cos(3.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term7\x20=\x200.118\x20*\x20cos(5.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avoid\x20updatePosition(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20windVectorInLonLatLev;\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20speed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20updatePosition(lonLatLev,\x20speed);\x0a}\x0a','lat','89293CDMLBH','uniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x0a\x20\x20\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0\x20*\x20trailsColor)\x20/\x20255.0;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20pointsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20trailsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a','currentTrailsDepth','getFullscreenQuad','visibility','canvasWidth','fixedHeight','setGeometry','SCENE3D','particlesComputing','clearCommand','STATIC_DRAW','FLOAT','setOptions','unbindEvent','PrimitiveType','nextTrails','clientHeight','sin','THREE_PI_OVER_TWO','_onMouseUpEvent','removeEventListener','zIndex','pow','bind','_calcUV','rawRenderState','RGB','lineTo','Cartesian3','keys','create','Geometry','stroke','Texture','DISABLE_GL_POSITION_LOG_DEPTH','round','lon','scene','SceneTransforms','windTextures','steps','nextParticlesSpeed','canvasHeight','dropRateBump','Cartesian2','30KDsfJn','_maxAge','pixelDatatype','pixelSize','commandToExecute','particlesRendering','canvasWind','Math','cols','_addedHook','particlesTextureSize','LayerUtil','fadeOpacity','Sampler','mars3d-canvasWind','rows','lev','in\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(position,\x201.0);\x0a}\x0a','segmentsDepth','_onMouseMoveEvent','clientWidth','resize','layer','trails','22gbYTwI','_calc_speedRate','ClearCommand','windField','vmin','initWorker','dropRate','data','GeometryAttribute','getParticles','4279722IPxKwK','OPAQUE','updatePosition','ceil','ellipsoid','4MCCbUJ','_data','_updateIng2','_removedHook','_setOptionsHook','width','TextureMagnificationFilter','colors','top','show','update','_onMapWhellEvent','visible','//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x,\x20360.0);\x0a\x20\x20\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20-90.0,\x2090.0);\x0a\x0a\x20\x20\x20\x20vec3\x20index3D\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20index3D.z\x20=\x20(lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z;\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205],\x20width\x20=\x203,\x20height\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x203\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x202\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWind(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20\x20\x20float\x20result\x20=\x20texture(windTexture,\x20normalizedIndex2D).r;\x0a\x20\x20\x20\x20return\x20result;\x0a}\x0a\x0aconst\x20mat4\x20kernelMatrix\x20=\x20mat4(\x0a\x20\x20\x20\x200.0,\x20-1.0,\x202.0,\x20-1.0,\x20//\x20first\x20column\x0a\x20\x20\x20\x202.0,\x200.0,\x20-5.0,\x203.0,\x20//\x20second\x20column\x0a\x20\x20\x20\x200.0,\x201.0,\x204.0,\x20-3.0,\x20//\x20third\x20column\x0a\x20\x20\x20\x200.0,\x200.0,\x20-1.0,\x201.0\x20//\x20fourth\x20column\x0a);\x0afloat\x20oneDimensionInterpolation(float\x20t,\x20float\x20p0,\x20float\x20p1,\x20float\x20p2,\x20float\x20p3)\x20{\x0a\x20\x20\x20\x20vec4\x20tVec4\x20=\x20vec4(1.0,\x20t,\x20t\x20*\x20t,\x20t\x20*\x20t\x20*\x20t);\x0a\x20\x20\x20\x20tVec4\x20=\x20tVec4\x20/\x202.0;\x0a\x20\x20\x20\x20vec4\x20pVec4\x20=\x20vec4(p0,\x20p1,\x20p2,\x20p3);\x0a\x20\x20\x20\x20return\x20dot((tVec4\x20*\x20kernelMatrix),\x20pVec4);\x0a}\x0a\x0afloat\x20calculateB(sampler2D\x20windTexture,\x20float\x20t,\x20float\x20lon,\x20float\x20lat,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20float\x20lon0\x20=\x20floor(lon)\x20-\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon1\x20=\x20floor(lon);\x0a\x20\x20\x20\x20float\x20lon2\x20=\x20floor(lon)\x20+\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon3\x20=\x20floor(lon)\x20+\x202.0\x20*\x20interval.x;\x0a\x0a\x20\x20\x20\x20float\x20p0\x20=\x20getWind(windTexture,\x20vec3(lon0,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p1\x20=\x20getWind(windTexture,\x20vec3(lon1,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p2\x20=\x20getWind(windTexture,\x20vec3(lon2,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p3\x20=\x20getWind(windTexture,\x20vec3(lon3,\x20lat,\x20lev));\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(t,\x20p0,\x20p1,\x20p2,\x20p3);\x0a}\x0a\x0afloat\x20interpolateOneTexture(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20\x20\x20float\x20lat0\x20=\x20floor(lat)\x20-\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat1\x20=\x20floor(lat);\x0a\x20\x20\x20\x20float\x20lat2\x20=\x20floor(lat)\x20+\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat3\x20=\x20floor(lat)\x20+\x202.0\x20*\x20interval.y;\x0a\x0a\x20\x20\x20\x20vec2\x20coefficient\x20=\x20lonLatLev.xy\x20-\x20floor(lonLatLev.xy);\x0a\x20\x20\x20\x20float\x20b0\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat0,\x20lev);\x0a\x20\x20\x20\x20float\x20b1\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat1,\x20lev);\x0a\x20\x20\x20\x20float\x20b2\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat2,\x20lev);\x0a\x20\x20\x20\x20float\x20b3\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat3,\x20lev);\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(coefficient.y,\x20b0,\x20b1,\x20b2,\x20b3);\x0a}\x0a\x0avec3\x20bicubic(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\x0a\x20\x20\x20\x20float\x20u\x20=\x20interpolateOneTexture(U,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20v\x20=\x20interpolateOneTexture(V,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20bicubic(lonLatLev);\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(windVector,\x200.0);\x0a}\x0a','LINEAR','RGBA','lineWidth','framebuffer','getSpeed','log','currentTrails','postProcessingPosition','camera','fromGeometry','wheel','cancelAnimationFrame','DISABLE_LOG_DEPTH_FRAGMENT_WRITE','tlng','mode','__proto__','postMessage','_pointerEvents','add','mouseMove','owner','mouseUp','postProcessingSpeed','geometry','remove','particleSystem','context','395narzgJ','getColor','latRange','defines','randomBetween','once','isDestroyed','toDegrees','TRIANGLES','TextureMinificationFilter','createTexture','vertexArray','toGridXY','register','_speedRate','strokeStyle','beginPath','updateSpeed','WindUtil','PixelFormat','UNSIGNED_BYTE','vertexShaderSource','getWind','sources','clampToLatitudeRange','isInExtent','__esModule','xmax','viewRectangleToLonLatRange','createRenderingFramebuffers','particles','maxAge','arrayBufferView','setDate','positionWC','getColorTexture','uniformMap','ymin','PI_OVER_THREE','GeometryAttributes','destination-in','BufferUsage','style','attributeLocations','bindEvent','color','lighter','toRadians','pixelFormat','grid','fromDegrees','height','mouseDown','createCommand','14598JqvYmy','LUMINANCE','outputTexture','array','createRenderingPrimitives','5317895PMPynk','DrawCommand','tlat','defined','0px','Rectangle','dimensions','ZERO','mouseHidden','reverseY','auto','min','ShaderSource','Cesium','xmin','speedRate','depthTest','default','north','primitives','age','floor','drawingBufferWidth','worker','destroy','speedFactor','particlesNumber','off','length','type','1385172VIUXBO','max','segmentsColor','fromCssColorString','textures','_bilinearInterpolation','udata','_colorRamp','lng','TWO_PI','globalCompositeOperation','segments','applyViewerParameters','_mountedHook','createComputingPrimitives','clear','depthTexture','refreshTimer','currentParticlesSpeed','Pass','EventType','ComponentDatatype','forEach','_updateIng','lonRange','maximum','framebuffers','canvasResize','maxParticles','VertexArray','createSegmentsGeometry','vdata','16QSZjvK','_tomap','createParticlesTextures','ymax','preRender','currentParticlesPosition','speed','destroyParticlesTextures','push','primitiveType','_drawLines','redraw','getV','PrimitiveCollection','green','NEAREST','position','defineProperty','984851AvEheA','west','setData','fromCache','fragmentShaderSource'];_0x25a3=function(){return _0x1b40de;};return _0x25a3();}function getV(_0x45b181,_0x1b88f2){function _0x8bacf2(_0x2848d7,_0x52f4ce){return _0x17194a(_0x2848d7- -0x184,_0x52f4ce);}function _0x3c5929(_0x44a9f5,_0x278344){return _0x17194a(_0x278344-0xbb,_0x44a9f5);}const _0x4aef92=_0x45b181*Math[_0x8bacf2(0x20f,0x1f6)](Cesium$7[_0x3c5929(0x494,0x471)][_0x3c5929(0x56c,0x4e9)](_0x1b88f2));return _0x4aef92;}function getSpeed(_0x334477,_0x320ad9){const _0x46a003=Math['sqrt'](Math[_0xb5beb6(0x5fa,0x589)](_0x334477,0x2)+Math[_0x548e49(0x1e5,0x266)](_0x320ad9,0x2));function _0xb5beb6(_0x23a1c7,_0x521e11){return _0x17194a(_0x23a1c7-0x262,_0x521e11);}function _0x548e49(_0x34fcbc,_0x4377e0){return _0x17194a(_0x34fcbc- -0x1b3,_0x4377e0);}return _0x46a003;}function getDirection(_0x572b39,_0xaba3e8){let _0x38356c=Cesium$7['Math']['toDegrees'](Math['atan2'](_0xaba3e8,_0x572b39));return _0x38356c+=_0x38356c<0x0?0x168:0x0,_0x38356c;}const _0x5b1c8a={};_0x5b1c8a[_0x17194a(0x3f3,0x3af)]=null,_0x5b1c8a['getU']=getU,_0x5b1c8a[_0x5a2d83(0x341,0x3a3)]=getV,_0x5b1c8a[_0x17194a(0x3e8,0x476)]=getSpeed,_0x5b1c8a['getDirection']=getDirection;var WindUtil=_0x5b1c8a;const Cesium$6=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x450f9c){this['commandType']=_0x450f9c['commandType'],this['geometry']=_0x450f9c['geometry'],this['attributeLocations']=_0x450f9c['attributeLocations'],this['primitiveType']=_0x450f9c['primitiveType'],this[_0x4c4474(0x4f2,0x4ac)]=_0x450f9c['uniformMap'];function _0x2c76cb(_0x1c7ac4,_0x2f1ac6){return _0x5a2d83(_0x1c7ac4,_0x2f1ac6- -0x350);}this['vertexShaderSource']=_0x450f9c[_0x2c76cb(0xaa,0x117)],this[_0x2c76cb(0xad,0x5d)]=_0x450f9c['fragmentShaderSource'],this['rawRenderState']=_0x450f9c[_0x2c76cb(0xc8,0x9e)],this[_0x2c76cb(0x9d,0xea)]=_0x450f9c['framebuffer'],this['outputTexture']=_0x450f9c['outputTexture'],this['autoClear']=_0x450f9c[_0x4c4474(0x438,0x43a)]??![],this[_0x4c4474(0x444,0x3b2)]=_0x450f9c['preExecute'],this['show']=!![],this['commandToExecute']=undefined;function _0x4c4474(_0x1173e9,_0x38f8d6){return _0x5a2d83(_0x38f8d6,_0x1173e9-0x7c);}this[_0x4c4474(0x45a,0x3e8)]=undefined,this['autoClear']&&(this[_0x2c76cb(0x11a,0x8e)]=new Cesium$6[(_0x2c76cb(0x59,0xcc))]({'color':new Cesium$6['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Cesium$6['Pass']['OPAQUE']}));}['createCommand'](_0x509691){function _0x1f8a8a(_0x49a8fd,_0x57bdb9){return _0x5a2d83(_0x57bdb9,_0x49a8fd-0x1a1);}function _0x200afe(_0x5308ba,_0x51e8bb){return _0x5a2d83(_0x5308ba,_0x51e8bb- -0x92);}switch(this['commandType']){case'Draw':{const _0x4d10e8=Cesium$6['VertexArray'][_0x200afe(0x358,0x3ae)]({'context':_0x509691,'geometry':this[_0x1f8a8a(0x5ef,0x5d8)],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6[_0x200afe(0x382,0x3e9)][_0x1f8a8a(0x580,0x5b6)]}),_0x4dde83={};_0x4dde83['context']=_0x509691,_0x4dde83['attributeLocations']=this[_0x200afe(0x429,0x3eb)],_0x4dde83['vertexShaderSource']=this['vertexShaderSource'],_0x4dde83[_0x1f8a8a(0x54e,0x591)]=this['fragmentShaderSource'];const _0x43fe7f=Cesium$6[_0x1f8a8a(0x56a,0x50d)][_0x1f8a8a(0x54d,0x4f2)](_0x4dde83),_0x3bcc1c=Cesium$6['RenderState'][_0x200afe(0x316,0x31a)](this['rawRenderState']);return new Cesium$6[(_0x200afe(0x44d,0x3fc))]({'primitiveType':this[_0x200afe(0x322,0x30e)],'shaderProgram':_0x43fe7f,'vertexArray':_0x4d10e8,'modelMatrix':Cesium$6['Matrix4']['IDENTITY'],'renderState':_0x3bcc1c,'uniformMap':this[_0x1f8a8a(0x617,0x6a2)],'castShadows':![],'receiveShadows':![],'framebuffer':this[_0x200afe(0x335,0x3a8)],'pass':Cesium$6['Pass'][_0x1f8a8a(0x5c6,0x52e)],'pickOnly':!![],'owner':this});}case'Compute':{const _0x9f63b8={};return _0x9f63b8[_0x200afe(0x40f,0x3b9)]=this,_0x9f63b8['fragmentShaderSource']=this[_0x200afe(0x384,0x31b)],_0x9f63b8[_0x200afe(0x461,0x3e4)]=this['uniformMap'],_0x9f63b8['outputTexture']=this['outputTexture'],_0x9f63b8['persists']=!![],new Cesium$6['ComputeCommand'](_0x9f63b8);}}}[_0x17194a(0x388,0x406)](_0x37b593,_0x5c14e4){function _0x2142bc(_0x138352,_0xc1462b){return _0x17194a(_0x138352- -0x396,_0xc1462b);}function _0x1b0f0d(_0x3a613d,_0x4af34e){return _0x5a2d83(_0x3a613d,_0x4af34e-0x55);}this[_0x1b0f0d(0x48c,0x4a3)]=_0x5c14e4;const _0x3cba47=Cesium$6[_0x1b0f0d(0x482,0x3e9)]['fromGeometry']({'context':_0x37b593,'geometry':this[_0x1b0f0d(0x452,0x4a3)],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']});this[_0x2142bc(0x1d,-0x54)][_0x2142bc(0x74,0x8a)]=_0x3cba47;}['update'](_0x492f82){function _0x5d61b3(_0x159977,_0x52584f){return _0x17194a(_0x52584f- -0x1cd,_0x159977);}if(!this[_0x5d61b3(0x27d,0x212)])return;if(_0x492f82[_0x5d61b3(0x2ae,0x225)]!==Cesium$6['SceneMode']['SCENE3D'])return;!Cesium$6['defined'](this[_0x5d61b3(0x24d,0x1e6)])&&(this[_0x5d61b3(0x224,0x1e6)]=this[_0x4c7792(-0x120,-0x15a)](_0x492f82['context']));function _0x4c7792(_0x4a6d77,_0x3497c3){return _0x5a2d83(_0x3497c3,_0x4a6d77- -0x5a7);}Cesium$6['defined'](this[_0x5d61b3(0x1f0,0x1a8)])&&this['preExecute'](),Cesium$6[_0x5d61b3(0x1f2,0x270)](this['clearCommand'])&&_0x492f82['commandList']['push'](this[_0x5d61b3(0x1dc,0x1be)]),_0x492f82['commandList'][_0x4c7792(-0x208,-0x201)](this['commandToExecute']);}[_0x17194a(0x405,0x434)](){return![];}['destroy'](){if(this[_0x5d9ba4(-0x8c,-0x2a)]){var _0x34e16a,_0x4024ba;(_0x34e16a=this[_0x507f04(0xab,0xe8)])!==null&&_0x34e16a!==void 0x0&&_0x34e16a[_0x507f04(0x12a,0x144)]&&this['clearCommand']['vertexArray'][_0x507f04(0x172,0x140)](),(_0x4024ba=this['clearCommand'])!==null&&_0x4024ba!==void 0x0&&_0x4024ba['shaderProgram']&&this[_0x5d9ba4(-0x8c,-0xf8)]['shaderProgram'][_0x507f04(0x172,0x1ac)](),delete this[_0x507f04(0xab,0x8e)];}function _0x507f04(_0x4027e6,_0x5c0ee7){return _0x17194a(_0x4027e6- -0x2e0,_0x5c0ee7);}this[_0x5d9ba4(-0x64,-0x51)]&&(this[_0x5d9ba4(-0x64,-0x5a)]['vertexArray']&&this['commandToExecute'][_0x507f04(0x12a,0x1bd)][_0x507f04(0x172,0x101)](),this['commandToExecute']['shaderProgram']&&this['commandToExecute']['shaderProgram']['destroy'](),delete this[_0x507f04(0xd3,0x142)]);function _0x5d9ba4(_0x15d356,_0x38b217){return _0x17194a(_0x15d356- -0x417,_0x38b217);}return Cesium$6['destroyObject'](this);}}const Cesium$5=mars3d__namespace[_0x17194a(0x447,0x4b1)],Util=(function(){const _0x3a9eec=function(){function _0x4b3bb3(_0x33de66,_0x2baf81){return _0x45bb(_0x33de66- -0x39a,_0x2baf81);}function _0x6e6e55(_0x11e7da,_0x32d1d2){return _0x45bb(_0x11e7da- -0x297,_0x32d1d2);}const _0x2bfbca=new Cesium$5[(_0x4b3bb3(-0x167,-0x18c))]({'attributes':new Cesium$5[(_0x6e6e55(0x21,-0x6a))]({'position':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0x6e6e55(-0xcc,-0x66)]['FLOAT'],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0x4b3bb3(-0x1cf,-0x154)]['FLOAT'],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});return _0x2bfbca;},_0x499285=function(_0xa45ae8,_0x587deb){if(Cesium$5[_0x4adbfb(-0x98,-0x8d)](_0x587deb)){const _0x1cab67={};_0x1cab67[_0x8bfdbb(0x494,0x52e)]=_0x587deb,_0xa45ae8['source']=_0x1cab67;}const _0x6df9f1=new Cesium$5[(_0x4adbfb(-0x19e,-0x127))](_0xa45ae8);function _0x8bfdbb(_0xc972d,_0x5bed4b){return _0x45bb(_0x5bed4b-0x27d,_0xc972d);}function _0x4adbfb(_0x2ebe3d,_0x40b7a3){return _0x45bb(_0x40b7a3- -0x35c,_0x2ebe3d);}return _0x6df9f1;},_0x39bd91=function(_0x10c04d,_0x1cf3fb,_0x4da4f4){const _0x6974a7={};_0x6974a7['context']=_0x10c04d,_0x6974a7['colorTextures']=[_0x1cf3fb];function _0x70cf3c(_0x423912,_0xad500f){return _0x45bb(_0x423912-0x10d,_0xad500f);}_0x6974a7[_0x70cf3c(0x2d3,0x272)]=_0x4da4f4;const _0x15caec=new Cesium$5['Framebuffer'](_0x6974a7);return _0x15caec;};function _0x3c6d15(_0x5edfcf,_0x52cfde){return _0x5a2d83(_0x52cfde,_0x5edfcf- -0x4e);}const _0x352d46=function(_0x1fc37d){const _0x3da78f=!![],_0x211404=![],_0x24e6a3={};function _0x93656(_0xa43ec1,_0x5d39f0){return _0x45bb(_0x5d39f0- -0xbf,_0xa43ec1);}_0x24e6a3['viewport']=_0x1fc37d['viewport'],_0x24e6a3[_0x93656(0x204,0x21d)]=_0x1fc37d[_0x93656(0x298,0x21d)],_0x24e6a3['depthMask']=_0x1fc37d['depthMask'],_0x24e6a3['blending']=_0x1fc37d['blending'];const _0x3c502d=_0x24e6a3,_0x354cf9=Cesium$5['Appearance']['getDefaultRenderState'](_0x3da78f,_0x211404,_0x3c502d);function _0x1b4e39(_0x48a3f6,_0x568d41){return _0x45bb(_0x48a3f6- -0x3c3,_0x568d41);}return _0x354cf9;},_0x955f4b=function(_0xed7e88){const _0x5487ee={};function _0x36e5ce(_0xfbd8a7,_0x4948f6){return _0x45bb(_0x4948f6-0x1,_0xfbd8a7);}const _0x1b6468=Cesium$5['Math']['mod'](_0xed7e88[_0x2d382d(0x1f0,0x1c3)],Cesium$5[_0x2d382d(0x24f,0x1d7)][_0x36e5ce(0x228,0x1c0)]),_0x8ca449=Cesium$5[_0x36e5ce(0x267,0x249)]['mod'](_0xed7e88['east'],Cesium$5['Math']['TWO_PI']),_0x20812=_0xed7e88['width'];let _0x319945,_0x3c3de3;_0x20812>Cesium$5['Math'][_0x2d382d(0x22d,0x290)]?(_0x319945=0x0,_0x3c3de3=Cesium$5['Math']['TWO_PI']):_0x8ca449-_0x1b6468<_0x20812?(_0x319945=_0x1b6468,_0x3c3de3=_0x1b6468+_0x20812):(_0x319945=_0x1b6468,_0x3c3de3=_0x8ca449);_0x5487ee[_0x36e5ce(0x1a1,0x239)]={'min':Cesium$5[_0x2d382d(0x24f,0x210)]['toDegrees'](_0x319945),'max':Cesium$5[_0x2d382d(0x24f,0x24f)]['toDegrees'](_0x3c3de3)};const _0x4c4961=_0xed7e88['south'];function _0x2d382d(_0x5ee803,_0x2c57ef){return _0x45bb(_0x5ee803-0x7,_0x2c57ef);}const _0x436cd6=_0xed7e88[_0x36e5ce(0x2e2,0x2df)],_0x28557f=_0xed7e88['height'],_0x5e867b=_0x28557f>Cesium$5['Math']['PI']/0xc?_0x28557f/0x2:0x0;let _0x576505=Cesium$5['Math']['clampToLatitudeRange'](_0x4c4961-_0x5e867b),_0x51ef6b=Cesium$5[_0x2d382d(0x24f,0x259)][_0x36e5ce(0x282,0x2aa)](_0x436cd6+_0x5e867b);return _0x576505<-Cesium$5[_0x2d382d(0x24f,0x261)][_0x2d382d(0x2be,0x2b6)]&&(_0x576505=-Cesium$5[_0x2d382d(0x24f,0x1bf)][_0x36e5ce(0x17e,0x1fb)]),_0x51ef6b>Cesium$5['Math']['PI_OVER_THREE']&&(_0x51ef6b=Cesium$5['Math'][_0x2d382d(0x201,0x21e)]),_0x5487ee['lat']={'min':Cesium$5['Math'][_0x2d382d(0x29f,0x28a)](_0x576505),'max':Cesium$5['Math'][_0x36e5ce(0x30f,0x299)](_0x51ef6b)},_0x5487ee;},_0x278478={};return _0x278478['getFullscreenQuad']=_0x3a9eec,_0x278478['createTexture']=_0x499285,_0x278478['createFramebuffer']=_0x39bd91,_0x278478['createRawRenderState']=_0x352d46,_0x278478[_0x3c6d15(0x420,0x3ba)]=_0x955f4b,_0x278478;}());var segmentDraw_vert='in\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20normal\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20postProcessingSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0aout\x20float\x20speedNormalization;\x0a\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20\x20\x20float\x20a\x20=\x206378137.0;\x20//\x20Semi-major\x20axis\x0a\x20\x20\x20\x20float\x20b\x20=\x206356752.3142;\x20//\x20Semi-minor\x20axis\x0a\x20\x20\x20\x20float\x20e2\x20=\x206.69437999014e-3;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x0a\x20\x20\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calcProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0,\x20360.0)\x20-\x20180.0;\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0);\x0a\x20\x20\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calcOffset(vec4\x20currentProjectedCoordinate,\x20vec4\x20nextProjectedCoordinate,\x20float\x20offsetSign)\x20{\x0a\x20\x20\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0);\x0a\x20\x20\x20\x20vec2\x20currentXY\x20=\x20(currentProjectedCoordinate.xy\x20/\x20currentProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x20\x20\x20\x20vec2\x20nextXY\x20=\x20(nextProjectedCoordinate.xy\x20/\x20nextProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0;\x0a\x20\x20\x20\x20vec2\x20direction\x20=\x20normalize(nextXY\x20-\x20currentXY);\x0a\x20\x20\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0,\x200.0);\x0a\x20\x20\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20\x20\x20vec4\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex);\x0a\x0a\x20\x20\x20\x20vec4\x20currentProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20vec4\x20nextProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(nextPosition.w\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(nextPosition.xyz);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20float\x20pointToUse\x20=\x20normal.x;\x20//\x20-1\x20is\x20currentProjectedCoordinate\x20and\x20+1\x20is\x20nextProjectedCoordinate\x0a\x20\x20\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20pixelSize\x20*\x20calcOffset(currentProjectedCoordinate,\x20nextProjectedCoordinate,\x20offsetSign);\x0a\x20\x20\x20\x20if\x20(pointToUse\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20currentProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20nextProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20speedNormalization\x20=\x20texture(postProcessingSpeed,\x20particleIndex).a;\x0a}\x0a',segmentDraw_frag='uniform\x20sampler2D\x20colorTable;\x0a\x0ain\x20float\x20speedNormalization;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20out_FragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x200.0));\x0a}\x0a',fullscreen_vert=_0x5a2d83(0x499,0x413),trailDraw_frag=_0x5a2d83(0x38c,0x3d5),screenDraw_frag=_0x5a2d83(0x34d,0x3bd);const Cesium$4=mars3d__namespace[_0x17194a(0x447,0x3ce)];class ParticlesRendering{constructor(_0x60cbcc,_0x10cbef,_0x532dc1,_0x123c58,_0x1fb7dc){function _0x2eab35(_0x8d5ca5,_0x355bcc){return _0x5a2d83(_0x8d5ca5,_0x355bcc- -0x371);}this['createRenderingTextures'](_0x60cbcc,_0x10cbef,_0x532dc1[_0x2eab35(0x51,0xbf)]),this['createRenderingFramebuffers'](_0x60cbcc);function _0x3874d2(_0x26daed,_0x4ba92b){return _0x17194a(_0x4ba92b- -0x4,_0x26daed);}this[_0x2eab35(0x100,0x11b)](_0x60cbcc,_0x532dc1,_0x123c58,_0x1fb7dc);}['createRenderingTextures'](_0x331658,_0x1d53a2,_0x4ce388){const _0x5958d6={};_0x5958d6[_0x6268de(0x465,0x461)]=_0x331658,_0x5958d6['width']=_0x331658['drawingBufferWidth'],_0x5958d6[_0x11a4e3(0x1e2,0x25d)]=_0x331658['drawingBufferHeight'],_0x5958d6[_0x6268de(0x474,0x492)]=Cesium$4['PixelFormat']['RGBA'],_0x5958d6[_0x6268de(0x3de,0x414)]=Cesium$4['PixelDatatype'][_0x11a4e3(0x216,0x23e)];function _0x6268de(_0x59e9c2,_0xdfe9ef){return _0x17194a(_0xdfe9ef-0x63,_0x59e9c2);}const _0x2b7bd7=_0x5958d6,_0x1027ef={};_0x1027ef[_0x11a4e3(0x220,0x229)]=_0x331658,_0x1027ef['width']=_0x331658[_0x11a4e3(0x257,0x27b)],_0x1027ef['height']=_0x331658['drawingBufferHeight'],_0x1027ef['pixelFormat']=Cesium$4['PixelFormat']['DEPTH_COMPONENT'],_0x1027ef['pixelDatatype']=Cesium$4['PixelDatatype']['UNSIGNED_INT'];function _0x11a4e3(_0x4a77f5,_0x59dded){return _0x17194a(_0x59dded- -0x1d5,_0x4a77f5);}const _0x51ac04=_0x1027ef,_0x5afd57=_0x4ce388['length'],_0x46d9e4=new Float32Array(_0x5afd57*0x3);for(let _0x1e462a=0x0;_0x1e462a<_0x5afd57;_0x1e462a++){const _0x3848fa=Cesium$4['Color'][_0x6268de(0x404,0x38a)](_0x4ce388[_0x1e462a]);_0x46d9e4[0x3*_0x1e462a]=_0x3848fa['red'],_0x46d9e4[0x3*_0x1e462a+0x1]=_0x3848fa[_0x11a4e3(0x1d4,0x17d)],_0x46d9e4[0x3*_0x1e462a+0x2]=_0x3848fa['blue'];}const _0x26cc2e={'context':_0x331658,'width':_0x5afd57,'height':0x1,'pixelFormat':Cesium$4[_0x6268de(0x50d,0x475)][_0x6268de(0x3fe,0x3ff)],'pixelDatatype':Cesium$4['PixelDatatype'][_0x11a4e3(0x130,0x1b8)],'sampler':new Cesium$4[(_0x11a4e3(0x23f,0x1e7))]({'minificationFilter':Cesium$4[_0x6268de(0x421,0x46b)][_0x11a4e3(0x253,0x20f)],'magnificationFilter':Cesium$4[_0x11a4e3(0x1d2,0x207)]['LINEAR']})};this['textures']={'segmentsColor':Util['createTexture'](_0x2b7bd7),'segmentsDepth':Util[_0x6268de(0x4ef,0x46c)](_0x51ac04),'currentTrailsColor':Util[_0x11a4e3(0x2bb,0x234)](_0x2b7bd7),'currentTrailsDepth':Util['createTexture'](_0x51ac04),'nextTrailsColor':Util[_0x6268de(0x500,0x46c)](_0x2b7bd7),'nextTrailsDepth':Util[_0x11a4e3(0x288,0x234)](_0x51ac04),'colorTable':Util['createTexture'](_0x26cc2e,_0x46d9e4)};}[_0x17194a(0x41c,0x4a1)](_0x4a8d33){function _0x3238e0(_0x4958bd,_0x28495f){return _0x17194a(_0x4958bd- -0xb4,_0x28495f);}function _0xd15dfb(_0x41d9ad,_0x1ea8bc){return _0x5a2d83(_0x1ea8bc,_0x41d9ad- -0x17e);}this[_0x3238e0(0x28a,0x21e)]={'segments':Util['createFramebuffer'](_0x4a8d33,this['textures'][_0xd15dfb(0x32f,0x2a7)],this[_0x3238e0(0x274,0x26d)][_0xd15dfb(0x296,0x228)]),'currentTrails':Util['createFramebuffer'](_0x4a8d33,this[_0xd15dfb(0x1fd,0x25d)]['currentTrailsColor'],this[_0xd15dfb(0x1fd,0x207)][_0x3238e0(0x2cf,0x250)]),'nextTrails':Util[_0xd15dfb(0x243,0x29e)](_0x4a8d33,this['textures']['nextTrailsColor'],this['textures']['nextTrailsDepth'])};}['createSegmentsGeometry'](_0x4cfa33){const _0x536e65=0x4;let _0x498cbf=[];for(let _0x59cca8=0x0;_0x59cca8<_0x4cfa33['particlesTextureSize'];_0x59cca8++){for(let _0x1085f1=0x0;_0x1085f1<_0x4cfa33['particlesTextureSize'];_0x1085f1++){for(let _0xed7b74=0x0;_0xed7b74<_0x536e65;_0xed7b74++){_0x498cbf[_0x246aa5(0x22e,0x1cb)](_0x59cca8/_0x4cfa33[_0x17fb00(0x242,0x2d0)]),_0x498cbf['push'](_0x1085f1/_0x4cfa33['particlesTextureSize']);}}}_0x498cbf=new Float32Array(_0x498cbf);let _0xdf9376=[];function _0x17fb00(_0x23fd4d,_0x143877){return _0x5a2d83(_0x143877,_0x23fd4d- -0x1ca);}function _0x246aa5(_0x344542,_0x152ec4){return _0x17194a(_0x152ec4- -0x181,_0x344542);}const _0x53e19c=[-0x1,0x1],_0x4e7ceb=[-0x1,0x1];for(let _0xd20810=0x0;_0xd20810<_0x4cfa33[_0x17fb00(0x1c9,0x14f)];_0xd20810++){for(let _0x15c083=0x0;_0x15c083<_0x536e65/0x2;_0x15c083++){for(let _0x4cac59=0x0;_0x4cac59<_0x536e65/0x2;_0x4cac59++){_0xdf9376[_0x246aa5(0x265,0x1cb)](_0x53e19c[_0x15c083]),_0xdf9376[_0x17fb00(0x1d5,0x168)](_0x4e7ceb[_0x4cac59]),_0xdf9376['push'](0x0);}}}_0xdf9376=new Float32Array(_0xdf9376);const _0xb443e2=0x6*_0x4cfa33['maxParticles'],_0x5918e2=new Uint32Array(_0xb443e2);for(let _0xcab951=0x0,_0x39e5e2=0x0,_0x230ca4=0x0;_0xcab951<_0x4cfa33[_0x246aa5(0x192,0x1bf)];_0xcab951++){_0x5918e2[_0x39e5e2++]=_0x230ca4+0x0,_0x5918e2[_0x39e5e2++]=_0x230ca4+0x1,_0x5918e2[_0x39e5e2++]=_0x230ca4+0x2,_0x5918e2[_0x39e5e2++]=_0x230ca4+0x2,_0x5918e2[_0x39e5e2++]=_0x230ca4+0x1,_0x5918e2[_0x39e5e2++]=_0x230ca4+0x3,_0x230ca4+=0x4;}const _0x5c142d=new Cesium$4['Geometry']({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4[(_0x246aa5(0x26d,0x24e))]({'componentDatatype':Cesium$4['ComponentDatatype'][_0x246aa5(0x21f,0x20c)],'componentsPerAttribute':0x2,'values':_0x498cbf}),'normal':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4[_0x246aa5(0x18c,0x1b8)]['FLOAT'],'componentsPerAttribute':0x3,'values':_0xdf9376})}),'indices':_0x5918e2});return _0x5c142d;}[_0x17194a(0x439,0x3a2)](_0x47a08c,_0x55cd81,_0x4d5ce7,_0x3a280c){const _0x133a3a=this;function _0xb264c8(_0x2b9c2a,_0x4a64db){return _0x17194a(_0x2b9c2a- -0xf3,_0x4a64db);}const _0x1d5360={};_0x1d5360['st']=0x0,_0x1d5360['normal']=0x1;const _0x3215d4={};_0x3215d4['sources']=[segmentDraw_vert];const _0x13f37b={};_0x13f37b['sources']=[segmentDraw_frag];const _0x38bd58={};_0x38bd58[_0x5706bf(0x6d,0xee)]=!![];const _0x3fdd97={};_0x3fdd97['viewport']=undefined,_0x3fdd97[_0xb264c8(0x357,0x305)]=_0x38bd58,_0x3fdd97['depthMask']=!![];const _0x2496d8={};_0x2496d8['position']=0x0,_0x2496d8['st']=0x1;const _0x5528c7={};_0x5528c7['defines']=[_0xb264c8(0x2b1,0x30c)],_0x5528c7[_0xb264c8(0x323,0x321)]=[fullscreen_vert];const _0x250672={};function _0x5706bf(_0xa8582a,_0x59d522){return _0x17194a(_0xa8582a- -0x2f0,_0x59d522);}_0x250672[_0x5706bf(0x112,0x12f)]=[_0xb264c8(0x2fd,0x374)],_0x250672['sources']=[trailDraw_frag];const _0x4386d3={};_0x4386d3[_0xb264c8(0x261,0x23f)]=0x0,_0x4386d3['st']=0x1;const _0x525bff={};_0x525bff[_0x5706bf(0x112,0x160)]=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x525bff['sources']=[fullscreen_vert];const _0x17fc55={};_0x17fc55['defines']=[_0xb264c8(0x2fd,0x2b7)],_0x17fc55[_0x5706bf(0x126,0xc1)]=[screenDraw_frag];const _0x5723c6={};_0x5723c6['enabled']=![];const _0x2df36a={};_0x2df36a['enabled']=!![],this[_0xb264c8(0x35a,0x2d9)]={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x1d5360,'geometry':this[_0xb264c8(0x24f,0x243)](_0x55cd81),'primitiveType':Cesium$4[_0x5706bf(0xa0,0x43)]['TRIANGLES'],'uniformMap':{'currentParticlesPosition':function(){function _0x59a5bd(_0x425538,_0x57d592){return _0x5706bf(_0x57d592- -0x12e,_0x425538);}return _0x3a280c['particlesTextures'][_0x59a5bd(-0xfc,-0xd5)];},'postProcessingPosition':function(){return _0x3a280c['particlesTextures']['postProcessingPosition'];},'postProcessingSpeed':function(){return _0x3a280c['particlesTextures']['postProcessingSpeed'];},'colorTable':function(){function _0x149df8(_0x278812,_0x47ec9c){return _0x5706bf(_0x47ec9c-0x59,_0x278812);}return _0x133a3a[_0x149df8(0x89,0x91)]['colorTable'];},'aspect':function(){return _0x47a08c['drawingBufferWidth']/_0x47a08c['drawingBufferHeight'];},'pixelSize':function(){function _0x4d6039(_0x2752e4,_0x56a69f){return _0x5706bf(_0x2752e4- -0xf5,_0x56a69f);}return _0x4d5ce7[_0x4d6039(-0x33,0x34)];},'lineWidth':function(){return _0x55cd81['lineWidth'];},'particleHeight':function(){return _0x55cd81['particleHeight'];}},'vertexShaderSource':new Cesium$4[(_0x5706bf(0x156,0x1d6))](_0x3215d4),'fragmentShaderSource':new Cesium$4[(_0x5706bf(0x156,0x14f))](_0x13f37b),'rawRenderState':Util['createRawRenderState'](_0x3fdd97),'framebuffer':this[_0xb264c8(0x24b,0x269)]['segments'],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x2496d8,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4[_0xb264c8(0x29d,0x2a0)][_0xb264c8(0x314,0x293)],'uniformMap':{'segmentsColorTexture':function(){return _0x133a3a['textures']['segmentsColor'];},'segmentsDepthTexture':function(){function _0x42c0d1(_0x1564c9,_0x31f6f6){return _0xb264c8(_0x31f6f6-0xd3,_0x1564c9);}return _0x133a3a['textures'][_0x42c0d1(0x33b,0x3a1)];},'currentTrailsColor':function(){return _0x133a3a['framebuffers']['currentTrails']['getColorTexture'](0x0);},'trailsDepthTexture':function(){return _0x133a3a['framebuffers']['currentTrails']['depthTexture'];},'fadeOpacity':function(){function _0x1b6ab5(_0x528304,_0x75edfc){return _0x5706bf(_0x528304-0x308,_0x75edfc);}return _0x55cd81[_0x1b6ab5(0x3d3,0x3c4)];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x5528c7),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x250672),'rawRenderState':Util[_0xb264c8(0x268,0x1fd)]({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4['DepthFunction']['ALWAYS']},'depthMask':!![]}),'framebuffer':this[_0xb264c8(0x24b,0x1f2)][_0xb264c8(0x29e,0x2a6)],'autoClear':!![],'preExecute':function(){function _0x45fb72(_0x1b6f41,_0x292c5f){return _0x5706bf(_0x292c5f-0x1d5,_0x1b6f41);}const _0x23121f=_0x133a3a['framebuffers'][_0xe1d2a4(0x291,0x2b9)];_0x133a3a[_0x45fb72(0x21f,0x223)]['currentTrails']=_0x133a3a[_0xe1d2a4(0x1e5,0x252)][_0x45fb72(0x1dc,0x276)];function _0xe1d2a4(_0x24fbdf,_0x21dc62){return _0xb264c8(_0x24fbdf- -0x66,_0x21dc62);}_0x133a3a[_0xe1d2a4(0x1e5,0x173)][_0xe1d2a4(0x238,0x2ac)]=_0x23121f,_0x133a3a[_0x45fb72(0x376,0x332)]['trails']['commandToExecute']['framebuffer']=_0x133a3a['framebuffers']['nextTrails'],_0x133a3a[_0xe1d2a4(0x2f4,0x368)]['trails'][_0x45fb72(0x20d,0x270)]['framebuffer']=_0x133a3a[_0xe1d2a4(0x1e5,0x1ce)][_0xe1d2a4(0x238,0x2a1)];}}),'screen':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x4386d3,'geometry':Util[_0x5706bf(0x94,0xa2)](),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'trailsColorTexture':function(){function _0x40721a(_0x5d57d6,_0xf36a0a){return _0xb264c8(_0x5d57d6-0x220,_0xf36a0a);}function _0x32d762(_0x4bcebc,_0x5be90b){return _0xb264c8(_0x5be90b- -0x149,_0x4bcebc);}return _0x133a3a[_0x32d762(0x6e,0x102)]['nextTrails'][_0x32d762(0x23d,0x1e6)](0x0);},'trailsDepthTexture':function(){function _0x126651(_0xf70753,_0x2e23e7){return _0x5706bf(_0xf70753- -0x24e,_0x2e23e7);}return _0x133a3a['framebuffers'][_0x126651(-0x1ad,-0x13e)]['depthTexture'];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x525bff),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x17fc55),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':_0x5723c6,'depthMask':!![],'blending':_0x2df36a}),'framebuffer':undefined})};}}var getWind_frag=_0x5a2d83(0x42e,0x436),updateSpeed_frag='uniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0auniform\x20sampler2D\x20particlesWind;\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20speedFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec3\x20percent\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20\x20\x20float\x20normalization\x20=\x20length(percent);\x0a\x0a\x20\x20\x20\x20return\x20normalization;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20//\x20vec3\x20currentSpeed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20texture(particlesWind,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20vec4(speedFactor\x20*\x20pixelSize\x20*\x20windVector,\x20calculateWindNorm(windVector));\x0a\x20\x20\x20\x20out_FragColor\x20=\x20nextSpeed;\x0a}\x0a',updatePosition_frag=_0x17194a(0x37f,0x3eb),postProcessingPosition_frag='uniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0auniform\x20float\x20dropRate;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0auniform\x20float\x20dropRateBump;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898,\x2078.233,\x204375.85453);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0,\x201.0);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0);\x0a\x20\x20\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20lev);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20\x20\x20return\x20particle.y\x20<\x20-90.0\x20||\x20particle.y\x20>\x2090.0;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20nextSpeed.a;\x0a\x0a\x20\x20\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20\x20\x20if\x20(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(randomParticle,\x201.0);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a\x20\x20\x20\x20}\x0a}\x0a',postProcessingSpeed_frag=_0x17194a(0x364,0x31e);const Cesium$3=mars3d__namespace[_0x5a2d83(0x512,0x49a)];class ParticlesComputing{constructor(_0x582350,_0x26d23b,_0x50fc29,_0x185de7){this['data']=_0x26d23b;function _0x36e8c7(_0x4184ab,_0x2d8267){return _0x5a2d83(_0x4184ab,_0x2d8267- -0x4c7);}this['createWindTextures'](_0x582350,_0x26d23b),this[_0x36e8c7(-0xd0,-0x12e)](_0x582350,_0x50fc29,_0x185de7);function _0x565ce4(_0x157009,_0x501e78){return _0x17194a(_0x501e78- -0x150,_0x157009);}this[_0x565ce4(0x1bb,0x1e2)](_0x26d23b,_0x50fc29,_0x185de7);}['createWindTextures'](_0x42ee5a,_0x322db3){function _0x2f5ee2(_0x429c7c,_0x282617){return _0x5a2d83(_0x429c7c,_0x282617- -0x2bf);}function _0x57274e(_0x5bb9d9,_0x579507){return _0x17194a(_0x579507-0x35,_0x5bb9d9);}const _0x1171c8={'context':_0x42ee5a,'width':_0x322db3['dimensions'][_0x2f5ee2(0x193,0x13a)],'height':_0x322db3['dimensions']['lat']*(_0x322db3[_0x2f5ee2(0x1b6,0x1d4)]['lev']||0x1),'pixelFormat':Cesium$3['PixelFormat'][_0x57274e(0x4ba,0x46b)],'pixelDatatype':Cesium$3['PixelDatatype'][_0x2f5ee2(0x9e,0x121)],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3['TextureMinificationFilter'][_0x57274e(0x3b2,0x388)],'magnificationFilter':Cesium$3[_0x57274e(0x48f,0x411)][_0x2f5ee2(0x4d,0xe7)]})};this['windTextures']={'U':Util['createTexture'](_0x1171c8,_0x322db3['U'][_0x57274e(0x3f7,0x46d)]),'V':Util['createTexture'](_0x1171c8,_0x322db3['V'][_0x2f5ee2(0x153,0x1cc)])};}[_0x5a2d83(0x371,0x399)](_0x5c6943,_0x5e8e86,_0x4df581){const _0x3d190a={'context':_0x5c6943,'width':_0x5e8e86['particlesTextureSize'],'height':_0x5e8e86['particlesTextureSize'],'pixelFormat':Cesium$3['PixelFormat'][_0x249d98(0x60f,0x672)],'pixelDatatype':Cesium$3['PixelDatatype']['FLOAT'],'flipY':![],'sampler':new Cesium$3[(_0x1cb97b(0x2be,0x2e6))]({'minificationFilter':Cesium$3[_0x249d98(0x632,0x691)]['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x249d98(0x57d,0x591)]})},_0x54e9dd=this['randomizeParticles'](_0x5e8e86['maxParticles'],_0x4df581);function _0x249d98(_0x34cccb,_0x531615){return _0x5a2d83(_0x531615,_0x34cccb-0x1d7);}function _0x1cb97b(_0x3c6c1a,_0xf52067){return _0x17194a(_0x3c6c1a- -0xfe,_0xf52067);}const _0x16e008=new Float32Array(0x4*_0x5e8e86[_0x1cb97b(0x242,0x226)])['fill'](0x0);this['particlesTextures']={'particlesWind':Util['createTexture'](_0x3d190a),'currentParticlesPosition':Util['createTexture'](_0x3d190a,_0x54e9dd),'nextParticlesPosition':Util['createTexture'](_0x3d190a,_0x54e9dd),'currentParticlesSpeed':Util['createTexture'](_0x3d190a,_0x16e008),'nextParticlesSpeed':Util['createTexture'](_0x3d190a,_0x16e008),'postProcessingPosition':Util['createTexture'](_0x3d190a,_0x54e9dd),'postProcessingSpeed':Util[_0x249d98(0x633,0x60f)](_0x3d190a,_0x16e008)};}['randomizeParticles'](_0x541ff0,_0x21874e){function _0x1fb5c2(_0xfbbf04,_0x2e8829){return _0x5a2d83(_0xfbbf04,_0x2e8829-0x20);}const _0x42f10e=new Float32Array(0x4*_0x541ff0);for(let _0x9b0245=0x0;_0x9b0245<_0x541ff0;_0x9b0245++){_0x42f10e[0x4*_0x9b0245]=Cesium$3['Math'][_0x3ad19f(0x407,0x3cd)](_0x21874e[_0x1fb5c2(0x3d4,0x3af)]['x'],_0x21874e['lonRange']['y']),_0x42f10e[0x4*_0x9b0245+0x1]=Cesium$3['Math'][_0x3ad19f(0x3f9,0x3cd)](_0x21874e['latRange']['x'],_0x21874e[_0x1fb5c2(0x3fc,0x474)]['y']),_0x42f10e[0x4*_0x9b0245+0x2]=Cesium$3[_0x1fb5c2(0x3f3,0x429)]['randomBetween'](this[_0x1fb5c2(0x4bf,0x441)][_0x1fb5c2(0x484,0x432)][_0x1fb5c2(0x444,0x4b8)],this['data'][_0x3ad19f(0x3dc,0x389)]['max']),_0x42f10e[0x4*_0x9b0245+0x3]=0x0;}function _0x3ad19f(_0x1712de,_0x34fad9){return _0x17194a(_0x34fad9- -0x36,_0x1712de);}return _0x42f10e;}[_0x17194a(0x34b,0x339)](){function _0x1af9e9(_0x23d79c,_0x284c94){return _0x17194a(_0x284c94- -0x18f,_0x23d79c);}function _0x354053(_0x445ba2,_0x1a95bf){return _0x17194a(_0x445ba2- -0x2af,_0x1a95bf);}Object[_0x1af9e9(0x196,0x210)](this[_0x354053(0xcd,0xc8)])[_0x354053(0x8b,0xfa)](_0x172357=>{this['particlesTextures'][_0x172357]['destroy']();});}['createComputingPrimitives'](_0x21a6d9,_0x4a729e,_0x14bae6){const _0x14fa25=new Cesium$3['Cartesian3'](_0x21a6d9['dimensions']['lon'],_0x21a6d9['dimensions']['lat'],_0x21a6d9[_0xff0f00(0x1ab,0x175)]['lev']),_0x419b9d=new Cesium$3['Cartesian3'](_0x21a6d9[_0x471ff0(-0xd4,-0x105)]['min'],_0x21a6d9[_0x471ff0(-0x1aa,-0x12b)][_0xff0f00(0x1b0,0x1c5)],_0x21a6d9['lev']['min']),_0x418b74=new Cesium$3[(_0xff0f00(0x109,0xd1))](_0x21a6d9['lon']['max'],_0x21a6d9['lat']['max'],_0x21a6d9[_0xff0f00(0x12a,0x10f)]['max']),_0x2fbc30=new Cesium$3[(_0x471ff0(-0xc8,-0x10d))]((_0x418b74['x']-_0x419b9d['x'])/(_0x14fa25['x']-0x1),(_0x418b74['y']-_0x419b9d['y'])/(_0x14fa25['y']-0x1),_0x14fa25['z']>0x1?(_0x418b74['z']-_0x419b9d['z'])/(_0x14fa25['z']-0x1):0x1),_0x1fba39=new Cesium$3['Cartesian2'](_0x21a6d9['U']['min'],_0x21a6d9['U']['max']),_0x92731b=new Cesium$3[(_0x471ff0(-0xb5,-0xfd))](_0x21a6d9['V']['min'],_0x21a6d9['V']['max']),_0x328481=this,_0x2719e1={};_0x2719e1['U']=function(){return _0x328481['windTextures']['U'];},_0x2719e1['V']=function(){return _0x328481['windTextures']['V'];},_0x2719e1['currentParticlesPosition']=function(){function _0x5209c5(_0x160422,_0x4b9127){return _0x471ff0(_0x160422,_0x4b9127-0x191);}return _0x328481['particlesTextures'][_0x5209c5(-0x3e,0x2f)];},_0x2719e1['dimension']=function(){return _0x14fa25;},_0x2719e1['minimum']=function(){return _0x419b9d;};function _0xff0f00(_0x10cc44,_0x43fccb){return _0x17194a(_0x10cc44- -0x295,_0x43fccb);}_0x2719e1[_0x471ff0(-0x16f,-0x16e)]=function(){return _0x418b74;},_0x2719e1['interval']=function(){return _0x2fbc30;};const _0xb29b8d={};_0xb29b8d['sources']=[getWind_frag];const _0x13c9d6={};_0x13c9d6[_0x471ff0(-0x11,-0x95)]=[updateSpeed_frag];const _0x59b48e={};_0x59b48e[_0x471ff0(-0x8c,-0x95)]=[updatePosition_frag];const _0x3de587={};_0x3de587[_0xff0f00(0x181,0x175)]=[postProcessingPosition_frag];function _0x471ff0(_0x5cc0c1,_0x595054){return _0x5a2d83(_0x5cc0c1,_0x595054- -0x4fe);}const _0x501629={};_0x501629[_0x471ff0(-0x12d,-0x95)]=[postProcessingSpeed_frag],this['primitives']={'getWind':new CustomPrimitive({'commandType':'Compute','uniformMap':_0x2719e1,'fragmentShaderSource':new Cesium$3[(_0x471ff0(-0x1e,-0x65))](_0xb29b8d),'outputTexture':this[_0xff0f00(0xe7,0x11a)]['particlesWind'],'preExecute':function(){function _0x15b4f7(_0x1dbd85,_0x2278be){return _0x471ff0(_0x1dbd85,_0x2278be-0x1c8);}function _0x29b774(_0x4f53e1,_0x54e3cd){return _0x471ff0(_0x54e3cd,_0x4f53e1-0x706);}_0x328481[_0x29b774(0x6a8,0x6e0)]['getWind'][_0x15b4f7(0xbf,0xd0)][_0x15b4f7(0x1bb,0x154)]=_0x328481['particlesTextures'][_0x29b774(0x5bd,0x645)];}}),'updateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesSpeed':function(){function _0x5d33cd(_0x48dda4,_0xd2ddc){return _0x471ff0(_0xd2ddc,_0x48dda4-0x6b9);}function _0x2d01a0(_0x112d24,_0x1ba545){return _0x471ff0(_0x112d24,_0x1ba545-0x3f1);}return _0x328481[_0x5d33cd(0x58a,0x603)][_0x2d01a0(0x289,0x27c)];},'particlesWind':function(){function _0x27e273(_0x290b67,_0x468ec1){return _0xff0f00(_0x290b67-0x1ab,_0x468ec1);}return _0x328481[_0x27e273(0x292,0x29a)]['particlesWind'];},'uSpeedRange':function(){return _0x1fba39;},'vSpeedRange':function(){return _0x92731b;},'pixelSize':function(){return _0x14bae6['pixelSize'];},'speedFactor':function(){return _0x4a729e['speedFactor'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x13c9d6),'outputTexture':this['particlesTextures']['nextParticlesSpeed'],'preExecute':function(){const _0x540fe5=_0x328481['particlesTextures'][_0x547b71(-0x1da,-0x1ec)];function _0x5d9b9b(_0x57b76a,_0x373d95){return _0xff0f00(_0x57b76a-0xed,_0x373d95);}function _0x547b71(_0x5dfadd,_0x42d228){return _0x471ff0(_0x5dfadd,_0x42d228- -0x77);}_0x328481['particlesTextures'][_0x5d9b9b(0x18e,0x1a4)]=_0x328481['particlesTextures']['postProcessingSpeed'],_0x328481[_0x547b71(-0x198,-0x1a6)][_0x5d9b9b(0x252,0x1d6)]=_0x540fe5,_0x328481['primitives']['updateSpeed']['commandToExecute'][_0x5d9b9b(0x28f,0x252)]=_0x328481['particlesTextures']['nextParticlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':function(){return _0x328481['particlesTextures']['currentParticlesPosition'];},'currentParticlesSpeed':function(){return _0x328481['particlesTextures']['currentParticlesSpeed'];}},'fragmentShaderSource':new Cesium$3[(_0x471ff0(0x19,-0x65))](_0x59b48e),'outputTexture':this[_0x471ff0(-0xcb,-0x12f)][_0xff0f00(0xca,0xee)],'preExecute':function(){const _0x5afb5c=_0x328481[_0x5d0b20(0x4d3,0x472)][_0x5c6120(-0xb,-0x68)];function _0x5d0b20(_0x3fb40b,_0x466c97){return _0x471ff0(_0x3fb40b,_0x466c97-0x5a1);}function _0x5c6120(_0x1e88cf,_0x508399){return _0x471ff0(_0x1e88cf,_0x508399-0xfa);}_0x328481[_0x5c6120(-0xcb,-0x35)][_0x5d0b20(0x44e,0x43f)]=_0x328481['particlesTextures'][_0x5d0b20(0x45a,0x4e1)],_0x328481['particlesTextures'][_0x5d0b20(0x564,0x4e1)]=_0x5afb5c,_0x328481[_0x5d0b20(0x5a3,0x543)][_0x5c6120(0x6b,0x22)]['commandToExecute'][_0x5d0b20(0x543,0x52d)]=_0x328481[_0x5d0b20(0x4e1,0x472)]['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':function(){function _0x6d1624(_0x2e0576,_0x5bc5eb){return _0x471ff0(_0x5bc5eb,_0x2e0576- -0xa9);}return _0x328481['particlesTextures'][_0x6d1624(-0x1f5,-0x200)];},'nextParticlesSpeed':function(){function _0x3eb67c(_0xf0af48,_0xcf09a4){return _0xff0f00(_0xcf09a4- -0x26,_0xf0af48);}return _0x328481['particlesTextures'][_0x3eb67c(0x17f,0xf0)];},'lonRange':function(){return _0x14bae6['lonRange'];},'latRange':function(){return _0x14bae6['latRange'];},'randomCoefficient':function(){const _0x578017=Math[_0x2fab06(0x134,0x16a)]();function _0x2fab06(_0x57b7de,_0x4c4469){return _0x471ff0(_0x57b7de,_0x4c4469-0x2a2);}return _0x578017;},'dropRate':function(){function _0x1b8533(_0x193dc8,_0x135505){return _0x471ff0(_0x193dc8,_0x135505-0x435);}return _0x4a729e[_0x1b8533(0x2f3,0x357)];},'dropRateBump':function(){function _0x52256c(_0x23503b,_0x37fbb7){return _0xff0f00(_0x23503b- -0x20c,_0x37fbb7);}return _0x4a729e[_0x52256c(-0xf4,-0xc4)];}},'fragmentShaderSource':new Cesium$3[(_0x471ff0(-0x6c,-0x65))](_0x3de587),'outputTexture':this['particlesTextures'][_0x471ff0(-0x64,-0xc0)],'preExecute':function(){function _0x560158(_0x4336f4,_0x307a09){return _0xff0f00(_0x307a09-0xda,_0x4336f4);}function _0x16022b(_0x5d2dd5,_0x1ab585){return _0x471ff0(_0x1ab585,_0x5d2dd5-0x325);}_0x328481[_0x560158(0x216,0x292)][_0x560158(0x210,0x230)]['commandToExecute']['outputTexture']=_0x328481['particlesTextures'][_0x560158(0x1fa,0x230)];}}),'postProcessingSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'postProcessingPosition':function(){function _0x4669f7(_0x216d71,_0x3e681a){return _0xff0f00(_0x216d71- -0x1e6,_0x3e681a);}function _0x2290df(_0x57665e,_0x24c17c){return _0xff0f00(_0x57665e-0xc3,_0x24c17c);}return _0x328481[_0x4669f7(-0xff,-0xd1)][_0x2290df(0x219,0x294)];},'nextParticlesSpeed':function(){function _0xf14a1a(_0x4e126f,_0x195c33){return _0xff0f00(_0x195c33-0x3ca,_0x4e126f);}return _0x328481['particlesTextures'][_0xf14a1a(0x4a0,0x4e0)];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x501629),'outputTexture':this['particlesTextures']['postProcessingSpeed'],'preExecute':function(){function _0x536cfd(_0x318087,_0x588ce9){return _0x471ff0(_0x318087,_0x588ce9-0x135);}function _0x2d39b1(_0x25ba3b,_0x3f22bd){return _0xff0f00(_0x25ba3b- -0x178,_0x3f22bd);}_0x328481[_0x536cfd(0x142,0xd7)][_0x2d39b1(-0x13,0x85)][_0x2d39b1(-0x5a,-0x56)][_0x536cfd(0x155,0xc1)]=_0x328481['particlesTextures']['postProcessingSpeed'];}})};}}const Cesium$2=mars3d__namespace['Cesium'];class ParticleSystem{constructor(_0x48ee7d,_0x37380d,_0x485477,_0x10afdf){this['context']=_0x48ee7d,_0x37380d={..._0x37380d};_0x37380d['udata']&&_0x37380d['vdata']&&(_0x37380d['dimensions']={},_0x37380d[_0x6e7f1c(-0x4e,0x42)]['lon']=_0x37380d['cols'],_0x37380d['dimensions'][_0x5e4f1e(0x276,0x24d)]=_0x37380d[_0x5e4f1e(0x2e5,0x28b)],_0x37380d[_0x6e7f1c(-0x4a,0x42)][_0x5e4f1e(0x2fe,0x28c)]=_0x37380d[_0x5e4f1e(0x26b,0x28c)]||0x1,_0x37380d['lon']={},_0x37380d['lon']['min']=_0x37380d[_0x6e7f1c(0xb2,0x4a)],_0x37380d['lon']['max']=_0x37380d[_0x6e7f1c(0x85,0x1c)],_0x37380d['lat']={},_0x37380d[_0x6e7f1c(-0xe7,-0x7e)]['min']=_0x37380d['ymin'],_0x37380d['lat'][_0x6e7f1c(0xec,0x5b)]=_0x37380d['ymax'],_0x37380d[_0x6e7f1c(-0x3,-0x3f)]={},_0x37380d['lev']['min']=_0x37380d['levmin']??0x1,_0x37380d['lev'][_0x6e7f1c(0x98,0x5b)]=_0x37380d['levmax']??0x1,_0x37380d['U']={},_0x37380d['U'][_0x6e7f1c(-0x5c,0x3a)]=new Float32Array(_0x37380d['udata']),_0x37380d['U']['min']=_0x37380d['umin']??Math['min'](..._0x37380d['udata']),_0x37380d['U']['max']=_0x37380d[_0x6e7f1c(-0xca,-0x92)]??Math[_0x5e4f1e(0x2f0,0x326)](..._0x37380d['udata']),_0x37380d['V']={},_0x37380d['V']['array']=new Float32Array(_0x37380d['vdata']),_0x37380d['V']['min']=_0x37380d[_0x5e4f1e(0x231,0x298)]??Math[_0x6e7f1c(0x86,0x47)](..._0x37380d[_0x6e7f1c(-0xed,-0xbb)]),_0x37380d['V']['max']=_0x37380d['vmax']??Math[_0x5e4f1e(0x36b,0x326)](..._0x37380d[_0x6e7f1c(-0x4f,-0xbb)]));this[_0x5e4f1e(0x2fc,0x29b)]=_0x37380d,this['options']=_0x485477,this['viewerParameters']=_0x10afdf;function _0x6e7f1c(_0x4e07d8,_0x5e77dc){return _0x5a2d83(_0x4e07d8,_0x5e77dc- -0x451);}function _0x5e4f1e(_0x2b6765,_0x45363b){return _0x17194a(_0x45363b- -0x133,_0x2b6765);}this['particlesComputing']=new ParticlesComputing(this['context'],this['data'],this[_0x5e4f1e(0x25f,0x238)],this[_0x5e4f1e(0x258,0x245)]),this[_0x5e4f1e(0x300,0x281)]=new ParticlesRendering(this['context'],this['data'],this['options'],this['viewerParameters'],this[_0x5e4f1e(0x2ee,0x257)]);}[_0x5a2d83(0x30a,0x392)](_0x5cd40c){this['particlesComputing']['destroyParticlesTextures'](),Object['keys'](this[_0x3dd9fb(-0x99,-0x2c)]['windTextures'])[_0x5f2cb2(-0x20a,-0x1dd)](_0x145efc=>{function _0x2226ec(_0x271931,_0x14e5d7){return _0x5f2cb2(_0x271931-0x4b0,_0x14e5d7);}function _0x177a24(_0xc7720f,_0x17d70d){return _0x3dd9fb(_0xc7720f,_0x17d70d-0xf9);}this[_0x177a24(0x4b,0xcd)][_0x177a24(0x116,0xec)][_0x145efc]['destroy']();}),this[_0x5f2cb2(-0x190,-0x175)]['textures']['colorTable'][_0x3dd9fb(0xb6,0x9c)]();function _0x3dd9fb(_0x5cea0e,_0x542aa6){return _0x17194a(_0x542aa6- -0x3b6,_0x5cea0e);}Object['keys'](this['particlesRendering']['framebuffers'])[_0x5f2cb2(-0x20a,-0x18e)](_0x3ebd3b=>{function _0x3ae988(_0x50d424,_0x29d110){return _0x5f2cb2(_0x50d424-0x52b,_0x29d110);}this[_0x3ae988(0x39b,0x3ad)]['framebuffers'][_0x3ebd3b]['destroy']();});function _0x5f2cb2(_0x5cee81,_0x42d498){return _0x5a2d83(_0x42d498,_0x5cee81- -0x597);}this[_0x3dd9fb(0x2e,0x48)]=_0x5cd40c,this['particlesComputing']=new ParticlesComputing(this['context'],this['data'],this[_0x5f2cb2(-0x1d9,-0x269)],this[_0x5f2cb2(-0x1cc,-0x233)]),this[_0x5f2cb2(-0x190,-0x19c)]=new ParticlesRendering(this['context'],this[_0x3dd9fb(0x7f,0x18)],this['options'],this['viewerParameters'],this['particlesComputing']);}['clearFramebuffers'](){const _0x23dc24=new Cesium$2['ClearCommand']({'color':new Cesium$2['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2[_0x4efc94(-0x1d5,-0x206)]['OPAQUE']});function _0x347979(_0xdb48ba,_0x4a0d4a){return _0x5a2d83(_0xdb48ba,_0x4a0d4a- -0x37d);}function _0x4efc94(_0x290398,_0x183ed9){return _0x5a2d83(_0x183ed9,_0x290398- -0x55f);}Object['keys'](this[_0x347979(0x56,0x8a)]['framebuffers'])[_0x4efc94(-0x1d2,-0x162)](_0x47d397=>{function _0x8139d4(_0x3dc9da,_0x4cc322){return _0x347979(_0x3dc9da,_0x4cc322-0x4cb);}_0x23dc24[_0x8139d4(0x5ad,0x588)]=this['particlesRendering']['framebuffers'][_0x47d397],_0x23dc24['execute'](this['context']);});}['refreshParticles'](_0x3105bb){this['clearFramebuffers'](),this['particlesComputing']['destroyParticlesTextures']();function _0x11f70b(_0x3e9451,_0x275f4b){return _0x17194a(_0x275f4b- -0x39c,_0x3e9451);}function _0x26794b(_0x59c81a,_0xbe497f){return _0x5a2d83(_0xbe497f,_0x59c81a- -0x55c);}this[_0x26794b(-0x17f,-0x1e9)][_0x11f70b(-0xab,-0x56)](this[_0x26794b(-0x10b,-0xf0)],this['options'],this['viewerParameters']);if(_0x3105bb){var _0x49a45e;const _0x335f2f=this['particlesRendering'][_0x11f70b(-0xc5,-0x5a)](this[_0x11f70b(-0x73,-0x31)]);this[_0x26794b(-0x155,-0x16b)]['primitives'][_0x11f70b(0x1a,-0x6d)]['geometry']=_0x335f2f;const _0x3586a6=Cesium$2[_0x11f70b(-0x7f,-0x5b)][_0x26794b(-0x11c,-0x101)]({'context':this['context'],'geometry':_0x335f2f,'attributeLocations':this['particlesRendering'][_0x11f70b(0x143,0xb1)][_0x26794b(-0x1da,-0x1b2)]['attributeLocations'],'bufferUsage':Cesium$2[_0x26794b(-0xe1,-0x131)][_0x26794b(-0x17d,-0x205)]});(_0x49a45e=this['particlesRendering']['primitives'])!==null&&_0x49a45e!==void 0x0&&(_0x49a45e=_0x49a45e[_0x11f70b(0x2c,-0x6d)])!==null&&_0x49a45e!==void 0x0&&_0x49a45e['commandToExecute']&&(this[_0x26794b(-0x155,-0x10b)][_0x26794b(-0xbc,-0x6d)][_0x11f70b(0xf,-0x6d)]['commandToExecute']['vertexArray']=_0x3586a6);}}['setOptions'](_0x314299){function _0x310975(_0x37e323,_0x225a5e){return _0x5a2d83(_0x225a5e,_0x37e323- -0x48b);}let _0x7c5fb5=![];this['options']['maxParticles']!==_0x314299['maxParticles']&&(_0x7c5fb5=!![]),Object['keys'](_0x314299)[_0x310975(-0xfe,-0xec)](_0x1ab7de=>{this['options'][_0x1ab7de]=_0x314299[_0x1ab7de];}),this['refreshParticles'](_0x7c5fb5);}[_0x17194a(0x330,0x2b8)](_0x2d0251){Object[_0xa0b6ea(0x4a3,0x49a)](_0x2d0251)['forEach'](_0x2e7b51=>{function _0x25722f(_0x4528a5,_0x2ef4d4){return _0xa0b6ea(_0x2ef4d4,_0x4528a5- -0x4fb);}this[_0x25722f(-0x88,-0x117)][_0x2e7b51]=_0x2d0251[_0x2e7b51];});function _0x28256f(_0x3cde5f,_0x1eb4f9){return _0x5a2d83(_0x1eb4f9,_0x3cde5f-0x194);}function _0xa0b6ea(_0xf07ac,_0x518838){return _0x17194a(_0x518838-0xfb,_0xf07ac);}this[_0x28256f(0x561,0x505)](![]);}['destroy'](){clearTimeout(this['canrefresh']);function _0x3c9f7c(_0x211bbd,_0x4fdc6b){return _0x17194a(_0x211bbd- -0x494,_0x4fdc6b);}function _0x40154c(_0x11a3a2,_0x3332c9){return _0x17194a(_0x3332c9- -0x52e,_0x11a3a2);}this['particlesComputing']['destroyParticlesTextures'](),Object['keys'](this['particlesComputing'][_0x3c9f7c(-0xeb,-0xbd)])[_0x3c9f7c(-0x15a,-0x188)](_0x5d71a9=>{function _0x278157(_0x18e523,_0x3c3933){return _0x3c9f7c(_0x18e523-0x286,_0x3c3933);}this['particlesComputing']['windTextures'][_0x5d71a9][_0x278157(0x244,0x28d)]();}),this['particlesRendering'][_0x40154c(-0x286,-0x206)]['colorTable']['destroy'](),Object[_0x3c9f7c(-0xf5,-0x140)](this[_0x40154c(-0x1f9,-0x17a)][_0x40154c(-0x20b,-0x1f0)])['forEach'](_0x3c53d6=>{function _0x38a628(_0x3d5fcb,_0x2f052b){return _0x40154c(_0x3d5fcb,_0x2f052b-0x69c);}this['particlesRendering']['framebuffers'][_0x3c53d6][_0x38a628(0x61d,0x5c0)]();});for(const _0x5ddaa0 in this){delete this[_0x5ddaa0];}}}const Cesium$1=mars3d__namespace[_0x17194a(0x447,0x3ba)],BaseLayer$1=mars3d__namespace[_0x17194a(0x3c5,0x3e0)]['BaseLayer'],_0x5400d1={};_0x5400d1[_0x17194a(0x454,0x3ea)]=0x1000,_0x5400d1[_0x17194a(0x387,0x32a)]=0x0,_0x5400d1[_0x17194a(0x3bb,0x407)]=0.996,_0x5400d1['dropRate']=0.003,_0x5400d1[_0x17194a(0x3ad,0x366)]=0.01;function _0x5a2d83(_0x55bb8f,_0x1a1a39){return _0x45bb(_0x1a1a39-0x1c1,_0x55bb8f);}_0x5400d1['speedFactor']=0.5,_0x5400d1[_0x17194a(0x3e6,0x3a0)]=0x2,_0x5400d1['colors']=[_0x5a2d83(0x3da,0x3d0)];const DEF_OPTIONS=_0x5400d1;class WindLayer extends BaseLayer$1{constructor(_0xeab980={}){_0xeab980={...DEF_OPTIONS,..._0xeab980},super(_0xeab980);function _0x432c26(_0x316afa,_0x25b896){return _0x17194a(_0x316afa- -0x1ed,_0x25b896);}this[_0x432c26(0x1ed,0x274)](_0xeab980);}get[_0x17194a(0x3c5,0x32b)](){return this['primitives'];}get['data'](){function _0x2cd1d7(_0x375c1b,_0x1cbcc8){return _0x5a2d83(_0x375c1b,_0x1cbcc8- -0x2e6);}return this[_0x2cd1d7(0x1c9,0x144)];}set['data'](_0x1b1c36){function _0x42b465(_0x38403d,_0x45b95a){return _0x5a2d83(_0x45b95a,_0x38403d- -0x336);}this[_0x42b465(0x75,0xf)](_0x1b1c36);}get['colors'](){return this['options']['colors'];}set['colors'](_0x58ec74){function _0x31bca4(_0xd57761,_0x298cc0){return _0x17194a(_0xd57761- -0x93,_0x298cc0);}this['options']['colors']=_0x58ec74;function _0x41a9ac(_0x855730,_0x36a74c){return _0x17194a(_0x36a74c-0x2,_0x855730);}if(this[_0x41a9ac(0x41e,0x3ff)]){const _0x4c4aa2={};_0x4c4aa2['colors']=_0x58ec74,this['particleSystem']['setOptions'](_0x4c4aa2);}this[_0x31bca4(0x331,0x3a8)]();}['_mountedHook'](){}['_addedHook'](){this[_0x27e729(0x4d0,0x50c)]=this['_map']['scene'],this['camera']=this['_map']['camera'],this['primitives']=new Cesium$1[(_0x5e2601(0x3d2,0x364))](),this['_map']['scene']['primitives']['add'](this['primitives']),this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](),'latRange':new Cesium$1['Cartesian2'](),'pixelSize':0x0},this['globeBoundingSphere']=new Cesium$1['BoundingSphere'](Cesium$1[_0x5e2601(0x3fd,0x3b1)][_0x27e729(0x530,0x5a6)],0.99*0x615299),this['updateViewerParameters'](),window[_0x27e729(0x472,0x4c6)]('resize',this['resize'][_0x27e729(0x529,0x4fe)](this),![]),this[_0x5e2601(0x32d,0x387)]=![],this['mouse_move']=![],this['_map']['on'](mars3d__namespace['EventType']['wheel'],this[_0x5e2601(0x3a0,0x3f4)],this),this[_0x5e2601(0x350,0x378)]['on'](mars3d__namespace[_0x27e729(0x4a6,0x49d)]['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseUp'],this[_0x27e729(0x50e,0x4fa)],this);function _0x27e729(_0x32a1e1,_0x489960){return _0x17194a(_0x489960-0x165,_0x32a1e1);}function _0x5e2601(_0x105b6b,_0x35976d){return _0x17194a(_0x35976d-0x13,_0x105b6b);}this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x27e729(0x55f,0x527)],this),this[_0x5e2601(0x3fe,0x3ea)]&&this['setData'](this['_data']);}['_removedHook'](){window[_0x34519d(0x286,0x219)](_0x34519d(0x2b4,0x2cd),this['resize']),this[_0x16b505(-0x119,-0xee)]['off'](mars3d__namespace['EventType'][_0x16b505(-0x107,-0x10b)],this['_onMap_preRenderEvent'],this);function _0x16b505(_0xbc92a1,_0x2a1530){return _0x5a2d83(_0xbc92a1,_0x2a1530- -0x4a6);}this[_0x16b505(-0x92,-0xee)]['off'](mars3d__namespace['EventType'][_0x16b505(0x2,-0x65)],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['mouseDown'],this[_0x16b505(-0xe6,-0xe6)],this),this['_map']['off'](mars3d__namespace['EventType']['mouseUp'],this[_0x34519d(0x285,0x273)],this);function _0x34519d(_0x3c99c6,_0x269b86){return _0x5a2d83(_0x269b86,_0x3c99c6- -0x163);}this[_0x34519d(0x255,0x1c7)][_0x16b505(0x5c,0x2)](mars3d__namespace['EventType'][_0x34519d(0x2e7,0x347)],this[_0x16b505(0x1,-0x91)],this),this['primitives']['removeAll'](),this[_0x34519d(0x255,0x1cd)]['scene']['primitives'][_0x34519d(0x2ec,0x276)](this['primitives']);}[_0x5a2d83(0x44a,0x417)](){if(!this[_0xb73d1b(0x439,0x4b8)]||!this['particleSystem'])return;function _0xb73d1b(_0x525cdb,_0x5edb79){return _0x5a2d83(_0x525cdb,_0x5edb79-0x86);}this[_0xb73d1b(0x4f2,0x526)][_0xb73d1b(0x517,0x4b8)]=![];function _0x40d27c(_0x47fd93,_0x449de9){return _0x5a2d83(_0x47fd93,_0x449de9-0xa8);}this['primitives']['removeAll'](),this['_map'][_0x40d27c(0x591,0x4ff)](mars3d__namespace['EventType']['preRender'],this['_onMap_preRenderEvent'],this);}['_onMap_preRenderEvent'](_0x52ae33){this[_0x5d2b94(0x1f5,0x166)]['canvasResize'](this[_0x5d2b94(0x196,0x110)][_0x5d2b94(0x1e3,0x167)]);function _0x12f455(_0x44209d,_0x15266e){return _0x5a2d83(_0x44209d,_0x15266e- -0x230);}function _0x5d2b94(_0x22714d,_0x31e321){return _0x17194a(_0x31e321- -0x297,_0x22714d);}this['addPrimitives'](),this[_0x12f455(0x22e,0x270)][_0x12f455(0x1b8,0x202)]=!![];}['_onMapWhellEvent'](_0x330a6b){clearTimeout(this['refreshTimer']);function _0x222984(_0x202734,_0x4041cb){return _0x17194a(_0x202734- -0x107,_0x4041cb);}function _0x4ec285(_0x360dde,_0x32adec){return _0x17194a(_0x32adec- -0x53b,_0x360dde);}if(!this['show']||!this['particleSystem'])return;this['primitives'][_0x222984(0x2d8,0x343)]=![],this[_0x4ec285(-0x296,-0x206)]=setTimeout(()=>{if(!this['show'])return;this['redraw']();},0xc8);}[_0x5a2d83(0x380,0x3c0)](_0x3a9fd5){this['mouse_down']=!![];}[_0x5a2d83(0x3fb,0x415)](_0x451151){if(!this['show']||!this[_0x256d81(0x422,0x407)])return;function _0x256d81(_0x5da507,_0x26190d){return _0x5a2d83(_0x26190d,_0x5da507- -0x2e);}function _0x317402(_0x1ce993,_0x5bd6fb){return _0x5a2d83(_0x1ce993,_0x5bd6fb- -0x13e);}this['mouse_down']&&(this[_0x256d81(0x472,0x4cb)][_0x256d81(0x404,0x3ba)]=![],this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x4fbd68){if(!this[_0x29d11a(0x2fc,0x296)]||!this['particleSystem'])return;this['mouse_down']&&this['mouse_move']&&this['redraw']();this[_0x29d11a(0x36a,0x3b9)]['show']=!![],this[_0x4c8714(0x59c,0x5ab)]=![];function _0x29d11a(_0x53ceee,_0x49e947){return _0x5a2d83(_0x49e947,_0x53ceee- -0x136);}function _0x4c8714(_0x457358,_0x19dbc4){return _0x5a2d83(_0x19dbc4,_0x457358-0x1d5);}this['mouse_move']=![];}['redraw'](){if(!this['_map']||!this['show'])return;this['updateViewerParameters'](),this[_0x1ba1ef(0x4df,0x46c)]['applyViewerParameters'](this['viewerParameters']);function _0x1ba1ef(_0x1cf587,_0x5b850f){return _0x17194a(_0x5b850f-0x6f,_0x1cf587);}this['primitives']['show']=!![];}['setData'](_0x45b748){function _0x2d779a(_0x3ff7a1,_0x23286){return _0x5a2d83(_0x23286,_0x3ff7a1-0x1b5);}this['_data']=_0x45b748;this['particleSystem']&&this['particleSystem']['destroy']();function _0x45ff85(_0x21a362,_0x1cb788){return _0x5a2d83(_0x1cb788,_0x21a362- -0x215);}this['particleSystem']=new ParticleSystem(this[_0x45ff85(0x1e5,0x1dc)][_0x45ff85(0x23c,0x22e)],_0x45b748,this[_0x2d779a(0x566,0x5a4)](),this['viewerParameters']),this['addPrimitives']();}['_setOptionsHook'](_0x43efd3,_0x524279){function _0x40a4da(_0x2c1b15,_0x4b4ed2){return _0x17194a(_0x2c1b15-0xaa,_0x4b4ed2);}if(_0x43efd3)for(const _0x3f671b in _0x43efd3){this[_0x3f671b]=_0x43efd3[_0x3f671b];}function _0x2d49e4(_0x4a9ca4,_0x56ae2b){return _0x17194a(_0x56ae2b- -0x34,_0x4a9ca4);}this['particleSystem']&&this[_0x40a4da(0x4a7,0x4a1)][_0x40a4da(0x438,0x3c6)](this[_0x40a4da(0x408,0x377)]());}[_0x5a2d83(0x35c,0x3b1)](){const _0xac6da1=Math[_0x390a8a(0x4d6,0x548)](Math['sqrt'](this['particlesNumber']));this['particlesNumber']=_0xac6da1*_0xac6da1;const _0x59e0a4={};_0x59e0a4[_0x390a8a(0x578,0x52d)]=_0xac6da1,_0x59e0a4['maxParticles']=this[_0x1d88a9(0xc8,0x49)],_0x59e0a4['particleHeight']=this['fixedHeight'],_0x59e0a4['fadeOpacity']=this['fadeOpacity'],_0x59e0a4['dropRate']=this['dropRate'];function _0x1d88a9(_0x3e5f00,_0x4bc9d2){return _0x5a2d83(_0x3e5f00,_0x4bc9d2- -0x45e);}function _0x390a8a(_0x35f63e,_0x3012e2){return _0x17194a(_0x3012e2-0x174,_0x35f63e);}return _0x59e0a4['dropRateBump']=this['dropRateBump'],_0x59e0a4[_0x1d88a9(0x15,0x48)]=this[_0x390a8a(0x641,0x5c7)],_0x59e0a4[_0x1d88a9(0x31,-0x25)]=this['lineWidth'],_0x59e0a4['colors']=this[_0x390a8a(0x587,0x551)],_0x59e0a4;}[_0x17194a(0x370,0x316)](){this[_0xc427b(0x629,0x5b1)]['add'](this['particleSystem'][_0xc427b(0x566,0x502)][_0x3796f3(0x417,0x3e3)][_0xc427b(0x5f1,0x5d8)]),this['primitives']['add'](this['particleSystem']['particlesComputing']['primitives'][_0x3796f3(0x33e,0x3a6)]),this[_0x3796f3(0x443,0x3e3)]['add'](this[_0xc427b(0x5d9,0x545)]['particlesComputing']['primitives']['updatePosition']),this['primitives']['add'](this['particleSystem'][_0x3796f3(0x39e,0x320)]['primitives']['postProcessingPosition']),this['primitives']['add'](this['particleSystem']['particlesComputing']['primitives']['postProcessingSpeed']),this['primitives']['add'](this['particleSystem'][_0x3796f3(0x3ac,0x34a)]['primitives']['segments']);function _0xc427b(_0xb724c9,_0x6bcaa1){return _0x5a2d83(_0x6bcaa1,_0xb724c9-0x189);}function _0x3796f3(_0x28cca5,_0x360ec1){return _0x17194a(_0x360ec1- -0x6a,_0x28cca5);}this[_0x3796f3(0x3f1,0x3e3)][_0x3796f3(0x386,0x38c)](this[_0x3796f3(0x397,0x393)][_0xc427b(0x590,0x5fe)]['primitives'][_0xc427b(0x5a2,0x51b)]),this['primitives']['add'](this['particleSystem'][_0x3796f3(0x2de,0x34a)][_0x3796f3(0x3e6,0x3e3)]['screen']);}['updateViewerParameters'](){let _0x3f186d=this['camera']['computeViewRectangle'](this[_0xd1d3c4(0x1d7,0x251)]['globe']['ellipsoid']);if(!_0x3f186d){const _0x4e9408=this['_map']['getExtent']();_0x3f186d=Cesium$1[_0x4cdf9b(0x682,0x64a)][_0x4cdf9b(0x674,0x5f7)](_0x4e9408['xmin'],_0x4e9408[_0x4cdf9b(0x667,0x60e)],_0x4e9408['xmax'],_0x4e9408['ymax']);}const _0x174d13=Util['viewRectangleToLonLatRange'](_0x3f186d);this['viewerParameters'][_0x4cdf9b(0x57f,0x546)]['x']=_0x174d13['lon']['min'],this['viewerParameters'][_0x4cdf9b(0x57f,0x5bc)]['y']=_0x174d13[_0xd1d3c4(0x2a6,0x250)][_0x4cdf9b(0x69c,0x68b)];function _0x4cdf9b(_0x2a3c90,_0x34c31d){return _0x5a2d83(_0x34c31d,_0x2a3c90-0x1f0);}this['viewerParameters'][_0xd1d3c4(0x27f,0x2ab)]['x']=_0x174d13['lat']['min'];function _0xd1d3c4(_0x7b041f,_0x289ff3){return _0x17194a(_0x289ff3- -0x156,_0x7b041f);}this['viewerParameters'][_0xd1d3c4(0x2d5,0x2ab)]['y']=_0x174d13['lat']['max'];const _0x456979=this[_0x4cdf9b(0x62f,0x69f)]['getPixelSize'](this['globeBoundingSphere'],this[_0xd1d3c4(0x2eb,0x251)]['drawingBufferWidth'],this['scene']['drawingBufferHeight']);_0x456979>0x0&&(this[_0xd1d3c4(0x23c,0x222)]['pixelSize']=_0x456979);}}mars3d__namespace[_0x17194a(0x3ba,0x3d9)][_0x17194a(0x40c,0x451)]('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this['lat']=null,this['tlng']=null;function _0x13ca58(_0x5062b4,_0x45eab5){return _0x17194a(_0x5062b4- -0x8f,_0x45eab5);}this['tlat']=null;function _0x5dac96(_0x5dccf6,_0x3a3f6a){return _0x5a2d83(_0x3a3f6a,_0x5dccf6- -0x209);}this[_0x13ca58(0x3bf,0x349)]=null,this[_0x13ca58(0x2bb,0x33d)]=null;}['destroy'](){for(const _0x105203 in this){delete this[_0x105203];}}}class CanvasWindField{constructor(_0x215c5f){this['setOptions'](_0x215c5f);}get[_0x17194a(0x449,0x447)](){return this['_speedRate'];}set['speedRate'](_0x6b2a08){this['_speedRate']=(0x64-(_0x6b2a08>0x63?0x63:_0x6b2a08))*0x64;function _0x1050bc(_0x5013bb,_0x1c82f0){return _0x17194a(_0x5013bb- -0xee,_0x1c82f0);}function _0x537fc2(_0x57f9bb,_0x36d776){return _0x17194a(_0x57f9bb- -0x188,_0x36d776);}this[_0x537fc2(0x240,0x2d1)]=[(this['xmax']-this[_0x1050bc(0x35a,0x338)])/this[_0x537fc2(0x285,0x20d)],(this[_0x537fc2(0x1bf,0x24d)]-this[_0x1050bc(0x336,0x300)])/this['_speedRate']];}get['maxAge'](){function _0x529c23(_0x5d1ba5,_0x362c89){return _0x17194a(_0x5d1ba5-0x1ae,_0x362c89);}return this[_0x529c23(0x55e,0x5a4)];}set['maxAge'](_0x1ecf54){this['_maxAge']=_0x1ecf54;}[_0x17194a(0x38e,0x428)](_0x34d27e){this['options']=_0x34d27e;function _0x50c052(_0x4f3218,_0x24db5c){return _0x17194a(_0x4f3218-0x248,_0x24db5c);}this['maxAge']=_0x34d27e['maxAge']||0x78;function _0x9a9351(_0x1874e6,_0x11b94b){return _0x5a2d83(_0x1874e6,_0x11b94b- -0x2bf);}this['speedRate']=_0x34d27e['speedRate']||0x32,this['particles']=[];const _0x11be7e=_0x34d27e[_0x9a9351(0x16c,0x1e8)]||0x1000;for(let _0x4fb314=0x0;_0x4fb314<_0x11be7e;_0x4fb314++){const _0x3fbff4=this['_randomParticle'](new CanvasParticle());this['particles'][_0x9a9351(0xe7,0xe0)](_0x3fbff4);}}[_0x17194a(0x420,0x3d1)](_0x1e7b65){this[_0x1ef7b4(0x520,0x4d1)]=_0x1e7b65['rows'],this['cols']=_0x1e7b65['cols'],this[_0x1ef7b4(0x4cb,0x55b)]=_0x1e7b65[_0x5b6547(0x4bc,0x442)],this['xmax']=_0x1e7b65['xmax'],this[_0x1ef7b4(0x581,0x537)]=_0x1e7b65[_0x1ef7b4(0x4c7,0x537)],this['ymax']=_0x1e7b65[_0x5b6547(0x334,0x341)],this[_0x1ef7b4(0x54c,0x543)]=[];const _0x4b54d9=_0x1e7b65[_0x5b6547(0x2f2,0x324)],_0x11b789=_0x1e7b65['vdata'];let _0xf397e2=![];_0x4b54d9['length']===this[_0x5b6547(0x451,0x3b8)]&&_0x4b54d9[0x0]['length']===this['cols']&&(_0xf397e2=!![]);function _0x1ef7b4(_0x1d97ee,_0x205a2f){return _0x17194a(_0x205a2f-0x113,_0x1d97ee);}function _0x5b6547(_0x228b84,_0x3f306a){return _0x5a2d83(_0x228b84,_0x3f306a- -0x59);}let _0x5a4c83=0x0,_0x5f59e7=null,_0x7949ca=null;for(let _0x2683f0=0x0;_0x2683f0<this[_0x5b6547(0x38c,0x3b8)];_0x2683f0++){_0x5f59e7=[];for(let _0x24d556=0x0;_0x24d556<this[_0x5b6547(0x427,0x3b1)];_0x24d556++,_0x5a4c83++){_0xf397e2?_0x7949ca=this[_0x5b6547(0x349,0x394)](_0x4b54d9[_0x2683f0][_0x24d556],_0x11b789[_0x2683f0][_0x24d556]):_0x7949ca=this['_calcUV'](_0x4b54d9[_0x5a4c83],_0x11b789[_0x5a4c83]),_0x5f59e7['push'](_0x7949ca);}this['grid']['push'](_0x5f59e7);}this['options'][_0x1ef7b4(0x55f,0x556)]&&this['grid']['reverse']();}['clear'](){function _0x5ed99d(_0xb9872e,_0x4275a3){return _0x17194a(_0x4275a3-0x1c6,_0xb9872e);}delete this['rows'],delete this['cols'],delete this[_0x5bf4ad(0x478,0x441)],delete this[_0x5bf4ad(0x37d,0x413)];function _0x5bf4ad(_0x2da82f,_0x29c68a){return _0x5a2d83(_0x2da82f,_0x29c68a- -0x5a);}delete this['ymin'],delete this[_0x5bf4ad(0x3cc,0x340)],delete this['grid'],delete this['particles'];}[_0x17194a(0x40b,0x465)](_0x55ff52,_0x4c3fc4){function _0x31cacd(_0x170a68,_0x286131){return _0x17194a(_0x286131-0x266,_0x170a68);}function _0x377669(_0x43f766,_0x3e905f){return _0x17194a(_0x43f766-0x1b7,_0x3e905f);}const _0x3540aa=(_0x55ff52-this[_0x31cacd(0x6a9,0x6ae)])/(this['xmax']-this['xmin'])*(this['cols']-0x1),_0x7b19d=(this[_0x31cacd(0x52c,0x5ad)]-_0x4c3fc4)/(this['ymax']-this['ymin'])*(this[_0x377669(0x575,0x5cc)]-0x1);return[_0x3540aa,_0x7b19d];}[_0x17194a(0x377,0x3b4)](_0x160ba2,_0x96c25){if(_0x160ba2<0x0||_0x160ba2>=this[_0x371507(-0x166,-0x13f)]||_0x96c25>=this['rows'])return[0x0,0x0,0x0];const _0x5ba28b=Math['floor'](_0x160ba2);function _0x371507(_0x2df774,_0x38a771){return _0x17194a(_0x2df774- -0x51d,_0x38a771);}const _0x12a33f=Math[_0x371507(-0xce,-0xbe)](_0x96c25);if(_0x5ba28b===_0x160ba2&&_0x12a33f===_0x96c25)return this['grid'][_0x96c25][_0x160ba2];const _0x45fa09=_0x5ba28b+0x1,_0x20c784=_0x12a33f+0x1;function _0x37ea38(_0x57d123,_0x529250){return _0x17194a(_0x57d123- -0x55,_0x529250);}const _0x1ce82a=this[_0x37ea38(0x322,0x313)](_0x5ba28b,_0x12a33f),_0x4f1947=this[_0x371507(-0x1a6,-0x238)](_0x45fa09,_0x12a33f),_0x8a74bd=this[_0x371507(-0x1a6,-0x1e4)](_0x5ba28b,_0x20c784),_0x5116ce=this[_0x371507(-0x1a6,-0x115)](_0x45fa09,_0x20c784);let _0x5e344b=null;try{_0x5e344b=this['_bilinearInterpolation'](_0x160ba2-_0x5ba28b,_0x96c25-_0x12a33f,_0x1ce82a,_0x4f1947,_0x8a74bd,_0x5116ce);}catch(_0x4b7ab8){console[_0x371507(-0x134,-0xd2)](_0x160ba2,_0x96c25);}return _0x5e344b;}[_0x17194a(0x329,0x2b3)](_0x291839,_0x13f288,_0x47faae,_0x9e396c,_0x110e31,_0x2a2fc8){const _0x8b2c52=0x1-_0x291839;function _0x42478d(_0x3efe12,_0x2d5bde){return _0x17194a(_0x3efe12- -0x4b0,_0x2d5bde);}const _0x4023c4=0x1-_0x13f288,_0x5634fc=_0x8b2c52*_0x4023c4,_0x5959fa=_0x291839*_0x4023c4,_0x2ab3a7=_0x8b2c52*_0x13f288,_0x13b42f=_0x291839*_0x13f288,_0x4657dc=_0x47faae[0x0]*_0x5634fc+_0x9e396c[0x0]*_0x5959fa+_0x110e31[0x0]*_0x2ab3a7+_0x2a2fc8[0x0]*_0x13b42f,_0x1f6e78=_0x47faae[0x1]*_0x5634fc+_0x9e396c[0x1]*_0x5959fa+_0x110e31[0x1]*_0x2ab3a7+_0x2a2fc8[0x1]*_0x13b42f;return this[_0x42478d(-0x116,-0x104)](_0x4657dc,_0x1f6e78);}[_0x17194a(0x39a,0x3b0)](_0x2dca1f,_0x3dee88){return[+_0x2dca1f,+_0x3dee88,Math['sqrt'](_0x2dca1f*_0x2dca1f+_0x3dee88*_0x3dee88)];}['getUVByPoint'](_0x10969a,_0x1e85d3){function _0x1fe465(_0x4214a7,_0x4fa945){return _0x5a2d83(_0x4214a7,_0x4fa945- -0x58b);}if(!this[_0x1fe465(-0xa2,-0x120)](_0x10969a,_0x1e85d3))return null;const _0x259edd=this[_0x329a6b(0x493,0x439)](_0x10969a,_0x1e85d3);function _0x329a6b(_0x2ca6aa,_0xb1c705){return _0x17194a(_0xb1c705-0x2e,_0x2ca6aa);}const _0x169461=this[_0x329a6b(0x3b1,0x3a5)](_0x259edd[0x0],_0x259edd[0x1]);return _0x169461;}['isInExtent'](_0x4db87e,_0x403232){function _0x1a9a52(_0x33bd00,_0x4a6db5){return _0x17194a(_0x33bd00- -0x247,_0x4a6db5);}function _0x16c206(_0x3686dc,_0x1b0396){return _0x5a2d83(_0x1b0396,_0x3686dc- -0x16f);}return _0x4db87e>=this[_0x16c206(0x32c,0x35f)]&&_0x4db87e<=this['xmax']&&_0x403232>=this[_0x16c206(0x308,0x325)]&&_0x403232<=this['ymax']?!![]:![];}['getRandomLatLng'](){function _0x27fd6c(_0x460a7d,_0x4e20af){return _0x5a2d83(_0x460a7d,_0x4e20af- -0x1e);}const _0x326b7f=fRandomByfloat(this[_0x215c2e(0x638,0x60d)],this[_0x27fd6c(0x3ef,0x44f)]);function _0x215c2e(_0x2bf876,_0x3f332c){return _0x5a2d83(_0x2bf876,_0x3f332c-0x172);}const _0x2c1360=fRandomByfloat(this['ymin'],this['ymax']),_0x58fb3e={};return _0x58fb3e['lat']=_0x2c1360,_0x58fb3e[_0x215c2e(0x555,0x4f1)]=_0x326b7f,_0x58fb3e;}[_0x5a2d83(0x3a2,0x423)](){let _0x5f0a42,_0x391981,_0x399d2a;for(let _0x2c52a3=0x0,_0x39ac27=this['particles'][_0x135de0(0x677,0x6b4)];_0x2c52a3<_0x39ac27;_0x2c52a3++){let _0x5c0534=this['particles'][_0x2c52a3];_0x5c0534[_0x19d0c6(0xba,0xb6)]<=0x0&&(_0x5c0534=this['_randomParticle'](_0x5c0534));if(_0x5c0534[_0x135de0(0x642,0x6ac)]>0x0){const _0x1ebc92=_0x5c0534[_0x135de0(0x630,0x64f)],_0x9af186=_0x5c0534['tlat'];_0x399d2a=this[_0x135de0(0x599,0x5c5)](_0x1ebc92,_0x9af186),_0x399d2a?(_0x5f0a42=_0x1ebc92+this['_calc_speedRate'][0x0]*_0x399d2a[0x0],_0x391981=_0x9af186+this[_0x135de0(0x646,0x626)][0x1]*_0x399d2a[0x1],_0x5c0534['lng']=_0x1ebc92,_0x5c0534['lat']=_0x9af186,_0x5c0534[_0x135de0(0x6ad,0x64f)]=_0x5f0a42,_0x5c0534[_0x135de0(0x63f,0x69a)]=_0x391981,_0x5c0534[_0x19d0c6(-0x9e,-0x4e)]=_0x399d2a[0x2],_0x5c0534['age']--):_0x5c0534[_0x135de0(0x61a,0x6ac)]=0x0;}}function _0x19d0c6(_0x3c4698,_0x17e1d0){return _0x17194a(_0x17e1d0- -0x398,_0x3c4698);}function _0x135de0(_0x3d44c4,_0x5ddd50){return _0x5a2d83(_0x3d44c4,_0x5ddd50-0x20b);}return this[_0x19d0c6(0x41,0x85)];}['_randomParticle'](_0xbbb3a6){let _0x1c2fb5,_0x40e45a;for(let _0x3eab2f=0x0;_0x3eab2f<0x1e;_0x3eab2f++){_0x1c2fb5=this['getRandomLatLng'](),_0x40e45a=this[_0x4fc873(0x447,0x3fe)](_0x1c2fb5['lng'],_0x1c2fb5[_0x349f94(0x46e,0x45c)]);if(_0x40e45a&&_0x40e45a[0x2]>0x0)break;}if(!_0x40e45a)return _0xbbb3a6;const _0x1383ad=_0x1c2fb5[_0x4fc873(0x3ba,0x3c3)]+this['_calc_speedRate'][0x0]*_0x40e45a[0x0],_0x3bb780=_0x1c2fb5[_0x349f94(0x410,0x45c)]+this[_0x349f94(0x53a,0x4a4)][0x1]*_0x40e45a[0x1];_0xbbb3a6[_0x349f94(0x3b7,0x408)]=_0x1c2fb5[_0x349f94(0x40e,0x408)],_0xbbb3a6['lat']=_0x1c2fb5['lat'],_0xbbb3a6['tlng']=_0x1383ad,_0xbbb3a6['tlat']=_0x3bb780,_0xbbb3a6[_0x4fc873(0x4ba,0x4e5)]=Math[_0x349f94(0x510,0x481)](Math['random']()*this['maxAge']),_0xbbb3a6['speed']=_0x40e45a[0x2];function _0x4fc873(_0x54fb85,_0x3e4a9b){return _0x17194a(_0x3e4a9b-0x97,_0x54fb85);}function _0x349f94(_0x1e02dd,_0x3996c8){return _0x17194a(_0x3996c8-0xdc,_0x1e02dd);}return _0xbbb3a6;}['destroy'](){for(const _0x2554dd in this){delete this[_0x2554dd];}}}function fRandomByfloat(_0x1dd746,_0x161cc7){return _0x1dd746+Math['random']()*(_0x161cc7-_0x1dd746);}const Cesium=mars3d__namespace[_0x17194a(0x447,0x3f9)],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x436629={}){super(_0x436629),this[_0x4baae3(0x4e5,0x533)](_0x436629),this[_0x4baae3(0x54c,0x4d4)]=null;function _0x100e26(_0x1a81c5,_0xd0c795){return _0x5a2d83(_0x1a81c5,_0xd0c795- -0x517);}function _0x4baae3(_0x5eea16,_0x230174){return _0x17194a(_0x230174-0x159,_0x5eea16);}_0x436629['colors']&&_0x436629[_0x4baae3(0x51c,0x503)]&&(this['_colorRamp']=new mars3d__namespace[(_0x4baae3(0x46b,0x4bc))](_0x436629));}['_setOptionsHook'](_0x5b038c,_0x55987f){this['frameTime']=0x3e8/(_0x5b038c['frameRate']||0xa);function _0x708ed5(_0x1b4983,_0x173dca){return _0x17194a(_0x173dca- -0x373,_0x1b4983);}this[_0x12903a(0x3d3,0x433)]=this['options']['pointerEvents']??![];function _0x12903a(_0x1aa882,_0x24ba60){return _0x17194a(_0x1aa882- -0x22,_0x24ba60);}this['color']=_0x5b038c[_0x708ed5(0x10f,0xb9)]||'#ffffff',this[_0x708ed5(0x37,0x73)]=_0x5b038c['lineWidth']||0x1,this[_0x708ed5(-0x13,0x14)]=_0x5b038c[_0x708ed5(-0x36,0x14)]??0x0,this[_0x708ed5(0x92,0xd0)]=_0x5b038c[_0x12903a(0x421,0x420)]??![],this[_0x12903a(0x3a8,0x316)]&&this['windField'][_0x708ed5(0x1,0x1b)](_0x5b038c);}get[_0x5a2d83(0x402,0x418)](){return this['canvas'];}get[_0x17194a(0x386,0x41f)](){function _0x274b44(_0x3ea17e,_0x370487){return _0x5a2d83(_0x3ea17e,_0x370487- -0x1e3);}function _0x3f9c39(_0xa4da2b,_0x1c9ae9){return _0x17194a(_0x1c9ae9- -0x3d2,_0xa4da2b);}return this['_map']['scene'][_0x274b44(0x15a,0x1eb)][_0x274b44(0x22c,0x233)];}get[_0x17194a(0x3ac,0x342)](){function _0x408342(_0x4805f7,_0x35c0cd){return _0x17194a(_0x4805f7- -0x3a5,_0x35c0cd);}function _0x27eaa1(_0x2f893b,_0x4247ac){return _0x17194a(_0x4247ac- -0x4a9,_0x2f893b);}return this[_0x408342(-0x40,-0x1e)][_0x27eaa1(-0xdf,-0x102)]['canvas'][_0x27eaa1(-0x12b,-0x117)];}get[_0x17194a(0x379,0x353)](){return this['_pointerEvents'];}set[_0x17194a(0x379,0x37d)](_0xde3242){this[_0x30a990(0x57b,0x5ee)]=_0xde3242;function _0x30a990(_0x78a114,_0x287d4c){return _0x5a2d83(_0x287d4c,_0x78a114-0x133);}if(!this['canvas'])return;function _0x576896(_0x53c875,_0x2e0fc1){return _0x17194a(_0x2e0fc1- -0x319,_0x53c875);}_0xde3242?this[_0x30a990(0x501,0x49d)]['style']['pointer-events']='all':this['canvas'][_0x30a990(0x5af,0x567)]['pointer-events']='none';}get['particlesNumber'](){return this['options']['particlesNumber'];}set[_0x5a2d83(0x4a5,0x4a7)](_0x354e67){function _0x2133c4(_0xe95a5a,_0x345ccb){return _0x5a2d83(_0x345ccb,_0xe95a5a- -0x149);}this['options'][_0x2133c4(0x35e,0x2c7)]=_0x354e67;function _0x34ac2b(_0x133e97,_0x164006){return _0x5a2d83(_0x133e97,_0x164006- -0x1ba);}clearTimeout(this[_0x34ac2b(0x1d7,0x1ff)]),this['_canrefresh']=setTimeout(()=>{function _0x1eabb3(_0x4cde09,_0x33c4ee){return _0x34ac2b(_0x4cde09,_0x33c4ee- -0x316);}this[_0x1eabb3(-0x166,-0x12e)]();},0x1f4);}get['speedRate'](){function _0x199b00(_0x197b4d,_0x5b5554){return _0x17194a(_0x197b4d- -0x338,_0x5b5554);}function _0x51c132(_0xd793ef,_0x536916){return _0x5a2d83(_0x536916,_0xd793ef- -0x3a9);}return this[_0x199b00(0x33,0xa5)][_0x199b00(0x111,0x7e)];}set['speedRate'](_0x23ea4e){function _0x1ab902(_0x4ebe15,_0x45d82e){return _0x17194a(_0x4ebe15- -0x76,_0x45d82e);}this['options'][_0x1ab902(0x3d3,0x443)]=_0x23ea4e,this['windField']&&(this['windField']['speedRate']=_0x23ea4e);}get['maxAge'](){function _0x3052fc(_0x127537,_0x52e58e){return _0x17194a(_0x127537- -0x42a,_0x52e58e);}return this['options'][_0x3052fc(-0xc,-0x91)];}set['maxAge'](_0x2efd65){function _0x5c58e5(_0x51ef00,_0x4fa72d){return _0x5a2d83(_0x4fa72d,_0x51ef00- -0x408);}function _0x356a5a(_0x2b0b63,_0x34d8ba){return _0x5a2d83(_0x34d8ba,_0x2b0b63- -0x27b);}this['options']['maxAge']=_0x2efd65,this[_0x356a5a(0x1a2,0x136)]&&(this[_0x356a5a(0x1a2,0x155)][_0x5c58e5(0x69,-0x9)]=_0x2efd65);}get[_0x5a2d83(0x48f,0x421)](){return this['windData'];}set['data'](_0x3cebc9){this['setData'](_0x3cebc9);}['_showHook'](_0x38946f){function _0x1fed3f(_0x121153,_0x4971fa){return _0x17194a(_0x4971fa- -0x265,_0x121153);}_0x38946f?this['_addedHook']():(this['windData']&&(this['options']['data']=this['windData']),this[_0x1fed3f(0x127,0x174)]());}[_0x5a2d83(0x410,0x384)](){function _0x55c226(_0x2b084b,_0x190257){return _0x5a2d83(_0x2b084b,_0x190257- -0xc5);}this['options']['worker']?this['initWorker']():this['windField']=new CanvasWindField(this[_0x55c226(0x2df,0x2f9)]);}[_0x5a2d83(0x452,0x40b)](){this[_0x2b22e6(0x252,0x1da)]=this['_createCanvas']();const _0x3dc215={};_0x3dc215['willReadFrequently']=!![],this[_0x1fa82d(0x1ce,0x18d)]=this['canvas']['getContext']('2d',_0x3dc215);function _0x2b22e6(_0x1b869c,_0x21f400){return _0x5a2d83(_0x1b869c,_0x21f400- -0x1f4);}this[_0x1fa82d(0x29d,0x336)]();function _0x1fa82d(_0x3d9196,_0x30dee9){return _0x5a2d83(_0x30dee9,_0x3d9196- -0x1e1);}this['options']['data']&&this['setData'](this[_0x1fa82d(0x1dd,0x171)]['data']);}['_removedHook'](){this[_0x3ce90c(0x50,0x4a)]();function _0x3ce90c(_0x524b56,_0x79c409){return _0x5a2d83(_0x524b56,_0x79c409- -0x33c);}this['unbindEvent']();function _0x241c77(_0x1dfdca,_0x58a2c8){return _0x17194a(_0x1dfdca-0x55,_0x58a2c8);}this[_0x3ce90c(0x9d,0x92)]&&(this[_0x241c77(0x3ba,0x403)]['container']['removeChild'](this[_0x3ce90c(0x79,0x92)]),delete this[_0x241c77(0x3d0,0x3ce)]);}['_createCanvas'](){const _0x546e71=mars3d__namespace['DomUtil']['create']('canvas',_0xf6723c(0x3cc,0x442),this['_map']['container']);_0x546e71['style']['position']='absolute',_0x546e71[_0x748f6c(0x333,0x3c9)][_0x748f6c(0x3c8,0x37e)]='0px',_0x546e71['style']['left']=_0xf6723c(0x4c5,0x4c3),_0x546e71['style'][_0xf6723c(0x44a,0x460)]=this['_map']['scene'][_0xf6723c(0x425,0x400)][_0x748f6c(0x38a,0x363)]+'px',_0x546e71[_0xf6723c(0x43d,0x4ae)]['height']=this[_0xf6723c(0x3ca,0x3ea)]['scene']['canvas'][_0x748f6c(0x383,0x332)]+'px',_0x546e71[_0x748f6c(0x3c7,0x3c9)][_0x748f6c(0x2e3,0x319)]=this['_pointerEvents']?_0x748f6c(0x3fb,0x3e4):'none',_0x546e71[_0x748f6c(0x443,0x3c9)]['zIndex']=this[_0xf6723c(0x465,0x3f0)][_0x748f6c(0x2c5,0x337)]??0x9;function _0x748f6c(_0x28d8d3,_0x422b9a){return _0x17194a(_0x422b9a- -0x60,_0x28d8d3);}function _0xf6723c(_0x49b9bc,_0x175814){return _0x5a2d83(_0x49b9bc,_0x175814-0x32);}return _0x546e71[_0x748f6c(0x3c1,0x37b)]=this['_map']['scene']['canvas'][_0x748f6c(0x33e,0x363)],_0x546e71['height']=this[_0x748f6c(0x2e3,0x305)]['scene'][_0xf6723c(0x394,0x400)]['clientHeight'],_0x546e71;}['resize'](){function _0x33cb04(_0x5323a0,_0xc16906){return _0x17194a(_0xc16906- -0xe3,_0x5323a0);}function _0x4ff43e(_0xc718a2,_0x25a0de){return _0x5a2d83(_0xc718a2,_0x25a0de- -0x9b);}this['canvas']&&(this[_0x33cb04(0x278,0x298)]['style'][_0x33cb04(0x34c,0x2f8)]=this['_map']['scene'][_0x33cb04(0x2cb,0x298)][_0x33cb04(0x248,0x2e0)]+'px',this['canvas']['style']['height']=this[_0x33cb04(0x28a,0x282)]['scene'][_0x4ff43e(0x331,0x333)][_0x33cb04(0x2b7,0x2af)]+'px',this['canvas']['width']=this[_0x4ff43e(0x2d6,0x31d)][_0x4ff43e(0x30b,0x35f)]['canvas']['clientWidth'],this[_0x4ff43e(0x2a1,0x333)]['height']=this['_map'][_0x33cb04(0x304,0x2c4)]['canvas']['clientHeight']);}[_0x5a2d83(0x45a,0x47e)](){const _0x24c6b0=this;let _0x14ed66=Date['now']();(function _0x244584(){function _0x30c821(_0x246739,_0x3a9159){return _0x45bb(_0x3a9159- -0x218,_0x246739);}if(_0x24c6b0['isDestroy'])return;_0x24c6b0[_0x30c821(-0x47,-0x8)]=window['requestAnimationFrame'](_0x244584);if(_0x24c6b0['show']&&_0x24c6b0['windField']){const _0x30541b=Date['now'](),_0x112089=_0x30541b-_0x14ed66;_0x112089>_0x24c6b0['frameTime']&&(_0x14ed66=_0x30541b-_0x112089%_0x24c6b0['frameTime'],_0x24c6b0['update']());}}(),window['addEventListener'](_0x512286(-0x1e,-0x12),this[_0x512286(-0x96,-0x12)][_0x318e96(0x4b0,0x41e)](this),![]),this['mouse_down']=![]);function _0x512286(_0x3216a6,_0x1e0653){return _0x17194a(_0x1e0653- -0x3d6,_0x3216a6);}this['mouse_move']=![];function _0x318e96(_0x50bcc6,_0x337c64){return _0x5a2d83(_0x337c64,_0x50bcc6-0xc4);}this[_0x512286(-0x8f,-0x6b)][_0x512286(-0x24,0x6c)]&&(this['_map']['on'](mars3d__namespace[_0x318e96(0x44f,0x4a1)][_0x512286(0x15,0x18)],this['_onMapWhellEvent'],this),this[_0x318e96(0x47c,0x4e8)]['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x512286(-0x8d,-0x69)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this));}[_0x17194a(0x38f,0x305)](){window[_0xbfbe91(0x2d9,0x368)](this[_0xbfbe91(0x268,0x2fc)]),delete this['_animateFrame'];function _0xbfbe91(_0x373616,_0x3ac7d8){return _0x17194a(_0x373616- -0x116,_0x3ac7d8);}window['removeEventListener']('resize',this[_0xbfbe91(0x2ae,0x2b2)]);function _0x57ecd8(_0x328155,_0x5450b8){return _0x17194a(_0x5450b8- -0x230,_0x328155);}this[_0xbfbe91(0x255,0x280)][_0x57ecd8(0x1d2,0x212)]&&(this[_0x57ecd8(0xfc,0x135)]['off'](mars3d__namespace[_0x57ecd8(0x182,0x108)][_0x57ecd8(0x183,0x1be)],this[_0xbfbe91(0x2cb,0x268)],this),this[_0xbfbe91(0x24f,0x204)][_0xbfbe91(0x33f,0x393)](mars3d__namespace['EventType'][_0x57ecd8(0x1a1,0x203)],this['_onMouseDownEvent'],this),this['_map']['off'](mars3d__namespace[_0xbfbe91(0x222,0x28b)][_0x57ecd8(0x22b,0x1c9)],this['_onMouseUpEvent'],this),this['_map']['off'](mars3d__namespace[_0xbfbe91(0x222,0x1a7)][_0xbfbe91(0x2e1,0x268)],this[_0x57ecd8(0x137,0x192)],this));}[_0x17194a(0x3e1,0x440)](_0x3b06a4){clearTimeout(this['refreshTimer']);if(!this[_0x365c77(0x5d,0x13)]||!this[_0x365c77(-0x7,-0x3f)])return;function _0x4a86d1(_0x3c1b3f,_0x27010b){return _0x5a2d83(_0x27010b,_0x3c1b3f- -0x159);}function _0x365c77(_0x3eab11,_0x35d704){return _0x17194a(_0x3eab11- -0x382,_0x35d704);}this['canvas']['style']['visibility']='hidden',this[_0x4a86d1(0x22f,0x283)]=setTimeout(()=>{function _0x3e7107(_0x533644,_0xb5704e){return _0x365c77(_0xb5704e-0x4dd,_0x533644);}function _0x30e472(_0x156375,_0x442e18){return _0x4a86d1(_0x156375-0x348,_0x442e18);}if(!this[_0x30e472(0x621,0x61f)])return;this[_0x30e472(0x591,0x5e5)](),this['canvas'][_0x3e7107(0x60a,0x584)][_0x30e472(0x5c7,0x543)]='visible';},0xc8);}['_onMouseDownEvent'](_0x301949){this['mouse_down']=!![];function _0x283f92(_0x5dea2a,_0xc4dd03){return _0x17194a(_0xc4dd03-0xc9,_0x5dea2a);}this['_map'][_0x5e8a9e(-0x4c,-0x4)](mars3d__namespace['EventType']['mouseMove'],this[_0x5e8a9e(-0xdf,-0xd7)],this);function _0x5e8a9e(_0x155bb3,_0x2fd4d9){return _0x17194a(_0x155bb3- -0x4a1,_0x2fd4d9);}this['_map']['on'](mars3d__namespace['EventType'][_0x5e8a9e(-0xaa,-0xd7)],this[_0x283f92(0x4ac,0x48b)],this);}[_0x17194a(0x3c2,0x370)](_0x331af5){function _0x5a23eb(_0x4ce33d,_0x59fad6){return _0x5a2d83(_0x59fad6,_0x4ce33d- -0x231);}if(!this['show']||!this[_0x5a23eb(0x19d,0x22c)])return;function _0x3594dd(_0x13f050,_0x5a0515){return _0x5a2d83(_0x13f050,_0x5a0515-0x195);}this['mouse_down']&&(this[_0x3594dd(0x507,0x563)]['style']['visibility']='hidden',this['mouse_move']=!![]);}[_0x17194a(0x395,0x372)](_0x12296a){if(!this['show']||!this['canvas'])return;this[_0x5a1244(0x56a,0x5ba)]['off'](mars3d__namespace['EventType'][_0x5a1244(0x5fc,0x5d4)],this[_0x5a1244(0x5c7,0x565)],this);function _0x5a1244(_0x9c5994,_0x1108ea){return _0x17194a(_0x9c5994-0x205,_0x1108ea);}this['mouse_down']&&this[_0x5a1244(0x577,0x548)]&&this['redraw']();function _0x40e7cc(_0xddf229,_0x5293d3){return _0x5a2d83(_0xddf229,_0x5293d3- -0x96);}this[_0x5a1244(0x580,0x5ba)]['style']['visibility']=_0x40e7cc(0x31e,0x39f),this['mouse_down']=![],this['mouse_move']=![];}['setData'](_0x3fd345){function _0x48b453(_0x5b120e,_0x217625){return _0x17194a(_0x217625-0xc3,_0x5b120e);}this[_0x48b453(0x3c2,0x3f6)](),this['windData']=_0x3fd345,this['windField']['setDate'](_0x3fd345),this['redraw']();}[_0x17194a(0x34f,0x37b)](){if(!this[_0xab19e7(0x3a0,0x30e)])return;this['windField'][_0x2c64ad(0x499,0x4f1)](this[_0x2c64ad(0x476,0x403)]);function _0xab19e7(_0x5186e2,_0x5150f0){return _0x5a2d83(_0x5186e2,_0x5150f0- -0x124);}function _0x2c64ad(_0x60e28,_0x5087cd){return _0x17194a(_0x60e28-0x10b,_0x5087cd);}this[_0xab19e7(0x342,0x30f)]();}['update'](){if(this['_updateIng'])return;this['_updateIng']=!![];function _0x2ba906(_0x377eb3,_0x9c3e1){return _0x5a2d83(_0x9c3e1,_0x377eb3-0x202);}function _0x2ccf83(_0x117a91,_0x3bb45a){return _0x17194a(_0x117a91- -0x31b,_0x3bb45a);}if(this[_0x2ba906(0x6a6,0x653)])this['windField'][_0x2ba906(0x635,0x6bc)]();else{const _0xc697bd=this[_0x2ccf83(0xaf,0x59)]['getParticles']();this['_drawLines'](_0xc697bd);}this[_0x2ccf83(0x20,0xf)]=![];}[_0x17194a(0x34e,0x358)](_0x345ef0){function _0x1b297d(_0x473ace,_0x1e7536){return _0x5a2d83(_0x473ace,_0x1e7536- -0x2c1);}this[_0x1b297d(0x57,0xee)]['globalCompositeOperation']=_0x1b297d(0x1b1,0x1b9),this[_0x676460(0x2dd,0x26b)]['fillRect'](0x0,0x0,this[_0x676460(0x2a1,0x295)],this[_0x1b297d(0xd2,0x13e)]),this['canvasContext'][_0x676460(0x1c4,0x23d)]=_0x676460(0x3b7,0x33c),this['canvasContext']['globalAlpha']=0.9;const _0x4c2213=this['_map'][_0x676460(0x23c,0x2b6)]['mode']!==Cesium['SceneMode']['SCENE3D'];function _0x676460(_0x338a2d,_0x171f5b){return _0x17194a(_0x171f5b- -0xf1,_0x338a2d);}const _0x2ff6a4=this['canvasWidth']*0.25;if(this[_0x1b297d(0x147,0xbd)])for(let _0x1091e3=0x0,_0x596066=_0x345ef0[_0x1b297d(0x160,0x1e8)];_0x1091e3<_0x596066;_0x1091e3++){const _0x16e007=_0x345ef0[_0x1091e3],_0x3aa364=this['_tomap'](_0x16e007[_0x1b297d(0x104,0xbe)],_0x16e007['lat'],_0x16e007),_0x1ec7ce=this[_0x1b297d(0x97,0xd7)](_0x16e007[_0x676460(0x37e,0x300)],_0x16e007['tlat'],_0x16e007);if(!_0x3aa364||!_0x1ec7ce)continue;if(_0x4c2213&&Math['abs'](_0x3aa364[0x0]-_0x1ec7ce[0x0])>=_0x2ff6a4)continue;this[_0x676460(0x1e6,0x26b)]['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this[_0x1b297d(0xbd,0xee)][_0x676460(0x35a,0x31d)]=this['_colorRamp'][_0x676460(0x323,0x30f)](_0x16e007['speed']),this[_0x676460(0x260,0x26b)]['moveTo'](_0x3aa364[0x0],_0x3aa364[0x1]),this['canvasContext'][_0x1b297d(0x111,0x12f)](_0x1ec7ce[0x0],_0x1ec7ce[0x1]),this['canvasContext']['stroke']();}else{this[_0x1b297d(0x148,0xee)][_0x676460(0x2b5,0x31e)](),this['canvasContext']['lineWidth']=this['lineWidth'],this[_0x676460(0x2f6,0x26b)][_0x1b297d(0x217,0x1a0)]=this['color'];for(let _0x4c0a1b=0x0,_0x4ade59=_0x345ef0['length'];_0x4c0a1b<_0x4ade59;_0x4c0a1b++){const _0x5e7d1e=_0x345ef0[_0x4c0a1b],_0x4c6eee=this[_0x1b297d(0x9c,0xd7)](_0x5e7d1e[_0x1b297d(0x9b,0xbe)],_0x5e7d1e[_0x676460(0x2c7,0x28f)],_0x5e7d1e),_0xbef145=this['_tomap'](_0x5e7d1e[_0x676460(0x325,0x300)],_0x5e7d1e['tlat'],_0x5e7d1e);if(!_0x4c6eee||!_0xbef145)continue;if(_0x4c2213&&Math['abs'](_0x4c6eee[0x0]-_0xbef145[0x0])>=_0x2ff6a4)continue;this['canvasContext']['moveTo'](_0x4c6eee[0x0],_0x4c6eee[0x1]),this['canvasContext']['lineTo'](_0xbef145[0x0],_0xbef145[0x1]);}this['canvasContext'][_0x1b297d(0x1a5,0x134)]();}}[_0x17194a(0x345,0x348)](_0x26a429,_0x3d067a,_0x44a198){const _0x20e508=Cesium['Cartesian3'][_0x574cf6(0x249,0x20f)](_0x26a429,_0x3d067a,this['fixedHeight']);function _0x574cf6(_0x594116,_0x1410bb){return _0x5a2d83(_0x1410bb,_0x594116- -0x23b);}const _0x14c966=this['_map'][_0x50e340(-0x16d,-0xe4)];if(_0x14c966['mode']===Cesium['SceneMode'][_0x50e340(-0x18b,-0x144)]){const _0x5c5edc=new Cesium['EllipsoidalOccluder'](_0x14c966['globe'][_0x50e340(-0x13f,-0xb5)],_0x14c966[_0x574cf6(0x204,0x16a)][_0x50e340(-0xf3,-0x10f)]),_0x5a5db5=_0x5c5edc['isPointVisible'](_0x20e508);if(!_0x5a5db5)return _0x44a198[_0x574cf6(0x266,0x24d)]=0x0,null;}function _0x50e340(_0x4fb5ff,_0x512263){return _0x5a2d83(_0x512263,_0x4fb5ff- -0x567);}const _0x4de756=Cesium[_0x574cf6(0x1c0,0x1c6)]['worldToWindowCoordinates'](this[_0x574cf6(0x17d,0x153)]['scene'],_0x20e508);return _0x4de756?[_0x4de756['x'],_0x4de756['y']]:null;}[_0x5a2d83(0x3a9,0x386)](){this['windField'][_0x4c427b(0x335,0x30f)]();function _0x4c427b(_0x13d445,_0x2bbe5a){return _0x17194a(_0x2bbe5a- -0x24,_0x13d445);}function _0x112828(_0x4b3b85,_0x3702f1){return _0x17194a(_0x4b3b85- -0x49b,_0x3702f1);}delete this[_0x112828(-0x13b,-0x152)];}[_0x17194a(0x3cc,0x45a)](){this['worker']=new Worker(this['options']['worker']),this[_0x105fab(0x308,0x376)]['onmessage']=_0x15dafb=>{function _0x1f2731(_0x10737b,_0x341bc1){return _0x105fab(_0x341bc1-0x324,_0x10737b);}this['_drawLines'](_0x15dafb[_0x1f2731(0x53a,0x5a9)]['particles']);function _0x1f8d2b(_0x3842d2,_0x333c9a){return _0x105fab(_0x333c9a-0x115,_0x3842d2);}this[_0x1f2731(0x5c9,0x5b3)]=![];},this['windField']={'init':_0x55a07d=>{function _0xa3492b(_0x1fd4a,_0x289b4e){return _0x105fab(_0x1fd4a-0x30c,_0x289b4e);}const _0xb516f1={};_0xb516f1[_0xa3492b(0x61a,0x5f7)]=_0xa3492b(0x532,0x4e0),_0xb516f1[_0x5f17f1(0x5d5,0x58c)]=_0x55a07d;function _0x5f17f1(_0x363be6,_0x4f0c30){return _0x105fab(_0x363be6-0x3b3,_0x4f0c30);}this[_0x5f17f1(0x6bb,0x6df)][_0x5f17f1(0x65e,0x6c9)](_0xb516f1);},'setOptions':_0x79f2fb=>{function _0x54fa28(_0x45b4ca,_0x505505){return _0x105fab(_0x45b4ca-0x68,_0x505505);}const _0x538243={};_0x538243['type']=_0x54fa28(0x2ad,0x328),_0x538243['options']=_0x79f2fb;function _0x242efd(_0x33e0ce,_0x126ece){return _0x105fab(_0x33e0ce-0x103,_0x126ece);}this[_0x242efd(0x40b,0x37d)]['postMessage'](_0x538243);},'setDate':_0x15c791=>{function _0x36cdef(_0x2e08dc,_0x541d3d){return _0x105fab(_0x541d3d-0x1ec,_0x2e08dc);}const _0x2e4d6b={};function _0x413138(_0x2d2e61,_0xfa6843){return _0x105fab(_0x2d2e61-0x48,_0xfa6843);}_0x2e4d6b['type']='setDate',_0x2e4d6b[_0x36cdef(0x4e1,0x471)]=_0x15c791,this[_0x36cdef(0x475,0x4f4)]['postMessage'](_0x2e4d6b);},'update':()=>{if(this[_0x421181(0x5a8,0x5d7)])return;this['_updateIng2']=!![];function _0x421181(_0x4f27a3,_0x25ba85){return _0x105fab(_0x4f27a3-0x319,_0x25ba85);}function _0x51d5f3(_0x50cf79,_0xc993db){return _0x105fab(_0xc993db- -0x20d,_0x50cf79);}const _0x35312d={};_0x35312d[_0x51d5f3(0x9f,0x101)]=_0x421181(0x5b0,0x571),this[_0x421181(0x621,0x5c0)][_0x51d5f3(0xc1,0x9e)](_0x35312d);},'clear':()=>{const _0x23a1fb={};_0x23a1fb['type']=_0x3d19b8(0x3e8,0x359);function _0x3d19b8(_0x3faf85,_0x2b12fb){return _0x105fab(_0x3faf85-0x1fe,_0x2b12fb);}this['worker']['postMessage'](_0x23a1fb);}};function _0x105fab(_0x4e995a,_0x47a730){return _0x5a2d83(_0x47a730,_0x4e995a- -0x19c);}this['windField']['init'](this['options']);}}mars3d__namespace[_0x5a2d83(0x42d,0x40d)]['register'](_0x5a2d83(0x450,0x408),CanvasWindLayer),mars3d__namespace[_0x5a2d83(0x391,0x418)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace[_0x5a2d83(0x473,0x464)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x5552cd={};function _0x45bb(_0x1a86d4,_0x3df7ac){const _0x25a394=_0x25a3();return _0x45bb=function(_0x45bb87,_0x48d1e8){_0x45bb87=_0x45bb87-0x1b9;let _0x53ef9e=_0x25a394[_0x45bb87];return _0x53ef9e;},_0x45bb(_0x1a86d4,_0x3df7ac);}_0x5552cd['value']=!![],Object[_0x5a2d83(0x31c,0x3a8)](exports,_0x17194a(0x419,0x3c5),_0x5552cd);
}));
