/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.5.8
 * 编译日期：2023-05-23 19:43:59
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';const _0x5c76e9=_0x1fa8;function _0x1efd(){const _0x3b81d5=['SCENE3D','530ZPRJKW','_mapVRenderer','_removedHook','time','252204cIuFAq','getExtentByGeoJSON','_map','Cesium','canvasLayer','left','MultiPolygon','fixedHeight','getData','_onMoveStartEvent','clearData','click','type','methods','getContext','getHeight','COLOR_BUFFER_BIT','Rectangle','display','fromDegrees','all','updateCallback','613426rSMnqs','block','4672584clLvFu','auto','removeChild','update','2631020sDrsEF','set','BaseLayer','_reset','render','updateData','_canvasUpdate','3767911KuOfUq','devicePixelRatio','options','fillStyle','clear','camera','66400lSkyKa','_cache_event','style','_onMoveEndEvent','canvas','animatorMovestartEvent','removeAllData','isEnabledTime','unbindEvent','postRender','48ofGAHE','zIndex','animation','EventType','MapVLayer','layer','_pointerEvents','restore','rgba(0,\x200,\x200,\x20.1)','mouseMove','_showHook','getOwnPropertyDescriptor','Point','cameraMoveStart','6QRIbHI','absolute','transferCoordinate','_onMapMouseMove','138573uwmseA','width','stop','container','default','mousemove','pointerEvents','LineString','mapvDepthTest','off','length','push','height','destroy','bind','forEach','dataSet','none','initDevicePixelRatio','step'];_0x1efd=function(){return _0x3b81d5;};return _0x1efd();}(function(_0x561a12,_0x22f21e){const _0x511c9c={_0x8638e2:0xbc,_0x1c593f:0xd9,_0x18ec90:0xcf,_0x32a16c:0xeb},_0x511d41=_0x1fa8,_0x4c38ac=_0x561a12();while(!![]){try{const _0x5463fa=parseInt(_0x511d41(0x104))/0x1+-parseInt(_0x511d41(_0x511c9c._0x8638e2))/0x2+parseInt(_0x511d41(_0x511c9c._0x1c593f))/0x3*(parseInt(_0x511d41(_0x511c9c._0x18ec90))/0x4)+parseInt(_0x511d41(0xc2))/0x5*(-parseInt(_0x511d41(0xe7))/0x6)+parseInt(_0x511d41(0xc9))/0x7+-parseInt(_0x511d41(0xbe))/0x8+parseInt(_0x511d41(_0x511c9c._0x32a16c))/0x9*(parseInt(_0x511d41(0x100))/0xa);if(_0x5463fa===_0x22f21e)break;else _0x4c38ac['push'](_0x4c38ac['shift']());}catch(_0x1271b4){_0x4c38ac['push'](_0x4c38ac['shift']());}}}(_0x1efd,0x6f1d8));function _interopNamespace(_0x50c86d){const _0x267975={_0x14b72c:0xef},_0x1c5f8a={_0x569d4b:0xe4},_0x387847=_0x1fa8;if(_0x50c86d&&_0x50c86d['__esModule'])return _0x50c86d;var _0x557ec3=Object['create'](null);return _0x50c86d&&Object['keys'](_0x50c86d)[_0x387847(0xfa)](function(_0x2f2da5){const _0x2be9a0=_0x387847;if(_0x2f2da5!=='default'){var _0x5b5a2d=Object[_0x2be9a0(_0x1c5f8a._0x569d4b)](_0x50c86d,_0x2f2da5);Object['defineProperty'](_0x557ec3,_0x2f2da5,_0x5b5a2d['get']?_0x5b5a2d:{'enumerable':!![],'get':function(){return _0x50c86d[_0x2f2da5];}});}}),_0x557ec3[_0x387847(_0x267975._0x14b72c)]=_0x50c86d,_0x557ec3;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'],baiduMapLayer=mapv__namespace?mapv__namespace['baiduMapLayer']:null,BaseLayer$1=baiduMapLayer?baiduMapLayer['__proto__']:Function;class MapVRenderer extends BaseLayer$1{constructor(_0x20615a,_0x4e978b,_0x53d5d3,_0x349170){const _0x579f41={_0x1276a6:0xfb},_0x21466c=_0x1fa8;super(_0x20615a,_0x4e978b,_0x53d5d3);if(!BaseLayer$1)return;this['map']=_0x20615a,this['scene']=_0x20615a['scene'],this[_0x21466c(_0x579f41._0x1276a6)]=_0x4e978b,_0x53d5d3=_0x53d5d3||{},this['init'](_0x53d5d3),this['argCheck'](_0x53d5d3),this['initDevicePixelRatio'](),this['canvasLayer']=_0x349170,this['stopAniamation']=!0x1,this[_0x21466c(0xdb)]=_0x53d5d3['animation'];}[_0x5c76e9(0xfd)](){const _0x5b549a=_0x5c76e9;this[_0x5b549a(0xca)]=window['devicePixelRatio']||0x1;}['addAnimatorEvent'](){}[_0x5c76e9(0xd4)](){const _0x66a7df={_0x296596:0xfe},_0x394d41=_0x5c76e9,_0x57723d=this['options']['animation'];this['isEnabledTime']()&&this['animator']&&(this['steps'][_0x394d41(_0x66a7df._0x296596)]=_0x57723d['stepsRange']['start']);}['animatorMoveendEvent'](){const _0x924f44=_0x5c76e9;this[_0x924f44(0xd6)]()&&this['animator'];}['getContext'](){const _0xa3d954=_0x5c76e9;return this['canvasLayer']['canvas'][_0xa3d954(0x112)](this['context']);}['init'](_0x15f00b){const _0x512798=_0x5c76e9;this['options']=_0x15f00b,this['initDataRange'](_0x15f00b),this['context']=this['options']['context']||'2d',this['options'][_0x512798(0xda)]&&this['canvasLayer']&&this['canvasLayer']['setZIndex']&&this[_0x512798(0x108)]['setZIndex'](this['options']['zIndex']),this['initAnimator']();}[_0x5c76e9(0xc8)](_0x5e984e){const _0x177621={_0x2e7669:0xcd,_0x357034:0xcc,_0x4aca9d:0xe1,_0x566fa6:0xe0,_0x51bc12:0xcb,_0xae9961:0xfb},_0x34f334={_0x3689e5:0x103},_0x4f4719={_0x2ec231:0x113,_0xc8e2d:0xff},_0x27eec8=_0x5c76e9,_0x1112d8=this['scene'];if(this['canvasLayer']&&!this['stopAniamation']){const _0x24ac90=this['options']['animation'],_0x162d71=this['getContext']();if(this['isEnabledTime']()){if(void 0x0===_0x5e984e)return void this[_0x27eec8(_0x177621._0x2e7669)](_0x162d71);this['context']==='2d'&&(_0x162d71['save'](),_0x162d71['globalCompositeOperation']='destination-out',_0x162d71[_0x27eec8(_0x177621._0x357034)]=_0x27eec8(_0x177621._0x4aca9d),_0x162d71['fillRect'](0x0,0x0,_0x162d71['canvas']['width'],_0x162d71['canvas']['height']),_0x162d71[_0x27eec8(_0x177621._0x566fa6)]());}else this['clear'](_0x162d71);if(this['context']==='2d')for(const _0x435aed in this['options']){_0x162d71[_0x435aed]=this[_0x27eec8(_0x177621._0x51bc12)][_0x435aed];}else _0x162d71['clear'](_0x162d71[_0x27eec8(0x114)]);const _0x4d2802={'transferCoordinate':function(_0x36d291){const _0xce024d=_0x27eec8,_0x753c3e=null;let _0xf94e54=_0x1112d8['mapvFixedHeight'];_0x1112d8['mapvAutoHeight']&&(_0xf94e54=_0x1112d8['globe'][_0xce024d(_0x4f4719._0x2ec231)](Cesium$1['Cartographic']['fromDegrees'](_0x36d291[0x0],_0x36d291[0x1])));const _0x51daed=Cesium$1['Cartesian3']['fromDegrees'](_0x36d291[0x0],_0x36d291[0x1],_0xf94e54);if(!_0x51daed)return _0x753c3e;const _0x3c6f87=_0x1112d8['cartesianToCanvasCoordinates'](_0x51daed);if(!_0x3c6f87)return _0x753c3e;if(_0x1112d8['mapvDepthTest']&&_0x1112d8['mode']===Cesium$1['SceneMode'][_0xce024d(_0x4f4719._0xc8e2d)]){const _0x3b7ebd=new Cesium$1['EllipsoidalOccluder'](_0x1112d8['globe']['ellipsoid'],_0x1112d8[_0xce024d(0xce)]['positionWC']),_0x5b406a=_0x3b7ebd['isPointVisible'](_0x51daed);if(!_0x5b406a)return _0x753c3e;}return[_0x3c6f87['x'],_0x3c6f87['y']];}};void 0x0!==_0x5e984e&&(_0x4d2802['filter']=function(_0x53c34c){const _0x5b5d0f=_0x27eec8,_0x41eac0=_0x24ac90['trails']||0xa;return!!(_0x5e984e&&_0x53c34c['time']>_0x5e984e-_0x41eac0&&_0x53c34c[_0x5b5d0f(_0x34f334._0x3689e5)]<_0x5e984e);});const _0x3dd2ec=this[_0x27eec8(_0x177621._0xae9961)]['get'](_0x4d2802);this['processData'](_0x3dd2ec),this['options']['unit']==='m'&&this['options']['size'],this[_0x27eec8(0xcb)]['_size']=this['options']['size'];const _0x272359=_0x1112d8['cartesianToCanvasCoordinates'](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x272359)return;this['drawContext'](_0x162d71,new mapv__namespace['DataSet'](_0x3dd2ec),this['options'],_0x272359),this[_0x27eec8(0xcb)][_0x27eec8(0xbb)]&&this['options']['updateCallback'](_0x5e984e);}}[_0x5c76e9(0xc7)](_0x560df3,_0x4943ed){let _0x16495d=_0x560df3;_0x16495d&&_0x16495d['get']&&(_0x16495d=_0x16495d['get']()),void 0x0!==_0x16495d&&this['dataSet']['set'](_0x16495d),super['update']({'options':_0x4943ed});}['addData'](_0x29822f,_0x3544e3){const _0x1b957={_0x41cd7b:0xfb},_0x303d81=_0x5c76e9;let _0x5058f0=_0x29822f;_0x29822f&&_0x29822f['get']&&(_0x5058f0=_0x29822f['get']()),this[_0x303d81(_0x1b957._0x41cd7b)]['add'](_0x5058f0),this['update']({'options':_0x3544e3});}[_0x5c76e9(0x10c)](){return this['dataSet'];}['removeData'](_0x466984){const _0x1b3953=_0x5c76e9;if(this[_0x1b3953(0xfb)]){const _0x36590e=this['dataSet']['get']({'filter':function(_0xa10fd3){return _0x466984==null||typeof _0x466984!=='function'||!_0x466984(_0xa10fd3);}});this['dataSet'][_0x1b3953(0xc3)](_0x36590e),this['update']({'options':null});}}['clearData'](){const _0x8eb133={_0x5020cd:0xcd},_0x32677c=_0x5c76e9;this['dataSet']&&this[_0x32677c(0xfb)][_0x32677c(_0x8eb133._0x5020cd)](),this[_0x32677c(0xc1)]({'options':null});}['draw'](){this['canvasLayer']['draw']();}['clear'](_0x548b50){_0x548b50&&_0x548b50['clearRect']&&_0x548b50['clearRect'](0x0,0x0,_0x548b50['canvas']['width'],_0x548b50['canvas']['height']);}['destroy'](){const _0x57de17={_0x158fb5:0x10e},_0x48f9c5=_0x5c76e9;this['clear'](this['getContext']()),this[_0x48f9c5(_0x57de17._0x158fb5)](),this['animator']&&this['animator'][_0x48f9c5(0xed)](),this['animator']=null,this['canvasLayer']=null;}}if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace['DataSet'])mapv__namespace['DataSet']['prototype'][_0x5c76e9(0xe9)]=function(_0x2d2660,_0x559f7d,_0x1ae144,_0x288def){const _0x3504f3={_0x4b3e8b:0x110,_0x24bc9a:0xe5,_0x5e2d3f:0xf2,_0x40718c:0xf5,_0x5cb62c:0x10a},_0x326e01=_0x5c76e9;_0x288def=_0x288def||'_coordinates',_0x1ae144=_0x1ae144||'coordinates';for(let _0x420f13=0x0;_0x420f13<_0x2d2660['length'];_0x420f13++){const _0xdd9059=_0x2d2660[_0x420f13]['geometry'],_0x1085f4=_0xdd9059[_0x1ae144];switch(_0xdd9059[_0x326e01(_0x3504f3._0x4b3e8b)]){case _0x326e01(_0x3504f3._0x24bc9a):{const _0x4a97b8=_0x559f7d(_0x1085f4);_0x4a97b8?_0xdd9059[_0x288def]=_0x4a97b8:_0xdd9059[_0x288def]=[-0x3e7,-0x3e7];}break;case _0x326e01(_0x3504f3._0x5e2d3f):{const _0x2ca676=[];for(let _0x36df14=0x0;_0x36df14<_0x1085f4[_0x326e01(_0x3504f3._0x40718c)];_0x36df14++){const _0x1a8190=_0x559f7d(_0x1085f4[_0x36df14]);_0x1a8190&&_0x2ca676['push'](_0x1a8190);}_0xdd9059[_0x288def]=_0x2ca676;}break;case'MultiLineString':case'Polygon':{const _0x488e81=_0x3910cb(_0x1085f4);_0xdd9059[_0x288def]=_0x488e81;}break;case _0x326e01(_0x3504f3._0x5cb62c):{const _0x1552f0=[];for(let _0x2903f3=0x0;_0x2903f3<_0x1085f4['length'];_0x2903f3++){const _0x40df88=_0x3910cb(_0x1085f4[_0x2903f3]);_0x40df88['length']>0x0&&_0x1552f0[_0x326e01(0xf6)](_0x40df88);}_0xdd9059[_0x288def]=_0x1552f0;}break;}}function _0x3910cb(_0x59729b){const _0x4ed0b9=_0x326e01,_0x2cc94d=[];for(let _0x5e0c5c=0x0;_0x5e0c5c<_0x59729b['length'];_0x5e0c5c++){const _0x3ab245=_0x59729b[_0x5e0c5c],_0x535c35=[];for(let _0x5e4ced=0x0;_0x5e4ced<_0x3ab245['length'];_0x5e4ced++){const _0x81b026=_0x559f7d(_0x3ab245[_0x5e4ced]);_0x81b026&&_0x535c35['push'](_0x81b026);}_0x535c35[_0x4ed0b9(0xf5)]>0x0&&_0x2cc94d['push'](_0x535c35);}return _0x2cc94d;}return _0x2d2660;};else throw new Error('请引入\x20mapv\x20库\x20');const Cesium=mars3d__namespace[_0x5c76e9(0x107)],BaseLayer=mars3d__namespace['layer'][_0x5c76e9(0xc4)];function _0x1fa8(_0x4ff14f,_0x12098d){const _0x1efd4f=_0x1efd();return _0x1fa8=function(_0x1fa85d,_0xc87241){_0x1fa85d=_0x1fa85d-0xb8;let _0x3e5011=_0x1efd4f[_0x1fa85d];return _0x3e5011;},_0x1fa8(_0x4ff14f,_0x12098d);}class MapVLayer extends BaseLayer{constructor(_0x3a072d,_0x2b2a86){const _0x591ae7={_0x3af1d5:0xcb},_0x2ae4ab=_0x5c76e9;super(_0x3a072d),this[_0x2ae4ab(0xdf)]=this[_0x2ae4ab(_0x591ae7._0x3af1d5)]['pointerEvents'],this[_0x2ae4ab(0xfb)]=_0x2b2a86||new mapv__namespace['DataSet'](_0x3a072d['data']),this[_0x2ae4ab(0xd3)]=null;}get['pointerEvents'](){const _0x4870c2=_0x5c76e9;return this[_0x4870c2(0xdf)];}set['pointerEvents'](_0x4b0f2c){const _0x56c7a9={_0x47856a:0xdf},_0x4978fb=_0x5c76e9;this[_0x4978fb(_0x56c7a9._0x47856a)]=_0x4b0f2c,this['canvas']&&(_0x4b0f2c?this['canvas']['style']['pointerEvents']=_0x4978fb(0xba):this['canvas']['style']['pointerEvents']=_0x4978fb(0xfc));}[_0x5c76e9(0xe3)](_0x71c9d9){const _0x438021={_0xd167f6:0xb8},_0x323f17=_0x5c76e9;_0x71c9d9?this['canvas']['style'][_0x323f17(_0x438021._0xd167f6)]=_0x323f17(0xbd):this['canvas']['style'][_0x323f17(0xb8)]='none';}['_mountedHook'](){const _0x23ee3a={_0x5e2bc6:0x106,_0x5cb67d:0x10b},_0x5d654c=_0x5c76e9;this['_map']['scene'][_0x5d654c(0xf3)]=this['options']['depthTest']??!![],this['_map']['scene']['mapvAutoHeight']=this['options']['clampToGround']??![],this[_0x5d654c(_0x23ee3a._0x5e2bc6)]['scene']['mapvFixedHeight']=this['options'][_0x5d654c(_0x23ee3a._0x5cb67d)]??0x0;}['_addedHook'](){const _0x2d4f10={_0x732ce2:0xcb,_0x4d7cea:0xc6},_0x3cc72b=_0x5c76e9;this['dataSet']&&(!this['dataSet']['_data']||this['dataSet']['_data'][_0x3cc72b(0xf5)]===0x0)&&(this[_0x3cc72b(0xfb)]['_data']=[]['concat'](this['dataSet']['_dataCache'])),this['_mapVRenderer']=new MapVRenderer(this['_map'],this['dataSet'],this[_0x3cc72b(_0x2d4f10._0x732ce2)],this),this[_0x3cc72b(0xfd)](),this['canvas']=this['_createCanvas'](),this[_0x3cc72b(_0x2d4f10._0x4d7cea)]=this[_0x3cc72b(0xc6)]['bind'](this),this['bindEvent'](),this['_reset']();}[_0x5c76e9(0x102)](){const _0x24423a={_0x2c4f62:0xd7,_0xaef6ef:0xf8,_0x130bfd:0xc0,_0x508d82:0xd3},_0x3a387f=_0x5c76e9;this[_0x3a387f(_0x24423a._0x2c4f62)](),this['_mapVRenderer']&&(this['_mapVRenderer'][_0x3a387f(_0x24423a._0xaef6ef)](),this['_mapVRenderer']=null),this['canvas']['parentElement'][_0x3a387f(_0x24423a._0x130bfd)](this[_0x3a387f(_0x24423a._0x508d82)]);}['initDevicePixelRatio'](){const _0x323d2c=_0x5c76e9;this[_0x323d2c(0xca)]=window['devicePixelRatio']||0x1;}['bindEvent'](){const _0x502d6a={_0xb0666:0x10f,_0x5d4e2a:0x106},_0x3b90c5=_0x5c76e9;var _0x5e5a07,_0x2cfab6,_0x5039be,_0xae5200;this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x3b90c5(0x10d)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x3b90c5(0xe6)],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['cameraMoveEnd'],this['_onMoveEndEvent'],this),(_0x5e5a07=this['options'])!==null&&_0x5e5a07!==void 0x0&&(_0x2cfab6=_0x5e5a07['methods'])!==null&&_0x2cfab6!==void 0x0&&_0x2cfab6[_0x3b90c5(_0x502d6a._0xb0666)]&&this['_map']['on'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this),(_0x5039be=this['options'])!==null&&_0x5039be!==void 0x0&&(_0xae5200=_0x5039be['methods'])!==null&&_0xae5200!==void 0x0&&_0xae5200[_0x3b90c5(0xf0)]&&this[_0x3b90c5(_0x502d6a._0x5d4e2a)]['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this);}['unbindEvent'](){const _0x4629b3={_0x1e80a4:0x10d,_0x567d3d:0xf4,_0x5dffae:0x10f,_0xaa9635:0x106,_0x8d494e:0xdc},_0x3a2f5f=_0x5c76e9;var _0x3e53fb,_0x3c2afc,_0x1c3dc3,_0x142a6c;this['_map']['off'](mars3d__namespace['EventType']['mouseDown'],this[_0x3a2f5f(_0x4629b3._0x1e80a4)],this),this['_map']['off'](mars3d__namespace['EventType']['cameraMoveStart'],this['_onMoveStartEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['cameraMoveEnd'],this['_onMoveEndEvent'],this),this[_0x3a2f5f(0x106)]['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),(_0x3e53fb=this['options'])!==null&&_0x3e53fb!==void 0x0&&(_0x3c2afc=_0x3e53fb['methods'])!==null&&_0x3c2afc!==void 0x0&&_0x3c2afc['click']&&this['_map'][_0x3a2f5f(_0x4629b3._0x567d3d)](mars3d__namespace['EventType'][_0x3a2f5f(_0x4629b3._0x5dffae)],this['_onMapClick'],this),(_0x1c3dc3=this['options'])!==null&&_0x1c3dc3!==void 0x0&&(_0x142a6c=_0x1c3dc3['methods'])!==null&&_0x142a6c!==void 0x0&&_0x142a6c['mousemove']&&this[_0x3a2f5f(_0x4629b3._0xaa9635)]['off'](mars3d__namespace[_0x3a2f5f(_0x4629b3._0x8d494e)][_0x3a2f5f(0xe2)],this['_onMapMouseMove'],this);}[_0x5c76e9(0x10d)](){const _0x47e820={_0x3422d7:0xd4},_0x3203b7=_0x5c76e9;this['_mapVRenderer']&&(this['_mapVRenderer'][_0x3203b7(_0x47e820._0x3422d7)](),this[_0x3203b7(0x106)]['off'](mars3d__namespace['EventType'][_0x3203b7(0xd8)],this['_reset'],this),this['_map']['on'](mars3d__namespace['EventType']['postRender'],this['_reset'],this));}[_0x5c76e9(0xd2)](){const _0x529bd5={_0x27f61b:0xd8},_0x3564ed=_0x5c76e9;this['_mapVRenderer']&&(this['_map'][_0x3564ed(0xf4)](mars3d__namespace['EventType'][_0x3564ed(_0x529bd5._0x27f61b)],this['_reset'],this),this[_0x3564ed(0x101)]['animatorMoveendEvent'](),this['_reset']());}['_setOptionsHook'](_0x1a14e8,_0x4ce8f8){this['_removedHook'](),this['_addedHook']();}['addData'](_0x4e167e){this['_mapVRenderer']&&this['_mapVRenderer']['addData'](_0x4e167e,this['options']);}['updateData'](_0x13704e){this['_mapVRenderer']&&this['_mapVRenderer']['updateData'](_0x13704e,this['options']);}[_0x5c76e9(0x10c)](){const _0x5149fa=_0x5c76e9;return this[_0x5149fa(0x101)]&&(this['dataSet']=this['_mapVRenderer']['getData']()),this['dataSet'];}['removeData'](_0x1f2a26){const _0x5d9667=_0x5c76e9;this[_0x5d9667(0x101)]&&this[_0x5d9667(0x101)]['removeData'](_0x1f2a26);}[_0x5c76e9(0xd5)](){this['_mapVRenderer']&&this['_mapVRenderer']['clearData']();}['_createCanvas'](){const _0x2ac356={_0x1adf1d:0xec,_0xca8d7a:0xec,_0x1c2523:0xf1,_0x21b7c2:0xbf,_0x5131d0:0xcb},_0x4412c7=_0x5c76e9,_0x33fd01=mars3d__namespace['DomUtil']['create']('canvas','mars3d-mapv',this['_map'][_0x4412c7(0xee)]);_0x33fd01['id']=this['id'],_0x33fd01['style']['position']='absolute',_0x33fd01[_0x4412c7(0xd1)]['top']='0px',_0x33fd01[_0x4412c7(0xd1)]['left']='0px',_0x33fd01['width']=parseInt(this['_map']['canvas']['width']),_0x33fd01['height']=parseInt(this[_0x4412c7(0x106)]['canvas']['height']),_0x33fd01['style'][_0x4412c7(_0x2ac356._0x1adf1d)]=this['_map']['canvas'][_0x4412c7(0xd1)][_0x4412c7(_0x2ac356._0xca8d7a)],_0x33fd01['style'][_0x4412c7(0xf7)]=this['_map'][_0x4412c7(0xd3)]['style']['height'],_0x33fd01[_0x4412c7(0xd1)][_0x4412c7(_0x2ac356._0x1c2523)]=this['_pointerEvents']?_0x4412c7(_0x2ac356._0x21b7c2):_0x4412c7(0xfc),_0x33fd01['style']['zIndex']=this['options'][_0x4412c7(0xda)]??0x9;if(this['options']['context']==='2d'){const _0x260597=this['devicePixelRatio'];_0x33fd01['getContext'](this[_0x4412c7(_0x2ac356._0x5131d0)]['context'])['scale'](_0x260597,_0x260597);}return _0x33fd01;}['_reset'](){this['resize'](),this['render']();}['draw'](){const _0x11c792={_0x3bce58:0xc5},_0x5165c3=_0x5c76e9;this[_0x5165c3(_0x11c792._0x3bce58)]();}['remove'](){const _0x594d24=_0x5c76e9;this['_mapVRenderer']&&(this['_mapVRenderer']['destroy'](),this['_mapVRenderer']=null),this['canvas']['parentElement'][_0x594d24(0xc0)](this[_0x594d24(0xd3)]);}['render'](){this['_mapVRenderer']['_canvasUpdate']();}['resize'](){const _0x2052e0={_0x535e7d:0xe8,_0x583997:0xec,_0x266f03:0xec,_0x442f37:0xd1},_0x5a7dd0=_0x5c76e9;if(this['canvas']){const _0x56177c=this['canvas'];_0x56177c['style']['position']=_0x5a7dd0(_0x2052e0._0x535e7d),_0x56177c['style']['top']='0px',_0x56177c['style'][_0x5a7dd0(0x109)]='0px',_0x56177c[_0x5a7dd0(_0x2052e0._0x583997)]=parseInt(this[_0x5a7dd0(0x106)]['canvas'][_0x5a7dd0(_0x2052e0._0x266f03)]),_0x56177c['height']=parseInt(this['_map']['canvas']['height']),_0x56177c[_0x5a7dd0(_0x2052e0._0x442f37)]['width']=this['_map']['canvas']['style']['width'],_0x56177c['style']['height']=this['_map']['canvas']['style']['height'];}}['getRectangle'](_0x2b6243){const _0x3c2085=_0x5c76e9;if(!this['dataSet']||!this['dataSet']['_data'])return;const _0xfede0f=mars3d__namespace['Util'][_0x3c2085(0x105)]({'type':'FeatureCollection','features':this['dataSet']['_data']});if(!_0xfede0f)return;return _0x2b6243!==null&&_0x2b6243!==void 0x0&&_0x2b6243['isFormat']?_0xfede0f:Cesium[_0x3c2085(0x115)][_0x3c2085(0xb9)](_0xfede0f['xmin'],_0xfede0f['ymin'],_0xfede0f['xmax'],_0xfede0f['ymax']);}['_onMapClick'](_0x1a7d90){const _0x33e17e=_0x5c76e9;this['_cache_event']=_0x1a7d90,this['_mapVRenderer']&&this[_0x33e17e(0x101)]['clickEvent'](_0x1a7d90['windowPosition'],_0x1a7d90);}[_0x5c76e9(0xea)](_0xed104a){const _0x347278=_0x5c76e9;this['_cache_event']=_0xed104a,this['_mapVRenderer']&&this[_0x347278(0x101)]['mousemoveEvent'](_0xed104a['windowPosition'],_0xed104a);}['on'](_0x5d5a7f,_0x1af991,_0x4bfd78){const _0x45d54b={_0x3890dc:0xcb,_0x3f9750:0x10f,_0x1dd693:0xf0,_0x5c4811:0x106,_0x37b063:0xea},_0x3e0b3b=_0x5c76e9;this['options']['methods']=this['options']['methods']||{};if(_0x5d5a7f===mars3d__namespace[_0x3e0b3b(0xdc)][_0x3e0b3b(0x10f)])this[_0x3e0b3b(_0x45d54b._0x3890dc)]['methods'][_0x3e0b3b(_0x45d54b._0x3f9750)]=_0x19fed0=>{const _0x24eb6d=_0x3e0b3b;_0x19fed0&&_0x1af991[_0x24eb6d(0xf9)](_0x4bfd78)({...this[_0x24eb6d(0xd0)],'layer':this,'data':_0x19fed0});},this[_0x3e0b3b(0x106)]['on'](mars3d__namespace[_0x3e0b3b(0xdc)][_0x3e0b3b(0x10f)],this['_onMapClick'],this);else _0x5d5a7f===mars3d__namespace['EventType']['mouseMove']&&(this['options']['methods'][_0x3e0b3b(_0x45d54b._0x1dd693)]=_0x4ab67f=>{_0x4ab67f&&_0x1af991['bind'](_0x4bfd78)({...this['_cache_event'],'layer':this,'data':_0x4ab67f});},this[_0x3e0b3b(_0x45d54b._0x5c4811)]['on'](mars3d__namespace['EventType'][_0x3e0b3b(0xe2)],this[_0x3e0b3b(_0x45d54b._0x37b063)],this));return this;}[_0x5c76e9(0xf4)](_0x1b3fad,_0x4508a8){const _0x5e4a19={_0x5f56f0:0x10f},_0x244c7b=_0x5c76e9;if(_0x1b3fad===_0x244c7b(_0x5e4a19._0x5f56f0)){var _0x35ae04;this[_0x244c7b(0x106)][_0x244c7b(0xf4)](_0x1b3fad,this['_onMapClick'],this),(_0x35ae04=this['options'][_0x244c7b(0x111)])!==null&&_0x35ae04!==void 0x0&&_0x35ae04['mousemove']&&delete this['options']['methods']['click'];}else{if(_0x1b3fad==='mouseMove'){var _0x58f5ab;this['_map'][_0x244c7b(0xf4)](_0x1b3fad,this['_onMapMouseMove'],this),(_0x58f5ab=this['options']['methods'])!==null&&_0x58f5ab!==void 0x0&&_0x58f5ab['mousemove']&&delete this['options'][_0x244c7b(0x111)]['mousemove'];}}return this;}}mars3d__namespace['LayerUtil']['register']('mapv',MapVLayer),mars3d__namespace[_0x5c76e9(0xde)]['MapVLayer']=MapVLayer,exports[_0x5c76e9(0xdd)]=MapVLayer,Object['keys'](mapv)['forEach'](function(_0x342b69){const _0xd763e2=_0x5c76e9;if(_0x342b69!==_0xd763e2(0xef)&&!exports['hasOwnProperty'](_0x342b69))Object['defineProperty'](exports,_0x342b69,{'enumerable':!![],'get':function(){return mapv[_0x342b69];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
