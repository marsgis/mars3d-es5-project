/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.5.14
 * 编译日期：2023-07-03 18:40:54
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';const _0x43d28a=_0x115e;(function(_0x3719bf,_0x16a7c6){const _0x171bc3={_0x596577:0x1dc,_0x2a02e2:0x212,_0x1680b0:0x205,_0x57b95e:0x1dd,_0x5db957:0x1f5,_0x23038e:0x1e8},_0x79f70e=_0x115e,_0x59419c=_0x3719bf();while(!![]){try{const _0x525daa=-parseInt(_0x79f70e(_0x171bc3._0x596577))/0x1+-parseInt(_0x79f70e(0x1ea))/0x2*(-parseInt(_0x79f70e(0x1c5))/0x3)+parseInt(_0x79f70e(_0x171bc3._0x2a02e2))/0x4*(-parseInt(_0x79f70e(0x1c8))/0x5)+-parseInt(_0x79f70e(0x218))/0x6*(-parseInt(_0x79f70e(0x1c1))/0x7)+parseInt(_0x79f70e(_0x171bc3._0x1680b0))/0x8*(parseInt(_0x79f70e(0x1ed))/0x9)+-parseInt(_0x79f70e(_0x171bc3._0x57b95e))/0xa*(-parseInt(_0x79f70e(_0x171bc3._0x5db957))/0xb)+parseInt(_0x79f70e(_0x171bc3._0x23038e))/0xc*(-parseInt(_0x79f70e(0x1da))/0xd);if(_0x525daa===_0x16a7c6)break;else _0x59419c['push'](_0x59419c['shift']());}catch(_0x4a114d){_0x59419c['push'](_0x59419c['shift']());}}}(_0x4dde,0xcac84));function _interopNamespace(_0x1eb10e){const _0x478fe3={_0x1cd4f6:0x200,_0x2ae1c9:0x1fb},_0x202ac9={_0x24ff86:0x210},_0x35643b=_0x115e;if(_0x1eb10e&&_0x1eb10e['__esModule'])return _0x1eb10e;var _0x431ca2=Object[_0x35643b(0x1d7)](null);return _0x1eb10e&&Object[_0x35643b(_0x478fe3._0x1cd4f6)](_0x1eb10e)[_0x35643b(0x1f9)](function(_0x204038){const _0x295d3e=_0x35643b;if(_0x204038!=='default'){var _0x3d4d08=Object['getOwnPropertyDescriptor'](_0x1eb10e,_0x204038);Object[_0x295d3e(_0x202ac9._0x24ff86)](_0x431ca2,_0x204038,_0x3d4d08['get']?_0x3d4d08:{'enumerable':!![],'get':function(){return _0x1eb10e[_0x204038];}});}}),_0x431ca2[_0x35643b(_0x478fe3._0x2ae1c9)]=_0x1eb10e,_0x431ca2;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'],baiduMapLayer=mapv__namespace?mapv__namespace['baiduMapLayer']:null,BaseLayer$1=baiduMapLayer?baiduMapLayer[_0x43d28a(0x21b)]:Function;class MapVRenderer extends BaseLayer$1{constructor(_0x246591,_0x5f0d37,_0x46e9b0,_0x26ba3b){const _0x163f49={_0x13f7cf:0x1ca},_0x24a3b6=_0x43d28a;super(_0x246591,_0x5f0d37,_0x46e9b0);if(!BaseLayer$1)return;this['map']=_0x246591,this['scene']=_0x246591[_0x24a3b6(_0x163f49._0x13f7cf)],this['dataSet']=_0x5f0d37,_0x46e9b0=_0x46e9b0||{},this['init'](_0x46e9b0),this['argCheck'](_0x46e9b0),this['initDevicePixelRatio'](),this['canvasLayer']=_0x26ba3b,this['stopAniamation']=!0x1,this['animation']=_0x46e9b0['animation'];}['initDevicePixelRatio'](){const _0x4fe46c={_0x5659c7:0x1c4},_0x31017d=_0x43d28a;this[_0x31017d(_0x4fe46c._0x5659c7)]=window['devicePixelRatio']||0x1;}['addAnimatorEvent'](){}['animatorMovestartEvent'](){const _0x6fac52={_0x22b6dc:0x1d1},_0x58d97d=_0x43d28a,_0x3129da=this['options']['animation'];this['isEnabledTime']()&&this['animator']&&(this['steps'][_0x58d97d(_0x6fac52._0x22b6dc)]=_0x3129da[_0x58d97d(0x20c)]['start']);}[_0x43d28a(0x1cc)](){this['isEnabledTime']()&&this['animator'];}['getContext'](){const _0x446d08={_0x528092:0x213},_0x2d4c00=_0x43d28a;return this['canvasLayer'][_0x2d4c00(0x21a)]['getContext'](this[_0x2d4c00(_0x446d08._0x528092)]);}['init'](_0x1fb2cd){const _0x4d2274={_0x484749:0x213,_0x4a225e:0x214},_0x3da823=_0x43d28a;this[_0x3da823(0x214)]=_0x1fb2cd,this['initDataRange'](_0x1fb2cd),this[_0x3da823(_0x4d2274._0x484749)]=this['options']['context']||'2d',this[_0x3da823(_0x4d2274._0x4a225e)]['zIndex']&&this['canvasLayer']&&this['canvasLayer']['setZIndex']&&this['canvasLayer']['setZIndex'](this[_0x3da823(0x214)][_0x3da823(0x1ce)]),this['initAnimator']();}['_canvasUpdate'](_0x56ea9c){const _0x1fa953={_0x124548:0x20e,_0x5b7c8b:0x213,_0x85724c:0x216,_0x1cebb3:0x20b,_0x3e058b:0x1cb,_0x533177:0x202,_0xfd1a39:0x214,_0x4aea0c:0x1eb,_0x4eb5ff:0x207},_0x161863={_0x3a1f5e:0x1ff},_0x565b01=_0x43d28a,_0x5f0d3a=this['scene'];if(this['canvasLayer']&&!this['stopAniamation']){const _0x384300=this['options'][_0x565b01(0x1d6)],_0x20fac4=this['getContext']();if(this[_0x565b01(_0x1fa953._0x124548)]()){if(void 0x0===_0x56ea9c)return void this['clear'](_0x20fac4);this[_0x565b01(_0x1fa953._0x5b7c8b)]==='2d'&&(_0x20fac4[_0x565b01(0x1cf)](),_0x20fac4['globalCompositeOperation']='destination-out',_0x20fac4['fillStyle']='rgba(0,\x200,\x200,\x20.1)',_0x20fac4[_0x565b01(_0x1fa953._0x85724c)](0x0,0x0,_0x20fac4[_0x565b01(0x21a)][_0x565b01(_0x1fa953._0x1cebb3)],_0x20fac4['canvas']['height']),_0x20fac4['restore']());}else this['clear'](_0x20fac4);if(this['context']==='2d')for(const _0x15ab5d in this['options']){_0x20fac4[_0x15ab5d]=this['options'][_0x15ab5d];}else _0x20fac4['clear'](_0x20fac4['COLOR_BUFFER_BIT']);const _0x599289={'transferCoordinate':function(_0x13d64a){const _0x89baa9=_0x565b01,_0x5a7d18=null;let _0x4759ff=_0x5f0d3a['mapvFixedHeight'];_0x5f0d3a['mapvAutoHeight']&&(_0x4759ff=_0x5f0d3a['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x13d64a[0x0],_0x13d64a[0x1])));const _0x859d=Cesium$1['Cartesian3']['fromDegrees'](_0x13d64a[0x0],_0x13d64a[0x1],_0x4759ff);if(!_0x859d)return _0x5a7d18;const _0x5b9037=_0x5f0d3a['cartesianToCanvasCoordinates'](_0x859d);if(!_0x5b9037)return _0x5a7d18;if(_0x5f0d3a['mapvDepthTest']&&_0x5f0d3a['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x340abe=new Cesium$1['EllipsoidalOccluder'](_0x5f0d3a[_0x89baa9(0x1e4)]['ellipsoid'],_0x5f0d3a['camera']['positionWC']),_0x170d94=_0x340abe[_0x89baa9(0x1e0)](_0x859d);if(!_0x170d94)return _0x5a7d18;}return[_0x5b9037['x'],_0x5b9037['y']];}};void 0x0!==_0x56ea9c&&(_0x599289['filter']=function(_0x12427e){const _0x38f774=_0x565b01,_0x1a13c2=_0x384300['trails']||0xa;return!!(_0x56ea9c&&_0x12427e[_0x38f774(_0x161863._0x3a1f5e)]>_0x56ea9c-_0x1a13c2&&_0x12427e['time']<_0x56ea9c);});const _0x217573=this['dataSet']['get'](_0x599289);this['processData'](_0x217573),this['options']['unit']==='m'&&this['options'][_0x565b01(_0x1fa953._0x3e058b)],this['options'][_0x565b01(_0x1fa953._0x533177)]=this[_0x565b01(_0x1fa953._0xfd1a39)]['size'];const _0x5a1ddf=_0x5f0d3a['cartesianToCanvasCoordinates'](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x5a1ddf)return;this['drawContext'](_0x20fac4,new mapv__namespace[(_0x565b01(_0x1fa953._0x4aea0c))](_0x217573),this['options'],_0x5a1ddf),this[_0x565b01(0x214)]['updateCallback']&&this[_0x565b01(_0x1fa953._0xfd1a39)][_0x565b01(_0x1fa953._0x4eb5ff)](_0x56ea9c);}}['updateData'](_0x2369c3,_0x33dba4){let _0x19b785=_0x2369c3;_0x19b785&&_0x19b785['get']&&(_0x19b785=_0x19b785['get']()),void 0x0!==_0x19b785&&this['dataSet']['set'](_0x19b785),super['update']({'options':_0x33dba4});}[_0x43d28a(0x1f7)](_0x13bbf3,_0x375974){let _0x11e1f4=_0x13bbf3;_0x13bbf3&&_0x13bbf3['get']&&(_0x11e1f4=_0x13bbf3['get']()),this['dataSet']['add'](_0x11e1f4),this['update']({'options':_0x375974});}[_0x43d28a(0x20a)](){return this['dataSet'];}['removeData'](_0x370c5d){const _0x2f2013=_0x43d28a;if(this['dataSet']){const _0x5c8a43=this['dataSet']['get']({'filter':function(_0x104ab4){return _0x370c5d==null||typeof _0x370c5d!=='function'||!_0x370c5d(_0x104ab4);}});this['dataSet'][_0x2f2013(0x204)](_0x5c8a43),this['update']({'options':null});}}[_0x43d28a(0x1ec)](){const _0x3bebad=_0x43d28a;this['dataSet']&&this['dataSet'][_0x3bebad(0x201)](),this[_0x3bebad(0x1d2)]({'options':null});}['draw'](){this['canvasLayer']['draw']();}['clear'](_0x342bbd){const _0x43c858=_0x43d28a;_0x342bbd&&_0x342bbd['clearRect']&&_0x342bbd['clearRect'](0x0,0x0,_0x342bbd['canvas']['width'],_0x342bbd[_0x43c858(0x21a)]['height']);}['destroy'](){const _0x39e91a={_0x5bdaf3:0x201,_0x246419:0x1e6,_0x4de85a:0x1ec,_0x2e6b98:0x1e2},_0x150f2a=_0x43d28a;this[_0x150f2a(_0x39e91a._0x5bdaf3)](this[_0x150f2a(_0x39e91a._0x246419)]()),this[_0x150f2a(_0x39e91a._0x4de85a)](),this['animator']&&this[_0x150f2a(_0x39e91a._0x2e6b98)]['stop'](),this['animator']=null,this['canvasLayer']=null;}}function _0x4dde(){const _0x12423a=['1149673wsgoIo','prototype','block','devicePixelRatio','474jvbZRK','_setOptionsHook','removeData','1810QDqOQj','initDevicePixelRatio','scene','size','animatorMoveendEvent','mouseMove','zIndex','save','resize','step','update','render','length','_pointerEvents','animation','create','0px','isFormat','35198865QzkStK','_showHook','1041727rlRvZF','10VZDPbv','dataSet','Rectangle','isPointVisible','_onMoveEndEvent','animator','off','globe','mapvAutoHeight','getContext','_map','12IAiPwE','methods','8546NHSoCz','DataSet','clearData','225LHnqNk','ymin','parentElement','click','postRender','display','getRectangle','windowPosition','16781930jNTMtK','style','addData','EventType','forEach','draw','default','请引入\x20mapv\x20库\x20','getExtentByGeoJSON','none','time','keys','clear','_size','cameraMoveEnd','set','436136aXTTQw','Point','updateCallback','__esModule','_mapVRenderer','getData','width','stepsRange','mapv','isEnabledTime','MultiPolygon','defineProperty','_cache_event','5104BDWTNa','context','options','removeChild','fillRect','top','54iGgLfc','pointerEvents','canvas','__proto__','cameraMoveStart','layer','unbindEvent','mousemove','_data','BaseLayer','Cesium'];_0x4dde=function(){return _0x12423a;};return _0x4dde();}if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace['DataSet'])mapv__namespace['DataSet'][_0x43d28a(0x1c2)]['transferCoordinate']=function(_0x3bb546,_0x550002,_0x4db6f0,_0x41e616){const _0x424d11={_0x305d06:0x206},_0x2ee368={_0x5ae011:0x1d4},_0x12a3b9=_0x43d28a;_0x41e616=_0x41e616||'_coordinates',_0x4db6f0=_0x4db6f0||'coordinates';for(let _0x4f0dbf=0x0;_0x4f0dbf<_0x3bb546['length'];_0x4f0dbf++){const _0x309f74=_0x3bb546[_0x4f0dbf]['geometry'],_0x11aa69=_0x309f74[_0x4db6f0];switch(_0x309f74['type']){case _0x12a3b9(_0x424d11._0x305d06):{const _0x253744=_0x550002(_0x11aa69);_0x253744?_0x309f74[_0x41e616]=_0x253744:_0x309f74[_0x41e616]=[-0x3e7,-0x3e7];}break;case'LineString':{const _0x1b52f6=[];for(let _0x1ec660=0x0;_0x1ec660<_0x11aa69['length'];_0x1ec660++){const _0x42051d=_0x550002(_0x11aa69[_0x1ec660]);_0x42051d&&_0x1b52f6['push'](_0x42051d);}_0x309f74[_0x41e616]=_0x1b52f6;}break;case'MultiLineString':case'Polygon':{const _0x40292c=_0xa6e97a(_0x11aa69);_0x309f74[_0x41e616]=_0x40292c;}break;case _0x12a3b9(0x20f):{const _0x3164d8=[];for(let _0x235d42=0x0;_0x235d42<_0x11aa69['length'];_0x235d42++){const _0x3dca77=_0xa6e97a(_0x11aa69[_0x235d42]);_0x3dca77['length']>0x0&&_0x3164d8['push'](_0x3dca77);}_0x309f74[_0x41e616]=_0x3164d8;}break;}}function _0xa6e97a(_0x43792c){const _0x4467ae=_0x12a3b9,_0x15e2c7=[];for(let _0x9dbd17=0x0;_0x9dbd17<_0x43792c['length'];_0x9dbd17++){const _0x4d8f34=_0x43792c[_0x9dbd17],_0x223d00=[];for(let _0xb430de=0x0;_0xb430de<_0x4d8f34[_0x4467ae(_0x2ee368._0x5ae011)];_0xb430de++){const _0x44f8f7=_0x550002(_0x4d8f34[_0xb430de]);_0x44f8f7&&_0x223d00['push'](_0x44f8f7);}_0x223d00['length']>0x0&&_0x15e2c7['push'](_0x223d00);}return _0x15e2c7;}return _0x3bb546;};else throw new Error(_0x43d28a(0x1fc));const Cesium=mars3d__namespace[_0x43d28a(0x1c0)],BaseLayer=mars3d__namespace[_0x43d28a(0x1bb)][_0x43d28a(0x1bf)];class MapVLayer extends BaseLayer{constructor(_0x92da01,_0x555eee){const _0x585700={_0x51fa33:0x1d5,_0x51f1d1:0x214,_0x5245b8:0x219},_0x18e9e2=_0x43d28a;super(_0x92da01),this[_0x18e9e2(_0x585700._0x51fa33)]=this[_0x18e9e2(_0x585700._0x51f1d1)][_0x18e9e2(_0x585700._0x5245b8)],this[_0x18e9e2(0x1de)]=_0x555eee||new mapv__namespace['DataSet'](_0x92da01['data']),this['canvas']=null;}get[_0x43d28a(0x219)](){return this['_pointerEvents'];}set[_0x43d28a(0x219)](_0x2d0917){const _0xc6d66a={_0x5025fc:0x21a},_0x2157b1=_0x43d28a;this['_pointerEvents']=_0x2d0917,this[_0x2157b1(0x21a)]&&(_0x2d0917?this['canvas'][_0x2157b1(0x1f6)][_0x2157b1(0x219)]='all':this[_0x2157b1(_0xc6d66a._0x5025fc)]['style']['pointerEvents']='none');}[_0x43d28a(0x1db)](_0x5ece96){const _0x383e25={_0x47cdd7:0x1f6,_0x516e14:0x1f2,_0x2f8726:0x1c3,_0x3f78ee:0x1fe},_0x5cc409=_0x43d28a;_0x5ece96?this[_0x5cc409(0x21a)][_0x5cc409(_0x383e25._0x47cdd7)][_0x5cc409(_0x383e25._0x516e14)]=_0x5cc409(_0x383e25._0x2f8726):this[_0x5cc409(0x21a)][_0x5cc409(0x1f6)]['display']=_0x5cc409(_0x383e25._0x3f78ee);}['_mountedHook'](){const _0x480fbe={_0x277e63:0x1e7,_0x6e6a04:0x214,_0x2391df:0x1ca,_0x5a05d6:0x1e5,_0x1bdfe8:0x214},_0x592297=_0x43d28a;this[_0x592297(_0x480fbe._0x277e63)]['scene']['mapvDepthTest']=this[_0x592297(_0x480fbe._0x6e6a04)]['depthTest']??!![],this['_map'][_0x592297(_0x480fbe._0x2391df)][_0x592297(_0x480fbe._0x5a05d6)]=this['options']['clampToGround']??![],this['_map']['scene']['mapvFixedHeight']=this[_0x592297(_0x480fbe._0x1bdfe8)]['fixedHeight']??0x0;}['_addedHook'](){const _0x42580a={_0x111ddb:0x1de,_0x50d266:0x1de,_0x3792da:0x1d3},_0x5e7448=_0x43d28a;this[_0x5e7448(_0x42580a._0x111ddb)]&&(!this['dataSet'][_0x5e7448(0x1be)]||this['dataSet']['_data'][_0x5e7448(0x1d4)]===0x0)&&(this[_0x5e7448(0x1de)][_0x5e7448(0x1be)]=[]['concat'](this[_0x5e7448(_0x42580a._0x50d266)]['_dataCache'])),this[_0x5e7448(0x209)]=new MapVRenderer(this['_map'],this[_0x5e7448(_0x42580a._0x50d266)],this['options'],this),this[_0x5e7448(0x1c9)](),this[_0x5e7448(0x21a)]=this['_createCanvas'](),this['render']=this[_0x5e7448(_0x42580a._0x3792da)]['bind'](this),this['bindEvent'](),this['_reset']();}['_removedHook'](){const _0xd84c14={_0x5eec1d:0x21a},_0x2c0389=_0x43d28a;this['unbindEvent'](),this[_0x2c0389(0x209)]&&(this['_mapVRenderer']['destroy'](),this['_mapVRenderer']=null),this[_0x2c0389(_0xd84c14._0x5eec1d)][_0x2c0389(0x1ef)][_0x2c0389(0x215)](this['canvas']);}[_0x43d28a(0x1c9)](){const _0x22e872={_0x3f107d:0x1c4,_0x52c14f:0x1c4},_0x4086e7=_0x43d28a;this[_0x4086e7(_0x22e872._0x3f107d)]=window[_0x4086e7(_0x22e872._0x52c14f)]||0x1;}['bindEvent'](){const _0x5bd929={_0x4e8e5b:0x21c},_0x489ce1=_0x43d28a;var _0x4784aa,_0x504c9f,_0x565b72,_0x20875e;this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMoveStartEvent'],this),this[_0x489ce1(0x1e7)]['on'](mars3d__namespace[_0x489ce1(0x1f8)][_0x489ce1(_0x5bd929._0x4e8e5b)],this['_onMoveStartEvent'],this),this[_0x489ce1(0x1e7)]['on'](mars3d__namespace['EventType']['cameraMoveEnd'],this['_onMoveEndEvent'],this),(_0x4784aa=this[_0x489ce1(0x214)])!==null&&_0x4784aa!==void 0x0&&(_0x504c9f=_0x4784aa['methods'])!==null&&_0x504c9f!==void 0x0&&_0x504c9f['click']&&this['_map']['on'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this),(_0x565b72=this['options'])!==null&&_0x565b72!==void 0x0&&(_0x20875e=_0x565b72['methods'])!==null&&_0x20875e!==void 0x0&&_0x20875e['mousemove']&&this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this);}[_0x43d28a(0x1bc)](){const _0x5a4115={_0x102e8f:0x1e3,_0x28ddd4:0x1cd},_0x3c755d=_0x43d28a;var _0x585650,_0x25a213,_0x962521,_0x1ec4cf;this[_0x3c755d(0x1e7)]['off'](mars3d__namespace['EventType']['mouseDown'],this['_onMoveStartEvent'],this),this['_map']['off'](mars3d__namespace[_0x3c755d(0x1f8)]['cameraMoveStart'],this['_onMoveStartEvent'],this),this['_map'][_0x3c755d(_0x5a4115._0x102e8f)](mars3d__namespace['EventType'][_0x3c755d(0x203)],this['_onMoveEndEvent'],this),this[_0x3c755d(0x1e7)]['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),(_0x585650=this['options'])!==null&&_0x585650!==void 0x0&&(_0x25a213=_0x585650['methods'])!==null&&_0x25a213!==void 0x0&&_0x25a213['click']&&this[_0x3c755d(0x1e7)]['off'](mars3d__namespace['EventType'][_0x3c755d(0x1f0)],this['_onMapClick'],this),(_0x962521=this['options'])!==null&&_0x962521!==void 0x0&&(_0x1ec4cf=_0x962521['methods'])!==null&&_0x1ec4cf!==void 0x0&&_0x1ec4cf['mousemove']&&this['_map']['off'](mars3d__namespace['EventType'][_0x3c755d(_0x5a4115._0x28ddd4)],this['_onMapMouseMove'],this);}['_onMoveStartEvent'](){const _0x182036=_0x43d28a;this['_mapVRenderer']&&(this['_mapVRenderer']['animatorMovestartEvent'](),this['_map']['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),this[_0x182036(0x1e7)]['on'](mars3d__namespace['EventType']['postRender'],this['_reset'],this));}[_0x43d28a(0x1e1)](){const _0x1413d5={_0x31528d:0x1e7,_0x3e7832:0x1cc},_0x48acf9=_0x43d28a;this['_mapVRenderer']&&(this[_0x48acf9(_0x1413d5._0x31528d)]['off'](mars3d__namespace['EventType'][_0x48acf9(0x1f1)],this['_reset'],this),this['_mapVRenderer'][_0x48acf9(_0x1413d5._0x3e7832)](),this['_reset']());}[_0x43d28a(0x1c6)](_0x25b4c2,_0x48cd8d){this['_removedHook'](),this['_addedHook']();}[_0x43d28a(0x1f7)](_0x1d2170){const _0x12955c={_0x1e59a2:0x209},_0x1b841f=_0x43d28a;this[_0x1b841f(_0x12955c._0x1e59a2)]&&this['_mapVRenderer']['addData'](_0x1d2170,this['options']);}['updateData'](_0x49c182){const _0x1eeca5={_0x13184a:0x214},_0x51177d=_0x43d28a;this['_mapVRenderer']&&this['_mapVRenderer']['updateData'](_0x49c182,this[_0x51177d(_0x1eeca5._0x13184a)]);}[_0x43d28a(0x20a)](){return this['_mapVRenderer']&&(this['dataSet']=this['_mapVRenderer']['getData']()),this['dataSet'];}[_0x43d28a(0x1c7)](_0x27dc6d){const _0xb37b81={_0x1f06e0:0x209},_0x559f60=_0x43d28a;this['_mapVRenderer']&&this[_0x559f60(_0xb37b81._0x1f06e0)]['removeData'](_0x27dc6d);}['removeAllData'](){const _0x3d5cda={_0x337a72:0x209},_0x47026c=_0x43d28a;this['_mapVRenderer']&&this[_0x47026c(_0x3d5cda._0x337a72)]['clearData']();}['_createCanvas'](){const _0x11914e={_0x2ca91b:0x1f6,_0x3aba7e:0x217,_0x15d295:0x1d8,_0x1c8745:0x1e7,_0x4fae80:0x21a,_0xcf7e64:0x1e7,_0x947bf9:0x213},_0x2f2b8f=_0x43d28a,_0x145610=mars3d__namespace['DomUtil'][_0x2f2b8f(0x1d7)]('canvas','mars3d-mapv',this['_map']['container']);_0x145610['id']=this['id'],_0x145610[_0x2f2b8f(0x1f6)]['position']='absolute',_0x145610[_0x2f2b8f(_0x11914e._0x2ca91b)][_0x2f2b8f(_0x11914e._0x3aba7e)]=_0x2f2b8f(_0x11914e._0x15d295),_0x145610['style']['left']=_0x2f2b8f(_0x11914e._0x15d295),_0x145610['width']=parseInt(this[_0x2f2b8f(_0x11914e._0x1c8745)][_0x2f2b8f(0x21a)]['width']),_0x145610['height']=parseInt(this[_0x2f2b8f(0x1e7)][_0x2f2b8f(_0x11914e._0x4fae80)]['height']),_0x145610['style']['width']=this[_0x2f2b8f(_0x11914e._0xcf7e64)]['canvas']['style']['width'],_0x145610['style']['height']=this['_map']['canvas']['style']['height'],_0x145610['style']['pointerEvents']=this['_pointerEvents']?'auto':'none',_0x145610['style']['zIndex']=this['options'][_0x2f2b8f(0x1ce)]??0x9;if(this['options'][_0x2f2b8f(_0x11914e._0x947bf9)]==='2d'){const _0x460fee=this['devicePixelRatio'];_0x145610[_0x2f2b8f(0x1e6)](this['options']['context'])['scale'](_0x460fee,_0x460fee);}return _0x145610;}['_reset'](){const _0x5c51f4={_0x490fbb:0x1d0,_0xf671a8:0x1d3},_0x219274=_0x43d28a;this[_0x219274(_0x5c51f4._0x490fbb)](),this[_0x219274(_0x5c51f4._0xf671a8)]();}[_0x43d28a(0x1fa)](){this['_reset']();}['remove'](){const _0x40df12={_0x53e521:0x209},_0x21d916=_0x43d28a;this[_0x21d916(_0x40df12._0x53e521)]&&(this['_mapVRenderer']['destroy'](),this['_mapVRenderer']=null),this['canvas']['parentElement']['removeChild'](this['canvas']);}[_0x43d28a(0x1d3)](){this['_mapVRenderer']['_canvasUpdate']();}['resize'](){const _0x488944={_0x1a89ee:0x20b,_0x28a195:0x21a},_0x28a3c8=_0x43d28a;if(this['canvas']){const _0xd2126a=this['canvas'];_0xd2126a['style']['position']='absolute',_0xd2126a['style']['top']='0px',_0xd2126a['style']['left']='0px',_0xd2126a['width']=parseInt(this['_map']['canvas'][_0x28a3c8(_0x488944._0x1a89ee)]),_0xd2126a['height']=parseInt(this['_map'][_0x28a3c8(_0x488944._0x28a195)]['height']),_0xd2126a['style'][_0x28a3c8(0x20b)]=this['_map']['canvas']['style'][_0x28a3c8(_0x488944._0x1a89ee)],_0xd2126a['style']['height']=this[_0x28a3c8(0x1e7)][_0x28a3c8(_0x488944._0x28a195)]['style']['height'];}}[_0x43d28a(0x1f3)](_0x27d436){const _0x59b918={_0x582571:0x1fd},_0x5bd890=_0x43d28a;if(!this['dataSet']||!this['dataSet']['_data'])return;const _0x424f2a=mars3d__namespace['Util'][_0x5bd890(_0x59b918._0x582571)]({'type':'FeatureCollection','features':this['dataSet']['_data']});if(!_0x424f2a)return;return _0x27d436!==null&&_0x27d436!==void 0x0&&_0x27d436[_0x5bd890(0x1d9)]?_0x424f2a:Cesium[_0x5bd890(0x1df)]['fromDegrees'](_0x424f2a['xmin'],_0x424f2a[_0x5bd890(0x1ee)],_0x424f2a['xmax'],_0x424f2a['ymax']);}['_onMapClick'](_0x5dfd34){const _0x46faba=_0x43d28a;this['_cache_event']=_0x5dfd34,this[_0x46faba(0x209)]&&this['_mapVRenderer']['clickEvent'](_0x5dfd34[_0x46faba(0x1f4)],_0x5dfd34);}['_onMapMouseMove'](_0x5556f5){const _0x410f65={_0x38bd12:0x1f4},_0xd6b83d=_0x43d28a;this['_cache_event']=_0x5556f5,this['_mapVRenderer']&&this['_mapVRenderer']['mousemoveEvent'](_0x5556f5[_0xd6b83d(_0x410f65._0x38bd12)],_0x5556f5);}['on'](_0x34ceb0,_0x487aff,_0x5084e5){const _0x3333f1={_0xbe7af1:0x214,_0x231dcb:0x1e7,_0x5db755:0x1bd,_0x5d519d:0x1f8},_0x1303e8=_0x43d28a;this['options']['methods']=this['options']['methods']||{};if(_0x34ceb0===mars3d__namespace['EventType']['click'])this[_0x1303e8(_0x3333f1._0xbe7af1)]['methods'][_0x1303e8(0x1f0)]=_0x55dc7a=>{_0x55dc7a&&_0x487aff['bind'](_0x5084e5)({...this['_cache_event'],'layer':this,'data':_0x55dc7a});},this[_0x1303e8(_0x3333f1._0x231dcb)]['on'](mars3d__namespace['EventType'][_0x1303e8(0x1f0)],this['_onMapClick'],this);else _0x34ceb0===mars3d__namespace[_0x1303e8(0x1f8)]['mouseMove']&&(this['options']['methods'][_0x1303e8(_0x3333f1._0x5db755)]=_0x3e632f=>{const _0x8503b4=_0x1303e8;_0x3e632f&&_0x487aff['bind'](_0x5084e5)({...this[_0x8503b4(0x211)],'layer':this,'data':_0x3e632f});},this['_map']['on'](mars3d__namespace[_0x1303e8(_0x3333f1._0x5d519d)]['mouseMove'],this['_onMapMouseMove'],this));return this;}['off'](_0x3e73de,_0x27c550){const _0x55eb5d={_0x4cce17:0x1f0,_0x2f6d96:0x1bd},_0x1724a2=_0x43d28a;if(_0x3e73de===_0x1724a2(0x1f0)){var _0x9049b3;this['_map'][_0x1724a2(0x1e3)](_0x3e73de,this['_onMapClick'],this),(_0x9049b3=this[_0x1724a2(0x214)][_0x1724a2(0x1e9)])!==null&&_0x9049b3!==void 0x0&&_0x9049b3['mousemove']&&delete this['options']['methods'][_0x1724a2(_0x55eb5d._0x4cce17)];}else{if(_0x3e73de==='mouseMove'){var _0x11c17b;this[_0x1724a2(0x1e7)]['off'](_0x3e73de,this['_onMapMouseMove'],this),(_0x11c17b=this['options']['methods'])!==null&&_0x11c17b!==void 0x0&&_0x11c17b[_0x1724a2(_0x55eb5d._0x2f6d96)]&&delete this['options']['methods']['mousemove'];}}return this;}}function _0x115e(_0x4b5165,_0x47fc5d){const _0x4ddebc=_0x4dde();return _0x115e=function(_0x115e5d,_0x53f1a4){_0x115e5d=_0x115e5d-0x1bb;let _0x4457a5=_0x4ddebc[_0x115e5d];return _0x4457a5;},_0x115e(_0x4b5165,_0x47fc5d);}mars3d__namespace['LayerUtil']['register']('mapv',MapVLayer),mars3d__namespace['layer']['MapVLayer']=MapVLayer,mars3d__namespace[_0x43d28a(0x20d)]=mapv__namespace,exports['MapVLayer']=MapVLayer,Object['keys'](mapv)[_0x43d28a(0x1f9)](function(_0x2a3010){const _0x2f3484=_0x43d28a;if(_0x2a3010!=='default'&&!exports['hasOwnProperty'](_0x2a3010))Object[_0x2f3484(0x210)](exports,_0x2a3010,{'enumerable':!![],'get':function(){return mapv[_0x2a3010];}});}),Object[_0x43d28a(0x210)](exports,_0x43d28a(0x208),{'value':!![]});
}));
