/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.5.5
 * 编译日期：2023-05-04 19:17:29
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';var _0x12aa50=_0x2a9c;(function(_0x4a81e1,_0x13b896){var _0x3c7424={_0x1cc0c1:0x136,_0x51d76b:0x16a,_0xa2c314:0x14e,_0x4f4d9e:0x159,_0x10e15d:0x10c,_0x29fc42:0x16b,_0x2ee80f:0x15f,_0x30d3c6:0x11d},_0x2b051d=_0x2a9c,_0x237d96=_0x4a81e1();while(!![]){try{var _0x476230=-parseInt(_0x2b051d(0x12a))/0x1*(-parseInt(_0x2b051d(_0x3c7424._0x1cc0c1))/0x2)+-parseInt(_0x2b051d(_0x3c7424._0x51d76b))/0x3+parseInt(_0x2b051d(_0x3c7424._0xa2c314))/0x4+parseInt(_0x2b051d(0x153))/0x5*(parseInt(_0x2b051d(_0x3c7424._0x4f4d9e))/0x6)+-parseInt(_0x2b051d(_0x3c7424._0x10e15d))/0x7*(parseInt(_0x2b051d(0x14c))/0x8)+-parseInt(_0x2b051d(_0x3c7424._0x29fc42))/0x9+-parseInt(_0x2b051d(_0x3c7424._0x2ee80f))/0xa*(parseInt(_0x2b051d(_0x3c7424._0x30d3c6))/0xb);if(_0x476230===_0x13b896)break;else _0x237d96['push'](_0x237d96['shift']());}catch(_0x46e9d7){_0x237d96['push'](_0x237d96['shift']());}}}(_0x39d2,0xd2eb6));function _interopNamespace(_0x2372e0){var _0x1d8822={_0x490afe:0x169,_0x3ad41a:0x10b,_0x9d188d:0x112},_0x813cab={_0x40bbe3:0x16c},_0x1bcfce=_0x2a9c;if(_0x2372e0&&_0x2372e0[_0x1bcfce(_0x1d8822._0x490afe)])return _0x2372e0;var _0x59c2d5=Object[_0x1bcfce(_0x1d8822._0x3ad41a)](null);return _0x2372e0&&Object[_0x1bcfce(_0x1d8822._0x9d188d)](_0x2372e0)[_0x1bcfce(0x141)](function(_0x269a7a){var _0x3e23b2=_0x1bcfce;if(_0x269a7a!=='default'){var _0xd374e8=Object[_0x3e23b2(_0x813cab._0x40bbe3)](_0x2372e0,_0x269a7a);Object['defineProperty'](_0x59c2d5,_0x269a7a,_0xd374e8['get']?_0xd374e8:{'enumerable':!![],'get':function(){return _0x2372e0[_0x269a7a];}});}}),_0x59c2d5[_0x1bcfce(0x164)]=_0x2372e0,_0x59c2d5;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);function ownKeys(_0x45ec67,_0x25e2dd){var _0x7a7096={_0x2a7750:0x12c},_0x272eb5=_0x2a9c,_0x13b5d3=Object['keys'](_0x45ec67);if(Object[_0x272eb5(0x13f)]){var _0x94282a=Object['getOwnPropertySymbols'](_0x45ec67);_0x25e2dd&&(_0x94282a=_0x94282a['filter'](function(_0x824aa5){return Object['getOwnPropertyDescriptor'](_0x45ec67,_0x824aa5)['enumerable'];})),_0x13b5d3['push'][_0x272eb5(_0x7a7096._0x2a7750)](_0x13b5d3,_0x94282a);}return _0x13b5d3;}function _objectSpread2(_0x1841dd){var _0x479aa7=_0x2a9c;for(var _0x34dd53=0x1;_0x34dd53<arguments['length'];_0x34dd53++){var _0x99db58=null!=arguments[_0x34dd53]?arguments[_0x34dd53]:{};_0x34dd53%0x2?ownKeys(Object(_0x99db58),!0x0)['forEach'](function(_0x58ef07){_defineProperty(_0x1841dd,_0x58ef07,_0x99db58[_0x58ef07]);}):Object[_0x479aa7(0x117)]?Object['defineProperties'](_0x1841dd,Object['getOwnPropertyDescriptors'](_0x99db58)):ownKeys(Object(_0x99db58))['forEach'](function(_0x41829c){var _0x19eb8a=_0x479aa7;Object[_0x19eb8a(0x107)](_0x1841dd,_0x41829c,Object['getOwnPropertyDescriptor'](_0x99db58,_0x41829c));});}return _0x1841dd;}function _classCallCheck(_0x12fb39,_0x8cbcb0){var _0x16d8d8=_0x2a9c;if(!(_0x12fb39 instanceof _0x8cbcb0))throw new TypeError(_0x16d8d8(0x167));}function _defineProperties(_0x723598,_0x5e271e){var _0x5adfb0={_0x1a08cf:0x107},_0x21c08b=_0x2a9c;for(var _0x180593=0x0;_0x180593<_0x5e271e['length'];_0x180593++){var _0x459d52=_0x5e271e[_0x180593];_0x459d52['enumerable']=_0x459d52['enumerable']||![],_0x459d52['configurable']=!![];if('value'in _0x459d52)_0x459d52['writable']=!![];Object[_0x21c08b(_0x5adfb0._0x1a08cf)](_0x723598,_0x459d52['key'],_0x459d52);}}function _createClass(_0x34a7cd,_0x10c797,_0x2b9cc5){if(_0x10c797)_defineProperties(_0x34a7cd['prototype'],_0x10c797);if(_0x2b9cc5)_defineProperties(_0x34a7cd,_0x2b9cc5);return Object['defineProperty'](_0x34a7cd,'prototype',{'writable':![]}),_0x34a7cd;}function _defineProperty(_0x3280ce,_0x5926fa,_0x3c3db3){return _0x5926fa in _0x3280ce?Object['defineProperty'](_0x3280ce,_0x5926fa,{'value':_0x3c3db3,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x3280ce[_0x5926fa]=_0x3c3db3,_0x3280ce;}function _inherits(_0x556080,_0x3e6333){var _0x56f610=_0x2a9c;if(typeof _0x3e6333!=='function'&&_0x3e6333!==null)throw new TypeError('Super\x20expression\x20must\x20either\x20be\x20null\x20or\x20a\x20function');_0x556080['prototype']=Object['create'](_0x3e6333&&_0x3e6333[_0x56f610(0x13d)],{'constructor':{'value':_0x556080,'writable':!![],'configurable':!![]}}),Object['defineProperty'](_0x556080,'prototype',{'writable':![]});if(_0x3e6333)_setPrototypeOf(_0x556080,_0x3e6333);}function _getPrototypeOf(_0x59d251){return _getPrototypeOf=Object['setPrototypeOf']?Object['getPrototypeOf']:function _0x168adf(_0x80e611){return _0x80e611['__proto__']||Object['getPrototypeOf'](_0x80e611);},_getPrototypeOf(_0x59d251);}function _setPrototypeOf(_0x5fa70f,_0x2ec0de){var _0x3547f3={_0x4c9440:0x110};return _setPrototypeOf=Object['setPrototypeOf']||function _0xf8ce92(_0x55a666,_0x43e3b2){var _0x136b85=_0x2a9c;return _0x55a666[_0x136b85(_0x3547f3._0x4c9440)]=_0x43e3b2,_0x55a666;},_setPrototypeOf(_0x5fa70f,_0x2ec0de);}function _isNativeReflectConstruct(){var _0x18e9dd={_0x4242a9:0x119},_0x4ca219=_0x2a9c;if(typeof Reflect==='undefined'||!Reflect['construct'])return![];if(Reflect[_0x4ca219(0x15b)][_0x4ca219(_0x18e9dd._0x4242a9)])return![];if(typeof Proxy==='function')return!![];try{return Boolean['prototype']['valueOf']['call'](Reflect[_0x4ca219(0x15b)](Boolean,[],function(){})),!![];}catch(_0x550204){return![];}}function _assertThisInitialized(_0x154850){var _0x5db662=_0x2a9c;if(_0x154850===void 0x0)throw new ReferenceError(_0x5db662(0x144));return _0x154850;}function _possibleConstructorReturn(_0xf72446,_0x51238a){var _0x467499=_0x2a9c;if(_0x51238a&&(typeof _0x51238a===_0x467499(0x168)||typeof _0x51238a==='function'))return _0x51238a;else{if(_0x51238a!==void 0x0)throw new TypeError(_0x467499(0x134));}return _assertThisInitialized(_0xf72446);}function _createSuper(_0x5839c3){var _0x13c726=_isNativeReflectConstruct();return function _0x3db0f2(){var _0xc04909=_getPrototypeOf(_0x5839c3),_0x669b81;if(_0x13c726){var _0x485bf3=_getPrototypeOf(this)['constructor'];_0x669b81=Reflect['construct'](_0xc04909,arguments,_0x485bf3);}else _0x669b81=_0xc04909['apply'](this,arguments);return _possibleConstructorReturn(this,_0x669b81);};}function _superPropBase(_0x351344,_0x4215fa){var _0x597ee3=_0x2a9c;while(!Object['prototype'][_0x597ee3(0x14f)]['call'](_0x351344,_0x4215fa)){_0x351344=_getPrototypeOf(_0x351344);if(_0x351344===null)break;}return _0x351344;}function _get(){var _0xdc7027={_0x3bfd78:0x12c},_0x439fa7=_0x2a9c;return typeof Reflect!=='undefined'&&Reflect['get']?_get=Reflect['get']:_get=function _0x592c4e(_0x26a8ab,_0x529c47,_0x2b7287){var _0x4b8ad1=_0x2a9c,_0x2e47a8=_superPropBase(_0x26a8ab,_0x529c47);if(!_0x2e47a8)return;var _0x307fdc=Object[_0x4b8ad1(0x16c)](_0x2e47a8,_0x529c47);if(_0x307fdc['get'])return _0x307fdc[_0x4b8ad1(0x109)]['call'](arguments['length']<0x3?_0x26a8ab:_0x2b7287);return _0x307fdc['value'];},_get[_0x439fa7(_0xdc7027._0x3bfd78)](this,arguments);}var Cesium$1=mars3d__namespace[_0x12aa50(0x165)],baiduMapLayer=mapv__namespace?mapv__namespace['baiduMapLayer']:null,BaseLayer$1=baiduMapLayer?baiduMapLayer[_0x12aa50(0x110)]:Function,MapVRenderer=function(_0x49c770){var _0x18a923={_0x517401:0x10a,_0x40aede:0x14a},_0x3fb4f2={_0x10cf87:0x10d},_0x3389a8={_0x5afdd4:0x162},_0x862b7f={_0x2002d9:0x152,_0x305408:0x116,_0x1a7076:0x154,_0x230cbf:0x122,_0x40ca5d:0x12e,_0x528b4a:0x103,_0x3aa4ef:0x115,_0x19d570:0x13a},_0x459f5d={_0x290016:0x15d,_0x2ffd02:0x142},_0x199e1d={_0x5d1109:0x16d},_0x5ac8dc={_0x13787e:0x137,_0x393980:0x158},_0xde3fee=_0x12aa50;_inherits(_0x496190,_0x49c770);var _0x8950e0=_createSuper(_0x496190);function _0x496190(_0x1a0035,_0xf66555,_0x1a992e,_0x376547){var _0x1ab143=_0x2a9c,_0x53b96d;_classCallCheck(this,_0x496190),_0x53b96d=_0x8950e0['call'](this,_0x1a0035,_0xf66555,_0x1a992e);if(!BaseLayer$1)return _possibleConstructorReturn(_0x53b96d);return _0x53b96d['map']=_0x1a0035,_0x53b96d['scene']=_0x1a0035['scene'],_0x53b96d['dataSet']=_0xf66555,_0x1a992e=_0x1a992e||{},_0x53b96d[_0x1ab143(_0x5ac8dc._0x13787e)](_0x1a992e),_0x53b96d[_0x1ab143(_0x5ac8dc._0x393980)](_0x1a992e),_0x53b96d['initDevicePixelRatio'](),_0x53b96d['canvasLayer']=_0x376547,_0x53b96d['stopAniamation']=!0x1,_0x53b96d['animation']=_0x1a992e['animation'],_0x53b96d;}return _createClass(_0x496190,[{'key':'initDevicePixelRatio','value':function _0x51c67a(){this['devicePixelRatio']=window['devicePixelRatio']||0x1;}},{'key':'addAnimatorEvent','value':function _0x4a3bd9(){}},{'key':'animatorMovestartEvent','value':function _0x3fbdad(){var _0x3032a8=_0x2a9c,_0x5e5330=this['options'][_0x3032a8(0x118)];this['isEnabledTime']()&&this['animator']&&(this['steps']['step']=_0x5e5330['stepsRange']['start']);}},{'key':'animatorMoveendEvent','value':function _0x2367c1(){var _0x27279b=_0x2a9c;this[_0x27279b(0x120)]()&&this['animator'];}},{'key':'getContext','value':function _0x57e516(){var _0x5934c4=_0x2a9c;return this[_0x5934c4(0x16d)]['canvas']['getContext'](this['context']);}},{'key':'init','value':function _0x4806ea(_0x5046ce){var _0x2e24a9=_0x2a9c;this['options']=_0x5046ce,this['initDataRange'](_0x5046ce),this[_0x2e24a9(0x103)]=this[_0x2e24a9(0x115)]['context']||'2d',this[_0x2e24a9(0x115)]['zIndex']&&this[_0x2e24a9(_0x199e1d._0x5d1109)]&&this['canvasLayer']['setZIndex']&&this['canvasLayer']['setZIndex'](this['options']['zIndex']),this['initAnimator']();}},{'key':'_canvasUpdate','value':function _0x49e179(_0x37e8d8){var _0x363120={_0x583612:0x150},_0xa1810c=_0x2a9c,_0x215c39=this[_0xa1810c(_0x862b7f._0x2002d9)];if(this['canvasLayer']&&!this['stopAniamation']){var _0x175a8a=this['options'][_0xa1810c(0x118)],_0x176cac=this['getContext']();if(this['isEnabledTime']()){if(void 0x0===_0x37e8d8)return void this['clear'](_0x176cac);this['context']==='2d'&&(_0x176cac[_0xa1810c(0x135)](),_0x176cac[_0xa1810c(_0x862b7f._0x305408)]='destination-out',_0x176cac[_0xa1810c(_0x862b7f._0x1a7076)]='rgba(0,\x200,\x200,\x20.1)',_0x176cac[_0xa1810c(_0x862b7f._0x230cbf)](0x0,0x0,_0x176cac['canvas']['width'],_0x176cac['canvas'][_0xa1810c(_0x862b7f._0x40ca5d)]),_0x176cac['restore']());}else this['clear'](_0x176cac);if(this[_0xa1810c(_0x862b7f._0x528b4a)]==='2d')for(var _0x111088 in this[_0xa1810c(0x115)]){_0x176cac[_0x111088]=this['options'][_0x111088];}else _0x176cac[_0xa1810c(0x10a)](_0x176cac['COLOR_BUFFER_BIT']);var _0x4c1aa1={'transferCoordinate':function _0x150c77(_0x12e6f3){var _0x378e17=_0xa1810c,_0x31d181=null,_0x1d7d88=_0x215c39['mapvFixedHeight'];_0x215c39['mapvAutoHeight']&&(_0x1d7d88=_0x215c39['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x12e6f3[0x0],_0x12e6f3[0x1])));var _0x37fa6a=Cesium$1['Cartesian3'][_0x378e17(0x11b)](_0x12e6f3[0x0],_0x12e6f3[0x1],_0x1d7d88);if(!_0x37fa6a)return _0x31d181;var _0x578834=_0x215c39['cartesianToCanvasCoordinates'](_0x37fa6a);if(!_0x578834)return _0x31d181;if(_0x215c39['mapvDepthTest']&&_0x215c39[_0x378e17(0x155)]===Cesium$1['SceneMode'][_0x378e17(0x138)]){var _0x5a4f27=new Cesium$1[(_0x378e17(_0x459f5d._0x290016))](_0x215c39['globe']['ellipsoid'],_0x215c39[_0x378e17(_0x459f5d._0x2ffd02)]['positionWC']),_0x2a05fd=_0x5a4f27['isPointVisible'](_0x37fa6a);if(!_0x2a05fd)return _0x31d181;}return[_0x578834['x'],_0x578834['y']];}};void 0x0!==_0x37e8d8&&(_0x4c1aa1['filter']=function(_0x5c0af4){var _0x41b235=_0xa1810c,_0x2ac478=_0x175a8a['trails']||0xa;return!!(_0x37e8d8&&_0x5c0af4[_0x41b235(_0x363120._0x583612)]>_0x37e8d8-_0x2ac478&&_0x5c0af4[_0x41b235(_0x363120._0x583612)]<_0x37e8d8);});var _0x40ec7b=this['dataSet']['get'](_0x4c1aa1);this['processData'](_0x40ec7b),this['options']['unit']==='m'&&this[_0xa1810c(0x115)]['size'],this[_0xa1810c(0x115)]['_size']=this[_0xa1810c(_0x862b7f._0x3aa4ef)]['size'];var _0x2026e3=_0x215c39['cartesianToCanvasCoordinates'](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x2026e3)return;this[_0xa1810c(0x125)](_0x176cac,new mapv__namespace['DataSet'](_0x40ec7b),this['options'],_0x2026e3),this[_0xa1810c(_0x862b7f._0x3aa4ef)]['updateCallback']&&this[_0xa1810c(0x115)][_0xa1810c(_0x862b7f._0x19d570)](_0x37e8d8);}}},{'key':'updateData','value':function _0xa3675f(_0x4b0580,_0x3adde8){var _0x4adad9=_0x2a9c,_0x211716=_0x4b0580;_0x211716&&_0x211716['get']&&(_0x211716=_0x211716['get']()),void 0x0!==_0x211716&&this['dataSet'][_0x4adad9(_0x3389a8._0x5afdd4)](_0x211716),_get(_getPrototypeOf(_0x496190['prototype']),'update',this)['call'](this,{'options':_0x3adde8});}},{'key':'addData','value':function _0x5f24ba(_0x416786,_0x2e52e7){var _0x57552a=_0x416786;_0x416786&&_0x416786['get']&&(_0x57552a=_0x416786['get']()),this['dataSet']['add'](_0x57552a),this['update']({'options':_0x2e52e7});}},{'key':'getData','value':function _0xad594(){return this['dataSet'];}},{'key':'removeData','value':function _0xeba329(_0x567382){var _0x38eba0=_0x2a9c;if(this['dataSet']){var _0x1525ba=this['dataSet'][_0x38eba0(0x109)]({'filter':function _0x526e00(_0x14b2f1){return _0x567382==null||typeof _0x567382!=='function'||!_0x567382(_0x14b2f1);}});this[_0x38eba0(_0x3fb4f2._0x10cf87)]['set'](_0x1525ba),this['update']({'options':null});}}},{'key':'clearData','value':function _0x113f44(){this['dataSet']&&this['dataSet']['clear'](),this['update']({'options':null});}},{'key':'draw','value':function _0x43b204(){this['canvasLayer']['draw']();}},{'key':_0xde3fee(0x10a),'value':function _0x10b13b(_0x1e97c4){var _0x5f2510=_0xde3fee;_0x1e97c4&&_0x1e97c4['clearRect']&&_0x1e97c4['clearRect'](0x0,0x0,_0x1e97c4['canvas']['width'],_0x1e97c4[_0x5f2510(0x160)]['height']);}},{'key':'destroy','value':function _0x388635(){var _0x28d335=_0xde3fee;this[_0x28d335(_0x18a923._0x517401)](this['getContext']()),this['clearData'](),this[_0x28d335(_0x18a923._0x40aede)]&&this['animator']['stop'](),this['animator']=null,this['canvasLayer']=null;}}]),_0x496190;}(BaseLayer$1);if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace[_0x12aa50(0x132)])mapv__namespace['DataSet']['prototype']['transferCoordinate']=function(_0x3ce432,_0xa3dfff,_0x28e935,_0x259e78){var _0x3a8e1e={_0x537069:0x146,_0x4732ab:0x12d},_0x25106d=_0x12aa50;_0x259e78=_0x259e78||'_coordinates',_0x28e935=_0x28e935||'coordinates';for(var _0x25449d=0x0;_0x25449d<_0x3ce432['length'];_0x25449d++){var _0x29c1ad=_0x3ce432[_0x25449d][_0x25106d(0x161)],_0x330bfd=_0x29c1ad[_0x28e935];switch(_0x29c1ad[_0x25106d(_0x3a8e1e._0x537069)]){case'Point':{var _0x1d8732=_0xa3dfff(_0x330bfd);_0x1d8732?_0x29c1ad[_0x259e78]=_0x1d8732:_0x29c1ad[_0x259e78]=[-0x3e7,-0x3e7];}break;case _0x25106d(_0x3a8e1e._0x4732ab):{var _0x46f4e4=[];for(var _0x8881bc=0x0;_0x8881bc<_0x330bfd['length'];_0x8881bc++){var _0x14cac0=_0xa3dfff(_0x330bfd[_0x8881bc]);_0x14cac0&&_0x46f4e4['push'](_0x14cac0);}_0x29c1ad[_0x259e78]=_0x46f4e4;}break;case'MultiLineString':case'Polygon':{var _0x5b723d=_0x2d6384(_0x330bfd);_0x29c1ad[_0x259e78]=_0x5b723d;}break;case'MultiPolygon':{var _0x4ed9e4=[];for(var _0x51342c=0x0;_0x51342c<_0x330bfd[_0x25106d(0x139)];_0x51342c++){var _0x558bd8=_0x2d6384(_0x330bfd[_0x51342c]);_0x558bd8['length']>0x0&&_0x4ed9e4[_0x25106d(0x143)](_0x558bd8);}_0x29c1ad[_0x259e78]=_0x4ed9e4;}break;}}function _0x2d6384(_0x42e15c){var _0x4a94d1=_0x25106d,_0x2765d0=[];for(var _0x4a5d6a=0x0;_0x4a5d6a<_0x42e15c['length'];_0x4a5d6a++){var _0x3aa264=_0x42e15c[_0x4a5d6a],_0x545ccd=[];for(var _0x25ee91=0x0;_0x25ee91<_0x3aa264['length'];_0x25ee91++){var _0x45f9b3=_0xa3dfff(_0x3aa264[_0x25ee91]);_0x45f9b3&&_0x545ccd['push'](_0x45f9b3);}_0x545ccd[_0x4a94d1(0x139)]>0x0&&_0x2765d0['push'](_0x545ccd);}return _0x2765d0;}return _0x3ce432;};else throw new Error('请引入\x20mapv\x20库\x20');function _0x39d2(){var _0x3e408c=['__proto__','layer','keys','top','destroy','options','globalCompositeOperation','getOwnPropertyDescriptors','animation','sham','draw','fromDegrees','style','147796GUJyJz','zIndex','clearData','isEnabledTime','_reset','fillRect','render','ymax','drawContext','_onMoveStartEvent','_onMapMouseMove','FeatureCollection','_data','10597NkuGbk','click','apply','LineString','height','xmax','parentElement','_onMapClick','DataSet','_addedHook','Derived\x20constructors\x20may\x20only\x20return\x20object\x20or\x20undefined','save','116FGBqoG','init','SCENE3D','length','updateCallback','mouseDown','_createCanvas','prototype','pointerEvents','getOwnPropertySymbols','mouseMove','forEach','camera','push','this\x20hasn\x27t\x20been\x20initialised\x20-\x20super()\x20hasn\x27t\x20been\x20called','_mapVRenderer','type','_removedHook','cameraMoveStart','postRender','animator','MapVLayer','16dqVCzO','getContext','2348392cCuaEB','hasOwnProperty','time','removeChild','scene','1185QvVJfe','fillStyle','mode','container','methods','argCheck','38652kZjVLf','_onMoveEndEvent','construct','clickEvent','EllipsoidalOccluder','getData','70CposGe','canvas','geometry','set','_map','default','Cesium','position','Cannot\x20call\x20a\x20class\x20as\x20a\x20function','object','__esModule','1039896KHSejl','7280820lyEKEi','getOwnPropertyDescriptor','canvasLayer','off','addData','EventType','context','mousemove','width','xmin','defineProperty','resize','get','clear','create','2152108SPXllQ','dataSet','_setOptionsHook','_cache_event'];_0x39d2=function(){return _0x3e408c;};return _0x39d2();}var Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x12aa50(0x111)]['BaseLayer'],divId=0x0,MapVLayer=function(_0x153624){var _0x4aec02={_0x30fe1d:0x13e,_0x452f76:0x147,_0x587510:0x10e,_0x2f3576:0x15e,_0x3eb6b0:0x13c,_0x177947:0x121,_0x57a3a4:0x16e},_0x153bbb={_0x2fc47b:0x12b,_0x4b7a98:0x104,_0xf08363:0x157,_0x148375:0x163,_0x150a33:0x16e,_0x2d6dd6:0x127,_0x388782:0x104},_0x34f88d={_0x161180:0x12b},_0x52ec9a={_0x3632b3:0x145},_0x2b3798={_0x12882b:0x15c},_0x3b1cdc={_0x209a41:0x128,_0x3fe210:0x106},_0x4f9020={_0x3fd02a:0x160,_0x75dbbd:0x11c,_0x488ab2:0x166,_0xeb51d4:0x113,_0x3f7695:0x163,_0x13f9c4:0x12e,_0x324bd2:0x12e},_0x1680b2={_0x5d3266:0x114,_0x591aaf:0x160,_0x1e386e:0x130},_0x185c2a={_0x1b31da:0x108,_0x1bca23:0x123},_0x5522ce={_0x260ad4:0x156,_0x4fa79b:0x11c,_0x1b2ed4:0x11c,_0x2dc965:0x160,_0x4f1ed9:0x160,_0x3cc4ab:0x11c},_0x456a6a={_0x4244f5:0x11f},_0x371fb2={_0x40c823:0x145},_0x5151ce={_0x215002:0x145},_0x3c3d3a={_0x22e44c:0x102,_0x50c18d:0x149,_0x29ce71:0x145},_0x4fb7fc={_0x1b5744:0x163},_0x16eaee={_0x5307fd:0x163,_0x1d1fd1:0x16e,_0x19adb5:0x102,_0x5b3559:0x115},_0x34c2a6={_0x21a988:0x148,_0x4783e1:0x163,_0x591a73:0x157,_0x361892:0x102},_0x42054={_0x2509bb:0x160},_0x4a08ef={_0x105339:0x10d,_0x56bd07:0x10d,_0x3b8f9e:0x10d,_0xaa0bf0:0x115,_0x53ec21:0x123},_0x9a4f55={_0x132154:0x115},_0x581b60={_0x384a15:0x11c},_0x54471f={_0x5f3f1a:0x115},_0x2c803a=_0x12aa50;_inherits(_0x2e78f0,_0x153624);var _0x5aeba7=_createSuper(_0x2e78f0);function _0x2e78f0(_0x8c3738,_0x25a7ec){var _0x707683=_0x2a9c,_0x5e0ae5;return _classCallCheck(this,_0x2e78f0),_0x5e0ae5=_0x5aeba7['call'](this,_0x8c3738),_0x5e0ae5['_pointerEvents']=_0x5e0ae5[_0x707683(_0x54471f._0x5f3f1a)][_0x707683(0x13e)],_0x5e0ae5['dataSet']=_0x25a7ec||new mapv__namespace['DataSet'](_0x8c3738['data']),_0x5e0ae5['canvas']=null,_0x5e0ae5;}return _createClass(_0x2e78f0,[{'key':_0x2c803a(_0x4aec02._0x30fe1d),'get':function _0x59b0b3(){return this['_pointerEvents'];},'set':function _0x4af323(_0x3ada6c){this['_pointerEvents']=_0x3ada6c,this['canvas']&&(_0x3ada6c?this['canvas']['style']['pointerEvents']='all':this['canvas']['style']['pointerEvents']='none');}},{'key':'_showHook','value':function _0x16cd2c(_0x101852){var _0x142183=_0x2c803a;_0x101852?this[_0x142183(0x160)][_0x142183(_0x581b60._0x384a15)]['display']='block':this['canvas']['style']['display']='none';}},{'key':'_mountedHook','value':function _0x43f226(){var _0x1795db=_0x2c803a,_0x34cdac,_0x16b849,_0x7b9c8;this['_map']['scene']['mapvDepthTest']=(_0x34cdac=this[_0x1795db(_0x9a4f55._0x132154)]['depthTest'])!==null&&_0x34cdac!==void 0x0?_0x34cdac:!![],this['_map'][_0x1795db(0x152)]['mapvAutoHeight']=(_0x16b849=this[_0x1795db(_0x9a4f55._0x132154)]['clampToGround'])!==null&&_0x16b849!==void 0x0?_0x16b849:![],this['_map']['scene']['mapvFixedHeight']=(_0x7b9c8=this['options']['fixedHeight'])!==null&&_0x7b9c8!==void 0x0?_0x7b9c8:0x0;}},{'key':'_addedHook','value':function _0x22cb7d(){var _0x5eba3e=_0x2c803a;this['dataSet']&&(!this[_0x5eba3e(_0x4a08ef._0x105339)][_0x5eba3e(0x129)]||this[_0x5eba3e(0x10d)][_0x5eba3e(0x129)]['length']===0x0)&&(this[_0x5eba3e(_0x4a08ef._0x56bd07)]['_data']=[]['concat'](this[_0x5eba3e(_0x4a08ef._0x105339)]['_dataCache'])),this['_mapVRenderer']=new MapVRenderer(this[_0x5eba3e(0x163)],this[_0x5eba3e(_0x4a08ef._0x3b8f9e)],this[_0x5eba3e(_0x4a08ef._0xaa0bf0)],this),this['initDevicePixelRatio'](),this['canvas']=this['_createCanvas'](),this[_0x5eba3e(_0x4a08ef._0x53ec21)]=this['render']['bind'](this),this['bindEvent'](),this[_0x5eba3e(0x121)]();}},{'key':_0x2c803a(_0x4aec02._0x452f76),'value':function _0xa5fa7(){var _0x175436=_0x2c803a;this['unbindEvent'](),this[_0x175436(0x145)]&&(this[_0x175436(0x145)]['destroy'](),this['_mapVRenderer']=null),this['canvas']['parentElement']['removeChild'](this[_0x175436(_0x42054._0x2509bb)]);}},{'key':'initDevicePixelRatio','value':function _0x512cd6(){this['devicePixelRatio']=window['devicePixelRatio']||0x1;}},{'key':'bindEvent','value':function _0x274c4f(){var _0x5769eb=_0x2c803a,_0x2fc8bc,_0x3a56ad,_0x3d3101,_0x3f7b61;this['_map']['on'](mars3d__namespace['EventType'][_0x5769eb(0x13b)],this['_onMoveStartEvent'],this),this[_0x5769eb(0x163)]['on'](mars3d__namespace[_0x5769eb(0x102)][_0x5769eb(_0x34c2a6._0x21a988)],this['_onMoveStartEvent'],this),this[_0x5769eb(_0x34c2a6._0x4783e1)]['on'](mars3d__namespace['EventType']['cameraMoveEnd'],this[_0x5769eb(0x15a)],this),(_0x2fc8bc=this['options'])!==null&&_0x2fc8bc!==void 0x0&&(_0x3a56ad=_0x2fc8bc['methods'])!==null&&_0x3a56ad!==void 0x0&&_0x3a56ad['click']&&this[_0x5769eb(_0x34c2a6._0x4783e1)]['on'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this),(_0x3d3101=this['options'])!==null&&_0x3d3101!==void 0x0&&(_0x3f7b61=_0x3d3101[_0x5769eb(_0x34c2a6._0x591a73)])!==null&&_0x3f7b61!==void 0x0&&_0x3f7b61['mousemove']&&this['_map']['on'](mars3d__namespace[_0x5769eb(_0x34c2a6._0x361892)]['mouseMove'],this['_onMapMouseMove'],this);}},{'key':'unbindEvent','value':function _0x32b811(){var _0x37e983=_0x2c803a,_0x18f6dd,_0x425284,_0x253835,_0x3fb129;this[_0x37e983(_0x16eaee._0x5307fd)]['off'](mars3d__namespace['EventType'][_0x37e983(0x13b)],this['_onMoveStartEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['cameraMoveStart'],this[_0x37e983(0x126)],this),this['_map'][_0x37e983(_0x16eaee._0x1d1fd1)](mars3d__namespace[_0x37e983(_0x16eaee._0x19adb5)]['cameraMoveEnd'],this['_onMoveEndEvent'],this),this['_map']['off'](mars3d__namespace['EventType'][_0x37e983(0x149)],this['_reset'],this),(_0x18f6dd=this[_0x37e983(_0x16eaee._0x5b3559)])!==null&&_0x18f6dd!==void 0x0&&(_0x425284=_0x18f6dd['methods'])!==null&&_0x425284!==void 0x0&&_0x425284['click']&&this['_map']['off'](mars3d__namespace['EventType']['click'],this[_0x37e983(0x131)],this),(_0x253835=this['options'])!==null&&_0x253835!==void 0x0&&(_0x3fb129=_0x253835['methods'])!==null&&_0x3fb129!==void 0x0&&_0x3fb129['mousemove']&&this['_map']['off'](mars3d__namespace[_0x37e983(_0x16eaee._0x19adb5)][_0x37e983(0x140)],this['_onMapMouseMove'],this);}},{'key':'_onMoveStartEvent','value':function _0xa08ed2(){var _0x18b059=_0x2c803a;this[_0x18b059(0x145)]&&(this['_mapVRenderer']['animatorMovestartEvent'](),this['_map']['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),this[_0x18b059(_0x4fb7fc._0x1b5744)]['on'](mars3d__namespace['EventType'][_0x18b059(0x149)],this['_reset'],this));}},{'key':_0x2c803a(0x15a),'value':function _0x2a20a2(){var _0x73ac3=_0x2c803a;this['_mapVRenderer']&&(this['_map']['off'](mars3d__namespace[_0x73ac3(_0x3c3d3a._0x22e44c)][_0x73ac3(_0x3c3d3a._0x50c18d)],this['_reset'],this),this[_0x73ac3(_0x3c3d3a._0x29ce71)]['animatorMoveendEvent'](),this['_reset']());}},{'key':_0x2c803a(_0x4aec02._0x587510),'value':function _0xac2a22(_0x27c7ba,_0x3d4706){var _0x479b63=_0x2c803a;this['_removedHook'](),this[_0x479b63(0x133)]();}},{'key':'addData','value':function _0x362b1d(_0x52a169){var _0x231b8d=_0x2c803a;this[_0x231b8d(0x145)]&&this[_0x231b8d(_0x5151ce._0x215002)][_0x231b8d(0x16f)](_0x52a169,this['options']);}},{'key':'updateData','value':function _0x4b4d91(_0x3c95ec){var _0x2f96b5=_0x2c803a;this[_0x2f96b5(_0x371fb2._0x40c823)]&&this['_mapVRenderer']['updateData'](_0x3c95ec,this[_0x2f96b5(0x115)]);}},{'key':_0x2c803a(_0x4aec02._0x2f3576),'value':function _0x1ccc8f(){var _0x28c94c=_0x2c803a;return this['_mapVRenderer']&&(this[_0x28c94c(0x10d)]=this['_mapVRenderer']['getData']()),this[_0x28c94c(0x10d)];}},{'key':'removeData','value':function _0x1414cf(_0x563eed){var _0x41643b=_0x2c803a;this[_0x41643b(0x145)]&&this['_mapVRenderer']['removeData'](_0x563eed);}},{'key':'removeAllData','value':function _0x22bbfa(){var _0x137eda=_0x2c803a;this['_mapVRenderer']&&this[_0x137eda(0x145)][_0x137eda(_0x456a6a._0x4244f5)]();}},{'key':_0x2c803a(_0x4aec02._0x3eb6b0),'value':function _0x833e97(){var _0x4d2e95=_0x2c803a,_0x103cb4=mars3d__namespace['DomUtil'][_0x4d2e95(0x10b)]('canvas','mars3d-mapv',this[_0x4d2e95(0x163)][_0x4d2e95(_0x5522ce._0x260ad4)]);_0x103cb4['id']=this[_0x4d2e95(0x115)]['layerid']||'mapv'+divId++,_0x103cb4[_0x4d2e95(_0x5522ce._0x4fa79b)]['position']='absolute',_0x103cb4['style']['top']='0px',_0x103cb4[_0x4d2e95(_0x5522ce._0x1b2ed4)]['left']='0px',_0x103cb4['style']['pointerEvents']=this['_pointerEvents']?'auto':'none',_0x103cb4['style'][_0x4d2e95(0x11e)]=this['options'][_0x4d2e95(0x11e)]||0x64,_0x103cb4['width']=parseInt(this[_0x4d2e95(0x163)][_0x4d2e95(_0x5522ce._0x2dc965)][_0x4d2e95(0x105)]),_0x103cb4['height']=parseInt(this[_0x4d2e95(0x163)]['canvas']['height']),_0x103cb4[_0x4d2e95(0x11c)]['width']=this['_map'][_0x4d2e95(_0x5522ce._0x4f1ed9)]['style']['width'],_0x103cb4['style'][_0x4d2e95(0x12e)]=this['_map']['canvas'][_0x4d2e95(_0x5522ce._0x3cc4ab)]['height'];if(this['options'][_0x4d2e95(0x103)]==='2d'){var _0x30c81c=this['devicePixelRatio'];_0x103cb4[_0x4d2e95(0x14d)](this['options']['context'])['scale'](_0x30c81c,_0x30c81c);}return _0x103cb4;}},{'key':_0x2c803a(_0x4aec02._0x177947),'value':function _0x1c73a4(){var _0x151d51=_0x2c803a;this[_0x151d51(_0x185c2a._0x1b31da)](),this[_0x151d51(_0x185c2a._0x1bca23)]();}},{'key':_0x2c803a(0x11a),'value':function _0x477696(){this['_reset']();}},{'key':'remove','value':function _0x40c6c5(){var _0x583850=_0x2c803a;this['_mapVRenderer']&&(this['_mapVRenderer'][_0x583850(_0x1680b2._0x5d3266)](),this['_mapVRenderer']=null),this[_0x583850(_0x1680b2._0x591aaf)][_0x583850(_0x1680b2._0x1e386e)][_0x583850(0x151)](this[_0x583850(0x160)]);}},{'key':'render','value':function _0xf4506a(){this['_mapVRenderer']['_canvasUpdate']();}},{'key':'resize','value':function _0x195626(){var _0x329815=_0x2c803a;if(this['canvas']){var _0xa5acbf=this[_0x329815(_0x4f9020._0x3fd02a)];_0xa5acbf[_0x329815(_0x4f9020._0x75dbbd)][_0x329815(_0x4f9020._0x488ab2)]='absolute',_0xa5acbf['style'][_0x329815(_0x4f9020._0xeb51d4)]='0px',_0xa5acbf['style']['left']='0px',_0xa5acbf['width']=parseInt(this[_0x329815(_0x4f9020._0x3f7695)]['canvas'][_0x329815(0x105)]),_0xa5acbf['height']=parseInt(this['_map']['canvas'][_0x329815(_0x4f9020._0x13f9c4)]),_0xa5acbf[_0x329815(0x11c)]['width']=this['_map'][_0x329815(0x160)][_0x329815(_0x4f9020._0x75dbbd)]['width'],_0xa5acbf['style'][_0x329815(0x12e)]=this['_map']['canvas'][_0x329815(0x11c)][_0x329815(_0x4f9020._0x324bd2)];}}},{'key':'getRectangle','value':function _0x58b470(_0x19c13b){var _0x341cc8=_0x2c803a;if(!this['dataSet']||!this[_0x341cc8(0x10d)]['_data'])return;var _0x39850b=mars3d__namespace['Util']['getExtentByGeoJSON']({'type':_0x341cc8(_0x3b1cdc._0x209a41),'features':this['dataSet']['_data']});if(!_0x39850b)return;return _0x19c13b!==null&&_0x19c13b!==void 0x0&&_0x19c13b['isFormat']?_0x39850b:Cesium['Rectangle']['fromDegrees'](_0x39850b[_0x341cc8(_0x3b1cdc._0x3fe210)],_0x39850b['ymin'],_0x39850b[_0x341cc8(0x12f)],_0x39850b[_0x341cc8(0x124)]);}},{'key':'_onMapClick','value':function _0x3de64e(_0x1b7b53){var _0xcf414d=_0x2c803a;this[_0xcf414d(0x10f)]=_0x1b7b53,this['_mapVRenderer']&&this[_0xcf414d(0x145)][_0xcf414d(_0x2b3798._0x12882b)](_0x1b7b53['windowPosition'],_0x1b7b53);}},{'key':'_onMapMouseMove','value':function _0x5a7804(_0x928ca0){var _0x298daa=_0x2c803a;this['_cache_event']=_0x928ca0,this[_0x298daa(_0x52ec9a._0x3632b3)]&&this['_mapVRenderer']['mousemoveEvent'](_0x928ca0['windowPosition'],_0x928ca0);}},{'key':'on','value':function _0x44e73b(_0x256dbd,_0x33ba4a,_0x45d377){var _0xd2ff97={_0xe59006:0x10f},_0x4cfe46=_0x2c803a,_0x4e9934=this;this['options']['methods']=this['options']['methods']||{};if(_0x256dbd===mars3d__namespace['EventType']['click'])this[_0x4cfe46(0x115)][_0x4cfe46(0x157)]['click']=function(_0x4fb960){var _0x4a9313=_0x4cfe46;_0x4fb960&&_0x33ba4a['bind'](_0x45d377)(_objectSpread2(_objectSpread2({},_0x4e9934[_0x4a9313(_0xd2ff97._0xe59006)]),{},{'layer':_0x4e9934,'data':_0x4fb960}));},this['_map']['on'](mars3d__namespace['EventType'][_0x4cfe46(_0x34f88d._0x161180)],this[_0x4cfe46(0x131)],this);else _0x256dbd===mars3d__namespace['EventType'][_0x4cfe46(0x140)]&&(this['options']['methods']['mousemove']=function(_0x3efd4){var _0x56a6e0=_0x4cfe46;_0x3efd4&&_0x33ba4a['bind'](_0x45d377)(_objectSpread2(_objectSpread2({},_0x4e9934[_0x56a6e0(0x10f)]),{},{'layer':_0x4e9934,'data':_0x3efd4}));},this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x4cfe46(0x127)],this));return this;}},{'key':_0x2c803a(_0x4aec02._0x57a3a4),'value':function _0x1943da(_0x3976c0,_0x3b1e96){var _0x1d3469=_0x2c803a;if(_0x3976c0===_0x1d3469(_0x153bbb._0x2fc47b)){var _0x5a261d;this['_map'][_0x1d3469(0x16e)](_0x3976c0,this['_onMapClick'],this),(_0x5a261d=this['options']['methods'])!==null&&_0x5a261d!==void 0x0&&_0x5a261d[_0x1d3469(_0x153bbb._0x4b7a98)]&&delete this['options'][_0x1d3469(_0x153bbb._0xf08363)]['click'];}else{if(_0x3976c0==='mouseMove'){var _0x4f797b;this[_0x1d3469(_0x153bbb._0x148375)][_0x1d3469(_0x153bbb._0x150a33)](_0x3976c0,this[_0x1d3469(_0x153bbb._0x2d6dd6)],this),(_0x4f797b=this['options']['methods'])!==null&&_0x4f797b!==void 0x0&&_0x4f797b[_0x1d3469(_0x153bbb._0x388782)]&&delete this['options']['methods']['mousemove'];}}return this;}}]),_0x2e78f0;}(BaseLayer);function _0x2a9c(_0x3dce2d,_0x3119c2){var _0x39d2b8=_0x39d2();return _0x2a9c=function(_0x2a9cb5,_0x131247){_0x2a9cb5=_0x2a9cb5-0x102;var _0x15ddcc=_0x39d2b8[_0x2a9cb5];return _0x15ddcc;},_0x2a9c(_0x3dce2d,_0x3119c2);}mars3d__namespace['LayerUtil']['register']('mapv',MapVLayer),mars3d__namespace['layer'][_0x12aa50(0x14b)]=MapVLayer,exports['MapVLayer']=MapVLayer,Object[_0x12aa50(0x112)](mapv)['forEach'](function(_0x5db9ec){var _0x521b8c=_0x12aa50;if(_0x5db9ec!=='default'&&!exports[_0x521b8c(0x14f)](_0x5db9ec))Object['defineProperty'](exports,_0x5db9ec,{'enumerable':!![],'get':function(){return mapv[_0x5db9ec];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
