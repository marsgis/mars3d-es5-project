/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.5.13
 * 编译日期：2023-06-26 22:27:12
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';const _0x311b72=_0x1fab;(function(_0x13f703,_0x233132){const _0x9644f8={_0x343973:0x1d0,_0x4dca77:0x1de,_0xfba911:0x1b3,_0x43cc76:0x1cf,_0x11ec1a:0x1c9,_0x3d6f0f:0x1e4,_0x537612:0x186,_0x39ea9d:0x18c,_0x20cb11:0x1a8},_0x5eae6e=_0x1fab,_0x497014=_0x13f703();while(!![]){try{const _0x4f6bf5=parseInt(_0x5eae6e(_0x9644f8._0x343973))/0x1*(-parseInt(_0x5eae6e(_0x9644f8._0x4dca77))/0x2)+-parseInt(_0x5eae6e(_0x9644f8._0xfba911))/0x3*(parseInt(_0x5eae6e(0x199))/0x4)+parseInt(_0x5eae6e(_0x9644f8._0x43cc76))/0x5*(-parseInt(_0x5eae6e(_0x9644f8._0x11ec1a))/0x6)+parseInt(_0x5eae6e(_0x9644f8._0x3d6f0f))/0x7+-parseInt(_0x5eae6e(_0x9644f8._0x537612))/0x8*(parseInt(_0x5eae6e(_0x9644f8._0x39ea9d))/0x9)+parseInt(_0x5eae6e(_0x9644f8._0x20cb11))/0xa+parseInt(_0x5eae6e(0x197))/0xb;if(_0x4f6bf5===_0x233132)break;else _0x497014['push'](_0x497014['shift']());}catch(_0x4cbfaf){_0x497014['push'](_0x497014['shift']());}}}(_0x1a48,0x221ae));function _interopNamespace(_0x36e66f){const _0x28fab7=_0x1fab;if(_0x36e66f&&_0x36e66f[_0x28fab7(0x1e3)])return _0x36e66f;var _0x15660a=Object['create'](null);return _0x36e66f&&Object['keys'](_0x36e66f)['forEach'](function(_0x5ead53){const _0xe1ec97=_0x28fab7;if(_0x5ead53!=='default'){var _0x1537e0=Object[_0xe1ec97(0x1d3)](_0x36e66f,_0x5ead53);Object[_0xe1ec97(0x19e)](_0x15660a,_0x5ead53,_0x1537e0['get']?_0x1537e0:{'enumerable':!![],'get':function(){return _0x36e66f[_0x5ead53];}});}}),_0x15660a['default']=_0x36e66f,_0x15660a;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x311b72(0x18b)],baiduMapLayer=mapv__namespace?mapv__namespace[_0x311b72(0x1c6)]:null,BaseLayer$1=baiduMapLayer?baiduMapLayer[_0x311b72(0x1dc)]:Function;class MapVRenderer extends BaseLayer$1{constructor(_0x51818d,_0x46af7c,_0x2c3122,_0x6eb70d){const _0x944881={_0x139eb7:0x1d1,_0x40cd46:0x18d},_0x3c1026=_0x311b72;super(_0x51818d,_0x46af7c,_0x2c3122);if(!BaseLayer$1)return;this[_0x3c1026(_0x944881._0x139eb7)]=_0x51818d,this[_0x3c1026(_0x944881._0x40cd46)]=_0x51818d['scene'],this['dataSet']=_0x46af7c,_0x2c3122=_0x2c3122||{},this[_0x3c1026(0x183)](_0x2c3122),this['argCheck'](_0x2c3122),this['initDevicePixelRatio'](),this['canvasLayer']=_0x6eb70d,this[_0x3c1026(0x1bf)]=!0x1,this['animation']=_0x2c3122['animation'];}['initDevicePixelRatio'](){this['devicePixelRatio']=window['devicePixelRatio']||0x1;}['addAnimatorEvent'](){}['animatorMovestartEvent'](){const _0x4c2838={_0x7450b6:0x1a2,_0x5e22e3:0x1d5,_0x1a6d2a:0x1d2},_0xb332f0=_0x311b72,_0x3a88da=this['options'][_0xb332f0(0x1ad)];this['isEnabledTime']()&&this[_0xb332f0(_0x4c2838._0x7450b6)]&&(this[_0xb332f0(_0x4c2838._0x5e22e3)][_0xb332f0(_0x4c2838._0x1a6d2a)]=_0x3a88da['stepsRange']['start']);}['animatorMoveendEvent'](){const _0x53c298={_0x2984d1:0x1a2},_0x2dec71=_0x311b72;this['isEnabledTime']()&&this[_0x2dec71(_0x53c298._0x2984d1)];}[_0x311b72(0x1c8)](){const _0x3d0ca6=_0x311b72;return this['canvasLayer']['canvas'][_0x3d0ca6(0x1c8)](this['context']);}['init'](_0x34bda7){const _0x1f2ffd=_0x311b72;this['options']=_0x34bda7,this['initDataRange'](_0x34bda7),this['context']=this['options']['context']||'2d',this['options'][_0x1f2ffd(0x1d9)]&&this['canvasLayer']&&this['canvasLayer']['setZIndex']&&this['canvasLayer'][_0x1f2ffd(0x1a7)](this[_0x1f2ffd(0x1a1)]['zIndex']),this['initAnimator']();}[_0x311b72(0x1ed)](_0x46988a){const _0x25034d={_0x1b46bc:0x198,_0x2f9a29:0x1bf,_0x25db8a:0x1e9,_0x461c4c:0x1b6,_0x1d8bb2:0x1b4,_0xea42f2:0x1d7,_0x2f4e72:0x1e1,_0x276c59:0x1a1,_0x48a5fe:0x1a1},_0x904612={_0x18d85a:0x19b,_0x58174d:0x1c2},_0x54b208={_0x3e7fd2:0x1be,_0x5b933f:0x1c3},_0x49940b=_0x311b72,_0x501582=this['scene'];if(this[_0x49940b(_0x25034d._0x1b46bc)]&&!this[_0x49940b(_0x25034d._0x2f9a29)]){const _0x2ddaca=this['options']['animation'],_0x22b012=this['getContext']();if(this[_0x49940b(0x1df)]()){if(void 0x0===_0x46988a)return void this[_0x49940b(_0x25034d._0x25db8a)](_0x22b012);this['context']==='2d'&&(_0x22b012['save'](),_0x22b012[_0x49940b(0x1cc)]='destination-out',_0x22b012['fillStyle']='rgba(0,\x200,\x200,\x20.1)',_0x22b012['fillRect'](0x0,0x0,_0x22b012[_0x49940b(0x1b4)][_0x49940b(_0x25034d._0x461c4c)],_0x22b012[_0x49940b(_0x25034d._0x1d8bb2)]['height']),_0x22b012['restore']());}else this['clear'](_0x22b012);if(this['context']==='2d')for(const _0x1ec03a in this['options']){_0x22b012[_0x1ec03a]=this['options'][_0x1ec03a];}else _0x22b012['clear'](_0x22b012['COLOR_BUFFER_BIT']);const _0x335b86={'transferCoordinate':function(_0xf4713c){const _0x5548c7=_0x49940b,_0xb2380e=null;let _0xfca780=_0x501582['mapvFixedHeight'];_0x501582['mapvAutoHeight']&&(_0xfca780=_0x501582['globe']['getHeight'](Cesium$1[_0x5548c7(_0x54b208._0x3e7fd2)][_0x5548c7(0x1da)](_0xf4713c[0x0],_0xf4713c[0x1])));const _0x25c0a1=Cesium$1['Cartesian3'][_0x5548c7(0x1da)](_0xf4713c[0x0],_0xf4713c[0x1],_0xfca780);if(!_0x25c0a1)return _0xb2380e;const _0x5ac5f1=_0x501582['cartesianToCanvasCoordinates'](_0x25c0a1);if(!_0x5ac5f1)return _0xb2380e;if(_0x501582['mapvDepthTest']&&_0x501582['mode']===Cesium$1['SceneMode'][_0x5548c7(0x1d8)]){const _0x3d120f=new Cesium$1['EllipsoidalOccluder'](_0x501582['globe']['ellipsoid'],_0x501582['camera']['positionWC']),_0x562528=_0x3d120f[_0x5548c7(_0x54b208._0x5b933f)](_0x25c0a1);if(!_0x562528)return _0xb2380e;}return[_0x5ac5f1['x'],_0x5ac5f1['y']];}};void 0x0!==_0x46988a&&(_0x335b86[_0x49940b(_0x25034d._0xea42f2)]=function(_0x4d265d){const _0x47fd55=_0x49940b,_0x49e5e9=_0x2ddaca[_0x47fd55(_0x904612._0x18d85a)]||0xa;return!!(_0x46988a&&_0x4d265d[_0x47fd55(_0x904612._0x58174d)]>_0x46988a-_0x49e5e9&&_0x4d265d['time']<_0x46988a);});const _0x3bee6c=this[_0x49940b(0x1e8)][_0x49940b(_0x25034d._0x2f4e72)](_0x335b86);this[_0x49940b(0x1bc)](_0x3bee6c),this[_0x49940b(_0x25034d._0x276c59)]['unit']==='m'&&this[_0x49940b(_0x25034d._0x48a5fe)]['size'],this['options']['_size']=this['options']['size'];const _0x278aa8=_0x501582['cartesianToCanvasCoordinates'](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x278aa8)return;this['drawContext'](_0x22b012,new mapv__namespace['DataSet'](_0x3bee6c),this['options'],_0x278aa8),this['options'][_0x49940b(0x18a)]&&this['options']['updateCallback'](_0x46988a);}}['updateData'](_0x54ac81,_0x358095){const _0x3c29a6={_0x18f7f8:0x1e1},_0xde4d02=_0x311b72;let _0x599834=_0x54ac81;_0x599834&&_0x599834[_0xde4d02(0x1e1)]&&(_0x599834=_0x599834[_0xde4d02(_0x3c29a6._0x18f7f8)]()),void 0x0!==_0x599834&&this[_0xde4d02(0x1e8)][_0xde4d02(0x1af)](_0x599834),super['update']({'options':_0x358095});}['addData'](_0xf469a5,_0x306b85){const _0x55f5e2=_0x311b72;let _0x244b89=_0xf469a5;_0xf469a5&&_0xf469a5['get']&&(_0x244b89=_0xf469a5['get']()),this[_0x55f5e2(0x1e8)]['add'](_0x244b89),this['update']({'options':_0x306b85});}[_0x311b72(0x1ba)](){return this['dataSet'];}['removeData'](_0x53d8ba){const _0x54b807={_0x7fffba:0x1e1},_0x1e34d8=_0x311b72;if(this['dataSet']){const _0x81c9fc=this['dataSet'][_0x1e34d8(_0x54b807._0x7fffba)]({'filter':function(_0x9d5832){return _0x53d8ba==null||typeof _0x53d8ba!=='function'||!_0x53d8ba(_0x9d5832);}});this[_0x1e34d8(0x1e8)]['set'](_0x81c9fc),this['update']({'options':null});}}['clearData'](){this['dataSet']&&this['dataSet']['clear'](),this['update']({'options':null});}['draw'](){const _0x58bf9b=_0x311b72;this[_0x58bf9b(0x198)]['draw']();}[_0x311b72(0x1e9)](_0x42c861){const _0x722641={_0x237172:0x1bb},_0x310ed7=_0x311b72;_0x42c861&&_0x42c861['clearRect']&&_0x42c861[_0x310ed7(_0x722641._0x237172)](0x0,0x0,_0x42c861['canvas']['width'],_0x42c861['canvas']['height']);}['destroy'](){const _0x5a4693={_0x1f18b2:0x1c8,_0x2a71b9:0x198},_0x1b8178=_0x311b72;this['clear'](this[_0x1b8178(_0x5a4693._0x1f18b2)]()),this[_0x1b8178(0x191)](),this['animator']&&this['animator']['stop'](),this['animator']=null,this[_0x1b8178(_0x5a4693._0x2a71b9)]=null;}}function _0x1a48(){const _0x156dee=['_onMapMouseMove','init','请引入\x20mapv\x20库\x20','style','24YAeRdT','forEach','type','_map','updateCallback','Cesium','67428nIXCWN','scene','auto','pointerEvents','_mountedHook','clearData','MultiPolygon','isFormat','_cache_event','removeAllData','EventType','6099093fHJZfq','canvasLayer','10004SdchEp','length','trails','_onMoveStartEvent','destroy','defineProperty','getRectangle','coordinates','options','animator','_reset','_pointerEvents','cameraMoveEnd','_dataCache','setZIndex','694570EbZqbf','position','mouseMove','click','_onMoveEndEvent','animation','mapv','set','hasOwnProperty','MapVLayer','absolute','153xdGsSj','canvas','_addedHook','width','_showHook','methods','clickEvent','getData','clearRect','processData','off','Cartographic','stopAniamation','concat','cameraMoveStart','time','isPointVisible','postRender','_coordinates','baiduMapLayer','animatorMovestartEvent','getContext','270awhvuQ','none','Polygon','globalCompositeOperation','addData','bind','11195IfXZfd','7IsfEts','map','step','getOwnPropertyDescriptor','initDevicePixelRatio','steps','height','filter','SCENE3D','zIndex','fromDegrees','devicePixelRatio','__proto__','_onMapClick','78206oMZLmM','isEnabledTime','ymin','get','_mapVRenderer','__esModule','281939WwECOP','mousemove','render','_data','dataSet','clear','draw','MultiLineString','depthTest','_canvasUpdate','resize','0px'];_0x1a48=function(){return _0x156dee;};return _0x1a48();}function _0x1fab(_0x5463fb,_0x716700){const _0x1a4894=_0x1a48();return _0x1fab=function(_0x1fabb9,_0x559e5c){_0x1fabb9=_0x1fabb9-0x183;let _0x300b1a=_0x1a4894[_0x1fabb9];return _0x300b1a;},_0x1fab(_0x5463fb,_0x716700);}if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace['DataSet'])mapv__namespace['DataSet']['prototype']['transferCoordinate']=function(_0x14b2e4,_0xa9430a,_0x16cb44,_0x1d77f5){const _0x40614f={_0x4e0454:0x1c5,_0x3e55f9:0x19a,_0x800958:0x188,_0x469572:0x1eb,_0x44ea26:0x1cb,_0x35a4b1:0x19a},_0x277bf7={_0x57998e:0x19a},_0x5d4080=_0x311b72;_0x1d77f5=_0x1d77f5||_0x5d4080(_0x40614f._0x4e0454),_0x16cb44=_0x16cb44||_0x5d4080(0x1a0);for(let _0x4141b4=0x0;_0x4141b4<_0x14b2e4[_0x5d4080(_0x40614f._0x3e55f9)];_0x4141b4++){const _0x5c16d7=_0x14b2e4[_0x4141b4]['geometry'],_0x2bd2c7=_0x5c16d7[_0x16cb44];switch(_0x5c16d7[_0x5d4080(_0x40614f._0x800958)]){case'Point':{const _0x5b35c6=_0xa9430a(_0x2bd2c7);_0x5b35c6?_0x5c16d7[_0x1d77f5]=_0x5b35c6:_0x5c16d7[_0x1d77f5]=[-0x3e7,-0x3e7];}break;case'LineString':{const _0x5ad885=[];for(let _0x35ce59=0x0;_0x35ce59<_0x2bd2c7['length'];_0x35ce59++){const _0x3f0420=_0xa9430a(_0x2bd2c7[_0x35ce59]);_0x3f0420&&_0x5ad885['push'](_0x3f0420);}_0x5c16d7[_0x1d77f5]=_0x5ad885;}break;case _0x5d4080(_0x40614f._0x469572):case _0x5d4080(_0x40614f._0x44ea26):{const _0x563f8b=_0x171175(_0x2bd2c7);_0x5c16d7[_0x1d77f5]=_0x563f8b;}break;case _0x5d4080(0x192):{const _0x478a2d=[];for(let _0x452113=0x0;_0x452113<_0x2bd2c7[_0x5d4080(_0x40614f._0x35a4b1)];_0x452113++){const _0x56bb15=_0x171175(_0x2bd2c7[_0x452113]);_0x56bb15['length']>0x0&&_0x478a2d['push'](_0x56bb15);}_0x5c16d7[_0x1d77f5]=_0x478a2d;}break;}}function _0x171175(_0x40234a){const _0x3ced09=_0x5d4080,_0x1f3d0c=[];for(let _0x4b60f7=0x0;_0x4b60f7<_0x40234a[_0x3ced09(0x19a)];_0x4b60f7++){const _0x58c69f=_0x40234a[_0x4b60f7],_0x4d519a=[];for(let _0xfa0857=0x0;_0xfa0857<_0x58c69f[_0x3ced09(0x19a)];_0xfa0857++){const _0x479c0b=_0xa9430a(_0x58c69f[_0xfa0857]);_0x479c0b&&_0x4d519a['push'](_0x479c0b);}_0x4d519a[_0x3ced09(_0x277bf7._0x57998e)]>0x0&&_0x1f3d0c['push'](_0x4d519a);}return _0x1f3d0c;}return _0x14b2e4;};else throw new Error(_0x311b72(0x184));const Cesium=mars3d__namespace[_0x311b72(0x18b)],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class MapVLayer extends BaseLayer{constructor(_0x2726cb,_0x426a95){const _0x279a45=_0x311b72;super(_0x2726cb),this[_0x279a45(0x1a4)]=this['options']['pointerEvents'],this[_0x279a45(0x1e8)]=_0x426a95||new mapv__namespace['DataSet'](_0x2726cb['data']),this['canvas']=null;}get['pointerEvents'](){const _0xca2c34=_0x311b72;return this[_0xca2c34(0x1a4)];}set[_0x311b72(0x18f)](_0x5a1130){const _0x259fb7={_0x40cef8:0x185},_0x447606=_0x311b72;this['_pointerEvents']=_0x5a1130,this[_0x447606(0x1b4)]&&(_0x5a1130?this['canvas'][_0x447606(_0x259fb7._0x40cef8)][_0x447606(0x18f)]='all':this['canvas'][_0x447606(_0x259fb7._0x40cef8)]['pointerEvents']='none');}[_0x311b72(0x1b7)](_0xd828f4){const _0x248b77=_0x311b72;_0xd828f4?this['canvas']['style']['display']='block':this['canvas'][_0x248b77(0x185)]['display']=_0x248b77(0x1ca);}[_0x311b72(0x190)](){const _0x2e090f={_0x1ab260:0x189,_0x55065b:0x1a1},_0x3e29b4=_0x311b72;this[_0x3e29b4(_0x2e090f._0x1ab260)]['scene']['mapvDepthTest']=this['options'][_0x3e29b4(0x1ec)]??!![],this['_map']['scene']['mapvAutoHeight']=this['options']['clampToGround']??![],this[_0x3e29b4(0x189)]['scene']['mapvFixedHeight']=this[_0x3e29b4(_0x2e090f._0x55065b)]['fixedHeight']??0x0;}[_0x311b72(0x1b5)](){const _0x5109d7={_0x2e1d43:0x1e7,_0xf05b83:0x19a,_0x1c4472:0x1c0},_0x80dd6=_0x311b72;this['dataSet']&&(!this['dataSet']['_data']||this['dataSet'][_0x80dd6(_0x5109d7._0x2e1d43)][_0x80dd6(_0x5109d7._0xf05b83)]===0x0)&&(this['dataSet']['_data']=[][_0x80dd6(_0x5109d7._0x1c4472)](this['dataSet'][_0x80dd6(0x1a6)])),this['_mapVRenderer']=new MapVRenderer(this['_map'],this['dataSet'],this['options'],this),this['initDevicePixelRatio'](),this['canvas']=this['_createCanvas'](),this['render']=this['render']['bind'](this),this['bindEvent'](),this['_reset']();}['_removedHook'](){const _0x24c4ed={_0x17bef0:0x1e2,_0xa2f380:0x19d},_0x1d95b9=_0x311b72;this['unbindEvent'](),this['_mapVRenderer']&&(this[_0x1d95b9(_0x24c4ed._0x17bef0)][_0x1d95b9(_0x24c4ed._0xa2f380)](),this['_mapVRenderer']=null),this['canvas']['parentElement']['removeChild'](this['canvas']);}[_0x311b72(0x1d4)](){const _0x51b51f={_0x1f1c8b:0x1db},_0x492130=_0x311b72;this[_0x492130(_0x51b51f._0x1f1c8b)]=window['devicePixelRatio']||0x1;}['bindEvent'](){const _0x698555={_0x453624:0x1a5,_0x1dc75d:0x1ab},_0xe15083=_0x311b72;var _0x3b982a,_0x2f08a7,_0x57d5f6,_0x87a65d;this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace[_0xe15083(0x196)]['cameraMoveStart'],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0xe15083(_0x698555._0x453624)],this[_0xe15083(0x1ac)],this),(_0x3b982a=this['options'])!==null&&_0x3b982a!==void 0x0&&(_0x2f08a7=_0x3b982a['methods'])!==null&&_0x2f08a7!==void 0x0&&_0x2f08a7[_0xe15083(_0x698555._0x1dc75d)]&&this['_map']['on'](mars3d__namespace['EventType']['click'],this[_0xe15083(0x1dd)],this),(_0x57d5f6=this['options'])!==null&&_0x57d5f6!==void 0x0&&(_0x87a65d=_0x57d5f6['methods'])!==null&&_0x87a65d!==void 0x0&&_0x87a65d['mousemove']&&this[_0xe15083(0x189)]['on'](mars3d__namespace['EventType']['mouseMove'],this[_0xe15083(0x1f0)],this);}['unbindEvent'](){const _0x5ae569={_0x5383bc:0x19c,_0x4b590e:0x1bd,_0x1a2b10:0x196,_0x18daf5:0x1a1,_0x460594:0x1bd,_0x55c742:0x1aa,_0xb35731:0x1f0},_0x17c07f=_0x311b72;var _0x12a8ed,_0x3d56c2,_0x26dcbf,_0x423097;this['_map']['off'](mars3d__namespace[_0x17c07f(0x196)]['mouseDown'],this['_onMoveStartEvent'],this),this['_map']['off'](mars3d__namespace['EventType'][_0x17c07f(0x1c1)],this[_0x17c07f(_0x5ae569._0x5383bc)],this),this['_map'][_0x17c07f(0x1bd)](mars3d__namespace['EventType']['cameraMoveEnd'],this[_0x17c07f(0x1ac)],this),this['_map'][_0x17c07f(0x1bd)](mars3d__namespace[_0x17c07f(0x196)]['postRender'],this[_0x17c07f(0x1a3)],this),(_0x12a8ed=this['options'])!==null&&_0x12a8ed!==void 0x0&&(_0x3d56c2=_0x12a8ed['methods'])!==null&&_0x3d56c2!==void 0x0&&_0x3d56c2['click']&&this['_map'][_0x17c07f(_0x5ae569._0x4b590e)](mars3d__namespace[_0x17c07f(_0x5ae569._0x1a2b10)]['click'],this['_onMapClick'],this),(_0x26dcbf=this[_0x17c07f(_0x5ae569._0x18daf5)])!==null&&_0x26dcbf!==void 0x0&&(_0x423097=_0x26dcbf[_0x17c07f(0x1b8)])!==null&&_0x423097!==void 0x0&&_0x423097['mousemove']&&this['_map'][_0x17c07f(_0x5ae569._0x460594)](mars3d__namespace['EventType'][_0x17c07f(_0x5ae569._0x55c742)],this[_0x17c07f(_0x5ae569._0xb35731)],this);}['_onMoveStartEvent'](){const _0x3c8f79={_0x10fc82:0x196,_0x2a3c26:0x1c4},_0x317adc=_0x311b72;this['_mapVRenderer']&&(this['_mapVRenderer'][_0x317adc(0x1c7)](),this['_map']['off'](mars3d__namespace[_0x317adc(_0x3c8f79._0x10fc82)][_0x317adc(_0x3c8f79._0x2a3c26)],this['_reset'],this),this['_map']['on'](mars3d__namespace[_0x317adc(_0x3c8f79._0x10fc82)]['postRender'],this[_0x317adc(0x1a3)],this));}[_0x311b72(0x1ac)](){const _0xf5dfa=_0x311b72;this[_0xf5dfa(0x1e2)]&&(this['_map']['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),this['_mapVRenderer']['animatorMoveendEvent'](),this['_reset']());}['_setOptionsHook'](_0x437484,_0x301f1f){this['_removedHook'](),this['_addedHook']();}[_0x311b72(0x1cd)](_0x268460){const _0x23e9e9={_0x5790c6:0x1a1},_0x119ae4=_0x311b72;this['_mapVRenderer']&&this['_mapVRenderer']['addData'](_0x268460,this[_0x119ae4(_0x23e9e9._0x5790c6)]);}['updateData'](_0x295946){this['_mapVRenderer']&&this['_mapVRenderer']['updateData'](_0x295946,this['options']);}['getData'](){const _0x54a9d1=_0x311b72;return this['_mapVRenderer']&&(this[_0x54a9d1(0x1e8)]=this['_mapVRenderer']['getData']()),this[_0x54a9d1(0x1e8)];}['removeData'](_0x4515ce){const _0x488136=_0x311b72;this[_0x488136(0x1e2)]&&this['_mapVRenderer']['removeData'](_0x4515ce);}[_0x311b72(0x195)](){const _0x44651b={_0xc511e4:0x191},_0x4e5806=_0x311b72;this[_0x4e5806(0x1e2)]&&this['_mapVRenderer'][_0x4e5806(_0x44651b._0xc511e4)]();}['_createCanvas'](){const _0x58b1d9={_0x21934d:0x1b2,_0x4f6d71:0x1ef,_0x9adf61:0x1b4,_0x16aaec:0x189,_0x4f950f:0x1d6,_0x1eb2de:0x1b4,_0xd717fd:0x1b6,_0x582a8d:0x185,_0x31bcd1:0x18e},_0x9ed777=_0x311b72,_0x4da099=mars3d__namespace['DomUtil']['create']('canvas','mars3d-mapv',this['_map']['container']);_0x4da099['id']=this['id'],_0x4da099[_0x9ed777(0x185)]['position']=_0x9ed777(_0x58b1d9._0x21934d),_0x4da099['style']['top']='0px',_0x4da099[_0x9ed777(0x185)]['left']=_0x9ed777(_0x58b1d9._0x4f6d71),_0x4da099['width']=parseInt(this['_map'][_0x9ed777(_0x58b1d9._0x9adf61)]['width']),_0x4da099[_0x9ed777(0x1d6)]=parseInt(this[_0x9ed777(_0x58b1d9._0x16aaec)][_0x9ed777(0x1b4)][_0x9ed777(_0x58b1d9._0x4f950f)]),_0x4da099['style']['width']=this['_map'][_0x9ed777(_0x58b1d9._0x1eb2de)]['style'][_0x9ed777(_0x58b1d9._0xd717fd)],_0x4da099[_0x9ed777(_0x58b1d9._0x582a8d)][_0x9ed777(_0x58b1d9._0x4f950f)]=this['_map'][_0x9ed777(_0x58b1d9._0x9adf61)]['style']['height'],_0x4da099['style']['pointerEvents']=this['_pointerEvents']?_0x9ed777(_0x58b1d9._0x31bcd1):_0x9ed777(0x1ca),_0x4da099['style'][_0x9ed777(0x1d9)]=this[_0x9ed777(0x1a1)]['zIndex']??0x9;if(this['options']['context']==='2d'){const _0xf1f3cd=this['devicePixelRatio'];_0x4da099['getContext'](this['options']['context'])['scale'](_0xf1f3cd,_0xf1f3cd);}return _0x4da099;}['_reset'](){const _0x4a30ba={_0x423e79:0x1e6},_0x212a5d=_0x311b72;this['resize'](),this[_0x212a5d(_0x4a30ba._0x423e79)]();}[_0x311b72(0x1ea)](){this['_reset']();}['remove'](){const _0x267a3d={_0x4d0264:0x19d,_0x1af21b:0x1b4},_0x5c1ddb=_0x311b72;this['_mapVRenderer']&&(this['_mapVRenderer'][_0x5c1ddb(_0x267a3d._0x4d0264)](),this['_mapVRenderer']=null),this[_0x5c1ddb(_0x267a3d._0x1af21b)]['parentElement']['removeChild'](this['canvas']);}['render'](){this['_mapVRenderer']['_canvasUpdate']();}[_0x311b72(0x1ee)](){const _0x413d2d={_0x2a7a7d:0x1b4,_0x1f966f:0x1b2,_0x2461cc:0x185,_0xa0121d:0x1b4,_0x32abbf:0x1b4,_0x4c7eb8:0x1b6,_0x4938a9:0x189},_0x20bb7a=_0x311b72;if(this[_0x20bb7a(_0x413d2d._0x2a7a7d)]){const _0x302489=this['canvas'];_0x302489['style'][_0x20bb7a(0x1a9)]=_0x20bb7a(_0x413d2d._0x1f966f),_0x302489['style']['top']='0px',_0x302489[_0x20bb7a(_0x413d2d._0x2461cc)]['left']='0px',_0x302489[_0x20bb7a(0x1b6)]=parseInt(this[_0x20bb7a(0x189)][_0x20bb7a(_0x413d2d._0xa0121d)]['width']),_0x302489['height']=parseInt(this['_map'][_0x20bb7a(_0x413d2d._0x32abbf)]['height']),_0x302489['style'][_0x20bb7a(_0x413d2d._0x4c7eb8)]=this[_0x20bb7a(_0x413d2d._0x4938a9)]['canvas']['style']['width'],_0x302489['style']['height']=this['_map']['canvas']['style']['height'];}}[_0x311b72(0x19f)](_0x508d4d){const _0x2f24f5={_0x33fd9e:0x1e8},_0x1b1c54=_0x311b72;if(!this['dataSet']||!this[_0x1b1c54(0x1e8)][_0x1b1c54(0x1e7)])return;const _0x410d2b=mars3d__namespace['Util']['getExtentByGeoJSON']({'type':'FeatureCollection','features':this[_0x1b1c54(_0x2f24f5._0x33fd9e)]['_data']});if(!_0x410d2b)return;return _0x508d4d!==null&&_0x508d4d!==void 0x0&&_0x508d4d[_0x1b1c54(0x193)]?_0x410d2b:Cesium['Rectangle']['fromDegrees'](_0x410d2b['xmin'],_0x410d2b[_0x1b1c54(0x1e0)],_0x410d2b['xmax'],_0x410d2b['ymax']);}[_0x311b72(0x1dd)](_0x45ee9b){const _0x51ce75={_0x9a7e12:0x194,_0x5233a8:0x1e2},_0x5d1761=_0x311b72;this[_0x5d1761(_0x51ce75._0x9a7e12)]=_0x45ee9b,this['_mapVRenderer']&&this[_0x5d1761(_0x51ce75._0x5233a8)][_0x5d1761(0x1b9)](_0x45ee9b['windowPosition'],_0x45ee9b);}['_onMapMouseMove'](_0x4acd1a){this['_cache_event']=_0x4acd1a,this['_mapVRenderer']&&this['_mapVRenderer']['mousemoveEvent'](_0x4acd1a['windowPosition'],_0x4acd1a);}['on'](_0x1d5a65,_0x376bad,_0x3e6c49){const _0x4d41eb={_0x20c29e:0x196,_0x5cfe12:0x189},_0x5ab027={_0x40a4a8:0x194},_0x18639e=_0x311b72;this['options']['methods']=this['options'][_0x18639e(0x1b8)]||{};if(_0x1d5a65===mars3d__namespace['EventType']['click'])this['options']['methods']['click']=_0x3e8ca0=>{const _0x41869f=_0x18639e;_0x3e8ca0&&_0x376bad['bind'](_0x3e6c49)({...this[_0x41869f(0x194)],'layer':this,'data':_0x3e8ca0});},this[_0x18639e(0x189)]['on'](mars3d__namespace[_0x18639e(_0x4d41eb._0x20c29e)]['click'],this['_onMapClick'],this);else _0x1d5a65===mars3d__namespace['EventType']['mouseMove']&&(this['options']['methods']['mousemove']=_0x55e3d8=>{const _0x13592a=_0x18639e;_0x55e3d8&&_0x376bad[_0x13592a(0x1ce)](_0x3e6c49)({...this[_0x13592a(_0x5ab027._0x40a4a8)],'layer':this,'data':_0x55e3d8});},this[_0x18639e(_0x4d41eb._0x5cfe12)]['on'](mars3d__namespace[_0x18639e(0x196)][_0x18639e(0x1aa)],this['_onMapMouseMove'],this));return this;}['off'](_0x4cf7a6,_0xb8ba88){const _0x383635={_0x506663:0x1bd,_0x5afd4a:0x1ab,_0x42eed1:0x189,_0x58462e:0x1b8,_0x31e051:0x1e5},_0x2faf7e=_0x311b72;if(_0x4cf7a6==='click'){var _0x16bbce;this['_map'][_0x2faf7e(_0x383635._0x506663)](_0x4cf7a6,this[_0x2faf7e(0x1dd)],this),(_0x16bbce=this['options']['methods'])!==null&&_0x16bbce!==void 0x0&&_0x16bbce['mousemove']&&delete this['options']['methods'][_0x2faf7e(_0x383635._0x5afd4a)];}else{if(_0x4cf7a6==='mouseMove'){var _0x58016c;this[_0x2faf7e(_0x383635._0x42eed1)][_0x2faf7e(0x1bd)](_0x4cf7a6,this[_0x2faf7e(0x1f0)],this),(_0x58016c=this[_0x2faf7e(0x1a1)]['methods'])!==null&&_0x58016c!==void 0x0&&_0x58016c[_0x2faf7e(0x1e5)]&&delete this['options'][_0x2faf7e(_0x383635._0x58462e)][_0x2faf7e(_0x383635._0x31e051)];}}return this;}}mars3d__namespace['LayerUtil']['register']('mapv',MapVLayer),mars3d__namespace['layer']['MapVLayer']=MapVLayer,mars3d__namespace[_0x311b72(0x1ae)]=mapv__namespace,exports[_0x311b72(0x1b1)]=MapVLayer,Object['keys'](mapv)[_0x311b72(0x187)](function(_0x57a2de){const _0x1bbdbd={_0x409637:0x1b0},_0x5f06df=_0x311b72;if(_0x57a2de!=='default'&&!exports[_0x5f06df(_0x1bbdbd._0x409637)](_0x57a2de))Object['defineProperty'](exports,_0x57a2de,{'enumerable':!![],'get':function(){return mapv[_0x57a2de];}});}),Object['defineProperty'](exports,_0x311b72(0x1e3),{'value':!![]});
}));
