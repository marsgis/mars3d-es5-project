/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.6.4
 * 编译日期：2023-08-30 23:18:18
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';function _0x4051(_0x2fc637,_0x12b66f){const _0x381c5f=_0x381c();return _0x4051=function(_0x405179,_0x3360c9){_0x405179=_0x405179-0x7c;let _0x3453c0=_0x381c5f[_0x405179];return _0x3453c0;},_0x4051(_0x2fc637,_0x12b66f);}const _0x9baa0e=_0x4051;(function(_0x2f8109,_0x6b3151){const _0x207ead={_0x8d3cf5:0xae,_0xd0b82f:0xb0,_0x3a3bbf:0x85,_0x789008:0xa6,_0x3e0bfa:0xa8,_0x11e048:0x8e,_0x2a2c3a:0xb4,_0x1a07a5:0xc5,_0x5dcced:0xcf},_0x528a70=_0x4051,_0x257754=_0x2f8109();while(!![]){try{const _0x3e2259=-parseInt(_0x528a70(0x8c))/0x1*(-parseInt(_0x528a70(_0x207ead._0x8d3cf5))/0x2)+parseInt(_0x528a70(_0x207ead._0xd0b82f))/0x3+parseInt(_0x528a70(_0x207ead._0x3a3bbf))/0x4*(-parseInt(_0x528a70(0x82))/0x5)+parseInt(_0x528a70(_0x207ead._0x789008))/0x6*(-parseInt(_0x528a70(_0x207ead._0x3e0bfa))/0x7)+-parseInt(_0x528a70(_0x207ead._0x11e048))/0x8*(parseInt(_0x528a70(0x8f))/0x9)+parseInt(_0x528a70(_0x207ead._0x2a2c3a))/0xa*(-parseInt(_0x528a70(_0x207ead._0x1a07a5))/0xb)+parseInt(_0x528a70(_0x207ead._0x5dcced))/0xc;if(_0x3e2259===_0x6b3151)break;else _0x257754['push'](_0x257754['shift']());}catch(_0x41d5b7){_0x257754['push'](_0x257754['shift']());}}}(_0x381c,0x37750));function _interopNamespace(_0x3ab0db){const _0x18fa46={_0x13966c:0x99},_0x40c865=_0x4051;if(_0x3ab0db&&_0x3ab0db['__esModule'])return _0x3ab0db;var _0x14e7f6=Object['create'](null);return _0x3ab0db&&Object['keys'](_0x3ab0db)[_0x40c865(_0x18fa46._0x13966c)](function(_0xd3183a){const _0x42b6ae=_0x40c865;if(_0xd3183a!=='default'){var _0x2c77e4=Object['getOwnPropertyDescriptor'](_0x3ab0db,_0xd3183a);Object['defineProperty'](_0x14e7f6,_0xd3183a,_0x2c77e4[_0x42b6ae(0x84)]?_0x2c77e4:{'enumerable':!![],'get':function(){return _0x3ab0db[_0xd3183a];}});}}),_0x14e7f6['default']=_0x3ab0db,_0x14e7f6;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'],baiduMapLayer=mapv__namespace?mapv__namespace[_0x9baa0e(0xd0)]:null,BaseLayer$1=baiduMapLayer?baiduMapLayer['__proto__']:Function;function _0x381c(){const _0x323640=['getData','length','devicePixelRatio','rgba(0,\x200,\x200,\x20.1)','isFormat','width','getHeight','globalCompositeOperation','DataSet','bindEvent','mousemove','9678ElruFc','_onMapMouseMove','1029GzAEEL','depthTest','animation','_reset','postRender','style','36396GxKGMS','animatorMovestartEvent','1123368tHNYBf','absolute','setZIndex','start','15530VIkSVt','MultiPolygon','coordinates','_data','FeatureCollection','clearData','LayerUtil','fixedHeight','click','push','clear','mouseDown','draw','EventType','dataSet','container','parentElement','814jpqNNT','ymin','clearRect','_mountedHook','methods','update','stop','fillStyle','_size','options','6961308ReCEGj','baiduMapLayer','display','_mapVRenderer','Rectangle','_addedHook','layer','context','set','_pointerEvents','getContext','pointerEvents','_map','stopAniamation','top','ymax','argCheck','_onMoveEndEvent','__esModule','position','globe','mapvFixedHeight','canvas','initDevicePixelRatio','isPointVisible','resize','EllipsoidalOccluder','destroy','请引入\x20mapv\x20库\x20','30lRBzQN','zIndex','get','195788dMtYfg','prototype','time','mapvAutoHeight','unbindEvent','xmax','_onMapClick','7tItwSD','scene','418168Lgdxio','36llEbCR','height','all','animator','off','_setOptionsHook','Point','canvasLayer','updateData','removeAllData','forEach','getExtentByGeoJSON'];_0x381c=function(){return _0x323640;};return _0x381c();}class MapVRenderer extends BaseLayer$1{constructor(_0x2dfec1,_0x580a9c,_0x628f65,_0x13fbe9){const _0x3a0120={_0x190ad6:0xdf},_0x34741c=_0x9baa0e;super(_0x2dfec1,_0x580a9c,_0x628f65);if(!BaseLayer$1)return;this['map']=_0x2dfec1,this['scene']=_0x2dfec1['scene'],this['dataSet']=_0x580a9c,_0x628f65=_0x628f65||{},this['init'](_0x628f65),this[_0x34741c(_0x3a0120._0x190ad6)](_0x628f65),this['initDevicePixelRatio'](),this['canvasLayer']=_0x13fbe9,this['stopAniamation']=!0x1,this['animation']=_0x628f65['animation'];}['initDevicePixelRatio'](){const _0x1ea087={_0x37e222:0x9d},_0x11eace=_0x9baa0e;this['devicePixelRatio']=window[_0x11eace(_0x1ea087._0x37e222)]||0x1;}['addAnimatorEvent'](){}[_0x9baa0e(0xaf)](){const _0x49d189={_0x4792d1:0xaa,_0x7ac563:0xb3},_0x9f4d4a=_0x9baa0e,_0x404083=this['options'][_0x9f4d4a(_0x49d189._0x4792d1)];this['isEnabledTime']()&&this['animator']&&(this['steps']['step']=_0x404083['stepsRange'][_0x9f4d4a(_0x49d189._0x7ac563)]);}['animatorMoveendEvent'](){this['isEnabledTime']()&&this['animator'];}['getContext'](){return this['canvasLayer']['canvas']['getContext'](this['context']);}['init'](_0x420eb6){const _0x46d7e7={_0x158604:0xb2},_0x218550=_0x9baa0e;this['options']=_0x420eb6,this['initDataRange'](_0x420eb6),this['context']=this['options']['context']||'2d',this['options']['zIndex']&&this['canvasLayer']&&this['canvasLayer']['setZIndex']&&this[_0x218550(0x96)][_0x218550(_0x46d7e7._0x158604)](this[_0x218550(0xce)][_0x218550(0x83)]),this['initAnimator']();}['_canvasUpdate'](_0x26785c){const _0x54b0f3={_0x54c90f:0xdc,_0x590928:0xaa,_0x4acd84:0xa2,_0xc7d565:0xcc,_0x3b5e31:0x90,_0x16d7c4:0xd6,_0x1f1c2e:0xcd},_0x3a344c={_0x23e71f:0x87},_0x3da18f={_0x59d468:0x88,_0x1c7ecd:0x7f,_0x418861:0x7d},_0x2e872b=_0x9baa0e,_0x12071d=this[_0x2e872b(0x8d)];if(this['canvasLayer']&&!this[_0x2e872b(_0x54b0f3._0x54c90f)]){const _0x45f03b=this['options'][_0x2e872b(_0x54b0f3._0x590928)],_0x9974e3=this['getContext']();if(this['isEnabledTime']()){if(void 0x0===_0x26785c)return void this['clear'](_0x9974e3);this['context']==='2d'&&(_0x9974e3['save'](),_0x9974e3[_0x2e872b(_0x54b0f3._0x4acd84)]='destination-out',_0x9974e3[_0x2e872b(_0x54b0f3._0xc7d565)]=_0x2e872b(0x9e),_0x9974e3['fillRect'](0x0,0x0,_0x9974e3['canvas']['width'],_0x9974e3['canvas'][_0x2e872b(_0x54b0f3._0x3b5e31)]),_0x9974e3['restore']());}else this['clear'](_0x9974e3);if(this[_0x2e872b(_0x54b0f3._0x16d7c4)]==='2d')for(const _0x5ed508 in this['options']){_0x9974e3[_0x5ed508]=this['options'][_0x5ed508];}else _0x9974e3['clear'](_0x9974e3['COLOR_BUFFER_BIT']);const _0xf4dfae={'transferCoordinate':function(_0x59d8b1){const _0x17992f=_0x2e872b,_0x41d559=null;let _0x356ac4=_0x12071d[_0x17992f(0xe4)];_0x12071d[_0x17992f(_0x3da18f._0x59d468)]&&(_0x356ac4=_0x12071d['globe'][_0x17992f(0xa1)](Cesium$1['Cartographic']['fromDegrees'](_0x59d8b1[0x0],_0x59d8b1[0x1])));const _0x4908ba=Cesium$1['Cartesian3']['fromDegrees'](_0x59d8b1[0x0],_0x59d8b1[0x1],_0x356ac4);if(!_0x4908ba)return _0x41d559;const _0x61bbb3=_0x12071d['cartesianToCanvasCoordinates'](_0x4908ba);if(!_0x61bbb3)return _0x41d559;if(_0x12071d['mapvDepthTest']&&_0x12071d['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x489663=new Cesium$1[(_0x17992f(_0x3da18f._0x1c7ecd))](_0x12071d[_0x17992f(0xe3)]['ellipsoid'],_0x12071d['camera']['positionWC']),_0x157266=_0x489663[_0x17992f(_0x3da18f._0x418861)](_0x4908ba);if(!_0x157266)return _0x41d559;}return[_0x61bbb3['x'],_0x61bbb3['y']];}};void 0x0!==_0x26785c&&(_0xf4dfae['filter']=function(_0x2cc6a1){const _0x3ce3e2=_0x2e872b,_0x10a711=_0x45f03b['trails']||0xa;return!!(_0x26785c&&_0x2cc6a1['time']>_0x26785c-_0x10a711&&_0x2cc6a1[_0x3ce3e2(_0x3a344c._0x23e71f)]<_0x26785c);});const _0x229cc3=this['dataSet']['get'](_0xf4dfae);this['processData'](_0x229cc3),this['options']['unit']==='m'&&this[_0x2e872b(0xce)]['size'],this[_0x2e872b(0xce)][_0x2e872b(_0x54b0f3._0x1f1c2e)]=this['options']['size'];const _0x2e96b5=_0x12071d['cartesianToCanvasCoordinates'](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x2e96b5)return;this['drawContext'](_0x9974e3,new mapv__namespace['DataSet'](_0x229cc3),this[_0x2e872b(0xce)],_0x2e96b5),this[_0x2e872b(0xce)]['updateCallback']&&this['options']['updateCallback'](_0x26785c);}}['updateData'](_0x207f05,_0xb5edf1){const _0x8527fc={_0x33e503:0xd7},_0x32d577=_0x9baa0e;let _0x3a3b72=_0x207f05;_0x3a3b72&&_0x3a3b72['get']&&(_0x3a3b72=_0x3a3b72['get']()),void 0x0!==_0x3a3b72&&this[_0x32d577(0xc2)][_0x32d577(_0x8527fc._0x33e503)](_0x3a3b72),super[_0x32d577(0xca)]({'options':_0xb5edf1});}['addData'](_0x1ebc54,_0x381b30){const _0x4e5d=_0x9baa0e;let _0x164b41=_0x1ebc54;_0x1ebc54&&_0x1ebc54['get']&&(_0x164b41=_0x1ebc54['get']()),this[_0x4e5d(0xc2)]['add'](_0x164b41),this['update']({'options':_0x381b30});}[_0x9baa0e(0x9b)](){return this['dataSet'];}['removeData'](_0x53facb){const _0x40022b={_0x1b06cf:0xc2},_0x515358=_0x9baa0e;if(this[_0x515358(_0x40022b._0x1b06cf)]){const _0x3bd934=this['dataSet']['get']({'filter':function(_0xaac195){return _0x53facb==null||typeof _0x53facb!=='function'||!_0x53facb(_0xaac195);}});this['dataSet'][_0x515358(0xd7)](_0x3bd934),this['update']({'options':null});}}['clearData'](){const _0x1c5dc2={_0xed2e1:0xbe},_0x5bf13d=_0x9baa0e;this['dataSet']&&this['dataSet'][_0x5bf13d(_0x1c5dc2._0xed2e1)](),this['update']({'options':null});}[_0x9baa0e(0xc0)](){this['canvasLayer']['draw']();}['clear'](_0x1ed6db){const _0xdd9e5c=_0x9baa0e;_0x1ed6db&&_0x1ed6db[_0xdd9e5c(0xc7)]&&_0x1ed6db['clearRect'](0x0,0x0,_0x1ed6db['canvas'][_0xdd9e5c(0xa0)],_0x1ed6db['canvas']['height']);}['destroy'](){const _0x313d93={_0xccf8f:0xd9,_0x20a585:0xb9,_0x38a65f:0x92,_0x289141:0xcb},_0x1b29f3=_0x9baa0e;this['clear'](this[_0x1b29f3(_0x313d93._0xccf8f)]()),this[_0x1b29f3(_0x313d93._0x20a585)](),this[_0x1b29f3(_0x313d93._0x38a65f)]&&this['animator'][_0x1b29f3(_0x313d93._0x289141)](),this[_0x1b29f3(0x92)]=null,this['canvasLayer']=null;}}if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace[_0x9baa0e(0xa3)])mapv__namespace[_0x9baa0e(0xa3)][_0x9baa0e(0x86)]['transferCoordinate']=function(_0x3e4f81,_0x7319b6,_0x492919,_0x1a9bab){const _0x55063f={_0x36de5e:0xb5,_0x19c247:0x9c},_0x2398da=_0x9baa0e;_0x1a9bab=_0x1a9bab||'_coordinates',_0x492919=_0x492919||_0x2398da(0xb6);for(let _0x2e3a07=0x0;_0x2e3a07<_0x3e4f81[_0x2398da(0x9c)];_0x2e3a07++){const _0x56e79e=_0x3e4f81[_0x2e3a07]['geometry'],_0xc23a3d=_0x56e79e[_0x492919];switch(_0x56e79e['type']){case _0x2398da(0x95):{const _0x3e4ede=_0x7319b6(_0xc23a3d);_0x3e4ede?_0x56e79e[_0x1a9bab]=_0x3e4ede:_0x56e79e[_0x1a9bab]=[-0x3e7,-0x3e7];}break;case'LineString':{const _0x27150c=[];for(let _0x26eda1=0x0;_0x26eda1<_0xc23a3d['length'];_0x26eda1++){const _0x41385b=_0x7319b6(_0xc23a3d[_0x26eda1]);_0x41385b&&_0x27150c['push'](_0x41385b);}_0x56e79e[_0x1a9bab]=_0x27150c;}break;case'MultiLineString':case'Polygon':{const _0x407683=_0x14f195(_0xc23a3d);_0x56e79e[_0x1a9bab]=_0x407683;}break;case _0x2398da(_0x55063f._0x36de5e):{const _0x5171cb=[];for(let _0x125406=0x0;_0x125406<_0xc23a3d[_0x2398da(_0x55063f._0x19c247)];_0x125406++){const _0x257f28=_0x14f195(_0xc23a3d[_0x125406]);_0x257f28['length']>0x0&&_0x5171cb['push'](_0x257f28);}_0x56e79e[_0x1a9bab]=_0x5171cb;}break;}}function _0x14f195(_0x1961ef){const _0x3bae4a=_0x2398da,_0x56fe6b=[];for(let _0x33dcce=0x0;_0x33dcce<_0x1961ef[_0x3bae4a(0x9c)];_0x33dcce++){const _0x24966e=_0x1961ef[_0x33dcce],_0x29e622=[];for(let _0x5828d0=0x0;_0x5828d0<_0x24966e['length'];_0x5828d0++){const _0x3b6cbd=_0x7319b6(_0x24966e[_0x5828d0]);_0x3b6cbd&&_0x29e622[_0x3bae4a(0xbd)](_0x3b6cbd);}_0x29e622['length']>0x0&&_0x56fe6b['push'](_0x29e622);}return _0x56fe6b;}return _0x3e4f81;};else throw new Error(_0x9baa0e(0x81));const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class MapVLayer extends BaseLayer{constructor(_0x593c97,_0xc992dd){super(_0x593c97),this['_pointerEvents']=this['options']['pointerEvents'],this['dataSet']=_0xc992dd||new mapv__namespace['DataSet'](_0x593c97['data']),this['canvas']=null;}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x475365){const _0x2fcfce={_0x175152:0xe5},_0x13e2ff=_0x9baa0e;this['_pointerEvents']=_0x475365,this['canvas']&&(_0x475365?this[_0x13e2ff(0xe5)]['style']['pointerEvents']=_0x13e2ff(0x91):this[_0x13e2ff(_0x2fcfce._0x175152)][_0x13e2ff(0xad)]['pointerEvents']='none');}['_showHook'](_0x1317af){const _0x1edee6=_0x9baa0e;_0x1317af?this['canvas'][_0x1edee6(0xad)]['display']='block':this[_0x1edee6(0xe5)]['style'][_0x1edee6(0xd1)]='none';}[_0x9baa0e(0xc8)](){const _0x349faa={_0x2cde72:0xe4},_0x172efb=_0x9baa0e;this['_map']['scene']['mapvDepthTest']=this['options'][_0x172efb(0xa9)]??!![],this['_map']['scene']['mapvAutoHeight']=this['options']['clampToGround']??![],this[_0x172efb(0xdb)]['scene'][_0x172efb(_0x349faa._0x2cde72)]=this[_0x172efb(0xce)][_0x172efb(0xbb)]??0x0;}[_0x9baa0e(0xd4)](){const _0x10311e={_0x21fa48:0xdb},_0x29269d=_0x9baa0e;this['dataSet']&&(!this['dataSet']['_data']||this['dataSet']['_data'][_0x29269d(0x9c)]===0x0)&&(this['dataSet'][_0x29269d(0xb7)]=[]['concat'](this[_0x29269d(0xc2)]['_dataCache'])),this['_mapVRenderer']=new MapVRenderer(this[_0x29269d(_0x10311e._0x21fa48)],this['dataSet'],this['options'],this),this[_0x29269d(0x7c)](),this[_0x29269d(0xe5)]=this['_createCanvas'](),this['render']=this['render']['bind'](this),this[_0x29269d(0xa4)](),this['_reset']();}['_removedHook'](){const _0x3a744c={_0xdd3047:0x89,_0x5f0a81:0xd2},_0x2ca038=_0x9baa0e;this[_0x2ca038(_0x3a744c._0xdd3047)](),this[_0x2ca038(_0x3a744c._0x5f0a81)]&&(this['_mapVRenderer']['destroy'](),this['_mapVRenderer']=null),this['canvas']['parentElement']['removeChild'](this['canvas']);}['initDevicePixelRatio'](){const _0x16369a={_0x175f23:0x9d},_0x2036c3=_0x9baa0e;this['devicePixelRatio']=window[_0x2036c3(_0x16369a._0x175f23)]||0x1;}['bindEvent'](){const _0x1e1e31={_0x7a2916:0xc1,_0xd40821:0xdb,_0xd10261:0xc1,_0x1bba3b:0xdb},_0x438ba9=_0x9baa0e;var _0x23d4f9,_0x15f09a,_0x5eeabe,_0xb4337e;this[_0x438ba9(0xdb)]['on'](mars3d__namespace[_0x438ba9(_0x1e1e31._0x7a2916)][_0x438ba9(0xbf)],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace[_0x438ba9(0xc1)]['cameraMoveStart'],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['cameraMoveEnd'],this['_onMoveEndEvent'],this),(_0x23d4f9=this['options'])!==null&&_0x23d4f9!==void 0x0&&(_0x15f09a=_0x23d4f9['methods'])!==null&&_0x15f09a!==void 0x0&&_0x15f09a['click']&&this[_0x438ba9(_0x1e1e31._0xd40821)]['on'](mars3d__namespace[_0x438ba9(_0x1e1e31._0xd10261)][_0x438ba9(0xbc)],this[_0x438ba9(0x8b)],this),(_0x5eeabe=this['options'])!==null&&_0x5eeabe!==void 0x0&&(_0xb4337e=_0x5eeabe['methods'])!==null&&_0xb4337e!==void 0x0&&_0xb4337e[_0x438ba9(0xa5)]&&this[_0x438ba9(_0x1e1e31._0x1bba3b)]['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this);}[_0x9baa0e(0x89)](){const _0x419a05={_0x68b287:0xdb,_0x3da54a:0x93,_0x177248:0xdb,_0x18926b:0xc1,_0x121ec4:0xe0,_0x378d58:0xbc,_0x1e48f5:0xc9,_0x49b7d6:0xa5},_0x41cb6b=_0x9baa0e;var _0x2927a8,_0x194057,_0x318781,_0x33216f;this[_0x41cb6b(_0x419a05._0x68b287)]['off'](mars3d__namespace['EventType']['mouseDown'],this['_onMoveStartEvent'],this),this['_map'][_0x41cb6b(_0x419a05._0x3da54a)](mars3d__namespace['EventType']['cameraMoveStart'],this['_onMoveStartEvent'],this),this[_0x41cb6b(_0x419a05._0x177248)]['off'](mars3d__namespace[_0x41cb6b(_0x419a05._0x18926b)]['cameraMoveEnd'],this[_0x41cb6b(_0x419a05._0x121ec4)],this),this['_map']['off'](mars3d__namespace[_0x41cb6b(0xc1)]['postRender'],this['_reset'],this),(_0x2927a8=this['options'])!==null&&_0x2927a8!==void 0x0&&(_0x194057=_0x2927a8['methods'])!==null&&_0x194057!==void 0x0&&_0x194057['click']&&this['_map']['off'](mars3d__namespace['EventType'][_0x41cb6b(_0x419a05._0x378d58)],this['_onMapClick'],this),(_0x318781=this['options'])!==null&&_0x318781!==void 0x0&&(_0x33216f=_0x318781[_0x41cb6b(_0x419a05._0x1e48f5)])!==null&&_0x33216f!==void 0x0&&_0x33216f[_0x41cb6b(_0x419a05._0x49b7d6)]&&this['_map'][_0x41cb6b(_0x419a05._0x3da54a)](mars3d__namespace[_0x41cb6b(0xc1)]['mouseMove'],this[_0x41cb6b(0xa7)],this);}['_onMoveStartEvent'](){const _0x4a8b26={_0x447e0f:0x93,_0x54184d:0xac,_0x126b3e:0xab},_0x19c34a=_0x9baa0e;this['_mapVRenderer']&&(this['_mapVRenderer']['animatorMovestartEvent'](),this['_map'][_0x19c34a(_0x4a8b26._0x447e0f)](mars3d__namespace['EventType'][_0x19c34a(_0x4a8b26._0x54184d)],this[_0x19c34a(_0x4a8b26._0x126b3e)],this),this['_map']['on'](mars3d__namespace['EventType']['postRender'],this[_0x19c34a(0xab)],this));}['_onMoveEndEvent'](){const _0x5e1073=_0x9baa0e;this['_mapVRenderer']&&(this['_map'][_0x5e1073(0x93)](mars3d__namespace['EventType'][_0x5e1073(0xac)],this['_reset'],this),this['_mapVRenderer']['animatorMoveendEvent'](),this['_reset']());}[_0x9baa0e(0x94)](_0x469f05,_0x58b123){this['_removedHook'](),this['_addedHook']();}['addData'](_0x4b6816){this['_mapVRenderer']&&this['_mapVRenderer']['addData'](_0x4b6816,this['options']);}[_0x9baa0e(0x97)](_0x483771){const _0x44cc7a=_0x9baa0e;this['_mapVRenderer']&&this['_mapVRenderer']['updateData'](_0x483771,this[_0x44cc7a(0xce)]);}['getData'](){const _0x1df981=_0x9baa0e;return this['_mapVRenderer']&&(this['dataSet']=this[_0x1df981(0xd2)]['getData']()),this['dataSet'];}['removeData'](_0x3abe1b){this['_mapVRenderer']&&this['_mapVRenderer']['removeData'](_0x3abe1b);}[_0x9baa0e(0x98)](){const _0xdbffd3=_0x9baa0e;this['_mapVRenderer']&&this['_mapVRenderer'][_0xdbffd3(0xb9)]();}['_createCanvas'](){const _0xeb17f3={_0x2b27f6:0xc3,_0x399686:0x90,_0x208fcf:0xad,_0x56d047:0xda,_0x5cda93:0xad,_0x381909:0x83,_0x4a557d:0xce,_0x358e33:0xd6},_0x775360=_0x9baa0e,_0x4f17b1=mars3d__namespace['DomUtil']['create']('canvas','mars3d-mapv',this['_map'][_0x775360(_0xeb17f3._0x2b27f6)]);_0x4f17b1['id']=this['id'],_0x4f17b1['style']['position']='absolute',_0x4f17b1['style']['top']='0px',_0x4f17b1['style']['left']='0px',_0x4f17b1[_0x775360(0xa0)]=parseInt(this[_0x775360(0xdb)]['canvas'][_0x775360(0xa0)]),_0x4f17b1['height']=parseInt(this['_map']['canvas'][_0x775360(_0xeb17f3._0x399686)]),_0x4f17b1[_0x775360(0xad)]['width']=this[_0x775360(0xdb)]['canvas'][_0x775360(0xad)]['width'],_0x4f17b1['style']['height']=this['_map']['canvas']['style']['height'],_0x4f17b1[_0x775360(_0xeb17f3._0x208fcf)][_0x775360(_0xeb17f3._0x56d047)]=this[_0x775360(0xd8)]?'auto':'none',_0x4f17b1[_0x775360(_0xeb17f3._0x5cda93)]['zIndex']=this[_0x775360(0xce)][_0x775360(_0xeb17f3._0x381909)]??0x9;if(this[_0x775360(_0xeb17f3._0x4a557d)][_0x775360(_0xeb17f3._0x358e33)]==='2d'){const _0xd4f1c2=this['devicePixelRatio'];_0x4f17b1['getContext'](this['options'][_0x775360(0xd6)])['scale'](_0xd4f1c2,_0xd4f1c2);}return _0x4f17b1;}[_0x9baa0e(0xab)](){this['resize'](),this['render']();}['draw'](){this['_reset']();}['remove'](){const _0x5ed3c0={_0x28873d:0xc4},_0x52c7a3=_0x9baa0e;this[_0x52c7a3(0xd2)]&&(this['_mapVRenderer'][_0x52c7a3(0x80)](),this[_0x52c7a3(0xd2)]=null),this[_0x52c7a3(0xe5)][_0x52c7a3(_0x5ed3c0._0x28873d)]['removeChild'](this['canvas']);}['render'](){this['_mapVRenderer']['_canvasUpdate']();}[_0x9baa0e(0x7e)](){const _0x58da33={_0x1da2eb:0xe2,_0x21ee04:0xdd,_0x120487:0xad,_0x4e3bb4:0x90},_0x2dcb34=_0x9baa0e;if(this['canvas']){const _0x141874=this['canvas'];_0x141874['style'][_0x2dcb34(_0x58da33._0x1da2eb)]=_0x2dcb34(0xb1),_0x141874['style'][_0x2dcb34(_0x58da33._0x21ee04)]='0px',_0x141874['style']['left']='0px',_0x141874['width']=parseInt(this['_map']['canvas']['width']),_0x141874['height']=parseInt(this[_0x2dcb34(0xdb)][_0x2dcb34(0xe5)]['height']),_0x141874[_0x2dcb34(_0x58da33._0x120487)]['width']=this['_map']['canvas']['style']['width'],_0x141874['style'][_0x2dcb34(0x90)]=this['_map']['canvas']['style'][_0x2dcb34(_0x58da33._0x4e3bb4)];}}['getRectangle'](_0x3399e5){const _0x108adc={_0x496036:0x9a,_0x5e0e02:0x9f,_0x16f74a:0x8a,_0x4d2dba:0xde},_0x2390bc=_0x9baa0e;if(!this['dataSet']||!this['dataSet']['_data'])return;const _0x2c7bbe=mars3d__namespace['Util'][_0x2390bc(_0x108adc._0x496036)]({'type':_0x2390bc(0xb8),'features':this[_0x2390bc(0xc2)][_0x2390bc(0xb7)]});if(!_0x2c7bbe)return;return _0x3399e5!==null&&_0x3399e5!==void 0x0&&_0x3399e5[_0x2390bc(_0x108adc._0x5e0e02)]?_0x2c7bbe:Cesium[_0x2390bc(0xd3)]['fromDegrees'](_0x2c7bbe['xmin'],_0x2c7bbe[_0x2390bc(0xc6)],_0x2c7bbe[_0x2390bc(_0x108adc._0x16f74a)],_0x2c7bbe[_0x2390bc(_0x108adc._0x4d2dba)]);}['_onMapClick'](_0xfec738){this['_cache_event']=_0xfec738,this['_mapVRenderer']&&this['_mapVRenderer']['clickEvent'](_0xfec738['windowPosition'],_0xfec738);}['_onMapMouseMove'](_0x1bd6bb){const _0x3a7161={_0x2bcf97:0xd2},_0x5e3d49=_0x9baa0e;this['_cache_event']=_0x1bd6bb,this[_0x5e3d49(_0x3a7161._0x2bcf97)]&&this[_0x5e3d49(_0x3a7161._0x2bcf97)]['mousemoveEvent'](_0x1bd6bb['windowPosition'],_0x1bd6bb);}['on'](_0x5dab6e,_0x29463a,_0x2370d5){const _0x5e2954={_0x246ef5:0xc9,_0x22c074:0xce,_0x3612ae:0xc1},_0x3c31b3=_0x9baa0e;this['options']['methods']=this['options']['methods']||{};if(_0x5dab6e===mars3d__namespace['EventType']['click'])this['options'][_0x3c31b3(_0x5e2954._0x246ef5)]['click']=_0x5096cf=>{_0x5096cf&&_0x29463a['bind'](_0x2370d5)({...this['_cache_event'],'layer':this,'data':_0x5096cf});},this['_map']['on'](mars3d__namespace[_0x3c31b3(0xc1)]['click'],this['_onMapClick'],this);else _0x5dab6e===mars3d__namespace['EventType']['mouseMove']&&(this[_0x3c31b3(_0x5e2954._0x22c074)]['methods'][_0x3c31b3(0xa5)]=_0x1c6316=>{_0x1c6316&&_0x29463a['bind'](_0x2370d5)({...this['_cache_event'],'layer':this,'data':_0x1c6316});},this['_map']['on'](mars3d__namespace[_0x3c31b3(_0x5e2954._0x3612ae)]['mouseMove'],this['_onMapMouseMove'],this));return this;}['off'](_0x7ebeee,_0x59f9b1){const _0x37cbf5={_0x3b9130:0xbc,_0x39fda5:0x93},_0x56d4f0=_0x9baa0e;if(_0x7ebeee==='click'){var _0x56db43;this[_0x56d4f0(0xdb)]['off'](_0x7ebeee,this['_onMapClick'],this),(_0x56db43=this['options']['methods'])!==null&&_0x56db43!==void 0x0&&_0x56db43['mousemove']&&delete this['options']['methods'][_0x56d4f0(_0x37cbf5._0x3b9130)];}else{if(_0x7ebeee==='mouseMove'){var _0x3a088b;this['_map'][_0x56d4f0(_0x37cbf5._0x39fda5)](_0x7ebeee,this['_onMapMouseMove'],this),(_0x3a088b=this[_0x56d4f0(0xce)][_0x56d4f0(0xc9)])!==null&&_0x3a088b!==void 0x0&&_0x3a088b['mousemove']&&delete this['options']['methods']['mousemove'];}}return this;}}mars3d__namespace[_0x9baa0e(0xba)]['register']('mapv',MapVLayer),mars3d__namespace[_0x9baa0e(0xd5)]['MapVLayer']=MapVLayer,mars3d__namespace['mapv']=mapv__namespace,exports['MapVLayer']=MapVLayer,Object['keys'](mapv)[_0x9baa0e(0x99)](function(_0x28db2c){if(_0x28db2c!=='default'&&!exports['hasOwnProperty'](_0x28db2c))Object['defineProperty'](exports,_0x28db2c,{'enumerable':!![],'get':function(){return mapv[_0x28db2c];}});}),Object['defineProperty'](exports,_0x9baa0e(0xe1),{'value':!![]});
}));
