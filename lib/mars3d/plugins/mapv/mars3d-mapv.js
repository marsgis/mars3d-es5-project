/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.5.2
 * 编译日期：2023-04-03 18:07:11
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';var _0x5d7410=_0xfc0a;(function(_0x455268,_0x432ed5){var _0x7c7922={_0x58decc:0x163,_0x5d278e:0x162,_0x3627db:0x10f,_0x212cb5:0x136},_0x448d64=_0xfc0a,_0x33292a=_0x455268();while(!![]){try{var _0x3ee940=-parseInt(_0x448d64(0x151))/0x1*(-parseInt(_0x448d64(_0x7c7922._0x58decc))/0x2)+-parseInt(_0x448d64(_0x7c7922._0x5d278e))/0x3+parseInt(_0x448d64(0x154))/0x4+-parseInt(_0x448d64(0x14a))/0x5*(parseInt(_0x448d64(0x105))/0x6)+-parseInt(_0x448d64(_0x7c7922._0x3627db))/0x7+-parseInt(_0x448d64(0x149))/0x8+-parseInt(_0x448d64(_0x7c7922._0x212cb5))/0x9*(-parseInt(_0x448d64(0x10c))/0xa);if(_0x3ee940===_0x432ed5)break;else _0x33292a['push'](_0x33292a['shift']());}catch(_0x584efa){_0x33292a['push'](_0x33292a['shift']());}}}(_0x4690,0xd1deb));function _interopNamespace(_0x445303){var _0x244f7c={_0x361597:0x153},_0x4c3c5a=_0xfc0a;if(_0x445303&&_0x445303['__esModule'])return _0x445303;var _0x36889b=Object['create'](null);return _0x445303&&Object['keys'](_0x445303)[_0x4c3c5a(0x11c)](function(_0x33807b){var _0x392e95=_0x4c3c5a;if(_0x33807b!=='default'){var _0x277d49=Object['getOwnPropertyDescriptor'](_0x445303,_0x33807b);Object[_0x392e95(_0x244f7c._0x361597)](_0x36889b,_0x33807b,_0x277d49['get']?_0x277d49:{'enumerable':!![],'get':function(){return _0x445303[_0x33807b];}});}}),_0x36889b['default']=_0x445303,_0x36889b;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);function ownKeys(_0x3f16fc,_0x38c21b){var _0x21881={_0x2ac40a:0x158},_0x56e3c0={_0x102a67:0x11f},_0x403207=_0xfc0a,_0x2d6db1=Object['keys'](_0x3f16fc);if(Object[_0x403207(0x130)]){var _0x1ea5d8=Object['getOwnPropertySymbols'](_0x3f16fc);_0x38c21b&&(_0x1ea5d8=_0x1ea5d8[_0x403207(_0x21881._0x2ac40a)](function(_0x595f42){var _0x3e466e=_0x403207;return Object['getOwnPropertyDescriptor'](_0x3f16fc,_0x595f42)[_0x3e466e(_0x56e3c0._0x102a67)];})),_0x2d6db1['push']['apply'](_0x2d6db1,_0x1ea5d8);}return _0x2d6db1;}function _objectSpread2(_0x174b90){var _0x32844a=_0xfc0a;for(var _0x364a98=0x1;_0x364a98<arguments['length'];_0x364a98++){var _0x4c9475=null!=arguments[_0x364a98]?arguments[_0x364a98]:{};_0x364a98%0x2?ownKeys(Object(_0x4c9475),!0x0)[_0x32844a(0x11c)](function(_0x581bd8){_defineProperty(_0x174b90,_0x581bd8,_0x4c9475[_0x581bd8]);}):Object['getOwnPropertyDescriptors']?Object['defineProperties'](_0x174b90,Object['getOwnPropertyDescriptors'](_0x4c9475)):ownKeys(Object(_0x4c9475))['forEach'](function(_0x545632){Object['defineProperty'](_0x174b90,_0x545632,Object['getOwnPropertyDescriptor'](_0x4c9475,_0x545632));});}return _0x174b90;}function _classCallCheck(_0x2fc9d4,_0x4ba5e7){if(!(_0x2fc9d4 instanceof _0x4ba5e7))throw new TypeError('Cannot\x20call\x20a\x20class\x20as\x20a\x20function');}function _defineProperties(_0xad59ab,_0x8d9f8f){var _0x3a30f5={_0x47e464:0x153},_0x1daae5=_0xfc0a;for(var _0x557b32=0x0;_0x557b32<_0x8d9f8f[_0x1daae5(0x143)];_0x557b32++){var _0x1fb0f9=_0x8d9f8f[_0x557b32];_0x1fb0f9['enumerable']=_0x1fb0f9['enumerable']||![],_0x1fb0f9['configurable']=!![];if('value'in _0x1fb0f9)_0x1fb0f9['writable']=!![];Object[_0x1daae5(_0x3a30f5._0x47e464)](_0xad59ab,_0x1fb0f9['key'],_0x1fb0f9);}}function _createClass(_0x55565a,_0x4d8d3e,_0x2bdb79){var _0x40a4c0=_0xfc0a;if(_0x4d8d3e)_defineProperties(_0x55565a['prototype'],_0x4d8d3e);if(_0x2bdb79)_defineProperties(_0x55565a,_0x2bdb79);return Object[_0x40a4c0(0x153)](_0x55565a,'prototype',{'writable':![]}),_0x55565a;}function _defineProperty(_0x5b4fb0,_0xb5cb0c,_0x1eebe7){var _0x3daa0f={_0x262dca:0x153},_0x254b04=_0xfc0a;return _0xb5cb0c in _0x5b4fb0?Object[_0x254b04(_0x3daa0f._0x262dca)](_0x5b4fb0,_0xb5cb0c,{'value':_0x1eebe7,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x5b4fb0[_0xb5cb0c]=_0x1eebe7,_0x5b4fb0;}function _inherits(_0x3d3ba6,_0x49d947){var _0x17192a={_0x24ac7b:0x115},_0x246aa8=_0xfc0a;if(typeof _0x49d947!=='function'&&_0x49d947!==null)throw new TypeError('Super\x20expression\x20must\x20either\x20be\x20null\x20or\x20a\x20function');_0x3d3ba6['prototype']=Object['create'](_0x49d947&&_0x49d947[_0x246aa8(0x115)],{'constructor':{'value':_0x3d3ba6,'writable':!![],'configurable':!![]}}),Object['defineProperty'](_0x3d3ba6,_0x246aa8(_0x17192a._0x24ac7b),{'writable':![]});if(_0x49d947)_setPrototypeOf(_0x3d3ba6,_0x49d947);}function _getPrototypeOf(_0x1b52e1){return _getPrototypeOf=Object['setPrototypeOf']?Object['getPrototypeOf']:function _0x1095ea(_0x4ac3e7){var _0x35f030=_0xfc0a;return _0x4ac3e7['__proto__']||Object[_0x35f030(0x107)](_0x4ac3e7);},_getPrototypeOf(_0x1b52e1);}function _setPrototypeOf(_0x343b53,_0x3616b4){return _setPrototypeOf=Object['setPrototypeOf']||function _0x70d4b0(_0x45fa78,_0x1f2bce){return _0x45fa78['__proto__']=_0x1f2bce,_0x45fa78;},_setPrototypeOf(_0x343b53,_0x3616b4);}function _isNativeReflectConstruct(){var _0x12fe4b={_0x83759c:0x12f},_0x5ab851=_0xfc0a;if(typeof Reflect==='undefined'||!Reflect['construct'])return![];if(Reflect['construct']['sham'])return![];if(typeof Proxy==='function')return!![];try{return Boolean['prototype']['valueOf'][_0x5ab851(_0x12fe4b._0x83759c)](Reflect['construct'](Boolean,[],function(){})),!![];}catch(_0x1cac7d){return![];}}function _assertThisInitialized(_0x12b83c){if(_0x12b83c===void 0x0)throw new ReferenceError('this\x20hasn\x27t\x20been\x20initialised\x20-\x20super()\x20hasn\x27t\x20been\x20called');return _0x12b83c;}function _0xfc0a(_0x3fed1c,_0x2003b3){var _0x469075=_0x4690();return _0xfc0a=function(_0xfc0a2a,_0x3a506d){_0xfc0a2a=_0xfc0a2a-0x104;var _0x2c9179=_0x469075[_0xfc0a2a];return _0x2c9179;},_0xfc0a(_0x3fed1c,_0x2003b3);}function _0x4690(){var _0x21d660=['_data','off','Cartesian3','top','9174832dfXXzr','330BCAzoR','fixedHeight','mousemove','_addedHook','scene','removeChild','devicePixelRatio','116rClFnb','getHeight','defineProperty','4085564cHxUXi','save','_setOptionsHook','xmin','filter','create','stepsRange','width','globe','getContext','trails','height','getData','EventType','3406359jrCFPP','25846fdwHoh','transferCoordinate','animation','_mountedHook','isPointVisible','layer','DataSet','methods','34578jYHKUq','click','getPrototypeOf','postRender','SCENE3D','stopAniamation','get','26260odChAL','windowPosition','drawContext','11405933JYtcLf','pointerEvents','steps','Cesium','render','updateData','prototype','_mapVRenderer','COLOR_BUFFER_BIT','_onMapMouseMove','fillStyle','_onMapClick','_pointerEvents','forEach','options','fromDegrees','enumerable','isFormat','_canvasUpdate','_cache_event','dataSet','initDevicePixelRatio','clear','canvas','destroy','_map','mouseDown','context','push','set','size','position','call','getOwnPropertySymbols','style','unbindEvent','none','left','LineString','9018WPlRNi','_coordinates','clampToGround','mapvFixedHeight','hasOwnProperty','Util','addAnimatorEvent','destination-out','_onMoveEndEvent','absolute','_onMoveStartEvent','fillRect','_reset','length','0px'];_0x4690=function(){return _0x21d660;};return _0x4690();}function _possibleConstructorReturn(_0x73af93,_0x49529d){if(_0x49529d&&(typeof _0x49529d==='object'||typeof _0x49529d==='function'))return _0x49529d;else{if(_0x49529d!==void 0x0)throw new TypeError('Derived\x20constructors\x20may\x20only\x20return\x20object\x20or\x20undefined');}return _assertThisInitialized(_0x73af93);}function _createSuper(_0x561573){var _0x1178a3=_isNativeReflectConstruct();return function _0x281bf2(){var _0xc6842c=_getPrototypeOf(_0x561573),_0x16ab31;if(_0x1178a3){var _0x3768e2=_getPrototypeOf(this)['constructor'];_0x16ab31=Reflect['construct'](_0xc6842c,arguments,_0x3768e2);}else _0x16ab31=_0xc6842c['apply'](this,arguments);return _possibleConstructorReturn(this,_0x16ab31);};}function _superPropBase(_0x5af0e4,_0x49f463){var _0x380f5b={_0x57ddb7:0x12f},_0x29a52d=_0xfc0a;while(!Object['prototype']['hasOwnProperty'][_0x29a52d(_0x380f5b._0x57ddb7)](_0x5af0e4,_0x49f463)){_0x5af0e4=_getPrototypeOf(_0x5af0e4);if(_0x5af0e4===null)break;}return _0x5af0e4;}function _get(){var _0x23b56b=_0xfc0a;return typeof Reflect!=='undefined'&&Reflect[_0x23b56b(0x10b)]?_get=Reflect['get']:_get=function _0x2d58b1(_0x5b381b,_0x197c64,_0x3b1f5e){var _0x40a0c5=_superPropBase(_0x5b381b,_0x197c64);if(!_0x40a0c5)return;var _0x38aa9a=Object['getOwnPropertyDescriptor'](_0x40a0c5,_0x197c64);if(_0x38aa9a['get'])return _0x38aa9a['get']['call'](arguments['length']<0x3?_0x5b381b:_0x3b1f5e);return _0x38aa9a['value'];},_get['apply'](this,arguments);}var Cesium$1=mars3d__namespace[_0x5d7410(0x112)],baiduMapLayer=mapv__namespace?mapv__namespace['baiduMapLayer']:null,BaseLayer$1=baiduMapLayer?baiduMapLayer['__proto__']:Function,MapVRenderer=function(_0x45706d){var _0x5b393e={_0x177ae3:0x13c,_0x144107:0x114,_0x4ac8a9:0x127},_0x2a072c={_0x326441:0x125,_0x9ef707:0x15d},_0x2291b5={_0x452e7c:0x10b},_0x1396cb={_0x2b30c0:0x14e,_0x4732b3:0x13d,_0x17eea1:0x119,_0x724122:0x126,_0x2200c1:0x11d,_0x8af3eb:0x117,_0x49370f:0x147,_0xee7b20:0x11e,_0x3a7c89:0x10e},_0x43b00d={_0x3f2d78:0x165,_0x37a044:0x111},_0x374f42={_0x2318a2:0x150},_0x2af664={_0x198a66:0x12f,_0x2afb4e:0x14e},_0x4fc888=_0x5d7410;_inherits(_0x2eb088,_0x45706d);var _0x19151b=_createSuper(_0x2eb088);function _0x2eb088(_0x364b44,_0x1a1c28,_0x1a6ee9,_0x2fb743){var _0x46bf36=_0xfc0a,_0x5875e1;_classCallCheck(this,_0x2eb088),_0x5875e1=_0x19151b[_0x46bf36(_0x2af664._0x198a66)](this,_0x364b44,_0x1a1c28,_0x1a6ee9);if(!BaseLayer$1)return _possibleConstructorReturn(_0x5875e1);return _0x5875e1['map']=_0x364b44,_0x5875e1[_0x46bf36(_0x2af664._0x2afb4e)]=_0x364b44[_0x46bf36(_0x2af664._0x2afb4e)],_0x5875e1['dataSet']=_0x1a1c28,_0x1a6ee9=_0x1a6ee9||{},_0x5875e1['init'](_0x1a6ee9),_0x5875e1['argCheck'](_0x1a6ee9),_0x5875e1['initDevicePixelRatio'](),_0x5875e1['canvasLayer']=_0x2fb743,_0x5875e1[_0x46bf36(0x10a)]=!0x1,_0x5875e1['animation']=_0x1a6ee9['animation'],_0x5875e1;}return _createClass(_0x2eb088,[{'key':'initDevicePixelRatio','value':function _0x4fdcb1(){var _0x85f9ad=_0xfc0a;this['devicePixelRatio']=window[_0x85f9ad(_0x374f42._0x2318a2)]||0x1;}},{'key':_0x4fc888(_0x5b393e._0x177ae3),'value':function _0x3a7ff2(){}},{'key':'animatorMovestartEvent','value':function _0x4d4775(){var _0x271646=_0x4fc888,_0x1d3dbe=this['options'][_0x271646(_0x43b00d._0x3f2d78)];this['isEnabledTime']()&&this['animator']&&(this[_0x271646(_0x43b00d._0x37a044)]['step']=_0x1d3dbe[_0x271646(0x15a)]['start']);}},{'key':'animatorMoveendEvent','value':function _0x3bda26(){this['isEnabledTime']()&&this['animator'];}},{'key':'getContext','value':function _0x476b89(){return this['canvasLayer']['canvas']['getContext'](this['context']);}},{'key':'init','value':function _0x4698e2(_0xb5c1de){this['options']=_0xb5c1de,this['initDataRange'](_0xb5c1de),this['context']=this['options']['context']||'2d',this['options']['zIndex']&&this['canvasLayer']&&this['canvasLayer']['setZIndex']&&this['canvasLayer']['setZIndex'](this['options']['zIndex']),this['initAnimator']();}},{'key':'_canvasUpdate','value':function _0x1a8866(_0x964836){var _0x5aaed2={_0x49f8d7:0x15e},_0x30c31a={_0x41e409:0x152},_0x7ebcf0=_0x4fc888,_0x3f8dd5=this[_0x7ebcf0(_0x1396cb._0x2b30c0)];if(this['canvasLayer']&&!this['stopAniamation']){var _0x190f64=this['options']['animation'],_0x444ea2=this['getContext']();if(this['isEnabledTime']()){if(void 0x0===_0x964836)return void this[_0x7ebcf0(0x125)](_0x444ea2);this[_0x7ebcf0(0x12a)]==='2d'&&(_0x444ea2[_0x7ebcf0(0x155)](),_0x444ea2['globalCompositeOperation']=_0x7ebcf0(_0x1396cb._0x4732b3),_0x444ea2[_0x7ebcf0(_0x1396cb._0x17eea1)]='rgba(0,\x200,\x200,\x20.1)',_0x444ea2[_0x7ebcf0(0x141)](0x0,0x0,_0x444ea2[_0x7ebcf0(_0x1396cb._0x724122)]['width'],_0x444ea2['canvas']['height']),_0x444ea2['restore']());}else this['clear'](_0x444ea2);if(this['context']==='2d')for(var _0xcd930f in this[_0x7ebcf0(_0x1396cb._0x2200c1)]){_0x444ea2[_0xcd930f]=this['options'][_0xcd930f];}else _0x444ea2['clear'](_0x444ea2[_0x7ebcf0(_0x1396cb._0x8af3eb)]);var _0xeaa7d2={'transferCoordinate':function _0x23e73b(_0x32e727){var _0x3922b1=_0x7ebcf0,_0x19a86d=null,_0x315b58=_0x3f8dd5['mapvFixedHeight'];_0x3f8dd5['mapvAutoHeight']&&(_0x315b58=_0x3f8dd5[_0x3922b1(0x15c)][_0x3922b1(_0x30c31a._0x41e409)](Cesium$1['Cartographic']['fromDegrees'](_0x32e727[0x0],_0x32e727[0x1])));var _0x25c73d=Cesium$1['Cartesian3']['fromDegrees'](_0x32e727[0x0],_0x32e727[0x1],_0x315b58);if(!_0x25c73d)return _0x19a86d;var _0x6d846b=_0x3f8dd5['cartesianToCanvasCoordinates'](_0x25c73d);if(!_0x6d846b)return _0x19a86d;if(_0x3f8dd5['mapvDepthTest']&&_0x3f8dd5['mode']===Cesium$1['SceneMode'][_0x3922b1(0x109)]){var _0x55fd6e=new Cesium$1['EllipsoidalOccluder'](_0x3f8dd5['globe']['ellipsoid'],_0x3f8dd5['camera']['positionWC']),_0x48ad53=_0x55fd6e[_0x3922b1(0x167)](_0x25c73d);if(!_0x48ad53)return _0x19a86d;}return[_0x6d846b['x'],_0x6d846b['y']];}};void 0x0!==_0x964836&&(_0xeaa7d2['filter']=function(_0x35e82b){var _0x10b1f2=_0x7ebcf0,_0x31507d=_0x190f64[_0x10b1f2(_0x5aaed2._0x49f8d7)]||0xa;return!!(_0x964836&&_0x35e82b['time']>_0x964836-_0x31507d&&_0x35e82b['time']<_0x964836);});var _0x130a5d=this[_0x7ebcf0(0x123)]['get'](_0xeaa7d2);this['processData'](_0x130a5d),this[_0x7ebcf0(0x11d)]['unit']==='m'&&this[_0x7ebcf0(0x11d)][_0x7ebcf0(0x12d)],this['options']['_size']=this['options']['size'];var _0x45df16=_0x3f8dd5['cartesianToCanvasCoordinates'](Cesium$1[_0x7ebcf0(_0x1396cb._0x49370f)][_0x7ebcf0(_0x1396cb._0xee7b20)](0x0,0x0));if(!_0x45df16)return;this[_0x7ebcf0(_0x1396cb._0x3a7c89)](_0x444ea2,new mapv__namespace['DataSet'](_0x130a5d),this['options'],_0x45df16),this[_0x7ebcf0(0x11d)]['updateCallback']&&this['options']['updateCallback'](_0x964836);}}},{'key':_0x4fc888(_0x5b393e._0x144107),'value':function _0x3b4165(_0x1f8f1e,_0x1dd5f4){var _0x26a43e=_0x4fc888,_0xf62a70=_0x1f8f1e;_0xf62a70&&_0xf62a70['get']&&(_0xf62a70=_0xf62a70[_0x26a43e(_0x2291b5._0x452e7c)]()),void 0x0!==_0xf62a70&&this['dataSet']['set'](_0xf62a70),_get(_getPrototypeOf(_0x2eb088[_0x26a43e(0x115)]),'update',this)['call'](this,{'options':_0x1dd5f4});}},{'key':'addData','value':function _0x53adcf(_0xdbab78,_0x4aef80){var _0x3bb916=_0x4fc888,_0x1ef597=_0xdbab78;_0xdbab78&&_0xdbab78[_0x3bb916(0x10b)]&&(_0x1ef597=_0xdbab78['get']()),this['dataSet']['add'](_0x1ef597),this['update']({'options':_0x4aef80});}},{'key':'getData','value':function _0xb7e8a3(){return this['dataSet'];}},{'key':'removeData','value':function _0x55fa6c(_0x4cacf9){var _0x25f153=_0x4fc888;if(this['dataSet']){var _0x483af3=this[_0x25f153(0x123)]['get']({'filter':function _0x9316c5(_0x1cef4b){return _0x4cacf9==null||typeof _0x4cacf9!=='function'||!_0x4cacf9(_0x1cef4b);}});this['dataSet'][_0x25f153(0x12c)](_0x483af3),this['update']({'options':null});}}},{'key':'clearData','value':function _0x45f47b(){var _0x3b1bae=_0x4fc888;this[_0x3b1bae(0x123)]&&this['dataSet']['clear'](),this['update']({'options':null});}},{'key':'draw','value':function _0x283307(){this['canvasLayer']['draw']();}},{'key':'clear','value':function _0xd381c7(_0xcda432){var _0x24af3d=_0x4fc888;_0xcda432&&_0xcda432['clearRect']&&_0xcda432['clearRect'](0x0,0x0,_0xcda432['canvas'][_0x24af3d(0x15b)],_0xcda432['canvas'][_0x24af3d(0x15f)]);}},{'key':_0x4fc888(_0x5b393e._0x4ac8a9),'value':function _0x492925(){var _0xb7f477=_0x4fc888;this[_0xb7f477(_0x2a072c._0x326441)](this[_0xb7f477(_0x2a072c._0x9ef707)]()),this['clearData'](),this['animator']&&this['animator']['stop'](),this['animator']=null,this['canvasLayer']=null;}}]),_0x2eb088;}(BaseLayer$1);if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace['DataSet'])mapv__namespace[_0x5d7410(0x169)]['prototype'][_0x5d7410(0x164)]=function(_0x477acc,_0x1fddf0,_0x5b591c,_0x4a2a64){var _0x401d39={_0x1dbbd5:0x137,_0x13da45:0x135,_0x2a93bb:0x143},_0x240c7d=_0x5d7410;_0x4a2a64=_0x4a2a64||_0x240c7d(_0x401d39._0x1dbbd5),_0x5b591c=_0x5b591c||'coordinates';for(var _0x229119=0x0;_0x229119<_0x477acc['length'];_0x229119++){var _0x121162=_0x477acc[_0x229119]['geometry'],_0x336651=_0x121162[_0x5b591c];switch(_0x121162['type']){case'Point':{var _0xd006a8=_0x1fddf0(_0x336651);_0xd006a8?_0x121162[_0x4a2a64]=_0xd006a8:_0x121162[_0x4a2a64]=[-0x3e7,-0x3e7];}break;case _0x240c7d(_0x401d39._0x13da45):{var _0x41953a=[];for(var _0x145993=0x0;_0x145993<_0x336651[_0x240c7d(_0x401d39._0x2a93bb)];_0x145993++){var _0x343daf=_0x1fddf0(_0x336651[_0x145993]);_0x343daf&&_0x41953a[_0x240c7d(0x12b)](_0x343daf);}_0x121162[_0x4a2a64]=_0x41953a;}break;case'MultiLineString':case'Polygon':{var _0x1a9e64=_0x4f78a8(_0x336651);_0x121162[_0x4a2a64]=_0x1a9e64;}break;case'MultiPolygon':{var _0x312a4c=[];for(var _0x55550a=0x0;_0x55550a<_0x336651['length'];_0x55550a++){var _0x5cc31e=_0x4f78a8(_0x336651[_0x55550a]);_0x5cc31e['length']>0x0&&_0x312a4c['push'](_0x5cc31e);}_0x121162[_0x4a2a64]=_0x312a4c;}break;}}function _0x4f78a8(_0x417daf){var _0x17c91f=[];for(var _0x28bd92=0x0;_0x28bd92<_0x417daf['length'];_0x28bd92++){var _0x21fb5b=_0x417daf[_0x28bd92],_0x2d093e=[];for(var _0x2f81ea=0x0;_0x2f81ea<_0x21fb5b['length'];_0x2f81ea++){var _0x47703c=_0x1fddf0(_0x21fb5b[_0x2f81ea]);_0x47703c&&_0x2d093e['push'](_0x47703c);}_0x2d093e['length']>0x0&&_0x17c91f['push'](_0x2d093e);}return _0x17c91f;}return _0x477acc;};else throw new Error('请引入\x20mapv\x20库\x20');var Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'],divId=0x0,MapVLayer=function(_0x2a5342){var _0x12fb1d={_0x444e7b:0x166,_0x364871:0x156,_0x2ac328:0x142,_0x2e9cf8:0x11a},_0x39bdbb={_0x3cbf67:0x128,_0x326075:0x146,_0x40c425:0x14c},_0x39c805={_0x34abb2:0x11d,_0x48be26:0x128},_0x1239d3={_0x3beea6:0x10d},_0x5b08e4={_0xf1b6c6:0x120},_0x4a7b7e={_0x12c68b:0x13f,_0x4838b4:0x148,_0x100686:0x126,_0x2dc411:0x131},_0x30fdde={_0x44b86b:0x121},_0x51c13e={_0x23f45b:0x113},_0x87fee0={_0x42527d:0x128,_0x37d16f:0x144,_0x3a9353:0x134,_0xf3795c:0x15f,_0xea6c55:0x15f},_0x3c2625={_0x22baf6:0x160},_0x3c13ac={_0xcc729e:0x116},_0xc2eaa1={_0x408fbe:0x116,_0x2b247a:0x108},_0x5c8bf1={_0x2384b6:0x146,_0xa652e8:0x128,_0xd1943d:0x146,_0x577c30:0x161},_0x1a7e60={_0x5a0258:0x106,_0x410359:0x14c},_0x2d9096={_0x27e8cb:0x132,_0x297ad6:0x127,_0x21c28a:0x126},_0x22b672={_0x3f7a69:0x123,_0x1ce02b:0x143,_0xbdc1d0:0x11d,_0x2c872a:0x124},_0x2059d1={_0x9102ee:0x128,_0xc887f5:0x138,_0x2fba3a:0x14b},_0x10a2d0={_0x1f63f5:0x126},_0x432463={_0x54a9b7:0x126},_0x4879fa=_0x5d7410;_inherits(_0x4d42ec,_0x2a5342);var _0x586f03=_createSuper(_0x4d42ec);function _0x4d42ec(_0x1d31ba,_0x5a0116){var _0x29fb17=_0xfc0a,_0x198c50;return _classCallCheck(this,_0x4d42ec),_0x198c50=_0x586f03['call'](this,_0x1d31ba),_0x198c50['_pointerEvents']=_0x198c50['options']['pointerEvents'],_0x198c50['dataSet']=_0x5a0116||new mapv__namespace[(_0x29fb17(0x169))](_0x1d31ba['data']),_0x198c50['canvas']=null,_0x198c50;}return _createClass(_0x4d42ec,[{'key':'pointerEvents','get':function _0x210e68(){return this['_pointerEvents'];},'set':function _0x1cf81a(_0x3d19a3){var _0x2e07a4=_0xfc0a;this['_pointerEvents']=_0x3d19a3,this['canvas']&&(_0x3d19a3?this['canvas']['style']['pointerEvents']='all':this[_0x2e07a4(_0x432463._0x54a9b7)]['style']['pointerEvents']='none');}},{'key':'_showHook','value':function _0x151024(_0xb06570){var _0x368dd3=_0xfc0a;_0xb06570?this['canvas']['style']['display']='block':this[_0x368dd3(_0x10a2d0._0x1f63f5)][_0x368dd3(0x131)]['display']='none';}},{'key':_0x4879fa(_0x12fb1d._0x444e7b),'value':function _0x1d1c2c(){var _0x53af6c=_0x4879fa,_0x163d84,_0x38ba75,_0x26aafe;this['_map']['scene']['mapvDepthTest']=(_0x163d84=this[_0x53af6c(0x11d)]['depthTest'])!==null&&_0x163d84!==void 0x0?_0x163d84:!![],this[_0x53af6c(_0x2059d1._0x9102ee)][_0x53af6c(0x14e)]['mapvAutoHeight']=(_0x38ba75=this['options'][_0x53af6c(_0x2059d1._0xc887f5)])!==null&&_0x38ba75!==void 0x0?_0x38ba75:![],this['_map']['scene'][_0x53af6c(0x139)]=(_0x26aafe=this['options'][_0x53af6c(_0x2059d1._0x2fba3a)])!==null&&_0x26aafe!==void 0x0?_0x26aafe:0x0;}},{'key':'_addedHook','value':function _0x5abe40(){var _0x5a0228=_0x4879fa;this['dataSet']&&(!this[_0x5a0228(_0x22b672._0x3f7a69)]['_data']||this['dataSet']['_data'][_0x5a0228(_0x22b672._0x1ce02b)]===0x0)&&(this[_0x5a0228(0x123)]['_data']=[]['concat'](this['dataSet']['_dataCache'])),this['_mapVRenderer']=new MapVRenderer(this[_0x5a0228(0x128)],this['dataSet'],this[_0x5a0228(_0x22b672._0xbdc1d0)],this),this[_0x5a0228(_0x22b672._0x2c872a)](),this['canvas']=this['_createCanvas'](),this['render']=this[_0x5a0228(0x113)]['bind'](this),this['bindEvent'](),this['_reset']();}},{'key':'_removedHook','value':function _0x229db5(){var _0x523b12=_0x4879fa;this[_0x523b12(_0x2d9096._0x27e8cb)](),this['_mapVRenderer']&&(this['_mapVRenderer'][_0x523b12(_0x2d9096._0x297ad6)](),this['_mapVRenderer']=null),this['canvas']['parentElement'][_0x523b12(0x14f)](this[_0x523b12(_0x2d9096._0x21c28a)]);}},{'key':'initDevicePixelRatio','value':function _0x53d1e5(){var _0x35323b=_0x4879fa;this['devicePixelRatio']=window[_0x35323b(0x150)]||0x1;}},{'key':'bindEvent','value':function _0x47cadc(){var _0x484b53=_0x4879fa,_0x153a5f,_0x4521f4,_0x2455bf,_0x94617d;this['_map']['on'](mars3d__namespace['EventType'][_0x484b53(0x129)],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['cameraMoveStart'],this['_onMoveStartEvent'],this),this[_0x484b53(0x128)]['on'](mars3d__namespace['EventType']['cameraMoveEnd'],this['_onMoveEndEvent'],this),(_0x153a5f=this[_0x484b53(0x11d)])!==null&&_0x153a5f!==void 0x0&&(_0x4521f4=_0x153a5f['methods'])!==null&&_0x4521f4!==void 0x0&&_0x4521f4[_0x484b53(_0x1a7e60._0x5a0258)]&&this[_0x484b53(0x128)]['on'](mars3d__namespace[_0x484b53(0x161)]['click'],this['_onMapClick'],this),(_0x2455bf=this['options'])!==null&&_0x2455bf!==void 0x0&&(_0x94617d=_0x2455bf['methods'])!==null&&_0x94617d!==void 0x0&&_0x94617d[_0x484b53(_0x1a7e60._0x410359)]&&this[_0x484b53(0x128)]['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x484b53(0x118)],this);}},{'key':'unbindEvent','value':function _0x484f4e(){var _0x5f052a=_0x4879fa,_0x5d5d90,_0x57e90c,_0x27fae5,_0x77f6c8;this['_map']['off'](mars3d__namespace['EventType']['mouseDown'],this['_onMoveStartEvent'],this),this['_map'][_0x5f052a(_0x5c8bf1._0x2384b6)](mars3d__namespace['EventType']['cameraMoveStart'],this[_0x5f052a(0x140)],this),this[_0x5f052a(_0x5c8bf1._0xa652e8)]['off'](mars3d__namespace['EventType']['cameraMoveEnd'],this['_onMoveEndEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),(_0x5d5d90=this['options'])!==null&&_0x5d5d90!==void 0x0&&(_0x57e90c=_0x5d5d90['methods'])!==null&&_0x57e90c!==void 0x0&&_0x57e90c['click']&&this['_map'][_0x5f052a(_0x5c8bf1._0xd1943d)](mars3d__namespace[_0x5f052a(_0x5c8bf1._0x577c30)]['click'],this['_onMapClick'],this),(_0x27fae5=this[_0x5f052a(0x11d)])!==null&&_0x27fae5!==void 0x0&&(_0x77f6c8=_0x27fae5['methods'])!==null&&_0x77f6c8!==void 0x0&&_0x77f6c8['mousemove']&&this['_map']['off'](mars3d__namespace[_0x5f052a(0x161)]['mouseMove'],this['_onMapMouseMove'],this);}},{'key':_0x4879fa(0x140),'value':function _0x146ee9(){var _0x513a3f=_0x4879fa;this['_mapVRenderer']&&(this['_mapVRenderer']['animatorMovestartEvent'](),this['_map'][_0x513a3f(0x146)](mars3d__namespace['EventType']['postRender'],this['_reset'],this),this['_map']['on'](mars3d__namespace[_0x513a3f(0x161)]['postRender'],this[_0x513a3f(0x142)],this));}},{'key':_0x4879fa(0x13e),'value':function _0x2d13cd(){var _0x4eb673=_0x4879fa;this[_0x4eb673(_0xc2eaa1._0x408fbe)]&&(this[_0x4eb673(0x128)]['off'](mars3d__namespace['EventType'][_0x4eb673(_0xc2eaa1._0x2b247a)],this['_reset'],this),this['_mapVRenderer']['animatorMoveendEvent'](),this['_reset']());}},{'key':_0x4879fa(_0x12fb1d._0x364871),'value':function _0x2d5072(_0x13c642,_0x5e5ed5){var _0x5ab614=_0x4879fa;this['_removedHook'](),this[_0x5ab614(0x14d)]();}},{'key':'addData','value':function _0x20bad5(_0x302f53){var _0x1e0ba0=_0x4879fa;this[_0x1e0ba0(0x116)]&&this['_mapVRenderer']['addData'](_0x302f53,this['options']);}},{'key':'updateData','value':function _0x2bcbfa(_0x5d5d89){var _0x1dd59f=_0x4879fa;this['_mapVRenderer']&&this[_0x1dd59f(_0x3c13ac._0xcc729e)]['updateData'](_0x5d5d89,this[_0x1dd59f(0x11d)]);}},{'key':'getData','value':function _0x228f2c(){var _0x1e0a2b=_0x4879fa;return this['_mapVRenderer']&&(this['dataSet']=this['_mapVRenderer'][_0x1e0a2b(_0x3c2625._0x22baf6)]()),this['dataSet'];}},{'key':'removeData','value':function _0x7533ff(_0x4fcddd){this['_mapVRenderer']&&this['_mapVRenderer']['removeData'](_0x4fcddd);}},{'key':'removeAllData','value':function _0x15ef4e(){var _0x2664f8=_0x4879fa;this['_mapVRenderer']&&this[_0x2664f8(0x116)]['clearData']();}},{'key':'_createCanvas','value':function _0x365746(){var _0x59e231=_0x4879fa,_0x12575f=mars3d__namespace['DomUtil'][_0x59e231(0x159)]('canvas','mars3d-mapv',this[_0x59e231(_0x87fee0._0x42527d)]['container']);_0x12575f['id']=this['options']['layerid']||'mapv'+divId++,_0x12575f['style'][_0x59e231(0x12e)]='absolute',_0x12575f['style']['top']=_0x59e231(_0x87fee0._0x37d16f),_0x12575f['style'][_0x59e231(_0x87fee0._0x3a9353)]='0px',_0x12575f['style'][_0x59e231(0x110)]=this[_0x59e231(0x11b)]?'auto':_0x59e231(0x133),_0x12575f[_0x59e231(0x131)]['zIndex']=this['options']['zIndex']||0x64,_0x12575f['width']=parseInt(this['_map']['canvas'][_0x59e231(0x15b)]),_0x12575f[_0x59e231(_0x87fee0._0xf3795c)]=parseInt(this['_map']['canvas'][_0x59e231(_0x87fee0._0xea6c55)]),_0x12575f['style']['width']=this['_map']['canvas']['style'][_0x59e231(0x15b)],_0x12575f['style']['height']=this['_map']['canvas']['style']['height'];if(this['options']['context']==='2d'){var _0x4f1d4d=this['devicePixelRatio'];_0x12575f['getContext'](this['options']['context'])['scale'](_0x4f1d4d,_0x4f1d4d);}return _0x12575f;}},{'key':_0x4879fa(_0x12fb1d._0x2ac328),'value':function _0x3a7362(){var _0x2cd271=_0x4879fa;this['resize'](),this[_0x2cd271(_0x51c13e._0x23f45b)]();}},{'key':'draw','value':function _0x4998a7(){this['_reset']();}},{'key':'remove','value':function _0x117e75(){this['_mapVRenderer']&&(this['_mapVRenderer']['destroy'](),this['_mapVRenderer']=null),this['canvas']['parentElement']['removeChild'](this['canvas']);}},{'key':'render','value':function _0xffb4b4(){var _0x5b7ed8=_0x4879fa;this[_0x5b7ed8(0x116)][_0x5b7ed8(_0x30fdde._0x44b86b)]();}},{'key':'resize','value':function _0x169121(){var _0x5b0924=_0x4879fa;if(this['canvas']){var _0x4028fb=this['canvas'];_0x4028fb['style']['position']=_0x5b0924(_0x4a7b7e._0x12c68b),_0x4028fb['style'][_0x5b0924(_0x4a7b7e._0x4838b4)]='0px',_0x4028fb['style']['left']='0px',_0x4028fb[_0x5b0924(0x15b)]=parseInt(this['_map'][_0x5b0924(0x126)]['width']),_0x4028fb[_0x5b0924(0x15f)]=parseInt(this['_map'][_0x5b0924(_0x4a7b7e._0x100686)]['height']),_0x4028fb['style'][_0x5b0924(0x15b)]=this['_map']['canvas'][_0x5b0924(0x131)]['width'],_0x4028fb[_0x5b0924(0x131)]['height']=this[_0x5b0924(0x128)]['canvas'][_0x5b0924(_0x4a7b7e._0x2dc411)]['height'];}}},{'key':'getRectangle','value':function _0x5b3424(_0xdd2ca){var _0x1941af=_0x4879fa;if(!this['dataSet']||!this['dataSet']['_data'])return;var _0x3135e6=mars3d__namespace[_0x1941af(0x13b)]['getExtentByGeoJSON']({'type':'FeatureCollection','features':this['dataSet'][_0x1941af(0x145)]});if(!_0x3135e6)return;return _0xdd2ca!==null&&_0xdd2ca!==void 0x0&&_0xdd2ca[_0x1941af(_0x5b08e4._0xf1b6c6)]?_0x3135e6:Cesium['Rectangle']['fromDegrees'](_0x3135e6[_0x1941af(0x157)],_0x3135e6['ymin'],_0x3135e6['xmax'],_0x3135e6['ymax']);}},{'key':_0x4879fa(_0x12fb1d._0x2e9cf8),'value':function _0xfa5c41(_0x191d92){var _0x3e3ff3=_0x4879fa;this[_0x3e3ff3(0x122)]=_0x191d92,this['_mapVRenderer']&&this['_mapVRenderer']['clickEvent'](_0x191d92['windowPosition'],_0x191d92);}},{'key':_0x4879fa(0x118),'value':function _0x4febe8(_0x4ba836){var _0x1d97d1=_0x4879fa;this['_cache_event']=_0x4ba836,this['_mapVRenderer']&&this['_mapVRenderer']['mousemoveEvent'](_0x4ba836[_0x1d97d1(_0x1239d3._0x3beea6)],_0x4ba836);}},{'key':'on','value':function _0x1a7135(_0x229aa1,_0x16b155,_0x42a056){var _0x3880c1=_0x4879fa,_0x7d847d=this;this['options']['methods']=this['options']['methods']||{};if(_0x229aa1===mars3d__namespace[_0x3880c1(0x161)]['click'])this['options']['methods']['click']=function(_0x5047e0){_0x5047e0&&_0x16b155['bind'](_0x42a056)(_objectSpread2(_objectSpread2({},_0x7d847d['_cache_event']),{},{'layer':_0x7d847d,'data':_0x5047e0}));},this['_map']['on'](mars3d__namespace['EventType'][_0x3880c1(0x106)],this[_0x3880c1(0x11a)],this);else _0x229aa1===mars3d__namespace['EventType']['mouseMove']&&(this[_0x3880c1(_0x39c805._0x34abb2)]['methods']['mousemove']=function(_0x32d3ad){_0x32d3ad&&_0x16b155['bind'](_0x42a056)(_objectSpread2(_objectSpread2({},_0x7d847d['_cache_event']),{},{'layer':_0x7d847d,'data':_0x32d3ad}));},this[_0x3880c1(_0x39c805._0x48be26)]['on'](mars3d__namespace[_0x3880c1(0x161)]['mouseMove'],this['_onMapMouseMove'],this));return this;}},{'key':'off','value':function _0x473dbd(_0x21d1c5,_0x14b64f){var _0x4887dd=_0x4879fa;if(_0x21d1c5===_0x4887dd(0x106)){var _0x1f15fc;this['_map']['off'](_0x21d1c5,this['_onMapClick'],this),(_0x1f15fc=this['options']['methods'])!==null&&_0x1f15fc!==void 0x0&&_0x1f15fc[_0x4887dd(0x14c)]&&delete this['options']['methods']['click'];}else{if(_0x21d1c5==='mouseMove'){var _0x3f121f;this[_0x4887dd(_0x39bdbb._0x3cbf67)][_0x4887dd(_0x39bdbb._0x326075)](_0x21d1c5,this['_onMapMouseMove'],this),(_0x3f121f=this['options'][_0x4887dd(0x104)])!==null&&_0x3f121f!==void 0x0&&_0x3f121f[_0x4887dd(_0x39bdbb._0x40c425)]&&delete this['options']['methods']['mousemove'];}}return this;}}]),_0x4d42ec;}(BaseLayer);mars3d__namespace['LayerUtil']['register']('mapv',MapVLayer),mars3d__namespace[_0x5d7410(0x168)]['MapVLayer']=MapVLayer,exports['MapVLayer']=MapVLayer,Object['keys'](mapv)['forEach'](function(_0x460b85){var _0x40d8bb={_0x4110b9:0x13a},_0x3ba75a=_0x5d7410;if(_0x460b85!=='default'&&!exports[_0x3ba75a(_0x40d8bb._0x4110b9)](_0x460b85))Object['defineProperty'](exports,_0x460b85,{'enumerable':!![],'get':function(){return mapv[_0x460b85];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
