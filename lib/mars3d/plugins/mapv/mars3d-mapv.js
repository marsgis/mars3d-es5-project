/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.6.5
 * 编译日期：2023-09-08 17:10:07
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';const _0x22085e=_0x1883;(function(_0x381956,_0x37825a){const _0x1f683b={_0x44b746:0x14b,_0x28ed68:0x155,_0x44f00f:0x146,_0x5c739d:0x14e},_0x2618a3=_0x1883,_0x34886e=_0x381956();while(!![]){try{const _0x379eae=-parseInt(_0x2618a3(0x111))/0x1+-parseInt(_0x2618a3(_0x1f683b._0x44b746))/0x2+-parseInt(_0x2618a3(0x101))/0x3*(parseInt(_0x2618a3(0x143))/0x4)+-parseInt(_0x2618a3(0x10e))/0x5+-parseInt(_0x2618a3(_0x1f683b._0x28ed68))/0x6*(-parseInt(_0x2618a3(0x123))/0x7)+parseInt(_0x2618a3(_0x1f683b._0x44f00f))/0x8*(-parseInt(_0x2618a3(0x13d))/0x9)+parseInt(_0x2618a3(_0x1f683b._0x5c739d))/0xa;if(_0x379eae===_0x37825a)break;else _0x34886e['push'](_0x34886e['shift']());}catch(_0x2106b7){_0x34886e['push'](_0x34886e['shift']());}}}(_0x36e4,0xd66f3));function _interopNamespace(_0x2d1895){const _0x42b9bf={_0xa5fc94:0x144},_0x37c0c6=_0x1883;if(_0x2d1895&&_0x2d1895['__esModule'])return _0x2d1895;var _0x41d86b=Object['create'](null);return _0x2d1895&&Object[_0x37c0c6(_0x42b9bf._0xa5fc94)](_0x2d1895)['forEach'](function(_0x572f38){const _0x345a14=_0x37c0c6;if(_0x572f38!=='default'){var _0x50abbe=Object['getOwnPropertyDescriptor'](_0x2d1895,_0x572f38);Object[_0x345a14(0x11a)](_0x41d86b,_0x572f38,_0x50abbe[_0x345a14(0x13b)]?_0x50abbe:{'enumerable':!![],'get':function(){return _0x2d1895[_0x572f38];}});}}),_0x41d86b['default']=_0x2d1895,_0x41d86b;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'],baiduMapLayer=mapv__namespace?mapv__namespace['baiduMapLayer']:null,BaseLayer$1=baiduMapLayer?baiduMapLayer[_0x22085e(0x125)]:Function;class MapVRenderer extends BaseLayer$1{constructor(_0x48b14e,_0x36866b,_0x2b212c,_0xfdc25c){const _0x3bc9f8={_0x1070da:0x116,_0x262de4:0x129},_0x4a788e=_0x22085e;super(_0x48b14e,_0x36866b,_0x2b212c);if(!BaseLayer$1)return;this['map']=_0x48b14e,this['scene']=_0x48b14e[_0x4a788e(_0x3bc9f8._0x1070da)],this[_0x4a788e(_0x3bc9f8._0x262de4)]=_0x36866b,_0x2b212c=_0x2b212c||{},this[_0x4a788e(0x127)](_0x2b212c),this['argCheck'](_0x2b212c),this['initDevicePixelRatio'](),this['canvasLayer']=_0xfdc25c,this[_0x4a788e(0x15a)]=!0x1,this['animation']=_0x2b212c['animation'];}['initDevicePixelRatio'](){const _0x4e08fd={_0x1b0ace:0x15b,_0x29dd05:0x15b},_0x2406c4=_0x22085e;this[_0x2406c4(_0x4e08fd._0x1b0ace)]=window[_0x2406c4(_0x4e08fd._0x29dd05)]||0x1;}['addAnimatorEvent'](){}['animatorMovestartEvent'](){const _0x2e152b=this['options']['animation'];this['isEnabledTime']()&&this['animator']&&(this['steps']['step']=_0x2e152b['stepsRange']['start']);}[_0x22085e(0x15c)](){const _0x257af4=_0x22085e;this['isEnabledTime']()&&this[_0x257af4(0x13e)];}['getContext'](){const _0x16818b={_0x5de3d5:0x120},_0x1821ad=_0x22085e;return this['canvasLayer']['canvas']['getContext'](this[_0x1821ad(_0x16818b._0x5de3d5)]);}[_0x22085e(0x127)](_0x4b3fd3){const _0x53c793={_0x5d336d:0x14a,_0x3d15af:0x120,_0x1cc741:0x147},_0x7af960=_0x22085e;this['options']=_0x4b3fd3,this[_0x7af960(_0x53c793._0x5d336d)](_0x4b3fd3),this[_0x7af960(_0x53c793._0x3d15af)]=this['options']['context']||'2d',this[_0x7af960(_0x53c793._0x1cc741)]['zIndex']&&this['canvasLayer']&&this[_0x7af960(0xff)]['setZIndex']&&this[_0x7af960(0xff)][_0x7af960(0x10a)](this[_0x7af960(_0x53c793._0x1cc741)]['zIndex']),this['initAnimator']();}['_canvasUpdate'](_0x3f89c8){const _0x52c553={_0x5b6827:0x116,_0x1f6aff:0x147,_0x1aa08f:0xfd,_0x1b449f:0x13b,_0x4a7c16:0x147,_0x2df372:0x147,_0x59551e:0x142},_0x53f6c2={_0x3c9a44:0x148,_0x2d58ba:0x10d,_0xecc902:0xfc},_0x469a35=_0x22085e,_0x3f4a96=this[_0x469a35(_0x52c553._0x5b6827)];if(this['canvasLayer']&&!this['stopAniamation']){const _0x1a940e=this[_0x469a35(_0x52c553._0x1f6aff)]['animation'],_0x35288d=this['getContext']();if(this[_0x469a35(0x13c)]()){if(void 0x0===_0x3f89c8)return void this['clear'](_0x35288d);this['context']==='2d'&&(_0x35288d[_0x469a35(0x10c)](),_0x35288d['globalCompositeOperation']=_0x469a35(0x152),_0x35288d['fillStyle']=_0x469a35(0x104),_0x35288d['fillRect'](0x0,0x0,_0x35288d['canvas']['width'],_0x35288d['canvas']['height']),_0x35288d['restore']());}else this[_0x469a35(_0x52c553._0x1aa08f)](_0x35288d);if(this['context']==='2d')for(const _0x196790 in this[_0x469a35(0x147)]){_0x35288d[_0x196790]=this[_0x469a35(0x147)][_0x196790];}else _0x35288d[_0x469a35(_0x52c553._0x1aa08f)](_0x35288d['COLOR_BUFFER_BIT']);const _0x300fe8={'transferCoordinate':function(_0x27f603){const _0x1dae56=_0x469a35,_0x51083e=null;let _0x2e51b1=_0x3f4a96['mapvFixedHeight'];_0x3f4a96['mapvAutoHeight']&&(_0x2e51b1=_0x3f4a96['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x27f603[0x0],_0x27f603[0x1])));const _0x578b04=Cesium$1[_0x1dae56(_0x53f6c2._0x3c9a44)]['fromDegrees'](_0x27f603[0x0],_0x27f603[0x1],_0x2e51b1);if(!_0x578b04)return _0x51083e;const _0x590c6f=_0x3f4a96['cartesianToCanvasCoordinates'](_0x578b04);if(!_0x590c6f)return _0x51083e;if(_0x3f4a96['mapvDepthTest']&&_0x3f4a96['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x22c5e0=new Cesium$1[(_0x1dae56(_0x53f6c2._0x2d58ba))](_0x3f4a96['globe'][_0x1dae56(_0x53f6c2._0xecc902)],_0x3f4a96['camera']['positionWC']),_0x5f4736=_0x22c5e0['isPointVisible'](_0x578b04);if(!_0x5f4736)return _0x51083e;}return[_0x590c6f['x'],_0x590c6f['y']];}};void 0x0!==_0x3f89c8&&(_0x300fe8['filter']=function(_0x2154cb){const _0x4f55ef=_0x469a35,_0x5aa532=_0x1a940e['trails']||0xa;return!!(_0x3f89c8&&_0x2154cb[_0x4f55ef(0x145)]>_0x3f89c8-_0x5aa532&&_0x2154cb['time']<_0x3f89c8);});const _0x550135=this['dataSet'][_0x469a35(_0x52c553._0x1b449f)](_0x300fe8);this[_0x469a35(0x12d)](_0x550135),this['options']['unit']==='m'&&this[_0x469a35(0x147)][_0x469a35(0x119)],this['options']['_size']=this['options']['size'];const _0x318573=_0x3f4a96['cartesianToCanvasCoordinates'](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x318573)return;this['drawContext'](_0x35288d,new mapv__namespace['DataSet'](_0x550135),this[_0x469a35(_0x52c553._0x4a7c16)],_0x318573),this[_0x469a35(_0x52c553._0x2df372)]['updateCallback']&&this['options'][_0x469a35(_0x52c553._0x59551e)](_0x3f89c8);}}['updateData'](_0x491fa1,_0x269179){const _0x33f81f={_0x4b6bf8:0x14c},_0x50621a=_0x22085e;let _0x34ec4a=_0x491fa1;_0x34ec4a&&_0x34ec4a['get']&&(_0x34ec4a=_0x34ec4a['get']()),void 0x0!==_0x34ec4a&&this['dataSet'][_0x50621a(_0x33f81f._0x4b6bf8)](_0x34ec4a),super[_0x50621a(0x10b)]({'options':_0x269179});}['addData'](_0x1c81c3,_0x22c687){let _0x9867b0=_0x1c81c3;_0x1c81c3&&_0x1c81c3['get']&&(_0x9867b0=_0x1c81c3['get']()),this['dataSet']['add'](_0x9867b0),this['update']({'options':_0x22c687});}['getData'](){return this['dataSet'];}['removeData'](_0x342109){const _0x178c85={_0x2eb074:0x138};if(this['dataSet']){const _0xd28995=this['dataSet']['get']({'filter':function(_0x32c692){const _0x19e269=_0x1883;return _0x342109==null||typeof _0x342109!==_0x19e269(_0x178c85._0x2eb074)||!_0x342109(_0x32c692);}});this['dataSet']['set'](_0xd28995),this['update']({'options':null});}}[_0x22085e(0xfa)](){const _0x381d01={_0x17e765:0xfd},_0x31e236=_0x22085e;this['dataSet']&&this[_0x31e236(0x129)][_0x31e236(_0x381d01._0x17e765)](),this['update']({'options':null});}['draw'](){const _0x13c5df={_0x558ed0:0x139},_0xf4892a=_0x22085e;this['canvasLayer'][_0xf4892a(_0x13c5df._0x558ed0)]();}[_0x22085e(0xfd)](_0x267faf){_0x267faf&&_0x267faf['clearRect']&&_0x267faf['clearRect'](0x0,0x0,_0x267faf['canvas']['width'],_0x267faf['canvas']['height']);}['destroy'](){const _0x15072e={_0x3c3b88:0xfa},_0x5e4b4c=_0x22085e;this['clear'](this['getContext']()),this[_0x5e4b4c(_0x15072e._0x3c3b88)](),this['animator']&&this['animator']['stop'](),this['animator']=null,this['canvasLayer']=null;}}function _0x1883(_0x5c3beb,_0x2b3e7c){const _0x36e4db=_0x36e4();return _0x1883=function(_0x18835e,_0x2c10ca){_0x18835e=_0x18835e-0xf7;let _0x512c60=_0x36e4db[_0x18835e];return _0x512c60;},_0x1883(_0x5c3beb,_0x2b3e7c);}if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace['DataSet'])mapv__namespace['DataSet']['prototype'][_0x22085e(0x124)]=function(_0x33ff09,_0x585460,_0xb0e57f,_0x4442c2){const _0x43989b={_0x4fcef2:0xf7,_0x4f182a:0x141,_0x57bee1:0x154},_0x5346a0=_0x22085e;_0x4442c2=_0x4442c2||'_coordinates',_0xb0e57f=_0xb0e57f||_0x5346a0(0x106);for(let _0x2e4a36=0x0;_0x2e4a36<_0x33ff09[_0x5346a0(_0x43989b._0x4fcef2)];_0x2e4a36++){const _0x4a9a25=_0x33ff09[_0x2e4a36]['geometry'],_0x162a24=_0x4a9a25[_0xb0e57f];switch(_0x4a9a25['type']){case'Point':{const _0x4361a4=_0x585460(_0x162a24);_0x4361a4?_0x4a9a25[_0x4442c2]=_0x4361a4:_0x4a9a25[_0x4442c2]=[-0x3e7,-0x3e7];}break;case _0x5346a0(_0x43989b._0x4f182a):{const _0x2beda4=[];for(let _0x1e9c71=0x0;_0x1e9c71<_0x162a24[_0x5346a0(0xf7)];_0x1e9c71++){const _0x1a2623=_0x585460(_0x162a24[_0x1e9c71]);_0x1a2623&&_0x2beda4['push'](_0x1a2623);}_0x4a9a25[_0x4442c2]=_0x2beda4;}break;case _0x5346a0(_0x43989b._0x57bee1):case'Polygon':{const _0x23cb8d=_0x5beb0a(_0x162a24);_0x4a9a25[_0x4442c2]=_0x23cb8d;}break;case'MultiPolygon':{const _0x55cb34=[];for(let _0x3eb0fd=0x0;_0x3eb0fd<_0x162a24[_0x5346a0(0xf7)];_0x3eb0fd++){const _0x14db92=_0x5beb0a(_0x162a24[_0x3eb0fd]);_0x14db92['length']>0x0&&_0x55cb34['push'](_0x14db92);}_0x4a9a25[_0x4442c2]=_0x55cb34;}break;}}function _0x5beb0a(_0x5f3449){const _0x458dcd=_0x5346a0,_0x3fa3bd=[];for(let _0x6d20a4=0x0;_0x6d20a4<_0x5f3449['length'];_0x6d20a4++){const _0x58acc3=_0x5f3449[_0x6d20a4],_0x3fde14=[];for(let _0x4d8c1c=0x0;_0x4d8c1c<_0x58acc3['length'];_0x4d8c1c++){const _0x1dd4d7=_0x585460(_0x58acc3[_0x4d8c1c]);_0x1dd4d7&&_0x3fde14[_0x458dcd(0x122)](_0x1dd4d7);}_0x3fde14['length']>0x0&&_0x3fa3bd['push'](_0x3fde14);}return _0x3fa3bd;}return _0x33ff09;};else throw new Error('请引入\x20mapv\x20库\x20');const Cesium=mars3d__namespace[_0x22085e(0x14f)],BaseLayer=mars3d__namespace['layer']['BaseLayer'];function _0x36e4(){const _0x5d08d3=['layer','getData','parentElement','_onMapClick','context','Util','push','1778dAgPsN','transferCoordinate','__proto__','cameraMoveStart','init','off','dataSet','height','position','xmax','processData','_reset','remove','left','concat','DomUtil','animatorMovestartEvent','mapvAutoHeight','style','canvas','width','function','draw','forEach','get','isEnabledTime','1938627wzpblR','animator','postRender','zIndex','LineString','updateCallback','20788GCllmO','keys','time','8CFnPRE','options','Cartesian3','_map','initDataRange','2941096IzVlsf','set','hasOwnProperty','58800040bqyIPW','Cesium','mouseDown','_onMoveStartEvent','destination-out','getContext','MultiLineString','32286NNJyxD','clickEvent','_onMapMouseMove','LayerUtil','methods','stopAniamation','devicePixelRatio','animatorMoveendEvent','_data','length','MapVLayer','fixedHeight','clearData','block','ellipsoid','clear','cameraMoveEnd','canvasLayer','_mapVRenderer','867elzDfn','display','DataSet','rgba(0,\x200,\x200,\x20.1)','addData','coordinates','mousemove','click','_removedHook','setZIndex','update','save','EllipsoidalOccluder','7984420KmMigj','mapvDepthTest','_dataCache','1583687GBTNJK','EventType','clampToGround','removeData','mouseMove','scene','bind','0px','size','defineProperty','_onMoveEndEvent'];_0x36e4=function(){return _0x5d08d3;};return _0x36e4();}class MapVLayer extends BaseLayer{constructor(_0x178f9d,_0x2dfb34){const _0x4ac3dc=_0x22085e;super(_0x178f9d),this['_pointerEvents']=this['options']['pointerEvents'],this['dataSet']=_0x2dfb34||new mapv__namespace[(_0x4ac3dc(0x103))](_0x178f9d['data']),this[_0x4ac3dc(0x136)]=null;}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x1eee86){const _0x1435c7=_0x22085e;this['_pointerEvents']=_0x1eee86,this[_0x1435c7(0x136)]&&(_0x1eee86?this['canvas']['style']['pointerEvents']='all':this['canvas']['style']['pointerEvents']='none');}['_showHook'](_0x5b6bb4){const _0x52ba7b=_0x22085e;_0x5b6bb4?this['canvas']['style']['display']=_0x52ba7b(0xfb):this['canvas']['style'][_0x52ba7b(0x102)]='none';}['_mountedHook'](){const _0x49fd7c={_0x15e10b:0x134,_0x48c0fa:0x113,_0x228584:0x147,_0x185182:0xf9},_0x7e482a=_0x22085e;this['_map']['scene'][_0x7e482a(0x10f)]=this['options']['depthTest']??!![],this['_map']['scene'][_0x7e482a(_0x49fd7c._0x15e10b)]=this['options'][_0x7e482a(_0x49fd7c._0x48c0fa)]??![],this['_map']['scene']['mapvFixedHeight']=this[_0x7e482a(_0x49fd7c._0x228584)][_0x7e482a(_0x49fd7c._0x185182)]??0x0;}['_addedHook'](){const _0x1102fa={_0x316039:0x15d,_0x5c55a5:0x131,_0x3f71b3:0x110},_0x34ba6=_0x22085e;this['dataSet']&&(!this['dataSet']['_data']||this['dataSet']['_data']['length']===0x0)&&(this[_0x34ba6(0x129)][_0x34ba6(_0x1102fa._0x316039)]=[][_0x34ba6(_0x1102fa._0x5c55a5)](this['dataSet'][_0x34ba6(_0x1102fa._0x3f71b3)])),this['_mapVRenderer']=new MapVRenderer(this['_map'],this['dataSet'],this[_0x34ba6(0x147)],this),this['initDevicePixelRatio'](),this['canvas']=this['_createCanvas'](),this['render']=this['render']['bind'](this),this['bindEvent'](),this['_reset']();}['_removedHook'](){const _0x219315=_0x22085e;this['unbindEvent'](),this['_mapVRenderer']&&(this[_0x219315(0x100)]['destroy'](),this[_0x219315(0x100)]=null),this['canvas']['parentElement']['removeChild'](this['canvas']);}['initDevicePixelRatio'](){const _0x35d069=_0x22085e;this['devicePixelRatio']=window[_0x35d069(0x15b)]||0x1;}['bindEvent'](){const _0x21a057={_0x21f6d4:0x112,_0x95b0dc:0x151,_0xbf47fe:0xfe,_0x3fd06b:0x107},_0x45921d=_0x22085e;var _0x180152,_0x4ca6df,_0xece97d,_0x50ff74;this['_map']['on'](mars3d__namespace[_0x45921d(_0x21a057._0x21f6d4)]['mouseDown'],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace[_0x45921d(_0x21a057._0x21f6d4)]['cameraMoveStart'],this[_0x45921d(_0x21a057._0x95b0dc)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x45921d(_0x21a057._0xbf47fe)],this['_onMoveEndEvent'],this),(_0x180152=this[_0x45921d(0x147)])!==null&&_0x180152!==void 0x0&&(_0x4ca6df=_0x180152['methods'])!==null&&_0x4ca6df!==void 0x0&&_0x4ca6df['click']&&this[_0x45921d(0x149)]['on'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this),(_0xece97d=this['options'])!==null&&_0xece97d!==void 0x0&&(_0x50ff74=_0xece97d['methods'])!==null&&_0x50ff74!==void 0x0&&_0x50ff74[_0x45921d(_0x21a057._0x3fd06b)]&&this['_map']['on'](mars3d__namespace[_0x45921d(0x112)]['mouseMove'],this['_onMapMouseMove'],this);}['unbindEvent'](){const _0x5a78e9={_0x27beec:0x151,_0x1a5498:0x126,_0x48fa57:0x112,_0x287691:0x12e,_0x3306af:0x128,_0x28ac3f:0x11f,_0x5a28a4:0x147,_0x5070fe:0x107,_0x4b46c3:0x157},_0x25cf4b=_0x22085e;var _0x43c519,_0x48c89d,_0x2e9ec3,_0x3a8938;this['_map']['off'](mars3d__namespace['EventType'][_0x25cf4b(0x150)],this[_0x25cf4b(_0x5a78e9._0x27beec)],this),this['_map']['off'](mars3d__namespace['EventType'][_0x25cf4b(_0x5a78e9._0x1a5498)],this['_onMoveStartEvent'],this),this['_map'][_0x25cf4b(0x128)](mars3d__namespace['EventType']['cameraMoveEnd'],this['_onMoveEndEvent'],this),this['_map']['off'](mars3d__namespace[_0x25cf4b(_0x5a78e9._0x48fa57)][_0x25cf4b(0x13f)],this[_0x25cf4b(_0x5a78e9._0x287691)],this),(_0x43c519=this['options'])!==null&&_0x43c519!==void 0x0&&(_0x48c89d=_0x43c519['methods'])!==null&&_0x48c89d!==void 0x0&&_0x48c89d['click']&&this[_0x25cf4b(0x149)][_0x25cf4b(_0x5a78e9._0x3306af)](mars3d__namespace['EventType']['click'],this[_0x25cf4b(_0x5a78e9._0x28ac3f)],this),(_0x2e9ec3=this[_0x25cf4b(_0x5a78e9._0x5a28a4)])!==null&&_0x2e9ec3!==void 0x0&&(_0x3a8938=_0x2e9ec3['methods'])!==null&&_0x3a8938!==void 0x0&&_0x3a8938[_0x25cf4b(_0x5a78e9._0x5070fe)]&&this['_map']['off'](mars3d__namespace[_0x25cf4b(0x112)]['mouseMove'],this[_0x25cf4b(_0x5a78e9._0x4b46c3)],this);}['_onMoveStartEvent'](){const _0x294c01={_0x5afe77:0x112},_0x18080d=_0x22085e;this[_0x18080d(0x100)]&&(this['_mapVRenderer'][_0x18080d(0x133)](),this[_0x18080d(0x149)]['off'](mars3d__namespace[_0x18080d(_0x294c01._0x5afe77)]['postRender'],this['_reset'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x18080d(0x13f)],this['_reset'],this));}[_0x22085e(0x11b)](){const _0x5ef58e=_0x22085e;this['_mapVRenderer']&&(this['_map']['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),this[_0x5ef58e(0x100)][_0x5ef58e(0x15c)](),this['_reset']());}['_setOptionsHook'](_0x22efcb,_0x2e2aba){const _0x2524a4={_0x32649e:0x109},_0x15d98a=_0x22085e;this[_0x15d98a(_0x2524a4._0x32649e)](),this['_addedHook']();}[_0x22085e(0x105)](_0x41cf1b){const _0x44a08d={_0x1c7610:0x147},_0x40d674=_0x22085e;this[_0x40d674(0x100)]&&this['_mapVRenderer']['addData'](_0x41cf1b,this[_0x40d674(_0x44a08d._0x1c7610)]);}['updateData'](_0x5c6f20){const _0x22a8fe=_0x22085e;this['_mapVRenderer']&&this['_mapVRenderer']['updateData'](_0x5c6f20,this[_0x22a8fe(0x147)]);}[_0x22085e(0x11d)](){const _0x2043b3={_0x32d338:0x129},_0x3b631e=_0x22085e;return this['_mapVRenderer']&&(this['dataSet']=this['_mapVRenderer']['getData']()),this[_0x3b631e(_0x2043b3._0x32d338)];}['removeData'](_0x3bce88){const _0x58e83f=_0x22085e;this[_0x58e83f(0x100)]&&this['_mapVRenderer'][_0x58e83f(0x114)](_0x3bce88);}['removeAllData'](){this['_mapVRenderer']&&this['_mapVRenderer']['clearData']();}['_createCanvas'](){const _0x603bb={_0x4b5bd3:0x132,_0x572eed:0x135,_0x30784e:0x118,_0x64f718:0x130,_0x2bd8ee:0x120,_0x41d465:0x15b,_0x56a60c:0x153},_0x1eb40b=_0x22085e,_0x43f8ac=mars3d__namespace[_0x1eb40b(_0x603bb._0x4b5bd3)]['create']('canvas','mars3d-mapv',this[_0x1eb40b(0x149)]['container']);_0x43f8ac['id']=this['id'],_0x43f8ac[_0x1eb40b(_0x603bb._0x572eed)]['position']='absolute',_0x43f8ac['style']['top']=_0x1eb40b(_0x603bb._0x30784e),_0x43f8ac['style'][_0x1eb40b(_0x603bb._0x64f718)]=_0x1eb40b(0x118),_0x43f8ac['width']=parseInt(this['_map']['canvas'][_0x1eb40b(0x137)]),_0x43f8ac['height']=parseInt(this['_map'][_0x1eb40b(0x136)]['height']),_0x43f8ac['style']['width']=this[_0x1eb40b(0x149)]['canvas']['style']['width'],_0x43f8ac['style']['height']=this['_map']['canvas']['style']['height'],_0x43f8ac['style']['pointerEvents']=this['_pointerEvents']?'auto':'none',_0x43f8ac['style']['zIndex']=this['options'][_0x1eb40b(0x140)]??0x9;if(this[_0x1eb40b(0x147)][_0x1eb40b(_0x603bb._0x2bd8ee)]==='2d'){const _0x1f0f33=this[_0x1eb40b(_0x603bb._0x41d465)];_0x43f8ac[_0x1eb40b(_0x603bb._0x56a60c)](this['options']['context'])['scale'](_0x1f0f33,_0x1f0f33);}return _0x43f8ac;}['_reset'](){this['resize'](),this['render']();}['draw'](){const _0x1b43ba={_0x535355:0x12e},_0x4fa38e=_0x22085e;this[_0x4fa38e(_0x1b43ba._0x535355)]();}[_0x22085e(0x12f)](){const _0x5c69ec=_0x22085e;this['_mapVRenderer']&&(this['_mapVRenderer']['destroy'](),this['_mapVRenderer']=null),this['canvas'][_0x5c69ec(0x11e)]['removeChild'](this['canvas']);}['render'](){this['_mapVRenderer']['_canvasUpdate']();}['resize'](){const _0x501b0a={_0x2dbfb3:0x137,_0x277e65:0x12a},_0x5dd2bd=_0x22085e;if(this['canvas']){const _0x20a87b=this['canvas'];_0x20a87b['style'][_0x5dd2bd(0x12b)]='absolute',_0x20a87b['style']['top']='0px',_0x20a87b['style']['left']='0px',_0x20a87b['width']=parseInt(this['_map']['canvas']['width']),_0x20a87b[_0x5dd2bd(0x12a)]=parseInt(this['_map']['canvas']['height']),_0x20a87b['style'][_0x5dd2bd(_0x501b0a._0x2dbfb3)]=this[_0x5dd2bd(0x149)]['canvas']['style']['width'],_0x20a87b[_0x5dd2bd(0x135)][_0x5dd2bd(_0x501b0a._0x277e65)]=this[_0x5dd2bd(0x149)]['canvas'][_0x5dd2bd(0x135)][_0x5dd2bd(0x12a)];}}['getRectangle'](_0x12360a){const _0x120306={_0x28c45b:0x12c},_0x15e567=_0x22085e;if(!this['dataSet']||!this['dataSet']['_data'])return;const _0x19d2cb=mars3d__namespace[_0x15e567(0x121)]['getExtentByGeoJSON']({'type':'FeatureCollection','features':this['dataSet']['_data']});if(!_0x19d2cb)return;return _0x12360a!==null&&_0x12360a!==void 0x0&&_0x12360a['isFormat']?_0x19d2cb:Cesium['Rectangle']['fromDegrees'](_0x19d2cb['xmin'],_0x19d2cb['ymin'],_0x19d2cb[_0x15e567(_0x120306._0x28c45b)],_0x19d2cb['ymax']);}[_0x22085e(0x11f)](_0x2ea52a){const _0x31c256={_0x43b2b1:0x156},_0x962d38=_0x22085e;this['_cache_event']=_0x2ea52a,this['_mapVRenderer']&&this['_mapVRenderer'][_0x962d38(_0x31c256._0x43b2b1)](_0x2ea52a['windowPosition'],_0x2ea52a);}[_0x22085e(0x157)](_0x398c7e){const _0xccb8c8=_0x22085e;this['_cache_event']=_0x398c7e,this[_0xccb8c8(0x100)]&&this['_mapVRenderer']['mousemoveEvent'](_0x398c7e['windowPosition'],_0x398c7e);}['on'](_0x9380db,_0x489144,_0x14d20f){const _0xb60bb0={_0x497c70:0x147,_0x4f3097:0x159,_0x3d637b:0x108,_0x104e25:0x112,_0x2d048a:0x115,_0x1a0c4e:0x157},_0x107a6d={_0xa61f9a:0x117},_0x21630d=_0x22085e;this[_0x21630d(_0xb60bb0._0x497c70)]['methods']=this['options'][_0x21630d(_0xb60bb0._0x4f3097)]||{};if(_0x9380db===mars3d__namespace['EventType']['click'])this[_0x21630d(_0xb60bb0._0x497c70)]['methods']['click']=_0x2329eb=>{_0x2329eb&&_0x489144['bind'](_0x14d20f)({...this['_cache_event'],'layer':this,'data':_0x2329eb});},this['_map']['on'](mars3d__namespace['EventType'][_0x21630d(_0xb60bb0._0x3d637b)],this['_onMapClick'],this);else _0x9380db===mars3d__namespace['EventType'][_0x21630d(0x115)]&&(this[_0x21630d(0x147)][_0x21630d(0x159)]['mousemove']=_0x30a6d3=>{const _0xf06c1c=_0x21630d;_0x30a6d3&&_0x489144[_0xf06c1c(_0x107a6d._0xa61f9a)](_0x14d20f)({...this['_cache_event'],'layer':this,'data':_0x30a6d3});},this['_map']['on'](mars3d__namespace[_0x21630d(_0xb60bb0._0x104e25)][_0x21630d(_0xb60bb0._0x2d048a)],this[_0x21630d(_0xb60bb0._0x1a0c4e)],this));return this;}['off'](_0x43cb04,_0x1210ea){const _0x33ca32={_0x3ff6d5:0x159,_0x56102a:0x107},_0x39a2d8=_0x22085e;if(_0x43cb04==='click'){var _0x47fc47;this['_map'][_0x39a2d8(0x128)](_0x43cb04,this['_onMapClick'],this),(_0x47fc47=this['options'][_0x39a2d8(0x159)])!==null&&_0x47fc47!==void 0x0&&_0x47fc47['mousemove']&&delete this['options'][_0x39a2d8(0x159)]['click'];}else{if(_0x43cb04==='mouseMove'){var _0x4d2d42;this[_0x39a2d8(0x149)]['off'](_0x43cb04,this['_onMapMouseMove'],this),(_0x4d2d42=this['options'][_0x39a2d8(_0x33ca32._0x3ff6d5)])!==null&&_0x4d2d42!==void 0x0&&_0x4d2d42['mousemove']&&delete this['options']['methods'][_0x39a2d8(_0x33ca32._0x56102a)];}}return this;}}mars3d__namespace[_0x22085e(0x158)]['register']('mapv',MapVLayer),mars3d__namespace[_0x22085e(0x11c)][_0x22085e(0xf8)]=MapVLayer,mars3d__namespace['mapv']=mapv__namespace,exports['MapVLayer']=MapVLayer,Object[_0x22085e(0x144)](mapv)[_0x22085e(0x13a)](function(_0xe3b013){const _0x251d4e=_0x22085e;if(_0xe3b013!=='default'&&!exports[_0x251d4e(0x14d)](_0xe3b013))Object[_0x251d4e(0x11a)](exports,_0xe3b013,{'enumerable':!![],'get':function(){return mapv[_0xe3b013];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
