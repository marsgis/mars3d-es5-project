/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.5.10
 * 编译日期：2023-06-05 18:31:10
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';const _0x9d903f=_0x297d;(function(_0xbf2c8c,_0x4f1a8d){const _0x2ec6c0={_0x254fa6:0xff,_0x26c612:0xce,_0x5997fc:0xca,_0x3bbbf8:0xc6},_0x3a0bfd=_0x297d,_0xaeaa58=_0xbf2c8c();while(!![]){try{const _0x217069=parseInt(_0x3a0bfd(0x11f))/0x1+-parseInt(_0x3a0bfd(0x102))/0x2+parseInt(_0x3a0bfd(_0x2ec6c0._0x254fa6))/0x3*(parseInt(_0x3a0bfd(0xd4))/0x4)+-parseInt(_0x3a0bfd(_0x2ec6c0._0x26c612))/0x5+parseInt(_0x3a0bfd(0xec))/0x6*(-parseInt(_0x3a0bfd(0xc7))/0x7)+-parseInt(_0x3a0bfd(_0x2ec6c0._0x5997fc))/0x8*(parseInt(_0x3a0bfd(0xc2))/0x9)+parseInt(_0x3a0bfd(_0x2ec6c0._0x3bbbf8))/0xa;if(_0x217069===_0x4f1a8d)break;else _0xaeaa58['push'](_0xaeaa58['shift']());}catch(_0x31276c){_0xaeaa58['push'](_0xaeaa58['shift']());}}}(_0x3999,0x5302d));function _interopNamespace(_0x27f657){const _0x1710db={_0x2bfecc:0x106},_0x3afb15=_0x297d;if(_0x27f657&&_0x27f657[_0x3afb15(0x115)])return _0x27f657;var _0x544103=Object[_0x3afb15(0xbe)](null);return _0x27f657&&Object['keys'](_0x27f657)['forEach'](function(_0x1be8df){const _0x40c273=_0x3afb15;if(_0x1be8df!==_0x40c273(_0x1710db._0x2bfecc)){var _0x45f24e=Object['getOwnPropertyDescriptor'](_0x27f657,_0x1be8df);Object['defineProperty'](_0x544103,_0x1be8df,_0x45f24e['get']?_0x45f24e:{'enumerable':!![],'get':function(){return _0x27f657[_0x1be8df];}});}}),_0x544103['default']=_0x27f657,_0x544103;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);function _0x3999(){const _0x1e7eae=['windowPosition','678848CiSxGG','concat','_showHook','time','2227870BsWhQb','mapvFixedHeight','height','render','_addedHook','clear','8ywiliN','animation','stepsRange','initDevicePixelRatio','Cesium','resize','_onMoveStartEvent','MultiPolygon','canvas','FeatureCollection','push','animator','trails','_coordinates','Polygon','fillRect','scene','Rectangle','canvasLayer','isPointVisible','step','mapvAutoHeight','_dataCache','fromDegrees','231894YhjWsM','updateData','MapVLayer','argCheck','draw','getData','top','removeData','fillStyle','EventType','dataSet','layer','style','width','addData','forEach','animatorMoveendEvent','stopAniamation','devicePixelRatio','556287YMKsKF','defineProperty','mode','334854bmqIfD','BaseLayer','keys','cameraMoveEnd','default','_mountedHook','_pointerEvents','mousemove','stop','update','_onMapClick','Util','0px','pointerEvents','mouseMove','getRectangle','options','methods','_onMoveEndEvent','__esModule','positionWC','absolute','cameraMoveStart','mars3d-mapv','getContext','register','fixedHeight','destroy','bind','96227QeLIkt','Cartesian3','click','data','_reset','parentElement','_mapVRenderer','block','isEnabledTime','cartesianToCanvasCoordinates','_cache_event','unbindEvent','MultiLineString','clearData','length','postRender','_map','size','create','off','DataSet','globe','9qPIjxr','zIndex','_data','ymax','10732220QjdeAq','91KUxWNo','initAnimator'];_0x3999=function(){return _0x1e7eae;};return _0x3999();}function _0x297d(_0x24c6f2,_0x5a0a03){const _0x399988=_0x3999();return _0x297d=function(_0x297df8,_0x43dff0){_0x297df8=_0x297df8-0xbc;let _0x385e09=_0x399988[_0x297df8];return _0x385e09;},_0x297d(_0x24c6f2,_0x5a0a03);}const Cesium$1=mars3d__namespace[_0x9d903f(0xd8)],baiduMapLayer=mapv__namespace?mapv__namespace['baiduMapLayer']:null,BaseLayer$1=baiduMapLayer?baiduMapLayer['__proto__']:Function;class MapVRenderer extends BaseLayer$1{constructor(_0xbc3c7d,_0x10944e,_0x24264c,_0x15cbcb){const _0x4a04af={_0x701105:0xf6},_0x484515=_0x9d903f;super(_0xbc3c7d,_0x10944e,_0x24264c);if(!BaseLayer$1)return;this['map']=_0xbc3c7d,this['scene']=_0xbc3c7d['scene'],this[_0x484515(_0x4a04af._0x701105)]=_0x10944e,_0x24264c=_0x24264c||{},this['init'](_0x24264c),this[_0x484515(0xef)](_0x24264c),this['initDevicePixelRatio'](),this['canvasLayer']=_0x15cbcb,this['stopAniamation']=!0x1,this['animation']=_0x24264c['animation'];}[_0x9d903f(0xd7)](){const _0xab4db7=_0x9d903f;this[_0xab4db7(0xfe)]=window['devicePixelRatio']||0x1;}['addAnimatorEvent'](){}['animatorMovestartEvent'](){const _0x3a22ae={_0x5a42fc:0xd5,_0x180e17:0x127},_0x165ba0=_0x9d903f,_0x2d29fc=this['options'][_0x165ba0(_0x3a22ae._0x5a42fc)];this[_0x165ba0(_0x3a22ae._0x180e17)]()&&this[_0x165ba0(0xdf)]&&(this['steps'][_0x165ba0(0xe8)]=_0x2d29fc[_0x165ba0(0xd6)]['start']);}[_0x9d903f(0xfc)](){this['isEnabledTime']()&&this['animator'];}[_0x9d903f(0x11a)](){const _0x1806fb=_0x9d903f;return this['canvasLayer'][_0x1806fb(0xdc)]['getContext'](this['context']);}['init'](_0x1a1415){const _0x3b61f3={_0x140933:0xe6,_0x4465e3:0xc3},_0x202b0d=_0x9d903f;this['options']=_0x1a1415,this['initDataRange'](_0x1a1415),this['context']=this['options']['context']||'2d',this['options']['zIndex']&&this[_0x202b0d(_0x3b61f3._0x140933)]&&this['canvasLayer']['setZIndex']&&this['canvasLayer']['setZIndex'](this['options'][_0x202b0d(_0x3b61f3._0x4465e3)]),this[_0x202b0d(0xc8)]();}['_canvasUpdate'](_0x288dad){const _0x177386={_0x55db21:0x112},_0x10a8c5={_0x1e24ac:0xe0,_0x5d9f1e:0xcd,_0x47bada:0xcd},_0x45ff3b={_0x2c49f6:0xe7},_0x35b132=_0x9d903f,_0xa67d39=this['scene'];if(this['canvasLayer']&&!this[_0x35b132(0xfd)]){const _0x7fe53d=this['options']['animation'],_0x2810fc=this[_0x35b132(0x11a)]();if(this['isEnabledTime']()){if(void 0x0===_0x288dad)return void this['clear'](_0x2810fc);this['context']==='2d'&&(_0x2810fc['save'](),_0x2810fc['globalCompositeOperation']='destination-out',_0x2810fc[_0x35b132(0xf4)]='rgba(0,\x200,\x200,\x20.1)',_0x2810fc[_0x35b132(0xe3)](0x0,0x0,_0x2810fc['canvas']['width'],_0x2810fc['canvas']['height']),_0x2810fc['restore']());}else this['clear'](_0x2810fc);if(this['context']==='2d')for(const _0x1b3499 in this[_0x35b132(_0x177386._0x55db21)]){_0x2810fc[_0x1b3499]=this[_0x35b132(0x112)][_0x1b3499];}else _0x2810fc['clear'](_0x2810fc['COLOR_BUFFER_BIT']);const _0x2542b2={'transferCoordinate':function(_0x48d460){const _0x2be2cc=_0x35b132,_0x389608=null;let _0x4096df=_0xa67d39[_0x2be2cc(0xcf)];_0xa67d39['mapvAutoHeight']&&(_0x4096df=_0xa67d39['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x48d460[0x0],_0x48d460[0x1])));const _0x3e5ad7=Cesium$1[_0x2be2cc(0x120)]['fromDegrees'](_0x48d460[0x0],_0x48d460[0x1],_0x4096df);if(!_0x3e5ad7)return _0x389608;const _0xe1e88d=_0xa67d39[_0x2be2cc(0x128)](_0x3e5ad7);if(!_0xe1e88d)return _0x389608;if(_0xa67d39['mapvDepthTest']&&_0xa67d39[_0x2be2cc(0x101)]===Cesium$1['SceneMode']['SCENE3D']){const _0x1dcd37=new Cesium$1['EllipsoidalOccluder'](_0xa67d39[_0x2be2cc(0xc1)]['ellipsoid'],_0xa67d39['camera'][_0x2be2cc(0x116)]),_0x3ffeab=_0x1dcd37[_0x2be2cc(_0x45ff3b._0x2c49f6)](_0x3e5ad7);if(!_0x3ffeab)return _0x389608;}return[_0xe1e88d['x'],_0xe1e88d['y']];}};void 0x0!==_0x288dad&&(_0x2542b2['filter']=function(_0x3cbe5d){const _0x4d974c=_0x35b132,_0x5079d0=_0x7fe53d[_0x4d974c(_0x10a8c5._0x1e24ac)]||0xa;return!!(_0x288dad&&_0x3cbe5d[_0x4d974c(_0x10a8c5._0x5d9f1e)]>_0x288dad-_0x5079d0&&_0x3cbe5d[_0x4d974c(_0x10a8c5._0x47bada)]<_0x288dad);});const _0x535568=this['dataSet']['get'](_0x2542b2);this['processData'](_0x535568),this[_0x35b132(_0x177386._0x55db21)]['unit']==='m'&&this['options']['size'],this['options']['_size']=this['options'][_0x35b132(0xbd)];const _0x3b9d1d=_0xa67d39['cartesianToCanvasCoordinates'](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x3b9d1d)return;this['drawContext'](_0x2810fc,new mapv__namespace[(_0x35b132(0xc0))](_0x535568),this['options'],_0x3b9d1d),this['options']['updateCallback']&&this[_0x35b132(0x112)]['updateCallback'](_0x288dad);}}['updateData'](_0x445d2b,_0x47bbd8){const _0x6fcfab=_0x9d903f;let _0x30d924=_0x445d2b;_0x30d924&&_0x30d924['get']&&(_0x30d924=_0x30d924['get']()),void 0x0!==_0x30d924&&this[_0x6fcfab(0xf6)]['set'](_0x30d924),super['update']({'options':_0x47bbd8});}['addData'](_0x1dc620,_0x134744){const _0x54f386={_0x24e097:0xf6},_0x6cf1d5=_0x9d903f;let _0x110ef2=_0x1dc620;_0x1dc620&&_0x1dc620['get']&&(_0x110ef2=_0x1dc620['get']()),this[_0x6cf1d5(_0x54f386._0x24e097)]['add'](_0x110ef2),this[_0x6cf1d5(0x10b)]({'options':_0x134744});}['getData'](){const _0x4b61d7=_0x9d903f;return this[_0x4b61d7(0xf6)];}['removeData'](_0x212203){const _0x1a692e=_0x9d903f;if(this['dataSet']){const _0x1759bd=this[_0x1a692e(0xf6)]['get']({'filter':function(_0x3768ea){return _0x212203==null||typeof _0x212203!=='function'||!_0x212203(_0x3768ea);}});this['dataSet']['set'](_0x1759bd),this['update']({'options':null});}}['clearData'](){const _0x48dd9c={_0xe9a7da:0xf6,_0x331a85:0xd3},_0x2de5a9=_0x9d903f;this['dataSet']&&this[_0x2de5a9(_0x48dd9c._0xe9a7da)][_0x2de5a9(_0x48dd9c._0x331a85)](),this['update']({'options':null});}['draw'](){const _0x2f130c=_0x9d903f;this['canvasLayer'][_0x2f130c(0xf0)]();}[_0x9d903f(0xd3)](_0x54fa6a){const _0x3f5d2f={_0x141256:0xdc},_0x25afaf=_0x9d903f;_0x54fa6a&&_0x54fa6a['clearRect']&&_0x54fa6a['clearRect'](0x0,0x0,_0x54fa6a[_0x25afaf(_0x3f5d2f._0x141256)]['width'],_0x54fa6a['canvas']['height']);}[_0x9d903f(0x11d)](){const _0x2d29b3={_0x2e13fb:0x12c,_0x515645:0x10a},_0x5c9022=_0x9d903f;this['clear'](this['getContext']()),this[_0x5c9022(_0x2d29b3._0x2e13fb)](),this['animator']&&this['animator'][_0x5c9022(_0x2d29b3._0x515645)](),this['animator']=null,this['canvasLayer']=null;}}if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace['DataSet'])mapv__namespace['DataSet']['prototype']['transferCoordinate']=function(_0x2c8123,_0x39c370,_0x480dd1,_0x5e3856){const _0x5e1a64={_0x1d4d38:0xe1,_0x337aa9:0x12b,_0x4a3b20:0xdb,_0x3f05ee:0xde},_0x1dcdf4={_0x4e1293:0x12d},_0x13794a=_0x9d903f;_0x5e3856=_0x5e3856||_0x13794a(_0x5e1a64._0x1d4d38),_0x480dd1=_0x480dd1||'coordinates';for(let _0x3a02aa=0x0;_0x3a02aa<_0x2c8123['length'];_0x3a02aa++){const _0x16cb36=_0x2c8123[_0x3a02aa]['geometry'],_0x28a653=_0x16cb36[_0x480dd1];switch(_0x16cb36['type']){case'Point':{const _0x1ae0fc=_0x39c370(_0x28a653);_0x1ae0fc?_0x16cb36[_0x5e3856]=_0x1ae0fc:_0x16cb36[_0x5e3856]=[-0x3e7,-0x3e7];}break;case'LineString':{const _0x2ad3c3=[];for(let _0x2afef8=0x0;_0x2afef8<_0x28a653['length'];_0x2afef8++){const _0x5a77c3=_0x39c370(_0x28a653[_0x2afef8]);_0x5a77c3&&_0x2ad3c3['push'](_0x5a77c3);}_0x16cb36[_0x5e3856]=_0x2ad3c3;}break;case _0x13794a(_0x5e1a64._0x337aa9):case _0x13794a(0xe2):{const _0x5ef35a=_0xd7dce0(_0x28a653);_0x16cb36[_0x5e3856]=_0x5ef35a;}break;case _0x13794a(_0x5e1a64._0x4a3b20):{const _0x519b29=[];for(let _0x414778=0x0;_0x414778<_0x28a653['length'];_0x414778++){const _0x1438ff=_0xd7dce0(_0x28a653[_0x414778]);_0x1438ff['length']>0x0&&_0x519b29[_0x13794a(_0x5e1a64._0x3f05ee)](_0x1438ff);}_0x16cb36[_0x5e3856]=_0x519b29;}break;}}function _0xd7dce0(_0x240472){const _0x15a3bf=_0x13794a,_0x5ee170=[];for(let _0x35c24b=0x0;_0x35c24b<_0x240472['length'];_0x35c24b++){const _0x362314=_0x240472[_0x35c24b],_0x365873=[];for(let _0x7108c2=0x0;_0x7108c2<_0x362314['length'];_0x7108c2++){const _0x743f63=_0x39c370(_0x362314[_0x7108c2]);_0x743f63&&_0x365873['push'](_0x743f63);}_0x365873[_0x15a3bf(_0x1dcdf4._0x4e1293)]>0x0&&_0x5ee170['push'](_0x365873);}return _0x5ee170;}return _0x2c8123;};else throw new Error('请引入\x20mapv\x20库\x20');const Cesium=mars3d__namespace[_0x9d903f(0xd8)],BaseLayer=mars3d__namespace[_0x9d903f(0xf7)][_0x9d903f(0x103)];class MapVLayer extends BaseLayer{constructor(_0x39327a,_0x3d2f97){const _0x4f6fd2=_0x9d903f;super(_0x39327a),this[_0x4f6fd2(0x108)]=this['options']['pointerEvents'],this['dataSet']=_0x3d2f97||new mapv__namespace['DataSet'](_0x39327a[_0x4f6fd2(0x122)]),this[_0x4f6fd2(0xdc)]=null;}get['pointerEvents'](){const _0x52babe={_0x2a7a5f:0x108},_0x566cdc=_0x9d903f;return this[_0x566cdc(_0x52babe._0x2a7a5f)];}set[_0x9d903f(0x10f)](_0x2d57bd){const _0x2e9bf9={_0x2991b0:0x108,_0xa230e1:0xf8,_0x164735:0x10f},_0x24bb2c=_0x9d903f;this[_0x24bb2c(_0x2e9bf9._0x2991b0)]=_0x2d57bd,this['canvas']&&(_0x2d57bd?this['canvas'][_0x24bb2c(_0x2e9bf9._0xa230e1)][_0x24bb2c(_0x2e9bf9._0x164735)]='all':this['canvas']['style']['pointerEvents']='none');}[_0x9d903f(0xcc)](_0x4245e7){const _0x158471={_0x359afa:0xf8},_0x59c8a8=_0x9d903f;_0x4245e7?this['canvas'][_0x59c8a8(_0x158471._0x359afa)]['display']=_0x59c8a8(0x126):this['canvas']['style']['display']='none';}[_0x9d903f(0x107)](){const _0x51a5ee={_0x208b47:0xe4,_0x315202:0xe9,_0x3310b8:0x11c},_0x289cba=_0x9d903f;this[_0x289cba(0xbc)][_0x289cba(_0x51a5ee._0x208b47)]['mapvDepthTest']=this['options']['depthTest']??!![],this['_map']['scene'][_0x289cba(_0x51a5ee._0x315202)]=this['options']['clampToGround']??![],this['_map']['scene']['mapvFixedHeight']=this['options'][_0x289cba(_0x51a5ee._0x3310b8)]??0x0;}['_addedHook'](){const _0x524a37={_0x565b4d:0xf6,_0x8d2329:0xf6,_0x334323:0xdc,_0x281c44:0x123},_0x2f7abe=_0x9d903f;this['dataSet']&&(!this['dataSet']['_data']||this[_0x2f7abe(_0x524a37._0x565b4d)]['_data']['length']===0x0)&&(this['dataSet'][_0x2f7abe(0xc4)]=[][_0x2f7abe(0xcb)](this['dataSet'][_0x2f7abe(0xea)])),this[_0x2f7abe(0x125)]=new MapVRenderer(this['_map'],this[_0x2f7abe(_0x524a37._0x8d2329)],this['options'],this),this['initDevicePixelRatio'](),this[_0x2f7abe(_0x524a37._0x334323)]=this['_createCanvas'](),this['render']=this[_0x2f7abe(0xd1)]['bind'](this),this['bindEvent'](),this[_0x2f7abe(_0x524a37._0x281c44)]();}['_removedHook'](){const _0x3714dc={_0x5c1f8b:0x12a,_0x3c1c02:0x125,_0x1ff9cd:0x125},_0x4253f6=_0x9d903f;this[_0x4253f6(_0x3714dc._0x5c1f8b)](),this[_0x4253f6(_0x3714dc._0x3c1c02)]&&(this['_mapVRenderer']['destroy'](),this[_0x4253f6(_0x3714dc._0x1ff9cd)]=null),this[_0x4253f6(0xdc)]['parentElement']['removeChild'](this['canvas']);}['initDevicePixelRatio'](){this['devicePixelRatio']=window['devicePixelRatio']||0x1;}['bindEvent'](){const _0x394d5f={_0x2ffece:0xf5,_0x4b2d3f:0xbc,_0xbc2aef:0x10c,_0x29d630:0xf5},_0x4d87d7=_0x9d903f;var _0xd06550,_0x516e42,_0x25b848,_0x59147f;this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace[_0x4d87d7(_0x394d5f._0x2ffece)][_0x4d87d7(0x118)],this['_onMoveStartEvent'],this),this[_0x4d87d7(_0x394d5f._0x4b2d3f)]['on'](mars3d__namespace['EventType']['cameraMoveEnd'],this['_onMoveEndEvent'],this),(_0xd06550=this['options'])!==null&&_0xd06550!==void 0x0&&(_0x516e42=_0xd06550['methods'])!==null&&_0x516e42!==void 0x0&&_0x516e42[_0x4d87d7(0x121)]&&this['_map']['on'](mars3d__namespace['EventType']['click'],this[_0x4d87d7(_0x394d5f._0xbc2aef)],this),(_0x25b848=this[_0x4d87d7(0x112)])!==null&&_0x25b848!==void 0x0&&(_0x59147f=_0x25b848['methods'])!==null&&_0x59147f!==void 0x0&&_0x59147f['mousemove']&&this[_0x4d87d7(_0x394d5f._0x4b2d3f)]['on'](mars3d__namespace[_0x4d87d7(_0x394d5f._0x29d630)][_0x4d87d7(0x110)],this['_onMapMouseMove'],this);}['unbindEvent'](){const _0xf41082={_0x4135d9:0xbc,_0x26b373:0xbf,_0x1709d2:0xda,_0x4444a0:0xbc,_0x9d9770:0x105,_0x46e16f:0xf5,_0x5bb826:0x113,_0x448dd2:0x109},_0x3770fe=_0x9d903f;var _0x3d069f,_0xe5f895,_0x3f2971,_0x374b55;this[_0x3770fe(_0xf41082._0x4135d9)][_0x3770fe(_0xf41082._0x26b373)](mars3d__namespace['EventType']['mouseDown'],this['_onMoveStartEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['cameraMoveStart'],this[_0x3770fe(_0xf41082._0x1709d2)],this),this[_0x3770fe(_0xf41082._0x4444a0)]['off'](mars3d__namespace[_0x3770fe(0xf5)][_0x3770fe(_0xf41082._0x9d9770)],this[_0x3770fe(0x114)],this),this['_map']['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),(_0x3d069f=this['options'])!==null&&_0x3d069f!==void 0x0&&(_0xe5f895=_0x3d069f['methods'])!==null&&_0xe5f895!==void 0x0&&_0xe5f895[_0x3770fe(0x121)]&&this['_map'][_0x3770fe(0xbf)](mars3d__namespace[_0x3770fe(_0xf41082._0x46e16f)]['click'],this['_onMapClick'],this),(_0x3f2971=this['options'])!==null&&_0x3f2971!==void 0x0&&(_0x374b55=_0x3f2971[_0x3770fe(_0xf41082._0x5bb826)])!==null&&_0x374b55!==void 0x0&&_0x374b55[_0x3770fe(_0xf41082._0x448dd2)]&&this[_0x3770fe(0xbc)][_0x3770fe(_0xf41082._0x26b373)](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this);}['_onMoveStartEvent'](){const _0x284cda={_0x2ab1ce:0xbc},_0x4fa594=_0x9d903f;this['_mapVRenderer']&&(this['_mapVRenderer']['animatorMovestartEvent'](),this[_0x4fa594(_0x284cda._0x2ab1ce)]['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x4fa594(0x12e)],this['_reset'],this));}[_0x9d903f(0x114)](){const _0x30b198={_0x9becbe:0xf5},_0x2f8cd7=_0x9d903f;this['_mapVRenderer']&&(this['_map'][_0x2f8cd7(0xbf)](mars3d__namespace[_0x2f8cd7(_0x30b198._0x9becbe)]['postRender'],this['_reset'],this),this[_0x2f8cd7(0x125)]['animatorMoveendEvent'](),this['_reset']());}['_setOptionsHook'](_0x5d4b13,_0x5bba86){const _0xea4e89=_0x9d903f;this['_removedHook'](),this[_0xea4e89(0xd2)]();}['addData'](_0x47b198){const _0xbcef40={_0x1eb06d:0xfa},_0x2ee970=_0x9d903f;this['_mapVRenderer']&&this['_mapVRenderer'][_0x2ee970(_0xbcef40._0x1eb06d)](_0x47b198,this['options']);}['updateData'](_0x22c929){const _0x51c44e=_0x9d903f;this[_0x51c44e(0x125)]&&this['_mapVRenderer'][_0x51c44e(0xed)](_0x22c929,this['options']);}['getData'](){const _0xdecf6={_0x1b3269:0xf1},_0x10ff28=_0x9d903f;return this['_mapVRenderer']&&(this['dataSet']=this['_mapVRenderer'][_0x10ff28(_0xdecf6._0x1b3269)]()),this['dataSet'];}['removeData'](_0xacc3e5){const _0x536117={_0x579295:0x125},_0x3ecbfb=_0x9d903f;this['_mapVRenderer']&&this[_0x3ecbfb(_0x536117._0x579295)][_0x3ecbfb(0xf3)](_0xacc3e5);}['removeAllData'](){const _0x2e82f7={_0x202e44:0x125},_0x72b5f4=_0x9d903f;this['_mapVRenderer']&&this[_0x72b5f4(_0x2e82f7._0x202e44)]['clearData']();}['_createCanvas'](){const _0x52b3d2={_0x24a99a:0x10e,_0x508cfc:0xdc,_0x3643e4:0xf9,_0x206748:0xbc,_0x36cec6:0xd0,_0x210a50:0xdc,_0x4dcdef:0x112},_0x29cec2=_0x9d903f,_0x40695e=mars3d__namespace['DomUtil']['create']('canvas',_0x29cec2(0x119),this['_map']['container']);_0x40695e['id']=this['id'],_0x40695e['style']['position']='absolute',_0x40695e['style'][_0x29cec2(0xf2)]=_0x29cec2(_0x52b3d2._0x24a99a),_0x40695e['style']['left']='0px',_0x40695e['width']=parseInt(this[_0x29cec2(0xbc)][_0x29cec2(_0x52b3d2._0x508cfc)][_0x29cec2(_0x52b3d2._0x3643e4)]),_0x40695e['height']=parseInt(this[_0x29cec2(_0x52b3d2._0x206748)]['canvas'][_0x29cec2(_0x52b3d2._0x36cec6)]),_0x40695e['style']['width']=this[_0x29cec2(0xbc)][_0x29cec2(_0x52b3d2._0x210a50)]['style']['width'],_0x40695e['style'][_0x29cec2(_0x52b3d2._0x36cec6)]=this['_map']['canvas']['style']['height'],_0x40695e['style'][_0x29cec2(0x10f)]=this[_0x29cec2(0x108)]?'auto':'none',_0x40695e['style']['zIndex']=this['options']['zIndex']??0x9;if(this['options']['context']==='2d'){const _0x5924c5=this['devicePixelRatio'];_0x40695e['getContext'](this[_0x29cec2(_0x52b3d2._0x4dcdef)]['context'])['scale'](_0x5924c5,_0x5924c5);}return _0x40695e;}['_reset'](){const _0x574646={_0x198297:0xd9},_0x19476e=_0x9d903f;this[_0x19476e(_0x574646._0x198297)](),this['render']();}['draw'](){this['_reset']();}['remove'](){const _0x17b854={_0x427a27:0x124},_0x298d95=_0x9d903f;this['_mapVRenderer']&&(this['_mapVRenderer']['destroy'](),this[_0x298d95(0x125)]=null),this['canvas'][_0x298d95(_0x17b854._0x427a27)]['removeChild'](this['canvas']);}['render'](){this['_mapVRenderer']['_canvasUpdate']();}['resize'](){const _0x57f839={_0x2dbeae:0xf8,_0x3b60cf:0xf2,_0x2cc64e:0x10e,_0x1b82f8:0xbc,_0xf25a18:0xdc},_0x52cb7d=_0x9d903f;if(this['canvas']){const _0x1e8879=this['canvas'];_0x1e8879[_0x52cb7d(_0x57f839._0x2dbeae)]['position']=_0x52cb7d(0x117),_0x1e8879['style'][_0x52cb7d(_0x57f839._0x3b60cf)]=_0x52cb7d(_0x57f839._0x2cc64e),_0x1e8879['style']['left']='0px',_0x1e8879['width']=parseInt(this[_0x52cb7d(_0x57f839._0x1b82f8)][_0x52cb7d(0xdc)]['width']),_0x1e8879['height']=parseInt(this[_0x52cb7d(_0x57f839._0x1b82f8)][_0x52cb7d(_0x57f839._0xf25a18)]['height']),_0x1e8879['style'][_0x52cb7d(0xf9)]=this['_map'][_0x52cb7d(0xdc)][_0x52cb7d(0xf8)]['width'],_0x1e8879['style']['height']=this['_map']['canvas']['style']['height'];}}[_0x9d903f(0x111)](_0x2e9dc8){const _0x4c9b88={_0x386c14:0x10d,_0x4f6ff2:0xe5},_0x3fa928=_0x9d903f;if(!this[_0x3fa928(0xf6)]||!this['dataSet']['_data'])return;const _0x3d8f0d=mars3d__namespace[_0x3fa928(_0x4c9b88._0x386c14)]['getExtentByGeoJSON']({'type':_0x3fa928(0xdd),'features':this['dataSet'][_0x3fa928(0xc4)]});if(!_0x3d8f0d)return;return _0x2e9dc8!==null&&_0x2e9dc8!==void 0x0&&_0x2e9dc8['isFormat']?_0x3d8f0d:Cesium[_0x3fa928(_0x4c9b88._0x4f6ff2)][_0x3fa928(0xeb)](_0x3d8f0d['xmin'],_0x3d8f0d['ymin'],_0x3d8f0d['xmax'],_0x3d8f0d[_0x3fa928(0xc5)]);}['_onMapClick'](_0x4a1217){const _0x5e110d={_0x390011:0xc9},_0x4fbbd9=_0x9d903f;this['_cache_event']=_0x4a1217,this['_mapVRenderer']&&this['_mapVRenderer']['clickEvent'](_0x4a1217[_0x4fbbd9(_0x5e110d._0x390011)],_0x4a1217);}['_onMapMouseMove'](_0x7375dd){const _0x2f6d36={_0x3e3879:0xc9},_0xa42ed5=_0x9d903f;this['_cache_event']=_0x7375dd,this['_mapVRenderer']&&this['_mapVRenderer']['mousemoveEvent'](_0x7375dd[_0xa42ed5(_0x2f6d36._0x3e3879)],_0x7375dd);}['on'](_0x45c4f9,_0x246e5b,_0x609c8e){const _0x14bf0b={_0x22a0e9:0x121,_0x1928d1:0x113,_0x898702:0x110},_0x9ac2ed=_0x9d903f;this['options']['methods']=this['options'][_0x9ac2ed(0x113)]||{};if(_0x45c4f9===mars3d__namespace['EventType'][_0x9ac2ed(_0x14bf0b._0x22a0e9)])this['options'][_0x9ac2ed(_0x14bf0b._0x1928d1)][_0x9ac2ed(0x121)]=_0x1c804f=>{const _0x52bd00=_0x9ac2ed;_0x1c804f&&_0x246e5b[_0x52bd00(0x11e)](_0x609c8e)({...this['_cache_event'],'layer':this,'data':_0x1c804f});},this['_map']['on'](mars3d__namespace['EventType'][_0x9ac2ed(_0x14bf0b._0x22a0e9)],this['_onMapClick'],this);else _0x45c4f9===mars3d__namespace['EventType'][_0x9ac2ed(_0x14bf0b._0x898702)]&&(this['options'][_0x9ac2ed(0x113)]['mousemove']=_0xed3477=>{const _0x51c864=_0x9ac2ed;_0xed3477&&_0x246e5b['bind'](_0x609c8e)({...this[_0x51c864(0x129)],'layer':this,'data':_0xed3477});},this[_0x9ac2ed(0xbc)]['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this));return this;}['off'](_0x3befbe,_0x4c1118){const _0x53a541={_0x2c6ae7:0xbc,_0x1f1922:0x112},_0x3a8870=_0x9d903f;if(_0x3befbe===_0x3a8870(0x121)){var _0x398976;this[_0x3a8870(_0x53a541._0x2c6ae7)]['off'](_0x3befbe,this['_onMapClick'],this),(_0x398976=this['options']['methods'])!==null&&_0x398976!==void 0x0&&_0x398976['mousemove']&&delete this['options']['methods']['click'];}else{if(_0x3befbe==='mouseMove'){var _0x3f84ad;this[_0x3a8870(0xbc)]['off'](_0x3befbe,this['_onMapMouseMove'],this),(_0x3f84ad=this[_0x3a8870(_0x53a541._0x1f1922)]['methods'])!==null&&_0x3f84ad!==void 0x0&&_0x3f84ad['mousemove']&&delete this['options']['methods']['mousemove'];}}return this;}}mars3d__namespace['LayerUtil'][_0x9d903f(0x11b)]('mapv',MapVLayer),mars3d__namespace[_0x9d903f(0xf7)][_0x9d903f(0xee)]=MapVLayer,exports[_0x9d903f(0xee)]=MapVLayer,Object[_0x9d903f(0x104)](mapv)[_0x9d903f(0xfb)](function(_0x44fe37){if(_0x44fe37!=='default'&&!exports['hasOwnProperty'](_0x44fe37))Object['defineProperty'](exports,_0x44fe37,{'enumerable':!![],'get':function(){return mapv[_0x44fe37];}});}),Object[_0x9d903f(0x100)](exports,_0x9d903f(0x115),{'value':!![]});
}));
