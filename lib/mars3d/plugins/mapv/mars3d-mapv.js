/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.5.3
 * 编译日期：2023-04-18 09:46:03
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';var _0x30b49f=_0x9b51;(function(_0xe8c339,_0x53a9f5){var _0x5a1a39={_0x241545:0x173,_0x3efce3:0x140,_0x8d6105:0x124,_0x5beefd:0x17a,_0x54bb64:0x15e,_0x25098c:0x153,_0x450b08:0x171,_0x4cbd63:0x134,_0x42849e:0x13e},_0x53538e=_0x9b51,_0x5dce3d=_0xe8c339();while(!![]){try{var _0x3b6789=parseInt(_0x53538e(0x156))/0x1*(-parseInt(_0x53538e(_0x5a1a39._0x241545))/0x2)+parseInt(_0x53538e(_0x5a1a39._0x3efce3))/0x3+-parseInt(_0x53538e(_0x5a1a39._0x8d6105))/0x4*(parseInt(_0x53538e(_0x5a1a39._0x5beefd))/0x5)+-parseInt(_0x53538e(_0x5a1a39._0x54bb64))/0x6*(-parseInt(_0x53538e(_0x5a1a39._0x25098c))/0x7)+parseInt(_0x53538e(0x12c))/0x8*(parseInt(_0x53538e(_0x5a1a39._0x450b08))/0x9)+parseInt(_0x53538e(_0x5a1a39._0x4cbd63))/0xa*(parseInt(_0x53538e(0x14f))/0xb)+-parseInt(_0x53538e(_0x5a1a39._0x42849e))/0xc;if(_0x3b6789===_0x53a9f5)break;else _0x5dce3d['push'](_0x5dce3d['shift']());}catch(_0xd6bdf){_0x5dce3d['push'](_0x5dce3d['shift']());}}}(_0x3018,0x3cb89));function _0x9b51(_0x24dbc7,_0x267697){var _0x30183b=_0x3018();return _0x9b51=function(_0x9b517,_0x45c25f){_0x9b517=_0x9b517-0x122;var _0x29c6bf=_0x30183b[_0x9b517];return _0x29c6bf;},_0x9b51(_0x24dbc7,_0x267697);}function _interopNamespace(_0x5333b3){var _0x231687={_0x8a339e:0x169,_0x2f2cda:0x18a},_0x7849dc=_0x9b51;if(_0x5333b3&&_0x5333b3['__esModule'])return _0x5333b3;var _0x3a4ac7=Object[_0x7849dc(0x149)](null);return _0x5333b3&&Object['keys'](_0x5333b3)['forEach'](function(_0x3cef7b){var _0x3f9f43=_0x7849dc;if(_0x3cef7b!=='default'){var _0x4fcf18=Object[_0x3f9f43(_0x231687._0x8a339e)](_0x5333b3,_0x3cef7b);Object[_0x3f9f43(_0x231687._0x2f2cda)](_0x3a4ac7,_0x3cef7b,_0x4fcf18['get']?_0x4fcf18:{'enumerable':!![],'get':function(){return _0x5333b3[_0x3cef7b];}});}}),_0x3a4ac7['default']=_0x5333b3,_0x3a4ac7;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);function ownKeys(_0x1e4aed,_0x50e001){var _0x35e69a={_0x3989e8:0x164},_0x1422f8=_0x9b51,_0x19fc66=Object['keys'](_0x1e4aed);if(Object['getOwnPropertySymbols']){var _0x2d6273=Object['getOwnPropertySymbols'](_0x1e4aed);_0x50e001&&(_0x2d6273=_0x2d6273[_0x1422f8(_0x35e69a._0x3989e8)](function(_0x227933){return Object['getOwnPropertyDescriptor'](_0x1e4aed,_0x227933)['enumerable'];})),_0x19fc66['push']['apply'](_0x19fc66,_0x2d6273);}return _0x19fc66;}function _objectSpread2(_0x517ee9){var _0x2e549e=_0x9b51;for(var _0x1cad52=0x1;_0x1cad52<arguments['length'];_0x1cad52++){var _0xab85fd=null!=arguments[_0x1cad52]?arguments[_0x1cad52]:{};_0x1cad52%0x2?ownKeys(Object(_0xab85fd),!0x0)[_0x2e549e(0x183)](function(_0x356aae){_defineProperty(_0x517ee9,_0x356aae,_0xab85fd[_0x356aae]);}):Object['getOwnPropertyDescriptors']?Object[_0x2e549e(0x122)](_0x517ee9,Object['getOwnPropertyDescriptors'](_0xab85fd)):ownKeys(Object(_0xab85fd))['forEach'](function(_0x4a2c3d){Object['defineProperty'](_0x517ee9,_0x4a2c3d,Object['getOwnPropertyDescriptor'](_0xab85fd,_0x4a2c3d));});}return _0x517ee9;}function _0x3018(){var _0x2231d4=['Super\x20expression\x20must\x20either\x20be\x20null\x20or\x20a\x20function','step','removeAllData','options','_addedHook','animatorMoveendEvent','depthTest','8KntgVN','parentElement','camera','postRender','_createCanvas','all','mapvFixedHeight','addData','10qNXlbX','length','mars3d-mapv','_mapVRenderer','_map','isPointVisible','push','context','clearRect','removeData','9254856nxAUcY','EllipsoidalOccluder','936171ULrVVW','clampToGround','remove','height','time','trails','mouseMove','setPrototypeOf','fromDegrees','create','MultiPolygon','_onMoveEndEvent','devicePixelRatio','stop','__proto__','4616359TNSYzn','zIndex','none','scene','2457497tkMWgK','_cache_event','rgba(0,\x200,\x200,\x20.1)','581NMlCdq','DataSet','start','canvas','construct','off','getRectangle','_onMapMouseMove','6DLZeRx','isEnabledTime','_pointerEvents','_reset','map','_canvasUpdate','filter','width','animator','SCENE3D','absolute','getOwnPropertyDescriptor','Cesium','clickEvent','fillStyle','destroy','container','mousemove','FeatureCollection','4197843IpcrGv','constructor','1694wKPwKV','mapv','sham','animation','mouseDown','cameraMoveStart','getContext','5STGWyB','dataSet','object','processData','SceneMode','MapVLayer','methods','_onMapClick','style','forEach','EventType','animatorMovestartEvent','_mountedHook','baiduMapLayer','canvasLayer','update','defineProperty','top','function','LineString','pointerEvents','stepsRange','Point','get','click','Polygon','defineProperties','hasOwnProperty','148664HlBuap'];_0x3018=function(){return _0x2231d4;};return _0x3018();}function _classCallCheck(_0x47475a,_0x3f1680){if(!(_0x47475a instanceof _0x3f1680))throw new TypeError('Cannot\x20call\x20a\x20class\x20as\x20a\x20function');}function _defineProperties(_0x1265ff,_0x25a396){var _0x41d6f8=_0x9b51;for(var _0x28b779=0x0;_0x28b779<_0x25a396[_0x41d6f8(0x135)];_0x28b779++){var _0x40af8f=_0x25a396[_0x28b779];_0x40af8f['enumerable']=_0x40af8f['enumerable']||![],_0x40af8f['configurable']=!![];if('value'in _0x40af8f)_0x40af8f['writable']=!![];Object['defineProperty'](_0x1265ff,_0x40af8f['key'],_0x40af8f);}}function _createClass(_0xc8fe63,_0x1af31c,_0x5bda1c){if(_0x1af31c)_defineProperties(_0xc8fe63['prototype'],_0x1af31c);if(_0x5bda1c)_defineProperties(_0xc8fe63,_0x5bda1c);return Object['defineProperty'](_0xc8fe63,'prototype',{'writable':![]}),_0xc8fe63;}function _defineProperty(_0x7c231f,_0x2461a3,_0x4872f1){return _0x2461a3 in _0x7c231f?Object['defineProperty'](_0x7c231f,_0x2461a3,{'value':_0x4872f1,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x7c231f[_0x2461a3]=_0x4872f1,_0x7c231f;}function _inherits(_0x22275b,_0xceec06){var _0xfdc985={_0x452f93:0x125},_0x74e89d=_0x9b51;if(typeof _0xceec06!=='function'&&_0xceec06!==null)throw new TypeError(_0x74e89d(_0xfdc985._0x452f93));_0x22275b['prototype']=Object['create'](_0xceec06&&_0xceec06['prototype'],{'constructor':{'value':_0x22275b,'writable':!![],'configurable':!![]}}),Object[_0x74e89d(0x18a)](_0x22275b,'prototype',{'writable':![]});if(_0xceec06)_setPrototypeOf(_0x22275b,_0xceec06);}function _getPrototypeOf(_0x1f92d6){return _getPrototypeOf=Object['setPrototypeOf']?Object['getPrototypeOf']:function _0xc82a20(_0x1d9f5d){return _0x1d9f5d['__proto__']||Object['getPrototypeOf'](_0x1d9f5d);},_getPrototypeOf(_0x1f92d6);}function _setPrototypeOf(_0x2d211d,_0x39f7e2){var _0x1854f0=_0x9b51;return _setPrototypeOf=Object[_0x1854f0(0x147)]||function _0x58d43d(_0x7f01cd,_0x71b5a6){return _0x7f01cd['__proto__']=_0x71b5a6,_0x7f01cd;},_setPrototypeOf(_0x2d211d,_0x39f7e2);}function _isNativeReflectConstruct(){var _0x88e2fd={_0x50d16d:0x15a,_0x33f7be:0x175,_0xf25277:0x18c},_0x1bbcfd=_0x9b51;if(typeof Reflect==='undefined'||!Reflect[_0x1bbcfd(_0x88e2fd._0x50d16d)])return![];if(Reflect[_0x1bbcfd(0x15a)][_0x1bbcfd(_0x88e2fd._0x33f7be)])return![];if(typeof Proxy===_0x1bbcfd(_0x88e2fd._0xf25277))return!![];try{return Boolean['prototype']['valueOf']['call'](Reflect['construct'](Boolean,[],function(){})),!![];}catch(_0x29d045){return![];}}function _assertThisInitialized(_0xffb29a){if(_0xffb29a===void 0x0)throw new ReferenceError('this\x20hasn\x27t\x20been\x20initialised\x20-\x20super()\x20hasn\x27t\x20been\x20called');return _0xffb29a;}function _possibleConstructorReturn(_0x276200,_0x333205){var _0x58da7a={_0x1751ed:0x17c,_0x1ac561:0x18c},_0xc87748=_0x9b51;if(_0x333205&&(typeof _0x333205===_0xc87748(_0x58da7a._0x1751ed)||typeof _0x333205===_0xc87748(_0x58da7a._0x1ac561)))return _0x333205;else{if(_0x333205!==void 0x0)throw new TypeError('Derived\x20constructors\x20may\x20only\x20return\x20object\x20or\x20undefined');}return _assertThisInitialized(_0x276200);}function _createSuper(_0x1d3ab7){var _0x48fc8a={_0x134803:0x172,_0x4f3c14:0x15a},_0x41aa7c=_isNativeReflectConstruct();return function _0x5e45ec(){var _0x325022=_0x9b51,_0x31bfe3=_getPrototypeOf(_0x1d3ab7),_0x6eda11;if(_0x41aa7c){var _0x35b943=_getPrototypeOf(this)[_0x325022(_0x48fc8a._0x134803)];_0x6eda11=Reflect[_0x325022(_0x48fc8a._0x4f3c14)](_0x31bfe3,arguments,_0x35b943);}else _0x6eda11=_0x31bfe3['apply'](this,arguments);return _possibleConstructorReturn(this,_0x6eda11);};}function _superPropBase(_0x2ddbf1,_0x25fc60){var _0x1f73dd={_0x5631a7:0x123},_0x2fb3b2=_0x9b51;while(!Object['prototype'][_0x2fb3b2(_0x1f73dd._0x5631a7)]['call'](_0x2ddbf1,_0x25fc60)){_0x2ddbf1=_getPrototypeOf(_0x2ddbf1);if(_0x2ddbf1===null)break;}return _0x2ddbf1;}function _get(){var _0x5b0b55={_0x4da3b9:0x169,_0x334633:0x135};return typeof Reflect!=='undefined'&&Reflect['get']?_get=Reflect['get']:_get=function _0x254ddf(_0x5a1e8f,_0x4ca074,_0xa26919){var _0x692c4e=_0x9b51,_0x269a41=_superPropBase(_0x5a1e8f,_0x4ca074);if(!_0x269a41)return;var _0x3d398e=Object[_0x692c4e(_0x5b0b55._0x4da3b9)](_0x269a41,_0x4ca074);if(_0x3d398e['get'])return _0x3d398e['get']['call'](arguments[_0x692c4e(_0x5b0b55._0x334633)]<0x3?_0x5a1e8f:_0xa26919);return _0x3d398e['value'];},_get['apply'](this,arguments);}var Cesium$1=mars3d__namespace[_0x30b49f(0x16a)],baiduMapLayer=mapv__namespace?mapv__namespace[_0x30b49f(0x187)]:null,BaseLayer$1=baiduMapLayer?baiduMapLayer[_0x30b49f(0x14e)]:Function,MapVRenderer=function(_0x12d96c){var _0x479add={_0x4e39f1:0x179,_0x143c16:0x133},_0x359ecd={_0xd95b93:0x166},_0xceafb4={_0x545f41:0x143},_0x2de687={_0xb9870f:0x17b,_0x17e694:0x191},_0x3d08e1={_0x247155:0x191},_0x25646a={_0x5e8a9c:0x191},_0x366af8={_0x381a6e:0x152,_0xe81dce:0x176,_0x5c0fb0:0x13b,_0x497cdd:0x16c,_0x4298ce:0x128,_0xefb334:0x17b,_0x193480:0x191,_0x38adac:0x128,_0xc1bceb:0x128},_0x7ed5cd={_0x1b5d3b:0x13b,_0x3146d8:0x128,_0xcaf05e:0x188},_0x13bb95={_0x377af8:0x128,_0x99eaea:0x15f,_0x5c3a97:0x166,_0x1ed483:0x126,_0x406303:0x18f,_0x1d9b2a:0x158},_0xaefbd6={_0x2e79f0:0x17b},_0x514fe1=_0x30b49f;_inherits(_0x5c9f9d,_0x12d96c);var _0x2a2fd2=_createSuper(_0x5c9f9d);function _0x5c9f9d(_0x57bf51,_0x3b52f9,_0x799d3e,_0x55ee78){var _0x1cce93=_0x9b51,_0x2dbb09;_classCallCheck(this,_0x5c9f9d),_0x2dbb09=_0x2a2fd2['call'](this,_0x57bf51,_0x3b52f9,_0x799d3e);if(!BaseLayer$1)return _possibleConstructorReturn(_0x2dbb09);return _0x2dbb09[_0x1cce93(0x162)]=_0x57bf51,_0x2dbb09[_0x1cce93(0x152)]=_0x57bf51['scene'],_0x2dbb09[_0x1cce93(_0xaefbd6._0x2e79f0)]=_0x3b52f9,_0x799d3e=_0x799d3e||{},_0x2dbb09['init'](_0x799d3e),_0x2dbb09['argCheck'](_0x799d3e),_0x2dbb09['initDevicePixelRatio'](),_0x2dbb09['canvasLayer']=_0x55ee78,_0x2dbb09['stopAniamation']=!0x1,_0x2dbb09['animation']=_0x799d3e['animation'],_0x2dbb09;}return _createClass(_0x5c9f9d,[{'key':'initDevicePixelRatio','value':function _0x4f57c0(){var _0x3a8232=_0x9b51;this[_0x3a8232(0x14c)]=window[_0x3a8232(0x14c)]||0x1;}},{'key':'addAnimatorEvent','value':function _0x2fa7ac(){}},{'key':'animatorMovestartEvent','value':function _0x45601c(){var _0x30a615=_0x9b51,_0x501c84=this[_0x30a615(_0x13bb95._0x377af8)][_0x30a615(0x176)];this[_0x30a615(_0x13bb95._0x99eaea)]()&&this[_0x30a615(_0x13bb95._0x5c3a97)]&&(this['steps'][_0x30a615(_0x13bb95._0x1ed483)]=_0x501c84[_0x30a615(_0x13bb95._0x406303)][_0x30a615(_0x13bb95._0x1d9b2a)]);}},{'key':'animatorMoveendEvent','value':function _0x8804cd(){this['isEnabledTime']()&&this['animator'];}},{'key':_0x514fe1(_0x479add._0x4e39f1),'value':function _0x41525c(){var _0x30d519=_0x514fe1;return this['canvasLayer'][_0x30d519(0x159)]['getContext'](this['context']);}},{'key':'init','value':function _0x2a782f(_0x3e0fe3){var _0x248174=_0x514fe1;this['options']=_0x3e0fe3,this['initDataRange'](_0x3e0fe3),this[_0x248174(_0x7ed5cd._0x1b5d3b)]=this[_0x248174(_0x7ed5cd._0x3146d8)]['context']||'2d',this['options']['zIndex']&&this['canvasLayer']&&this['canvasLayer']['setZIndex']&&this[_0x248174(_0x7ed5cd._0xcaf05e)]['setZIndex'](this['options']['zIndex']),this['initAnimator']();}},{'key':'_canvasUpdate','value':function _0x4ada7e(_0x54c7a7){var _0xa1ec3={_0xb5b20f:0x145,_0x1c3ed1:0x144},_0x135b5f={_0x54e4b0:0x148,_0x4170e0:0x17e,_0x4089d3:0x13f},_0x46f34a=_0x514fe1,_0x5d1239=this[_0x46f34a(_0x366af8._0x381a6e)];if(this['canvasLayer']&&!this['stopAniamation']){var _0x27eb5b=this[_0x46f34a(0x128)][_0x46f34a(_0x366af8._0xe81dce)],_0x4dec75=this['getContext']();if(this[_0x46f34a(0x15f)]()){if(void 0x0===_0x54c7a7)return void this['clear'](_0x4dec75);this[_0x46f34a(_0x366af8._0x5c0fb0)]==='2d'&&(_0x4dec75['save'](),_0x4dec75['globalCompositeOperation']='destination-out',_0x4dec75[_0x46f34a(_0x366af8._0x497cdd)]=_0x46f34a(0x155),_0x4dec75['fillRect'](0x0,0x0,_0x4dec75[_0x46f34a(0x159)]['width'],_0x4dec75['canvas'][_0x46f34a(0x143)]),_0x4dec75['restore']());}else this['clear'](_0x4dec75);if(this['context']==='2d')for(var _0x264099 in this['options']){_0x4dec75[_0x264099]=this[_0x46f34a(_0x366af8._0x4298ce)][_0x264099];}else _0x4dec75['clear'](_0x4dec75['COLOR_BUFFER_BIT']);var _0x50dcd5={'transferCoordinate':function _0x58148f(_0x1b77ec){var _0x1341c3=_0x46f34a,_0x21d31f=null,_0x4350de=_0x5d1239[_0x1341c3(0x132)];_0x5d1239['mapvAutoHeight']&&(_0x4350de=_0x5d1239['globe']['getHeight'](Cesium$1['Cartographic'][_0x1341c3(_0x135b5f._0x54e4b0)](_0x1b77ec[0x0],_0x1b77ec[0x1])));var _0x43287e=Cesium$1['Cartesian3'][_0x1341c3(0x148)](_0x1b77ec[0x0],_0x1b77ec[0x1],_0x4350de);if(!_0x43287e)return _0x21d31f;var _0x4d703f=_0x5d1239['cartesianToCanvasCoordinates'](_0x43287e);if(!_0x4d703f)return _0x21d31f;if(_0x5d1239['mapvDepthTest']&&_0x5d1239['mode']===Cesium$1[_0x1341c3(_0x135b5f._0x4170e0)][_0x1341c3(0x167)]){var _0x10cc7a=new Cesium$1[(_0x1341c3(_0x135b5f._0x4089d3))](_0x5d1239['globe']['ellipsoid'],_0x5d1239[_0x1341c3(0x12e)]['positionWC']),_0x6e570b=_0x10cc7a[_0x1341c3(0x139)](_0x43287e);if(!_0x6e570b)return _0x21d31f;}return[_0x4d703f['x'],_0x4d703f['y']];}};void 0x0!==_0x54c7a7&&(_0x50dcd5['filter']=function(_0x2b73c6){var _0x4143c0=_0x46f34a,_0x244ad5=_0x27eb5b[_0x4143c0(_0xa1ec3._0xb5b20f)]||0xa;return!!(_0x54c7a7&&_0x2b73c6['time']>_0x54c7a7-_0x244ad5&&_0x2b73c6[_0x4143c0(_0xa1ec3._0x1c3ed1)]<_0x54c7a7);});var _0x11eb2f=this[_0x46f34a(_0x366af8._0xefb334)][_0x46f34a(_0x366af8._0x193480)](_0x50dcd5);this[_0x46f34a(0x17d)](_0x11eb2f),this['options']['unit']==='m'&&this[_0x46f34a(0x128)]['size'],this['options']['_size']=this[_0x46f34a(0x128)]['size'];var _0x38d0e6=_0x5d1239['cartesianToCanvasCoordinates'](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x38d0e6)return;this['drawContext'](_0x4dec75,new mapv__namespace['DataSet'](_0x11eb2f),this[_0x46f34a(_0x366af8._0x38adac)],_0x38d0e6),this['options']['updateCallback']&&this[_0x46f34a(_0x366af8._0xc1bceb)]['updateCallback'](_0x54c7a7);}}},{'key':'updateData','value':function _0x22fee5(_0x495721,_0x26a54b){var _0x499193=_0x514fe1,_0x3ef55d=_0x495721;_0x3ef55d&&_0x3ef55d['get']&&(_0x3ef55d=_0x3ef55d[_0x499193(_0x25646a._0x5e8a9c)]()),void 0x0!==_0x3ef55d&&this['dataSet']['set'](_0x3ef55d),_get(_getPrototypeOf(_0x5c9f9d['prototype']),'update',this)['call'](this,{'options':_0x26a54b});}},{'key':_0x514fe1(_0x479add._0x143c16),'value':function _0x43d776(_0x51f860,_0x40072b){var _0x303ad0=_0x514fe1,_0x4190eb=_0x51f860;_0x51f860&&_0x51f860[_0x303ad0(_0x3d08e1._0x247155)]&&(_0x4190eb=_0x51f860['get']()),this['dataSet']['add'](_0x4190eb),this[_0x303ad0(0x189)]({'options':_0x40072b});}},{'key':'getData','value':function _0x5751df(){return this['dataSet'];}},{'key':'removeData','value':function _0x15e8ec(_0x3188ee){var _0x37ec1f=_0x514fe1;if(this[_0x37ec1f(_0x2de687._0xb9870f)]){var _0x1c443b=this['dataSet'][_0x37ec1f(_0x2de687._0x17e694)]({'filter':function _0x4df283(_0x4f35c7){return _0x3188ee==null||typeof _0x3188ee!=='function'||!_0x3188ee(_0x4f35c7);}});this['dataSet']['set'](_0x1c443b),this['update']({'options':null});}}},{'key':'clearData','value':function _0x46da34(){this['dataSet']&&this['dataSet']['clear'](),this['update']({'options':null});}},{'key':'draw','value':function _0x79250b(){this['canvasLayer']['draw']();}},{'key':'clear','value':function _0x44198f(_0x1f7dd3){var _0x11b610=_0x514fe1;_0x1f7dd3&&_0x1f7dd3[_0x11b610(0x13c)]&&_0x1f7dd3['clearRect'](0x0,0x0,_0x1f7dd3['canvas']['width'],_0x1f7dd3['canvas'][_0x11b610(_0xceafb4._0x545f41)]);}},{'key':_0x514fe1(0x16d),'value':function _0x43cae6(){var _0x19a0ba=_0x514fe1;this['clear'](this['getContext']()),this['clearData'](),this[_0x19a0ba(_0x359ecd._0xd95b93)]&&this[_0x19a0ba(0x166)][_0x19a0ba(0x14d)](),this['animator']=null,this['canvasLayer']=null;}}]),_0x5c9f9d;}(BaseLayer$1);if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace[_0x30b49f(0x157)])mapv__namespace['DataSet']['prototype']['transferCoordinate']=function(_0x474609,_0x78d98a,_0x24e9a9,_0x3b9b3e){var _0x23d5da={_0x2d15dd:0x18d,_0x100285:0x135},_0xa9adb1={_0x4de785:0x135},_0x204696=_0x30b49f;_0x3b9b3e=_0x3b9b3e||'_coordinates',_0x24e9a9=_0x24e9a9||'coordinates';for(var _0x2c4fe0=0x0;_0x2c4fe0<_0x474609['length'];_0x2c4fe0++){var _0x4925be=_0x474609[_0x2c4fe0]['geometry'],_0x4da1e=_0x4925be[_0x24e9a9];switch(_0x4925be['type']){case _0x204696(0x190):{var _0x14b6aa=_0x78d98a(_0x4da1e);_0x14b6aa?_0x4925be[_0x3b9b3e]=_0x14b6aa:_0x4925be[_0x3b9b3e]=[-0x3e7,-0x3e7];}break;case _0x204696(_0x23d5da._0x2d15dd):{var _0x101ec1=[];for(var _0x28b78e=0x0;_0x28b78e<_0x4da1e['length'];_0x28b78e++){var _0x448d55=_0x78d98a(_0x4da1e[_0x28b78e]);_0x448d55&&_0x101ec1['push'](_0x448d55);}_0x4925be[_0x3b9b3e]=_0x101ec1;}break;case'MultiLineString':case _0x204696(0x193):{var _0x22bc39=_0x4a37df(_0x4da1e);_0x4925be[_0x3b9b3e]=_0x22bc39;}break;case _0x204696(0x14a):{var _0x519773=[];for(var _0x556965=0x0;_0x556965<_0x4da1e[_0x204696(_0x23d5da._0x100285)];_0x556965++){var _0xf1f283=_0x4a37df(_0x4da1e[_0x556965]);_0xf1f283['length']>0x0&&_0x519773['push'](_0xf1f283);}_0x4925be[_0x3b9b3e]=_0x519773;}break;}}function _0x4a37df(_0x5b6eaa){var _0x27befa=_0x204696,_0x4f7937=[];for(var _0x145905=0x0;_0x145905<_0x5b6eaa[_0x27befa(_0xa9adb1._0x4de785)];_0x145905++){var _0x34855a=_0x5b6eaa[_0x145905],_0x4e4671=[];for(var _0x571cf1=0x0;_0x571cf1<_0x34855a['length'];_0x571cf1++){var _0x2b05b1=_0x78d98a(_0x34855a[_0x571cf1]);_0x2b05b1&&_0x4e4671[_0x27befa(0x13a)](_0x2b05b1);}_0x4e4671['length']>0x0&&_0x4f7937['push'](_0x4e4671);}return _0x4f7937;}return _0x474609;};else throw new Error('请引入\x20mapv\x20库\x20');var Cesium=mars3d__namespace[_0x30b49f(0x16a)],BaseLayer=mars3d__namespace['layer']['BaseLayer'],divId=0x0,MapVLayer=function(_0x34291e){var _0x3dd76d={_0x13943f:0x186,_0xc311ca:0x129,_0x3a96ce:0x14b,_0x468892:0x130,_0xe114d8:0x161,_0x35d7af:0x142},_0x563064={_0x52c3e0:0x138,_0x58b740:0x16f,_0x8cabc0:0x146},_0x3031a8={_0x427d5a:0x184},_0x5f258f={_0x2f07fb:0x154,_0x18ef70:0x16b},_0x5f3989={_0x25dd09:0x170},_0xb7ed26={_0x3d25da:0x18b,_0x1e2c15:0x165,_0x2e23f2:0x143},_0x105fe0={_0x69febd:0x163},_0x37b06b={_0x54d352:0x137},_0x341e73={_0xf89f61:0x182,_0x27e072:0x182,_0x1ca7d5:0x150,_0x31e915:0x13b},_0x4d087d={_0x843e58:0x13d},_0x4ff6c7={_0x5e21e9:0x133},_0x33433d={_0x1d8f43:0x129},_0xb402ff={_0x41af60:0x12a},_0x5787fe={_0x5db81e:0x185,_0x379350:0x161,_0x1176de:0x161},_0x4a9a73={_0x21a75a:0x15b,_0x44b17f:0x138,_0xae3f62:0x178,_0x26f5cb:0x184,_0x4bf314:0x138,_0x1dbdcf:0x181,_0xefa96f:0x138},_0x249c6d={_0x410cd8:0x184,_0x2984bd:0x177,_0x8634ef:0x184,_0x5369c5:0x180},_0x43eecb={_0x567583:0x14c},_0x2cc896={_0x207122:0x137},_0x202ec4={_0x188172:0x138},_0x3658d2={_0x4454b8:0x12b,_0x3e4183:0x128},_0x53b056={_0x22c55b:0x159,_0x30af4a:0x151},_0x593c75={_0x189ba6:0x182,_0x36feed:0x131},_0x194f00={_0x5e2957:0x17b},_0x5ce401=_0x30b49f;_inherits(_0x4d90ce,_0x34291e);var _0x32af83=_createSuper(_0x4d90ce);function _0x4d90ce(_0x4bde80,_0x9472fa){var _0x2f8f7a=_0x9b51,_0x222f05;return _classCallCheck(this,_0x4d90ce),_0x222f05=_0x32af83['call'](this,_0x4bde80),_0x222f05[_0x2f8f7a(0x160)]=_0x222f05[_0x2f8f7a(0x128)]['pointerEvents'],_0x222f05[_0x2f8f7a(_0x194f00._0x5e2957)]=_0x9472fa||new mapv__namespace['DataSet'](_0x4bde80['data']),_0x222f05['canvas']=null,_0x222f05;}return _createClass(_0x4d90ce,[{'key':'pointerEvents','get':function _0x44cf1c(){var _0xc61b11=_0x9b51;return this[_0xc61b11(0x160)];},'set':function _0x245ea0(_0xb7580){var _0x5c2acb=_0x9b51;this['_pointerEvents']=_0xb7580,this['canvas']&&(_0xb7580?this['canvas'][_0x5c2acb(_0x593c75._0x189ba6)]['pointerEvents']=_0x5c2acb(_0x593c75._0x36feed):this[_0x5c2acb(0x159)]['style'][_0x5c2acb(0x18e)]='none');}},{'key':'_showHook','value':function _0x1a0bff(_0x37fa9a){var _0x423e5c=_0x9b51;_0x37fa9a?this[_0x423e5c(_0x53b056._0x22c55b)]['style']['display']='block':this[_0x423e5c(0x159)]['style']['display']=_0x423e5c(_0x53b056._0x30af4a);}},{'key':_0x5ce401(_0x3dd76d._0x13943f),'value':function _0x332480(){var _0x43669a=_0x5ce401,_0x101552,_0x501d0f,_0x17f4d3;this['_map']['scene']['mapvDepthTest']=(_0x101552=this[_0x43669a(0x128)][_0x43669a(_0x3658d2._0x4454b8)])!==null&&_0x101552!==void 0x0?_0x101552:!![],this['_map'][_0x43669a(0x152)]['mapvAutoHeight']=(_0x501d0f=this[_0x43669a(_0x3658d2._0x3e4183)][_0x43669a(0x141)])!==null&&_0x501d0f!==void 0x0?_0x501d0f:![],this['_map']['scene']['mapvFixedHeight']=(_0x17f4d3=this[_0x43669a(_0x3658d2._0x3e4183)]['fixedHeight'])!==null&&_0x17f4d3!==void 0x0?_0x17f4d3:0x0;}},{'key':_0x5ce401(_0x3dd76d._0xc311ca),'value':function _0x36a671(){var _0x2a785f=_0x5ce401;this[_0x2a785f(0x17b)]&&(!this[_0x2a785f(0x17b)]['_data']||this['dataSet']['_data']['length']===0x0)&&(this['dataSet']['_data']=[]['concat'](this['dataSet']['_dataCache'])),this['_mapVRenderer']=new MapVRenderer(this[_0x2a785f(_0x202ec4._0x188172)],this['dataSet'],this['options'],this),this['initDevicePixelRatio'](),this['canvas']=this['_createCanvas'](),this['render']=this['render']['bind'](this),this['bindEvent'](),this['_reset']();}},{'key':'_removedHook','value':function _0x44c8e3(){var _0x170eb7=_0x5ce401;this['unbindEvent'](),this['_mapVRenderer']&&(this['_mapVRenderer']['destroy'](),this[_0x170eb7(_0x2cc896._0x207122)]=null),this['canvas']['parentElement']['removeChild'](this[_0x170eb7(0x159)]);}},{'key':'initDevicePixelRatio','value':function _0xc702d3(){var _0x3b4582=_0x5ce401;this['devicePixelRatio']=window[_0x3b4582(_0x43eecb._0x567583)]||0x1;}},{'key':'bindEvent','value':function _0x560949(){var _0x13473b=_0x5ce401,_0x3ab3f2,_0x5589a3,_0xa74da1,_0x163145;this['_map']['on'](mars3d__namespace[_0x13473b(_0x249c6d._0x410cd8)][_0x13473b(_0x249c6d._0x2984bd)],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x13473b(0x178)],this['_onMoveStartEvent'],this),this[_0x13473b(0x138)]['on'](mars3d__namespace[_0x13473b(_0x249c6d._0x8634ef)]['cameraMoveEnd'],this['_onMoveEndEvent'],this),(_0x3ab3f2=this['options'])!==null&&_0x3ab3f2!==void 0x0&&(_0x5589a3=_0x3ab3f2[_0x13473b(_0x249c6d._0x5369c5)])!==null&&_0x5589a3!==void 0x0&&_0x5589a3['click']&&this['_map']['on'](mars3d__namespace[_0x13473b(0x184)][_0x13473b(0x192)],this['_onMapClick'],this),(_0xa74da1=this[_0x13473b(0x128)])!==null&&_0xa74da1!==void 0x0&&(_0x163145=_0xa74da1[_0x13473b(0x180)])!==null&&_0x163145!==void 0x0&&_0x163145['mousemove']&&this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this);}},{'key':'unbindEvent','value':function _0x3f4e29(){var _0x509c94=_0x5ce401,_0x59dd41,_0x407cc4,_0x30b246,_0x519de2;this['_map'][_0x509c94(_0x4a9a73._0x21a75a)](mars3d__namespace['EventType']['mouseDown'],this['_onMoveStartEvent'],this),this[_0x509c94(_0x4a9a73._0x44b17f)]['off'](mars3d__namespace['EventType'][_0x509c94(_0x4a9a73._0xae3f62)],this['_onMoveStartEvent'],this),this[_0x509c94(_0x4a9a73._0x44b17f)]['off'](mars3d__namespace[_0x509c94(_0x4a9a73._0x26f5cb)]['cameraMoveEnd'],this[_0x509c94(0x14b)],this),this[_0x509c94(_0x4a9a73._0x4bf314)][_0x509c94(_0x4a9a73._0x21a75a)](mars3d__namespace['EventType'][_0x509c94(0x12f)],this['_reset'],this),(_0x59dd41=this['options'])!==null&&_0x59dd41!==void 0x0&&(_0x407cc4=_0x59dd41['methods'])!==null&&_0x407cc4!==void 0x0&&_0x407cc4['click']&&this['_map']['off'](mars3d__namespace['EventType']['click'],this[_0x509c94(_0x4a9a73._0x1dbdcf)],this),(_0x30b246=this['options'])!==null&&_0x30b246!==void 0x0&&(_0x519de2=_0x30b246['methods'])!==null&&_0x519de2!==void 0x0&&_0x519de2[_0x509c94(0x16f)]&&this[_0x509c94(_0x4a9a73._0xefa96f)]['off'](mars3d__namespace['EventType'][_0x509c94(0x146)],this['_onMapMouseMove'],this);}},{'key':'_onMoveStartEvent','value':function _0x19ed7d(){var _0x4ba9d4=_0x5ce401;this['_mapVRenderer']&&(this['_mapVRenderer'][_0x4ba9d4(_0x5787fe._0x5db81e)](),this[_0x4ba9d4(0x138)][_0x4ba9d4(0x15b)](mars3d__namespace['EventType']['postRender'],this[_0x4ba9d4(_0x5787fe._0x379350)],this),this['_map']['on'](mars3d__namespace['EventType']['postRender'],this[_0x4ba9d4(_0x5787fe._0x1176de)],this));}},{'key':_0x5ce401(_0x3dd76d._0x3a96ce),'value':function _0x41383c(){var _0x2b82c0=_0x5ce401;this['_mapVRenderer']&&(this[_0x2b82c0(0x138)]['off'](mars3d__namespace['EventType']['postRender'],this[_0x2b82c0(0x161)],this),this['_mapVRenderer'][_0x2b82c0(_0xb402ff._0x41af60)](),this['_reset']());}},{'key':'_setOptionsHook','value':function _0x509c53(_0x2e16a9,_0x2f7090){var _0x22429b=_0x5ce401;this['_removedHook'](),this[_0x22429b(_0x33433d._0x1d8f43)]();}},{'key':'addData','value':function _0x16ac78(_0x176a0e){var _0x40852d=_0x5ce401;this['_mapVRenderer']&&this['_mapVRenderer'][_0x40852d(_0x4ff6c7._0x5e21e9)](_0x176a0e,this[_0x40852d(0x128)]);}},{'key':'updateData','value':function _0x346fde(_0x5f2b57){this['_mapVRenderer']&&this['_mapVRenderer']['updateData'](_0x5f2b57,this['options']);}},{'key':'getData','value':function _0x1caa0b(){return this['_mapVRenderer']&&(this['dataSet']=this['_mapVRenderer']['getData']()),this['dataSet'];}},{'key':_0x5ce401(0x13d),'value':function _0x43d906(_0x19a98c){var _0x4dcace=_0x5ce401;this['_mapVRenderer']&&this['_mapVRenderer'][_0x4dcace(_0x4d087d._0x843e58)](_0x19a98c);}},{'key':_0x5ce401(0x127),'value':function _0x1449b6(){var _0x552bfc=_0x5ce401;this['_mapVRenderer']&&this[_0x552bfc(0x137)]['clearData']();}},{'key':_0x5ce401(_0x3dd76d._0x468892),'value':function _0x4de5a6(){var _0x5c9321=_0x5ce401,_0x5125a1=mars3d__namespace['DomUtil']['create']('canvas',_0x5c9321(0x136),this['_map'][_0x5c9321(0x16e)]);_0x5125a1['id']=this['options']['layerid']||'mapv'+divId++,_0x5125a1[_0x5c9321(0x182)]['position']='absolute',_0x5125a1[_0x5c9321(_0x341e73._0xf89f61)][_0x5c9321(0x18b)]='0px',_0x5125a1['style']['left']='0px',_0x5125a1[_0x5c9321(_0x341e73._0x27e072)]['pointerEvents']=this[_0x5c9321(0x160)]?'auto':'none',_0x5125a1[_0x5c9321(0x182)][_0x5c9321(_0x341e73._0x1ca7d5)]=this['options'][_0x5c9321(0x150)]||0x64,_0x5125a1['width']=parseInt(this['_map']['canvas']['width']),_0x5125a1['height']=parseInt(this['_map'][_0x5c9321(0x159)]['height']),_0x5125a1[_0x5c9321(0x182)]['width']=this['_map']['canvas'][_0x5c9321(0x182)]['width'],_0x5125a1['style']['height']=this['_map']['canvas'][_0x5c9321(_0x341e73._0x27e072)]['height'];if(this[_0x5c9321(0x128)]['context']==='2d'){var _0x339173=this['devicePixelRatio'];_0x5125a1['getContext'](this['options'][_0x5c9321(_0x341e73._0x31e915)])['scale'](_0x339173,_0x339173);}return _0x5125a1;}},{'key':_0x5ce401(_0x3dd76d._0xe114d8),'value':function _0x4570a4(){this['resize'](),this['render']();}},{'key':'draw','value':function _0x16b1be(){this['_reset']();}},{'key':_0x5ce401(_0x3dd76d._0x35d7af),'value':function _0x76059c(){var _0x36b48b=_0x5ce401;this['_mapVRenderer']&&(this[_0x36b48b(_0x37b06b._0x54d352)][_0x36b48b(0x16d)](),this[_0x36b48b(0x137)]=null),this[_0x36b48b(0x159)][_0x36b48b(0x12d)]['removeChild'](this['canvas']);}},{'key':'render','value':function _0x77cdf9(){var _0x477d3b=_0x5ce401;this[_0x477d3b(0x137)][_0x477d3b(_0x105fe0._0x69febd)]();}},{'key':'resize','value':function _0xea4041(){var _0x8d7b9=_0x5ce401;if(this[_0x8d7b9(0x159)]){var _0x1d0701=this[_0x8d7b9(0x159)];_0x1d0701['style']['position']=_0x8d7b9(0x168),_0x1d0701['style'][_0x8d7b9(_0xb7ed26._0x3d25da)]='0px',_0x1d0701['style']['left']='0px',_0x1d0701[_0x8d7b9(_0xb7ed26._0x1e2c15)]=parseInt(this['_map'][_0x8d7b9(0x159)]['width']),_0x1d0701['height']=parseInt(this['_map'][_0x8d7b9(0x159)][_0x8d7b9(0x143)]),_0x1d0701['style']['width']=this['_map']['canvas'][_0x8d7b9(0x182)]['width'],_0x1d0701['style']['height']=this['_map']['canvas']['style'][_0x8d7b9(_0xb7ed26._0x2e23f2)];}}},{'key':_0x5ce401(0x15c),'value':function _0x119618(_0x4f55dc){var _0x4d87ea=_0x5ce401;if(!this['dataSet']||!this[_0x4d87ea(0x17b)]['_data'])return;var _0x5a5725=mars3d__namespace['Util']['getExtentByGeoJSON']({'type':_0x4d87ea(_0x5f3989._0x25dd09),'features':this['dataSet']['_data']});if(!_0x5a5725)return;return _0x4f55dc!==null&&_0x4f55dc!==void 0x0&&_0x4f55dc['isFormat']?_0x5a5725:Cesium['Rectangle']['fromDegrees'](_0x5a5725['xmin'],_0x5a5725['ymin'],_0x5a5725['xmax'],_0x5a5725['ymax']);}},{'key':'_onMapClick','value':function _0x2d6a69(_0x21d860){var _0x46f681=_0x5ce401;this[_0x46f681(_0x5f258f._0x2f07fb)]=_0x21d860,this['_mapVRenderer']&&this['_mapVRenderer'][_0x46f681(_0x5f258f._0x18ef70)](_0x21d860['windowPosition'],_0x21d860);}},{'key':'_onMapMouseMove','value':function _0x856e22(_0x103763){this['_cache_event']=_0x103763,this['_mapVRenderer']&&this['_mapVRenderer']['mousemoveEvent'](_0x103763['windowPosition'],_0x103763);}},{'key':'on','value':function _0x10138d(_0x1331da,_0x16d805,_0xe7f870){var _0x52a964={_0x4598e6:0x154},_0x8bd558=_0x5ce401,_0x50fe73=this;this['options']['methods']=this['options']['methods']||{};if(_0x1331da===mars3d__namespace['EventType']['click'])this['options']['methods']['click']=function(_0x2b1e80){var _0x481442=_0x9b51;_0x2b1e80&&_0x16d805['bind'](_0xe7f870)(_objectSpread2(_objectSpread2({},_0x50fe73[_0x481442(_0x52a964._0x4598e6)]),{},{'layer':_0x50fe73,'data':_0x2b1e80}));},this['_map']['on'](mars3d__namespace[_0x8bd558(_0x3031a8._0x427d5a)]['click'],this['_onMapClick'],this);else _0x1331da===mars3d__namespace['EventType']['mouseMove']&&(this[_0x8bd558(0x128)][_0x8bd558(0x180)]['mousemove']=function(_0x8da705){_0x8da705&&_0x16d805['bind'](_0xe7f870)(_objectSpread2(_objectSpread2({},_0x50fe73['_cache_event']),{},{'layer':_0x50fe73,'data':_0x8da705}));},this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this));return this;}},{'key':'off','value':function _0x6ef6ec(_0x16cd44,_0x476a6c){var _0x5ce7d8=_0x5ce401;if(_0x16cd44===_0x5ce7d8(0x192)){var _0x529e84;this[_0x5ce7d8(_0x563064._0x52c3e0)][_0x5ce7d8(0x15b)](_0x16cd44,this['_onMapClick'],this),(_0x529e84=this['options']['methods'])!==null&&_0x529e84!==void 0x0&&_0x529e84[_0x5ce7d8(_0x563064._0x58b740)]&&delete this['options']['methods']['click'];}else{if(_0x16cd44===_0x5ce7d8(_0x563064._0x8cabc0)){var _0x4d7399;this['_map']['off'](_0x16cd44,this[_0x5ce7d8(0x15d)],this),(_0x4d7399=this[_0x5ce7d8(0x128)]['methods'])!==null&&_0x4d7399!==void 0x0&&_0x4d7399['mousemove']&&delete this['options']['methods']['mousemove'];}}return this;}}]),_0x4d90ce;}(BaseLayer);mars3d__namespace['LayerUtil']['register'](_0x30b49f(0x174),MapVLayer),mars3d__namespace['layer'][_0x30b49f(0x17f)]=MapVLayer,exports['MapVLayer']=MapVLayer,Object['keys'](mapv)['forEach'](function(_0x1032fa){var _0x4ad4a6=_0x30b49f;if(_0x1032fa!=='default'&&!exports[_0x4ad4a6(0x123)](_0x1032fa))Object['defineProperty'](exports,_0x1032fa,{'enumerable':!![],'get':function(){return mapv[_0x1032fa];}});}),Object[_0x30b49f(0x18a)](exports,'__esModule',{'value':!![]});
}));
