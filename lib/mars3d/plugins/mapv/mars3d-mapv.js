/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.7.5
 * 编译日期：2024-03-05 20:10:38
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';const _0x404ce6=_0x1f82;(function(_0x33fe8d,_0x2a2633){const _0x4675e2={_0xbf458:0x206,_0x1199eb:0x216,_0x82888a:0x1e6,_0x412ead:0x1ce,_0x319856:0x1df,_0x37539e:0x1f7,_0x2db7f1:0x1c3,_0x52995d:0x1d3,_0x303cd7:0x20e},_0x5a8827=_0x1f82,_0x25cf42=_0x33fe8d();while(!![]){try{const _0x4f9cab=-parseInt(_0x5a8827(0x203))/0x1+-parseInt(_0x5a8827(_0x4675e2._0xbf458))/0x2*(-parseInt(_0x5a8827(_0x4675e2._0x1199eb))/0x3)+parseInt(_0x5a8827(_0x4675e2._0x82888a))/0x4*(parseInt(_0x5a8827(_0x4675e2._0x412ead))/0x5)+parseInt(_0x5a8827(_0x4675e2._0x319856))/0x6*(parseInt(_0x5a8827(_0x4675e2._0x37539e))/0x7)+-parseInt(_0x5a8827(0x1e7))/0x8+-parseInt(_0x5a8827(_0x4675e2._0x2db7f1))/0x9*(parseInt(_0x5a8827(_0x4675e2._0x52995d))/0xa)+-parseInt(_0x5a8827(_0x4675e2._0x303cd7))/0xb*(-parseInt(_0x5a8827(0x1c1))/0xc);if(_0x4f9cab===_0x2a2633)break;else _0x25cf42['push'](_0x25cf42['shift']());}catch(_0x5a0a04){_0x25cf42['push'](_0x25cf42['shift']());}}}(_0xa9d1,0xe7b1d));function _interopNamespace(_0x923726){const _0x593ce1={_0xcd119:0x1c2},_0x462ce6=_0x1f82;if(_0x923726&&_0x923726['__esModule'])return _0x923726;var _0x5685d1=Object['create'](null);return _0x923726&&Object[_0x462ce6(0x1d9)](_0x923726)['forEach'](function(_0x8a7910){const _0x297a54=_0x462ce6;if(_0x8a7910!==_0x297a54(_0x593ce1._0xcd119)){var _0x4b7791=Object['getOwnPropertyDescriptor'](_0x923726,_0x8a7910);Object['defineProperty'](_0x5685d1,_0x8a7910,_0x4b7791['get']?_0x4b7791:{'enumerable':!![],'get':function(){return _0x923726[_0x8a7910];}});}}),_0x5685d1['default']=_0x923726,_0x5685d1;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'],baiduMapLayer=mapv__namespace?mapv__namespace['baiduMapLayer']:null,BaseLayer$1=baiduMapLayer?baiduMapLayer['__proto__']:Function;function _0x1f82(_0x1f52ea,_0x3566cc){const _0xa9d155=_0xa9d1();return _0x1f82=function(_0x1f8241,_0x18fc91){_0x1f8241=_0x1f8241-0x1b0;let _0x15ffd2=_0xa9d155[_0x1f8241];return _0x15ffd2;},_0x1f82(_0x1f52ea,_0x3566cc);}class MapVRenderer extends BaseLayer$1{constructor(_0x4d3065,_0x3c59a9,_0xe60a13,_0x2fdd9d){const _0x241a16={_0x19ef83:0x1e4,_0x53033f:0x209},_0x5a7d2a=_0x1f82;super(_0x4d3065,_0x3c59a9,_0xe60a13);if(!BaseLayer$1)return;this['map']=_0x4d3065,this['scene']=_0x4d3065['scene'],this[_0x5a7d2a(_0x241a16._0x19ef83)]=_0x3c59a9,_0xe60a13=_0xe60a13||{},this['init'](_0xe60a13),this['argCheck'](_0xe60a13),this['initDevicePixelRatio'](),this[_0x5a7d2a(_0x241a16._0x53033f)]=_0x2fdd9d,this[_0x5a7d2a(0x213)]=!0x1,this['animation']=_0xe60a13['animation'];}['initDevicePixelRatio'](){this['devicePixelRatio']=window['devicePixelRatio']||0x1;}['addAnimatorEvent'](){}[_0x404ce6(0x1ea)](){const _0x7e3d5={_0x24bc6f:0x1c8},_0x1f0647=_0x404ce6,_0x47de45=this[_0x1f0647(0x1bd)]['animation'];this['isEnabledTime']()&&this[_0x1f0647(_0x7e3d5._0x24bc6f)]&&(this['steps'][_0x1f0647(0x1b0)]=_0x47de45['stepsRange']['start']);}['animatorMoveendEvent'](){const _0x237dd={_0x251daf:0x208},_0x1e4210=_0x404ce6;this[_0x1e4210(_0x237dd._0x251daf)]()&&this['animator'];}[_0x404ce6(0x1db)](){const _0x481171=_0x404ce6;return this['canvasLayer']['canvas'][_0x481171(0x1db)](this['context']);}['init'](_0x5148db){const _0x161ba1={_0x47ad49:0x1bd,_0x25cc1a:0x1bf,_0x5dc8df:0x1d1,_0x310100:0x1d6},_0x4d4077=_0x404ce6;this[_0x4d4077(_0x161ba1._0x47ad49)]=_0x5148db,this['initDataRange'](_0x5148db),this['context']=this[_0x4d4077(_0x161ba1._0x47ad49)][_0x4d4077(_0x161ba1._0x25cc1a)]||'2d',Cesium$1['defined'](this['options'][_0x4d4077(_0x161ba1._0x5dc8df)])&&this['canvasLayer']&&this['canvasLayer']['setZIndex']&&this['canvasLayer']['setZIndex'](this['options']['zIndex']),this[_0x4d4077(_0x161ba1._0x310100)]();}[_0x404ce6(0x1fa)](_0x11cd92){const _0x1e15e1={_0x597ac5:0x209,_0x17be09:0x1bd,_0x806c:0x208,_0x479a91:0x201,_0x2a36dd:0x1f6,_0x20f662:0x20a,_0x3cf67d:0x202,_0x180f83:0x1b8,_0x246001:0x1e2,_0x2ee48e:0x215,_0x377d2a:0x215,_0x335ddf:0x1b6},_0x255969={_0x31d401:0x1ec},_0x254531=_0x404ce6,_0x457f26=this['scene'];if(this[_0x254531(_0x1e15e1._0x597ac5)]&&!this['stopAniamation']){const _0x331baf=this[_0x254531(_0x1e15e1._0x17be09)]['animation'],_0x5c830d=this['getContext']();if(this[_0x254531(_0x1e15e1._0x806c)]()){if(void 0x0===_0x11cd92)return void this[_0x254531(_0x1e15e1._0x479a91)](_0x5c830d);this['context']==='2d'&&(_0x5c830d[_0x254531(_0x1e15e1._0x2a36dd)](),_0x5c830d['globalCompositeOperation']=_0x254531(_0x1e15e1._0x20f662),_0x5c830d[_0x254531(_0x1e15e1._0x3cf67d)]=_0x254531(_0x1e15e1._0x180f83),_0x5c830d['fillRect'](0x0,0x0,_0x5c830d[_0x254531(_0x1e15e1._0x246001)]['width'],_0x5c830d['canvas']['height']),_0x5c830d['restore']());}else this['clear'](_0x5c830d);if(this['context']==='2d')for(const _0x2e31f2 in this['options']){_0x5c830d[_0x2e31f2]=this[_0x254531(0x1bd)][_0x2e31f2];}else _0x5c830d['clear'](_0x5c830d['COLOR_BUFFER_BIT']);const _0x327c17={'transferCoordinate':function(_0x4471c2){const _0x3d6439=_0x254531,_0x46690e=null;let _0x14ab74=_0x457f26['mapvFixedHeight'];_0x457f26['mapvAutoHeight']&&(_0x14ab74=_0x457f26['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x4471c2[0x0],_0x4471c2[0x1])));const _0x45f877=Cesium$1['Cartesian3']['fromDegrees'](_0x4471c2[0x0],_0x4471c2[0x1],_0x14ab74);if(!_0x45f877)return _0x46690e;const _0x1c2a0c=_0x457f26[_0x3d6439(0x1c5)](_0x45f877);if(!_0x1c2a0c)return _0x46690e;if(_0x457f26['mapvDepthTest']&&_0x457f26['mode']===Cesium$1['SceneMode'][_0x3d6439(_0x255969._0x31d401)]){const _0x58e8d3=new Cesium$1['EllipsoidalOccluder'](_0x457f26['globe']['ellipsoid'],_0x457f26[_0x3d6439(0x1b1)]['positionWC']),_0x28717a=_0x58e8d3['isPointVisible'](_0x45f877);if(!_0x28717a)return _0x46690e;}return[_0x1c2a0c['x'],_0x1c2a0c['y']];}};void 0x0!==_0x11cd92&&(_0x327c17['filter']=function(_0x525aae){const _0x422d11=_0x254531,_0x2681d7=_0x331baf[_0x422d11(0x1da)]||0xa;return!!(_0x11cd92&&_0x525aae['time']>_0x11cd92-_0x2681d7&&_0x525aae['time']<_0x11cd92);});const _0x11fcd8=this[_0x254531(0x1e4)]['get'](_0x327c17);this[_0x254531(0x1c7)](_0x11fcd8),this['options']['unit']==='m'&&this[_0x254531(0x1bd)][_0x254531(_0x1e15e1._0x2ee48e)],this['options']['_size']=this[_0x254531(0x1bd)][_0x254531(_0x1e15e1._0x377d2a)];const _0x511f35=_0x457f26['cartesianToCanvasCoordinates'](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x511f35)return;this[_0x254531(_0x1e15e1._0x335ddf)](_0x5c830d,new mapv__namespace['DataSet'](_0x11fcd8),this['options'],_0x511f35),this['options']['updateCallback']&&this['options']['updateCallback'](_0x11cd92);}}['updateData'](_0x16d62a,_0x3ad4aa){const _0x26f6cc={_0x577605:0x1b3},_0x320d64=_0x404ce6;let _0x38e72b=_0x16d62a;_0x38e72b&&_0x38e72b['get']&&(_0x38e72b=_0x38e72b['get']()),void 0x0!==_0x38e72b&&this['dataSet'][_0x320d64(_0x26f6cc._0x577605)](_0x38e72b),super['update']({'options':_0x3ad4aa});}['addData'](_0x227216,_0x3a0b7a){const _0x3beb84={_0x4771bc:0x1c6},_0x240fc1=_0x404ce6;let _0x8ecbed=_0x227216;_0x227216&&_0x227216[_0x240fc1(_0x3beb84._0x4771bc)]&&(_0x8ecbed=_0x227216[_0x240fc1(_0x3beb84._0x4771bc)]()),this['dataSet']['add'](_0x8ecbed),this['update']({'options':_0x3a0b7a});}['getData'](){return this['dataSet'];}[_0x404ce6(0x1d7)](_0x3ae24b){const _0x43b653={_0x35c143:0x1c6},_0x580b30=_0x404ce6;if(this[_0x580b30(0x1e4)]){const _0x28cc90=this['dataSet'][_0x580b30(_0x43b653._0x35c143)]({'filter':function(_0x25d3c8){return _0x3ae24b==null||typeof _0x3ae24b!=='function'||!_0x3ae24b(_0x25d3c8);}});this['dataSet']['set'](_0x28cc90),this['update']({'options':null});}}['clearData'](){const _0x40d1db={_0x597472:0x1e4,_0x52b1f3:0x20c},_0x3c5c16=_0x404ce6;this[_0x3c5c16(_0x40d1db._0x597472)]&&this['dataSet']['clear'](),this[_0x3c5c16(_0x40d1db._0x52b1f3)]({'options':null});}['draw'](){const _0x4c424a={_0x3d77dc:0x214},_0x4d03ab=_0x404ce6;this['canvasLayer'][_0x4d03ab(_0x4c424a._0x3d77dc)]();}['clear'](_0x4785fa){const _0x1946e7={_0x401a94:0x1f0},_0x2a3d5c=_0x404ce6;_0x4785fa&&_0x4785fa[_0x2a3d5c(0x200)]&&_0x4785fa[_0x2a3d5c(0x200)](0x0,0x0,_0x4785fa['canvas']['width'],_0x4785fa['canvas'][_0x2a3d5c(_0x1946e7._0x401a94)]);}[_0x404ce6(0x1bb)](){const _0x1760b5={_0xa7c02b:0x1bc},_0x4d02c3=_0x404ce6;this['clear'](this['getContext']()),this['clearData'](),this['animator']&&this[_0x4d02c3(0x1c8)][_0x4d02c3(_0x1760b5._0xa7c02b)](),this['animator']=null,this['canvasLayer']=null;}}if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace['DataSet'])mapv__namespace['DataSet']['prototype'][_0x404ce6(0x1f9)]=function(_0xb59d71,_0x127932,_0x216c91,_0x2c192d){const _0x1adb6c=_0x404ce6;_0x2c192d=_0x2c192d||'_coordinates',_0x216c91=_0x216c91||'coordinates';for(let _0x1c3616=0x0;_0x1c3616<_0xb59d71[_0x1adb6c(0x205)];_0x1c3616++){const _0x183f98=_0xb59d71[_0x1c3616]['geometry'],_0x4a4be2=_0x183f98[_0x216c91];switch(_0x183f98['type']){case'Point':{const _0x1c30a3=_0x127932(_0x4a4be2);_0x1c30a3?_0x183f98[_0x2c192d]=_0x1c30a3:_0x183f98[_0x2c192d]=[-0x3e7,-0x3e7];}break;case'LineString':{const _0x192197=[];for(let _0x300b16=0x0;_0x300b16<_0x4a4be2[_0x1adb6c(0x205)];_0x300b16++){const _0x3a3e73=_0x127932(_0x4a4be2[_0x300b16]);_0x3a3e73&&_0x192197['push'](_0x3a3e73);}_0x183f98[_0x2c192d]=_0x192197;}break;case'MultiLineString':case'Polygon':{const _0x32f102=_0x56c54d(_0x4a4be2);_0x183f98[_0x2c192d]=_0x32f102;}break;case'MultiPolygon':{const _0x91f951=[];for(let _0x18f2d5=0x0;_0x18f2d5<_0x4a4be2[_0x1adb6c(0x205)];_0x18f2d5++){const _0x5d1a6b=_0x56c54d(_0x4a4be2[_0x18f2d5]);_0x5d1a6b['length']>0x0&&_0x91f951['push'](_0x5d1a6b);}_0x183f98[_0x2c192d]=_0x91f951;}break;}}function _0x56c54d(_0x50a0a5){const _0x4a51af=[];for(let _0x33661b=0x0;_0x33661b<_0x50a0a5['length'];_0x33661b++){const _0x5fe358=_0x50a0a5[_0x33661b],_0x2d8863=[];for(let _0x195e0b=0x0;_0x195e0b<_0x5fe358['length'];_0x195e0b++){const _0x417d0d=_0x127932(_0x5fe358[_0x195e0b]);_0x417d0d&&_0x2d8863['push'](_0x417d0d);}_0x2d8863['length']>0x0&&_0x4a51af['push'](_0x2d8863);}return _0x4a51af;}return _0xb59d71;};else throw new Error('请引入\x20mapv\x20库\x20');function _0xa9d1(){const _0x3e3101=['none','clearRect','clear','fillStyle','623012EtSaCX','left','length','28OVpFtr','_addedHook','isEnabledTime','canvasLayer','destination-out','_setOptionsHook','update','_pointerEvents','844140XKibQM','addData','0px','bindEvent','top','stopAniamation','draw','size','133179pSmhOt','step','camera','postRender','set','xmax','click','drawContext','_mountedHook','rgba(0,\x200,\x200,\x20.1)','isFormat','_reset','destroy','stop','options','methods','context','mousemove','24dkZUSt','default','11150253ysyXcb','_map','cartesianToCanvasCoordinates','get','processData','animator','Util','getRectangle','removeAllData','EventType','_showHook','369430KHneyO','initDevicePixelRatio','mouseMove','zIndex','render','10RfOEdl','_onMapMouseMove','updateData','initAnimator','removeData','resize','keys','trails','getContext','pointerEvents','_createCanvas','bind','6IpOwLD','_dataCache','mapv','canvas','depthTest','dataSet','_onMoveStartEvent','48Espjad','5315128YCvyLM','layer','off','animatorMovestartEvent','width','SCENE3D','_cache_event','_onMapClick','display','height','forEach','mapvDepthTest','clickEvent','_removedHook','_data','save','12696089GKMJPR','style','transferCoordinate','_canvasUpdate','LayerUtil','BaseLayer','_mapVRenderer','scene'];_0xa9d1=function(){return _0x3e3101;};return _0xa9d1();}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x404ce6(0x1e8)][_0x404ce6(0x1fc)];class MapVLayer extends BaseLayer{constructor(_0x1124c6,_0x348e1f){const _0x4815e7={_0x2d6875:0x1dc},_0x3e59df=_0x404ce6;super(_0x1124c6),this['_pointerEvents']=this[_0x3e59df(0x1bd)][_0x3e59df(_0x4815e7._0x2d6875)],this['dataSet']=_0x348e1f||new mapv__namespace['DataSet'](_0x1124c6['data']),this['canvas']=null;}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x404ce6(0x1dc)](_0x45be9f){const _0x4e5b1e={_0x6214b8:0x1e2},_0x3db7bf=_0x404ce6;this['_pointerEvents']=_0x45be9f,this['canvas']&&(_0x45be9f?this['canvas']['style']['pointerEvents']='all':this[_0x3db7bf(_0x4e5b1e._0x6214b8)][_0x3db7bf(0x1f8)]['pointerEvents']='none');}[_0x404ce6(0x1cd)](_0x139b00){const _0x53ed6a={_0x43d614:0x1ff},_0x17c46a=_0x404ce6;_0x139b00?this['canvas']['style'][_0x17c46a(0x1ef)]='block':this['canvas']['style']['display']=_0x17c46a(_0x53ed6a._0x43d614);}[_0x404ce6(0x1b7)](){const _0x59bc58={_0x27c96b:0x1fe,_0x1c7ea7:0x1f2},_0x1f14d3=_0x404ce6;this['_map'][_0x1f14d3(_0x59bc58._0x27c96b)][_0x1f14d3(_0x59bc58._0x1c7ea7)]=this['options'][_0x1f14d3(0x1e3)]??!![],this['_map']['scene']['mapvAutoHeight']=this[_0x1f14d3(0x1bd)]['clampToGround']??![],this[_0x1f14d3(0x1c4)]['scene']['mapvFixedHeight']=this['options']['fixedHeight']??0x0;}[_0x404ce6(0x207)](){const _0x699af7={_0x5b352a:0x1e4,_0x57825d:0x1bd,_0x11b0f4:0x1e2,_0xf5d1f8:0x1d2,_0xf27968:0x1de},_0x176cac=_0x404ce6;this['dataSet']&&(!this['dataSet']['_data']||this[_0x176cac(0x1e4)][_0x176cac(0x1f5)]['length']===0x0)&&(this[_0x176cac(0x1e4)]['_data']=[]['concat'](this[_0x176cac(_0x699af7._0x5b352a)][_0x176cac(0x1e0)])),this['_mapVRenderer']=new MapVRenderer(this[_0x176cac(0x1c4)],this['dataSet'],this[_0x176cac(_0x699af7._0x57825d)],this),this['initDevicePixelRatio'](),this[_0x176cac(_0x699af7._0x11b0f4)]=this['_createCanvas'](),this['render']=this[_0x176cac(_0x699af7._0xf5d1f8)][_0x176cac(_0x699af7._0xf27968)](this),this['bindEvent'](),this['_reset']();}['_removedHook'](){const _0xb0d31e={_0x16093f:0x1bb},_0x2c0455=_0x404ce6;this['unbindEvent'](),this[_0x2c0455(0x1fd)]&&(this['_mapVRenderer'][_0x2c0455(_0xb0d31e._0x16093f)](),this['_mapVRenderer']=null),this['canvas']['parentElement']['removeChild'](this[_0x2c0455(0x1e2)]);}[_0x404ce6(0x1cf)](){this['devicePixelRatio']=window['devicePixelRatio']||0x1;}[_0x404ce6(0x211)](){const _0x11c31d={_0x1bc78e:0x1c4,_0x201fef:0x1cc},_0x2fe534=_0x404ce6;var _0x5411b4,_0x36bd75;this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x2fe534(0x1e5)],this),this['_map']['on'](mars3d__namespace[_0x2fe534(0x1cc)]['cameraMoveStart'],this['_onMoveStartEvent'],this),this[_0x2fe534(0x1c4)]['on'](mars3d__namespace['EventType']['cameraMoveEnd'],this['_onMoveEndEvent'],this),(_0x5411b4=this['options'])!==null&&_0x5411b4!==void 0x0&&(_0x5411b4=_0x5411b4['methods'])!==null&&_0x5411b4!==void 0x0&&_0x5411b4['click']&&this['_map']['on'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this),(_0x36bd75=this['options'])!==null&&_0x36bd75!==void 0x0&&(_0x36bd75=_0x36bd75[_0x2fe534(0x1be)])!==null&&_0x36bd75!==void 0x0&&_0x36bd75['mousemove']&&this[_0x2fe534(_0x11c31d._0x1bc78e)]['on'](mars3d__namespace[_0x2fe534(_0x11c31d._0x201fef)]['mouseMove'],this['_onMapMouseMove'],this);}['unbindEvent'](){const _0x12bef0={_0x17713c:0x1c4,_0x381b12:0x1e5,_0x2474c9:0x1e9,_0x25e2b9:0x1c4,_0x1eab46:0x1b5,_0x2dede4:0x1cc,_0x11ac9f:0x1d4},_0x54697b=_0x404ce6;var _0x5250d6,_0x2d917f;this['_map']['off'](mars3d__namespace['EventType']['mouseDown'],this['_onMoveStartEvent'],this),this[_0x54697b(_0x12bef0._0x17713c)]['off'](mars3d__namespace['EventType']['cameraMoveStart'],this[_0x54697b(_0x12bef0._0x381b12)],this),this['_map']['off'](mars3d__namespace['EventType']['cameraMoveEnd'],this['_onMoveEndEvent'],this),this[_0x54697b(0x1c4)][_0x54697b(_0x12bef0._0x2474c9)](mars3d__namespace['EventType'][_0x54697b(0x1b2)],this['_reset'],this),(_0x5250d6=this[_0x54697b(0x1bd)])!==null&&_0x5250d6!==void 0x0&&(_0x5250d6=_0x5250d6['methods'])!==null&&_0x5250d6!==void 0x0&&_0x5250d6['click']&&this[_0x54697b(_0x12bef0._0x25e2b9)]['off'](mars3d__namespace['EventType'][_0x54697b(_0x12bef0._0x1eab46)],this['_onMapClick'],this),(_0x2d917f=this['options'])!==null&&_0x2d917f!==void 0x0&&(_0x2d917f=_0x2d917f['methods'])!==null&&_0x2d917f!==void 0x0&&_0x2d917f['mousemove']&&this[_0x54697b(0x1c4)]['off'](mars3d__namespace[_0x54697b(_0x12bef0._0x2dede4)]['mouseMove'],this[_0x54697b(_0x12bef0._0x11ac9f)],this);}[_0x404ce6(0x1e5)](){const _0x1412b3={_0x50d1fb:0x1ea,_0x28cca6:0x1ba,_0x51c25f:0x1cc},_0x20c2ed=_0x404ce6;this['_mapVRenderer']&&(this['_mapVRenderer'][_0x20c2ed(_0x1412b3._0x50d1fb)](),this['_map']['off'](mars3d__namespace['EventType']['postRender'],this[_0x20c2ed(_0x1412b3._0x28cca6)],this),this['_map']['on'](mars3d__namespace[_0x20c2ed(_0x1412b3._0x51c25f)]['postRender'],this[_0x20c2ed(0x1ba)],this));}['_onMoveEndEvent'](){const _0xa7c5a2=_0x404ce6;this['_mapVRenderer']&&(this['_map']['off'](mars3d__namespace['EventType']['postRender'],this[_0xa7c5a2(0x1ba)],this),this['_mapVRenderer']['animatorMoveendEvent'](),this[_0xa7c5a2(0x1ba)]());}[_0x404ce6(0x20b)](_0x51450c,_0x10e635){const _0x176e9d=_0x404ce6;this[_0x176e9d(0x1f4)](),this['_addedHook']();}['addData'](_0x4dbc01){const _0x240044=_0x404ce6;this['_mapVRenderer']&&this['_mapVRenderer'][_0x240044(0x20f)](_0x4dbc01,this['options']);}[_0x404ce6(0x1d5)](_0x51e504){const _0x5a4874=_0x404ce6;this[_0x5a4874(0x1fd)]&&this['_mapVRenderer'][_0x5a4874(0x1d5)](_0x51e504,this[_0x5a4874(0x1bd)]);}['getData'](){const _0x3652c6=_0x404ce6;return this['_mapVRenderer']&&(this['dataSet']=this['_mapVRenderer']['getData']()),this[_0x3652c6(0x1e4)];}[_0x404ce6(0x1d7)](_0x55b1a3){const _0x857123=_0x404ce6;this['_mapVRenderer']&&this['_mapVRenderer'][_0x857123(0x1d7)](_0x55b1a3);}[_0x404ce6(0x1cb)](){const _0x20169c=_0x404ce6;this[_0x20169c(0x1fd)]&&this['_mapVRenderer']['clearData']();}[_0x404ce6(0x1dd)](){const _0x5e122a={_0x312f0d:0x212,_0x4293d2:0x1eb,_0x33da32:0x1c4,_0x340499:0x1f0,_0x437831:0x1f8,_0x3171dd:0x1bd},_0x413837=_0x404ce6,_0x2867eb=mars3d__namespace['DomUtil']['create']('canvas','mars3d-mapv',this['_map']['container']);_0x2867eb['id']=this['id'],_0x2867eb['style']['position']='absolute',_0x2867eb['style'][_0x413837(_0x5e122a._0x312f0d)]='0px',_0x2867eb['style']['left']='0px',_0x2867eb['width']=parseInt(this['_map']['canvas']['width']),_0x2867eb['height']=parseInt(this['_map']['canvas']['height']),_0x2867eb['style'][_0x413837(_0x5e122a._0x4293d2)]=this[_0x413837(0x1c4)][_0x413837(0x1e2)]['style']['width'],_0x2867eb['style'][_0x413837(0x1f0)]=this[_0x413837(_0x5e122a._0x33da32)]['canvas']['style'][_0x413837(_0x5e122a._0x340499)],_0x2867eb[_0x413837(_0x5e122a._0x437831)][_0x413837(0x1dc)]=this[_0x413837(0x20d)]?'auto':'none',_0x2867eb['style']['zIndex']=this['options'][_0x413837(0x1d1)]??0x9;if(this[_0x413837(0x1bd)][_0x413837(0x1bf)]==='2d'){const _0x51e58f=this['devicePixelRatio'];_0x2867eb['getContext'](this[_0x413837(_0x5e122a._0x3171dd)]['context'])['scale'](_0x51e58f,_0x51e58f);}return _0x2867eb;}['_reset'](){const _0x5ddf87={_0x28c373:0x1d8},_0x39cd5f=_0x404ce6;this[_0x39cd5f(_0x5ddf87._0x28c373)](),this['render']();}[_0x404ce6(0x214)](){this['_reset']();}['remove'](){const _0x458575={_0x401eeb:0x1bb},_0x1fc0bc=_0x404ce6;this['_mapVRenderer']&&(this['_mapVRenderer'][_0x1fc0bc(_0x458575._0x401eeb)](),this['_mapVRenderer']=null),this[_0x1fc0bc(0x1e2)]['parentElement']['removeChild'](this['canvas']);}[_0x404ce6(0x1d2)](){this['_mapVRenderer']['_canvasUpdate']();}['resize'](){const _0x15fdd0={_0x25ee36:0x1e2,_0x20f499:0x210},_0x4c4c36=_0x404ce6;if(this[_0x4c4c36(_0x15fdd0._0x25ee36)]){const _0x525ef9=this['canvas'];_0x525ef9['style']['position']='absolute',_0x525ef9['style']['top']='0px',_0x525ef9['style'][_0x4c4c36(0x204)]=_0x4c4c36(_0x15fdd0._0x20f499),_0x525ef9['width']=parseInt(this['_map'][_0x4c4c36(_0x15fdd0._0x25ee36)]['width']),_0x525ef9['height']=parseInt(this['_map']['canvas']['height']),_0x525ef9['style']['width']=this[_0x4c4c36(0x1c4)]['canvas']['style']['width'],_0x525ef9['style']['height']=this['_map']['canvas'][_0x4c4c36(0x1f8)]['height'];}}[_0x404ce6(0x1ca)](_0x1330b1){const _0x203983={_0x4e5d63:0x1c9,_0x5216aa:0x1e4,_0x5a20e9:0x1b9},_0x2bbb48=_0x404ce6;if(!this[_0x2bbb48(0x1e4)]||!this['dataSet']['_data'])return;const _0x46350f=mars3d__namespace[_0x2bbb48(_0x203983._0x4e5d63)]['getExtentByGeoJSON']({'type':'FeatureCollection','features':this[_0x2bbb48(_0x203983._0x5216aa)]['_data']});if(!_0x46350f)return;return _0x1330b1!==null&&_0x1330b1!==void 0x0&&_0x1330b1[_0x2bbb48(_0x203983._0x5a20e9)]?_0x46350f:Cesium['Rectangle']['fromDegrees'](_0x46350f['xmin'],_0x46350f['ymin'],_0x46350f[_0x2bbb48(0x1b4)],_0x46350f['ymax']);}['_onMapClick'](_0x395e15){const _0x308a8c={_0x1a8396:0x1f3},_0x27c4c6=_0x404ce6;this['_cache_event']=_0x395e15,this['_mapVRenderer']&&this['_mapVRenderer'][_0x27c4c6(_0x308a8c._0x1a8396)](_0x395e15['windowPosition'],_0x395e15);}['_onMapMouseMove'](_0x56a080){const _0x1e0819={_0x558965:0x1fd},_0x113a16=_0x404ce6;this['_cache_event']=_0x56a080,this[_0x113a16(0x1fd)]&&this[_0x113a16(_0x1e0819._0x558965)]['mousemoveEvent'](_0x56a080['windowPosition'],_0x56a080);}['on'](_0xece912,_0x6de539,_0x30a0df){const _0x4ce00b={_0x3059bf:0x1b5,_0x4ed7f7:0x1d0},_0x2a4d02=_0x404ce6;this['options']['methods']=this['options']['methods']||{};if(_0xece912===mars3d__namespace['EventType'][_0x2a4d02(_0x4ce00b._0x3059bf)])this['options'][_0x2a4d02(0x1be)]['click']=_0xf3133f=>{const _0x4f7d5f=_0x2a4d02;_0xf3133f&&_0x6de539[_0x4f7d5f(0x1de)](_0x30a0df)({...this['_cache_event'],'layer':this,'data':_0xf3133f});},this['_map']['on'](mars3d__namespace['EventType']['click'],this[_0x2a4d02(0x1ee)],this);else _0xece912===mars3d__namespace['EventType'][_0x2a4d02(_0x4ce00b._0x4ed7f7)]&&(this['options']['methods'][_0x2a4d02(0x1c0)]=_0x4772f7=>{const _0x1230d1=_0x2a4d02;_0x4772f7&&_0x6de539['bind'](_0x30a0df)({...this[_0x1230d1(0x1ed)],'layer':this,'data':_0x4772f7});},this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this));return this;}[_0x404ce6(0x1e9)](_0x394e76,_0x1c43ea){const _0x1c2060={_0x1a5b94:0x1d0,_0x248b46:0x1c0},_0x454c1c=_0x404ce6;if(_0x394e76==='click'){var _0x5de194;this['_map'][_0x454c1c(0x1e9)](_0x394e76,this['_onMapClick'],this),(_0x5de194=this['options'][_0x454c1c(0x1be)])!==null&&_0x5de194!==void 0x0&&_0x5de194['mousemove']&&delete this['options']['methods']['click'];}else{if(_0x394e76===_0x454c1c(_0x1c2060._0x1a5b94)){var _0x1fdd80;this['_map']['off'](_0x394e76,this[_0x454c1c(0x1d4)],this),(_0x1fdd80=this['options']['methods'])!==null&&_0x1fdd80!==void 0x0&&_0x1fdd80[_0x454c1c(_0x1c2060._0x248b46)]&&delete this['options']['methods']['mousemove'];}}return this;}}mars3d__namespace[_0x404ce6(0x1fb)]['register'](_0x404ce6(0x1e1),MapVLayer),mars3d__namespace['layer']['MapVLayer']=MapVLayer,mars3d__namespace[_0x404ce6(0x1e1)]=mapv__namespace,exports['MapVLayer']=MapVLayer,Object['keys'](mapv)[_0x404ce6(0x1f1)](function(_0x264c0a){if(_0x264c0a!=='default'&&!exports['hasOwnProperty'](_0x264c0a))Object['defineProperty'](exports,_0x264c0a,{'enumerable':!![],'get':function(){return mapv[_0x264c0a];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
