/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.17
 * 编译日期：2023-12-14 20:38:51
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x259df4=_0x137e;(function(_0x31fee3,_0x40f029){const _0x57de28={_0x3f636b:0x1aa,_0x4d7985:0x1cb,_0x1f8a60:0x1a8},_0x47755d=_0x137e,_0x47888a=_0x31fee3();while(!![]){try{const _0x479493=-parseInt(_0x47755d(0x1ac))/0x1+-parseInt(_0x47755d(0x1b4))/0x2+-parseInt(_0x47755d(_0x57de28._0x3f636b))/0x3*(parseInt(_0x47755d(_0x57de28._0x4d7985))/0x4)+-parseInt(_0x47755d(0x1a7))/0x5+-parseInt(_0x47755d(0x1a2))/0x6+parseInt(_0x47755d(0x1ba))/0x7+parseInt(_0x47755d(0x1c8))/0x8*(parseInt(_0x47755d(_0x57de28._0x1f8a60))/0x9);if(_0x479493===_0x40f029)break;else _0x47888a['push'](_0x47888a['shift']());}catch(_0x5b1fb8){_0x47888a['push'](_0x47888a['shift']());}}}(_0x99e0,0xa45f0));function _interopNamespace(_0x1d2793){const _0xfb2520={_0x285d05:0x19f},_0x15cf3f=_0x137e;if(_0x1d2793&&_0x1d2793[_0x15cf3f(0x1d4)])return _0x1d2793;var _0x164c26=Object[_0x15cf3f(_0xfb2520._0x285d05)](null);return _0x1d2793&&Object['keys'](_0x1d2793)['forEach'](function(_0x5b1359){if(_0x5b1359!=='default'){var _0xde2eea=Object['getOwnPropertyDescriptor'](_0x1d2793,_0x5b1359);Object['defineProperty'](_0x164c26,_0x5b1359,_0xde2eea['get']?_0xde2eea:{'enumerable':!![],'get':function(){return _0x1d2793[_0x5b1359];}});}}),_0x164c26['default']=_0x1d2793,_0x164c26;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x56af1f,_0x4c6b0c){const _0x535766={_0x1c7930:0x1d7,_0x58f61f:0x1ce},_0x50b0e1=_0x137e;this['_mars3d_scene']=_0x56af1f,this['dimensions']=['lng','lat'],this[_0x50b0e1(_0x535766._0x1c7930)]=[0x0,0x0],this[_0x50b0e1(_0x535766._0x58f61f)]=_0x4c6b0c;}['setMapOffset'](_0x353239){this['_mapOffset']=_0x353239;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0x29341b){const _0x298b73={_0x57845e:0x1c6,_0x276906:0x1b2},_0x379341=_0x137e,_0x26c2ff=this['_mars3d_scene'],_0x757afc=[NaN,NaN];let _0x3d2018=_0x26c2ff[_0x379341(0x1a6)];_0x26c2ff['echartsAutoHeight']&&(_0x3d2018=_0x26c2ff['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x29341b[0x0],_0x29341b[0x1])));const _0x485f98=Cesium$1['Cartesian3']['fromDegrees'](_0x29341b[0x0],_0x29341b[0x1],_0x3d2018);if(!_0x485f98)return _0x757afc;const _0x3e4052=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x26c2ff,_0x485f98);if(!_0x3e4052)return _0x757afc;if(_0x26c2ff['echartsDepthTest']&&_0x26c2ff['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x5c6a97=new Cesium$1[(_0x379341(0x1d5))](_0x26c2ff['globe']['ellipsoid'],_0x26c2ff[_0x379341(_0x298b73._0x57845e)]['positionWC']),_0x4cb68d=_0x5c6a97[_0x379341(_0x298b73._0x276906)](_0x485f98);if(!_0x4cb68d)return _0x757afc;}return[_0x3e4052['x']-this[_0x379341(0x1d7)][0x0],_0x3e4052['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0xf76567={_0x5e86c8:0x1d1,_0x19e27b:0x1d8},_0xc87d65=_0x137e,_0x4d38bb=this['_api'];return new echarts__namespace[(_0xc87d65(0x1a1))][(_0xc87d65(_0xf76567._0x5e86c8))](0x0,0x0,_0x4d38bb['getWidth'](),_0x4d38bb[_0xc87d65(_0xf76567._0x19e27b)]());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}function _0x137e(_0x4d5465,_0x471f81){const _0x99e051=_0x99e0();return _0x137e=function(_0x137e5c,_0x389c39){_0x137e5c=_0x137e5c-0x19c;let _0x1c4035=_0x99e051[_0x137e5c];return _0x1c4035;},_0x137e(_0x4d5465,_0x471f81);}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem[_0x259df4(0x19f)]=function(_0x3915da,_0x4178d9){const _0x4ca022={_0x3ede23:0x1cf},_0x16eb45=_0x259df4;let _0x1bffb4;const _0x36f46c=_0x3915da['scheduler'][_0x16eb45(0x1a5)][_0x16eb45(0x1bf)];_0x3915da['eachComponent']('mars3dMap',function(_0x28c8da){const _0x4b6206=_0x16eb45,_0x32cd58=_0x4178d9[_0x4b6206(_0x4ca022._0x3ede23)]()['painter'];if(!_0x32cd58)return;!_0x1bffb4&&(_0x1bffb4=new CompositeCoordinateSystem(_0x36f46c,_0x4178d9)),_0x28c8da['coordinateSystem']=_0x1bffb4,_0x1bffb4['setMapOffset'](_0x28c8da[_0x4b6206(0x19d)]||[0x0,0x0]);}),_0x3915da['eachSeries'](function(_0x1008fb){const _0x15c9da=_0x16eb45;_0x1008fb['get'](_0x15c9da(0x1b9))==='mars3dMap'&&(!_0x1bffb4&&(_0x1bffb4=new CompositeCoordinateSystem(_0x36f46c,_0x4178d9)),_0x1008fb['coordinateSystem']=_0x1bffb4);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace[_0x259df4(0x1c1)](_0x259df4(0x1c0),CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':_0x259df4(0x1b6)},function(_0x2c74d5,_0x458bbb){}),echarts__namespace[_0x259df4(0x1c2)]({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':_0x259df4(0x1c0),'init':function(_0x404e94,_0x3903){this['api']=_0x3903,this['scene']=_0x404e94['scheduler']['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0xd1dec9,_0x1d362a){const _0x1ca2d4={_0x478aa9:0x1b8},_0x2c481f=_0x259df4;this['api'][_0x2c481f(_0x1ca2d4._0x478aa9)]({'type':'mars3dMapRoam'});},'render':function(_0x2c97d2,_0x154c08,_0xa8e0fa){},'dispose':function(_0x5de1f8){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace[_0x259df4(0x1d2)],BaseLayer=mars3d__namespace[_0x259df4(0x1c9)]['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x3dac25={}){const _0x211002=_0x259df4;super(_0x3dac25),this[_0x211002(0x1c7)]=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x1e7826){const _0x382e87={_0x1445d9:0x1be},_0x4528a3=_0x259df4;this['_pointerEvents']=_0x1e7826,this['_echartsContainer']&&(_0x1e7826?this[_0x4528a3(_0x382e87._0x1445d9)]['style']['pointerEvents']='all':this['_echartsContainer']['style']['pointerEvents']='none');}['_setOptionsHook'](_0x153f8c,_0x57ab3e){this['setEchartsOption'](_0x153f8c);}[_0x259df4(0x1ab)](_0x48c0d8){const _0x58786c=_0x259df4;_0x48c0d8?this['_echartsContainer'][_0x58786c(0x1b5)]['visibility']='visible':this[_0x58786c(0x1be)]['style']['visibility']=_0x58786c(0x19e);}['_mountedHook'](){const _0x717bd4={_0x2fee4f:0x1a4},_0x144d9e=_0x259df4;this['_map']['scene'][_0x144d9e(0x1c3)]=this['options']['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this[_0x144d9e(0x1cd)]['scene'][_0x144d9e(0x1a6)]=this[_0x144d9e(_0x717bd4._0x2fee4f)]['fixedHeight']??0x0;}['_addedHook'](){const _0x4bc7de={_0x37bcbb:0x1be,_0x1823d6:0x19c,_0x14f001:0x1a9,_0xd45c0c:0x1a0},_0x4aa5c=_0x259df4;this[_0x4aa5c(_0x4bc7de._0x37bcbb)]=this[_0x4aa5c(_0x4bc7de._0x1823d6)](),this[_0x4aa5c(0x1bd)]=echarts__namespace[_0x4aa5c(0x1a3)](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this['_map'][_0x4aa5c(_0x4bc7de._0x14f001)],this[_0x4aa5c(_0x4bc7de._0xd45c0c)](this['options']);}['_removedHook'](){const _0x35efc8={_0x4b5f73:0x1bd},_0x2769bd=_0x259df4;this[_0x2769bd(0x1bd)]&&(this[_0x2769bd(_0x35efc8._0x4b5f73)]['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this[_0x2769bd(0x1be)]&&(this['_map']['container']['removeChild'](this[_0x2769bd(0x1be)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x22b059={_0x37e054:0x1b5,_0x512ac7:0x1c4},_0x21402f=_0x259df4,_0x501fde=mars3d__namespace['DomUtil']['create']('div','mars3d-echarts',this['_map']['container']);return _0x501fde['id']=this['id'],_0x501fde[_0x21402f(_0x22b059._0x37e054)]['position']=_0x21402f(0x1bb),_0x501fde['style']['top']='0px',_0x501fde['style']['left']=_0x21402f(0x1b3),_0x501fde['style']['width']=this[_0x21402f(0x1cd)][_0x21402f(0x1a9)]['canvas']['clientWidth']+'px',_0x501fde[_0x21402f(0x1b5)]['height']=this['_map']['scene'][_0x21402f(0x1c5)]['clientHeight']+'px',_0x501fde['style'][_0x21402f(0x1d9)]=this['_pointerEvents']?'all':_0x21402f(_0x22b059._0x512ac7),_0x501fde[_0x21402f(0x1b5)]['zIndex']=this['options']['zIndex']??0x9,_0x501fde;}['resize'](){const _0x4b3669={_0x82ba58:0x1bd,_0x3edf05:0x1b5,_0xeed15:0x1cd,_0x242a32:0x1ca},_0x13d3af=_0x259df4;if(!this[_0x13d3af(_0x4b3669._0x82ba58)])return;this['_echartsContainer'][_0x13d3af(_0x4b3669._0x3edf05)]['width']=this[_0x13d3af(_0x4b3669._0xeed15)]['scene']['canvas']['clientWidth']+'px',this['_echartsContainer']['style']['height']=this['_map']['scene']['canvas'][_0x13d3af(0x1ae)]+'px',this[_0x13d3af(0x1bd)][_0x13d3af(_0x4b3669._0x242a32)]();}[_0x259df4(0x1a0)](_0x246e4f,_0x538665,_0x66d25a){const _0x4deca2={_0x4793dc:0x1bc,_0x4a8b32:0x1d0},_0x100b1c=_0x259df4;this['_echartsInstance']&&(_0x246e4f={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x246e4f,{'onlySimpleType':!![]})},delete _0x246e4f[_0x100b1c(_0x4deca2._0x4793dc)],this['_echartsInstance'][_0x100b1c(_0x4deca2._0x4a8b32)](_0x246e4f,_0x538665,_0x66d25a));}['getRectangle'](_0x3e7b8e){const _0x3c3dfc={_0x177941:0x1cc},_0x18fb98={_0x59c6f3:0x1b0},_0x152492=_0x259df4;let _0x304b8b,_0x44ea8d,_0x2ad8d6,_0x2d97bf;function _0x4297d2(_0x587e3f){const _0x1fdd04=_0x137e;if(!Array[_0x1fdd04(_0x18fb98._0x59c6f3)](_0x587e3f))return;const _0x305668=_0x587e3f[0x0]||0x0,_0x199311=_0x587e3f[0x1]||0x0;_0x305668!==0x0&&_0x199311!==0x0&&(_0x304b8b===undefined?(_0x304b8b=_0x305668,_0x44ea8d=_0x305668,_0x2ad8d6=_0x199311,_0x2d97bf=_0x199311):(_0x304b8b=Math['min'](_0x304b8b,_0x305668),_0x44ea8d=Math[_0x1fdd04(0x1d6)](_0x44ea8d,_0x305668),_0x2ad8d6=Math['min'](_0x2ad8d6,_0x199311),_0x2d97bf=Math['max'](_0x2d97bf,_0x199311)));}const _0x430fb5=this[_0x152492(0x1a4)]['series'];_0x430fb5&&_0x430fb5[_0x152492(_0x3c3dfc._0x177941)](_0x4faa2a=>{const _0x46a20e=_0x152492;_0x4faa2a['data']&&_0x4faa2a['data'][_0x46a20e(0x1cc)](_0x1b7949=>{const _0x14d821=_0x46a20e;if(_0x1b7949['value'])_0x4297d2(_0x1b7949['value']);else _0x1b7949['coords']&&_0x1b7949['coords'][_0x14d821(0x1cc)](_0x431dec=>{_0x4297d2(_0x431dec);});});});if(_0x304b8b===0x0&&_0x2ad8d6===0x0&&_0x44ea8d===0x0&&_0x2d97bf===0x0)return null;return _0x3e7b8e!==null&&_0x3e7b8e!==void 0x0&&_0x3e7b8e['isFormat']?{'xmin':_0x304b8b,'xmax':_0x44ea8d,'ymin':_0x2ad8d6,'ymax':_0x2d97bf}:Cesium['Rectangle']['fromDegrees'](_0x304b8b,_0x2ad8d6,_0x44ea8d,_0x2d97bf);}['on'](_0x154f3d,_0x2ec593,_0x2a288a){return this['_echartsInstance']['on'](_0x154f3d,_0x2ec593,_0x2a288a||this),this;}[_0x259df4(0x1d3)](_0x207903,_0x15a42f,_0x1318e1,_0x4125c8){return this['_echartsInstance']['on'](_0x207903,_0x15a42f,_0x1318e1,_0x4125c8||this),this;}[_0x259df4(0x1ad)](_0x3929aa,_0x50ee9b,_0x34405a){return this['_echartsInstance']['off'](_0x3929aa,_0x50ee9b,_0x34405a||this),this;}}mars3d__namespace[_0x259df4(0x1b1)][_0x259df4(0x1af)](_0x259df4(0x1b7),EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x2029e8){if(_0x2029e8!=='default'&&!exports['hasOwnProperty'](_0x2029e8))Object['defineProperty'](exports,_0x2029e8,{'enumerable':!![],'get':function(){return echarts[_0x2029e8];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});function _0x99e0(){const _0x5cc452=['scene','6PTWKej','_showHook','732649vwnmjw','off','clientHeight','register','isArray','LayerUtil','isPointVisible','0px','532828ZCHhrv','style','updateLayout','echarts','dispatchAction','coordinateSystem','1348424tWHjUo','absolute','eventParent','_echartsInstance','_echartsContainer','_mars3d_scene','mars3dMap','registerCoordinateSystem','extendComponentModel','echartsDepthTest','none','canvas','camera','_pointerEvents','193912UXinNS','layer','resize','1281212uCfmsx','forEach','_map','_api','getZr','setOption','BoundingRect','Cesium','onByQuery','__esModule','EllipsoidalOccluder','max','_mapOffset','getHeight','pointerEvents','_createChartOverlay','__mapOffset','hidden','create','setEchartsOption','graphic','7780338FCblRg','init','options','ecInstance','echartsFixedHeight','2427275dzNvZu','1449gZqFcA'];_0x99e0=function(){return _0x5cc452;};return _0x99e0();}
}));
