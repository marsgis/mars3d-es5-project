/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.4
 * 编译日期：2023-08-30 23:18:18
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x1ee2cf=_0x5a18;(function(_0xef7f04,_0x41059c){const _0x319339={_0x4845af:0xae,_0x60ca74:0x8c,_0x127641:0xa5,_0x27bf9b:0xaa},_0x31c0f5=_0x5a18,_0x2c0002=_0xef7f04();while(!![]){try{const _0x3ce404=parseInt(_0x31c0f5(0x7d))/0x1*(parseInt(_0x31c0f5(0x8e))/0x2)+parseInt(_0x31c0f5(_0x319339._0x4845af))/0x3*(parseInt(_0x31c0f5(_0x319339._0x60ca74))/0x4)+-parseInt(_0x31c0f5(_0x319339._0x127641))/0x5*(parseInt(_0x31c0f5(0x7f))/0x6)+-parseInt(_0x31c0f5(0x84))/0x7+-parseInt(_0x31c0f5(_0x319339._0x27bf9b))/0x8*(-parseInt(_0x31c0f5(0xb8))/0x9)+-parseInt(_0x31c0f5(0xad))/0xa*(parseInt(_0x31c0f5(0xb2))/0xb)+parseInt(_0x31c0f5(0x78))/0xc;if(_0x3ce404===_0x41059c)break;else _0x2c0002['push'](_0x2c0002['shift']());}catch(_0x33d2f9){_0x2c0002['push'](_0x2c0002['shift']());}}}(_0x6f74,0xce824));function _interopNamespace(_0x5e2d1c){if(_0x5e2d1c&&_0x5e2d1c['__esModule'])return _0x5e2d1c;var _0x549b2f=Object['create'](null);return _0x5e2d1c&&Object['keys'](_0x5e2d1c)['forEach'](function(_0x241db5){if(_0x241db5!=='default'){var _0x213022=Object['getOwnPropertyDescriptor'](_0x5e2d1c,_0x241db5);Object['defineProperty'](_0x549b2f,_0x241db5,_0x213022['get']?_0x213022:{'enumerable':!![],'get':function(){return _0x5e2d1c[_0x241db5];}});}}),_0x549b2f['default']=_0x5e2d1c,_0x549b2f;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x1ee2cf(0x89)];function _0x5a18(_0x386476,_0x3e9d9d){const _0x6f7418=_0x6f74();return _0x5a18=function(_0x5a18d8,_0x52a181){_0x5a18d8=_0x5a18d8-0x6f;let _0x227d82=_0x6f7418[_0x5a18d8];return _0x227d82;},_0x5a18(_0x386476,_0x3e9d9d);}class CompositeCoordinateSystem{constructor(_0xf9d9eb,_0xac6011){const _0x42a39f=_0x1ee2cf;this['_mars3d_scene']=_0xf9d9eb,this['dimensions']=['lng',_0x42a39f(0x81)],this[_0x42a39f(0x71)]=[0x0,0x0],this[_0x42a39f(0xac)]=_0xac6011;}['setMapOffset'](_0x32021f){this['_mapOffset']=_0x32021f;}[_0x1ee2cf(0x7c)](){return this['_mars3d_scene'];}['dataToPoint'](_0x4680fb){const _0x596ae6={_0x3388f4:0x86,_0x7d99c3:0x8a},_0x47503c=_0x1ee2cf,_0x336413=this['_mars3d_scene'],_0x369b97=[NaN,NaN];let _0x87e317=_0x336413['echartsFixedHeight'];_0x336413[_0x47503c(0xb6)]&&(_0x87e317=_0x336413[_0x47503c(0x87)]['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x4680fb[0x0],_0x4680fb[0x1])));const _0x1c780f=Cesium$1['Cartesian3']['fromDegrees'](_0x4680fb[0x0],_0x4680fb[0x1],_0x87e317);if(!_0x1c780f)return _0x369b97;const _0x2b6229=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x336413,_0x1c780f);if(!_0x2b6229)return _0x369b97;if(_0x336413['echartsDepthTest']&&_0x336413[_0x47503c(_0x596ae6._0x3388f4)]===Cesium$1['SceneMode']['SCENE3D']){const _0x5aa104=new Cesium$1[(_0x47503c(_0x596ae6._0x7d99c3))](_0x336413['globe']['ellipsoid'],_0x336413['camera']['positionWC']),_0x1f68b1=_0x5aa104['isPointVisible'](_0x1c780f);if(!_0x1f68b1)return _0x369b97;}return[_0x2b6229['x']-this['_mapOffset'][0x0],_0x2b6229['y']-this[_0x47503c(0x71)][0x1]];}['getViewRect'](){const _0x4868a0={_0x35bfaf:0x8b},_0x14a182=_0x1ee2cf,_0x500f64=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x500f64['getWidth'](),_0x500f64[_0x14a182(_0x4868a0._0x35bfaf)]());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem[_0x1ee2cf(0x8d)]=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x4c7b18,_0x137f32){const _0x46af3f={_0x2e1911:0x75},_0x17e284=_0x1ee2cf;let _0x4211d2;const _0x40b74b=_0x4c7b18[_0x17e284(0x97)]['ecInstance']['_mars3d_scene'];_0x4c7b18[_0x17e284(0xb4)]('mars3dMap',function(_0x5220b0){const _0x35943c=_0x17e284,_0x147ec0=_0x137f32['getZr']()['painter'];if(!_0x147ec0)return;!_0x4211d2&&(_0x4211d2=new CompositeCoordinateSystem(_0x40b74b,_0x137f32)),_0x5220b0['coordinateSystem']=_0x4211d2,_0x4211d2['setMapOffset'](_0x5220b0[_0x35943c(_0x46af3f._0x2e1911)]||[0x0,0x0]);}),_0x4c7b18['eachSeries'](function(_0x2ed132){const _0x17dc76=_0x17e284;_0x2ed132['get'](_0x17dc76(0xa7))==='mars3dMap'&&(!_0x4211d2&&(_0x4211d2=new CompositeCoordinateSystem(_0x40b74b,_0x137f32)),_0x2ed132['coordinateSystem']=_0x4211d2);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem'](_0x1ee2cf(0xa4),CompositeCoordinateSystem),echarts__namespace[_0x1ee2cf(0x83)]({'type':_0x1ee2cf(0x74),'event':'mars3dMapRoam','update':'updateLayout'},function(_0x27fa6b,_0x10ab38){}),echarts__namespace[_0x1ee2cf(0x90)]({'type':_0x1ee2cf(0xa4),'getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':_0x1ee2cf(0xa4),'init':function(_0x565fef,_0x1b2385){const _0x52468d=_0x1ee2cf;this['api']=_0x1b2385,this['scene']=_0x565fef['scheduler'][_0x52468d(0x9b)]['_mars3d_scene'],this['scene']['postRender'][_0x52468d(0x8f)](this['moveHandler'],this);},'moveHandler':function(_0x52489c,_0x4251d4){const _0x3f8c4b={_0xf29e18:0x74},_0x2e9d04=_0x1ee2cf;this['api']['dispatchAction']({'type':_0x2e9d04(_0x3f8c4b._0xf29e18)});},'render':function(_0xc9e961,_0x5df3a1,_0x246cdd){},'dispose':function(_0x20ec1b){const _0x1eae80={_0x98ed5d:0x88},_0x2fd4ac=_0x1ee2cf;this[_0x2fd4ac(_0x1eae80._0x98ed5d)]['postRender']['removeEventListener'](this[_0x2fd4ac(0x96)],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x1ee2cf(0xa1)];class EchartsLayer extends BaseLayer{constructor(_0x3ab88f={}){const _0x372a75={_0xc5838a:0xab},_0x27d4a4=_0x1ee2cf;super(_0x3ab88f),this['_pointerEvents']=this['options'][_0x27d4a4(_0x372a75._0xc5838a)];}get['layer'](){const _0x5023ef={_0x6ab9ae:0xaf},_0x4a6c47=_0x1ee2cf;return this[_0x4a6c47(_0x5023ef._0x6ab9ae)];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x43edeb){const _0x570aba={_0x5ee6d8:0x9d,_0x673aa5:0x98},_0x56b66a=_0x1ee2cf;this[_0x56b66a(_0x570aba._0x5ee6d8)]=_0x43edeb,this['_echartsContainer']&&(_0x43edeb?this[_0x56b66a(_0x570aba._0x673aa5)]['style']['pointerEvents']='all':this['_echartsContainer']['style']['pointerEvents']='none');}['_setOptionsHook'](_0x2e1c99,_0x530da4){this['setEchartsOption'](_0x2e1c99);}['_showHook'](_0x4c9b3b){const _0x2d5693={_0x25f140:0x95},_0x38aaf1=_0x1ee2cf;_0x4c9b3b?this['_echartsContainer']['style'][_0x38aaf1(_0x2d5693._0x25f140)]='visible':this['_echartsContainer'][_0x38aaf1(0xa2)]['visibility']='hidden';}[_0x1ee2cf(0x7a)](){const _0x59dab3=_0x1ee2cf;this['_map']['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this[_0x59dab3(0x70)]['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map']['scene'][_0x59dab3(0x6f)]=this['options'][_0x59dab3(0x9a)]??0x0;}['_addedHook'](){const _0x1e85ea={_0xb37204:0x9c,_0x52e05b:0xa9},_0x480be5=_0x1ee2cf;this[_0x480be5(0x98)]=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance'][_0x480be5(_0x1e85ea._0xb37204)]=this['_map'][_0x480be5(0x88)],this[_0x480be5(_0x1e85ea._0x52e05b)](this['options']);}['_removedHook'](){const _0x3cf7fb={_0x158dc2:0x73},_0x5ce189=_0x1ee2cf;this[_0x5ce189(0xaf)]&&(this['_echartsInstance']['clear'](),this['_echartsInstance'][_0x5ce189(_0x3cf7fb._0x158dc2)](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map']['container']['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}[_0x1ee2cf(0x85)](){const _0x3eebb4={_0x3da8ef:0xb0,_0x4a32c1:0x7e,_0xdcfd6f:0xa2,_0x518d47:0xa3,_0x292c1c:0xb3,_0x550389:0xa6},_0x137a70=_0x1ee2cf,_0xdb9382=mars3d__namespace[_0x137a70(_0x3eebb4._0x3da8ef)][_0x137a70(_0x3eebb4._0x4a32c1)]('div','mars3d-echarts',this['_map']['container']);return _0xdb9382['id']=this['id'],_0xdb9382['style']['position']='absolute',_0xdb9382[_0x137a70(_0x3eebb4._0xdcfd6f)]['top']=_0x137a70(_0x3eebb4._0x518d47),_0xdb9382['style'][_0x137a70(0x80)]='0px',_0xdb9382['style'][_0x137a70(_0x3eebb4._0x292c1c)]=this[_0x137a70(0x70)][_0x137a70(0x88)][_0x137a70(0x92)][_0x137a70(0x79)]+'px',_0xdb9382[_0x137a70(0xa2)]['height']=this['_map'][_0x137a70(0x88)]['canvas'][_0x137a70(0xb7)]+'px',_0xdb9382['style']['pointerEvents']=this['_pointerEvents']?_0x137a70(_0x3eebb4._0x550389):'none',_0xdb9382['style']['zIndex']=this['options']['zIndex']??0x9,_0xdb9382;}['resize'](){const _0x53bdfb={_0x4e1cd6:0x98,_0x9acd92:0x88,_0x4c3e0d:0xa2,_0x19749a:0xaf},_0x38374a=_0x1ee2cf;if(!this['_echartsInstance'])return;this[_0x38374a(_0x53bdfb._0x4e1cd6)]['style'][_0x38374a(0xb3)]=this['_map'][_0x38374a(_0x53bdfb._0x9acd92)]['canvas']['clientWidth']+'px',this['_echartsContainer'][_0x38374a(_0x53bdfb._0x4c3e0d)]['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this[_0x38374a(_0x53bdfb._0x19749a)]['resize']();}['setEchartsOption'](_0x24cb33,_0x30b6ef,_0x255978){const _0x120a0f={_0x568834:0xaf,_0x2f3a65:0x72},_0x531ef8=_0x1ee2cf;this['_echartsInstance']&&(_0x24cb33['mars3dMap']=_0x24cb33['mars3dMap']||{},this[_0x531ef8(_0x120a0f._0x568834)][_0x531ef8(_0x120a0f._0x2f3a65)](_0x24cb33,_0x30b6ef,_0x255978));}['getRectangle'](_0x2123bd){const _0x1498ce={_0x349a31:0xb5},_0x16e0fa={_0x3cfa69:0x76,_0x368fa8:0x7b},_0x20dad3=_0x1ee2cf;let _0x3110bb,_0x22571a,_0x39b3df,_0x68eee7;function _0x4fb0e5(_0x2b7f8c){const _0x298344=_0x5a18;if(!Array[_0x298344(_0x16e0fa._0x3cfa69)](_0x2b7f8c))return;const _0x5c135f=_0x2b7f8c[0x0]||0x0,_0x1f8d6f=_0x2b7f8c[0x1]||0x0;_0x5c135f!==0x0&&_0x1f8d6f!==0x0&&(_0x3110bb===undefined?(_0x3110bb=_0x5c135f,_0x22571a=_0x5c135f,_0x39b3df=_0x1f8d6f,_0x68eee7=_0x1f8d6f):(_0x3110bb=Math['min'](_0x3110bb,_0x5c135f),_0x22571a=Math[_0x298344(_0x16e0fa._0x368fa8)](_0x22571a,_0x5c135f),_0x39b3df=Math['min'](_0x39b3df,_0x1f8d6f),_0x68eee7=Math[_0x298344(_0x16e0fa._0x368fa8)](_0x68eee7,_0x1f8d6f)));}const _0x3c83ac=this['options']['series'];_0x3c83ac&&_0x3c83ac['forEach'](_0x56e09a=>{const _0x10d7dc=_0x5a18;_0x56e09a['data']&&_0x56e09a['data'][_0x10d7dc(_0x1498ce._0x349a31)](_0x1bd5bb=>{const _0x5a3c73=_0x10d7dc;if(_0x1bd5bb['value'])_0x4fb0e5(_0x1bd5bb[_0x5a3c73(0x9e)]);else _0x1bd5bb[_0x5a3c73(0x99)]&&_0x1bd5bb['coords']['forEach'](_0x4fccd4=>{_0x4fb0e5(_0x4fccd4);});});});if(_0x3110bb===0x0&&_0x39b3df===0x0&&_0x22571a===0x0&&_0x68eee7===0x0)return null;return _0x2123bd!==null&&_0x2123bd!==void 0x0&&_0x2123bd[_0x20dad3(0x77)]?{'xmin':_0x3110bb,'xmax':_0x22571a,'ymin':_0x39b3df,'ymax':_0x68eee7}:Cesium[_0x20dad3(0x93)][_0x20dad3(0x94)](_0x3110bb,_0x39b3df,_0x22571a,_0x68eee7);}['on'](_0x4770e5,_0xe3c82e,_0x9b170b){return this['_echartsInstance']['on'](_0x4770e5,_0xe3c82e,_0x9b170b||this),this;}[_0x1ee2cf(0x91)](_0x2255cb,_0x21402f,_0x3bf2dd,_0x32875e){const _0xae3c47=_0x1ee2cf;return this[_0xae3c47(0xaf)]['on'](_0x2255cb,_0x21402f,_0x3bf2dd,_0x32875e||this),this;}[_0x1ee2cf(0xa0)](_0x4989d5,_0x18dd8b,_0xb0ae6e){return this['_echartsInstance']['off'](_0x4989d5,_0x18dd8b,_0xb0ae6e||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace[_0x1ee2cf(0xb1)]['EchartsLayer']=EchartsLayer,mars3d__namespace[_0x1ee2cf(0xa8)]=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)[_0x1ee2cf(0xb5)](function(_0xe50beb){const _0x111325=_0x1ee2cf;if(_0xe50beb!==_0x111325(0x9f)&&!exports['hasOwnProperty'](_0xe50beb))Object['defineProperty'](exports,_0xe50beb,{'enumerable':!![],'get':function(){return echarts[_0xe50beb];}});}),Object['defineProperty'](exports,_0x1ee2cf(0x82),{'value':!![]});function _0x6f74(){const _0x5e33e7=['onByQuery','canvas','Rectangle','fromDegrees','visibility','moveHandler','scheduler','_echartsContainer','coords','fixedHeight','ecInstance','_mars3d_scene','_pointerEvents','value','default','off','BaseLayer','style','0px','mars3dMap','990OnLTXZ','all','coordinateSystem','echarts','setEchartsOption','14400pdPROQ','pointerEvents','_api','110qtqBIC','6768GKufDx','_echartsInstance','DomUtil','layer','628969FkNyaL','width','eachComponent','forEach','echartsAutoHeight','clientHeight','8199qComqQ','echartsFixedHeight','_map','_mapOffset','setOption','dispose','mars3dMapRoam','__mapOffset','isArray','isFormat','6901272PcNwVq','clientWidth','_mountedHook','max','getBMap','1161739PAaGxB','create','42792wJRuWB','left','lat','__esModule','registerAction','11702768VjVSTM','_createChartOverlay','mode','globe','scene','Cesium','EllipsoidalOccluder','getHeight','2096wlYdNB','dimensions','2gUzRCg','addEventListener','extendComponentModel'];_0x6f74=function(){return _0x5e33e7;};return _0x6f74();}
}));
