/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.0
 * 编译日期：2023-08-04 12:48:00
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x35e8c5=_0xdb76;(function(_0x2af377,_0xc046df){const _0x45ba02={_0x326b0c:0x128,_0x21ca69:0x120,_0xc82757:0x14c,_0x479437:0x132,_0x397fc5:0x146,_0x345fe3:0x11d},_0x38eb8e=_0xdb76,_0x274c5f=_0x2af377();while(!![]){try{const _0x47b59d=parseInt(_0x38eb8e(0x158))/0x1+parseInt(_0x38eb8e(_0x45ba02._0x326b0c))/0x2*(-parseInt(_0x38eb8e(0x13e))/0x3)+parseInt(_0x38eb8e(0x15f))/0x4+parseInt(_0x38eb8e(_0x45ba02._0x21ca69))/0x5*(-parseInt(_0x38eb8e(_0x45ba02._0xc82757))/0x6)+parseInt(_0x38eb8e(_0x45ba02._0x479437))/0x7*(parseInt(_0x38eb8e(0x11a))/0x8)+parseInt(_0x38eb8e(_0x45ba02._0x397fc5))/0x9*(parseInt(_0x38eb8e(_0x45ba02._0x345fe3))/0xa)+-parseInt(_0x38eb8e(0x134))/0xb;if(_0x47b59d===_0xc046df)break;else _0x274c5f['push'](_0x274c5f['shift']());}catch(_0xe2c007){_0x274c5f['push'](_0x274c5f['shift']());}}}(_0x3fd9,0x5b358));function _interopNamespace(_0x5bad0c){const _0x2871cc={_0x4a1c57:0x12b},_0xcb0881=_0xdb76;if(_0x5bad0c&&_0x5bad0c['__esModule'])return _0x5bad0c;var _0xcd3585=Object[_0xcb0881(_0x2871cc._0x4a1c57)](null);return _0x5bad0c&&Object['keys'](_0x5bad0c)['forEach'](function(_0x140fd6){const _0x2c6442=_0xcb0881;if(_0x140fd6!==_0x2c6442(0x140)){var _0x3fca37=Object['getOwnPropertyDescriptor'](_0x5bad0c,_0x140fd6);Object['defineProperty'](_0xcd3585,_0x140fd6,_0x3fca37['get']?_0x3fca37:{'enumerable':!![],'get':function(){return _0x5bad0c[_0x140fd6];}});}}),_0xcd3585['default']=_0x5bad0c,_0xcd3585;}function _0x3fd9(){const _0x24abc9=['mars3d-echarts','eachSeries','342EydHAZ','setEchartsOption','_mars3d_scene','create','EchartsLayer','moveHandler','globe','setMapOffset','clientWidth','position','1282568PSLnCV','visibility','5591080FptQjc','echarts','_addedHook','ellipsoid','SCENE3D','eachComponent','lng','dispose','resize','lat','2514gOwMWi','layer','default','dataToPoint','matrix','addEventListener','pointerEvents','mars3dMapRoam','112509IZfokp','width','container','none','_echartsContainer','dispatchAction','1926BKyKOp','scheduler','canvas','value','mars3dMap','updateLayout','echartsDepthTest','scene','forEach','dimensions','register','options','328420TQMSpZ','DomUtil','depthTest','_map','_pointerEvents','LayerUtil','ecInstance','2175736RonaWO','_setOptionsHook','isArray','style','postRender','getHeight','extendComponentView','isFormat','8AInqdr','coordinateSystem','Cesium','130nEEbac','top','clientHeight','3005yfRIUF','Cartesian3','defineProperty','left','SceneTransforms','_echartsInstance'];_0x3fd9=function(){return _0x24abc9;};return _0x3fd9();}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x35e8c5(0x11c)];class CompositeCoordinateSystem{constructor(_0x34331f,_0x4a7f71){const _0x2c5b23={_0x3733cc:0x13a},_0x186ed7=_0x35e8c5;this['_mars3d_scene']=_0x34331f,this[_0x186ed7(0x155)]=[_0x186ed7(_0x2c5b23._0x3733cc),'lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x4a7f71;}['setMapOffset'](_0x384b30){this['_mapOffset']=_0x384b30;}['getBMap'](){return this['_mars3d_scene'];}[_0x35e8c5(0x141)](_0x5b63ab){const _0x5e2d77={_0x31c905:0x12e,_0xbf3782:0x124,_0x123090:0x138},_0x2a5919=_0x35e8c5,_0x4f10db=this['_mars3d_scene'],_0x581dd8=[NaN,NaN];let _0x1633c6=_0x4f10db['echartsFixedHeight'];_0x4f10db['echartsAutoHeight']&&(_0x1633c6=_0x4f10db[_0x2a5919(_0x5e2d77._0x31c905)]['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x5b63ab[0x0],_0x5b63ab[0x1])));const _0x4066c2=Cesium$1[_0x2a5919(0x121)]['fromDegrees'](_0x5b63ab[0x0],_0x5b63ab[0x1],_0x1633c6);if(!_0x4066c2)return _0x581dd8;const _0x1d4d9c=Cesium$1[_0x2a5919(_0x5e2d77._0xbf3782)]['wgs84ToWindowCoordinates'](_0x4f10db,_0x4066c2);if(!_0x1d4d9c)return _0x581dd8;if(_0x4f10db['echartsDepthTest']&&_0x4f10db['mode']===Cesium$1['SceneMode'][_0x2a5919(_0x5e2d77._0x123090)]){const _0x32e8e8=new Cesium$1['EllipsoidalOccluder'](_0x4f10db['globe'][_0x2a5919(0x137)],_0x4f10db['camera']['positionWC']),_0x3311fa=_0x32e8e8['isPointVisible'](_0x4066c2);if(!_0x3311fa)return _0x581dd8;}return[_0x1d4d9c['x']-this['_mapOffset'][0x0],_0x1d4d9c['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x3dedc2=_0x35e8c5,_0xa5a4ac=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0xa5a4ac['getWidth'](),_0xa5a4ac[_0x3dedc2(0x164)]());}['getRoamTransform'](){const _0x5382db={_0x3eb63f:0x12b},_0x1220b0=_0x35e8c5;return echarts__namespace[_0x1220b0(0x142)][_0x1220b0(_0x5382db._0x3eb63f)]();}}function _0xdb76(_0x1ad7c7,_0x2851a1){const _0x3fd9cb=_0x3fd9();return _0xdb76=function(_0xdb76a7,_0xf5e6b3){_0xdb76a7=_0xdb76a7-0x118;let _0xebd42f=_0x3fd9cb[_0xdb76a7];return _0xebd42f;},_0xdb76(_0x1ad7c7,_0x2851a1);}CompositeCoordinateSystem[_0x35e8c5(0x155)]=['lng',_0x35e8c5(0x13d)],CompositeCoordinateSystem[_0x35e8c5(0x12b)]=function(_0x30d673,_0x1acef6){const _0xfe98c={_0x5516b3:0x139,_0x4a1b27:0x150},_0x400f11={_0x456bbd:0x11b},_0x4f4738={_0x19d696:0x11b,_0x5f1949:0x12f},_0x4a5740=_0x35e8c5;let _0x1821d8;const _0x4774c2=_0x30d673['scheduler']['ecInstance']['_mars3d_scene'];_0x30d673[_0x4a5740(_0xfe98c._0x5516b3)](_0x4a5740(_0xfe98c._0x4a1b27),function(_0x1c5e3b){const _0x1724f1=_0x4a5740,_0x1d4387=_0x1acef6['getZr']()['painter'];if(!_0x1d4387)return;!_0x1821d8&&(_0x1821d8=new CompositeCoordinateSystem(_0x4774c2,_0x1acef6)),_0x1c5e3b[_0x1724f1(_0x4f4738._0x19d696)]=_0x1821d8,_0x1821d8[_0x1724f1(_0x4f4738._0x5f1949)](_0x1c5e3b['__mapOffset']||[0x0,0x0]);}),_0x30d673[_0x4a5740(0x127)](function(_0x35ce2e){const _0x41c9ea=_0x4a5740;_0x35ce2e['get'](_0x41c9ea(_0x400f11._0x456bbd))==='mars3dMap'&&(!_0x1821d8&&(_0x1821d8=new CompositeCoordinateSystem(_0x4774c2,_0x1acef6)),_0x35ce2e['coordinateSystem']=_0x1821d8);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':_0x35e8c5(0x151)},function(_0x1a8570,_0x51e356){}),echarts__namespace['extendComponentModel']({'type':_0x35e8c5(0x150),'getBMap':function(){const _0x10132d=_0x35e8c5;return this[_0x10132d(0x12a)];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x35e8c5(0x118)]({'type':'mars3dMap','init':function(_0x9a4310,_0x3b15c7){const _0xcffb03={_0x152a4e:0x163,_0x31a324:0x12d},_0x4c9e76=_0x35e8c5;this['api']=_0x3b15c7,this[_0x4c9e76(0x153)]=_0x9a4310[_0x4c9e76(0x14d)][_0x4c9e76(0x15e)]['_mars3d_scene'],this['scene'][_0x4c9e76(_0xcffb03._0x152a4e)][_0x4c9e76(0x143)](this[_0x4c9e76(_0xcffb03._0x31a324)],this);},'moveHandler':function(_0x94ea9,_0x15a548){const _0x532b8f={_0x301fca:0x145},_0x6ea5f8=_0x35e8c5;this['api'][_0x6ea5f8(0x14b)]({'type':_0x6ea5f8(_0x532b8f._0x301fca)});},'render':function(_0x581eeb,_0x8010d1,_0xc2af12){},'dispose':function(_0x119b36){const _0xe01889=_0x35e8c5;this[_0xe01889(0x153)]['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x27048f={}){const _0x1bc9e1={_0x255cff:0x144},_0x413e2b=_0x35e8c5;super(_0x27048f),this['_pointerEvents']=this[_0x413e2b(0x157)][_0x413e2b(_0x1bc9e1._0x255cff)];}get['layer'](){const _0x43f9c3={_0x54fcb8:0x125},_0x32136e=_0x35e8c5;return this[_0x32136e(_0x43f9c3._0x54fcb8)];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x5bd1ae){const _0x49c023={_0x3296e4:0x14a},_0x46ef9a=_0x35e8c5;this['_pointerEvents']=_0x5bd1ae,this['_echartsContainer']&&(_0x5bd1ae?this[_0x46ef9a(_0x49c023._0x3296e4)]['style']['pointerEvents']='all':this['_echartsContainer']['style']['pointerEvents']='none');}[_0x35e8c5(0x160)](_0x97e4e4,_0xeafcd2){this['setEchartsOption'](_0x97e4e4);}['_showHook'](_0x319a44){const _0x20645e={_0x12d410:0x133},_0x355287=_0x35e8c5;_0x319a44?this['_echartsContainer'][_0x355287(0x162)]['visibility']='visible':this['_echartsContainer']['style'][_0x355287(_0x20645e._0x12d410)]='hidden';}['_mountedHook'](){const _0x230744={_0x46845a:0x153},_0x43a2b7=_0x35e8c5;this['_map']['scene'][_0x43a2b7(0x152)]=this[_0x43a2b7(0x157)][_0x43a2b7(0x15a)]??!![],this['_map']['scene']['echartsAutoHeight']=this[_0x43a2b7(0x157)]['clampToGround']??![],this[_0x43a2b7(0x15b)][_0x43a2b7(_0x230744._0x46845a)]['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}[_0x35e8c5(0x136)](){const _0x1f46c8=_0x35e8c5;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this['_map']['scene'],this[_0x1f46c8(0x129)](this['options']);}['_removedHook'](){const _0x32dcd9={_0x4af8b6:0x125,_0x4e9ada:0x148,_0x26da2c:0x14a},_0x14cfb9=_0x35e8c5;this[_0x14cfb9(_0x32dcd9._0x4af8b6)]&&(this['_echartsInstance']['clear'](),this['_echartsInstance'][_0x14cfb9(0x13b)](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map'][_0x14cfb9(_0x32dcd9._0x4e9ada)]['removeChild'](this[_0x14cfb9(_0x32dcd9._0x26da2c)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x604df3={_0x56653e:0x159,_0x40e802:0x131,_0x117254:0x11e,_0x2889b3:0x123,_0x3d3fe0:0x130,_0x32e87d:0x162},_0x46c5a6=_0x35e8c5,_0x37d2f2=mars3d__namespace[_0x46c5a6(_0x604df3._0x56653e)]['create']('div',_0x46c5a6(0x126),this['_map']['container']);return _0x37d2f2['id']=this['id'],_0x37d2f2['style'][_0x46c5a6(_0x604df3._0x40e802)]='absolute',_0x37d2f2['style'][_0x46c5a6(_0x604df3._0x117254)]='0px',_0x37d2f2['style'][_0x46c5a6(_0x604df3._0x2889b3)]='0px',_0x37d2f2[_0x46c5a6(0x162)]['width']=this[_0x46c5a6(0x15b)]['scene']['canvas'][_0x46c5a6(_0x604df3._0x3d3fe0)]+'px',_0x37d2f2['style']['height']=this['_map']['scene'][_0x46c5a6(0x14e)]['clientHeight']+'px',_0x37d2f2['style']['pointerEvents']=this[_0x46c5a6(0x15c)]?'all':_0x46c5a6(0x149),_0x37d2f2[_0x46c5a6(_0x604df3._0x32e87d)]['zIndex']=this['options']['zIndex']??0x9,_0x37d2f2;}['resize'](){const _0x24aa93={_0x220160:0x125,_0x3d94ae:0x147,_0x5ceb5f:0x15b,_0x22a355:0x13c},_0x400d86=_0x35e8c5;if(!this[_0x400d86(_0x24aa93._0x220160)])return;this['_echartsContainer']['style'][_0x400d86(_0x24aa93._0x3d94ae)]=this[_0x400d86(_0x24aa93._0x5ceb5f)][_0x400d86(0x153)]['canvas']['clientWidth']+'px',this[_0x400d86(0x14a)]['style']['height']=this['_map']['scene'][_0x400d86(0x14e)][_0x400d86(0x11f)]+'px',this['_echartsInstance'][_0x400d86(_0x24aa93._0x22a355)]();}[_0x35e8c5(0x129)](_0x5f59e7,_0x358be0,_0x1b9c16){this['_echartsInstance']&&(_0x5f59e7['mars3dMap']=_0x5f59e7['mars3dMap']||{},this['_echartsInstance']['setOption'](_0x5f59e7,_0x358be0,_0x1b9c16));}['getRectangle'](_0x3b9cdf){const _0x584a49={_0x5901ad:0x157,_0x807ac1:0x154},_0x2b4240=_0x35e8c5;let _0x2368af,_0x253539,_0x34deaa,_0x4eb703;function _0x5bebdb(_0x56f276){const _0x53e7d4=_0xdb76;if(!Array[_0x53e7d4(0x161)](_0x56f276))return;const _0x580848=_0x56f276[0x0]||0x0,_0x3b6bbd=_0x56f276[0x1]||0x0;_0x580848!==0x0&&_0x3b6bbd!==0x0&&(_0x2368af===undefined?(_0x2368af=_0x580848,_0x253539=_0x580848,_0x34deaa=_0x3b6bbd,_0x4eb703=_0x3b6bbd):(_0x2368af=Math['min'](_0x2368af,_0x580848),_0x253539=Math['max'](_0x253539,_0x580848),_0x34deaa=Math['min'](_0x34deaa,_0x3b6bbd),_0x4eb703=Math['max'](_0x4eb703,_0x3b6bbd)));}const _0x20a57b=this[_0x2b4240(_0x584a49._0x5901ad)]['series'];_0x20a57b&&_0x20a57b[_0x2b4240(_0x584a49._0x807ac1)](_0x25a684=>{_0x25a684['data']&&_0x25a684['data']['forEach'](_0x2c89b2=>{const _0x178da3=_0xdb76;if(_0x2c89b2[_0x178da3(0x14f)])_0x5bebdb(_0x2c89b2['value']);else _0x2c89b2['coords']&&_0x2c89b2['coords'][_0x178da3(0x154)](_0x30fdf3=>{_0x5bebdb(_0x30fdf3);});});});if(_0x2368af===0x0&&_0x34deaa===0x0&&_0x253539===0x0&&_0x4eb703===0x0)return null;return _0x3b9cdf!==null&&_0x3b9cdf!==void 0x0&&_0x3b9cdf[_0x2b4240(0x119)]?{'xmin':_0x2368af,'xmax':_0x253539,'ymin':_0x34deaa,'ymax':_0x4eb703}:Cesium['Rectangle']['fromDegrees'](_0x2368af,_0x34deaa,_0x253539,_0x4eb703);}['on'](_0x3960c0,_0x23bc48,_0x4935cf){const _0x442db1=_0x35e8c5;return this[_0x442db1(0x125)]['on'](_0x3960c0,_0x23bc48,_0x4935cf||this),this;}['onByQuery'](_0x3a95cf,_0x1c3ca2,_0x53d5a9,_0x1a23c3){return this['_echartsInstance']['on'](_0x3a95cf,_0x1c3ca2,_0x53d5a9,_0x1a23c3||this),this;}['off'](_0x43d2fb,_0x3ae21e,_0x54e6cc){return this['_echartsInstance']['off'](_0x43d2fb,_0x3ae21e,_0x54e6cc||this),this;}}mars3d__namespace[_0x35e8c5(0x15d)][_0x35e8c5(0x156)]('echarts',EchartsLayer),mars3d__namespace[_0x35e8c5(0x13f)]['EchartsLayer']=EchartsLayer,mars3d__namespace[_0x35e8c5(0x135)]=echarts__namespace,exports[_0x35e8c5(0x12c)]=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x2393a9){if(_0x2393a9!=='default'&&!exports['hasOwnProperty'](_0x2393a9))Object['defineProperty'](exports,_0x2393a9,{'enumerable':!![],'get':function(){return echarts[_0x2393a9];}});}),Object[_0x35e8c5(0x122)](exports,'__esModule',{'value':!![]});
}));
