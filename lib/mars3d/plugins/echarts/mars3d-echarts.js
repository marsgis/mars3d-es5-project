/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.5.15
 * 编译日期：2023-07-10 19:16:32
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x244504=_0x3b10;(function(_0x2cbb59,_0x1f83c0){const _0x166d8b={_0xce68c0:0x105,_0x508519:0xf5,_0x27c666:0x119,_0x27d365:0x100,_0x4efa2c:0x107,_0x3990e3:0xdf},_0x81515f=_0x3b10,_0xea671c=_0x2cbb59();while(!![]){try{const _0x1ca017=-parseInt(_0x81515f(0xf2))/0x1+-parseInt(_0x81515f(0x106))/0x2*(-parseInt(_0x81515f(_0x166d8b._0xce68c0))/0x3)+-parseInt(_0x81515f(_0x166d8b._0x508519))/0x4+parseInt(_0x81515f(_0x166d8b._0x27c666))/0x5*(parseInt(_0x81515f(0xf4))/0x6)+-parseInt(_0x81515f(_0x166d8b._0x27d365))/0x7+parseInt(_0x81515f(_0x166d8b._0x4efa2c))/0x8+parseInt(_0x81515f(_0x166d8b._0x3990e3))/0x9;if(_0x1ca017===_0x1f83c0)break;else _0xea671c['push'](_0xea671c['shift']());}catch(_0x4e0fba){_0xea671c['push'](_0xea671c['shift']());}}}(_0x1135,0xc13ae));function _0x3b10(_0x16a56a,_0x56d91a){const _0x1135f8=_0x1135();return _0x3b10=function(_0x3b1005,_0x49a97e){_0x3b1005=_0x3b1005-0xd9;let _0x2b2710=_0x1135f8[_0x3b1005];return _0x2b2710;},_0x3b10(_0x16a56a,_0x56d91a);}function _interopNamespace(_0x407ee1){const _0x5abe1a={_0x35b38c:0xf6},_0x50a1b9={_0x3fc7d8:0xdb},_0x758f7e=_0x3b10;if(_0x407ee1&&_0x407ee1[_0x758f7e(_0x5abe1a._0x35b38c)])return _0x407ee1;var _0x1fc01b=Object[_0x758f7e(0xdd)](null);return _0x407ee1&&Object['keys'](_0x407ee1)['forEach'](function(_0x4a9b4e){const _0x2756c8=_0x758f7e;if(_0x4a9b4e!=='default'){var _0x100bf6=Object['getOwnPropertyDescriptor'](_0x407ee1,_0x4a9b4e);Object[_0x2756c8(_0x50a1b9._0x3fc7d8)](_0x1fc01b,_0x4a9b4e,_0x100bf6['get']?_0x100bf6:{'enumerable':!![],'get':function(){return _0x407ee1[_0x4a9b4e];}});}}),_0x1fc01b['default']=_0x407ee1,_0x1fc01b;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x15a418,_0x3f8fb4){const _0x475e96={_0x1f4fd9:0xe2},_0x5ae6fd=_0x3b10;this[_0x5ae6fd(_0x475e96._0x1f4fd9)]=_0x15a418,this['dimensions']=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x3f8fb4;}['setMapOffset'](_0x322734){this['_mapOffset']=_0x322734;}['getBMap'](){return this['_mars3d_scene'];}[_0x244504(0xd9)](_0x528304){const _0x2e5512={_0x5a18d4:0x10e,_0x24f41d:0x10d,_0x5c353a:0xe0,_0x5e875e:0x11a,_0x51847:0xe9,_0x2d8aed:0xf9,_0x2c1f41:0x117},_0x457369=_0x244504,_0x1da7c0=this['_mars3d_scene'],_0x2e4cc6=[NaN,NaN];let _0x3f8f1a=_0x1da7c0['echartsFixedHeight'];_0x1da7c0['echartsAutoHeight']&&(_0x3f8f1a=_0x1da7c0[_0x457369(_0x2e5512._0x5a18d4)][_0x457369(_0x2e5512._0x24f41d)](Cesium$1['Cartographic']['fromDegrees'](_0x528304[0x0],_0x528304[0x1])));const _0x17bb2f=Cesium$1['Cartesian3']['fromDegrees'](_0x528304[0x0],_0x528304[0x1],_0x3f8f1a);if(!_0x17bb2f)return _0x2e4cc6;const _0x11adfe=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x1da7c0,_0x17bb2f);if(!_0x11adfe)return _0x2e4cc6;if(_0x1da7c0[_0x457369(_0x2e5512._0x5c353a)]&&_0x1da7c0['mode']===Cesium$1[_0x457369(_0x2e5512._0x5e875e)]['SCENE3D']){const _0x3852e3=new Cesium$1[(_0x457369(_0x2e5512._0x51847))](_0x1da7c0['globe']['ellipsoid'],_0x1da7c0[_0x457369(0xf8)]['positionWC']),_0x25d6d4=_0x3852e3[_0x457369(_0x2e5512._0x2d8aed)](_0x17bb2f);if(!_0x25d6d4)return _0x2e4cc6;}return[_0x11adfe['x']-this['_mapOffset'][0x0],_0x11adfe['y']-this[_0x457369(_0x2e5512._0x2c1f41)][0x1]];}['getViewRect'](){const _0x131476=_0x244504,_0x10b711=this['_api'];return new echarts__namespace[(_0x131476(0xe5))]['BoundingRect'](0x0,0x0,_0x10b711[_0x131476(0xe8)](),_0x10b711['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem[_0x244504(0x115)]=['lng',_0x244504(0xee)],CompositeCoordinateSystem['create']=function(_0x3adf33,_0x5f363c){const _0x587a6a={_0x2284ea:0xe2,_0x446839:0x111},_0x59853a={_0x20b6d6:0x10b},_0x1f43c5=_0x244504;let _0x2112a6;const _0x47992a=_0x3adf33['scheduler'][_0x1f43c5(0x118)][_0x1f43c5(_0x587a6a._0x2284ea)];_0x3adf33['eachComponent'](_0x1f43c5(_0x587a6a._0x446839),function(_0x50690b){const _0x5d524f=_0x1f43c5,_0x488c41=_0x5f363c['getZr']()[_0x5d524f(_0x59853a._0x20b6d6)];if(!_0x488c41)return;!_0x2112a6&&(_0x2112a6=new CompositeCoordinateSystem(_0x47992a,_0x5f363c)),_0x50690b['coordinateSystem']=_0x2112a6,_0x2112a6['setMapOffset'](_0x50690b['__mapOffset']||[0x0,0x0]);}),_0x3adf33[_0x1f43c5(0xfa)](function(_0xa03c53){_0xa03c53['get']('coordinateSystem')==='mars3dMap'&&(!_0x2112a6&&(_0x2112a6=new CompositeCoordinateSystem(_0x47992a,_0x5f363c)),_0xa03c53['coordinateSystem']=_0x2112a6);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem'](_0x244504(0x111),CompositeCoordinateSystem),echarts__namespace[_0x244504(0xeb)]({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':_0x244504(0xdc)},function(_0x3511bf,_0x1978ac){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x244504(0xf3)]({'type':'mars3dMap','init':function(_0x52cb6d,_0x1519fa){this['api']=_0x1519fa,this['scene']=_0x52cb6d['scheduler']['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x6fd9cc,_0x270315){const _0x547f33={_0x199f34:0xea},_0x11a539=_0x244504;this[_0x11a539(0xfe)]['dispatchAction']({'type':_0x11a539(_0x547f33._0x199f34)});},'render':function(_0x4b4fa6,_0x44b00c,_0x4eeacc){},'dispose':function(_0x12e43f){const _0x1f86a={_0x55f076:0xe7},_0x487ea2=_0x244504;this[_0x487ea2(_0x1f86a._0x55f076)]['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error(_0x244504(0xe6));function _0x1135(){const _0x302c28=['isPointVisible','eachSeries','_echartsContainer','width','_echartsInstance','api','options','7865676RTKVRI','clampToGround','resize','off','visibility','386277RfDSpJ','14DuAqEl','3574024QnZWft','init','_addedHook','_removedHook','painter','layer','getHeight','globe','style','min','mars3dMap','container','_map','pointerEvents','dimensions','data','_mapOffset','ecInstance','22315AzFaau','SceneMode','_showHook','mars3d-echarts','isFormat','dataToPoint','hasOwnProperty','defineProperty','updateLayout','create','none','19717299NBDqqL','echartsDepthTest','all','_mars3d_scene','_pointerEvents','setEchartsOption','graphic','请引入\x20echarts\x20库\x20','scene','getWidth','EllipsoidalOccluder','mars3dMapRoam','registerAction','0px','echarts','lat','echartsFixedHeight','_mountedHook','Rectangle','1323220bpyBNd','extendComponentView','66TyDSaW','1398448bLpPRg','__esModule','clientWidth','camera'];_0x1135=function(){return _0x302c28;};return _0x1135();}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x4b96ae={}){const _0x16d4c4=_0x244504;super(_0x4b96ae),this['_pointerEvents']=this['options'][_0x16d4c4(0x114)];}get[_0x244504(0x10c)](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x244504(0x114)](_0x1ce8e8){const _0x3ea0d5=_0x244504;this['_pointerEvents']=_0x1ce8e8,this['_echartsContainer']&&(_0x1ce8e8?this['_echartsContainer']['style']['pointerEvents']=_0x3ea0d5(0xe1):this['_echartsContainer']['style']['pointerEvents']=_0x3ea0d5(0xde));}['_setOptionsHook'](_0x479123,_0x34e796){const _0x3a7276={_0x4179d3:0xe4},_0x44529a=_0x244504;this[_0x44529a(_0x3a7276._0x4179d3)](_0x479123);}[_0x244504(0x11b)](_0x499e7d){const _0x138a97={_0x173b5a:0x104},_0x59594a=_0x244504;_0x499e7d?this['_echartsContainer']['style']['visibility']='visible':this[_0x59594a(0xfb)]['style'][_0x59594a(_0x138a97._0x173b5a)]='hidden';}[_0x244504(0xf0)](){const _0x19f5f1={_0x2498ca:0x113,_0x4069b1:0xe7},_0x5b99b8=_0x244504;this[_0x5b99b8(_0x19f5f1._0x2498ca)][_0x5b99b8(_0x19f5f1._0x4069b1)]['echartsDepthTest']=this['options']['depthTest']??!![],this[_0x5b99b8(_0x19f5f1._0x2498ca)][_0x5b99b8(0xe7)]['echartsAutoHeight']=this[_0x5b99b8(0xff)][_0x5b99b8(0x101)]??![],this['_map']['scene'][_0x5b99b8(0xef)]=this['options']['fixedHeight']??0x0;}[_0x244504(0x109)](){const _0x3ce2be={_0x2c7d22:0x108},_0x5049e9=_0x244504;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace[_0x5049e9(_0x3ce2be._0x2c7d22)](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this['_map']['scene'],this[_0x5049e9(0xe4)](this[_0x5049e9(0xff)]);}[_0x244504(0x10a)](){const _0x20f298=_0x244504;this['_echartsInstance']&&(this[_0x20f298(0xfd)]['clear'](),this[_0x20f298(0xfd)]['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this[_0x20f298(0x113)]['container']['removeChild'](this[_0x20f298(0xfb)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x47ea98={_0x3aa357:0x112,_0x3a60f9:0xf7,_0x23bda4:0xe3},_0x47e378=_0x244504,_0x43b70c=mars3d__namespace['DomUtil']['create']('div',_0x47e378(0x11c),this['_map'][_0x47e378(_0x47ea98._0x3aa357)]);return _0x43b70c['id']=this['id'],_0x43b70c['style']['position']='absolute',_0x43b70c['style']['top']='0px',_0x43b70c['style']['left']=_0x47e378(0xec),_0x43b70c['style']['width']=this['_map']['scene']['canvas'][_0x47e378(_0x47ea98._0x3a60f9)]+'px',_0x43b70c['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',_0x43b70c['style']['pointerEvents']=this[_0x47e378(_0x47ea98._0x23bda4)]?'all':'none',_0x43b70c['style']['zIndex']=this['options']['zIndex']??0x9,_0x43b70c;}['resize'](){const _0x34fc93={_0x4f3b38:0xfc,_0x22915c:0xf7,_0x109a62:0xfb,_0x4e8f8a:0x102},_0x190e22=_0x244504;if(!this['_echartsInstance'])return;this['_echartsContainer']['style'][_0x190e22(_0x34fc93._0x4f3b38)]=this['_map']['scene']['canvas'][_0x190e22(_0x34fc93._0x22915c)]+'px',this[_0x190e22(_0x34fc93._0x109a62)][_0x190e22(0x10f)]['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this[_0x190e22(0xfd)][_0x190e22(_0x34fc93._0x4e8f8a)]();}['setEchartsOption'](_0x3414da,_0x246875,_0x3d2338){const _0x42c9cb={_0x8e173f:0xfd,_0x5f2e80:0x111},_0x16ba8c=_0x244504;this[_0x16ba8c(_0x42c9cb._0x8e173f)]&&(_0x3414da[_0x16ba8c(_0x42c9cb._0x5f2e80)]=_0x3414da[_0x16ba8c(0x111)]||{},this['_echartsInstance']['setOption'](_0x3414da,_0x246875,_0x3d2338));}['getRectangle'](_0x3d0012){const _0x282b94={_0x517d9f:0x110},_0x187be6=_0x244504;let _0x70c920,_0x41bc26,_0x5321a7,_0x4925f8;function _0x2fb4d4(_0x504e3b){const _0x3d4933=_0x3b10;if(!Array['isArray'](_0x504e3b))return;const _0x333852=_0x504e3b[0x0]||0x0,_0x23a486=_0x504e3b[0x1]||0x0;_0x333852!==0x0&&_0x23a486!==0x0&&(_0x70c920===undefined?(_0x70c920=_0x333852,_0x41bc26=_0x333852,_0x5321a7=_0x23a486,_0x4925f8=_0x23a486):(_0x70c920=Math['min'](_0x70c920,_0x333852),_0x41bc26=Math['max'](_0x41bc26,_0x333852),_0x5321a7=Math[_0x3d4933(_0x282b94._0x517d9f)](_0x5321a7,_0x23a486),_0x4925f8=Math['max'](_0x4925f8,_0x23a486)));}const _0x28a3a2=this['options']['series'];_0x28a3a2&&_0x28a3a2['forEach'](_0x1a5685=>{const _0x3c1375=_0x3b10;_0x1a5685['data']&&_0x1a5685[_0x3c1375(0x116)]['forEach'](_0x2329e4=>{if(_0x2329e4['value'])_0x2fb4d4(_0x2329e4['value']);else _0x2329e4['coords']&&_0x2329e4['coords']['forEach'](_0x4fe075=>{_0x2fb4d4(_0x4fe075);});});});if(_0x70c920===0x0&&_0x5321a7===0x0&&_0x41bc26===0x0&&_0x4925f8===0x0)return null;return _0x3d0012!==null&&_0x3d0012!==void 0x0&&_0x3d0012[_0x187be6(0x11d)]?{'xmin':_0x70c920,'xmax':_0x41bc26,'ymin':_0x5321a7,'ymax':_0x4925f8}:Cesium[_0x187be6(0xf1)]['fromDegrees'](_0x70c920,_0x5321a7,_0x41bc26,_0x4925f8);}['on'](_0x3551c0,_0x8199c3,_0x34f0bc){return this['_echartsInstance']['on'](_0x3551c0,_0x8199c3,_0x34f0bc||this),this;}['onByQuery'](_0x171c43,_0x57aa41,_0x5579b1,_0x79482c){return this['_echartsInstance']['on'](_0x171c43,_0x57aa41,_0x5579b1,_0x79482c||this),this;}['off'](_0x266434,_0x25dd91,_0x4d4dbb){const _0x3d2a76={_0x5705b9:0xfd},_0xc1376=_0x244504;return this[_0xc1376(_0x3d2a76._0x5705b9)][_0xc1376(0x103)](_0x266434,_0x25dd91,_0x4d4dbb||this),this;}}mars3d__namespace['LayerUtil']['register'](_0x244504(0xed),EchartsLayer),mars3d__namespace[_0x244504(0x10c)]['EchartsLayer']=EchartsLayer,mars3d__namespace[_0x244504(0xed)]=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x26c2a1){const _0x46c3b9={_0x5e071a:0xda},_0x2d4f3a=_0x244504;if(_0x26c2a1!=='default'&&!exports[_0x2d4f3a(_0x46c3b9._0x5e071a)](_0x26c2a1))Object['defineProperty'](exports,_0x26c2a1,{'enumerable':!![],'get':function(){return echarts[_0x26c2a1];}});}),Object['defineProperty'](exports,_0x244504(0xf6),{'value':!![]});
}));
