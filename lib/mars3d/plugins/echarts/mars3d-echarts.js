/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.8
 * 编译日期：2024-03-25 20:25:07
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x718fad=_0x5bc5;(function(_0x1604b9,_0x6168e3){const _0x1f6ef5={_0xa88d49:0xc7,_0x445706:0xf3,_0x25c281:0xf5,_0x587631:0xe7},_0x2c79a7=_0x5bc5,_0x4519fd=_0x1604b9();while(!![]){try{const _0x4990b6=-parseInt(_0x2c79a7(_0x1f6ef5._0xa88d49))/0x1+parseInt(_0x2c79a7(0xc9))/0x2*(-parseInt(_0x2c79a7(_0x1f6ef5._0x445706))/0x3)+parseInt(_0x2c79a7(0xec))/0x4*(-parseInt(_0x2c79a7(0xe6))/0x5)+-parseInt(_0x2c79a7(_0x1f6ef5._0x25c281))/0x6+-parseInt(_0x2c79a7(0xf0))/0x7*(-parseInt(_0x2c79a7(0xd0))/0x8)+-parseInt(_0x2c79a7(0xbf))/0x9+parseInt(_0x2c79a7(_0x1f6ef5._0x587631))/0xa;if(_0x4990b6===_0x6168e3)break;else _0x4519fd['push'](_0x4519fd['shift']());}catch(_0x422ae4){_0x4519fd['push'](_0x4519fd['shift']());}}}(_0x8257,0x85e41));function _interopNamespace(_0x9a151b){if(_0x9a151b&&_0x9a151b['__esModule'])return _0x9a151b;var _0x309c57=Object['create'](null);return _0x9a151b&&Object['keys'](_0x9a151b)['forEach'](function(_0x1f02ba){const _0x2ebcbd=_0x5bc5;if(_0x1f02ba!=='default'){var _0x484658=Object[_0x2ebcbd(0xb8)](_0x9a151b,_0x1f02ba);Object['defineProperty'](_0x309c57,_0x1f02ba,_0x484658['get']?_0x484658:{'enumerable':!![],'get':function(){return _0x9a151b[_0x1f02ba];}});}}),_0x309c57['default']=_0x9a151b,_0x309c57;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x119536,_0x4f16c8){const _0x855ef={_0x3720ef:0xda},_0x35a9a7=_0x5bc5;this[_0x35a9a7(0xcf)]=_0x119536,this['dimensions']=[_0x35a9a7(_0x855ef._0x3720ef),_0x35a9a7(0xe0)],this['_mapOffset']=[0x0,0x0],this['_api']=_0x4f16c8;}['setMapOffset'](_0x3658be){const _0x33ce11={_0x156167:0xd4},_0x1fb8b5=_0x5bc5;this[_0x1fb8b5(_0x33ce11._0x156167)]=_0x3658be;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0x5317b0){const _0xafaa91={_0x576083:0xcf,_0x26fcec:0xd9,_0xd2eb79:0xbd,_0x41695:0xb5,_0x4d1706:0xd4},_0x2639ff=_0x5bc5,_0x40c2ad=this[_0x2639ff(_0xafaa91._0x576083)],_0x23af52=[NaN,NaN];let _0x255efb=_0x40c2ad['echartsFixedHeight'];_0x40c2ad['echartsAutoHeight']&&(_0x255efb=_0x40c2ad['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x5317b0[0x0],_0x5317b0[0x1])));const _0x301f8b=Cesium$1[_0x2639ff(0xed)]['fromDegrees'](_0x5317b0[0x0],_0x5317b0[0x1],_0x255efb);if(!_0x301f8b)return _0x23af52;const _0x5db326=Cesium$1[_0x2639ff(0xba)]['wgs84ToWindowCoordinates'](_0x40c2ad,_0x301f8b);if(!_0x5db326)return _0x23af52;if(_0x40c2ad['echartsDepthTest']&&_0x40c2ad[_0x2639ff(_0xafaa91._0x26fcec)]===Cesium$1[_0x2639ff(_0xafaa91._0xd2eb79)]['SCENE3D']){const _0x12fcd5=new Cesium$1['EllipsoidalOccluder'](_0x40c2ad['globe'][_0x2639ff(_0xafaa91._0x41695)],_0x40c2ad['camera'][_0x2639ff(0xdf)]),_0x38933d=_0x12fcd5['isPointVisible'](_0x301f8b);if(!_0x38933d)return _0x23af52;}return[_0x5db326['x']-this['_mapOffset'][0x0],_0x5db326['y']-this[_0x2639ff(_0xafaa91._0x4d1706)][0x1]];}[_0x718fad(0xd8)](){const _0x423426={_0x3c99d4:0xd2,_0x2257ae:0xc6},_0x301eca=_0x718fad,_0x55d38a=this[_0x301eca(_0x423426._0x3c99d4)];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x55d38a['getWidth'](),_0x55d38a[_0x301eca(_0x423426._0x2257ae)]());}['getRoamTransform'](){const _0x21814c={_0x2fe1f9:0xe2},_0x5cba1c=_0x718fad;return echarts__namespace['matrix'][_0x5cba1c(_0x21814c._0x2fe1f9)]();}}CompositeCoordinateSystem[_0x718fad(0xe8)]=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x1eae97,_0x5c655b){const _0x1bf996={_0x29b5e3:0xd1,_0x3fd495:0xef},_0x131bed={_0x4ac0e5:0xbc},_0x23f1ca=_0x718fad;let _0x267125;const _0x1698ba=_0x1eae97['scheduler']['ecInstance']['_mars3d_scene'];_0x1eae97[_0x23f1ca(_0x1bf996._0x29b5e3)]('mars3dMap',function(_0x38026f){const _0x1ff7b5=_0x23f1ca,_0x4a4b61=_0x5c655b['getZr']()['painter'];if(!_0x4a4b61)return;!_0x267125&&(_0x267125=new CompositeCoordinateSystem(_0x1698ba,_0x5c655b)),_0x38026f[_0x1ff7b5(0xd7)]=_0x267125,_0x267125[_0x1ff7b5(_0x131bed._0x4ac0e5)](_0x38026f['__mapOffset']||[0x0,0x0]);}),_0x1eae97[_0x23f1ca(_0x1bf996._0x3fd495)](function(_0x4df834){const _0x29d748=_0x23f1ca;_0x4df834['get'](_0x29d748(0xd7))==='mars3dMap'&&(!_0x267125&&(_0x267125=new CompositeCoordinateSystem(_0x1698ba,_0x5c655b)),_0x4df834['coordinateSystem']=_0x267125);});};function _0x8257(){const _0x438934=['default','layer','3AUzxvV','off','589242weTCnp','clientHeight','removeEventListener','ellipsoid','left','getAttrVal','getOwnPropertyDescriptor','moveHandler','SceneTransforms','mars3dMap','setMapOffset','SceneMode','setEchartsOption','4816377XYuYfN','api','style','all','setOption','scheduler','0px','getHeight','366374LjRwds','options','346162fwLYGM','_map','请引入\x20echarts\x20库\x20','forEach','hasOwnProperty','width','_mars3d_scene','976ulAcfu','eachComponent','_api','BaseLayer','_mapOffset','mars3dMapRoam','container','coordinateSystem','getViewRect','mode','lng','fixedHeight','data','addEventListener','dispatchAction','positionWC','lat','pointerEvents','create','eventParent','scene','echarts','100GHvQGo','22522240TRVIhV','dimensions','_echartsContainer','registerCoordinateSystem','ecInstance','191452tCszXi','Cartesian3','_echartsInstance','eachSeries','24458fohqMe'];_0x8257=function(){return _0x438934;};return _0x8257();}function _0x5bc5(_0x154fc0,_0x4d9fee){const _0x825791=_0x8257();return _0x5bc5=function(_0x5bc525,_0x34cf7a){_0x5bc525=_0x5bc525-0xb5;let _0x95717a=_0x825791[_0x5bc525];return _0x95717a;},_0x5bc5(_0x154fc0,_0x4d9fee);}if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace[_0x718fad(0xea)]('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x4e774d,_0xb19019){}),echarts__namespace['extendComponentModel']({'type':_0x718fad(0xbb),'getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':_0x718fad(0xbb),'init':function(_0x452fcc,_0x39b1c8){const _0x1df23f={_0x4aec28:0xc4,_0x4d0bd6:0xeb,_0x2e4f49:0xdd,_0xbbe651:0xb9},_0x185163=_0x718fad;this['api']=_0x39b1c8,this['scene']=_0x452fcc[_0x185163(_0x1df23f._0x4aec28)][_0x185163(_0x1df23f._0x4d0bd6)]['_mars3d_scene'],this['scene']['postRender'][_0x185163(_0x1df23f._0x2e4f49)](this[_0x185163(_0x1df23f._0xbbe651)],this);},'moveHandler':function(_0x2e06d2,_0x680c1c){const _0x3910f6={_0xbceb10:0xc0,_0x80f630:0xde},_0x5efc25=_0x718fad;this[_0x5efc25(_0x3910f6._0xbceb10)][_0x5efc25(_0x3910f6._0x80f630)]({'type':_0x5efc25(0xd5)});},'render':function(_0x5e6898,_0x182279,_0x51e94f){},'dispose':function(_0x2447ea){const _0x38be92={_0x170def:0xe4,_0x3d5910:0xf7},_0x237823=_0x718fad;this[_0x237823(_0x38be92._0x170def)]['postRender'][_0x237823(_0x38be92._0x3d5910)](this[_0x237823(0xb9)],this);}});else throw new Error(_0x718fad(0xcb));const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x718fad(0xd3)];class EchartsLayer extends BaseLayer{constructor(_0x46a85c={}){super(_0x46a85c),this['_pointerEvents']=this['options']['pointerEvents'];}get[_0x718fad(0xf2)](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x5d6a61){const _0x230ef4=_0x718fad;this['_pointerEvents']=_0x5d6a61,this['_echartsContainer']&&(_0x5d6a61?this['_echartsContainer'][_0x230ef4(0xc1)]['pointerEvents']='all':this['_echartsContainer']['style'][_0x230ef4(0xe1)]='none');}['_setOptionsHook'](_0x195711,_0x585490){const _0x34a222=_0x718fad;this[_0x34a222(0xbe)](_0x195711);}['_showHook'](_0x145891){const _0x46837f=_0x718fad;_0x145891?this['_echartsContainer'][_0x46837f(0xc1)]['visibility']='visible':this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x2924e8={_0x521ecb:0xe4,_0x4af46a:0xca},_0x4083a6=_0x718fad;this['_map'][_0x4083a6(_0x2924e8._0x521ecb)]['echartsDepthTest']=this['options']['depthTest']??!![],this[_0x4083a6(_0x2924e8._0x4af46a)]['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map']['scene']['echartsFixedHeight']=this[_0x4083a6(0xc8)][_0x4083a6(0xdb)]??0x0;}['_addedHook'](){const _0x5b2f6b=_0x718fad;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this[_0x5b2f6b(0xca)][_0x5b2f6b(0xe4)],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x271396={_0x2babf1:0xee,_0x5f3fb7:0xd6},_0x2fd027=_0x718fad;this[_0x2fd027(_0x271396._0x2babf1)]&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this[_0x2fd027(0xca)][_0x2fd027(_0x271396._0x5f3fb7)]['removeChild'](this[_0x2fd027(0xe9)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x160eab={_0x4f097b:0xd6,_0x3f971d:0xb6,_0x542ea7:0xce,_0x5f2e2c:0xca},_0x5129a6=_0x718fad,_0x20e7a1=mars3d__namespace['DomUtil']['create']('div','mars3d-echarts',this['_map'][_0x5129a6(_0x160eab._0x4f097b)]);return _0x20e7a1['id']=this['id'],_0x20e7a1[_0x5129a6(0xc1)]['position']='absolute',_0x20e7a1[_0x5129a6(0xc1)]['top']=_0x5129a6(0xc5),_0x20e7a1[_0x5129a6(0xc1)][_0x5129a6(_0x160eab._0x3f971d)]='0px',_0x20e7a1['style'][_0x5129a6(_0x160eab._0x542ea7)]=this['_map']['scene']['canvas']['clientWidth']+'px',_0x20e7a1['style']['height']=this[_0x5129a6(_0x160eab._0x5f2e2c)]['scene']['canvas']['clientHeight']+'px',_0x20e7a1['style']['pointerEvents']=this['_pointerEvents']?_0x5129a6(0xc2):'none',_0x20e7a1[_0x5129a6(0xc1)]['zIndex']=this['options']['zIndex']??0x9,_0x20e7a1;}['resize'](){const _0x4b8412={_0x570b1e:0xc1,_0x5d8da5:0xee},_0x4d680f=_0x718fad;if(!this['_echartsInstance'])return;this['_echartsContainer']['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this['_echartsContainer'][_0x4d680f(_0x4b8412._0x570b1e)]['height']=this['_map']['scene']['canvas'][_0x4d680f(0xf6)]+'px',this[_0x4d680f(_0x4b8412._0x5d8da5)]['resize']();}[_0x718fad(0xbe)](_0x34c6ef,_0x18c6bc,_0x2742ec){const _0x31647e={_0x41368b:0xee,_0x6a3493:0xb7,_0x54efb9:0xe3},_0x607fbd=_0x718fad;this[_0x607fbd(_0x31647e._0x41368b)]&&(_0x34c6ef={'mars3dMap':{},...mars3d__namespace['Util'][_0x607fbd(_0x31647e._0x6a3493)](_0x34c6ef,{'onlySimpleType':!![]})},delete _0x34c6ef[_0x607fbd(_0x31647e._0x54efb9)],this['_echartsInstance'][_0x607fbd(0xc3)](_0x34c6ef,_0x18c6bc,_0x2742ec));}['getRectangle'](_0x25ea06){let _0xfcc886,_0x59dd0c,_0x3f762e,_0x22d982;function _0x439a8a(_0x2d7e70){if(!Array['isArray'](_0x2d7e70))return;const _0x1b301d=_0x2d7e70[0x0]||0x0,_0x44501d=_0x2d7e70[0x1]||0x0;_0x1b301d!==0x0&&_0x44501d!==0x0&&(_0xfcc886===undefined?(_0xfcc886=_0x1b301d,_0x59dd0c=_0x1b301d,_0x3f762e=_0x44501d,_0x22d982=_0x44501d):(_0xfcc886=Math['min'](_0xfcc886,_0x1b301d),_0x59dd0c=Math['max'](_0x59dd0c,_0x1b301d),_0x3f762e=Math['min'](_0x3f762e,_0x44501d),_0x22d982=Math['max'](_0x22d982,_0x44501d)));}const _0xad84f7=this['options']['series'];_0xad84f7&&_0xad84f7['forEach'](_0x124958=>{const _0x225971=_0x5bc5;_0x124958['data']&&_0x124958[_0x225971(0xdc)][_0x225971(0xcc)](_0x182037=>{const _0x48f13d=_0x225971;if(_0x182037['value'])_0x439a8a(_0x182037['value']);else _0x182037['coords']&&_0x182037['coords'][_0x48f13d(0xcc)](_0x2306a9=>{_0x439a8a(_0x2306a9);});});});if(_0xfcc886===0x0&&_0x3f762e===0x0&&_0x59dd0c===0x0&&_0x22d982===0x0)return null;return _0x25ea06!==null&&_0x25ea06!==void 0x0&&_0x25ea06['isFormat']?{'xmin':_0xfcc886,'xmax':_0x59dd0c,'ymin':_0x3f762e,'ymax':_0x22d982}:Cesium['Rectangle']['fromDegrees'](_0xfcc886,_0x3f762e,_0x59dd0c,_0x22d982);}['on'](_0xf3466,_0x3914b9,_0x19a7ce){return this['_echartsInstance']['on'](_0xf3466,_0x3914b9,_0x19a7ce||this),this;}['onByQuery'](_0x33a078,_0xe8a308,_0x50a212,_0x29cf4a){return this['_echartsInstance']['on'](_0x33a078,_0xe8a308,_0x50a212,_0x29cf4a||this),this;}['off'](_0x31f11f,_0x5dc033,_0xae603a){const _0x4600f0={_0xb515de:0xf4},_0x316f79=_0x718fad;return this['_echartsInstance'][_0x316f79(_0x4600f0._0xb515de)](_0x31f11f,_0x5dc033,_0xae603a||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace[_0x718fad(0xe5)]=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x9f6ada){const _0x3db5b6={_0x360efd:0xf1,_0xce6cda:0xcd},_0x5036d6=_0x718fad;if(_0x9f6ada!==_0x5036d6(_0x3db5b6._0x360efd)&&!exports[_0x5036d6(_0x3db5b6._0xce6cda)](_0x9f6ada))Object['defineProperty'](exports,_0x9f6ada,{'enumerable':!![],'get':function(){return echarts[_0x9f6ada];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
