/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.3
 * 编译日期：2023-08-27 22:06:50
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x416dde=_0x2be3;(function(_0x210a80,_0x47f3a0){const _0x45cbee={_0x44a57d:0x1cc,_0xb6fc5:0x195,_0x485582:0x1b3,_0x22055f:0x1be},_0x53b835=_0x2be3,_0x35c70a=_0x210a80();while(!![]){try{const _0x18eea5=parseInt(_0x53b835(0x1b6))/0x1*(parseInt(_0x53b835(_0x45cbee._0x44a57d))/0x2)+parseInt(_0x53b835(0x1c1))/0x3*(-parseInt(_0x53b835(_0x45cbee._0xb6fc5))/0x4)+-parseInt(_0x53b835(0x1a4))/0x5*(parseInt(_0x53b835(0x19c))/0x6)+parseInt(_0x53b835(0x1a0))/0x7*(-parseInt(_0x53b835(0x1ce))/0x8)+parseInt(_0x53b835(0x1d1))/0x9+-parseInt(_0x53b835(_0x45cbee._0x485582))/0xa+parseInt(_0x53b835(0x1ca))/0xb*(parseInt(_0x53b835(_0x45cbee._0x22055f))/0xc);if(_0x18eea5===_0x47f3a0)break;else _0x35c70a['push'](_0x35c70a['shift']());}catch(_0x156abc){_0x35c70a['push'](_0x35c70a['shift']());}}}(_0x3319,0x1cb48));function _0x3319(){const _0x3eb6ce=['18oomEvM','echartsAutoHeight','isArray','BaseLayer','970438VFxVeh','lat','style','echartsFixedHeight','312770iRYjfB','_echartsInstance','hidden','eachSeries','coords','zIndex','scheduler','_echartsContainer','_showHook','echartsDepthTest','_mapOffset','_map','setOption','visibility','Cartesian3','48460ZAtAoZ','height','removeChild','47423RIxnwI','extendComponentModel','data','pointerEvents','0px','options','SceneMode','visible','1370664ExrYQR','dimensions','clientWidth','16242PUyGag','getHeight','mars3dMap','coordinateSystem','Cesium','layer','clampToGround','scene','painter','11XfOdQY','canvas','8CPcrGr','max','8EaTDen','value','off','1498140nRlcle','forEach','dataToPoint','mars3dMapRoam','16qMIsGH','lng','isPointVisible','_api','isFormat','EchartsLayer','_mars3d_scene'];_0x3319=function(){return _0x3eb6ce;};return _0x3319();}function _interopNamespace(_0xfd15eb){if(_0xfd15eb&&_0xfd15eb['__esModule'])return _0xfd15eb;var _0x57b951=Object['create'](null);return _0xfd15eb&&Object['keys'](_0xfd15eb)['forEach'](function(_0x2050f6){if(_0x2050f6!=='default'){var _0x30765e=Object['getOwnPropertyDescriptor'](_0xfd15eb,_0x2050f6);Object['defineProperty'](_0x57b951,_0x2050f6,_0x30765e['get']?_0x30765e:{'enumerable':!![],'get':function(){return _0xfd15eb[_0x2050f6];}});}}),_0x57b951['default']=_0xfd15eb,_0x57b951;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);function _0x2be3(_0x183f3f,_0x1914bb){const _0x33198a=_0x3319();return _0x2be3=function(_0x2be352,_0x5d2106){_0x2be352=_0x2be352-0x194;let _0x2ef705=_0x33198a[_0x2be352];return _0x2ef705;},_0x2be3(_0x183f3f,_0x1914bb);}const Cesium$1=mars3d__namespace[_0x416dde(0x1c5)];class CompositeCoordinateSystem{constructor(_0x17f13e,_0x310dc0){const _0x4010c7=_0x416dde;this['_mars3d_scene']=_0x17f13e,this[_0x4010c7(0x1bf)]=[_0x4010c7(0x196),'lat'],this[_0x4010c7(0x1ae)]=[0x0,0x0],this[_0x4010c7(0x198)]=_0x310dc0;}['setMapOffset'](_0x4b1143){this['_mapOffset']=_0x4b1143;}['getBMap'](){return this['_mars3d_scene'];}[_0x416dde(0x1d3)](_0x39e785){const _0x465e92={_0x3c85b4:0x19d,_0x37a22c:0x1ad,_0x21cc99:0x1bc},_0x5362d3=_0x416dde,_0x2338c1=this[_0x5362d3(0x19b)],_0x25a37d=[NaN,NaN];let _0x50e65e=_0x2338c1['echartsFixedHeight'];_0x2338c1[_0x5362d3(_0x465e92._0x3c85b4)]&&(_0x50e65e=_0x2338c1['globe'][_0x5362d3(0x1c2)](Cesium$1['Cartographic']['fromDegrees'](_0x39e785[0x0],_0x39e785[0x1])));const _0x50d9d4=Cesium$1[_0x5362d3(0x1b2)]['fromDegrees'](_0x39e785[0x0],_0x39e785[0x1],_0x50e65e);if(!_0x50d9d4)return _0x25a37d;const _0x18a2e6=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x2338c1,_0x50d9d4);if(!_0x18a2e6)return _0x25a37d;if(_0x2338c1[_0x5362d3(_0x465e92._0x37a22c)]&&_0x2338c1['mode']===Cesium$1[_0x5362d3(_0x465e92._0x21cc99)]['SCENE3D']){const _0x92b92d=new Cesium$1['EllipsoidalOccluder'](_0x2338c1['globe']['ellipsoid'],_0x2338c1['camera']['positionWC']),_0x11fdc9=_0x92b92d[_0x5362d3(0x197)](_0x50d9d4);if(!_0x11fdc9)return _0x25a37d;}return[_0x18a2e6['x']-this['_mapOffset'][0x0],_0x18a2e6['y']-this[_0x5362d3(0x1ae)][0x1]];}['getViewRect'](){const _0x383a4e=_0x416dde,_0x29cd29=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x29cd29['getWidth'](),_0x29cd29[_0x383a4e(0x1c2)]());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem[_0x416dde(0x1bf)]=['lng',_0x416dde(0x1a1)],CompositeCoordinateSystem['create']=function(_0x51059a,_0x53bc68){const _0x37448b={_0x4d3053:0x1aa,_0xadd0bc:0x19b,_0x3f53e4:0x1a7},_0x301ae7={_0x56f787:0x1c4},_0x10fc17={_0x5191a2:0x1c9},_0x4b3e9a=_0x416dde;let _0x323b83;const _0x59d39a=_0x51059a[_0x4b3e9a(_0x37448b._0x4d3053)]['ecInstance'][_0x4b3e9a(_0x37448b._0xadd0bc)];_0x51059a['eachComponent']('mars3dMap',function(_0x21aa62){const _0x4216a2=_0x4b3e9a,_0x479ae7=_0x53bc68['getZr']()[_0x4216a2(_0x10fc17._0x5191a2)];if(!_0x479ae7)return;!_0x323b83&&(_0x323b83=new CompositeCoordinateSystem(_0x59d39a,_0x53bc68)),_0x21aa62[_0x4216a2(0x1c4)]=_0x323b83,_0x323b83['setMapOffset'](_0x21aa62['__mapOffset']||[0x0,0x0]);}),_0x51059a[_0x4b3e9a(_0x37448b._0x3f53e4)](function(_0x1872d0){const _0x395fe7=_0x4b3e9a;_0x1872d0['get'](_0x395fe7(_0x301ae7._0x56f787))===_0x395fe7(0x1c3)&&(!_0x323b83&&(_0x323b83=new CompositeCoordinateSystem(_0x59d39a,_0x53bc68)),_0x1872d0['coordinateSystem']=_0x323b83);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem'](_0x416dde(0x1c3),CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':_0x416dde(0x194),'event':_0x416dde(0x194),'update':'updateLayout'},function(_0x2a1fb0,_0x3e2607){}),echarts__namespace[_0x416dde(0x1b7)]({'type':_0x416dde(0x1c3),'getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x410e3e,_0x1fe7eb){const _0x3212dd=_0x416dde;this['api']=_0x1fe7eb,this[_0x3212dd(0x1c8)]=_0x410e3e['scheduler']['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x470501,_0x2a5ed0){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0xacab66,_0x270ea8,_0x1c4876){},'dispose':function(_0x131aeb){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x416dde(0x1c6)][_0x416dde(0x19f)];class EchartsLayer extends BaseLayer{constructor(_0x203934={}){super(_0x203934),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){const _0x16dbf8={_0x20bee9:0x1a5},_0x24250a=_0x416dde;return this[_0x24250a(_0x16dbf8._0x20bee9)];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x29ca36){const _0x208905={_0x295991:0x1ab,_0x504488:0x1b9},_0x442688=_0x416dde;this['_pointerEvents']=_0x29ca36,this[_0x442688(_0x208905._0x295991)]&&(_0x29ca36?this['_echartsContainer']['style'][_0x442688(_0x208905._0x504488)]='all':this['_echartsContainer']['style']['pointerEvents']='none');}['_setOptionsHook'](_0x3c945e,_0x786804){this['setEchartsOption'](_0x3c945e);}[_0x416dde(0x1ac)](_0x137821){const _0x43b9ca={_0x5603cd:0x1bd,_0x5c9d04:0x1b1,_0x3f0441:0x1a6},_0x58f35d=_0x416dde;_0x137821?this['_echartsContainer'][_0x58f35d(0x1a2)]['visibility']=_0x58f35d(_0x43b9ca._0x5603cd):this['_echartsContainer']['style'][_0x58f35d(_0x43b9ca._0x5c9d04)]=_0x58f35d(_0x43b9ca._0x3f0441);}['_mountedHook'](){const _0x344c13={_0x51d8cc:0x1bb,_0x43b15b:0x1c7},_0x513cf3=_0x416dde;this['_map']['scene'][_0x513cf3(0x1ad)]=this[_0x513cf3(_0x344c13._0x51d8cc)]['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options'][_0x513cf3(_0x344c13._0x43b15b)]??![],this['_map'][_0x513cf3(0x1c8)][_0x513cf3(0x1a3)]=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x2b8532={_0x7212f1:0x1af},_0x4a6772=_0x416dde;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance'][_0x4a6772(0x19b)]=this[_0x4a6772(_0x2b8532._0x7212f1)]['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x5b36d2={_0x36447e:0x1a5,_0x1ee7c4:0x1b5},_0x1837f2=_0x416dde;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this[_0x1837f2(_0x5b36d2._0x36447e)]['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map']['container'][_0x1837f2(_0x5b36d2._0x1ee7c4)](this['_echartsContainer']),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x55680f={_0x725657:0x1a2,_0x4a153c:0x1ba,_0x226d6c:0x1b4,_0x220277:0x1a9},_0x38a2ea=_0x416dde,_0x404b5c=mars3d__namespace['DomUtil']['create']('div','mars3d-echarts',this[_0x38a2ea(0x1af)]['container']);return _0x404b5c['id']=this['id'],_0x404b5c['style']['position']='absolute',_0x404b5c['style']['top']='0px',_0x404b5c[_0x38a2ea(_0x55680f._0x725657)]['left']=_0x38a2ea(_0x55680f._0x4a153c),_0x404b5c['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',_0x404b5c['style'][_0x38a2ea(_0x55680f._0x226d6c)]=this['_map']['scene']['canvas']['clientHeight']+'px',_0x404b5c['style'][_0x38a2ea(0x1b9)]=this['_pointerEvents']?'all':'none',_0x404b5c[_0x38a2ea(0x1a2)][_0x38a2ea(_0x55680f._0x220277)]=this['options']['zIndex']??0x9,_0x404b5c;}['resize'](){const _0x489a57={_0x5d7b98:0x1c0},_0x3ff579=_0x416dde;if(!this['_echartsInstance'])return;this[_0x3ff579(0x1ab)]['style']['width']=this['_map']['scene'][_0x3ff579(0x1cb)][_0x3ff579(_0x489a57._0x5d7b98)]+'px',this['_echartsContainer']['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0x2b74d1,_0x1d62ee,_0x10e55d){const _0x1cc5dd=_0x416dde;this['_echartsInstance']&&(_0x2b74d1[_0x1cc5dd(0x1c3)]=_0x2b74d1['mars3dMap']||{},this['_echartsInstance'][_0x1cc5dd(0x1b0)](_0x2b74d1,_0x1d62ee,_0x10e55d));}['getRectangle'](_0x53f4b7){const _0x509bef={_0x38cbfa:0x1d2},_0x44a9af={_0x16c2bf:0x1b8},_0x4f1a6e={_0xe60bbc:0x19e,_0x21df8e:0x1cd},_0x42de42=_0x416dde;let _0x1d55fd,_0x1910e9,_0x4e98e7,_0x40d6fe;function _0x13e4ca(_0x2cd226){const _0x1b222d=_0x2be3;if(!Array[_0x1b222d(_0x4f1a6e._0xe60bbc)](_0x2cd226))return;const _0x2327c0=_0x2cd226[0x0]||0x0,_0x4934db=_0x2cd226[0x1]||0x0;_0x2327c0!==0x0&&_0x4934db!==0x0&&(_0x1d55fd===undefined?(_0x1d55fd=_0x2327c0,_0x1910e9=_0x2327c0,_0x4e98e7=_0x4934db,_0x40d6fe=_0x4934db):(_0x1d55fd=Math['min'](_0x1d55fd,_0x2327c0),_0x1910e9=Math['max'](_0x1910e9,_0x2327c0),_0x4e98e7=Math['min'](_0x4e98e7,_0x4934db),_0x40d6fe=Math[_0x1b222d(_0x4f1a6e._0x21df8e)](_0x40d6fe,_0x4934db)));}const _0x21ec19=this['options']['series'];_0x21ec19&&_0x21ec19[_0x42de42(_0x509bef._0x38cbfa)](_0x198b2d=>{const _0xabd0c2=_0x42de42;_0x198b2d[_0xabd0c2(_0x44a9af._0x16c2bf)]&&_0x198b2d['data']['forEach'](_0x376d80=>{const _0xe3fcdc=_0xabd0c2;if(_0x376d80[_0xe3fcdc(0x1cf)])_0x13e4ca(_0x376d80['value']);else _0x376d80[_0xe3fcdc(0x1a8)]&&_0x376d80[_0xe3fcdc(0x1a8)][_0xe3fcdc(0x1d2)](_0x1a704e=>{_0x13e4ca(_0x1a704e);});});});if(_0x1d55fd===0x0&&_0x4e98e7===0x0&&_0x1910e9===0x0&&_0x40d6fe===0x0)return null;return _0x53f4b7!==null&&_0x53f4b7!==void 0x0&&_0x53f4b7[_0x42de42(0x199)]?{'xmin':_0x1d55fd,'xmax':_0x1910e9,'ymin':_0x4e98e7,'ymax':_0x40d6fe}:Cesium['Rectangle']['fromDegrees'](_0x1d55fd,_0x4e98e7,_0x1910e9,_0x40d6fe);}['on'](_0x54d051,_0x13c330,_0x31fd6e){return this['_echartsInstance']['on'](_0x54d051,_0x13c330,_0x31fd6e||this),this;}['onByQuery'](_0x3e0e77,_0x53a7c8,_0x43aa5f,_0x244916){return this['_echartsInstance']['on'](_0x3e0e77,_0x53a7c8,_0x43aa5f,_0x244916||this),this;}[_0x416dde(0x1d0)](_0x326d4c,_0xca3fcb,_0x2d45cb){return this['_echartsInstance']['off'](_0x326d4c,_0xca3fcb,_0x2d45cb||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace[_0x416dde(0x1c6)][_0x416dde(0x19a)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)[_0x416dde(0x1d2)](function(_0xf1d6c5){if(_0xf1d6c5!=='default'&&!exports['hasOwnProperty'](_0xf1d6c5))Object['defineProperty'](exports,_0xf1d6c5,{'enumerable':!![],'get':function(){return echarts[_0xf1d6c5];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
