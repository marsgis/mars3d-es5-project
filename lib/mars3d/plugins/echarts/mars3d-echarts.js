/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.5.7
 * 编译日期：2023-05-16 21:12:02
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x206798=_0x3d18;(function(_0x302cc8,_0x25fbfb){const _0x128493={_0x4a04bf:0x1cc,_0x1e4391:0x1b6,_0x1566dc:0x1b2,_0x18e933:0x1a3},_0x49e7e7=_0x3d18,_0x4dcd00=_0x302cc8();while(!![]){try{const _0x55e5a1=-parseInt(_0x49e7e7(0x1cb))/0x1+-parseInt(_0x49e7e7(0x1aa))/0x2+-parseInt(_0x49e7e7(_0x128493._0x4a04bf))/0x3*(parseInt(_0x49e7e7(_0x128493._0x1e4391))/0x4)+parseInt(_0x49e7e7(0x1c4))/0x5+-parseInt(_0x49e7e7(0x1c5))/0x6*(parseInt(_0x49e7e7(0x1cf))/0x7)+-parseInt(_0x49e7e7(_0x128493._0x1566dc))/0x8+parseInt(_0x49e7e7(_0x128493._0x18e933))/0x9*(parseInt(_0x49e7e7(0x1ac))/0xa);if(_0x55e5a1===_0x25fbfb)break;else _0x4dcd00['push'](_0x4dcd00['shift']());}catch(_0x1b3d87){_0x4dcd00['push'](_0x4dcd00['shift']());}}}(_0x4599,0x47a60));function _interopNamespace(_0x47547d){const _0x4c71fe={_0x46a8b0:0x1a0},_0xffefce=_0x3d18;if(_0x47547d&&_0x47547d['__esModule'])return _0x47547d;var _0x57e75e=Object[_0xffefce(0x1bd)](null);return _0x47547d&&Object['keys'](_0x47547d)[_0xffefce(0x1cd)](function(_0x41f74c){const _0x5e5175=_0xffefce;if(_0x41f74c!==_0x5e5175(0x1b5)){var _0x1d3817=Object[_0x5e5175(_0x4c71fe._0x46a8b0)](_0x47547d,_0x41f74c);Object['defineProperty'](_0x57e75e,_0x41f74c,_0x1d3817['get']?_0x1d3817:{'enumerable':!![],'get':function(){return _0x47547d[_0x41f74c];}});}}),_0x57e75e[_0xffefce(0x1b5)]=_0x47547d,_0x57e75e;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x1a08fa,_0x5dba1d){const _0x2e9753={_0x1d0af3:0x1af},_0x738f12=_0x3d18;this['_mars3d_scene']=_0x1a08fa,this[_0x738f12(_0x2e9753._0x1d0af3)]=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x5dba1d;}[_0x206798(0x1ce)](_0x6f3ca8){this['_mapOffset']=_0x6f3ca8;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0x4c85c8){const _0x5ac421={_0x4b0c48:0x1ba,_0x18db45:0x1ae,_0x3c2114:0x1c6},_0x5ba90d=_0x206798,_0x5b8cc0=this['_mars3d_scene'],_0x2555e9=[NaN,NaN];let _0x21be55=_0x5b8cc0['echartsFixedHeight'];_0x5b8cc0['echartsAutoHeight']&&(_0x21be55=_0x5b8cc0['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x4c85c8[0x0],_0x4c85c8[0x1])));const _0x145488=Cesium$1['Cartesian3']['fromDegrees'](_0x4c85c8[0x0],_0x4c85c8[0x1],_0x21be55);if(!_0x145488)return _0x2555e9;const _0x2b6788=Cesium$1[_0x5ba90d(_0x5ac421._0x4b0c48)]['wgs84ToWindowCoordinates'](_0x5b8cc0,_0x145488);if(!_0x2b6788)return _0x2555e9;if(_0x5b8cc0['echartsDepthTest']&&_0x5b8cc0['mode']===Cesium$1['SceneMode'][_0x5ba90d(0x1ad)]){const _0xf07096=new Cesium$1[(_0x5ba90d(_0x5ac421._0x18db45))](_0x5b8cc0[_0x5ba90d(0x1c1)]['ellipsoid'],_0x5b8cc0['camera']['positionWC']),_0x5afb20=_0xf07096['isPointVisible'](_0x145488);if(!_0x5afb20)return _0x2555e9;}return[_0x2b6788['x']-this[_0x5ba90d(_0x5ac421._0x3c2114)][0x0],_0x2b6788['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x3b3874=_0x206798,_0x305391=this['_api'];return new echarts__namespace['graphic'][(_0x3b3874(0x1a6))](0x0,0x0,_0x305391['getWidth'](),_0x305391['getHeight']());}['getRoamTransform'](){const _0xe9239c={_0x143084:0x1a7},_0x33b87e=_0x206798;return echarts__namespace[_0x33b87e(_0xe9239c._0x143084)]['create']();}}function _0x3d18(_0x5475e8,_0x1e91f2){const _0x459992=_0x4599();return _0x3d18=function(_0x3d1807,_0x4ae4df){_0x3d1807=_0x3d1807-0x1a0;let _0x4a4629=_0x459992[_0x3d1807];return _0x4a4629;},_0x3d18(_0x5475e8,_0x1e91f2);}CompositeCoordinateSystem['dimensions']=['lng',_0x206798(0x1be)],CompositeCoordinateSystem['create']=function(_0x10af6e,_0x5e4ac1){const _0x3e07f1={_0x235d55:0x1c2,_0x5c3d93:0x1a8},_0x3c0fd1=_0x206798;let _0x22c809;const _0x184d63=_0x10af6e[_0x3c0fd1(0x1b9)]['ecInstance']['_mars3d_scene'];_0x10af6e[_0x3c0fd1(0x1b4)]('mars3dMap',function(_0x2e6c37){const _0x2dba8a=_0x3c0fd1,_0x238365=_0x5e4ac1['getZr']()[_0x2dba8a(0x1b8)];if(!_0x238365)return;!_0x22c809&&(_0x22c809=new CompositeCoordinateSystem(_0x184d63,_0x5e4ac1)),_0x2e6c37['coordinateSystem']=_0x22c809,_0x22c809['setMapOffset'](_0x2e6c37['__mapOffset']||[0x0,0x0]);}),_0x10af6e['eachSeries'](function(_0x573c40){const _0xe00295=_0x3c0fd1;_0x573c40[_0xe00295(_0x3e07f1._0x235d55)](_0xe00295(0x1d3))===_0xe00295(_0x3e07f1._0x5c3d93)&&(!_0x22c809&&(_0x22c809=new CompositeCoordinateSystem(_0x184d63,_0x5e4ac1)),_0x573c40['coordinateSystem']=_0x22c809);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x40cfc3,_0x2fa528){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){const _0x19424a=_0x206798;return this[_0x19424a(0x1b1)];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x485f48,_0x1a0a78){const _0x3a8fa3=_0x206798;this['api']=_0x1a0a78,this[_0x3a8fa3(0x1b7)]=_0x485f48['scheduler']['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this[_0x3a8fa3(0x1bb)],this);},'moveHandler':function(_0x433aa5,_0x226b9f){const _0x48457d=_0x206798;this[_0x48457d(0x1b0)]['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0xbdd03,_0x5db71b,_0x5da5ee){},'dispose':function(_0x12bd95){const _0x4c89b2={_0x1405b4:0x1b7},_0x4659d5=_0x206798;this[_0x4659d5(_0x4c89b2._0x1405b4)]['postRender']['removeEventListener'](this[_0x4659d5(0x1bb)],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x206798(0x1c0)]['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x2ebd1b={}){super(_0x2ebd1b),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){const _0x8604c4=_0x206798;return this[_0x8604c4(0x1a5)];}set['pointerEvents'](_0x42d28b){const _0x434a11={_0x26da40:0x1db},_0x5aefe7=_0x206798;this['_pointerEvents']=_0x42d28b,this['_echartsContainer']&&(_0x42d28b?this['_echartsContainer']['style']['pointerEvents']='all':this[_0x5aefe7(0x1a4)][_0x5aefe7(_0x434a11._0x26da40)]['pointerEvents']='none');}['_setOptionsHook'](_0x421750,_0x298590){this['setEchartsOption'](_0x421750);}['_showHook'](_0x218ecd){const _0x263cb3=_0x206798;_0x218ecd?this['_echartsContainer']['style'][_0x263cb3(0x1d2)]='visible':this['_echartsContainer']['style']['visibility']='hidden';}[_0x206798(0x1a1)](){const _0x4abfb9={_0xeed499:0x1b7,_0xeec9cb:0x1d5,_0x301158:0x1d6},_0x1a032e=_0x206798;this[_0x1a032e(0x1da)][_0x1a032e(_0x4abfb9._0xeed499)]['echartsDepthTest']=this[_0x1a032e(0x1c8)][_0x1a032e(_0x4abfb9._0xeec9cb)]??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this[_0x1a032e(0x1da)]['scene'][_0x1a032e(_0x4abfb9._0x301158)]=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x5aefe2={_0x5b89dc:0x1dc,_0x553067:0x1da,_0x3b654e:0x1c8},_0x4ff72d=_0x206798;this['_echartsContainer']=this['_createChartOverlay'](),this[_0x4ff72d(0x1d4)]=echarts__namespace[_0x4ff72d(_0x5aefe2._0x5b89dc)](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this[_0x4ff72d(_0x5aefe2._0x553067)]['scene'],this['setEchartsOption'](this[_0x4ff72d(_0x5aefe2._0x3b654e)]);}['_removedHook'](){const _0x9a5639={_0x4ecf53:0x1d4,_0x1ff022:0x1c9,_0x11429c:0x1a4},_0x5e2dfb=_0x206798;this['_echartsInstance']&&(this[_0x5e2dfb(_0x9a5639._0x4ecf53)]['clear'](),this['_echartsInstance'][_0x5e2dfb(_0x9a5639._0x1ff022)](),delete this['_echartsInstance']),this[_0x5e2dfb(_0x9a5639._0x11429c)]&&(this['_map']['container']['removeChild'](this[_0x5e2dfb(0x1a4)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x114036={_0x16134c:0x1db,_0x4fc254:0x1a5,_0x42e7f1:0x1bf},_0xdfb3cd=_0x206798,_0x1f8bb0=mars3d__namespace['DomUtil']['create']('div',_0xdfb3cd(0x1d1),this['_map']['container']);return _0x1f8bb0['id']=this['id'],_0x1f8bb0['style']['position']=_0xdfb3cd(0x1d0),_0x1f8bb0[_0xdfb3cd(0x1db)]['top']='0px',_0x1f8bb0['style']['left']='0px',_0x1f8bb0['style']['width']=this['_map']['scene']['canvas'][_0xdfb3cd(0x1d9)]+'px',_0x1f8bb0[_0xdfb3cd(_0x114036._0x16134c)]['height']=this['_map'][_0xdfb3cd(0x1b7)]['canvas']['clientHeight']+'px',_0x1f8bb0['style']['pointerEvents']=this[_0xdfb3cd(_0x114036._0x4fc254)]?'all':_0xdfb3cd(0x1d8),_0x1f8bb0['style']['zIndex']=this['options'][_0xdfb3cd(_0x114036._0x42e7f1)]??0x9,_0x1f8bb0;}['resize'](){const _0x54a1ec={_0x57b05e:0x1a4,_0x2f2f48:0x1db},_0x232a1e=_0x206798;if(!this['_echartsInstance'])return;this['_echartsContainer'][_0x232a1e(0x1db)]['width']=this['_map']['scene'][_0x232a1e(0x1a2)]['clientWidth']+'px',this[_0x232a1e(_0x54a1ec._0x57b05e)][_0x232a1e(_0x54a1ec._0x2f2f48)]['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this['_echartsInstance']['resize']();}[_0x206798(0x1c3)](_0x389540,_0x4403cb,_0x2036f5){const _0x2dde69=_0x206798;this['_echartsInstance']&&(_0x389540[_0x2dde69(0x1a8)]=_0x389540['mars3dMap']||{},this['_echartsInstance']['setOption'](_0x389540,_0x4403cb,_0x2036f5));}['getRectangle'](_0xc409e){const _0x4eb58a={_0x48faeb:0x1cd},_0x571ca6={_0x180aa7:0x1bc,_0x415c38:0x1ca},_0x2de064=_0x206798;let _0x53f4d5,_0x12391e,_0x3f446b,_0x458100;function _0x443620(_0x33716f){const _0x479d27=_0x3d18;if(!Array['isArray'](_0x33716f))return;const _0x326ed9=_0x33716f[0x0]||0x0,_0x4a5c46=_0x33716f[0x1]||0x0;_0x326ed9!==0x0&&_0x4a5c46!==0x0&&(_0x53f4d5===undefined?(_0x53f4d5=_0x326ed9,_0x12391e=_0x326ed9,_0x3f446b=_0x4a5c46,_0x458100=_0x4a5c46):(_0x53f4d5=Math[_0x479d27(_0x571ca6._0x180aa7)](_0x53f4d5,_0x326ed9),_0x12391e=Math[_0x479d27(_0x571ca6._0x415c38)](_0x12391e,_0x326ed9),_0x3f446b=Math['min'](_0x3f446b,_0x4a5c46),_0x458100=Math['max'](_0x458100,_0x4a5c46)));}const _0x4c8330=this[_0x2de064(0x1c8)][_0x2de064(0x1de)];_0x4c8330&&_0x4c8330[_0x2de064(_0x4eb58a._0x48faeb)](_0x5aee1d=>{_0x5aee1d['data']&&_0x5aee1d['data']['forEach'](_0x29d581=>{const _0x18b5db=_0x3d18;if(_0x29d581[_0x18b5db(0x1a9)])_0x443620(_0x29d581[_0x18b5db(0x1a9)]);else _0x29d581['coords']&&_0x29d581['coords']['forEach'](_0x325960=>{_0x443620(_0x325960);});});});if(_0x53f4d5===0x0&&_0x3f446b===0x0&&_0x12391e===0x0&&_0x458100===0x0)return null;return _0xc409e!==null&&_0xc409e!==void 0x0&&_0xc409e['isFormat']?{'xmin':_0x53f4d5,'xmax':_0x12391e,'ymin':_0x3f446b,'ymax':_0x458100}:Cesium['Rectangle']['fromDegrees'](_0x53f4d5,_0x3f446b,_0x12391e,_0x458100);}['on'](_0x191aef,_0x2d34f9,_0x4974d2){return this['_echartsInstance']['on'](_0x191aef,_0x2d34f9,_0x4974d2||this),this;}['onByQuery'](_0x2eeaa8,_0x17ad3f,_0x50cd5c,_0x5c7b32){return this['_echartsInstance']['on'](_0x2eeaa8,_0x17ad3f,_0x50cd5c,_0x5c7b32||this),this;}[_0x206798(0x1ab)](_0x340932,_0x4eed39,_0x1c24d8){const _0x2f5ed0=_0x206798;return this['_echartsInstance'][_0x2f5ed0(0x1ab)](_0x340932,_0x4eed39,_0x1c24d8||this),this;}}mars3d__namespace['LayerUtil'][_0x206798(0x1c7)](_0x206798(0x1b3),EchartsLayer),mars3d__namespace[_0x206798(0x1c0)][_0x206798(0x1dd)]=EchartsLayer,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)[_0x206798(0x1cd)](function(_0x2630d5){const _0x1edb7c={_0x2220dd:0x1d7},_0x169f1e=_0x206798;if(_0x2630d5!=='default'&&!exports[_0x169f1e(_0x1edb7c._0x2220dd)](_0x2630d5))Object['defineProperty'](exports,_0x2630d5,{'enumerable':!![],'get':function(){return echarts[_0x2630d5];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});function _0x4599(){const _0x348e60=['SceneTransforms','moveHandler','min','create','lat','zIndex','layer','globe','get','setEchartsOption','2757010ODWEgR','6UDhHia','_mapOffset','register','options','dispose','max','480130HCYAaU','219YtcRwM','forEach','setMapOffset','934913wbaINP','absolute','mars3d-echarts','visibility','coordinateSystem','_echartsInstance','depthTest','echartsFixedHeight','hasOwnProperty','none','clientWidth','_map','style','init','EchartsLayer','series','getOwnPropertyDescriptor','_mountedHook','canvas','414TZTusK','_echartsContainer','_pointerEvents','BoundingRect','matrix','mars3dMap','value','892636swSuKg','off','311590hnvRnu','SCENE3D','EllipsoidalOccluder','dimensions','api','_mars3d_scene','3741736tmkZge','echarts','eachComponent','default','8960XKblZq','scene','painter','scheduler'];_0x4599=function(){return _0x348e60;};return _0x4599();}
}));
