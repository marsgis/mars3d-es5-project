/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.5
 * 编译日期：2024-03-05 20:10:38
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x59bb0=_0xe871;(function(_0x397e1f,_0x3a7c48){const _0x153424={_0x3f186a:0x191,_0x173ae4:0x1b9,_0x17cfaa:0x1c7,_0x2417f3:0x1a6,_0x5dc7fb:0x1cb,_0x2ac72e:0x1c5,_0x40ad3a:0x194},_0x456a2b=_0xe871,_0x44251a=_0x397e1f();while(!![]){try{const _0x30c5c8=parseInt(_0x456a2b(_0x153424._0x3f186a))/0x1+parseInt(_0x456a2b(_0x153424._0x173ae4))/0x2*(-parseInt(_0x456a2b(_0x153424._0x17cfaa))/0x3)+-parseInt(_0x456a2b(_0x153424._0x2417f3))/0x4*(-parseInt(_0x456a2b(0x1bc))/0x5)+parseInt(_0x456a2b(_0x153424._0x5dc7fb))/0x6*(parseInt(_0x456a2b(0x1b4))/0x7)+parseInt(_0x456a2b(_0x153424._0x2ac72e))/0x8*(parseInt(_0x456a2b(0x19b))/0x9)+-parseInt(_0x456a2b(_0x153424._0x40ad3a))/0xa*(parseInt(_0x456a2b(0x19c))/0xb)+-parseInt(_0x456a2b(0x199))/0xc;if(_0x30c5c8===_0x3a7c48)break;else _0x44251a['push'](_0x44251a['shift']());}catch(_0xf3ded5){_0x44251a['push'](_0x44251a['shift']());}}}(_0x494b,0xbd79c));function _interopNamespace(_0x260cc2){if(_0x260cc2&&_0x260cc2['__esModule'])return _0x260cc2;var _0x2a7045=Object['create'](null);return _0x260cc2&&Object['keys'](_0x260cc2)['forEach'](function(_0x5cccd9){const _0x34cd3a=_0xe871;if(_0x5cccd9!=='default'){var _0x52aef0=Object['getOwnPropertyDescriptor'](_0x260cc2,_0x5cccd9);Object[_0x34cd3a(0x1c3)](_0x2a7045,_0x5cccd9,_0x52aef0['get']?_0x52aef0:{'enumerable':!![],'get':function(){return _0x260cc2[_0x5cccd9];}});}}),_0x2a7045['default']=_0x260cc2,_0x2a7045;}function _0x494b(){const _0x17e8f2=['11ubZYVH','style','_map','clientWidth','mode','onByQuery','echartsAutoHeight','EchartsLayer','depthTest','pointerEvents','188ehYPBJ','removeChild','all','SCENE3D','_echartsInstance','ecInstance','width','Cartographic','coords','BoundingRect','_pointerEvents','layer','value','getViewRect','9732499dtyMhK','clampToGround','请引入\x20echarts\x20库\x20','scene','echartsDepthTest','31654czyqZd','api','addEventListener','82265dziKxC','resize','_api','max','_addedHook','options','updateLayout','defineProperty','dataToPoint','2533016tGpcrC','get','51TVmzlf','0px','register','data','6KfsXij','camera','isFormat','coordinateSystem','BaseLayer','ellipsoid','init','1408950vDyzYT','isPointVisible','_mapOffset','13789130xzWMUG','_mars3d_scene','_echartsContainer','none','height','17581932eLOiYU','mars3dMapRoam','9TgvWSv'];_0x494b=function(){return _0x17e8f2;};return _0x494b();}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);function _0xe871(_0x1e0406,_0x2355e8){const _0x494bfa=_0x494b();return _0xe871=function(_0xe871c1,_0x1601b7){_0xe871c1=_0xe871c1-0x18f;let _0x2b6adf=_0x494bfa[_0xe871c1];return _0x2b6adf;},_0xe871(_0x1e0406,_0x2355e8);}const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x3b9c49,_0x3e21cb){const _0x149713={_0x21acfe:0x195},_0x350fc4=_0xe871;this[_0x350fc4(_0x149713._0x21acfe)]=_0x3b9c49,this['dimensions']=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x3e21cb;}['setMapOffset'](_0x5e26fe){this['_mapOffset']=_0x5e26fe;}['getBMap'](){const _0x21b108={_0x46822b:0x195},_0x4a5cc5=_0xe871;return this[_0x4a5cc5(_0x21b108._0x46822b)];}[_0x59bb0(0x1c4)](_0x1d0e5e){const _0x37e45d={_0x40f991:0x1ad,_0x20c3b7:0x1a9,_0x45e935:0x18f,_0x3b80db:0x192},_0x4937ee=_0x59bb0,_0x361551=this['_mars3d_scene'],_0x3b9158=[NaN,NaN];let _0x1f0322=_0x361551['echartsFixedHeight'];_0x361551['echartsAutoHeight']&&(_0x1f0322=_0x361551['getHeight'](Cesium$1[_0x4937ee(_0x37e45d._0x40f991)]['fromDegrees'](_0x1d0e5e[0x0],_0x1d0e5e[0x1])));const _0x1847a4=Cesium$1['Cartesian3']['fromDegrees'](_0x1d0e5e[0x0],_0x1d0e5e[0x1],_0x1f0322);if(!_0x1847a4)return _0x3b9158;const _0xc5028b=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x361551,_0x1847a4);if(!_0xc5028b)return _0x3b9158;if(_0x361551['echartsDepthTest']&&_0x361551[_0x4937ee(0x1a0)]===Cesium$1['SceneMode'][_0x4937ee(_0x37e45d._0x20c3b7)]){const _0x2b7ab7=new Cesium$1['EllipsoidalOccluder'](_0x361551['globe'][_0x4937ee(_0x37e45d._0x45e935)],_0x361551[_0x4937ee(0x1cc)]['positionWC']),_0x132352=_0x2b7ab7[_0x4937ee(_0x37e45d._0x3b80db)](_0x1847a4);if(!_0x132352)return _0x3b9158;}return[_0xc5028b['x']-this[_0x4937ee(0x193)][0x0],_0xc5028b['y']-this['_mapOffset'][0x1]];}[_0x59bb0(0x1b3)](){const _0x578037={_0x5c8d8b:0x1be},_0x4cf73e=_0x59bb0,_0x7b4dc2=this[_0x4cf73e(_0x578037._0x5c8d8b)];return new echarts__namespace['graphic'][(_0x4cf73e(0x1af))](0x0,0x0,_0x7b4dc2['getWidth'](),_0x7b4dc2['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x421ea4,_0x53a896){const _0x41d6bf={_0x33ef0d:0x1ce};let _0x593c92;const _0x18d2f2=_0x421ea4['scheduler']['ecInstance']['_mars3d_scene'];_0x421ea4['eachComponent']('mars3dMap',function(_0x5a0cbd){const _0x3ab764=_0x53a896['getZr']()['painter'];if(!_0x3ab764)return;!_0x593c92&&(_0x593c92=new CompositeCoordinateSystem(_0x18d2f2,_0x53a896)),_0x5a0cbd['coordinateSystem']=_0x593c92,_0x593c92['setMapOffset'](_0x5a0cbd['__mapOffset']||[0x0,0x0]);}),_0x421ea4['eachSeries'](function(_0x1fbd9c){const _0x37abea=_0xe871;_0x1fbd9c[_0x37abea(0x1c6)](_0x37abea(_0x41d6bf._0x33ef0d))==='mars3dMap'&&(!_0x593c92&&(_0x593c92=new CompositeCoordinateSystem(_0x18d2f2,_0x53a896)),_0x1fbd9c[_0x37abea(0x1ce)]=_0x593c92);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':_0x59bb0(0x19a),'event':'mars3dMapRoam','update':_0x59bb0(0x1c2)},function(_0x4c6eef,_0x307a8e){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x473150,_0x18189e){const _0x3ea3c5={_0x972e7f:0x1ab,_0x55014c:0x1bb},_0x1878b0=_0x59bb0;this['api']=_0x18189e,this['scene']=_0x473150['scheduler'][_0x1878b0(_0x3ea3c5._0x972e7f)]['_mars3d_scene'],this['scene']['postRender'][_0x1878b0(_0x3ea3c5._0x55014c)](this['moveHandler'],this);},'moveHandler':function(_0x410ee4,_0x490ec5){const _0x202c22=_0x59bb0;this[_0x202c22(0x1ba)]['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x550084,_0x19a122,_0x231200){},'dispose':function(_0x2bb805){const _0x15e0ad={_0x4e5dd6:0x1b7},_0x4d466d=_0x59bb0;this[_0x4d466d(_0x15e0ad._0x4e5dd6)]['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error(_0x59bb0(0x1b6));const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x59bb0(0x1cf)];class EchartsLayer extends BaseLayer{constructor(_0x31abe9={}){const _0x3e8e92=_0x59bb0;super(_0x31abe9),this[_0x3e8e92(0x1b0)]=this['options'][_0x3e8e92(0x1a5)];}get[_0x59bb0(0x1b1)](){const _0x47e0c7={_0x4b55bf:0x1aa},_0x60c3e0=_0x59bb0;return this[_0x60c3e0(_0x47e0c7._0x4b55bf)];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x3a91c2){const _0x5f0eed={_0x492974:0x197},_0x45e1bb=_0x59bb0;this['_pointerEvents']=_0x3a91c2,this['_echartsContainer']&&(_0x3a91c2?this['_echartsContainer']['style']['pointerEvents']='all':this['_echartsContainer']['style']['pointerEvents']=_0x45e1bb(_0x5f0eed._0x492974));}['_setOptionsHook'](_0x2866ef,_0x2886ef){this['setEchartsOption'](_0x2866ef);}['_showHook'](_0x53c2bd){const _0x88091b={_0x155a10:0x19d},_0x2fb22=_0x59bb0;_0x53c2bd?this['_echartsContainer'][_0x2fb22(_0x88091b._0x155a10)]['visibility']='visible':this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x46d01a={_0x46dc0b:0x1b8,_0x4b8c78:0x1a2,_0x269094:0x1c1},_0x12bb14=_0x59bb0;this['_map']['scene'][_0x12bb14(_0x46d01a._0x46dc0b)]=this['options'][_0x12bb14(0x1a4)]??!![],this['_map']['scene'][_0x12bb14(_0x46d01a._0x4b8c78)]=this[_0x12bb14(0x1c1)][_0x12bb14(0x1b5)]??![],this['_map']['scene']['echartsFixedHeight']=this[_0x12bb14(_0x46d01a._0x269094)]['fixedHeight']??0x0;}[_0x59bb0(0x1c0)](){const _0x2636e7=_0x59bb0;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace[_0x2636e7(0x190)](this['_echartsContainer']),this[_0x2636e7(0x1aa)]['_mars3d_scene']=this['_map'][_0x2636e7(0x1b7)],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x3755ce={_0x5233d2:0x1aa,_0x30b77f:0x1aa,_0x13575e:0x196,_0xb75146:0x1a7},_0x2d2f57=_0x59bb0;this[_0x2d2f57(_0x3755ce._0x5233d2)]&&(this[_0x2d2f57(_0x3755ce._0x30b77f)]['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this[_0x2d2f57(_0x3755ce._0x13575e)]&&(this['_map']['container'][_0x2d2f57(_0x3755ce._0xb75146)](this['_echartsContainer']),delete this[_0x2d2f57(0x196)]);}['_createChartOverlay'](){const _0x177533={_0x53b8f1:0x1c8,_0x5175ec:0x19d,_0x15f53d:0x1ac,_0x1587a3:0x1b7,_0x1ec284:0x1a5},_0x61b18f=_0x59bb0,_0x19bb8e=mars3d__namespace['DomUtil']['create']('div','mars3d-echarts',this['_map']['container']);return _0x19bb8e['id']=this['id'],_0x19bb8e[_0x61b18f(0x19d)]['position']='absolute',_0x19bb8e['style']['top']='0px',_0x19bb8e[_0x61b18f(0x19d)]['left']=_0x61b18f(_0x177533._0x53b8f1),_0x19bb8e[_0x61b18f(_0x177533._0x5175ec)][_0x61b18f(_0x177533._0x15f53d)]=this['_map']['scene']['canvas']['clientWidth']+'px',_0x19bb8e[_0x61b18f(0x19d)]['height']=this[_0x61b18f(0x19e)][_0x61b18f(_0x177533._0x1587a3)]['canvas']['clientHeight']+'px',_0x19bb8e['style'][_0x61b18f(_0x177533._0x1ec284)]=this['_pointerEvents']?_0x61b18f(0x1a8):'none',_0x19bb8e['style']['zIndex']=this['options']['zIndex']??0x9,_0x19bb8e;}['resize'](){const _0x446c4c={_0x558752:0x196,_0x33eb82:0x19f,_0x2347af:0x19d,_0x3434af:0x198,_0x21e003:0x1bd},_0xcb0d3a=_0x59bb0;if(!this['_echartsInstance'])return;this[_0xcb0d3a(_0x446c4c._0x558752)][_0xcb0d3a(0x19d)]['width']=this[_0xcb0d3a(0x19e)]['scene']['canvas'][_0xcb0d3a(_0x446c4c._0x33eb82)]+'px',this['_echartsContainer'][_0xcb0d3a(_0x446c4c._0x2347af)][_0xcb0d3a(_0x446c4c._0x3434af)]=this['_map']['scene']['canvas']['clientHeight']+'px',this['_echartsInstance'][_0xcb0d3a(_0x446c4c._0x21e003)]();}['setEchartsOption'](_0x56b653,_0x19e299,_0x438ef5){this['_echartsInstance']&&(_0x56b653={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x56b653,{'onlySimpleType':!![]})},delete _0x56b653['eventParent'],this['_echartsInstance']['setOption'](_0x56b653,_0x19e299,_0x438ef5));}['getRectangle'](_0x406cbf){const _0x3e77f8={_0x48a55e:0x1cd},_0x23d282={_0x26ec7c:0x1b2,_0x59ba99:0x1ae},_0x2c9f72={_0x96485b:0x1bf},_0xaa249=_0x59bb0;let _0x450265,_0x3d95aa,_0xeb63c4,_0xaf19f7;function _0x483516(_0x5d3ef7){const _0x37f7d1=_0xe871;if(!Array['isArray'](_0x5d3ef7))return;const _0x2eae2c=_0x5d3ef7[0x0]||0x0,_0x3192af=_0x5d3ef7[0x1]||0x0;_0x2eae2c!==0x0&&_0x3192af!==0x0&&(_0x450265===undefined?(_0x450265=_0x2eae2c,_0x3d95aa=_0x2eae2c,_0xeb63c4=_0x3192af,_0xaf19f7=_0x3192af):(_0x450265=Math['min'](_0x450265,_0x2eae2c),_0x3d95aa=Math['max'](_0x3d95aa,_0x2eae2c),_0xeb63c4=Math['min'](_0xeb63c4,_0x3192af),_0xaf19f7=Math[_0x37f7d1(_0x2c9f72._0x96485b)](_0xaf19f7,_0x3192af)));}const _0x7a5997=this['options']['series'];_0x7a5997&&_0x7a5997['forEach'](_0x3c33c2=>{const _0x590ce7=_0xe871;_0x3c33c2['data']&&_0x3c33c2[_0x590ce7(0x1ca)]['forEach'](_0x2c6bd2=>{const _0x813e90=_0x590ce7;if(_0x2c6bd2['value'])_0x483516(_0x2c6bd2[_0x813e90(_0x23d282._0x26ec7c)]);else _0x2c6bd2['coords']&&_0x2c6bd2[_0x813e90(_0x23d282._0x59ba99)]['forEach'](_0x285c86=>{_0x483516(_0x285c86);});});});if(_0x450265===0x0&&_0xeb63c4===0x0&&_0x3d95aa===0x0&&_0xaf19f7===0x0)return null;return _0x406cbf!==null&&_0x406cbf!==void 0x0&&_0x406cbf[_0xaa249(_0x3e77f8._0x48a55e)]?{'xmin':_0x450265,'xmax':_0x3d95aa,'ymin':_0xeb63c4,'ymax':_0xaf19f7}:Cesium['Rectangle']['fromDegrees'](_0x450265,_0xeb63c4,_0x3d95aa,_0xaf19f7);}['on'](_0x297ed1,_0x4ed586,_0x12bc48){return this['_echartsInstance']['on'](_0x297ed1,_0x4ed586,_0x12bc48||this),this;}[_0x59bb0(0x1a1)](_0x7c1605,_0x4cfc64,_0x27f5f9,_0x122f20){return this['_echartsInstance']['on'](_0x7c1605,_0x4cfc64,_0x27f5f9,_0x122f20||this),this;}['off'](_0x105d01,_0x17583a,_0x3e4759){return this['_echartsInstance']['off'](_0x105d01,_0x17583a,_0x3e4759||this),this;}}mars3d__namespace['LayerUtil'][_0x59bb0(0x1c9)]('echarts',EchartsLayer),mars3d__namespace['layer'][_0x59bb0(0x1a3)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x37e037){if(_0x37e037!=='default'&&!exports['hasOwnProperty'](_0x37e037))Object['defineProperty'](exports,_0x37e037,{'enumerable':!![],'get':function(){return echarts[_0x37e037];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
