/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.5.10
 * 编译日期：2023-06-05 18:31:11
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x2d49fc=_0x42fa;(function(_0x5b0794,_0x3a8e43){const _0x4c12e2={_0x497afe:0xec,_0x563705:0xd8,_0x22849f:0xcb,_0x5dc55e:0xf5},_0x3ee455=_0x42fa,_0xec817f=_0x5b0794();while(!![]){try{const _0x302ecd=parseInt(_0x3ee455(0xca))/0x1*(parseInt(_0x3ee455(_0x4c12e2._0x497afe))/0x2)+-parseInt(_0x3ee455(0xd1))/0x3*(-parseInt(_0x3ee455(_0x4c12e2._0x563705))/0x4)+parseInt(_0x3ee455(_0x4c12e2._0x22849f))/0x5+-parseInt(_0x3ee455(_0x4c12e2._0x5dc55e))/0x6+-parseInt(_0x3ee455(0xf9))/0x7+-parseInt(_0x3ee455(0xe8))/0x8+parseInt(_0x3ee455(0x105))/0x9*(parseInt(_0x3ee455(0xf3))/0xa);if(_0x302ecd===_0x3a8e43)break;else _0xec817f['push'](_0xec817f['shift']());}catch(_0xa2b666){_0xec817f['push'](_0xec817f['shift']());}}}(_0x17b1,0x9fb1d));function _interopNamespace(_0x5ee532){const _0x240e09=_0x42fa;if(_0x5ee532&&_0x5ee532['__esModule'])return _0x5ee532;var _0x125f4e=Object[_0x240e09(0x107)](null);return _0x5ee532&&Object[_0x240e09(0x109)](_0x5ee532)['forEach'](function(_0x517543){const _0xdd5550=_0x240e09;if(_0x517543!==_0xdd5550(0xe2)){var _0x35d7b3=Object['getOwnPropertyDescriptor'](_0x5ee532,_0x517543);Object['defineProperty'](_0x125f4e,_0x517543,_0x35d7b3['get']?_0x35d7b3:{'enumerable':!![],'get':function(){return _0x5ee532[_0x517543];}});}}),_0x125f4e['default']=_0x5ee532,_0x125f4e;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x2d49fc(0xf6)];class CompositeCoordinateSystem{constructor(_0x3769d9,_0x5d0fc8){const _0xa8b657={_0x48352e:0xd3,_0x5372da:0x108},_0x546228=_0x2d49fc;this[_0x546228(_0xa8b657._0x48352e)]=_0x3769d9,this['dimensions']=['lng','lat'],this[_0x546228(0xd0)]=[0x0,0x0],this[_0x546228(_0xa8b657._0x5372da)]=_0x5d0fc8;}[_0x2d49fc(0xf1)](_0x5c8034){this['_mapOffset']=_0x5c8034;}['getBMap'](){return this['_mars3d_scene'];}[_0x2d49fc(0xdf)](_0x5d366e){const _0x3d32ff={_0x36517d:0xfb,_0x2ccf3d:0xd0},_0x304c49=_0x2d49fc,_0x3d4168=this['_mars3d_scene'],_0x619358=[NaN,NaN];let _0x4d6174=_0x3d4168['echartsFixedHeight'];_0x3d4168[_0x304c49(0xf8)]&&(_0x4d6174=_0x3d4168['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x5d366e[0x0],_0x5d366e[0x1])));const _0x235112=Cesium$1['Cartesian3']['fromDegrees'](_0x5d366e[0x0],_0x5d366e[0x1],_0x4d6174);if(!_0x235112)return _0x619358;const _0x211cf6=Cesium$1['SceneTransforms'][_0x304c49(_0x3d32ff._0x36517d)](_0x3d4168,_0x235112);if(!_0x211cf6)return _0x619358;if(_0x3d4168['echartsDepthTest']&&_0x3d4168['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x3f94ff=new Cesium$1['EllipsoidalOccluder'](_0x3d4168['globe']['ellipsoid'],_0x3d4168['camera']['positionWC']),_0x325eb3=_0x3f94ff['isPointVisible'](_0x235112);if(!_0x325eb3)return _0x619358;}return[_0x211cf6['x']-this[_0x304c49(_0x3d32ff._0x2ccf3d)][0x0],_0x211cf6['y']-this[_0x304c49(0xd0)][0x1]];}[_0x2d49fc(0xda)](){const _0x3c1a60=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x3c1a60['getWidth'](),_0x3c1a60['getHeight']());}['getRoamTransform'](){const _0x456206=_0x2d49fc;return echarts__namespace[_0x456206(0xd6)]['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem[_0x2d49fc(0x107)]=function(_0x408cc6,_0x5131f6){const _0x3fe002={_0x439926:0xd3},_0x3d7586=_0x2d49fc;let _0x5267af;const _0x564cae=_0x408cc6['scheduler']['ecInstance'][_0x3d7586(_0x3fe002._0x439926)];_0x408cc6['eachComponent'](_0x3d7586(0xdb),function(_0x55f78a){const _0x275fe3=_0x5131f6['getZr']()['painter'];if(!_0x275fe3)return;!_0x5267af&&(_0x5267af=new CompositeCoordinateSystem(_0x564cae,_0x5131f6)),_0x55f78a['coordinateSystem']=_0x5267af,_0x5267af['setMapOffset'](_0x55f78a['__mapOffset']||[0x0,0x0]);}),_0x408cc6['eachSeries'](function(_0x2e59ad){const _0x29853b=_0x3d7586;_0x2e59ad['get'](_0x29853b(0xcf))===_0x29853b(0xdb)&&(!_0x5267af&&(_0x5267af=new CompositeCoordinateSystem(_0x564cae,_0x5131f6)),_0x2e59ad['coordinateSystem']=_0x5267af);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x4f7d28,_0x13def1){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){const _0x463755=_0x2d49fc;return this[_0x463755(0xd3)];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x2d49fc(0xf0)]({'type':'mars3dMap','init':function(_0x1edf45,_0x921ed6){const _0x5b8346=_0x2d49fc;this['api']=_0x921ed6,this[_0x5b8346(0xcc)]=_0x1edf45[_0x5b8346(0xe4)]['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x350b98,_0x96839a){const _0x5914a5=_0x2d49fc;this[_0x5914a5(0xe5)]['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x518edc,_0x2d8e23,_0x4a8f4b){},'dispose':function(_0x133b58){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error(_0x2d49fc(0xe9));function _0x42fa(_0x2b2876,_0x51dbfe){const _0x17b180=_0x17b1();return _0x42fa=function(_0x42fa14,_0x34aba3){_0x42fa14=_0x42fa14-0xca;let _0x555fde=_0x17b180[_0x42fa14];return _0x555fde;},_0x42fa(_0x2b2876,_0x51dbfe);}function _0x17b1(){const _0x332c64=['max','echartsFixedHeight','options','450rxpMfB','series','create','_api','keys','346FMPWAt','920700PuiNtf','scene','coords','fromDegrees','coordinateSystem','_mapOffset','6flsWha','none','_mars3d_scene','layer','forEach','matrix','left','1648488mnwIGZ','dispose','getViewRect','mars3dMap','isFormat','visible','value','dataToPoint','style','_echartsInstance','default','_createChartOverlay','scheduler','api','pointerEvents','div','10112448ZdhHsl','请引入\x20echarts\x20库\x20','register','absolute','3866yGxlgA','_removedHook','defineProperty','isArray','extendComponentView','setMapOffset','_map','444240KlAXyf','setEchartsOption','5778480CwWaZi','Cesium','DomUtil','echartsAutoHeight','7120099dIePpU','width','wgs84ToWindowCoordinates','echartsDepthTest','canvas','_echartsContainer','hasOwnProperty','height','_addedHook'];_0x17b1=function(){return _0x332c64;};return _0x17b1();}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x1aeb1a={}){super(_0x1aeb1a),this['_pointerEvents']=this['options']['pointerEvents'];}get[_0x2d49fc(0xd4)](){const _0x44c152=_0x2d49fc;return this[_0x44c152(0xe1)];}get[_0x2d49fc(0xe6)](){return this['_pointerEvents'];}set[_0x2d49fc(0xe6)](_0x32666c){const _0xaec774={_0x1aadbf:0xfe,_0xcdfef8:0xe6,_0x12b7d4:0xfe,_0x10fb5b:0xe0},_0x4ad4cd=_0x2d49fc;this['_pointerEvents']=_0x32666c,this[_0x4ad4cd(0xfe)]&&(_0x32666c?this[_0x4ad4cd(_0xaec774._0x1aadbf)]['style'][_0x4ad4cd(_0xaec774._0xcdfef8)]='all':this[_0x4ad4cd(_0xaec774._0x12b7d4)][_0x4ad4cd(_0xaec774._0x10fb5b)]['pointerEvents']='none');}['_setOptionsHook'](_0x38c510,_0x495e1a){this['setEchartsOption'](_0x38c510);}['_showHook'](_0x39bcc4){const _0x581673=_0x2d49fc;_0x39bcc4?this[_0x581673(0xfe)]['style']['visibility']=_0x581673(0xdd):this[_0x581673(0xfe)]['style']['visibility']='hidden';}['_mountedHook'](){const _0x52c53e={_0x452d47:0xfc,_0x56a56d:0x104,_0x3942c4:0x103},_0x3f91a8=_0x2d49fc;this['_map']['scene'][_0x3f91a8(_0x52c53e._0x452d47)]=this[_0x3f91a8(_0x52c53e._0x56a56d)]['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this[_0x3f91a8(0xf2)]['scene'][_0x3f91a8(_0x52c53e._0x3942c4)]=this['options']['fixedHeight']??0x0;}[_0x2d49fc(0x101)](){const _0x4e2603=_0x2d49fc;this['_echartsContainer']=this[_0x4e2603(0xe3)](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this['_map']['scene'],this['setEchartsOption'](this['options']);}[_0x2d49fc(0xed)](){const _0x8d0aa2={_0x142132:0xe1},_0x216790=_0x2d49fc;this[_0x216790(_0x8d0aa2._0x142132)]&&(this['_echartsInstance']['clear'](),this['_echartsInstance'][_0x216790(0xd9)](),delete this[_0x216790(0xe1)]),this['_echartsContainer']&&(this['_map']['container']['removeChild'](this[_0x216790(0xfe)]),delete this[_0x216790(0xfe)]);}['_createChartOverlay'](){const _0x340878={_0x1339c4:0xeb,_0x3aac29:0xfa},_0x15625b=_0x2d49fc,_0x49da6c=mars3d__namespace[_0x15625b(0xf7)]['create'](_0x15625b(0xe7),'mars3d-echarts',this['_map']['container']);return _0x49da6c['id']=this['id'],_0x49da6c['style']['position']=_0x15625b(_0x340878._0x1339c4),_0x49da6c['style']['top']='0px',_0x49da6c['style'][_0x15625b(0xd7)]='0px',_0x49da6c['style'][_0x15625b(_0x340878._0x3aac29)]=this['_map'][_0x15625b(0xcc)]['canvas']['clientWidth']+'px',_0x49da6c['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',_0x49da6c['style']['pointerEvents']=this['_pointerEvents']?'all':_0x15625b(0xd2),_0x49da6c['style']['zIndex']=this['options']['zIndex']??0x9,_0x49da6c;}['resize'](){const _0x35b400={_0x22ec42:0xfd,_0x48197f:0xe1},_0x13e5a0=_0x2d49fc;if(!this['_echartsInstance'])return;this['_echartsContainer']['style']['width']=this['_map']['scene'][_0x13e5a0(_0x35b400._0x22ec42)]['clientWidth']+'px',this['_echartsContainer']['style'][_0x13e5a0(0x100)]=this['_map']['scene']['canvas']['clientHeight']+'px',this[_0x13e5a0(_0x35b400._0x48197f)]['resize']();}[_0x2d49fc(0xf4)](_0x468457,_0xec7d18,_0x2e763b){const _0xaf712d=_0x2d49fc;this['_echartsInstance']&&(_0x468457[_0xaf712d(0xdb)]=_0x468457['mars3dMap']||{},this['_echartsInstance']['setOption'](_0x468457,_0xec7d18,_0x2e763b));}['getRectangle'](_0x1d2579){const _0x42b191={_0x51fbe9:0x106,_0x9cb504:0xdc,_0x1ac25b:0xce},_0x1a0790={_0x169f02:0xcd,_0x253b8c:0xd5},_0x34a890={_0x35f196:0xef},_0x31ebee=_0x2d49fc;let _0x5d2033,_0xd76e1e,_0x337010,_0x412947;function _0x383597(_0x524751){const _0x4cec40=_0x42fa;if(!Array[_0x4cec40(_0x34a890._0x35f196)](_0x524751))return;const _0x169753=_0x524751[0x0]||0x0,_0x425f0b=_0x524751[0x1]||0x0;_0x169753!==0x0&&_0x425f0b!==0x0&&(_0x5d2033===undefined?(_0x5d2033=_0x169753,_0xd76e1e=_0x169753,_0x337010=_0x425f0b,_0x412947=_0x425f0b):(_0x5d2033=Math['min'](_0x5d2033,_0x169753),_0xd76e1e=Math[_0x4cec40(0x102)](_0xd76e1e,_0x169753),_0x337010=Math['min'](_0x337010,_0x425f0b),_0x412947=Math['max'](_0x412947,_0x425f0b)));}const _0x2384e7=this['options'][_0x31ebee(_0x42b191._0x51fbe9)];_0x2384e7&&_0x2384e7['forEach'](_0x31dcc5=>{const _0x53bc94=_0x31ebee;_0x31dcc5['data']&&_0x31dcc5['data'][_0x53bc94(0xd5)](_0xd651d=>{const _0x119701=_0x53bc94;if(_0xd651d['value'])_0x383597(_0xd651d[_0x119701(0xde)]);else _0xd651d['coords']&&_0xd651d[_0x119701(_0x1a0790._0x169f02)][_0x119701(_0x1a0790._0x253b8c)](_0x17d65d=>{_0x383597(_0x17d65d);});});});if(_0x5d2033===0x0&&_0x337010===0x0&&_0xd76e1e===0x0&&_0x412947===0x0)return null;return _0x1d2579!==null&&_0x1d2579!==void 0x0&&_0x1d2579[_0x31ebee(_0x42b191._0x9cb504)]?{'xmin':_0x5d2033,'xmax':_0xd76e1e,'ymin':_0x337010,'ymax':_0x412947}:Cesium['Rectangle'][_0x31ebee(_0x42b191._0x1ac25b)](_0x5d2033,_0x337010,_0xd76e1e,_0x412947);}['on'](_0x5ae525,_0x51f3ae,_0x4b96ed){const _0x158e1a={_0x49868b:0xe1},_0x1ea589=_0x2d49fc;return this[_0x1ea589(_0x158e1a._0x49868b)]['on'](_0x5ae525,_0x51f3ae,_0x4b96ed||this),this;}['onByQuery'](_0x1eed71,_0x3f5cb7,_0xc374ad,_0x2e563f){return this['_echartsInstance']['on'](_0x1eed71,_0x3f5cb7,_0xc374ad,_0x2e563f||this),this;}['off'](_0x5328dc,_0xb139af,_0x121cc5){const _0x8eb4a5={_0x37a750:0xe1},_0x1110e1=_0x2d49fc;return this[_0x1110e1(_0x8eb4a5._0x37a750)]['off'](_0x5328dc,_0xb139af,_0x121cc5||this),this;}}mars3d__namespace['LayerUtil'][_0x2d49fc(0xea)]('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)[_0x2d49fc(0xd5)](function(_0x2f7aec){const _0x4058f4=_0x2d49fc;if(_0x2f7aec!=='default'&&!exports[_0x4058f4(0xff)](_0x2f7aec))Object[_0x4058f4(0xee)](exports,_0x2f7aec,{'enumerable':!![],'get':function(){return echarts[_0x2f7aec];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
