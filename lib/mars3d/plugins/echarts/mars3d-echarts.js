/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.5.12
 * 编译日期：2023-06-19 10:11:05
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x1b2592=_0x3e8c;(function(_0x52eef3,_0x52d5c5){const _0x87e614={_0x13be8d:0x14f,_0x4ffe05:0x160,_0x476b60:0x136,_0x3f31ed:0x168,_0x1b601a:0x162},_0x4ac101=_0x3e8c,_0x5761a0=_0x52eef3();while(!![]){try{const _0x248312=parseInt(_0x4ac101(_0x87e614._0x13be8d))/0x1*(parseInt(_0x4ac101(0x16b))/0x2)+parseInt(_0x4ac101(_0x87e614._0x4ffe05))/0x3+-parseInt(_0x4ac101(_0x87e614._0x476b60))/0x4*(parseInt(_0x4ac101(_0x87e614._0x3f31ed))/0x5)+parseInt(_0x4ac101(0x16c))/0x6+-parseInt(_0x4ac101(0x147))/0x7*(parseInt(_0x4ac101(0x131))/0x8)+parseInt(_0x4ac101(0x13a))/0x9+parseInt(_0x4ac101(_0x87e614._0x1b601a))/0xa;if(_0x248312===_0x52d5c5)break;else _0x5761a0['push'](_0x5761a0['shift']());}catch(_0x20c77e){_0x5761a0['push'](_0x5761a0['shift']());}}}(_0x217a,0x9b217));function _interopNamespace(_0x35f2e6){const _0x200157={_0x443716:0x146,_0x5de980:0x133},_0x4347d2=_0x3e8c;if(_0x35f2e6&&_0x35f2e6['__esModule'])return _0x35f2e6;var _0x26d4f0=Object[_0x4347d2(_0x200157._0x443716)](null);return _0x35f2e6&&Object[_0x4347d2(0x15d)](_0x35f2e6)[_0x4347d2(_0x200157._0x5de980)](function(_0x4cec20){if(_0x4cec20!=='default'){var _0x581cb=Object['getOwnPropertyDescriptor'](_0x35f2e6,_0x4cec20);Object['defineProperty'](_0x26d4f0,_0x4cec20,_0x581cb['get']?_0x581cb:{'enumerable':!![],'get':function(){return _0x35f2e6[_0x4cec20];}});}}),_0x26d4f0[_0x4347d2(0x156)]=_0x35f2e6,_0x26d4f0;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);function _0x217a(){const _0x1757e8=['_removedHook','width','eachComponent','create','322FSmqcs','camera','clampToGround','coords','series','mars3dMap','_pointerEvents','container','299091vdJfMM','echartsDepthTest','value','getViewRect','defineProperty','scene','hasOwnProperty','default','SCENE3D','eachSeries','setEchartsOption','left','registerAction','getHeight','keys','height','_mars3d_scene','1267623LAOUYO','DomUtil','1339660mgBesi','style','_map','0px','extendComponentModel','absolute','4960dqgvJR','pointerEvents','matrix','6lyBXwq','2440560UNxdSP','请引入\x20echarts\x20库\x20','coordinateSystem','mars3dMapRoam','echarts','postRender','off','max','ecInstance','onByQuery','Cartesian3','_mapOffset','58768FtjdVz','EchartsLayer','forEach','options','_echartsInstance','3608lYZCNw','init','scheduler','globe','68175fFXnht','_echartsContainer','resize','setMapOffset','SceneMode','_api','layer','depthTest','min'];_0x217a=function(){return _0x1757e8;};return _0x217a();}const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x52db53,_0x35e934){const _0x49d6e6=_0x3e8c;this['_mars3d_scene']=_0x52db53,this['dimensions']=['lng','lat'],this['_mapOffset']=[0x0,0x0],this[_0x49d6e6(0x13f)]=_0x35e934;}[_0x1b2592(0x13d)](_0x170ae1){this['_mapOffset']=_0x170ae1;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0x50daf6){const _0x3eeb3d={_0x58f48c:0x15f,_0x2cec95:0x139,_0x3102d6:0x15c,_0x5887d9:0x176,_0x16c0af:0x13e,_0xa01987:0x157},_0x14ed3d=_0x1b2592,_0x2ad452=this[_0x14ed3d(_0x3eeb3d._0x58f48c)],_0x5efc9c=[NaN,NaN];let _0x160deb=_0x2ad452['echartsFixedHeight'];_0x2ad452['echartsAutoHeight']&&(_0x160deb=_0x2ad452[_0x14ed3d(_0x3eeb3d._0x2cec95)][_0x14ed3d(_0x3eeb3d._0x3102d6)](Cesium$1['Cartographic']['fromDegrees'](_0x50daf6[0x0],_0x50daf6[0x1])));const _0x4bf5ac=Cesium$1[_0x14ed3d(_0x3eeb3d._0x5887d9)]['fromDegrees'](_0x50daf6[0x0],_0x50daf6[0x1],_0x160deb);if(!_0x4bf5ac)return _0x5efc9c;const _0x40c2d2=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x2ad452,_0x4bf5ac);if(!_0x40c2d2)return _0x5efc9c;if(_0x2ad452['echartsDepthTest']&&_0x2ad452['mode']===Cesium$1[_0x14ed3d(_0x3eeb3d._0x16c0af)][_0x14ed3d(_0x3eeb3d._0xa01987)]){const _0x26579b=new Cesium$1['EllipsoidalOccluder'](_0x2ad452['globe']['ellipsoid'],_0x2ad452[_0x14ed3d(0x148)]['positionWC']),_0x3181f6=_0x26579b['isPointVisible'](_0x4bf5ac);if(!_0x3181f6)return _0x5efc9c;}return[_0x40c2d2['x']-this[_0x14ed3d(0x177)][0x0],_0x40c2d2['y']-this['_mapOffset'][0x1]];}[_0x1b2592(0x152)](){const _0x280a0f=_0x1b2592,_0x85cff9=this[_0x280a0f(0x13f)];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x85cff9['getWidth'](),_0x85cff9[_0x280a0f(0x15c)]());}['getRoamTransform'](){const _0x5f3568={_0xef180e:0x16a,_0x3452e6:0x146},_0x472d58=_0x1b2592;return echarts__namespace[_0x472d58(_0x5f3568._0xef180e)][_0x472d58(_0x5f3568._0x3452e6)]();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x3ff511,_0x536662){const _0x45e38c={_0x76c90c:0x158},_0xd8e08c={_0x54fbef:0x16e},_0x410ad9={_0x4b151c:0x16e},_0x166044=_0x1b2592;let _0x2d453f;const _0x4ce434=_0x3ff511[_0x166044(0x138)][_0x166044(0x174)]['_mars3d_scene'];_0x3ff511[_0x166044(0x145)]('mars3dMap',function(_0x7d50c5){const _0x14a37e=_0x166044,_0xf14cad=_0x536662['getZr']()['painter'];if(!_0xf14cad)return;!_0x2d453f&&(_0x2d453f=new CompositeCoordinateSystem(_0x4ce434,_0x536662)),_0x7d50c5[_0x14a37e(_0x410ad9._0x4b151c)]=_0x2d453f,_0x2d453f['setMapOffset'](_0x7d50c5['__mapOffset']||[0x0,0x0]);}),_0x3ff511[_0x166044(_0x45e38c._0x76c90c)](function(_0x2e6415){const _0x23517f=_0x166044;_0x2e6415['get']('coordinateSystem')==='mars3dMap'&&(!_0x2d453f&&(_0x2d453f=new CompositeCoordinateSystem(_0x4ce434,_0x536662)),_0x2e6415[_0x23517f(_0xd8e08c._0x54fbef)]=_0x2d453f);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace[_0x1b2592(0x15b)]({'type':_0x1b2592(0x16f),'event':_0x1b2592(0x16f),'update':'updateLayout'},function(_0x4f99c6,_0x4c09e0){}),echarts__namespace[_0x1b2592(0x166)]({'type':_0x1b2592(0x14c),'getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x3bec7c,_0x5c92f3){const _0x212385={_0x21aa64:0x154},_0x68a867=_0x1b2592;this['api']=_0x5c92f3,this[_0x68a867(_0x212385._0x21aa64)]=_0x3bec7c['scheduler']['ecInstance'][_0x68a867(0x15f)],this[_0x68a867(0x154)][_0x68a867(0x171)]['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x4a7d5f,_0x570fae){const _0x16feb7={_0x3b4bb3:0x16f},_0x1b41c8=_0x1b2592;this['api']['dispatchAction']({'type':_0x1b41c8(_0x16feb7._0x3b4bb3)});},'render':function(_0x24d8de,_0x4699e0,_0x172f07){},'dispose':function(_0x45ad95){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error(_0x1b2592(0x16d));function _0x3e8c(_0x4b224b,_0xcbeb88){const _0x217a43=_0x217a();return _0x3e8c=function(_0x3e8cf3,_0x2827df){_0x3e8cf3=_0x3e8cf3-0x131;let _0x290074=_0x217a43[_0x3e8cf3];return _0x290074;},_0x3e8c(_0x4b224b,_0xcbeb88);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x470f99={}){const _0x50e6d7={_0x48de7c:0x14d},_0x2f9f48=_0x1b2592;super(_0x470f99),this[_0x2f9f48(_0x50e6d7._0x48de7c)]=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x472917){const _0x19d876={_0x26ac01:0x169,_0x366fe2:0x13b},_0x1acca4=_0x1b2592;this['_pointerEvents']=_0x472917,this['_echartsContainer']&&(_0x472917?this[_0x1acca4(0x13b)][_0x1acca4(0x163)][_0x1acca4(_0x19d876._0x26ac01)]='all':this[_0x1acca4(_0x19d876._0x366fe2)]['style']['pointerEvents']='none');}['_setOptionsHook'](_0xaebd6c,_0x52c6f4){this['setEchartsOption'](_0xaebd6c);}['_showHook'](_0xe5f96a){_0xe5f96a?this['_echartsContainer']['style']['visibility']='visible':this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x160d8d={_0x4a99f1:0x141,_0x309a04:0x154,_0x4f50e1:0x149,_0x119c72:0x134},_0xb4e933=_0x1b2592;this['_map'][_0xb4e933(0x154)][_0xb4e933(0x150)]=this['options'][_0xb4e933(_0x160d8d._0x4a99f1)]??!![],this[_0xb4e933(0x164)][_0xb4e933(_0x160d8d._0x309a04)]['echartsAutoHeight']=this[_0xb4e933(0x134)][_0xb4e933(_0x160d8d._0x4f50e1)]??![],this[_0xb4e933(0x164)]['scene']['echartsFixedHeight']=this[_0xb4e933(_0x160d8d._0x119c72)]['fixedHeight']??0x0;}['_addedHook'](){const _0x13ac81=_0x1b2592;this['_echartsContainer']=this['_createChartOverlay'](),this[_0x13ac81(0x135)]=echarts__namespace[_0x13ac81(0x137)](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this[_0x13ac81(0x164)]['scene'],this['setEchartsOption'](this[_0x13ac81(0x134)]);}[_0x1b2592(0x143)](){const _0x4c01be={_0x45d462:0x164},_0x156a88=_0x1b2592;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this[_0x156a88(_0x4c01be._0x45d462)]['container']['removeChild'](this[_0x156a88(0x13b)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x2678bd={_0x25d498:0x161,_0x124b9b:0x14e,_0x15c75a:0x167,_0x5f072e:0x163,_0x4ac466:0x165,_0x2758ad:0x154},_0x23b828=_0x1b2592,_0x294926=mars3d__namespace[_0x23b828(_0x2678bd._0x25d498)]['create']('div','mars3d-echarts',this['_map'][_0x23b828(_0x2678bd._0x124b9b)]);return _0x294926['id']=this['id'],_0x294926['style']['position']=_0x23b828(_0x2678bd._0x15c75a),_0x294926[_0x23b828(_0x2678bd._0x5f072e)]['top']=_0x23b828(_0x2678bd._0x4ac466),_0x294926['style'][_0x23b828(0x15a)]=_0x23b828(0x165),_0x294926['style'][_0x23b828(0x144)]=this['_map'][_0x23b828(_0x2678bd._0x2758ad)]['canvas']['clientWidth']+'px',_0x294926['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',_0x294926[_0x23b828(_0x2678bd._0x5f072e)][_0x23b828(0x169)]=this['_pointerEvents']?'all':'none',_0x294926['style']['zIndex']=this['options']['zIndex']??0x9,_0x294926;}['resize'](){const _0x504325={_0x3e1ad5:0x13b,_0x3684da:0x15e,_0xd8cacb:0x13c},_0x408365=_0x1b2592;if(!this['_echartsInstance'])return;this['_echartsContainer']['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this[_0x408365(_0x504325._0x3e1ad5)]['style'][_0x408365(_0x504325._0x3684da)]=this['_map']['scene']['canvas']['clientHeight']+'px',this['_echartsInstance'][_0x408365(_0x504325._0xd8cacb)]();}[_0x1b2592(0x159)](_0x5319d6,_0x21f90e,_0xddac11){const _0x57987f={_0x2dc9a0:0x14c},_0x2dc9b4=_0x1b2592;this['_echartsInstance']&&(_0x5319d6[_0x2dc9b4(_0x57987f._0x2dc9a0)]=_0x5319d6['mars3dMap']||{},this['_echartsInstance']['setOption'](_0x5319d6,_0x21f90e,_0xddac11));}['getRectangle'](_0x1bbefd){const _0x6213b5={_0x5ade27:0x14b,_0x286044:0x133},_0x531f87=_0x1b2592;let _0xc1e074,_0x579fb4,_0xd3d00a,_0x29f371;function _0x4861a8(_0x3c457f){const _0x1b2dc2=_0x3e8c;if(!Array['isArray'](_0x3c457f))return;const _0x302db6=_0x3c457f[0x0]||0x0,_0x2955e3=_0x3c457f[0x1]||0x0;_0x302db6!==0x0&&_0x2955e3!==0x0&&(_0xc1e074===undefined?(_0xc1e074=_0x302db6,_0x579fb4=_0x302db6,_0xd3d00a=_0x2955e3,_0x29f371=_0x2955e3):(_0xc1e074=Math['min'](_0xc1e074,_0x302db6),_0x579fb4=Math['max'](_0x579fb4,_0x302db6),_0xd3d00a=Math[_0x1b2dc2(0x142)](_0xd3d00a,_0x2955e3),_0x29f371=Math[_0x1b2dc2(0x173)](_0x29f371,_0x2955e3)));}const _0x485d3e=this['options'][_0x531f87(_0x6213b5._0x5ade27)];_0x485d3e&&_0x485d3e[_0x531f87(_0x6213b5._0x286044)](_0x4cd87b=>{const _0x5bf82b={_0x202323:0x151,_0x48a92a:0x14a};_0x4cd87b['data']&&_0x4cd87b['data']['forEach'](_0x2259b2=>{const _0x2bca5a=_0x3e8c;if(_0x2259b2[_0x2bca5a(_0x5bf82b._0x202323)])_0x4861a8(_0x2259b2[_0x2bca5a(_0x5bf82b._0x202323)]);else _0x2259b2[_0x2bca5a(_0x5bf82b._0x48a92a)]&&_0x2259b2[_0x2bca5a(0x14a)][_0x2bca5a(0x133)](_0xd05d73=>{_0x4861a8(_0xd05d73);});});});if(_0xc1e074===0x0&&_0xd3d00a===0x0&&_0x579fb4===0x0&&_0x29f371===0x0)return null;return _0x1bbefd!==null&&_0x1bbefd!==void 0x0&&_0x1bbefd['isFormat']?{'xmin':_0xc1e074,'xmax':_0x579fb4,'ymin':_0xd3d00a,'ymax':_0x29f371}:Cesium['Rectangle']['fromDegrees'](_0xc1e074,_0xd3d00a,_0x579fb4,_0x29f371);}['on'](_0x1687a5,_0x13ac27,_0x68bae8){return this['_echartsInstance']['on'](_0x1687a5,_0x13ac27,_0x68bae8||this),this;}[_0x1b2592(0x175)](_0x3b772d,_0x8fd648,_0x1c9e3e,_0x1173ab){return this['_echartsInstance']['on'](_0x3b772d,_0x8fd648,_0x1c9e3e,_0x1173ab||this),this;}[_0x1b2592(0x172)](_0x5ac1cb,_0x2a23fa,_0x42544e){const _0x4192be={_0x4eea16:0x135},_0x230f10=_0x1b2592;return this[_0x230f10(_0x4192be._0x4eea16)]['off'](_0x5ac1cb,_0x2a23fa,_0x42544e||this),this;}}mars3d__namespace['LayerUtil']['register'](_0x1b2592(0x170),EchartsLayer),mars3d__namespace[_0x1b2592(0x140)]['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x1b2592(0x132)]=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x17524b){const _0x36bcc7={_0xfcc238:0x156},_0x458388=_0x1b2592;if(_0x17524b!==_0x458388(_0x36bcc7._0xfcc238)&&!exports[_0x458388(0x155)](_0x17524b))Object['defineProperty'](exports,_0x17524b,{'enumerable':!![],'get':function(){return echarts[_0x17524b];}});}),Object[_0x1b2592(0x153)](exports,'__esModule',{'value':!![]});
}));
