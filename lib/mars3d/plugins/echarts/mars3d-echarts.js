/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.1
 * 编译日期：2023-08-14 21:33:27
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x27f277=_0x4917;(function(_0x113323,_0x38a2f2){const _0x3547b4={_0xf6fd64:0x113,_0x15c79a:0xfd,_0x93f796:0xfc,_0x59e5d7:0x102,_0x5ad0ab:0xfb},_0x472750=_0x4917,_0x482cfe=_0x113323();while(!![]){try{const _0x3b834a=-parseInt(_0x472750(0xe8))/0x1+parseInt(_0x472750(_0x3547b4._0xf6fd64))/0x2+parseInt(_0x472750(_0x3547b4._0x15c79a))/0x3+-parseInt(_0x472750(_0x3547b4._0x93f796))/0x4*(-parseInt(_0x472750(0xee))/0x5)+parseInt(_0x472750(0x103))/0x6*(parseInt(_0x472750(_0x3547b4._0x59e5d7))/0x7)+-parseInt(_0x472750(_0x3547b4._0x5ad0ab))/0x8*(-parseInt(_0x472750(0xe7))/0x9)+-parseInt(_0x472750(0xe9))/0xa;if(_0x3b834a===_0x38a2f2)break;else _0x482cfe['push'](_0x482cfe['shift']());}catch(_0x5b1123){_0x482cfe['push'](_0x482cfe['shift']());}}}(_0x2e29,0xe6911));function _interopNamespace(_0x5bd3cd){const _0x5b0106={_0xe21fac:0x109},_0x6c940a=_0x4917;if(_0x5bd3cd&&_0x5bd3cd['__esModule'])return _0x5bd3cd;var _0xdd12eb=Object['create'](null);return _0x5bd3cd&&Object['keys'](_0x5bd3cd)[_0x6c940a(_0x5b0106._0xe21fac)](function(_0x36df04){if(_0x36df04!=='default'){var _0x31c809=Object['getOwnPropertyDescriptor'](_0x5bd3cd,_0x36df04);Object['defineProperty'](_0xdd12eb,_0x36df04,_0x31c809['get']?_0x31c809:{'enumerable':!![],'get':function(){return _0x5bd3cd[_0x36df04];}});}}),_0xdd12eb[_0x6c940a(0x10b)]=_0x5bd3cd,_0xdd12eb;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x114223,_0x2fde74){const _0x213c12={_0x5a8ab6:0x10c},_0x44e955=_0x4917;this['_mars3d_scene']=_0x114223,this['dimensions']=['lng','lat'],this['_mapOffset']=[0x0,0x0],this[_0x44e955(_0x213c12._0x5a8ab6)]=_0x2fde74;}['setMapOffset'](_0x13c028){const _0x2884df={_0x4d0b02:0x11a},_0x4ff2c7=_0x4917;this[_0x4ff2c7(_0x2884df._0x4d0b02)]=_0x13c028;}['getBMap'](){const _0x24070a=_0x4917;return this[_0x24070a(0x10e)];}[_0x27f277(0x11c)](_0x49f60b){const _0x37f01a={_0x11425b:0x117,_0x39b9c5:0x11e,_0x3305e1:0x114},_0xfc8fd2=_0x27f277,_0x29fd22=this['_mars3d_scene'],_0x4ec62c=[NaN,NaN];let _0x2545e1=_0x29fd22[_0xfc8fd2(_0x37f01a._0x11425b)];_0x29fd22['echartsAutoHeight']&&(_0x2545e1=_0x29fd22['globe'][_0xfc8fd2(_0x37f01a._0x39b9c5)](Cesium$1['Cartographic']['fromDegrees'](_0x49f60b[0x0],_0x49f60b[0x1])));const _0x3f93a7=Cesium$1['Cartesian3']['fromDegrees'](_0x49f60b[0x0],_0x49f60b[0x1],_0x2545e1);if(!_0x3f93a7)return _0x4ec62c;const _0xf5ac4a=Cesium$1[_0xfc8fd2(_0x37f01a._0x3305e1)]['wgs84ToWindowCoordinates'](_0x29fd22,_0x3f93a7);if(!_0xf5ac4a)return _0x4ec62c;if(_0x29fd22[_0xfc8fd2(0xea)]&&_0x29fd22['mode']===Cesium$1['SceneMode'][_0xfc8fd2(0xf6)]){const _0x12f441=new Cesium$1['EllipsoidalOccluder'](_0x29fd22['globe'][_0xfc8fd2(0xfa)],_0x29fd22['camera']['positionWC']),_0x19a644=_0x12f441['isPointVisible'](_0x3f93a7);if(!_0x19a644)return _0x4ec62c;}return[_0xf5ac4a['x']-this['_mapOffset'][0x0],_0xf5ac4a['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x129f74=_0x27f277,_0x11fd6c=this[_0x129f74(0x10c)];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x11fd6c['getWidth'](),_0x11fd6c[_0x129f74(0x11e)]());}[_0x27f277(0xf8)](){const _0x4e2685={_0x1a2f62:0xff},_0x55962d=_0x27f277;return echarts__namespace[_0x55962d(_0x4e2685._0x1a2f62)][_0x55962d(0x11d)]();}}function _0x4917(_0x5c9916,_0x116c0a){const _0x2e29f6=_0x2e29();return _0x4917=function(_0x491755,_0xee0e22){_0x491755=_0x491755-0xe6;let _0x4f7b42=_0x2e29f6[_0x491755];return _0x4f7b42;},_0x4917(_0x5c9916,_0x116c0a);}CompositeCoordinateSystem[_0x27f277(0xef)]=['lng','lat'],CompositeCoordinateSystem[_0x27f277(0x11d)]=function(_0xbd4965,_0x1e2974){const _0x5d64cb={_0x2759f3:0xe6},_0x2e690f=_0x27f277;let _0x1829c6;const _0x2e40c5=_0xbd4965['scheduler']['ecInstance']['_mars3d_scene'];_0xbd4965['eachComponent'](_0x2e690f(_0x5d64cb._0x2759f3),function(_0x3f433d){const _0x218ca2=_0x2e690f,_0x2cc82c=_0x1e2974['getZr']()['painter'];if(!_0x2cc82c)return;!_0x1829c6&&(_0x1829c6=new CompositeCoordinateSystem(_0x2e40c5,_0x1e2974)),_0x3f433d[_0x218ca2(0x10a)]=_0x1829c6,_0x1829c6['setMapOffset'](_0x3f433d['__mapOffset']||[0x0,0x0]);}),_0xbd4965['eachSeries'](function(_0x3198ab){_0x3198ab['get']('coordinateSystem')==='mars3dMap'&&(!_0x1829c6&&(_0x1829c6=new CompositeCoordinateSystem(_0x2e40c5,_0x1e2974)),_0x3198ab['coordinateSystem']=_0x1829c6);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace[_0x27f277(0xf9)])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x5f54db,_0x37c72a){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':_0x27f277(0xe6),'init':function(_0x2d38d9,_0x7e7e6f){const _0x2ba532={_0x255f86:0x10e},_0x1debe9=_0x27f277;this['api']=_0x7e7e6f,this['scene']=_0x2d38d9['scheduler']['ecInstance'][_0x1debe9(_0x2ba532._0x255f86)],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x3e1f80,_0x49d6c0){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x384009,_0x30ccd5,_0x5b9280){},'dispose':function(_0x3d1266){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];function _0x2e29(){const _0x4bea66=['SceneTransforms','_pointerEvents','hidden','echartsFixedHeight','_echartsInstance','Rectangle','_mapOffset','container','dataToPoint','create','getHeight','mars3dMap','9EZoBVG','892554LPouIY','23201800LwTZhn','echartsDepthTest','onByQuery','options','DomUtil','230ekTVUM','dimensions','setOption','LayerUtil','_echartsContainer','echarts','setEchartsOption','min','SCENE3D','EchartsLayer','getRoamTransform','init','ellipsoid','7492216yqEnbS','41036NTzkUD','3486861YSZoAS','none','matrix','style','max','7uRZglA','2679150UkcESk','coords','defineProperty','layer','_createChartOverlay','_map','forEach','coordinateSystem','default','_api','canvas','_mars3d_scene','scene','pointerEvents','clientHeight','__esModule','2279764xClDHi'];_0x2e29=function(){return _0x4bea66;};return _0x2e29();}class EchartsLayer extends BaseLayer{constructor(_0x3894df={}){const _0x953308=_0x27f277;super(_0x3894df),this['_pointerEvents']=this[_0x953308(0xec)]['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x27f277(0x110)](_0x301d90){const _0x31817c=_0x27f277;this[_0x31817c(0x115)]=_0x301d90,this['_echartsContainer']&&(_0x301d90?this['_echartsContainer']['style']['pointerEvents']='all':this['_echartsContainer']['style']['pointerEvents']='none');}['_setOptionsHook'](_0x21d7d2,_0x44be7b){const _0x37e820=_0x27f277;this[_0x37e820(0xf4)](_0x21d7d2);}['_showHook'](_0x534795){const _0x1b9d58={_0x575cd7:0x100},_0x4dcfc3=_0x27f277;_0x534795?this['_echartsContainer']['style']['visibility']='visible':this['_echartsContainer'][_0x4dcfc3(_0x1b9d58._0x575cd7)]['visibility']=_0x4dcfc3(0x116);}['_mountedHook'](){const _0x43f53a={_0x1e7d74:0x108,_0x39c1a4:0x10f,_0x146b3b:0xea,_0x110e21:0xec,_0x2a5c73:0x117},_0x22239c=_0x27f277;this[_0x22239c(_0x43f53a._0x1e7d74)][_0x22239c(_0x43f53a._0x39c1a4)][_0x22239c(_0x43f53a._0x146b3b)]=this['options']['depthTest']??!![],this[_0x22239c(0x108)]['scene']['echartsAutoHeight']=this[_0x22239c(_0x43f53a._0x110e21)]['clampToGround']??![],this[_0x22239c(0x108)]['scene'][_0x22239c(_0x43f53a._0x2a5c73)]=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x1e2ec2={_0x13b7d2:0x118,_0x46b92b:0x108},_0x417b76=_0x27f277;this['_echartsContainer']=this['_createChartOverlay'](),this[_0x417b76(0x118)]=echarts__namespace[_0x417b76(0xf9)](this[_0x417b76(0xf2)]),this[_0x417b76(_0x1e2ec2._0x13b7d2)]['_mars3d_scene']=this[_0x417b76(_0x1e2ec2._0x46b92b)]['scene'],this['setEchartsOption'](this[_0x417b76(0xec)]);}['_removedHook'](){const _0x5265e5={_0x43fd64:0x118,_0x465804:0x11b,_0x4028a0:0xf2},_0x58cfe9=_0x27f277;this['_echartsInstance']&&(this[_0x58cfe9(_0x5265e5._0x43fd64)]['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map'][_0x58cfe9(_0x5265e5._0x465804)]['removeChild'](this[_0x58cfe9(_0x5265e5._0x4028a0)]),delete this['_echartsContainer']);}[_0x27f277(0x107)](){const _0x21e272={_0x50ce58:0x11d,_0x3f3c6d:0x100,_0x50f64e:0x10f,_0x24d829:0x100},_0xd45191=_0x27f277,_0x4e07e7=mars3d__namespace[_0xd45191(0xed)][_0xd45191(_0x21e272._0x50ce58)]('div','mars3d-echarts',this['_map']['container']);return _0x4e07e7['id']=this['id'],_0x4e07e7['style']['position']='absolute',_0x4e07e7['style']['top']='0px',_0x4e07e7[_0xd45191(0x100)]['left']='0px',_0x4e07e7[_0xd45191(_0x21e272._0x3f3c6d)]['width']=this[_0xd45191(0x108)][_0xd45191(_0x21e272._0x50f64e)]['canvas']['clientWidth']+'px',_0x4e07e7['style']['height']=this['_map']['scene'][_0xd45191(0x10d)]['clientHeight']+'px',_0x4e07e7[_0xd45191(_0x21e272._0x24d829)]['pointerEvents']=this['_pointerEvents']?'all':_0xd45191(0xfe),_0x4e07e7['style']['zIndex']=this['options']['zIndex']??0x9,_0x4e07e7;}['resize'](){const _0x33586b={_0x3f5507:0x111},_0x49f787=_0x27f277;if(!this['_echartsInstance'])return;this['_echartsContainer']['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this['_echartsContainer']['style']['height']=this['_map'][_0x49f787(0x10f)]['canvas'][_0x49f787(_0x33586b._0x3f5507)]+'px',this['_echartsInstance']['resize']();}[_0x27f277(0xf4)](_0x1d0167,_0x51e5bd,_0x316308){const _0x3350e2=_0x27f277;this['_echartsInstance']&&(_0x1d0167['mars3dMap']=_0x1d0167[_0x3350e2(0xe6)]||{},this['_echartsInstance'][_0x3350e2(0xf0)](_0x1d0167,_0x51e5bd,_0x316308));}['getRectangle'](_0x29281b){const _0x4d99a4={_0x5c3792:0x119},_0x419e3a={_0x8acf86:0x104},_0x300f19={_0x1c4cf1:0x101},_0x598c31=_0x27f277;let _0x274009,_0xa45610,_0x469e71,_0x349c8e;function _0xec80d8(_0x1259d0){const _0x548f88=_0x4917;if(!Array['isArray'](_0x1259d0))return;const _0x1c9f43=_0x1259d0[0x0]||0x0,_0x22ef5a=_0x1259d0[0x1]||0x0;_0x1c9f43!==0x0&&_0x22ef5a!==0x0&&(_0x274009===undefined?(_0x274009=_0x1c9f43,_0xa45610=_0x1c9f43,_0x469e71=_0x22ef5a,_0x349c8e=_0x22ef5a):(_0x274009=Math['min'](_0x274009,_0x1c9f43),_0xa45610=Math[_0x548f88(_0x300f19._0x1c4cf1)](_0xa45610,_0x1c9f43),_0x469e71=Math[_0x548f88(0xf5)](_0x469e71,_0x22ef5a),_0x349c8e=Math['max'](_0x349c8e,_0x22ef5a)));}const _0x1dfe6f=this['options']['series'];_0x1dfe6f&&_0x1dfe6f['forEach'](_0x364bfd=>{const _0x3f70e5=_0x4917;_0x364bfd['data']&&_0x364bfd['data'][_0x3f70e5(0x109)](_0x31ac56=>{const _0x2f4429=_0x3f70e5;if(_0x31ac56['value'])_0xec80d8(_0x31ac56['value']);else _0x31ac56[_0x2f4429(_0x419e3a._0x8acf86)]&&_0x31ac56['coords'][_0x2f4429(0x109)](_0x2b3e10=>{_0xec80d8(_0x2b3e10);});});});if(_0x274009===0x0&&_0x469e71===0x0&&_0xa45610===0x0&&_0x349c8e===0x0)return null;return _0x29281b!==null&&_0x29281b!==void 0x0&&_0x29281b['isFormat']?{'xmin':_0x274009,'xmax':_0xa45610,'ymin':_0x469e71,'ymax':_0x349c8e}:Cesium[_0x598c31(_0x4d99a4._0x5c3792)]['fromDegrees'](_0x274009,_0x469e71,_0xa45610,_0x349c8e);}['on'](_0x19142f,_0x47bd6b,_0x3cfafd){return this['_echartsInstance']['on'](_0x19142f,_0x47bd6b,_0x3cfafd||this),this;}[_0x27f277(0xeb)](_0x2f4f9e,_0x3cbb5a,_0x24ee63,_0x3810e6){const _0x172c1e=_0x27f277;return this[_0x172c1e(0x118)]['on'](_0x2f4f9e,_0x3cbb5a,_0x24ee63,_0x3810e6||this),this;}['off'](_0x11c6a5,_0x5de82d,_0x27f676){const _0x289ef2=_0x27f277;return this[_0x289ef2(0x118)]['off'](_0x11c6a5,_0x5de82d,_0x27f676||this),this;}}mars3d__namespace[_0x27f277(0xf1)]['register']('echarts',EchartsLayer),mars3d__namespace[_0x27f277(0x106)]['EchartsLayer']=EchartsLayer,mars3d__namespace[_0x27f277(0xf3)]=echarts__namespace,exports[_0x27f277(0xf7)]=EchartsLayer,Object['keys'](echarts)[_0x27f277(0x109)](function(_0x4574ee){const _0x4a8535=_0x27f277;if(_0x4574ee!=='default'&&!exports['hasOwnProperty'](_0x4574ee))Object[_0x4a8535(0x105)](exports,_0x4574ee,{'enumerable':!![],'get':function(){return echarts[_0x4574ee];}});}),Object[_0x27f277(0x105)](exports,_0x27f277(0x112),{'value':!![]});
}));
