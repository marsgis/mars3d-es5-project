/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.4
 * 编译日期：2024-02-20 12:25:26
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x49872c=_0x32d2;(function(_0x4a1ebb,_0x16b76a){const _0x2750ba={_0x4a039b:0x1c9,_0x139a58:0x1c7,_0x4bb061:0x1c5,_0x157009:0x1ff,_0x4e6969:0x1d1},_0x297b77=_0x32d2,_0x57ee2e=_0x4a1ebb();while(!![]){try{const _0x5b7425=-parseInt(_0x297b77(_0x2750ba._0x4a039b))/0x1*(-parseInt(_0x297b77(0x1fe))/0x2)+parseInt(_0x297b77(0x1cc))/0x3*(parseInt(_0x297b77(_0x2750ba._0x139a58))/0x4)+-parseInt(_0x297b77(0x1e2))/0x5*(parseInt(_0x297b77(0x1cb))/0x6)+parseInt(_0x297b77(0x1df))/0x7*(-parseInt(_0x297b77(0x1f1))/0x8)+parseInt(_0x297b77(_0x2750ba._0x4bb061))/0x9+-parseInt(_0x297b77(_0x2750ba._0x157009))/0xa+parseInt(_0x297b77(_0x2750ba._0x4e6969))/0xb*(parseInt(_0x297b77(0x1cd))/0xc);if(_0x5b7425===_0x16b76a)break;else _0x57ee2e['push'](_0x57ee2e['shift']());}catch(_0x25f7cd){_0x57ee2e['push'](_0x57ee2e['shift']());}}}(_0x3273,0x4b3be));function _interopNamespace(_0xafa732){const _0x1ccc7c={_0x7ea892:0x1f5},_0x4b1a3d=_0x32d2;if(_0xafa732&&_0xafa732['__esModule'])return _0xafa732;var _0x40a2b2=Object['create'](null);return _0xafa732&&Object[_0x4b1a3d(_0x1ccc7c._0x7ea892)](_0xafa732)['forEach'](function(_0x563265){if(_0x563265!=='default'){var _0x5aed1d=Object['getOwnPropertyDescriptor'](_0xafa732,_0x563265);Object['defineProperty'](_0x40a2b2,_0x563265,_0x5aed1d['get']?_0x5aed1d:{'enumerable':!![],'get':function(){return _0xafa732[_0x563265];}});}}),_0x40a2b2[_0x4b1a3d(0x208)]=_0xafa732,_0x40a2b2;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x11faf2,_0xa7b3bf){const _0x128548=_0x32d2;this['_mars3d_scene']=_0x11faf2,this[_0x128548(0x207)]=['lng',_0x128548(0x1dd)],this['_mapOffset']=[0x0,0x0],this['_api']=_0xa7b3bf;}[_0x49872c(0x1d0)](_0x429bb0){this['_mapOffset']=_0x429bb0;}['getBMap'](){const _0x56ac6a={_0x1212e8:0x1f2},_0x1e7363=_0x49872c;return this[_0x1e7363(_0x56ac6a._0x1212e8)];}['dataToPoint'](_0x279141){const _0x47e647={_0x3dc224:0x201,_0x3ada25:0x1cf},_0x150de0=_0x49872c,_0x28de1c=this[_0x150de0(0x1f2)],_0x3417fd=[NaN,NaN];let _0x375986=_0x28de1c['echartsFixedHeight'];_0x28de1c['echartsAutoHeight']&&(_0x375986=_0x28de1c[_0x150de0(0x1ea)](Cesium$1['Cartographic'][_0x150de0(0x1ed)](_0x279141[0x0],_0x279141[0x1])));const _0x2710aa=Cesium$1['Cartesian3']['fromDegrees'](_0x279141[0x0],_0x279141[0x1],_0x375986);if(!_0x2710aa)return _0x3417fd;const _0x55309a=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x28de1c,_0x2710aa);if(!_0x55309a)return _0x3417fd;if(_0x28de1c['echartsDepthTest']&&_0x28de1c[_0x150de0(0x1d5)]===Cesium$1['SceneMode'][_0x150de0(_0x47e647._0x3dc224)]){const _0x29c2ff=new Cesium$1['EllipsoidalOccluder'](_0x28de1c['globe']['ellipsoid'],_0x28de1c['camera'][_0x150de0(0x1ca)]),_0x30714c=_0x29c2ff['isPointVisible'](_0x2710aa);if(!_0x30714c)return _0x3417fd;}return[_0x55309a['x']-this['_mapOffset'][0x0],_0x55309a['y']-this[_0x150de0(_0x47e647._0x3ada25)][0x1]];}['getViewRect'](){const _0x2db61c=_0x49872c,_0xc24873=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0xc24873[_0x2db61c(0x1f7)](),_0xc24873['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=['lng',_0x49872c(0x1dd)],CompositeCoordinateSystem[_0x49872c(0x1eb)]=function(_0x3b7fa0,_0x4e5c79){let _0x3cfa76;const _0x162aa3=_0x3b7fa0['scheduler']['ecInstance']['_mars3d_scene'];_0x3b7fa0['eachComponent']('mars3dMap',function(_0x10b01f){const _0x1e265d=_0x32d2,_0x327cb3=_0x4e5c79['getZr']()[_0x1e265d(0x1f8)];if(!_0x327cb3)return;!_0x3cfa76&&(_0x3cfa76=new CompositeCoordinateSystem(_0x162aa3,_0x4e5c79)),_0x10b01f['coordinateSystem']=_0x3cfa76,_0x3cfa76['setMapOffset'](_0x10b01f['__mapOffset']||[0x0,0x0]);}),_0x3b7fa0['eachSeries'](function(_0x15a9a6){const _0x918787=_0x32d2;_0x15a9a6['get'](_0x918787(0x1f3))==='mars3dMap'&&(!_0x3cfa76&&(_0x3cfa76=new CompositeCoordinateSystem(_0x162aa3,_0x4e5c79)),_0x15a9a6['coordinateSystem']=_0x3cfa76);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace[_0x49872c(0x1db)]('mars3dMap',CompositeCoordinateSystem),echarts__namespace[_0x49872c(0x1ce)]({'type':_0x49872c(0x1c6),'event':'mars3dMapRoam','update':'updateLayout'},function(_0x3c4cde,_0x1079a0){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){const _0x55a452={_0x4f6fd8:0x1f2},_0x56b9c0=_0x49872c;return this[_0x56b9c0(_0x55a452._0x4f6fd8)];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':_0x49872c(0x200),'init':function(_0x163488,_0x1ff0db){const _0x25d836={_0x32bebb:0x1c4},_0x19ab44=_0x49872c;this['api']=_0x1ff0db,this['scene']=_0x163488['scheduler']['ecInstance']['_mars3d_scene'],this[_0x19ab44(0x20a)]['postRender'][_0x19ab44(_0x25d836._0x32bebb)](this['moveHandler'],this);},'moveHandler':function(_0xc0b861,_0x375a12){const _0x2d49aa={_0x222927:0x1f4,_0x140bfb:0x1d7},_0x2a0868=_0x49872c;this[_0x2a0868(_0x2d49aa._0x222927)][_0x2a0868(_0x2d49aa._0x140bfb)]({'type':_0x2a0868(0x1c6)});},'render':function(_0x11b5ed,_0x58bc5b,_0x36122d){},'dispose':function(_0x220cea){const _0x28c612={_0x32d3a9:0x1f9},_0x5d237d=_0x49872c;this['scene'][_0x5d237d(_0x28c612._0x32d3a9)][_0x5d237d(0x1d9)](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace[_0x49872c(0x203)],BaseLayer=mars3d__namespace[_0x49872c(0x1d6)][_0x49872c(0x1da)];class EchartsLayer extends BaseLayer{constructor(_0x4a26fe={}){const _0x459176=_0x49872c;super(_0x4a26fe),this['_pointerEvents']=this[_0x459176(0x1ee)]['pointerEvents'];}get[_0x49872c(0x1d6)](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x17b68a){const _0x1fc752={_0x189fc8:0x1de},_0x16f46c=_0x49872c;this[_0x16f46c(0x1e4)]=_0x17b68a,this['_echartsContainer']&&(_0x17b68a?this['_echartsContainer'][_0x16f46c(0x1fc)]['pointerEvents']='all':this[_0x16f46c(_0x1fc752._0x189fc8)]['style']['pointerEvents']='none');}['_setOptionsHook'](_0x1604ec,_0x8144df){const _0x1443b2=_0x49872c;this[_0x1443b2(0x1f6)](_0x1604ec);}[_0x49872c(0x1e0)](_0x473b28){const _0x4b420d=_0x49872c;_0x473b28?this['_echartsContainer'][_0x4b420d(0x1fc)]['visibility']=_0x4b420d(0x1e8):this['_echartsContainer'][_0x4b420d(0x1fc)][_0x4b420d(0x1e9)]='hidden';}['_mountedHook'](){const _0x925706={_0x476bcf:0x1d4,_0x54ceb7:0x1fa},_0x286ef1=_0x49872c;this['_map']['scene']['echartsDepthTest']=this[_0x286ef1(0x1ee)]['depthTest']??!![],this[_0x286ef1(0x1d8)]['scene']['echartsAutoHeight']=this[_0x286ef1(0x1ee)][_0x286ef1(_0x925706._0x476bcf)]??![],this['_map']['scene']['echartsFixedHeight']=this['options'][_0x286ef1(_0x925706._0x54ceb7)]??0x0;}[_0x49872c(0x1e7)](){const _0x3eeb65=_0x49872c;this['_echartsContainer']=this[_0x3eeb65(0x1c3)](),this['_echartsInstance']=echarts__namespace['init'](this[_0x3eeb65(0x1de)]),this['_echartsInstance'][_0x3eeb65(0x1f2)]=this['_map']['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x1965d5={_0x300006:0x1d2},_0x4a2216=_0x49872c;this['_echartsInstance']&&(this[_0x4a2216(0x1ef)][_0x4a2216(_0x1965d5._0x300006)](),this['_echartsInstance']['dispose'](),delete this[_0x4a2216(0x1ef)]),this[_0x4a2216(0x1de)]&&(this['_map']['container']['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x52b1ab={_0x581734:0x1eb,_0x1b656b:0x1fc,_0x3a03bd:0x20b,_0x2151dd:0x205},_0x8c031=_0x49872c,_0x192424=mars3d__namespace[_0x8c031(0x209)][_0x8c031(_0x52b1ab._0x581734)]('div','mars3d-echarts',this['_map']['container']);return _0x192424['id']=this['id'],_0x192424[_0x8c031(0x1fc)]['position']='absolute',_0x192424[_0x8c031(_0x52b1ab._0x1b656b)]['top']=_0x8c031(0x20c),_0x192424['style']['left']='0px',_0x192424['style'][_0x8c031(_0x52b1ab._0x3a03bd)]=this['_map']['scene']['canvas']['clientWidth']+'px',_0x192424['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',_0x192424[_0x8c031(0x1fc)]['pointerEvents']=this['_pointerEvents']?'all':_0x8c031(_0x52b1ab._0x2151dd),_0x192424[_0x8c031(0x1fc)]['zIndex']=this['options']['zIndex']??0x9,_0x192424;}['resize'](){const _0x413dd0={_0x4e27d7:0x1ef,_0x5bce9c:0x20b,_0x2e2e8c:0x1fc,_0x2c6420:0x1d8,_0x1c26e7:0x20a,_0x4fab0b:0x1dc},_0x481339=_0x49872c;if(!this[_0x481339(_0x413dd0._0x4e27d7)])return;this['_echartsContainer'][_0x481339(0x1fc)][_0x481339(_0x413dd0._0x5bce9c)]=this['_map'][_0x481339(0x20a)]['canvas']['clientWidth']+'px',this['_echartsContainer'][_0x481339(_0x413dd0._0x2e2e8c)][_0x481339(0x1e3)]=this[_0x481339(_0x413dd0._0x2c6420)][_0x481339(_0x413dd0._0x1c26e7)]['canvas'][_0x481339(_0x413dd0._0x4fab0b)]+'px',this['_echartsInstance'][_0x481339(0x206)]();}['setEchartsOption'](_0x10a15c,_0x10e117,_0x3a6032){const _0x2a0750={_0x131ced:0x1c8,_0x2102b3:0x1fd},_0x335cce=_0x49872c;this['_echartsInstance']&&(_0x10a15c={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x10a15c,{'onlySimpleType':!![]})},delete _0x10a15c[_0x335cce(_0x2a0750._0x131ced)],this['_echartsInstance'][_0x335cce(_0x2a0750._0x2102b3)](_0x10a15c,_0x10e117,_0x3a6032));}[_0x49872c(0x1c2)](_0x3d4129){const _0x4992c6={_0x34c08f:0x1ee,_0x3036c6:0x1ed},_0x22c0cb={_0x207494:0x1f0},_0x3cf073={_0xdbdaaf:0x1e6},_0x5a81d6=_0x49872c;let _0x5263d7,_0x26e2d3,_0x4fa704,_0x347a54;function _0x5477b4(_0x242dae){if(!Array['isArray'](_0x242dae))return;const _0x1b084c=_0x242dae[0x0]||0x0,_0x105405=_0x242dae[0x1]||0x0;_0x1b084c!==0x0&&_0x105405!==0x0&&(_0x5263d7===undefined?(_0x5263d7=_0x1b084c,_0x26e2d3=_0x1b084c,_0x4fa704=_0x105405,_0x347a54=_0x105405):(_0x5263d7=Math['min'](_0x5263d7,_0x1b084c),_0x26e2d3=Math['max'](_0x26e2d3,_0x1b084c),_0x4fa704=Math['min'](_0x4fa704,_0x105405),_0x347a54=Math['max'](_0x347a54,_0x105405)));}const _0x45b5fb=this[_0x5a81d6(_0x4992c6._0x34c08f)]['series'];_0x45b5fb&&_0x45b5fb['forEach'](_0x298cd6=>{const _0x27efee=_0x5a81d6;_0x298cd6[_0x27efee(_0x22c0cb._0x207494)]&&_0x298cd6['data'][_0x27efee(0x204)](_0x575cc1=>{const _0x4c66a9=_0x27efee;if(_0x575cc1['value'])_0x5477b4(_0x575cc1[_0x4c66a9(0x202)]);else _0x575cc1['coords']&&_0x575cc1[_0x4c66a9(_0x3cf073._0xdbdaaf)]['forEach'](_0x15c39b=>{_0x5477b4(_0x15c39b);});});});if(_0x5263d7===0x0&&_0x4fa704===0x0&&_0x26e2d3===0x0&&_0x347a54===0x0)return null;return _0x3d4129!==null&&_0x3d4129!==void 0x0&&_0x3d4129['isFormat']?{'xmin':_0x5263d7,'xmax':_0x26e2d3,'ymin':_0x4fa704,'ymax':_0x347a54}:Cesium['Rectangle'][_0x5a81d6(_0x4992c6._0x3036c6)](_0x5263d7,_0x4fa704,_0x26e2d3,_0x347a54);}['on'](_0x1bc2e3,_0x372711,_0x617ca3){const _0x70199c={_0x263964:0x1ef},_0x4796e8=_0x49872c;return this[_0x4796e8(_0x70199c._0x263964)]['on'](_0x1bc2e3,_0x372711,_0x617ca3||this),this;}['onByQuery'](_0xb36fac,_0x801ff,_0x36e01c,_0x518ce7){return this['_echartsInstance']['on'](_0xb36fac,_0x801ff,_0x36e01c,_0x518ce7||this),this;}[_0x49872c(0x1e1)](_0x2bb699,_0x55226d,_0x531c61){const _0x38cf08=_0x49872c;return this['_echartsInstance'][_0x38cf08(0x1e1)](_0x2bb699,_0x55226d,_0x531c61||this),this;}}mars3d__namespace[_0x49872c(0x1ec)]['register']('echarts',EchartsLayer),mars3d__namespace['layer'][_0x49872c(0x1fb)]=EchartsLayer,mars3d__namespace[_0x49872c(0x1e5)]=echarts__namespace,exports[_0x49872c(0x1fb)]=EchartsLayer,Object['keys'](echarts)[_0x49872c(0x204)](function(_0x42abe4){const _0x1d3a92={_0x5814d5:0x208,_0x4fba85:0x1d3},_0x507933=_0x49872c;if(_0x42abe4!==_0x507933(_0x1d3a92._0x5814d5)&&!exports['hasOwnProperty'](_0x42abe4))Object[_0x507933(_0x1d3a92._0x4fba85)](exports,_0x42abe4,{'enumerable':!![],'get':function(){return echarts[_0x42abe4];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});function _0x32d2(_0x1daa06,_0x393ccf){const _0x327310=_0x3273();return _0x32d2=function(_0x32d259,_0x207a7c){_0x32d259=_0x32d259-0x1c2;let _0xdaa543=_0x327310[_0x32d259];return _0xdaa543;},_0x32d2(_0x1daa06,_0x393ccf);}function _0x3273(){const _0x4aaa9d=['height','_pointerEvents','echarts','coords','_addedHook','visible','visibility','getHeight','create','LayerUtil','fromDegrees','options','_echartsInstance','data','12592SAHOsA','_mars3d_scene','coordinateSystem','api','keys','setEchartsOption','getWidth','painter','postRender','fixedHeight','EchartsLayer','style','setOption','54XUiQFf','347440qhuDCE','mars3dMap','SCENE3D','value','Cesium','forEach','none','resize','dimensions','default','DomUtil','scene','width','0px','getRectangle','_createChartOverlay','addEventListener','3181212rTpoCn','mars3dMapRoam','8iVDGfc','eventParent','2529QLSKAp','positionWC','42cwIUkq','52755FHuEPZ','1068WjBgFy','registerAction','_mapOffset','setMapOffset','79794VhfTwL','clear','defineProperty','clampToGround','mode','layer','dispatchAction','_map','removeEventListener','BaseLayer','registerCoordinateSystem','clientHeight','lat','_echartsContainer','2702meGoJX','_showHook','off','108615xVIscL'];_0x3273=function(){return _0x4aaa9d;};return _0x3273();}
}));
