/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.2
 * 编译日期：2023-08-22 10:38:38
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x5c8dc2=_0xf322;(function(_0x2893b1,_0x5eac53){const _0x7ebf27={_0xd6b3c7:0xbf,_0x567706:0xbd,_0x2fddf3:0xb8,_0x4e58d6:0x9f},_0x1555b0=_0xf322,_0x5a7dd4=_0x2893b1();while(!![]){try{const _0x55cdd7=-parseInt(_0x1555b0(_0x7ebf27._0xd6b3c7))/0x1*(parseInt(_0x1555b0(0x8c))/0x2)+-parseInt(_0x1555b0(_0x7ebf27._0x567706))/0x3+parseInt(_0x1555b0(0xaa))/0x4*(parseInt(_0x1555b0(0xb9))/0x5)+parseInt(_0x1555b0(_0x7ebf27._0x2fddf3))/0x6+-parseInt(_0x1555b0(0xac))/0x7+-parseInt(_0x1555b0(_0x7ebf27._0x4e58d6))/0x8+parseInt(_0x1555b0(0xc3))/0x9;if(_0x55cdd7===_0x5eac53)break;else _0x5a7dd4['push'](_0x5a7dd4['shift']());}catch(_0x48ea43){_0x5a7dd4['push'](_0x5a7dd4['shift']());}}}(_0x5db4,0xb9135));function _0xf322(_0x36e29b,_0x46b524){const _0x5db485=_0x5db4();return _0xf322=function(_0xf32249,_0x3adaaa){_0xf32249=_0xf32249-0x86;let _0x50db23=_0x5db485[_0xf32249];return _0x50db23;},_0xf322(_0x36e29b,_0x46b524);}function _interopNamespace(_0x5b236f){const _0x2e43d1={_0x2d53c2:0x88},_0x3e0a97=_0xf322;if(_0x5b236f&&_0x5b236f['__esModule'])return _0x5b236f;var _0x269b9c=Object['create'](null);return _0x5b236f&&Object['keys'](_0x5b236f)['forEach'](function(_0x3fde75){const _0x211662=_0xf322;if(_0x3fde75!=='default'){var _0x405b24=Object[_0x211662(0x98)](_0x5b236f,_0x3fde75);Object['defineProperty'](_0x269b9c,_0x3fde75,_0x405b24['get']?_0x405b24:{'enumerable':!![],'get':function(){return _0x5b236f[_0x3fde75];}});}}),_0x269b9c[_0x3e0a97(_0x2e43d1._0x2d53c2)]=_0x5b236f,_0x269b9c;}function _0x5db4(){const _0x48f078=['left','addEventListener','extendComponentView','104OOKtXM','SceneTransforms','9444120UAypXT','scheduler','请引入\x20echarts\x20库\x20','onByQuery','EllipsoidalOccluder','fromDegrees','pointerEvents','echartsAutoHeight','forEach','container','lng','width','2730720quXdDc','3140gVUoXA','_map','style','echartsFixedHeight','2994636yHuzWM','init','734317xVtJGS','create','_api','setEchartsOption','42990435SlFcjr','value','layer','default','getViewRect','_echartsContainer','registerAction','2KDinFo','canvas','visible','options','_echartsInstance','height','getZr','_pointerEvents','scene','LayerUtil','mars3dMapRoam','eachComponent','getOwnPropertyDescriptor','keys','_mars3d_scene','0px','none','postRender','_mapOffset','11267240LMDHVC','get','wgs84ToWindowCoordinates','echartsDepthTest','_createChartOverlay','DomUtil','globe','clientHeight'];_0x5db4=function(){return _0x48f078;};return _0x5db4();}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x332256,_0x152414){const _0x58552e={_0x32e246:0xb6},_0x2decc1=_0xf322;this[_0x2decc1(0x9a)]=_0x332256,this['dimensions']=[_0x2decc1(_0x58552e._0x32e246),'lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x152414;}['setMapOffset'](_0x5f4bda){this['_mapOffset']=_0x5f4bda;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0x250d66){const _0x24f7cf={_0x336377:0xb3,_0x28e957:0xb1,_0x23286:0xb0,_0x50d233:0x9e},_0xd27fbc=_0xf322,_0x292979=this[_0xd27fbc(0x9a)],_0x1d951d=[NaN,NaN];let _0xc785ba=_0x292979[_0xd27fbc(0xbc)];_0x292979[_0xd27fbc(_0x24f7cf._0x336377)]&&(_0xc785ba=_0x292979[_0xd27fbc(0xa5)]['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x250d66[0x0],_0x250d66[0x1])));const _0x3f12de=Cesium$1['Cartesian3'][_0xd27fbc(_0x24f7cf._0x28e957)](_0x250d66[0x0],_0x250d66[0x1],_0xc785ba);if(!_0x3f12de)return _0x1d951d;const _0x4bb571=Cesium$1[_0xd27fbc(0xab)][_0xd27fbc(0xa1)](_0x292979,_0x3f12de);if(!_0x4bb571)return _0x1d951d;if(_0x292979[_0xd27fbc(0xa2)]&&_0x292979['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x343ff2=new Cesium$1[(_0xd27fbc(_0x24f7cf._0x23286))](_0x292979['globe']['ellipsoid'],_0x292979['camera']['positionWC']),_0x5ac3f5=_0x343ff2['isPointVisible'](_0x3f12de);if(!_0x5ac3f5)return _0x1d951d;}return[_0x4bb571['x']-this[_0xd27fbc(_0x24f7cf._0x50d233)][0x0],_0x4bb571['y']-this[_0xd27fbc(_0x24f7cf._0x50d233)][0x1]];}[_0x5c8dc2(0x89)](){const _0x4694bf=_0x5c8dc2,_0x28ff5d=this[_0x4694bf(0xc1)];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x28ff5d['getWidth'](),_0x28ff5d['getHeight']());}['getRoamTransform'](){const _0x1da94d=_0x5c8dc2;return echarts__namespace['matrix'][_0x1da94d(0xc0)]();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem[_0x5c8dc2(0xc0)]=function(_0x3cc49a,_0x3c54c6){const _0x4736b3={_0xde5599:0x9a},_0x307ebb=_0x5c8dc2;let _0x325949;const _0x5191b6=_0x3cc49a['scheduler']['ecInstance'][_0x307ebb(_0x4736b3._0xde5599)];_0x3cc49a[_0x307ebb(0x97)]('mars3dMap',function(_0x23929f){const _0x2a694e=_0x307ebb,_0x5e6faf=_0x3c54c6[_0x2a694e(0x92)]()['painter'];if(!_0x5e6faf)return;!_0x325949&&(_0x325949=new CompositeCoordinateSystem(_0x5191b6,_0x3c54c6)),_0x23929f['coordinateSystem']=_0x325949,_0x325949['setMapOffset'](_0x23929f['__mapOffset']||[0x0,0x0]);}),_0x3cc49a['eachSeries'](function(_0x420be4){const _0x176273=_0x307ebb;_0x420be4[_0x176273(0xa0)]('coordinateSystem')==='mars3dMap'&&(!_0x325949&&(_0x325949=new CompositeCoordinateSystem(_0x5191b6,_0x3c54c6)),_0x420be4['coordinateSystem']=_0x325949);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace[_0x5c8dc2(0x8b)]({'type':'mars3dMapRoam','event':_0x5c8dc2(0x96),'update':'updateLayout'},function(_0x233ecb,_0x81d898){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x5c8dc2(0xa9)]({'type':'mars3dMap','init':function(_0xd59641,_0x18d7be){const _0x22d64b={_0x4a8b3e:0x94,_0x49895b:0xa8},_0x1e738c=_0x5c8dc2;this['api']=_0x18d7be,this[_0x1e738c(_0x22d64b._0x4a8b3e)]=_0xd59641[_0x1e738c(0xad)]['ecInstance']['_mars3d_scene'],this['scene'][_0x1e738c(0x9d)][_0x1e738c(_0x22d64b._0x49895b)](this['moveHandler'],this);},'moveHandler':function(_0x3064f8,_0x5353e1){const _0x3f9ea4=_0x5c8dc2;this['api']['dispatchAction']({'type':_0x3f9ea4(0x96)});},'render':function(_0x1e891b,_0x1f67ee,_0x5297fb){},'dispose':function(_0x44d018){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error(_0x5c8dc2(0xae));const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x5b1a69={}){const _0x4788bc={_0x1b6e81:0x8f},_0x5cdcdb=_0x5c8dc2;super(_0x5b1a69),this['_pointerEvents']=this[_0x5cdcdb(_0x4788bc._0x1b6e81)]['pointerEvents'];}get['layer'](){const _0x373fbe=_0x5c8dc2;return this[_0x373fbe(0x90)];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x44b4d5){const _0x2440e5={_0x19af5a:0x9c},_0x3a9acf=_0x5c8dc2;this[_0x3a9acf(0x93)]=_0x44b4d5,this['_echartsContainer']&&(_0x44b4d5?this['_echartsContainer']['style'][_0x3a9acf(0xb2)]='all':this['_echartsContainer'][_0x3a9acf(0xbb)]['pointerEvents']=_0x3a9acf(_0x2440e5._0x19af5a));}['_setOptionsHook'](_0x4eca41,_0x5e2ddd){const _0x43a55d={_0x5ba5f5:0xc2},_0x56f945=_0x5c8dc2;this[_0x56f945(_0x43a55d._0x5ba5f5)](_0x4eca41);}['_showHook'](_0x5d395b){const _0x584c03={_0x24f64d:0x8a,_0x7d24e6:0x8e},_0x379e78=_0x5c8dc2;_0x5d395b?this[_0x379e78(_0x584c03._0x24f64d)]['style']['visibility']=_0x379e78(_0x584c03._0x7d24e6):this[_0x379e78(0x8a)]['style']['visibility']='hidden';}['_mountedHook'](){const _0xb37a40={_0x209ec1:0xa2},_0x59d1e9=_0x5c8dc2;this['_map'][_0x59d1e9(0x94)][_0x59d1e9(_0xb37a40._0x209ec1)]=this[_0x59d1e9(0x8f)]['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map'][_0x59d1e9(0x94)]['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x4705e2={_0x1fb951:0x8a,_0x1da6f7:0xa3,_0x3a77c7:0xbe,_0x1d70ef:0xba,_0x200bad:0x8f},_0x325207=_0x5c8dc2;this[_0x325207(_0x4705e2._0x1fb951)]=this[_0x325207(_0x4705e2._0x1da6f7)](),this['_echartsInstance']=echarts__namespace[_0x325207(_0x4705e2._0x3a77c7)](this[_0x325207(0x8a)]),this['_echartsInstance']['_mars3d_scene']=this[_0x325207(_0x4705e2._0x1d70ef)]['scene'],this['setEchartsOption'](this[_0x325207(_0x4705e2._0x200bad)]);}['_removedHook'](){const _0x3da411={_0x5906d4:0xb5,_0x16d462:0x8a},_0x2b808f=_0x5c8dc2;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this[_0x2b808f(0x90)]),this[_0x2b808f(0x8a)]&&(this[_0x2b808f(0xba)][_0x2b808f(_0x3da411._0x5906d4)]['removeChild'](this[_0x2b808f(_0x3da411._0x16d462)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x407f51={_0x3801ff:0xa4,_0x5e0cbc:0xba,_0x5110e0:0x9b,_0x39ca20:0xa7,_0x18578b:0xb7,_0x4591e2:0x94},_0x4c6df2=_0x5c8dc2,_0x4b17e5=mars3d__namespace[_0x4c6df2(_0x407f51._0x3801ff)]['create']('div','mars3d-echarts',this[_0x4c6df2(_0x407f51._0x5e0cbc)]['container']);return _0x4b17e5['id']=this['id'],_0x4b17e5['style']['position']='absolute',_0x4b17e5['style']['top']=_0x4c6df2(_0x407f51._0x5110e0),_0x4b17e5['style'][_0x4c6df2(_0x407f51._0x39ca20)]='0px',_0x4b17e5['style'][_0x4c6df2(_0x407f51._0x18578b)]=this['_map'][_0x4c6df2(0x94)]['canvas']['clientWidth']+'px',_0x4b17e5['style'][_0x4c6df2(0x91)]=this['_map'][_0x4c6df2(_0x407f51._0x4591e2)]['canvas']['clientHeight']+'px',_0x4b17e5['style']['pointerEvents']=this['_pointerEvents']?'all':'none',_0x4b17e5['style']['zIndex']=this[_0x4c6df2(0x8f)]['zIndex']??0x9,_0x4b17e5;}['resize'](){const _0x3862d3={_0x5c871a:0xb7,_0x4d98d4:0xba,_0x3aa7af:0x94,_0x411d86:0x8d,_0x191736:0xba,_0x5c897f:0xa6},_0x3758e9=_0x5c8dc2;if(!this[_0x3758e9(0x90)])return;this[_0x3758e9(0x8a)]['style'][_0x3758e9(_0x3862d3._0x5c871a)]=this[_0x3758e9(_0x3862d3._0x4d98d4)][_0x3758e9(_0x3862d3._0x3aa7af)][_0x3758e9(_0x3862d3._0x411d86)]['clientWidth']+'px',this['_echartsContainer']['style']['height']=this[_0x3758e9(_0x3862d3._0x191736)]['scene']['canvas'][_0x3758e9(_0x3862d3._0x5c897f)]+'px',this['_echartsInstance']['resize']();}[_0x5c8dc2(0xc2)](_0x4faa53,_0x4232b5,_0x5f0e6d){this['_echartsInstance']&&(_0x4faa53['mars3dMap']=_0x4faa53['mars3dMap']||{},this['_echartsInstance']['setOption'](_0x4faa53,_0x4232b5,_0x5f0e6d));}['getRectangle'](_0x587bac){const _0x3d5a63={_0x1d94eb:0x8f},_0x278535={_0x4c6195:0x86},_0x56ab50=_0x5c8dc2;let _0x508b8a,_0x48bd9d,_0x1b6c0b,_0x890f7f;function _0x52a930(_0x5872b1){if(!Array['isArray'](_0x5872b1))return;const _0x281f29=_0x5872b1[0x0]||0x0,_0x4d8e62=_0x5872b1[0x1]||0x0;_0x281f29!==0x0&&_0x4d8e62!==0x0&&(_0x508b8a===undefined?(_0x508b8a=_0x281f29,_0x48bd9d=_0x281f29,_0x1b6c0b=_0x4d8e62,_0x890f7f=_0x4d8e62):(_0x508b8a=Math['min'](_0x508b8a,_0x281f29),_0x48bd9d=Math['max'](_0x48bd9d,_0x281f29),_0x1b6c0b=Math['min'](_0x1b6c0b,_0x4d8e62),_0x890f7f=Math['max'](_0x890f7f,_0x4d8e62)));}const _0x3370e9=this[_0x56ab50(_0x3d5a63._0x1d94eb)]['series'];_0x3370e9&&_0x3370e9['forEach'](_0x247e2e=>{const _0x22cb1d=_0x56ab50;_0x247e2e['data']&&_0x247e2e['data'][_0x22cb1d(0xb4)](_0xf1a76=>{const _0x11dc03=_0x22cb1d;if(_0xf1a76[_0x11dc03(_0x278535._0x4c6195)])_0x52a930(_0xf1a76['value']);else _0xf1a76['coords']&&_0xf1a76['coords']['forEach'](_0x3aa7fe=>{_0x52a930(_0x3aa7fe);});});});if(_0x508b8a===0x0&&_0x1b6c0b===0x0&&_0x48bd9d===0x0&&_0x890f7f===0x0)return null;return _0x587bac!==null&&_0x587bac!==void 0x0&&_0x587bac['isFormat']?{'xmin':_0x508b8a,'xmax':_0x48bd9d,'ymin':_0x1b6c0b,'ymax':_0x890f7f}:Cesium['Rectangle']['fromDegrees'](_0x508b8a,_0x1b6c0b,_0x48bd9d,_0x890f7f);}['on'](_0x4bbc76,_0x55d5fd,_0x1762fe){const _0x16ffc7={_0x4026fd:0x90},_0x1ace84=_0x5c8dc2;return this[_0x1ace84(_0x16ffc7._0x4026fd)]['on'](_0x4bbc76,_0x55d5fd,_0x1762fe||this),this;}[_0x5c8dc2(0xaf)](_0x3d2f22,_0x1b92bc,_0xf24882,_0x1322e1){return this['_echartsInstance']['on'](_0x3d2f22,_0x1b92bc,_0xf24882,_0x1322e1||this),this;}['off'](_0x410a3b,_0x48e6b9,_0x30cb3b){const _0x5b579f=_0x5c8dc2;return this[_0x5b579f(0x90)]['off'](_0x410a3b,_0x48e6b9,_0x30cb3b||this),this;}}mars3d__namespace[_0x5c8dc2(0x95)]['register']('echarts',EchartsLayer),mars3d__namespace[_0x5c8dc2(0x87)]['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object[_0x5c8dc2(0x99)](echarts)[_0x5c8dc2(0xb4)](function(_0x52094d){const _0x168f89=_0x5c8dc2;if(_0x52094d!==_0x168f89(0x88)&&!exports['hasOwnProperty'](_0x52094d))Object['defineProperty'](exports,_0x52094d,{'enumerable':!![],'get':function(){return echarts[_0x52094d];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
