/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.5.13
 * 编译日期：2023-06-26 22:27:12
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x5d4174=_0x4945;(function(_0x33cfb1,_0x4d4d44){const _0x495c47={_0x3ce631:0xd5,_0x6547ff:0xec,_0x4e8592:0xd4,_0x22b7f8:0xc0,_0x1d8feb:0xc7,_0x3fedc6:0xbd},_0x1f75d4=_0x4945,_0x3ea6ad=_0x33cfb1();while(!![]){try{const _0x22edd3=-parseInt(_0x1f75d4(_0x495c47._0x3ce631))/0x1*(parseInt(_0x1f75d4(0xc9))/0x2)+parseInt(_0x1f75d4(_0x495c47._0x6547ff))/0x3*(-parseInt(_0x1f75d4(_0x495c47._0x4e8592))/0x4)+parseInt(_0x1f75d4(0xd1))/0x5*(parseInt(_0x1f75d4(0xf0))/0x6)+parseInt(_0x1f75d4(0xe4))/0x7*(parseInt(_0x1f75d4(0xc2))/0x8)+-parseInt(_0x1f75d4(0xc6))/0x9*(parseInt(_0x1f75d4(_0x495c47._0x22b7f8))/0xa)+-parseInt(_0x1f75d4(_0x495c47._0x1d8feb))/0xb+parseInt(_0x1f75d4(0xe9))/0xc*(parseInt(_0x1f75d4(_0x495c47._0x3fedc6))/0xd);if(_0x22edd3===_0x4d4d44)break;else _0x3ea6ad['push'](_0x3ea6ad['shift']());}catch(_0x2d1a9d){_0x3ea6ad['push'](_0x3ea6ad['shift']());}}}(_0x3c97,0x2aa4f));function _interopNamespace(_0x29f40a){const _0xe3560a={_0x4fb7db:0xeb,_0x249a5f:0xb9},_0x5b9603={_0x28bf06:0xd7},_0x1d194b=_0x4945;if(_0x29f40a&&_0x29f40a['__esModule'])return _0x29f40a;var _0x353b60=Object[_0x1d194b(_0xe3560a._0x4fb7db)](null);return _0x29f40a&&Object[_0x1d194b(_0xe3560a._0x249a5f)](_0x29f40a)['forEach'](function(_0x4402fb){const _0xd1d433=_0x1d194b;if(_0x4402fb!==_0xd1d433(0xcf)){var _0x32dded=Object['getOwnPropertyDescriptor'](_0x29f40a,_0x4402fb);Object['defineProperty'](_0x353b60,_0x4402fb,_0x32dded[_0xd1d433(_0x5b9603._0x28bf06)]?_0x32dded:{'enumerable':!![],'get':function(){return _0x29f40a[_0x4402fb];}});}}),_0x353b60[_0x1d194b(0xcf)]=_0x29f40a,_0x353b60;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];function _0x4945(_0x597923,_0x4a0174){const _0x3c9761=_0x3c97();return _0x4945=function(_0x4945b7,_0xaead15){_0x4945b7=_0x4945b7-0xb9;let _0x244de5=_0x3c9761[_0x4945b7];return _0x244de5;},_0x4945(_0x597923,_0x4a0174);}class CompositeCoordinateSystem{constructor(_0x1dd074,_0x407e2d){const _0x3fb891=_0x4945;this[_0x3fb891(0xdb)]=_0x1dd074,this['dimensions']=['lng',_0x3fb891(0xdd)],this[_0x3fb891(0xcb)]=[0x0,0x0],this['_api']=_0x407e2d;}['setMapOffset'](_0x10644a){this['_mapOffset']=_0x10644a;}[_0x5d4174(0xf1)](){return this['_mars3d_scene'];}['dataToPoint'](_0xbd4df5){const _0x28164a={_0x17c07a:0xd6,_0x586508:0xcc},_0x468425=_0x5d4174,_0x46b0e4=this['_mars3d_scene'],_0x15dc9f=[NaN,NaN];let _0x57bfca=_0x46b0e4['echartsFixedHeight'];_0x46b0e4['echartsAutoHeight']&&(_0x57bfca=_0x46b0e4['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0xbd4df5[0x0],_0xbd4df5[0x1])));const _0x3a310c=Cesium$1['Cartesian3']['fromDegrees'](_0xbd4df5[0x0],_0xbd4df5[0x1],_0x57bfca);if(!_0x3a310c)return _0x15dc9f;const _0x2d2f2b=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x46b0e4,_0x3a310c);if(!_0x2d2f2b)return _0x15dc9f;if(_0x46b0e4[_0x468425(0xca)]&&_0x46b0e4['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x1d98d0=new Cesium$1[(_0x468425(_0x28164a._0x17c07a))](_0x46b0e4[_0x468425(0xea)]['ellipsoid'],_0x46b0e4['camera'][_0x468425(_0x28164a._0x586508)]),_0x504d4b=_0x1d98d0['isPointVisible'](_0x3a310c);if(!_0x504d4b)return _0x15dc9f;}return[_0x2d2f2b['x']-this[_0x468425(0xcb)][0x0],_0x2d2f2b['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x5e0724={_0x3a6604:0xcd},_0x1b865b=_0x5d4174,_0xf0be77=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0xf0be77['getWidth'](),_0xf0be77[_0x1b865b(_0x5e0724._0x3a6604)]());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x102714,_0x577ece){const _0x24bbb4={_0x4212ca:0xdb},_0x575b20={_0x2cdfa7:0xc3},_0x1accb2=_0x5d4174;let _0x2cb2a8;const _0x11bfa3=_0x102714['scheduler']['ecInstance'][_0x1accb2(_0x24bbb4._0x4212ca)];_0x102714['eachComponent'](_0x1accb2(0xda),function(_0x5127ad){const _0x269a6d=_0x1accb2,_0x50ab7c=_0x577ece[_0x269a6d(_0x575b20._0x2cdfa7)]()['painter'];if(!_0x50ab7c)return;!_0x2cb2a8&&(_0x2cb2a8=new CompositeCoordinateSystem(_0x11bfa3,_0x577ece)),_0x5127ad['coordinateSystem']=_0x2cb2a8,_0x2cb2a8['setMapOffset'](_0x5127ad['__mapOffset']||[0x0,0x0]);}),_0x102714[_0x1accb2(0xc1)](function(_0x22c81e){_0x22c81e['get']('coordinateSystem')==='mars3dMap'&&(!_0x2cb2a8&&(_0x2cb2a8=new CompositeCoordinateSystem(_0x11bfa3,_0x577ece)),_0x22c81e['coordinateSystem']=_0x2cb2a8);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace[_0x5d4174(0xc5)])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x24a7ed,_0xe5bfea){}),echarts__namespace[_0x5d4174(0xee)]({'type':_0x5d4174(0xda),'getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x1e0b8c,_0x3824b5){const _0x48e2d3={_0x18b814:0xbf},_0x5009d3=_0x5d4174;this['api']=_0x3824b5,this['scene']=_0x1e0b8c['scheduler']['ecInstance'][_0x5009d3(0xdb)],this['scene'][_0x5009d3(_0x48e2d3._0x18b814)]['addEventListener'](this[_0x5009d3(0xed)],this);},'moveHandler':function(_0x50d500,_0x36f407){const _0x486848=_0x5d4174;this['api'][_0x486848(0xe7)]({'type':'mars3dMapRoam'});},'render':function(_0x550cd8,_0x570223,_0x28d682){},'dispose':function(_0x1a12ca){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];function _0x3c97(){const _0x4db422=['off','scene','13676CScnRx','1ijRdYa','EllipsoidalOccluder','get','zIndex','_addedHook','mars3dMap','_mars3d_scene','setOption','lat','__esModule','fixedHeight','style','_createChartOverlay','pointerEvents','_showHook','2181207vXadJv','top','_removedHook','dispatchAction','_echartsInstance','3020340NSTBkw','globe','create','282KPbJNR','moveHandler','extendComponentModel','fromDegrees','2922NkHXOH','getBMap','keys','options','visibility','_setOptionsHook','13mNixBX','_echartsContainer','postRender','4810crdNtL','eachSeries','8uRotJE','getZr','removeChild','init','2907AXdXFg','553993QGDGuF','_map','266518VXlara','echartsDepthTest','_mapOffset','positionWC','getHeight','canvas','default','Rectangle','2790JXPYNQ'];_0x3c97=function(){return _0x4db422;};return _0x3c97();}class EchartsLayer extends BaseLayer{constructor(_0x426693={}){super(_0x426693),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get[_0x5d4174(0xe2)](){return this['_pointerEvents'];}set['pointerEvents'](_0x39b6a3){const _0xc665cf={_0xb7356b:0xbe},_0x153516=_0x5d4174;this['_pointerEvents']=_0x39b6a3,this['_echartsContainer']&&(_0x39b6a3?this['_echartsContainer']['style']['pointerEvents']='all':this[_0x153516(_0xc665cf._0xb7356b)]['style']['pointerEvents']='none');}[_0x5d4174(0xbc)](_0xf3d185,_0x5c2c14){this['setEchartsOption'](_0xf3d185);}[_0x5d4174(0xe3)](_0x12a50c){const _0x750a9c={_0x5a20da:0xe0},_0x5922f6=_0x5d4174;_0x12a50c?this['_echartsContainer'][_0x5922f6(_0x750a9c._0x5a20da)]['visibility']='visible':this['_echartsContainer'][_0x5922f6(0xe0)][_0x5922f6(0xbb)]='hidden';}['_mountedHook'](){const _0x45ec03={_0x37762e:0xba},_0x2478d1=_0x5d4174;this['_map']['scene']['echartsDepthTest']=this[_0x2478d1(_0x45ec03._0x37762e)]['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this[_0x2478d1(0xc8)]['scene']['echartsFixedHeight']=this[_0x2478d1(_0x45ec03._0x37762e)][_0x2478d1(0xdf)]??0x0;}[_0x5d4174(0xd9)](){const _0x3b6e6e={_0xdccf3a:0xe1,_0x219826:0xe8,_0x4d92b4:0xbe},_0x3e2d8b=_0x5d4174;this['_echartsContainer']=this[_0x3e2d8b(_0x3b6e6e._0xdccf3a)](),this[_0x3e2d8b(_0x3b6e6e._0x219826)]=echarts__namespace['init'](this[_0x3e2d8b(_0x3b6e6e._0x4d92b4)]),this['_echartsInstance'][_0x3e2d8b(0xdb)]=this['_map'][_0x3e2d8b(0xd3)],this['setEchartsOption'](this['options']);}[_0x5d4174(0xe6)](){const _0x3d67a0={_0x348ef8:0xe8},_0x481bd5=_0x5d4174;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this[_0x481bd5(0xe8)]['dispose'](),delete this[_0x481bd5(_0x3d67a0._0x348ef8)]),this['_echartsContainer']&&(this[_0x481bd5(0xc8)]['container'][_0x481bd5(0xc4)](this['_echartsContainer']),delete this[_0x481bd5(0xbe)]);}['_createChartOverlay'](){const _0x29ee89={_0xdb3b83:0xe5,_0x1f41da:0xe0,_0x355f2f:0xd3,_0xd7741b:0xce,_0x2a0bfc:0xd3},_0x48f0ff=_0x5d4174,_0x250bf8=mars3d__namespace['DomUtil']['create']('div','mars3d-echarts',this['_map']['container']);return _0x250bf8['id']=this['id'],_0x250bf8['style']['position']='absolute',_0x250bf8['style'][_0x48f0ff(_0x29ee89._0xdb3b83)]='0px',_0x250bf8['style']['left']='0px',_0x250bf8[_0x48f0ff(_0x29ee89._0x1f41da)]['width']=this[_0x48f0ff(0xc8)][_0x48f0ff(_0x29ee89._0x355f2f)][_0x48f0ff(_0x29ee89._0xd7741b)]['clientWidth']+'px',_0x250bf8['style']['height']=this['_map'][_0x48f0ff(_0x29ee89._0x2a0bfc)]['canvas']['clientHeight']+'px',_0x250bf8['style'][_0x48f0ff(0xe2)]=this['_pointerEvents']?'all':'none',_0x250bf8['style'][_0x48f0ff(0xd8)]=this['options']['zIndex']??0x9,_0x250bf8;}['resize'](){const _0x30c922=_0x5d4174;if(!this['_echartsInstance'])return;this['_echartsContainer'][_0x30c922(0xe0)]['width']=this['_map'][_0x30c922(0xd3)]['canvas']['clientWidth']+'px',this['_echartsContainer']['style']['height']=this['_map']['scene'][_0x30c922(0xce)]['clientHeight']+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0x58d9a5,_0x2a2119,_0x30b9ab){const _0x153ed0=_0x5d4174;this['_echartsInstance']&&(_0x58d9a5['mars3dMap']=_0x58d9a5['mars3dMap']||{},this['_echartsInstance'][_0x153ed0(0xdc)](_0x58d9a5,_0x2a2119,_0x30b9ab));}['getRectangle'](_0x18904c){const _0x1b0dc2=_0x5d4174;let _0x2221f1,_0x1b1ffc,_0x3f2480,_0x2a8b3c;function _0x291359(_0xfbefd7){if(!Array['isArray'](_0xfbefd7))return;const _0x138d15=_0xfbefd7[0x0]||0x0,_0x3b1ebc=_0xfbefd7[0x1]||0x0;_0x138d15!==0x0&&_0x3b1ebc!==0x0&&(_0x2221f1===undefined?(_0x2221f1=_0x138d15,_0x1b1ffc=_0x138d15,_0x3f2480=_0x3b1ebc,_0x2a8b3c=_0x3b1ebc):(_0x2221f1=Math['min'](_0x2221f1,_0x138d15),_0x1b1ffc=Math['max'](_0x1b1ffc,_0x138d15),_0x3f2480=Math['min'](_0x3f2480,_0x3b1ebc),_0x2a8b3c=Math['max'](_0x2a8b3c,_0x3b1ebc)));}const _0x4427f1=this['options']['series'];_0x4427f1&&_0x4427f1['forEach'](_0x1a31c4=>{_0x1a31c4['data']&&_0x1a31c4['data']['forEach'](_0x243a90=>{if(_0x243a90['value'])_0x291359(_0x243a90['value']);else _0x243a90['coords']&&_0x243a90['coords']['forEach'](_0x19b4f0=>{_0x291359(_0x19b4f0);});});});if(_0x2221f1===0x0&&_0x3f2480===0x0&&_0x1b1ffc===0x0&&_0x2a8b3c===0x0)return null;return _0x18904c!==null&&_0x18904c!==void 0x0&&_0x18904c['isFormat']?{'xmin':_0x2221f1,'xmax':_0x1b1ffc,'ymin':_0x3f2480,'ymax':_0x2a8b3c}:Cesium[_0x1b0dc2(0xd0)][_0x1b0dc2(0xef)](_0x2221f1,_0x3f2480,_0x1b1ffc,_0x2a8b3c);}['on'](_0x153d51,_0x29aa29,_0x1007dd){return this['_echartsInstance']['on'](_0x153d51,_0x29aa29,_0x1007dd||this),this;}['onByQuery'](_0x2b1953,_0x122edf,_0x3d25d1,_0xa8f5f8){return this['_echartsInstance']['on'](_0x2b1953,_0x122edf,_0x3d25d1,_0xa8f5f8||this),this;}[_0x5d4174(0xd2)](_0xf2bf39,_0x4aa3a2,_0x59f631){return this['_echartsInstance']['off'](_0xf2bf39,_0x4aa3a2,_0x59f631||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x1fa8cc){if(_0x1fa8cc!=='default'&&!exports['hasOwnProperty'](_0x1fa8cc))Object['defineProperty'](exports,_0x1fa8cc,{'enumerable':!![],'get':function(){return echarts[_0x1fa8cc];}});}),Object['defineProperty'](exports,_0x5d4174(0xde),{'value':!![]});
}));
