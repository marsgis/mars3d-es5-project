/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.5
 * 编译日期：2023-09-08 17:15:56
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x1534b4=_0xf352;function _0xf352(_0x2eb6a4,_0x59fe45){const _0x3c92d1=_0x3c92();return _0xf352=function(_0xf35206,_0x4ef911){_0xf35206=_0xf35206-0xf4;let _0x3fac58=_0x3c92d1[_0xf35206];return _0x3fac58;},_0xf352(_0x2eb6a4,_0x59fe45);}(function(_0x20858b,_0xee0d0f){const _0x28e7c2={_0x5a6b98:0x103,_0x50d465:0x11a,_0x14d476:0xfe,_0xbe4a2f:0x13a,_0x28b596:0x10a,_0xbfca49:0x134,_0x38aa22:0x136},_0x117a45=_0xf352,_0x5a2a5f=_0x20858b();while(!![]){try{const _0x47ba22=parseInt(_0x117a45(_0x28e7c2._0x5a6b98))/0x1*(parseInt(_0x117a45(0x12d))/0x2)+-parseInt(_0x117a45(_0x28e7c2._0x50d465))/0x3*(-parseInt(_0x117a45(_0x28e7c2._0x14d476))/0x4)+-parseInt(_0x117a45(0x129))/0x5+-parseInt(_0x117a45(_0x28e7c2._0xbe4a2f))/0x6*(-parseInt(_0x117a45(_0x28e7c2._0x28b596))/0x7)+parseInt(_0x117a45(0x11e))/0x8+parseInt(_0x117a45(0x121))/0x9*(-parseInt(_0x117a45(_0x28e7c2._0xbfca49))/0xa)+-parseInt(_0x117a45(_0x28e7c2._0x38aa22))/0xb;if(_0x47ba22===_0xee0d0f)break;else _0x5a2a5f['push'](_0x5a2a5f['shift']());}catch(_0x5c0428){_0x5a2a5f['push'](_0x5a2a5f['shift']());}}}(_0x3c92,0x54179));function _interopNamespace(_0x525548){const _0x1d87db={_0x516c02:0xf7},_0x1f7b35={_0x42396a:0x101},_0x10e623=_0xf352;if(_0x525548&&_0x525548['__esModule'])return _0x525548;var _0x498fba=Object['create'](null);return _0x525548&&Object[_0x10e623(_0x1d87db._0x516c02)](_0x525548)['forEach'](function(_0x54e199){const _0x4a154a=_0x10e623;if(_0x54e199!=='default'){var _0x312047=Object[_0x4a154a(_0x1f7b35._0x42396a)](_0x525548,_0x54e199);Object['defineProperty'](_0x498fba,_0x54e199,_0x312047[_0x4a154a(0x124)]?_0x312047:{'enumerable':!![],'get':function(){return _0x525548[_0x54e199];}});}}),_0x498fba['default']=_0x525548,_0x498fba;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x1534b4(0x100)];class CompositeCoordinateSystem{constructor(_0x175ce3,_0x8fe698){const _0x5d71a3={_0x560f7e:0x110},_0x27dadf=_0x1534b4;this[_0x27dadf(_0x5d71a3._0x560f7e)]=_0x175ce3,this['dimensions']=['lng',_0x27dadf(0x10c)],this[_0x27dadf(0x10e)]=[0x0,0x0],this['_api']=_0x8fe698;}[_0x1534b4(0x12a)](_0x400072){const _0x25d9b7={_0x217ea3:0x10e},_0x14e2bc=_0x1534b4;this[_0x14e2bc(_0x25d9b7._0x217ea3)]=_0x400072;}['getBMap'](){return this['_mars3d_scene'];}[_0x1534b4(0x111)](_0x374bfc){const _0x54b6e8=_0x1534b4,_0x3a0fd5=this[_0x54b6e8(0x110)],_0x18519c=[NaN,NaN];let _0x324455=_0x3a0fd5['echartsFixedHeight'];_0x3a0fd5['echartsAutoHeight']&&(_0x324455=_0x3a0fd5[_0x54b6e8(0x130)]['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x374bfc[0x0],_0x374bfc[0x1])));const _0x51839b=Cesium$1['Cartesian3']['fromDegrees'](_0x374bfc[0x0],_0x374bfc[0x1],_0x324455);if(!_0x51839b)return _0x18519c;const _0xe3525c=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x3a0fd5,_0x51839b);if(!_0xe3525c)return _0x18519c;if(_0x3a0fd5['echartsDepthTest']&&_0x3a0fd5['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x206f86=new Cesium$1['EllipsoidalOccluder'](_0x3a0fd5['globe']['ellipsoid'],_0x3a0fd5['camera']['positionWC']),_0x314933=_0x206f86['isPointVisible'](_0x51839b);if(!_0x314933)return _0x18519c;}return[_0xe3525c['x']-this['_mapOffset'][0x0],_0xe3525c['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x5f0750=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x5f0750['getWidth'](),_0x5f0750['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem[_0x1534b4(0x106)]=[_0x1534b4(0x116),_0x1534b4(0x10c)],CompositeCoordinateSystem[_0x1534b4(0x105)]=function(_0x228cfe,_0x50228b){const _0x4672fc={_0x385e64:0x127,_0x1f392d:0x112},_0x1240bd={_0x36ad57:0xfa},_0x4caf5e=_0x1534b4;let _0x359cec;const _0x5f4b0d=_0x228cfe[_0x4caf5e(_0x4672fc._0x385e64)]['ecInstance']['_mars3d_scene'];_0x228cfe['eachComponent'](_0x4caf5e(0xf5),function(_0x2e8474){const _0xffc645=_0x4caf5e,_0x3d251f=_0x50228b['getZr']()[_0xffc645(0x12b)];if(!_0x3d251f)return;!_0x359cec&&(_0x359cec=new CompositeCoordinateSystem(_0x5f4b0d,_0x50228b)),_0x2e8474['coordinateSystem']=_0x359cec,_0x359cec['setMapOffset'](_0x2e8474[_0xffc645(_0x1240bd._0x36ad57)]||[0x0,0x0]);}),_0x228cfe[_0x4caf5e(_0x4672fc._0x1f392d)](function(_0x2ad918){_0x2ad918['get']('coordinateSystem')==='mars3dMap'&&(!_0x359cec&&(_0x359cec=new CompositeCoordinateSystem(_0x5f4b0d,_0x50228b)),_0x2ad918['coordinateSystem']=_0x359cec);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace[_0x1534b4(0xf4)])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace[_0x1534b4(0x139)]({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x4d6c15,_0x21cdf6){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){const _0x493020={_0x167fac:0x110},_0x37b677=_0x1534b4;return this[_0x37b677(_0x493020._0x167fac)];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':_0x1534b4(0xf5),'init':function(_0x3b88ee,_0x5861cd){const _0x5e03c0={_0x2b8713:0x126,_0x73270f:0x127,_0x3cb50e:0x110,_0x33d21d:0x12c},_0x568cb6=_0x1534b4;this[_0x568cb6(0x10d)]=_0x5861cd,this[_0x568cb6(_0x5e03c0._0x2b8713)]=_0x3b88ee[_0x568cb6(_0x5e03c0._0x73270f)]['ecInstance'][_0x568cb6(_0x5e03c0._0x3cb50e)],this['scene']['postRender'][_0x568cb6(_0x5e03c0._0x33d21d)](this['moveHandler'],this);},'moveHandler':function(_0x891a58,_0x2f59b5){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x7e079f,_0x4c4421,_0x5c3097){},'dispose':function(_0x22509a){const _0x220e45={_0x52f84a:0x123},_0x2ca549=_0x1534b4;this['scene']['postRender'][_0x2ca549(_0x220e45._0x52f84a)](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x1534b4(0x114)][_0x1534b4(0xfc)];class EchartsLayer extends BaseLayer{constructor(_0x2a6ac8={}){const _0x29addb={_0x371826:0x109},_0x184719=_0x1534b4;super(_0x2a6ac8),this[_0x184719(0x122)]=this[_0x184719(_0x29addb._0x371826)]['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x1534b4(0x104)](_0x5dccd1){const _0x3ed8a0={_0x36a120:0x138,_0x1d01b0:0x137},_0x17ca34=_0x1534b4;this['_pointerEvents']=_0x5dccd1,this['_echartsContainer']&&(_0x5dccd1?this['_echartsContainer'][_0x17ca34(_0x3ed8a0._0x36a120)]['pointerEvents']='all':this[_0x17ca34(_0x3ed8a0._0x1d01b0)][_0x17ca34(0x138)]['pointerEvents']='none');}['_setOptionsHook'](_0x504d78,_0x437ee4){this['setEchartsOption'](_0x504d78);}['_showHook'](_0x277487){const _0x5e119f={_0x334130:0x137},_0x2696f6=_0x1534b4;_0x277487?this[_0x2696f6(_0x5e119f._0x334130)]['style']['visibility']='visible':this['_echartsContainer']['style']['visibility']='hidden';}[_0x1534b4(0x133)](){const _0x42fa47={_0x515c72:0xf6,_0x42ac61:0x126},_0x1e2135=_0x1534b4;this['_map']['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this[_0x1e2135(0x109)][_0x1e2135(_0x42fa47._0x515c72)]??![],this['_map'][_0x1e2135(_0x42fa47._0x42ac61)]['echartsFixedHeight']=this['options'][_0x1e2135(0xfd)]??0x0;}['_addedHook'](){const _0x1c5f11={_0x129029:0x137},_0x279f9b=_0x1534b4;this[_0x279f9b(0x137)]=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this[_0x279f9b(_0x1c5f11._0x129029)]),this['_echartsInstance']['_mars3d_scene']=this['_map']['scene'],this[_0x279f9b(0x119)](this['options']);}['_removedHook'](){const _0x3cff64=_0x1534b4;this[_0x3cff64(0x118)]&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map']['container']['removeChild'](this[_0x3cff64(0x137)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x1dfb94={_0x285084:0x107,_0x4dcd24:0x11c,_0x20bd65:0x135,_0x263e5a:0x12f,_0x340bea:0x115,_0x488cac:0xff,_0x527faa:0x109},_0x320404=_0x1534b4,_0x5e2892=mars3d__namespace[_0x320404(0xf9)]['create']('div',_0x320404(_0x1dfb94._0x285084),this['_map']['container']);return _0x5e2892['id']=this['id'],_0x5e2892['style'][_0x320404(_0x1dfb94._0x4dcd24)]='absolute',_0x5e2892[_0x320404(0x138)]['top']='0px',_0x5e2892['style'][_0x320404(0x131)]=_0x320404(0x108),_0x5e2892['style'][_0x320404(_0x1dfb94._0x20bd65)]=this['_map']['scene']['canvas'][_0x320404(_0x1dfb94._0x263e5a)]+'px',_0x5e2892[_0x320404(0x138)][_0x320404(_0x1dfb94._0x340bea)]=this['_map'][_0x320404(0x126)]['canvas']['clientHeight']+'px',_0x5e2892[_0x320404(0x138)]['pointerEvents']=this['_pointerEvents']?_0x320404(0x128):_0x320404(_0x1dfb94._0x488cac),_0x5e2892[_0x320404(0x138)]['zIndex']=this[_0x320404(_0x1dfb94._0x527faa)]['zIndex']??0x9,_0x5e2892;}[_0x1534b4(0x11f)](){const _0x5b354f=_0x1534b4;if(!this['_echartsInstance'])return;this['_echartsContainer']['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this['_echartsContainer']['style'][_0x5b354f(0x115)]=this[_0x5b354f(0x117)]['scene'][_0x5b354f(0x11b)]['clientHeight']+'px',this['_echartsInstance'][_0x5b354f(0x11f)]();}['setEchartsOption'](_0x24b628,_0x23b074,_0x47e6eb){const _0x5d379f={_0x214356:0x118,_0x5319ee:0x102},_0x327730=_0x1534b4;this['_echartsInstance']&&(_0x24b628['mars3dMap']=_0x24b628['mars3dMap']||{},this[_0x327730(_0x5d379f._0x214356)][_0x327730(_0x5d379f._0x5319ee)](_0x24b628,_0x23b074,_0x47e6eb));}['getRectangle'](_0x572c98){const _0xaac3b9={_0x77c507:0x132},_0x35b5cc={_0x242eff:0x11d},_0x369676={_0x6d0fca:0x10f,_0x5d452b:0x120,_0x45b07c:0x120},_0x152486=_0x1534b4;let _0x2171e5,_0x51b63f,_0x41c017,_0x333108;function _0x922e38(_0x484fbd){const _0x2a68a1=_0xf352;if(!Array['isArray'](_0x484fbd))return;const _0x315f64=_0x484fbd[0x0]||0x0,_0x26bb29=_0x484fbd[0x1]||0x0;_0x315f64!==0x0&&_0x26bb29!==0x0&&(_0x2171e5===undefined?(_0x2171e5=_0x315f64,_0x51b63f=_0x315f64,_0x41c017=_0x26bb29,_0x333108=_0x26bb29):(_0x2171e5=Math[_0x2a68a1(_0x369676._0x6d0fca)](_0x2171e5,_0x315f64),_0x51b63f=Math[_0x2a68a1(_0x369676._0x5d452b)](_0x51b63f,_0x315f64),_0x41c017=Math['min'](_0x41c017,_0x26bb29),_0x333108=Math[_0x2a68a1(_0x369676._0x45b07c)](_0x333108,_0x26bb29)));}const _0x5e2dd7=this['options'][_0x152486(0x125)];_0x5e2dd7&&_0x5e2dd7['forEach'](_0x1b6578=>{const _0x3a4974=_0x152486;_0x1b6578[_0x3a4974(_0x35b5cc._0x242eff)]&&_0x1b6578[_0x3a4974(_0x35b5cc._0x242eff)]['forEach'](_0x112363=>{if(_0x112363['value'])_0x922e38(_0x112363['value']);else _0x112363['coords']&&_0x112363['coords']['forEach'](_0x1ec716=>{_0x922e38(_0x1ec716);});});});if(_0x2171e5===0x0&&_0x41c017===0x0&&_0x51b63f===0x0&&_0x333108===0x0)return null;return _0x572c98!==null&&_0x572c98!==void 0x0&&_0x572c98[_0x152486(_0xaac3b9._0x77c507)]?{'xmin':_0x2171e5,'xmax':_0x51b63f,'ymin':_0x41c017,'ymax':_0x333108}:Cesium['Rectangle']['fromDegrees'](_0x2171e5,_0x41c017,_0x51b63f,_0x333108);}['on'](_0x27c96d,_0x4ee752,_0x39a8ad){const _0x496427=_0x1534b4;return this[_0x496427(0x118)]['on'](_0x27c96d,_0x4ee752,_0x39a8ad||this),this;}[_0x1534b4(0xfb)](_0x4849b0,_0x2dca46,_0x2cd9dc,_0x42c377){const _0x17ee93={_0x339e9d:0x118},_0x510895=_0x1534b4;return this[_0x510895(_0x17ee93._0x339e9d)]['on'](_0x4849b0,_0x2dca46,_0x2cd9dc,_0x42c377||this),this;}['off'](_0x557914,_0x542193,_0x79dd45){const _0x29bbec={_0x35ce20:0x12e},_0x53137a=_0x1534b4;return this[_0x53137a(0x118)][_0x53137a(_0x29bbec._0x35ce20)](_0x557914,_0x542193,_0x79dd45||this),this;}}mars3d__namespace['LayerUtil']['register'](_0x1534b4(0xf8),EchartsLayer),mars3d__namespace[_0x1534b4(0x114)]['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object[_0x1534b4(0xf7)](echarts)[_0x1534b4(0x13b)](function(_0x569293){const _0x4c024a={_0x7b2a7c:0x113,_0x1a157c:0x10b},_0x162a9d=_0x1534b4;if(_0x569293!==_0x162a9d(_0x4c024a._0x7b2a7c)&&!exports[_0x162a9d(0x13c)](_0x569293))Object[_0x162a9d(_0x4c024a._0x1a157c)](exports,_0x569293,{'enumerable':!![],'get':function(){return echarts[_0x569293];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});function _0x3c92(){const _0xe45635=['_map','_echartsInstance','setEchartsOption','747qUJxKm','canvas','position','data','1434104XHQlEy','resize','max','99nhiECN','_pointerEvents','removeEventListener','get','series','scene','scheduler','all','2136590kKcNAU','setMapOffset','painter','addEventListener','971386KLPSvt','off','clientWidth','globe','left','isFormat','_mountedHook','287620KpAPqK','width','4192408tyVKgP','_echartsContainer','style','registerAction','4164SWSdRm','forEach','hasOwnProperty','init','mars3dMap','clampToGround','keys','echarts','DomUtil','__mapOffset','onByQuery','BaseLayer','fixedHeight','2140VxWLBy','none','Cesium','getOwnPropertyDescriptor','setOption','1yDpaVY','pointerEvents','create','dimensions','mars3d-echarts','0px','options','6769PNwwba','defineProperty','lat','api','_mapOffset','min','_mars3d_scene','dataToPoint','eachSeries','default','layer','height','lng'];_0x3c92=function(){return _0xe45635;};return _0x3c92();}
}));
