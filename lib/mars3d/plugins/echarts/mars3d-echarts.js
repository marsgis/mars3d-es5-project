/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.2
 * 编译日期：2023-08-20 20:29:10
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x541bf6=_0x1046;(function(_0x5d06d3,_0x47f3d2){const _0x3697c9={_0xa0950b:0x199,_0x33c903:0x196,_0x20cd0e:0x17a,_0x1d26a6:0x173},_0x52c1b9=_0x1046,_0x5e2254=_0x5d06d3();while(!![]){try{const _0x40b7d8=parseInt(_0x52c1b9(0x16f))/0x1*(parseInt(_0x52c1b9(_0x3697c9._0xa0950b))/0x2)+parseInt(_0x52c1b9(0x175))/0x3+parseInt(_0x52c1b9(_0x3697c9._0x33c903))/0x4+-parseInt(_0x52c1b9(_0x3697c9._0x20cd0e))/0x5+parseInt(_0x52c1b9(_0x3697c9._0x1d26a6))/0x6*(-parseInt(_0x52c1b9(0x1a2))/0x7)+parseInt(_0x52c1b9(0x184))/0x8+-parseInt(_0x52c1b9(0x16c))/0x9;if(_0x40b7d8===_0x47f3d2)break;else _0x5e2254['push'](_0x5e2254['shift']());}catch(_0x1ac15b){_0x5e2254['push'](_0x5e2254['shift']());}}}(_0xb918,0x6a358));function _0x1046(_0x26cb06,_0x19174c){const _0xb91890=_0xb918();return _0x1046=function(_0x104668,_0x4993c0){_0x104668=_0x104668-0x169;let _0x11dc37=_0xb91890[_0x104668];return _0x11dc37;},_0x1046(_0x26cb06,_0x19174c);}function _interopNamespace(_0x27187c){const _0x259fbf=_0x1046;if(_0x27187c&&_0x27187c['__esModule'])return _0x27187c;var _0x1ff1d0=Object['create'](null);return _0x27187c&&Object['keys'](_0x27187c)[_0x259fbf(0x176)](function(_0x57716d){const _0x39ef3d=_0x259fbf;if(_0x57716d!==_0x39ef3d(0x193)){var _0x952dcb=Object['getOwnPropertyDescriptor'](_0x27187c,_0x57716d);Object[_0x39ef3d(0x16d)](_0x1ff1d0,_0x57716d,_0x952dcb[_0x39ef3d(0x192)]?_0x952dcb:{'enumerable':!![],'get':function(){return _0x27187c[_0x57716d];}});}}),_0x1ff1d0['default']=_0x27187c,_0x1ff1d0;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x32b7ed,_0x1cb340){const _0x88918b={_0x53c9fc:0x1a9},_0x53a8bd=_0x1046;this[_0x53a8bd(0x195)]=_0x32b7ed,this[_0x53a8bd(_0x88918b._0x53c9fc)]=['lng','lat'],this[_0x53a8bd(0x19d)]=[0x0,0x0],this['_api']=_0x1cb340;}['setMapOffset'](_0x56d5c0){const _0x374436=_0x1046;this[_0x374436(0x19d)]=_0x56d5c0;}[_0x541bf6(0x1aa)](){const _0x272883=_0x541bf6;return this[_0x272883(0x195)];}['dataToPoint'](_0x34467a){const _0x41adee={_0x44e463:0x179,_0x25c01e:0x187,_0x24f9ff:0x181},_0x123b77=_0x541bf6,_0x2e1cce=this['_mars3d_scene'],_0x9dd33=[NaN,NaN];let _0x17609c=_0x2e1cce['echartsFixedHeight'];_0x2e1cce['echartsAutoHeight']&&(_0x17609c=_0x2e1cce[_0x123b77(0x19b)][_0x123b77(_0x41adee._0x44e463)](Cesium$1['Cartographic'][_0x123b77(_0x41adee._0x25c01e)](_0x34467a[0x0],_0x34467a[0x1])));const _0x48042b=Cesium$1['Cartesian3']['fromDegrees'](_0x34467a[0x0],_0x34467a[0x1],_0x17609c);if(!_0x48042b)return _0x9dd33;const _0x2d0575=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x2e1cce,_0x48042b);if(!_0x2d0575)return _0x9dd33;if(_0x2e1cce['echartsDepthTest']&&_0x2e1cce['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x5d3628=new Cesium$1[(_0x123b77(0x180))](_0x2e1cce['globe']['ellipsoid'],_0x2e1cce['camera'][_0x123b77(_0x41adee._0x24f9ff)]),_0x54c846=_0x5d3628['isPointVisible'](_0x48042b);if(!_0x54c846)return _0x9dd33;}return[_0x2d0575['x']-this['_mapOffset'][0x0],_0x2d0575['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x371805=_0x541bf6,_0x59f1c2=this['_api'];return new echarts__namespace[(_0x371805(0x16b))][(_0x371805(0x17f))](0x0,0x0,_0x59f1c2[_0x371805(0x18e)](),_0x59f1c2['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem[_0x541bf6(0x17e)]=function(_0x562f44,_0x547556){const _0xf6f00f={_0x19cb92:0x195,_0x9eb7da:0x19c},_0x3dd6e7={_0x1aacd4:0x1a4},_0x547bb1=_0x541bf6;let _0x3c134a;const _0x3d3eb5=_0x562f44['scheduler']['ecInstance'][_0x547bb1(_0xf6f00f._0x19cb92)];_0x562f44['eachComponent']('mars3dMap',function(_0x2a9680){const _0x5830d0=_0x547bb1,_0x3258f2=_0x547556[_0x5830d0(0x19e)]()['painter'];if(!_0x3258f2)return;!_0x3c134a&&(_0x3c134a=new CompositeCoordinateSystem(_0x3d3eb5,_0x547556)),_0x2a9680['coordinateSystem']=_0x3c134a,_0x3c134a[_0x5830d0(_0x3dd6e7._0x1aacd4)](_0x2a9680['__mapOffset']||[0x0,0x0]);}),_0x562f44[_0x547bb1(_0xf6f00f._0x9eb7da)](function(_0x1b2e22){_0x1b2e22['get']('coordinateSystem')==='mars3dMap'&&(!_0x3c134a&&(_0x3c134a=new CompositeCoordinateSystem(_0x3d3eb5,_0x547556)),_0x1b2e22['coordinateSystem']=_0x3c134a);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':_0x541bf6(0x1a8),'event':'mars3dMapRoam','update':_0x541bf6(0x188)},function(_0x1515bb,_0x5a8552){}),echarts__namespace[_0x541bf6(0x18b)]({'type':'mars3dMap','getBMap':function(){const _0x39f804={_0x13804f:0x195},_0x3b7b7a=_0x541bf6;return this[_0x3b7b7a(_0x39f804._0x13804f)];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x541bf6(0x17c)]({'type':'mars3dMap','init':function(_0x22a2c8,_0x3d3b3f){const _0x2598e3={_0x4ccc81:0x18d,_0xbbe867:0x197},_0x371b5e=_0x541bf6;this['api']=_0x3d3b3f,this['scene']=_0x22a2c8[_0x371b5e(_0x2598e3._0x4ccc81)][_0x371b5e(0x198)]['_mars3d_scene'],this['scene'][_0x371b5e(_0x2598e3._0xbbe867)]['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0xc1f1c3,_0x4495dd){const _0x42ed89=_0x541bf6;this['api'][_0x42ed89(0x190)]({'type':'mars3dMapRoam'});},'render':function(_0x4f34e2,_0x179841,_0x1afd32){},'dispose':function(_0x4b6075){const _0x5ed057={_0x581a47:0x182},_0x3685f3=_0x541bf6;this[_0x3685f3(_0x5ed057._0x581a47)]['postRender'][_0x3685f3(0x1ac)](this[_0x3685f3(0x185)],this);}});else throw new Error('请引入\x20echarts\x20库\x20');function _0xb918(){const _0x3d4e0e=['defineProperty','style','41ejxymF','absolute','left','keys','6rOQecS','none','1628817uJoAAx','forEach','_setOptionsHook','coords','getHeight','1154030OVfbmA','options','extendComponentView','clientHeight','create','BoundingRect','EllipsoidalOccluder','positionWC','scene','_map','5484552pHIWlW','moveHandler','fixedHeight','fromDegrees','updateLayout','visible','__esModule','extendComponentModel','_mountedHook','scheduler','getWidth','_pointerEvents','dispatchAction','div','get','default','off','_mars3d_scene','1508112LvNrtU','postRender','ecInstance','20390lwTZTI','visibility','globe','eachSeries','_mapOffset','getZr','LayerUtil','resize','pointerEvents','1131067MnbGvx','value','setMapOffset','_createChartOverlay','_echartsContainer','_removedHook','mars3dMapRoam','dimensions','getBMap','width','removeEventListener','_echartsInstance','echarts','graphic','10765008UNmcpc'];_0xb918=function(){return _0x3d4e0e;};return _0xb918();}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x156732={}){super(_0x156732),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){const _0x3a9b06={_0x33755f:0x18f},_0x2a8fb0=_0x541bf6;return this[_0x2a8fb0(_0x3a9b06._0x33755f)];}set['pointerEvents'](_0x23b1c8){const _0x3390aa={_0x4fe49a:0x18f,_0x541f55:0x1a1},_0x398a58=_0x541bf6;this[_0x398a58(_0x3390aa._0x4fe49a)]=_0x23b1c8,this['_echartsContainer']&&(_0x23b1c8?this['_echartsContainer']['style']['pointerEvents']='all':this['_echartsContainer'][_0x398a58(0x16e)][_0x398a58(_0x3390aa._0x541f55)]='none');}[_0x541bf6(0x177)](_0x4378f0,_0x4a94bb){this['setEchartsOption'](_0x4378f0);}['_showHook'](_0x3b4c49){const _0x189e40=_0x541bf6;_0x3b4c49?this['_echartsContainer']['style']['visibility']=_0x189e40(0x189):this['_echartsContainer']['style'][_0x189e40(0x19a)]='hidden';}[_0x541bf6(0x18c)](){const _0x180869={_0x9e6a40:0x182,_0x34a99b:0x17b},_0x5c23f2=_0x541bf6;this['_map'][_0x5c23f2(_0x180869._0x9e6a40)]['echartsDepthTest']=this[_0x5c23f2(_0x180869._0x34a99b)]['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map'][_0x5c23f2(0x182)]['echartsFixedHeight']=this['options'][_0x5c23f2(0x186)]??0x0;}['_addedHook'](){const _0x5ad6cb=_0x541bf6;this['_echartsContainer']=this[_0x5ad6cb(0x1a5)](),this[_0x5ad6cb(0x169)]=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this[_0x5ad6cb(0x183)]['scene'],this['setEchartsOption'](this['options']);}[_0x541bf6(0x1a7)](){const _0x39ede1=_0x541bf6;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map']['container']['removeChild'](this['_echartsContainer']),delete this[_0x39ede1(0x1a6)]);}[_0x541bf6(0x1a5)](){const _0x468922={_0x22f511:0x17e,_0x39f324:0x170,_0x2c220e:0x171,_0x2e5191:0x183,_0x18c6e1:0x16e,_0x3d6d6b:0x1a1,_0x300719:0x174},_0x106812=_0x541bf6,_0x3ef1a0=mars3d__namespace['DomUtil'][_0x106812(_0x468922._0x22f511)](_0x106812(0x191),'mars3d-echarts',this[_0x106812(0x183)]['container']);return _0x3ef1a0['id']=this['id'],_0x3ef1a0['style']['position']=_0x106812(_0x468922._0x39f324),_0x3ef1a0[_0x106812(0x16e)]['top']='0px',_0x3ef1a0['style'][_0x106812(_0x468922._0x2c220e)]='0px',_0x3ef1a0['style'][_0x106812(0x1ab)]=this[_0x106812(_0x468922._0x2e5191)]['scene']['canvas']['clientWidth']+'px',_0x3ef1a0[_0x106812(0x16e)]['height']=this['_map']['scene']['canvas']['clientHeight']+'px',_0x3ef1a0[_0x106812(_0x468922._0x18c6e1)][_0x106812(_0x468922._0x3d6d6b)]=this['_pointerEvents']?'all':_0x106812(_0x468922._0x300719),_0x3ef1a0['style']['zIndex']=this['options']['zIndex']??0x9,_0x3ef1a0;}[_0x541bf6(0x1a0)](){const _0x4d937d={_0x1681f2:0x1ab,_0x6d4340:0x183,_0x1b581a:0x17d},_0x3a2ac3=_0x541bf6;if(!this['_echartsInstance'])return;this['_echartsContainer']['style'][_0x3a2ac3(_0x4d937d._0x1681f2)]=this[_0x3a2ac3(_0x4d937d._0x6d4340)]['scene']['canvas']['clientWidth']+'px',this['_echartsContainer']['style']['height']=this['_map']['scene']['canvas'][_0x3a2ac3(_0x4d937d._0x1b581a)]+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0x52acd0,_0x1667f5,_0x10472c){const _0x46a344={_0xec50a7:0x169},_0x1ec91f=_0x541bf6;this[_0x1ec91f(_0x46a344._0xec50a7)]&&(_0x52acd0['mars3dMap']=_0x52acd0['mars3dMap']||{},this['_echartsInstance']['setOption'](_0x52acd0,_0x1667f5,_0x10472c));}['getRectangle'](_0xd4e324){let _0x1b5348,_0x514c07,_0x560d39,_0x392392;function _0x2f2a84(_0x11c273){if(!Array['isArray'](_0x11c273))return;const _0x354a31=_0x11c273[0x0]||0x0,_0x5a5f01=_0x11c273[0x1]||0x0;_0x354a31!==0x0&&_0x5a5f01!==0x0&&(_0x1b5348===undefined?(_0x1b5348=_0x354a31,_0x514c07=_0x354a31,_0x560d39=_0x5a5f01,_0x392392=_0x5a5f01):(_0x1b5348=Math['min'](_0x1b5348,_0x354a31),_0x514c07=Math['max'](_0x514c07,_0x354a31),_0x560d39=Math['min'](_0x560d39,_0x5a5f01),_0x392392=Math['max'](_0x392392,_0x5a5f01)));}const _0x4c6f3d=this['options']['series'];_0x4c6f3d&&_0x4c6f3d['forEach'](_0x176ccb=>{_0x176ccb['data']&&_0x176ccb['data']['forEach'](_0x2681b8=>{const _0x1f7a35=_0x1046;if(_0x2681b8[_0x1f7a35(0x1a3)])_0x2f2a84(_0x2681b8[_0x1f7a35(0x1a3)]);else _0x2681b8[_0x1f7a35(0x178)]&&_0x2681b8['coords'][_0x1f7a35(0x176)](_0x51f075=>{_0x2f2a84(_0x51f075);});});});if(_0x1b5348===0x0&&_0x560d39===0x0&&_0x514c07===0x0&&_0x392392===0x0)return null;return _0xd4e324!==null&&_0xd4e324!==void 0x0&&_0xd4e324['isFormat']?{'xmin':_0x1b5348,'xmax':_0x514c07,'ymin':_0x560d39,'ymax':_0x392392}:Cesium['Rectangle']['fromDegrees'](_0x1b5348,_0x560d39,_0x514c07,_0x392392);}['on'](_0x34ee73,_0x22754d,_0x37c393){const _0x301cd8=_0x541bf6;return this[_0x301cd8(0x169)]['on'](_0x34ee73,_0x22754d,_0x37c393||this),this;}['onByQuery'](_0x4af401,_0x3e806c,_0x42f421,_0x471905){const _0x109d15={_0x267567:0x169},_0x10219f=_0x541bf6;return this[_0x10219f(_0x109d15._0x267567)]['on'](_0x4af401,_0x3e806c,_0x42f421,_0x471905||this),this;}['off'](_0x542500,_0x5a6989,_0x358809){const _0xfc822c={_0x2870d9:0x169,_0x5c9489:0x194},_0x393ae8=_0x541bf6;return this[_0x393ae8(_0xfc822c._0x2870d9)][_0x393ae8(_0xfc822c._0x5c9489)](_0x542500,_0x5a6989,_0x358809||this),this;}}mars3d__namespace[_0x541bf6(0x19f)]['register'](_0x541bf6(0x16a),EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace[_0x541bf6(0x16a)]=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object[_0x541bf6(0x172)](echarts)[_0x541bf6(0x176)](function(_0x1f36a8){const _0xf1217d=_0x541bf6;if(_0x1f36a8!==_0xf1217d(0x193)&&!exports['hasOwnProperty'](_0x1f36a8))Object['defineProperty'](exports,_0x1f36a8,{'enumerable':!![],'get':function(){return echarts[_0x1f36a8];}});}),Object['defineProperty'](exports,_0x541bf6(0x18a),{'value':!![]});
}));
