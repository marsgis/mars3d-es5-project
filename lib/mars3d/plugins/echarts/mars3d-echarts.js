/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.5.9
 * 编译日期：2023-05-29 18:08:11
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x2aaea2=_0x5c5c;(function(_0x4df768,_0xf6ee8e){const _0x293943={_0x1605eb:0xae,_0x17bfb1:0xb5,_0x2c4e65:0xd4,_0x457f05:0xcf,_0x5e62de:0xca},_0x19d5bf=_0x5c5c,_0x3348ab=_0x4df768();while(!![]){try{const _0x20e8e4=-parseInt(_0x19d5bf(_0x293943._0x1605eb))/0x1+-parseInt(_0x19d5bf(_0x293943._0x17bfb1))/0x2+parseInt(_0x19d5bf(0xb2))/0x3*(-parseInt(_0x19d5bf(0x94))/0x4)+parseInt(_0x19d5bf(0xce))/0x5+parseInt(_0x19d5bf(_0x293943._0x2c4e65))/0x6+parseInt(_0x19d5bf(_0x293943._0x457f05))/0x7*(parseInt(_0x19d5bf(_0x293943._0x5e62de))/0x8)+-parseInt(_0x19d5bf(0xd3))/0x9;if(_0x20e8e4===_0xf6ee8e)break;else _0x3348ab['push'](_0x3348ab['shift']());}catch(_0x4263e6){_0x3348ab['push'](_0x3348ab['shift']());}}}(_0x44b2,0x8a4c2));function _0x5c5c(_0x35823f,_0x38b479){const _0x44b286=_0x44b2();return _0x5c5c=function(_0x5c5c8c,_0x406433){_0x5c5c8c=_0x5c5c8c-0x94;let _0x23c9c4=_0x44b286[_0x5c5c8c];return _0x23c9c4;},_0x5c5c(_0x35823f,_0x38b479);}function _interopNamespace(_0x23293d){if(_0x23293d&&_0x23293d['__esModule'])return _0x23293d;var _0x272453=Object['create'](null);return _0x23293d&&Object['keys'](_0x23293d)['forEach'](function(_0x40969e){const _0xc68ef8=_0x5c5c;if(_0x40969e!=='default'){var _0x3905b7=Object[_0xc68ef8(0xa3)](_0x23293d,_0x40969e);Object[_0xc68ef8(0xbf)](_0x272453,_0x40969e,_0x3905b7['get']?_0x3905b7:{'enumerable':!![],'get':function(){return _0x23293d[_0x40969e];}});}}),_0x272453['default']=_0x23293d,_0x272453;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x17dbc1,_0x2ed9ef){const _0x314d75={_0x240398:0x96},_0xe850b6=_0x5c5c;this['_mars3d_scene']=_0x17dbc1,this['dimensions']=[_0xe850b6(0xb7),_0xe850b6(0xb3)],this[_0xe850b6(_0x314d75._0x240398)]=[0x0,0x0],this['_api']=_0x2ed9ef;}['setMapOffset'](_0x34180a){this['_mapOffset']=_0x34180a;}['getBMap'](){const _0x4213f=_0x5c5c;return this[_0x4213f(0xa9)];}['dataToPoint'](_0x2ab726){const _0x16474a={_0x2b0c6b:0xa4,_0x308803:0xa2,_0x2746ee:0xb9},_0xfc9c3e=_0x5c5c,_0x2e7acf=this['_mars3d_scene'],_0x59b5ad=[NaN,NaN];let _0x21aa2d=_0x2e7acf[_0xfc9c3e(0xc5)];_0x2e7acf[_0xfc9c3e(_0x16474a._0x2b0c6b)]&&(_0x21aa2d=_0x2e7acf['globe'][_0xfc9c3e(_0x16474a._0x308803)](Cesium$1['Cartographic'][_0xfc9c3e(0xab)](_0x2ab726[0x0],_0x2ab726[0x1])));const _0x2baad4=Cesium$1[_0xfc9c3e(_0x16474a._0x2746ee)]['fromDegrees'](_0x2ab726[0x0],_0x2ab726[0x1],_0x21aa2d);if(!_0x2baad4)return _0x59b5ad;const _0x53743f=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x2e7acf,_0x2baad4);if(!_0x53743f)return _0x59b5ad;if(_0x2e7acf[_0xfc9c3e(0xbd)]&&_0x2e7acf[_0xfc9c3e(0xcb)]===Cesium$1['SceneMode'][_0xfc9c3e(0x95)]){const _0x18de9b=new Cesium$1['EllipsoidalOccluder'](_0x2e7acf[_0xfc9c3e(0xc1)][_0xfc9c3e(0xad)],_0x2e7acf['camera']['positionWC']),_0x223f38=_0x18de9b['isPointVisible'](_0x2baad4);if(!_0x223f38)return _0x59b5ad;}return[_0x53743f['x']-this[_0xfc9c3e(0x96)][0x0],_0x53743f['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x5700cb=_0x5c5c,_0x10f88f=this[_0x5700cb(0xa8)];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x10f88f['getWidth'](),_0x10f88f['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x370878,_0x2be3c2){const _0x55e79f={_0x3df7d4:0xa1,_0x424fb8:0xbb},_0x148499=_0x5c5c;let _0x4882a0;const _0x585bc5=_0x370878[_0x148499(0xa0)][_0x148499(0x9f)]['_mars3d_scene'];_0x370878[_0x148499(0x99)]('mars3dMap',function(_0x574ce1){const _0x42787e=_0x148499,_0x25502f=_0x2be3c2['getZr']()['painter'];if(!_0x25502f)return;!_0x4882a0&&(_0x4882a0=new CompositeCoordinateSystem(_0x585bc5,_0x2be3c2)),_0x574ce1[_0x42787e(_0x55e79f._0x3df7d4)]=_0x4882a0,_0x4882a0[_0x42787e(_0x55e79f._0x424fb8)](_0x574ce1['__mapOffset']||[0x0,0x0]);}),_0x370878['eachSeries'](function(_0x571f2f){_0x571f2f['get']('coordinateSystem')==='mars3dMap'&&(!_0x4882a0&&(_0x4882a0=new CompositeCoordinateSystem(_0x585bc5,_0x2be3c2)),_0x571f2f['coordinateSystem']=_0x4882a0);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace[_0x2aaea2(0xc9)]({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x38dcf0,_0x150beb){}),echarts__namespace['extendComponentModel']({'type':_0x2aaea2(0xb1),'getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x15919e,_0x258c48){const _0x1ecde8={_0x1d0097:0xa9,_0x386cfe:0xaa},_0x461f6d=_0x2aaea2;this['api']=_0x258c48,this[_0x461f6d(0x9a)]=_0x15919e[_0x461f6d(0xa0)][_0x461f6d(0x9f)][_0x461f6d(_0x1ecde8._0x1d0097)],this['scene'][_0x461f6d(0xc2)]['addEventListener'](this[_0x461f6d(_0x1ecde8._0x386cfe)],this);},'moveHandler':function(_0x271bec,_0x1dd6b0){const _0x50e00a={_0x467b97:0x98},_0x4b0ab9=_0x2aaea2;this[_0x4b0ab9(0xa7)]['dispatchAction']({'type':_0x4b0ab9(_0x50e00a._0x467b97)});},'render':function(_0x13666c,_0x2f4a62,_0x305cf5){},'dispose':function(_0x138ae9){const _0x38d999={_0x18d6ef:0x9a},_0x51b4d8=_0x2aaea2;this[_0x51b4d8(_0x38d999._0x18d6ef)]['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error(_0x2aaea2(0xb4));const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x2aaea2(0xc7)]['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x38f74e={}){super(_0x38f74e),this['_pointerEvents']=this['options']['pointerEvents'];}get[_0x2aaea2(0xc7)](){return this['_echartsInstance'];}get[_0x2aaea2(0xc4)](){return this['_pointerEvents'];}set['pointerEvents'](_0x5a350b){const _0x1c99eb={_0x53bd44:0x9c,_0x3e9c8d:0xc4},_0x3e14c5=_0x2aaea2;this[_0x3e14c5(_0x1c99eb._0x53bd44)]=_0x5a350b,this['_echartsContainer']&&(_0x5a350b?this['_echartsContainer'][_0x3e14c5(0xd2)][_0x3e14c5(_0x1c99eb._0x3e9c8d)]='all':this['_echartsContainer']['style'][_0x3e14c5(0xc4)]='none');}['_setOptionsHook'](_0x3eb4f2,_0x1e4229){this['setEchartsOption'](_0x3eb4f2);}['_showHook'](_0x1d6d09){const _0x578e09=_0x2aaea2;_0x1d6d09?this['_echartsContainer']['style']['visibility']=_0x578e09(0xd0):this['_echartsContainer']['style']['visibility']='hidden';}[_0x2aaea2(0xbe)](){const _0x2a0a54={_0x58c017:0x9a,_0x38c2c5:0xba,_0x8bf2ae:0x9a},_0x1413d8=_0x2aaea2;this[_0x1413d8(0xaf)][_0x1413d8(_0x2a0a54._0x58c017)][_0x1413d8(0xbd)]=this['options'][_0x1413d8(_0x2a0a54._0x38c2c5)]??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map'][_0x1413d8(_0x2a0a54._0x8bf2ae)]['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x433260={_0x47e8ee:0xa5},_0x3a239b=_0x2aaea2;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this[_0x3a239b(_0x433260._0x47e8ee)]),this[_0x3a239b(0xc6)]['_mars3d_scene']=this['_map'][_0x3a239b(0x9a)],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x5ce2cd={_0x2b83de:0xc6,_0x22789f:0x9e},_0x3bb932=_0x2aaea2;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this[_0x3bb932(0xc6)]['dispose'](),delete this[_0x3bb932(_0x5ce2cd._0x2b83de)]),this['_echartsContainer']&&(this['_map'][_0x3bb932(_0x5ce2cd._0x22789f)]['removeChild'](this[_0x3bb932(0xa5)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x50072d={_0x4ac63b:0x97,_0x43a6cc:0x9d,_0x30df9e:0xd2,_0x5f1cbe:0xd1,_0x416b31:0xb8,_0x57702b:0xcc,_0x16729f:0x9b},_0x4f1d44=_0x2aaea2,_0x42f21e=mars3d__namespace['DomUtil'][_0x4f1d44(_0x50072d._0x4ac63b)]('div','mars3d-echarts',this['_map']['container']);return _0x42f21e['id']=this['id'],_0x42f21e['style']['position']=_0x4f1d44(_0x50072d._0x43a6cc),_0x42f21e[_0x4f1d44(_0x50072d._0x30df9e)][_0x4f1d44(_0x50072d._0x5f1cbe)]='0px',_0x42f21e['style']['left']='0px',_0x42f21e['style'][_0x4f1d44(_0x50072d._0x416b31)]=this['_map']['scene'][_0x4f1d44(_0x50072d._0x57702b)]['clientWidth']+'px',_0x42f21e[_0x4f1d44(_0x50072d._0x30df9e)]['height']=this['_map']['scene']['canvas']['clientHeight']+'px',_0x42f21e['style']['pointerEvents']=this['_pointerEvents']?'all':'none',_0x42f21e['style'][_0x4f1d44(_0x50072d._0x16729f)]=this['options']['zIndex']??0x9,_0x42f21e;}['resize'](){const _0x5b579b={_0x39aad5:0xc6,_0xefc4ca:0x9a,_0x547233:0xb0},_0x484546=_0x2aaea2;if(!this[_0x484546(_0x5b579b._0x39aad5)])return;this[_0x484546(0xa5)]['style'][_0x484546(0xb8)]=this['_map']['scene']['canvas']['clientWidth']+'px',this['_echartsContainer']['style']['height']=this['_map'][_0x484546(_0x5b579b._0xefc4ca)]['canvas'][_0x484546(_0x5b579b._0x547233)]+'px',this['_echartsInstance'][_0x484546(0xa6)]();}['setEchartsOption'](_0x42ef02,_0x57e854,_0x3b4970){const _0x5dc8fb={_0x1a6bb9:0xc6},_0x19e89b=_0x2aaea2;this[_0x19e89b(_0x5dc8fb._0x1a6bb9)]&&(_0x42ef02['mars3dMap']=_0x42ef02['mars3dMap']||{},this['_echartsInstance']['setOption'](_0x42ef02,_0x57e854,_0x3b4970));}['getRectangle'](_0x234846){const _0x5e2e52={_0x798e9b:0xac},_0x1dd9b0={_0x247c55:0xc0},_0x4f79d2={_0x522604:0xd5},_0x4bd6c0=_0x2aaea2;let _0x1eb151,_0xcbbc62,_0x248ce2,_0xf61ad4;function _0xdb4408(_0x126cd8){if(!Array['isArray'](_0x126cd8))return;const _0x46c9f5=_0x126cd8[0x0]||0x0,_0x1b8384=_0x126cd8[0x1]||0x0;_0x46c9f5!==0x0&&_0x1b8384!==0x0&&(_0x1eb151===undefined?(_0x1eb151=_0x46c9f5,_0xcbbc62=_0x46c9f5,_0x248ce2=_0x1b8384,_0xf61ad4=_0x1b8384):(_0x1eb151=Math['min'](_0x1eb151,_0x46c9f5),_0xcbbc62=Math['max'](_0xcbbc62,_0x46c9f5),_0x248ce2=Math['min'](_0x248ce2,_0x1b8384),_0xf61ad4=Math['max'](_0xf61ad4,_0x1b8384)));}const _0x1f8f42=this['options']['series'];_0x1f8f42&&_0x1f8f42['forEach'](_0x48ff8e=>{const _0x356a20=_0x5c5c;_0x48ff8e['data']&&_0x48ff8e['data'][_0x356a20(_0x1dd9b0._0x247c55)](_0x1d3a59=>{const _0x5970b8=_0x356a20;if(_0x1d3a59[_0x5970b8(_0x4f79d2._0x522604)])_0xdb4408(_0x1d3a59['value']);else _0x1d3a59['coords']&&_0x1d3a59['coords']['forEach'](_0x425f1=>{_0xdb4408(_0x425f1);});});});if(_0x1eb151===0x0&&_0x248ce2===0x0&&_0xcbbc62===0x0&&_0xf61ad4===0x0)return null;return _0x234846!==null&&_0x234846!==void 0x0&&_0x234846['isFormat']?{'xmin':_0x1eb151,'xmax':_0xcbbc62,'ymin':_0x248ce2,'ymax':_0xf61ad4}:Cesium[_0x4bd6c0(_0x5e2e52._0x798e9b)]['fromDegrees'](_0x1eb151,_0x248ce2,_0xcbbc62,_0xf61ad4);}['on'](_0x132826,_0x1bc414,_0x1f96ac){const _0xcd98d0=_0x2aaea2;return this[_0xcd98d0(0xc6)]['on'](_0x132826,_0x1bc414,_0x1f96ac||this),this;}['onByQuery'](_0xac61a0,_0x2a77a3,_0x531191,_0x339d9d){return this['_echartsInstance']['on'](_0xac61a0,_0x2a77a3,_0x531191,_0x339d9d||this),this;}['off'](_0xf743b9,_0xef65d3,_0x55ca86){return this['_echartsInstance']['off'](_0xf743b9,_0xef65d3,_0x55ca86||this),this;}}function _0x44b2(){const _0x45cc49=['echartsFixedHeight','_echartsInstance','layer','default','registerAction','24MSjqRT','mode','canvas','keys','2777670kwGeWb','1355788DvlSEc','visible','top','style','1895049JLXDBk','1067094HJPzJb','value','EchartsLayer','4MWEKNo','SCENE3D','_mapOffset','create','mars3dMapRoam','eachComponent','scene','zIndex','_pointerEvents','absolute','container','ecInstance','scheduler','coordinateSystem','getHeight','getOwnPropertyDescriptor','echartsAutoHeight','_echartsContainer','resize','api','_api','_mars3d_scene','moveHandler','fromDegrees','Rectangle','ellipsoid','25164crjFaq','_map','clientHeight','mars3dMap','27471Vdihlx','lat','请引入\x20echarts\x20库\x20','1006174gxrCwn','hasOwnProperty','lng','width','Cartesian3','depthTest','setMapOffset','LayerUtil','echartsDepthTest','_mountedHook','defineProperty','forEach','globe','postRender','register','pointerEvents'];_0x44b2=function(){return _0x45cc49;};return _0x44b2();}mars3d__namespace[_0x2aaea2(0xbc)][_0x2aaea2(0xc3)]('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,exports[_0x2aaea2(0xd6)]=EchartsLayer,Object[_0x2aaea2(0xcd)](echarts)['forEach'](function(_0x2364d6){const _0x1ff27e=_0x2aaea2;if(_0x2364d6!==_0x1ff27e(0xc8)&&!exports[_0x1ff27e(0xb6)](_0x2364d6))Object['defineProperty'](exports,_0x2364d6,{'enumerable':!![],'get':function(){return echarts[_0x2364d6];}});}),Object[_0x2aaea2(0xbf)](exports,'__esModule',{'value':!![]});
}));
