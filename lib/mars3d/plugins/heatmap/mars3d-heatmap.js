/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.7.4
 * 编译日期：2024-02-20 12:25:26
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
	typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
	(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';var _0x3ad84a=_0x2345;(function(_0x2f2426,_0x521998){var _0x528ab6={_0x1c1944:0x1ff,_0x5ef51c:0x20a,_0x4aaf8a:0x27f,_0x3fae16:0x240,_0x2de050:0x21e,_0x13a12f:0x241,_0x4c58be:0x21a,_0x1185d9:0x275,_0x521cba:0x228},_0x45fa3b=_0x2345,_0x356731=_0x2f2426();while(!![]){try{var _0x21fd13=parseInt(_0x45fa3b(_0x528ab6._0x1c1944))/0x1+-parseInt(_0x45fa3b(_0x528ab6._0x5ef51c))/0x2*(parseInt(_0x45fa3b(_0x528ab6._0x4aaf8a))/0x3)+-parseInt(_0x45fa3b(0x207))/0x4*(-parseInt(_0x45fa3b(_0x528ab6._0x3fae16))/0x5)+parseInt(_0x45fa3b(_0x528ab6._0x2de050))/0x6+-parseInt(_0x45fa3b(0x257))/0x7*(parseInt(_0x45fa3b(_0x528ab6._0x13a12f))/0x8)+-parseInt(_0x45fa3b(_0x528ab6._0x4c58be))/0x9*(-parseInt(_0x45fa3b(_0x528ab6._0x1185d9))/0xa)+-parseInt(_0x45fa3b(_0x528ab6._0x521cba))/0xb;if(_0x21fd13===_0x521998)break;else _0x356731['push'](_0x356731['shift']());}catch(_0x1e9608){_0x356731['push'](_0x356731['shift']());}}}(_0x5c76,0x6bd7a));function _0x2345(_0x471368,_0x2936d1){var _0x5c76ed=_0x5c76();return _0x2345=function(_0x2345cc,_0x3062bf){_0x2345cc=_0x2345cc-0x1ed;var _0xb4e71a=_0x5c76ed[_0x2345cc];return _0xb4e71a;},_0x2345(_0x471368,_0x2936d1);}function _interopNamespace(_0xa7ac03){var _0x5376ea={_0x64ce4:0x1f9,_0x26cc49:0x249},_0x52a587={_0x973ab8:0x232,_0x3e420b:0x211},_0x1a3cb8=_0x2345;if(_0xa7ac03&&_0xa7ac03[_0x1a3cb8(_0x5376ea._0x64ce4)])return _0xa7ac03;var _0x325d51=Object['create'](null);return _0xa7ac03&&Object[_0x1a3cb8(_0x5376ea._0x26cc49)](_0xa7ac03)['forEach'](function(_0x250efc){var _0x7465fa=_0x1a3cb8;if(_0x250efc!==_0x7465fa(_0x52a587._0x973ab8)){var _0x3b9292=Object[_0x7465fa(_0x52a587._0x3e420b)](_0xa7ac03,_0x250efc);Object['defineProperty'](_0x325d51,_0x250efc,_0x3b9292['get']?_0x3b9292:{'enumerable':!![],'get':function(){return _0xa7ac03[_0x250efc];}});}}),_0x325d51['default']=_0xa7ac03,_0x325d51;}function _0x5c76(){var _0x4ae7a6=['undefined','fillStyle','plugin','_minOpacity','getOwnPropertyDescriptor','yellow','beginPath','minCanvasSize','ymin','_updatePositionsHook','_height','请引入\x20heatmap.js\x20库\x20','getContext','3581478CiTjAL','cStore','xmin','rgb(0,255,0)','738234kOKOiQ','defaultGradient','addGraphic','rgba(0,0,0,1)','_rectangle','getValueAt','_renderer','_layer','_xField','MaterialUtil','2380378yxrZgw','renderall','shadowCtx','_scale','flyToByAnimationEnd','heatStyle','_createArcGraphic','xmax','forEach','data','default','StencilOperation','width:','flyTo','backgroundColor','yField','createElement','_coordinator','prototype','_positions','_store','ctx','LngLatPoint','emit','10dFqXFR','206384NDgLjF','layer','width','_removedHook','_valueField','positions','setDataMax','_unOrganizeData','keys','_setStyles','fromCache','_cfgRadius','VERTEX_FORMAT','_heat','addData','defaultYField','EllipsoidSurfaceAppearance','_config','copyCanvas','_getArcHeatCanvas','fillRect','rectangle','21UOMJTl','setPositions','clearRect','_container','_min','red','radi','drawImage','removeData','KEEP','length','className','_mountedHook','_max','arc','rgb(216,216,216)','push','diffHeight','ymax','uniform\x20sampler2D\x20image;\x0a\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x20{\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture(image,\x20st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0))\x20{\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a','extremachange','_data','container','addLayer','useGradientOpacity','gradient','toDataURL','create','lat','abs','10StaPrt','toArray','lonlat2mercator','createMaterial','maxCanvasSize','position:absolute;left:0;top:0;','mars3d-heatmap\x20mars3d-hideDiv','_getInternalData','_radi','merge','3RYPfXS','_graphic2','heatmap-canvas','_onExtremaChange','h337','defaultRadius','_graphic','GraphicLayer','ALWAYS','ImageLayer','_last_mBounds','_organiseData','canvas','isArray','min','defaultRenderer','PointTrans','value','_createGraphic','blue','radius','shadowCanvas','max','Util','_renderBoundaries','__esModule','_last_heatData','REPLACE','height','opacity','configure','84884jzGlNS','_map','exports','getImageData','uniforms','apply','rgba(0,0,0,0)','style','789988ODOZJr','updateConfig','PolyUtil','530690ynNnle','options','arcBlurScale'];_0x5c76=function(){return _0x4ae7a6;};return _0x5c76();}function _mergeNamespaces(_0x319a7d,_0x2c6780){var _0x398797={_0x5e9639:0x230},_0x46a3b0=_0x2345;return _0x2c6780[_0x46a3b0(_0x398797._0x5e9639)](function(_0x28aede){var _0x26d035={_0xc7c329:0x232},_0x17078b=_0x46a3b0;_0x28aede&&typeof _0x28aede!=='string'&&!Array[_0x17078b(0x1ed)](_0x28aede)&&Object[_0x17078b(0x249)](_0x28aede)['forEach'](function(_0x2bd8ed){var _0x4a9609=_0x17078b;if(_0x2bd8ed!==_0x4a9609(_0x26d035._0xc7c329)&&!(_0x2bd8ed in _0x319a7d)){var _0x3d1e18=Object['getOwnPropertyDescriptor'](_0x28aede,_0x2bd8ed);Object['defineProperty'](_0x319a7d,_0x2bd8ed,_0x3d1e18['get']?_0x3d1e18:{'enumerable':!![],'get':function(){return _0x28aede[_0x2bd8ed];}});}});}),_0x319a7d;}var mars3d__namespace=_interopNamespace(mars3d),commonjsGlobal=typeof globalThis!==_0x3ad84a(0x20d)?globalThis:typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!==_0x3ad84a(0x20d)?self:{},heatmap$1={'exports':{}};(function(_0x2a78dd){var _0x18ecc3={_0x2e3a37:0x21d,_0xa9b078:0x212},_0x574933={_0x250862:0x23a},_0x5e0b28={_0xedcb61:0x201};(function(_0x3bb5d8,_0x3e88ce,_0x30edef){var _0xfe0761=_0x2345;_0x2a78dd[_0xfe0761(_0x5e0b28._0xedcb61)]?_0x2a78dd[_0xfe0761(0x201)]=_0x30edef():_0x3e88ce[_0x3bb5d8]=_0x30edef();}('h337',commonjsGlobal,function(){var _0x406068={_0x37caa1:0x239,_0x5e46e2:0x229},_0x2e5989={_0x30d498:0x25f,_0x2030e2:0x204},_0x620c21={_0x1feb7c:0x1f8},_0x3b37e3={_0x4fb4fb:0x1f6,_0xaafe63:0x25e,_0x54cfee:0x1f8},_0x2c475c={_0x48bdfe:0x28b},_0x24451d={_0x2683c8:0x238,_0x356a9b:0x281,_0x21f468:0x1fc,_0x5ea4ea:0x27a},_0x54e30f={_0x5f5588:0x24f,_0x346aa8:0x239,_0x249810:0x264},_0x46a5cc=_0x2345,_0x20e8be={'defaultRadius':0x28,'defaultRenderer':'canvas2d','defaultGradient':{0.25:'rgb(0,0,255)',0.55:_0x46a5cc(_0x18ecc3._0x2e3a37),0.85:_0x46a5cc(_0x18ecc3._0xa9b078),0x1:'rgb(255,0,0)'},'defaultMaxOpacity':0x1,'defaultMinOpacity':0x0,'defaultBlur':0.85,'defaultXField':'x','defaultYField':'y','defaultValueField':'value','plugins':{}},_0x2b3130=function _0x19429d(){var _0x867579={_0x179147:0x26c},_0x485866={_0x272f95:0x229,_0x593669:0x27c},_0x4d26c7={_0x2236a8:0x231},_0x72de82={_0x390cd8:0x267},_0x2942a1={_0x556fc1:0x245,_0x24a119:0x1f4},_0x5d5564=_0x46a5cc,_0x5512b9=function _0x4e8dd7(_0x287dd8){var _0x4140ee=_0x2345;this[_0x4140ee(0x239)]={},this[_0x4140ee(0x26c)]=[],this[_0x4140ee(0x27d)]=[],this[_0x4140ee(0x25b)]=0xa,this['_max']=0x1,this[_0x4140ee(0x226)]=_0x287dd8['xField']||_0x287dd8['defaultXField'],this['_yField']=_0x287dd8[_0x4140ee(0x237)]||_0x287dd8[_0x4140ee(0x250)],this['_valueField']=_0x287dd8['valueField']||_0x287dd8['defaultValueField'],_0x287dd8['radius']&&(this[_0x4140ee(0x24c)]=_0x287dd8['radius']);},_0x15e4fb=_0x20e8be[_0x5d5564(0x284)];return _0x5512b9['prototype']={'_organiseData':function(_0x307d8d,_0x460485){var _0x5e4bd5=_0x5d5564,_0x2c6ffe=_0x307d8d[this['_xField']],_0x3e537b=_0x307d8d[this['_yField']],_0x3d8832=this['_radi'],_0x2de2e6=this[_0x5e4bd5(0x26c)],_0x5c181f=this['_max'],_0x3697d1=this['_min'],_0x411bd1=_0x307d8d[this[_0x5e4bd5(_0x2942a1._0x556fc1)]]||0x1,_0xbdab4c=_0x307d8d[_0x5e4bd5(_0x2942a1._0x24a119)]||this['_cfgRadius']||_0x15e4fb;!_0x2de2e6[_0x2c6ffe]&&(_0x2de2e6[_0x2c6ffe]=[],_0x3d8832[_0x2c6ffe]=[]);!_0x2de2e6[_0x2c6ffe][_0x3e537b]?(_0x2de2e6[_0x2c6ffe][_0x3e537b]=_0x411bd1,_0x3d8832[_0x2c6ffe][_0x3e537b]=_0xbdab4c):_0x2de2e6[_0x2c6ffe][_0x3e537b]+=_0x411bd1;var _0x3030b9=_0x2de2e6[_0x2c6ffe][_0x3e537b];if(_0x3030b9>_0x5c181f)return!_0x460485?this['_max']=_0x3030b9:this['setDataMax'](_0x3030b9),![];else return _0x3030b9<_0x3697d1?(!_0x460485?this['_min']=_0x3030b9:this['setDataMin'](_0x3030b9),![]):{'x':_0x2c6ffe,'y':_0x3e537b,'value':_0x411bd1,'radius':_0xbdab4c,'min':_0x3697d1,'max':_0x5c181f};},'_unOrganizeData':function(){var _0x175bdf=_0x5d5564,_0x1312e1=[],_0x59fd8f=this['_data'],_0x4959fb=this['_radi'];for(var _0x9aad5a in _0x59fd8f){for(var _0x3f0358 in _0x59fd8f[_0x9aad5a]){_0x1312e1[_0x175bdf(_0x72de82._0x390cd8)]({'x':_0x9aad5a,'y':_0x3f0358,'radius':_0x4959fb[_0x9aad5a][_0x3f0358],'value':_0x59fd8f[_0x9aad5a][_0x3f0358]});}}return{'min':this['_min'],'max':this['_max'],'data':_0x1312e1};},'_onExtremaChange':function(){this['_coordinator']['emit']('extremachange',{'min':this['_min'],'max':this['_max']});},'addData':function(){var _0x52449f=_0x5d5564;if(arguments[0x0]['length']>0x0){var _0x4a37e8=arguments[0x0],_0x4e466b=_0x4a37e8['length'];while(_0x4e466b--){this[_0x52449f(_0x54e30f._0x5f5588)]['call'](this,_0x4a37e8[_0x4e466b]);}}else{var _0x77723a=this['_organiseData'](arguments[0x0],!![]);_0x77723a&&(this['_data']['length']===0x0&&(this['_min']=this['_max']=_0x77723a[_0x52449f(0x1f1)]),this[_0x52449f(_0x54e30f._0x346aa8)]['emit']('renderpartial',{'min':this['_min'],'max':this[_0x52449f(_0x54e30f._0x249810)],'data':[_0x77723a]}));}return this;},'setData':function(_0x26feac){var _0x54732b=_0x5d5564,_0x38cee0=_0x26feac[_0x54732b(_0x4d26c7._0x2236a8)],_0x2fc8ee=_0x38cee0['length'];this['_data']=[],this['_radi']=[];for(var _0x99ba65=0x0;_0x99ba65<_0x2fc8ee;_0x99ba65++){this[_0x54732b(0x28a)](_0x38cee0[_0x99ba65],![]);}return this['_max']=_0x26feac['max'],this['_min']=_0x26feac['min']||0x0,this[_0x54732b(0x282)](),this[_0x54732b(0x239)][_0x54732b(0x23f)]('renderall',this['_getInternalData']()),this;},'removeData':function(){},'setDataMax':function(_0x5e7b10){var _0x365b8b=_0x5d5564;return this['_max']=_0x5e7b10,this['_onExtremaChange'](),this['_coordinator']['emit'](_0x365b8b(_0x485866._0x272f95),this[_0x365b8b(_0x485866._0x593669)]()),this;},'setDataMin':function(_0x57d619){return this['_min']=_0x57d619,this['_onExtremaChange'](),this['_coordinator']['emit']('renderall',this['_getInternalData']()),this;},'setCoordinator':function(_0x52d2c3){this['_coordinator']=_0x52d2c3;},'_getInternalData':function(){var _0x3c07b4=_0x5d5564;return{'max':this['_max'],'min':this['_min'],'data':this[_0x3c07b4(_0x867579._0x179147)],'radi':this['_radi']};},'getData':function(){var _0x2dc239=_0x5d5564;return this[_0x2dc239(0x248)]();}},_0x5512b9;}(),_0x41f21e=function _0x365e9f(){var _0x224686={_0x42fe10:0x271},_0x597f31={_0x58f048:0x22a},_0x562ae2={_0x581dad:0x243,_0x8e2400:0x28b,_0x1feb62:0x26f},_0x517df6={_0x10d77c:0x259,_0x46e836:0x23d},_0x565c21={_0x1bd14d:0x24a},_0x40db87={_0xf94780:0x1fc,_0x3344d2:0x265,_0x400919:0x205},_0x3e7e2f={_0x140597:0x20e,_0x29a43e:0x231},_0x2952a7=_0x46a5cc,_0x3b8ee3=function(_0x2f9468){var _0x59c161=_0x2345,_0x244630=_0x2f9468['gradient']||_0x2f9468['defaultGradient'],_0x38b2e3=document['createElement'](_0x59c161(0x28b)),_0x4bc515=_0x38b2e3['getContext']('2d',{'willReadFrequently':!![]});_0x38b2e3[_0x59c161(0x243)]=0x100,_0x38b2e3['height']=0x1;var _0x48f715=_0x4bc515['createLinearGradient'](0x0,0x0,0x100,0x1);for(var _0x4b6c5b in _0x244630){_0x48f715['addColorStop'](_0x4b6c5b,_0x244630[_0x4b6c5b]);}return _0x4bc515[_0x59c161(_0x3e7e2f._0x140597)]=_0x48f715,_0x4bc515['fillRect'](0x0,0x0,0x100,0x1),_0x4bc515['getImageData'](0x0,0x0,0x100,0x1)[_0x59c161(_0x3e7e2f._0x29a43e)];},_0x401186=function(_0x4dda04,_0x1e65c4){var _0x5a2d11=_0x2345,_0x27892d=document['createElement']('canvas'),_0xe9e704=_0x27892d['getContext']('2d',{'willReadFrequently':!![]}),_0x307a90=_0x4dda04,_0x546cd7=_0x4dda04;_0x27892d[_0x5a2d11(0x243)]=_0x27892d[_0x5a2d11(_0x40db87._0xf94780)]=_0x4dda04*0x2;if(_0x1e65c4==0x1)_0xe9e704[_0x5a2d11(0x213)](),_0xe9e704[_0x5a2d11(_0x40db87._0x3344d2)](_0x307a90,_0x546cd7,_0x4dda04,0x0,0x2*Math['PI'],![]),_0xe9e704['fillStyle']='rgba(0,0,0,1)',_0xe9e704['fill']();else{var _0x213fc5=_0xe9e704['createRadialGradient'](_0x307a90,_0x546cd7,_0x4dda04*_0x1e65c4,_0x307a90,_0x546cd7,_0x4dda04);_0x213fc5['addColorStop'](0x0,_0x5a2d11(0x221)),_0x213fc5['addColorStop'](0x1,_0x5a2d11(_0x40db87._0x400919)),_0xe9e704['fillStyle']=_0x213fc5,_0xe9e704[_0x5a2d11(0x255)](0x0,0x0,0x2*_0x4dda04,0x2*_0x4dda04);}return _0x27892d;},_0x5aebb8=function(_0x23d6a2){var _0x3e244e=_0x2345,_0x4c820d=[],_0x243748=_0x23d6a2[_0x3e244e(0x1ee)],_0x17042a=_0x23d6a2[_0x3e244e(0x1f6)],_0x58b03c=_0x23d6a2[_0x3e244e(0x25d)],_0x23d6a2=_0x23d6a2['data'],_0x4b5375=Object['keys'](_0x23d6a2),_0x2baadf=_0x4b5375[_0x3e244e(0x261)];while(_0x2baadf--){var _0x5435a7=_0x4b5375[_0x2baadf],_0x1770f2=Object['keys'](_0x23d6a2[_0x5435a7]),_0xc2eb0a=_0x1770f2[_0x3e244e(0x261)];while(_0xc2eb0a--){var _0x5a7c4d=_0x1770f2[_0xc2eb0a],_0x49edb4=_0x23d6a2[_0x5435a7][_0x5a7c4d],_0x4b201f=_0x58b03c[_0x5435a7][_0x5a7c4d];_0x4c820d[_0x3e244e(0x267)]({'x':_0x5435a7,'y':_0x5a7c4d,'value':_0x49edb4,'radius':_0x4b201f});}}return{'min':_0x243748,'max':_0x17042a,'data':_0x4c820d};};function _0x26b805(_0x3a5076){var _0x529ff9=_0x2345,_0xbacd57=_0x3a5076['container'],_0xf845b0=this[_0x529ff9(0x1f5)]=document[_0x529ff9(_0x24451d._0x2683c8)]('canvas'),_0x35d968=this[_0x529ff9(0x28b)]=_0x3a5076['canvas']||document['createElement']('canvas');this['_renderBoundaries']=[0x2710,0x2710,0x0,0x0];var _0x471f03=getComputedStyle(_0x3a5076['container'])||{};_0x35d968[_0x529ff9(0x262)]=_0x529ff9(_0x24451d._0x356a9b),this['_width']=_0x35d968['width']=_0xf845b0['width']=_0x3a5076['width']||+_0x471f03['width']['replace'](/px/,''),this[_0x529ff9(0x217)]=_0x35d968['height']=_0xf845b0['height']=_0x3a5076[_0x529ff9(_0x24451d._0x21f468)]||+_0x471f03['height']['replace'](/px/,''),this['shadowCtx']=_0xf845b0['getContext']('2d',{'willReadFrequently':!![]}),this['ctx']=_0x35d968[_0x529ff9(0x219)]('2d',{'willReadFrequently':!![]}),_0x35d968['style']['cssText']=_0xf845b0['style']['cssText']=_0x529ff9(_0x24451d._0x5ea4ea),_0xbacd57['style']['position']='relative',_0xbacd57['appendChild'](_0x35d968),this['_palette']=_0x3b8ee3(_0x3a5076),this['_templates']={},this['_setStyles'](_0x3a5076);}return _0x26b805[_0x2952a7(0x23a)]={'renderPartial':function(_0x535af6){_0x535af6['data']['length']>0x0&&(this['_drawAlpha'](_0x535af6),this['_colorize']());},'renderAll':function(_0x470105){this['_clear'](),_0x470105['data']['length']>0x0&&(this['_drawAlpha'](_0x5aebb8(_0x470105)),this['_colorize']());},'_updateGradient':function(_0x521cda){this['_palette']=_0x3b8ee3(_0x521cda);},'updateConfig':function(_0x250160){var _0x5a857c=_0x2952a7;_0x250160['gradient']&&this['_updateGradient'](_0x250160),this[_0x5a857c(_0x565c21._0x1bd14d)](_0x250160);},'setDimensions':function(_0x4f097f,_0x50a8f7){var _0x3acaf6=_0x2952a7;this['_width']=_0x4f097f,this['_height']=_0x50a8f7,this['canvas']['width']=this['shadowCanvas']['width']=_0x4f097f,this[_0x3acaf6(_0x2c475c._0x48bdfe)][_0x3acaf6(0x1fc)]=this['shadowCanvas'][_0x3acaf6(0x1fc)]=_0x50a8f7;},'_clear':function(){var _0x2822fa=_0x2952a7;this['shadowCtx'][_0x2822fa(_0x517df6._0x10d77c)](0x0,0x0,this['_width'],this[_0x2822fa(0x217)]),this[_0x2822fa(_0x517df6._0x46e836)][_0x2822fa(_0x517df6._0x10d77c)](0x0,0x0,this['_width'],this['_height']);},'_setStyles':function(_0xa31d46){var _0xebaaaa=_0x2952a7;this['_blur']=_0xa31d46['blur']==0x0?0x0:_0xa31d46['blur']||_0xa31d46['defaultBlur'],_0xa31d46[_0xebaaaa(0x236)]&&(this[_0xebaaaa(0x28b)]['style']['backgroundColor']=_0xa31d46['backgroundColor']),this['_width']=this['canvas'][_0xebaaaa(_0x562ae2._0x581dad)]=this['shadowCanvas']['width']=_0xa31d46['width']||this['_width'],this['_height']=this[_0xebaaaa(_0x562ae2._0x8e2400)]['height']=this['shadowCanvas']['height']=_0xa31d46['height']||this['_height'],this['_opacity']=(_0xa31d46['opacity']||0x0)*0xff,this['_maxOpacity']=(_0xa31d46['maxOpacity']||_0xa31d46['defaultMaxOpacity'])*0xff,this[_0xebaaaa(0x210)]=(_0xa31d46['minOpacity']||_0xa31d46['defaultMinOpacity'])*0xff,this['_useGradientOpacity']=!!_0xa31d46[_0xebaaaa(_0x562ae2._0x1feb62)];},'_drawAlpha':function(_0xcdd586){var _0xf96b9c=_0x2952a7,_0x2a9a9d=this['_min']=_0xcdd586['min'],_0x5a57f7=this['_max']=_0xcdd586[_0xf96b9c(_0x3b37e3._0x4fb4fb)],_0xcdd586=_0xcdd586[_0xf96b9c(0x231)]||[],_0x42acb9=_0xcdd586['length'],_0x28b763=0x1-this['_blur'];while(_0x42acb9--){var _0x3cb293=_0xcdd586[_0x42acb9],_0x55dafc=_0x3cb293['x'],_0x12f1c8=_0x3cb293['y'],_0x41fe61=_0x3cb293[_0xf96b9c(0x1f4)],_0x4f6075=Math['min'](_0x3cb293['value'],_0x5a57f7),_0x2593f0=_0x55dafc-_0x41fe61,_0x48de03=_0x12f1c8-_0x41fe61,_0x11c7be=this['shadowCtx'],_0xf5c944;!this['_templates'][_0x41fe61]?this['_templates'][_0x41fe61]=_0xf5c944=_0x401186(_0x41fe61,_0x28b763):_0xf5c944=this['_templates'][_0x41fe61];var _0x10ace0=(_0x4f6075-_0x2a9a9d)/(_0x5a57f7-_0x2a9a9d);_0x11c7be['globalAlpha']=_0x10ace0<0.01?0.01:_0x10ace0,_0x11c7be[_0xf96b9c(_0x3b37e3._0xaafe63)](_0xf5c944,_0x2593f0,_0x48de03),_0x2593f0<this[_0xf96b9c(_0x3b37e3._0x54cfee)][0x0]&&(this['_renderBoundaries'][0x0]=_0x2593f0),_0x48de03<this[_0xf96b9c(0x1f8)][0x1]&&(this['_renderBoundaries'][0x1]=_0x48de03),_0x2593f0+0x2*_0x41fe61>this[_0xf96b9c(0x1f8)][0x2]&&(this['_renderBoundaries'][0x2]=_0x2593f0+0x2*_0x41fe61),_0x48de03+0x2*_0x41fe61>this['_renderBoundaries'][0x3]&&(this[_0xf96b9c(_0x3b37e3._0x54cfee)][0x3]=_0x48de03+0x2*_0x41fe61);}},'_colorize':function(){var _0x524e00=_0x2952a7,_0x183321=this['_renderBoundaries'][0x0],_0x95478b=this[_0x524e00(_0x620c21._0x1feb7c)][0x1],_0x7e0a00=this['_renderBoundaries'][0x2]-_0x183321,_0x2e5d92=this[_0x524e00(0x1f8)][0x3]-_0x95478b,_0x90b3e8=this['_width'],_0x46b289=this['_height'],_0x1a7592=this['_opacity'],_0x3bbbe8=this['_maxOpacity'],_0x60f72d=this['_minOpacity'],_0x3c3d2d=this['_useGradientOpacity'];_0x183321<0x0&&(_0x183321=0x0);_0x95478b<0x0&&(_0x95478b=0x0);_0x183321+_0x7e0a00>_0x90b3e8&&(_0x7e0a00=_0x90b3e8-_0x183321);_0x95478b+_0x2e5d92>_0x46b289&&(_0x2e5d92=_0x46b289-_0x95478b);var _0x32517f=this['shadowCtx']['getImageData'](_0x183321,_0x95478b,_0x7e0a00,_0x2e5d92),_0x49adf3=_0x32517f['data'],_0x4d6cf9=_0x49adf3['length'],_0x11d0e5=this['_palette'];for(var _0x1c4702=0x3;_0x1c4702<_0x4d6cf9;_0x1c4702+=0x4){var _0x8d0c35=_0x49adf3[_0x1c4702],_0x579c23=_0x8d0c35*0x4;if(!_0x579c23)continue;var _0x300c55;_0x1a7592>0x0?_0x300c55=_0x1a7592:_0x8d0c35<_0x3bbbe8?_0x8d0c35<_0x60f72d?_0x300c55=_0x60f72d:_0x300c55=_0x8d0c35:_0x300c55=_0x3bbbe8,_0x49adf3[_0x1c4702-0x3]=_0x11d0e5[_0x579c23],_0x49adf3[_0x1c4702-0x2]=_0x11d0e5[_0x579c23+0x1],_0x49adf3[_0x1c4702-0x1]=_0x11d0e5[_0x579c23+0x2],_0x49adf3[_0x1c4702]=_0x3c3d2d?_0x11d0e5[_0x579c23+0x3]:_0x300c55;}this[_0x524e00(0x23d)]['putImageData'](_0x32517f,_0x183321,_0x95478b),this['_renderBoundaries']=[0x3e8,0x3e8,0x0,0x0];},'getValueAt':function(_0x23668b){var _0x40b723=_0x2952a7,_0x423703,_0x5d0307=this[_0x40b723(_0x597f31._0x58f048)],_0x3b44c8=_0x5d0307['getImageData'](_0x23668b['x'],_0x23668b['y'],0x1,0x1),_0x57452b=_0x3b44c8['data'][0x3],_0x553c40=this['_max'],_0x4a346d=this['_min'];return _0x423703=Math['abs'](_0x553c40-_0x4a346d)*(_0x57452b/0xff)>>0x0,_0x423703;},'getDataURL':function(){var _0x2453dc=_0x2952a7;return this['canvas'][_0x2453dc(_0x224686._0x42fe10)]();}},_0x26b805;}(),_0x2a0738=function _0x3e4607(){var _0x1be5d4=_0x46a5cc,_0x280b79=![];return _0x20e8be[_0x1be5d4(0x1ef)]==='canvas2d'&&(_0x280b79=_0x41f21e),_0x280b79;}(),_0xb87415={'merge':function(){var _0x356bf0=_0x46a5cc,_0x228ca2={},_0x9674e4=arguments[_0x356bf0(0x261)];for(var _0x5a6aa7=0x0;_0x5a6aa7<_0x9674e4;_0x5a6aa7++){var _0x4c6587=arguments[_0x5a6aa7];for(var _0x28f3be in _0x4c6587){_0x228ca2[_0x28f3be]=_0x4c6587[_0x28f3be];}}return _0x228ca2;}},_0x5f5caf=function _0x127148(){var _0x5d57cb={_0x14896c:0x224},_0x22ac79={_0x45dc75:0x252,_0x72b981:0x27c},_0x15c25c={_0x5073f7:0x23c},_0x28c390={_0x375ac6:0x27e},_0x1288d3=_0x46a5cc,_0x20c5d8=function _0x221b68(){function _0x9c7144(){var _0x5ebc58=_0x2345;this[_0x5ebc58(0x21b)]={};}return _0x9c7144['prototype']={'on':function(_0x5894f2,_0x3dbfdc,_0x427a1d){var _0x5db544=this['cStore'];!_0x5db544[_0x5894f2]&&(_0x5db544[_0x5894f2]=[]),_0x5db544[_0x5894f2]['push'](function(_0x36c752){return _0x3dbfdc['call'](_0x427a1d,_0x36c752);});},'emit':function(_0x15f603,_0x10b263){var _0x715e82=_0x2345,_0x590d4c=this[_0x715e82(0x21b)];if(_0x590d4c[_0x15f603]){var _0x49fd7d=_0x590d4c[_0x15f603]['length'];for(var _0x36f094=0x0;_0x36f094<_0x49fd7d;_0x36f094++){var _0x3459a2=_0x590d4c[_0x15f603][_0x36f094];_0x3459a2(_0x10b263);}}}},_0x9c7144;}(),_0x2a70a8=function(_0x191561){var _0x1a43f6=_0x2345,_0x3f70e1=_0x191561[_0x1a43f6(0x224)],_0x1ac43d=_0x191561['_coordinator'],_0x8fad19=_0x191561['_store'];_0x1ac43d['on']('renderpartial',_0x3f70e1['renderPartial'],_0x3f70e1),_0x1ac43d['on']('renderall',_0x3f70e1['renderAll'],_0x3f70e1),_0x1ac43d['on'](_0x1a43f6(0x26b),function(_0x78f56a){var _0x59c352=_0x1a43f6;_0x191561['_config']['onExtremaChange']&&_0x191561['_config']['onExtremaChange']({'min':_0x78f56a['min'],'max':_0x78f56a['max'],'gradient':_0x191561['_config'][_0x59c352(0x270)]||_0x191561['_config'][_0x59c352(0x21f)]});}),_0x8fad19['setCoordinator'](_0x1ac43d);};function _0x5a3e90(){var _0x2b8019=_0x2345,_0x525d92=this['_config']=_0xb87415[_0x2b8019(_0x28c390._0x375ac6)](_0x20e8be,arguments[0x0]||{});this['_coordinator']=new _0x20c5d8();if(_0x525d92['plugin']){var _0x343dce=_0x525d92[_0x2b8019(0x20f)];if(!_0x20e8be['plugins'][_0x343dce])throw new Error('Plugin\x20\x27'+_0x343dce+'\x27\x20not\x20found.\x20Maybe\x20it\x20was\x20not\x20registered.');else{var _0x29397d=_0x20e8be['plugins'][_0x343dce];this[_0x2b8019(0x224)]=new _0x29397d['renderer'](_0x525d92),this['_store']=new _0x29397d['store'](_0x525d92);}}else this['_renderer']=new _0x2a0738(_0x525d92),this['_store']=new _0x2b3130(_0x525d92);_0x2a70a8(this);}return _0x5a3e90[_0x1288d3(_0x574933._0x250862)]={'addData':function(){return this['_store']['addData']['apply'](this['_store'],arguments),this;},'removeData':function(){var _0x465ca5=_0x1288d3;return this['_store']['removeData']&&this['_store'][_0x465ca5(_0x2e5989._0x30d498)][_0x465ca5(_0x2e5989._0x2030e2)](this['_store'],arguments),this;},'setData':function(){var _0x305bbb=_0x1288d3;return this[_0x305bbb(0x23c)]['setData']['apply'](this[_0x305bbb(_0x15c25c._0x5073f7)],arguments),this;},'setDataMax':function(){var _0x14b3a5=_0x1288d3;return this['_store'][_0x14b3a5(0x247)]['apply'](this[_0x14b3a5(0x23c)],arguments),this;},'setDataMin':function(){return this['_store']['setDataMin']['apply'](this['_store'],arguments),this;},'configure':function(_0x1ba781){var _0xb1a368=_0x1288d3;return this['_config']=_0xb87415['merge'](this[_0xb1a368(_0x22ac79._0x45dc75)],_0x1ba781),this[_0xb1a368(0x224)][_0xb1a368(0x208)](this['_config']),this[_0xb1a368(0x239)]['emit']('renderall',this[_0xb1a368(0x23c)][_0xb1a368(_0x22ac79._0x72b981)]()),this;},'repaint':function(){var _0x57da02=_0x1288d3;return this[_0x57da02(_0x406068._0x37caa1)]['emit'](_0x57da02(_0x406068._0x5e46e2),this[_0x57da02(0x23c)]['_getInternalData']()),this;},'getData':function(){return this['_store']['getData']();},'getDataURL':function(){var _0x57ddf8=_0x1288d3;return this[_0x57ddf8(_0x5d57cb._0x14896c)]['getDataURL']();},'getValueAt':function(_0xdca433){var _0x407150=_0x1288d3;if(this['_store'][_0x407150(0x223)])return this[_0x407150(0x23c)]['getValueAt'](_0xdca433);else return this[_0x407150(0x224)]['getValueAt']?this['_renderer']['getValueAt'](_0xdca433):null;}},_0x5a3e90;}(),_0x318b26={'create':function(_0x1565cf){return new _0x5f5caf(_0x1565cf);},'register':function(_0x511dfd,_0x5624dd){_0x20e8be['plugins'][_0x511dfd]=_0x5624dd;}};return _0x318b26;}));}(heatmap$1));var heatmap=heatmap$1[_0x3ad84a(0x201)],h337=_mergeNamespaces({'__proto__':null,'default':heatmap},[heatmap$1['exports']]),HeatMaterial=_0x3ad84a(0x26a);if(!heatmap$1['exports'][_0x3ad84a(0x272)])throw new Error(_0x3ad84a(0x218));const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x3ad84a(0x242)]['BaseLayer'],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:_0x3ad84a(0x1f3),0.6:'green',0.8:'yellow',0.9:_0x3ad84a(0x25c)}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium[_0x3ad84a(0x251)][_0x3ad84a(0x24d)]};class HeatLayer extends BaseLayer{constructor(_0x379e54={}){var _0x1a8be9={_0x3e14b2:0x20b,_0x5f18a6:0x279,_0x54a424:0x214,_0x27248c:0x1f6},_0x300952=_0x3ad84a;super(_0x379e54),this['options'][_0x300952(0x279)]=this['options'][_0x300952(0x279)]??document['body']['clientWidth'],this[_0x300952(_0x1a8be9._0x3e14b2)]['maxCanvasSize']=Math['min'](this['options'][_0x300952(_0x1a8be9._0x5f18a6)],0x1388),this['options'][_0x300952(0x214)]=this['options'][_0x300952(0x214)]??document['body']['clientHeight'],this['options'][_0x300952(_0x1a8be9._0x54a424)]=Math[_0x300952(_0x1a8be9._0x27248c)](this['options'][_0x300952(0x214)],0x2bc),this['options']['heatStyle']={...DEF_HEATSTYLE,...this['options'][_0x300952(0x22d)]},this['options']['style']={...DEF_STYLE,...this['options']['style']};}get['layer'](){return this['_layer'];}get['heatStyle'](){var _0x568b14=_0x3ad84a;return this['options'][_0x568b14(0x22d)];}set['heatStyle'](_0x16c205){var _0x45560e={_0x11e0e3:0x20b,_0x3c2d17:0x24e,_0x25e231:0x216},_0x1c10fd=_0x3ad84a;this['options']['heatStyle']=mars3d__namespace['Util']['merge'](this[_0x1c10fd(_0x45560e._0x11e0e3)]['heatStyle'],_0x16c205),this['_heat']&&(this[_0x1c10fd(_0x45560e._0x3c2d17)]['configure'](this[_0x1c10fd(0x20b)][_0x1c10fd(0x22d)]),this[_0x1c10fd(_0x45560e._0x25e231)](!![]));}get['style'](){return this['options']['style'];}set['style'](_0x416918){var _0x46d8d7=_0x3ad84a;this['options']['style']=mars3d__namespace[_0x46d8d7(0x1f7)][_0x46d8d7(0x27e)](this[_0x46d8d7(0x20b)]['style'],_0x416918);}get['positions'](){return this['_positions'];}set['positions'](_0x1f2df6){var _0x1bd387={_0x5b538b:0x258},_0xf0590f=_0x3ad84a;this[_0xf0590f(_0x1bd387._0x5b538b)](_0x1f2df6);}get['coordinates'](){const _0x16646b=[];return this['points']['forEach'](_0x4b6d3e=>{var _0x49e968=_0x2345;_0x16646b['push'](_0x4b6d3e[_0x49e968(0x276)]());}),_0x16646b;}get['rectangle'](){var _0x272d42=_0x3ad84a;return this[_0x272d42(0x222)];}['_setOptionsHook'](_0x34ff7a,_0x4ddf60){var _0x3454f7=_0x3ad84a;_0x34ff7a['positions']&&(this[_0x3454f7(0x246)]=_0x34ff7a['positions']);}[_0x3ad84a(0x263)](){var _0x430b3f={_0x5899ff:0x288},_0x586afd=_0x3ad84a;this['style']['type']==='image'?this['_layer']=new mars3d__namespace['layer'][(_0x586afd(_0x430b3f._0x5899ff))]({'crs':'EPSG:3857','private':!![]}):this['_layer']=new mars3d__namespace[(_0x586afd(0x242))][(_0x586afd(0x286))]({'private':!![]});}['_addedHook'](){var _0x94afaf={_0x42c367:0x25a,_0xd7ee3a:0x26d,_0x36bc95:0x20b},_0x35160c=_0x3ad84a;this['_map'][_0x35160c(0x26e)](this['_layer']),this[_0x35160c(_0x94afaf._0x42c367)]=mars3d__namespace['DomUtil']['create']('div',_0x35160c(0x27b),this[_0x35160c(0x200)][_0x35160c(_0x94afaf._0xd7ee3a)]),this['options']['positions']&&(this['positions']=this[_0x35160c(_0x94afaf._0x36bc95)][_0x35160c(0x246)]),this['options'][_0x35160c(0x235)]&&this[_0x35160c(0x22c)]();}[_0x3ad84a(0x244)](){var _0xf5407={_0x130c66:0x225},_0x13713b=_0x3ad84a;this['_container']&&(mars3d__namespace['DomUtil']['remove'](this['_container']),delete this['_container']),this['clear'](),this['_map']['removeLayer'](this[_0x13713b(_0xf5407._0x130c66)]);}['addPosition'](_0xdcec05,_0x130dde){var _0x2fd9c5={_0x489a09:0x23b},_0x4b676d=_0x3ad84a;this[_0x4b676d(_0x2fd9c5._0x489a09)]=this[_0x4b676d(0x23b)]||[],this['_positions']['push'](_0xdcec05),this['_updatePositionsHook'](_0x130dde);}['setPositions'](_0x7da534,_0x62aa32){var _0x11b2f3=_0x3ad84a;this[_0x11b2f3(0x23b)]=_0x7da534,this['_updatePositionsHook'](_0x62aa32);}['clear'](){var _0x531b90={_0x422935:0x280},_0x2d7c9a=_0x3ad84a;this['_graphic']&&(this['_layer']['removeGraphic'](this['_graphic'],!![]),delete this['_graphic']),this['_graphic2']&&(this['_layer']['removeGraphic'](this[_0x2d7c9a(_0x531b90._0x422935)],!![]),delete this['_graphic2']);}[_0x3ad84a(0x216)](_0x20e73c){var _0x5ad1bc={_0x3dbe17:0x225,_0x9570d7:0x206,_0x53ecc1:0x265,_0xe1699d:0x254,_0x17abdc:0x203,_0x3017b7:0x285,_0x465e19:0x22e,_0x1128ef:0x203,_0x3ae426:0x1f2},_0x563480=_0x3ad84a;if(!this['show']||!this['_map']||!this[_0x563480(0x246)]||this['positions']['length']===0x0)return this;const _0x43925d=this['_getHeatCanvas']();if(this['style']['type']==='image')this[_0x563480(_0x5ad1bc._0x3dbe17)]['setOptions']({'url':_0x43925d[_0x563480(0x271)]('image/png',0x1),'rectangle':this['_rectangle'],'opacity':this[_0x563480(_0x5ad1bc._0x9570d7)][_0x563480(0x1fd)]});else this['style'][_0x563480(_0x5ad1bc._0x53ecc1)]?this['_graphic']&&_0x20e73c?(this['_graphic'][_0x563480(0x203)]['image']=_0x43925d,this['_graphic']['uniforms']['bumpMap']=this[_0x563480(_0x5ad1bc._0xe1699d)](),this[_0x563480(0x280)]&&(this[_0x563480(0x280)]['uniforms']['image']=_0x43925d,this['_graphic2'][_0x563480(_0x5ad1bc._0x17abdc)]['bumpMap']=this[_0x563480(_0x5ad1bc._0x3017b7)]['uniforms']['bumpMap'])):this[_0x563480(_0x5ad1bc._0x465e19)](_0x43925d):this['_graphic']&&_0x20e73c?this[_0x563480(_0x5ad1bc._0x3017b7)][_0x563480(_0x5ad1bc._0x1128ef)]['image']=_0x43925d:this[_0x563480(_0x5ad1bc._0x3ae426)](_0x43925d);return this;}['_createGraphic'](_0x32580f){var _0x199240={_0x1ad00a:0x227,_0x457f73:0x278},_0x8ac436=_0x3ad84a;this['clear'](),this['_graphic']=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':mars3d__namespace[_0x8ac436(_0x199240._0x1ad00a)][_0x8ac436(_0x199240._0x457f73)](mars3d__namespace['MaterialType']['Image2'],{'image':_0x32580f}),'flat':!![]})}),this['_layer']['addGraphic'](this['_graphic']);}['_createArcGraphic'](_0xc0cad5){var _0x3e6db4={_0x4bf848:0x233,_0x53fa99:0x260,_0x20c377:0x287,_0x410465:0x206,_0x182768:0x1f6,_0x5ac721:0x243,_0x11e4d2:0x280},_0xcd657f=_0x3ad84a;this['clear']();const _0x16471a=Cesium['RenderState'][_0xcd657f(0x24b)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium['StencilFunction']['ALWAYS'],'frontOperation':{'fail':Cesium[_0xcd657f(_0x3e6db4._0x4bf848)][_0xcd657f(_0x3e6db4._0x53fa99)],'zFail':Cesium['StencilOperation']['KEEP'],'zPass':Cesium['StencilOperation'][_0xcd657f(0x1fb)]},'backFunction':Cesium['StencilFunction'][_0xcd657f(_0x3e6db4._0x20c377)],'backOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium[_0xcd657f(0x233)][_0xcd657f(_0x3e6db4._0x53fa99)],'zPass':Cesium['StencilOperation']['REPLACE']},'reference':0x2,'mask':0x2},'blending':Cesium['BlendingState']['ALPHA_BLEND']}),_0x51f29a=Math['floor'](this['style']['diffHeight']??this['_mBoundsMax']*0.02)+0.1;this[_0xcd657f(_0x3e6db4._0x410465)][_0xcd657f(0x268)]&&delete this['style']['diffHeight'];const _0x121ef4=(this[_0xcd657f(_0x3e6db4._0x410465)]['splitNum'],0x64);let _0x37d138=Math[_0xcd657f(_0x3e6db4._0x182768)](this['_rectangle']['height'],this['_rectangle'][_0xcd657f(_0x3e6db4._0x5ac721)]);this[_0xcd657f(_0x3e6db4._0x410465)]['granularity']=_0x37d138/=_0x121ef4;const _0x228abb=new Cesium['Material']({'fabric':{'uniforms':{'image':_0xc0cad5,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this[_0xcd657f(0x254)]()},'source':HeatMaterial},'translucent':!![]}),_0x37d0b9=this[_0xcd657f(0x206)]['arcDirection']||0x1;this['_graphic']=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x16471a,'material':_0x228abb,'vertexShaderSource':getVertexShaderSource(_0x51f29a*_0x37d0b9)})}),this['_layer'][_0xcd657f(0x220)](this['_graphic']),this['style']['arcDirection']===0x0&&(this[_0xcd657f(_0x3e6db4._0x11e4d2)]=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x16471a,'material':_0x228abb,'vertexShaderSource':getVertexShaderSource(-_0x51f29a)})}),this['_layer']['addGraphic'](this['_graphic2']));}['getRectangle'](_0x37a5e2){var _0x313ffa={_0x1d342e:0x209},_0x2cb847=_0x3ad84a;return _0x37a5e2!==null&&_0x37a5e2!==void 0x0&&_0x37a5e2['isFormat']&&this['_rectangle']?mars3d__namespace[_0x2cb847(_0x313ffa._0x1d342e)]['formatRectangle'](this[_0x2cb847(0x222)]):this['_rectangle'];}['_getHeatCanvas'](){var _0x4d3f87={_0x553a72:0x20b,_0x4597d1:0x256,_0x272ff1:0x274,_0x4198fb:0x215,_0x4f4ec4:0x279,_0x23d95a:0x21c,_0x116d8c:0x230,_0x532fc4:0x1f6,_0x5cc566:0x234,_0x249483:0x253,_0x376565:0x28b},_0x3f3ae7={_0x351842:0x1f0},_0x26a9bc={_0x5bd3c3:0x23e},_0x4759a6=_0x3ad84a;const _0x279830=this[_0x4759a6(0x23b)],_0x258ebe=[];let _0x10946d,_0x51ada3,_0x40c1dc,_0x4ddcc6;_0x279830['forEach'](_0x244aef=>{var _0x3ecfbb=_0x4759a6;const _0x2cd3af=mars3d__namespace[_0x3ecfbb(_0x26a9bc._0x5bd3c3)]['parse'](_0x244aef);if(!_0x2cd3af)return;_0x2cd3af['value']=_0x244aef['value']||0x1,!this['options']['rectangle']&&(_0x10946d===undefined?(_0x10946d=_0x2cd3af['lng'],_0x51ada3=_0x2cd3af['lng'],_0x40c1dc=_0x2cd3af['lat'],_0x4ddcc6=_0x2cd3af['lat']):(_0x10946d=Math['min'](_0x10946d,_0x2cd3af['lng']),_0x51ada3=Math['max'](_0x51ada3,_0x2cd3af['lng']),_0x40c1dc=Math['min'](_0x40c1dc,_0x2cd3af['lat']),_0x4ddcc6=Math['max'](_0x4ddcc6,_0x2cd3af['lat']))),_0x258ebe[_0x3ecfbb(0x267)](_0x2cd3af);});_0x10946d===_0x51ada3&&(_0x10946d-=0.000001,_0x51ada3+=0.000001);_0x40c1dc===_0x4ddcc6&&(_0x40c1dc-=0.000001,_0x4ddcc6+=0.000001);let _0x129715=this[_0x4759a6(_0x4d3f87._0x553a72)][_0x4759a6(_0x4d3f87._0x4597d1)]||{'xmin':_0x10946d,'xmax':_0x51ada3,'ymin':_0x40c1dc,'ymax':_0x4ddcc6};const _0x3fdd51=getMercatorBounds(_0x129715),_0x33b884=Math['abs'](_0x3fdd51['xmax']-_0x3fdd51['xmin']),_0x596b85=Math[_0x4759a6(_0x4d3f87._0x272ff1)](_0x3fdd51['ymax']-_0x3fdd51[_0x4759a6(_0x4d3f87._0x4198fb)]),_0x5a18be=Math['max'](_0x33b884,_0x596b85),_0x2479a6=Math['min'](_0x33b884,_0x596b85);this['_mBoundsMax']=_0x5a18be;let _0x546772=0x1;if(_0x5a18be>this['options']['maxCanvasSize'])_0x546772=_0x5a18be/this['options'][_0x4759a6(_0x4d3f87._0x4f4ec4)],_0x2479a6/_0x546772<this['options']['minCanvasSize']&&(_0x546772=_0x2479a6/this['options']['minCanvasSize']);else _0x2479a6<this['options']['minCanvasSize']&&(_0x546772=_0x2479a6/this['options']['minCanvasSize'],_0x5a18be/_0x546772>this['options']['maxCanvasSize']&&(_0x546772=_0x5a18be/this['options'][_0x4759a6(_0x4d3f87._0x4f4ec4)]));const _0x5a7947=this[_0x4759a6(0x22d)]['radius']*1.5,_0x3f53a4=_0x33b884/_0x546772+_0x5a7947*0x2,_0x2a383d=_0x596b85/_0x546772+_0x5a7947*0x2,_0x2e5cbf=_0x5a7947*_0x546772;_0x3fdd51[_0x4759a6(_0x4d3f87._0x23d95a)]-=_0x2e5cbf,_0x3fdd51['ymin']-=_0x2e5cbf,_0x3fdd51['xmax']+=_0x2e5cbf,_0x3fdd51['ymax']+=_0x2e5cbf,_0x3fdd51['xmin']=Math[_0x4759a6(0x1f6)](_0x3fdd51['xmin'],-20037508.34),_0x3fdd51['xmax']=Math['min'](_0x3fdd51['xmax'],20037508.34),_0x3fdd51['ymin']=Math['max'](_0x3fdd51['ymin'],-20037508.34),_0x3fdd51['ymax']=Math['min'](_0x3fdd51[_0x4759a6(0x269)],20037508.34),this[_0x4759a6(0x22b)]=_0x546772,_0x129715=geLatLngBounds(_0x3fdd51),this['_rectangle']=Cesium['Rectangle']['fromDegrees'](_0x129715[_0x4759a6(_0x4d3f87._0x23d95a)],_0x129715['ymin'],_0x129715['xmax'],_0x129715[_0x4759a6(0x269)]);let _0x15c3d3=_0x258ebe[0x0][_0x4759a6(0x1f1)]??0x1,_0x47b47e=_0x258ebe[0x0]['value']??0x0;const _0x43cabb=[];_0x258ebe[_0x4759a6(_0x4d3f87._0x116d8c)](_0x5d43cb=>{var _0x3b89ba=_0x4759a6;const _0x2cd85b=mars3d__namespace[_0x3b89ba(_0x3f3ae7._0x351842)]['lonlat2mercator']([_0x5d43cb['lng'],_0x5d43cb[_0x3b89ba(0x273)]]),_0x54d764=_0x5d43cb['value']||0x1,_0x52b72b=Math['round']((_0x2cd85b[0x0]-_0x3fdd51['xmin'])/_0x546772),_0x2db4e9=Math['round']((_0x3fdd51['ymax']-_0x2cd85b[0x1])/_0x546772);_0x15c3d3=Math['max'](_0x15c3d3,_0x54d764),_0x47b47e=Math[_0x3b89ba(0x1ee)](_0x47b47e,_0x54d764),_0x43cabb['push']({'x':_0x52b72b,'y':_0x2db4e9,'value':_0x54d764});});const _0x4d502d={'min':this['options'][_0x4759a6(0x1ee)]??_0x47b47e,'max':this[_0x4759a6(0x20b)][_0x4759a6(_0x4d3f87._0x532fc4)]??_0x15c3d3,'data':_0x43cabb};this[_0x4759a6(0x1fa)]=_0x4d502d;if(!this['_last_mBounds']||_0x3fdd51['xmin']!==this[_0x4759a6(0x289)][_0x4759a6(0x21c)]||_0x3fdd51['ymin']!==this['_last_mBounds']['ymin']||_0x3fdd51['xmax']!==this['_last_mBounds']['xmax']||_0x3fdd51['ymax']!==this[_0x4759a6(0x289)]['ymax']){this['_last_mBounds']=_0x3fdd51,this['_container']['style']['cssText']=_0x4759a6(_0x4d3f87._0x5cc566)+_0x3f53a4+'px;height:'+_0x2a383d+'px;';const _0x1832f2={...this['heatStyle'],'container':this['_container']};!this['_heat']?this['_heat']=heatmap$1['exports']['create'](_0x1832f2):this['_heat']['configure'](_0x1832f2);}this['_heat']['setData'](_0x4d502d);const _0x1f90f3=mars3d__namespace['DomUtil'][_0x4759a6(_0x4d3f87._0x249483)](this['_heat']['_renderer'][_0x4759a6(_0x4d3f87._0x376565)]);return _0x1f90f3;}[_0x3ad84a(0x254)](){var _0x274f10={_0x44782c:0x206,_0x3ab964:0x266,_0xb61763:0x24e,_0x10d5c7:0x1fe},_0x158147=_0x3ad84a;this['_heat']['configure']({'radius':this[_0x158147(0x22d)][_0x158147(0x1f4)]*this['style']['arcRadiusScale'],'blur':this['heatStyle']['blur']*this[_0x158147(_0x274f10._0x44782c)][_0x158147(0x20c)],'gradient':this['heatStyle']['gradientArc']||{0.25:'rgb(0,0,0)',0.55:'rgb(140,140,140)',0.85:_0x158147(_0x274f10._0x3ab964),0x1:'rgb(255,255,255)'}});const _0x55142c=mars3d__namespace['DomUtil']['copyCanvas'](this[_0x158147(_0x274f10._0xb61763)]['_renderer']['canvas']);return this['_heat'][_0x158147(_0x274f10._0x10d5c7)](this['options']['heatStyle']),_0x55142c;}['getPointData'](_0x297405){var _0x31a0b3={_0x156697:0x23d,_0x3b0159:0x231},_0x189dca=_0x3ad84a;const _0x4bcf21=mars3d__namespace['LngLatPoint']['parse'](_0x297405);if(!_0x4bcf21)return{};const _0x107694=mars3d__namespace[_0x189dca(0x1f0)]['lonlat2mercator']([_0x4bcf21['lng'],_0x4bcf21['lat']]),_0x36249a=this[_0x189dca(0x289)],_0x4d6316=Math['round']((_0x107694[0x0]-_0x36249a['xmin'])/this[_0x189dca(0x22b)]),_0x165f4f=Math['round']((_0x36249a[_0x189dca(0x269)]-_0x107694[0x1])/this['_scale']),_0x3e4603=this['_heat'][_0x189dca(0x223)]({'x':_0x4d6316,'y':_0x165f4f}),_0x2a6d16=this[_0x189dca(0x24e)]['_renderer'][_0x189dca(_0x31a0b3._0x156697)][_0x189dca(0x202)](_0x4d6316-0x1,_0x165f4f-0x1,0x1,0x1)[_0x189dca(_0x31a0b3._0x3b0159)];return{'x':_0x4d6316,'y':_0x165f4f,'value':_0x3e4603,'color':'rgba('+_0x2a6d16[0x0]+','+_0x2a6d16[0x1]+','+_0x2a6d16[0x2]+','+_0x2a6d16[0x3]+')'};}}mars3d__namespace['LayerUtil']['register']('heat',HeatLayer),mars3d__namespace['layer']['HeatLayer']=HeatLayer,mars3d__namespace[_0x3ad84a(0x283)]=h337;function getMercatorBounds(_0x2f1519){var _0x5a43a0={_0xda0445:0x22f},_0xaa580d=_0x3ad84a;const _0x3c1af3=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x2f1519['xmin'],_0x2f1519['ymin']]),_0x36a96e=mars3d__namespace['PointTrans'][_0xaa580d(0x277)]([_0x2f1519[_0xaa580d(_0x5a43a0._0xda0445)],_0x2f1519['ymax']]);return{'xmin':_0x3c1af3[0x0],'ymin':_0x3c1af3[0x1],'xmax':_0x36a96e[0x0],'ymax':_0x36a96e[0x1]};}function geLatLngBounds(_0x36be2e){var _0x59985f={_0x1de2a5:0x215,_0x838123:0x1f0},_0x4b9fd5=_0x3ad84a;const _0x2e3ce7=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x36be2e['xmin'],_0x36be2e[_0x4b9fd5(_0x59985f._0x1de2a5)]]),_0x14c4d1=mars3d__namespace[_0x4b9fd5(_0x59985f._0x838123)]['mercator2lonlat']([_0x36be2e['xmax'],_0x36be2e['ymax']]);return{'xmin':_0x2e3ce7[0x0],'ymin':_0x2e3ce7[0x1],'xmax':_0x14c4d1[0x0],'ymax':_0x14c4d1[0x1]};}function getVertexShaderSource(_0x4ea364){return'in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'+_0x4ea364+';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a';}exports['HeatLayer']=HeatLayer,Object['defineProperty'](exports,_0x3ad84a(0x1f9),{'value':!![]});
}));
