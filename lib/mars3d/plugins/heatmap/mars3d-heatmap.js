/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.7.8
 * 编译日期：2024-03-25 20:25:07
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
	typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
	(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';var _0x3a1264=_0x35be;(function(_0x59c64a,_0x39c61f){var _0x155ab9={_0x5d46ea:0x139,_0x5919a0:0x121,_0x19afaa:0x180,_0x39955d:0x18e,_0x5e97d:0x168,_0x37078b:0x152},_0x211306=_0x35be,_0x3f2f09=_0x59c64a();while(!![]){try{var _0x404576=-parseInt(_0x211306(0x12d))/0x1+-parseInt(_0x211306(0x12e))/0x2+-parseInt(_0x211306(_0x155ab9._0x5d46ea))/0x3*(-parseInt(_0x211306(_0x155ab9._0x5919a0))/0x4)+-parseInt(_0x211306(_0x155ab9._0x19afaa))/0x5*(parseInt(_0x211306(_0x155ab9._0x39955d))/0x6)+-parseInt(_0x211306(_0x155ab9._0x5e97d))/0x7+-parseInt(_0x211306(0x159))/0x8+-parseInt(_0x211306(_0x155ab9._0x37078b))/0x9*(-parseInt(_0x211306(0x182))/0xa);if(_0x404576===_0x39c61f)break;else _0x3f2f09['push'](_0x3f2f09['shift']());}catch(_0x4357e4){_0x3f2f09['push'](_0x3f2f09['shift']());}}}(_0x3d7a,0x2de17));function _interopNamespace(_0x32aa9b){var _0x2f168a={_0x4437f3:0x111},_0x436039=_0x35be;if(_0x32aa9b&&_0x32aa9b['__esModule'])return _0x32aa9b;var _0x9346d0=Object['create'](null);return _0x32aa9b&&Object[_0x436039(_0x2f168a._0x4437f3)](_0x32aa9b)['forEach'](function(_0x4d70dc){if(_0x4d70dc!=='default'){var _0x252f71=Object['getOwnPropertyDescriptor'](_0x32aa9b,_0x4d70dc);Object['defineProperty'](_0x9346d0,_0x4d70dc,_0x252f71['get']?_0x252f71:{'enumerable':!![],'get':function(){return _0x32aa9b[_0x4d70dc];}});}}),_0x9346d0['default']=_0x32aa9b,_0x9346d0;}function _mergeNamespaces(_0x1e29b5,_0x3b054c){var _0xbe9c04={_0x2f8588:0x122},_0x38f6cb={_0xe0206b:0x16c},_0x1ce93a=_0x35be;return _0x3b054c[_0x1ce93a(_0xbe9c04._0x2f8588)](function(_0x4815c2){var _0x4831fe=_0x1ce93a;_0x4815c2&&typeof _0x4815c2!=='string'&&!Array[_0x4831fe(0xfe)](_0x4815c2)&&Object['keys'](_0x4815c2)['forEach'](function(_0x5c28b5){var _0x15bb06=_0x4831fe;if(_0x5c28b5!==_0x15bb06(_0x38f6cb._0xe0206b)&&!(_0x5c28b5 in _0x1e29b5)){var _0x107782=Object[_0x15bb06(0x174)](_0x4815c2,_0x5c28b5);Object['defineProperty'](_0x1e29b5,_0x5c28b5,_0x107782['get']?_0x107782:{'enumerable':!![],'get':function(){return _0x4815c2[_0x5c28b5];}});}});}),_0x1e29b5;}function _0x35be(_0x14478b,_0x104d8d){var _0x3d7ae7=_0x3d7a();return _0x35be=function(_0x35be3e,_0x2d2533){_0x35be3e=_0x35be3e-0xf5;var _0x4722d2=_0x3d7ae7[_0x35be3e];return _0x4722d2;},_0x35be(_0x14478b,_0x104d8d);}var mars3d__namespace=_interopNamespace(mars3d),commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!==_0x3a1264(0x156)?self:{},heatmap$1={'exports':{}};(function(_0x21c7e8){(function(_0x1929f5,_0x439cf8,_0x29feba){_0x21c7e8['exports']?_0x21c7e8['exports']=_0x29feba():_0x439cf8[_0x1929f5]=_0x29feba();}('h337',commonjsGlobal,function(){var _0x384840={_0x286ca2:0x12f,_0x1d34e0:0x114,_0x3f3ffb:0x16d,_0x318d2a:0xff},_0x3e49ca={_0x31f584:0x124},_0x113e54={_0x12dc7a:0xff},_0x890322={_0x32cd86:0x11c,_0x32deea:0x16e},_0xd8fa0e={_0xbdae7c:0x14b},_0x5a228b={_0x573627:0x154},_0x4dec20={_0x22ff3f:0x15a},_0x2178f5={_0x4bb67e:0x17b,_0x4a0013:0x16b},_0x518c8a={_0x3920cf:0x155,_0x5577e8:0x183},_0x163ea3={_0x169f16:0x112,_0x573a4a:0x155},_0x3c85d4={_0x498802:0x16d},_0x9932c8={_0x214154:0x173},_0x255491={_0x5a51d3:0x15a},_0x1bce93={_0x42f955:0x18b,_0x26c3d7:0x196},_0x4e05fc=_0x35be,_0x2da814={'defaultRadius':0x28,'defaultRenderer':_0x4e05fc(0x176),'defaultGradient':{0.25:'rgb(0,0,255)',0.55:_0x4e05fc(0xf6),0.85:'yellow',0x1:'rgb(255,0,0)'},'defaultMaxOpacity':0x1,'defaultMinOpacity':0x0,'defaultBlur':0.85,'defaultXField':'x','defaultYField':'y','defaultValueField':'value','plugins':{}},_0x4c8d94=function _0x20f0ad(){var _0x3a99eb={_0x1a8475:0x17c,_0x264e43:0x175},_0x1e7462={_0x1ba048:0x143},_0x2a032d={_0x1ff5f3:0x12c,_0x21d0fc:0x173},_0x2faa3d={_0x8ceba6:0x14b},_0x5b8307={_0x3d59ea:0x14b,_0x2c1942:0x196},_0x30e88e=function _0x279aff(_0x4f7d63){var _0x34bc85=_0x35be;this['_coordinator']={},this['_data']=[],this['_radi']=[],this[_0x34bc85(_0x5b8307._0x3d59ea)]=0xa,this[_0x34bc85(_0x5b8307._0x2c1942)]=0x1,this['_xField']=_0x4f7d63['xField']||_0x4f7d63[_0x34bc85(0x17a)],this[_0x34bc85(0x169)]=_0x4f7d63['yField']||_0x4f7d63[_0x34bc85(0x101)],this['_valueField']=_0x4f7d63['valueField']||_0x4f7d63['defaultValueField'],_0x4f7d63['radius']&&(this['_cfgRadius']=_0x4f7d63[_0x34bc85(0x138)]);},_0x367cbc=_0x2da814['defaultRadius'];return _0x30e88e['prototype']={'_organiseData':function(_0x30a0f5,_0x2ce2b2){var _0x4b70a1=_0x35be,_0x17b718=_0x30a0f5[this[_0x4b70a1(0x194)]],_0x13a19f=_0x30a0f5[this['_yField']],_0xa9863f=this['_radi'],_0x1f2a00=this['_data'],_0x3929f4=this['_max'],_0xd7236c=this['_min'],_0x23dd7c=_0x30a0f5[this['_valueField']]||0x1,_0x356705=_0x30a0f5['radius']||this['_cfgRadius']||_0x367cbc;!_0x1f2a00[_0x17b718]&&(_0x1f2a00[_0x17b718]=[],_0xa9863f[_0x17b718]=[]);!_0x1f2a00[_0x17b718][_0x13a19f]?(_0x1f2a00[_0x17b718][_0x13a19f]=_0x23dd7c,_0xa9863f[_0x17b718][_0x13a19f]=_0x356705):_0x1f2a00[_0x17b718][_0x13a19f]+=_0x23dd7c;var _0x4af8a0=_0x1f2a00[_0x17b718][_0x13a19f];if(_0x4af8a0>_0x3929f4)return!_0x2ce2b2?this['_max']=_0x4af8a0:this['setDataMax'](_0x4af8a0),![];else return _0x4af8a0<_0xd7236c?(!_0x2ce2b2?this['_min']=_0x4af8a0:this[_0x4b70a1(0x17e)](_0x4af8a0),![]):{'x':_0x17b718,'y':_0x13a19f,'value':_0x23dd7c,'radius':_0x356705,'min':_0xd7236c,'max':_0x3929f4};},'_unOrganizeData':function(){var _0x32b28b=_0x35be,_0xadea15=[],_0x34a544=this[_0x32b28b(0x17c)],_0x5c1121=this['_radi'];for(var _0x4c4b38 in _0x34a544){for(var _0x5916c1 in _0x34a544[_0x4c4b38]){_0xadea15[_0x32b28b(_0x1bce93._0x42f955)]({'x':_0x4c4b38,'y':_0x5916c1,'radius':_0x5c1121[_0x4c4b38][_0x5916c1],'value':_0x34a544[_0x4c4b38][_0x5916c1]});}}return{'min':this['_min'],'max':this[_0x32b28b(_0x1bce93._0x26c3d7)],'data':_0xadea15};},'_onExtremaChange':function(){var _0x42b662=_0x35be;this['_coordinator']['emit']('extremachange',{'min':this[_0x42b662(_0x2faa3d._0x8ceba6)],'max':this['_max']});},'addData':function(){var _0x4b99f4=_0x35be;if(arguments[0x0][_0x4b99f4(_0x255491._0x5a51d3)]>0x0){var _0x1a0076=arguments[0x0],_0x1a05c0=_0x1a0076['length'];while(_0x1a05c0--){this['addData']['call'](this,_0x1a0076[_0x1a05c0]);}}else{var _0x589a4b=this['_organiseData'](arguments[0x0],!![]);_0x589a4b&&(this['_data']['length']===0x0&&(this['_min']=this['_max']=_0x589a4b[_0x4b99f4(0x15e)]),this['_coordinator'][_0x4b99f4(0x13e)]('renderpartial',{'min':this['_min'],'max':this['_max'],'data':[_0x589a4b]}));}return this;},'setData':function(_0x308ca9){var _0x582381=_0x35be,_0x993047=_0x308ca9['data'],_0x4e8dce=_0x993047['length'];this['_data']=[],this['_radi']=[];for(var _0x4b6c90=0x0;_0x4b6c90<_0x4e8dce;_0x4b6c90++){this[_0x582381(_0x2a032d._0x1ff5f3)](_0x993047[_0x4b6c90],![]);}return this[_0x582381(0x196)]=_0x308ca9['max'],this['_min']=_0x308ca9['min']||0x0,this['_onExtremaChange'](),this['_coordinator']['emit'](_0x582381(_0x2a032d._0x21d0fc),this['_getInternalData']()),this;},'removeData':function(){},'setDataMax':function(_0x549c59){var _0x26212=_0x35be;return this['_max']=_0x549c59,this[_0x26212(0x18f)](),this['_coordinator']['emit']('renderall',this[_0x26212(_0x1e7462._0x1ba048)]()),this;},'setDataMin':function(_0x210ff6){var _0x212fa=_0x35be;return this['_min']=_0x210ff6,this['_onExtremaChange'](),this['_coordinator']['emit'](_0x212fa(_0x9932c8._0x214154),this['_getInternalData']()),this;},'setCoordinator':function(_0x219c4d){var _0x178b60=_0x35be;this[_0x178b60(_0x3c85d4._0x498802)]=_0x219c4d;},'_getInternalData':function(){var _0x15ca4d=_0x35be;return{'max':this['_max'],'min':this['_min'],'data':this[_0x15ca4d(_0x3a99eb._0x1a8475)],'radi':this[_0x15ca4d(_0x3a99eb._0x264e43)]};},'getData':function(){var _0x362574=_0x35be;return this[_0x362574(0x10f)]();}},_0x30e88e;}(),_0x3a9bf5=function _0x323321(){var _0x135a68={_0x3e50e6:0x125,_0x4a828d:0x125,_0x1bf528:0x106,_0x5cfbde:0x181},_0x336177={_0x3e48c9:0x11e,_0x39141d:0x160,_0x5bb9fe:0x16f,_0x2c3fa0:0x12a,_0x556d92:0x112,_0x557458:0x195,_0x257dc0:0x157,_0x1eddf2:0x11b,_0x23527a:0x177},_0x47ef7e={_0x2ba0c6:0x107},_0x4a635c={_0x2df183:0x12a},_0x4d8ce6={_0x541898:0x118},_0x51407c={_0xebd5f6:0x15f,_0x4c0615:0x11d,_0x1ba8a4:0x15a},_0x689a9a={_0x1e3158:0x111},_0x1975fd=function(_0x1f612a){var _0x4334e1=_0x35be,_0x280b1d=_0x1f612a['gradient']||_0x1f612a['defaultGradient'],_0x3aead8=document['createElement'](_0x4334e1(_0x163ea3._0x169f16)),_0x10d6fc=_0x3aead8[_0x4334e1(0x144)]('2d',{'willReadFrequently':!![]});_0x3aead8['width']=0x100,_0x3aead8['height']=0x1;var _0x17d087=_0x10d6fc['createLinearGradient'](0x0,0x0,0x100,0x1);for(var _0x1cc7d9 in _0x280b1d){_0x17d087[_0x4334e1(_0x163ea3._0x573a4a)](_0x1cc7d9,_0x280b1d[_0x1cc7d9]);}return _0x10d6fc['fillStyle']=_0x17d087,_0x10d6fc[_0x4334e1(0x185)](0x0,0x0,0x100,0x1),_0x10d6fc['getImageData'](0x0,0x0,0x100,0x1)['data'];},_0x2f7653=function(_0x4ec83c,_0x1b1408){var _0x9c6ce3=_0x35be,_0x49fa26=document['createElement']('canvas'),_0x419800=_0x49fa26['getContext']('2d',{'willReadFrequently':!![]}),_0x30281a=_0x4ec83c,_0x384fb3=_0x4ec83c;_0x49fa26['width']=_0x49fa26['height']=_0x4ec83c*0x2;if(_0x1b1408==0x1)_0x419800['beginPath'](),_0x419800['arc'](_0x30281a,_0x384fb3,_0x4ec83c,0x0,0x2*Math['PI'],![]),_0x419800['fillStyle']='rgba(0,0,0,1)',_0x419800['fill']();else{var _0x88f491=_0x419800['createRadialGradient'](_0x30281a,_0x384fb3,_0x4ec83c*_0x1b1408,_0x30281a,_0x384fb3,_0x4ec83c);_0x88f491[_0x9c6ce3(_0x518c8a._0x3920cf)](0x0,'rgba(0,0,0,1)'),_0x88f491[_0x9c6ce3(0x155)](0x1,'rgba(0,0,0,0)'),_0x419800[_0x9c6ce3(_0x518c8a._0x5577e8)]=_0x88f491,_0x419800['fillRect'](0x0,0x0,0x2*_0x4ec83c,0x2*_0x4ec83c);}return _0x49fa26;},_0x5b169f=function(_0x1685c6){var _0x18ed23=_0x35be,_0x4bedee=[],_0xcf0ca6=_0x1685c6['min'],_0x3f1625=_0x1685c6['max'],_0x5e06f0=_0x1685c6['radi'],_0x1685c6=_0x1685c6['data'],_0x32301e=Object['keys'](_0x1685c6),_0x2d494a=_0x32301e['length'];while(_0x2d494a--){var _0x259136=_0x32301e[_0x2d494a],_0x3231d6=Object[_0x18ed23(_0x689a9a._0x1e3158)](_0x1685c6[_0x259136]),_0x33e18e=_0x3231d6['length'];while(_0x33e18e--){var _0xbac79e=_0x3231d6[_0x33e18e],_0x3d39e6=_0x1685c6[_0x259136][_0xbac79e],_0x287955=_0x5e06f0[_0x259136][_0xbac79e];_0x4bedee['push']({'x':_0x259136,'y':_0xbac79e,'value':_0x3d39e6,'radius':_0x287955});}}return{'min':_0xcf0ca6,'max':_0x3f1625,'data':_0x4bedee};};function _0x4e6436(_0x124a8c){var _0x1c0257=_0x35be,_0x288779=_0x124a8c['container'],_0x328882=this['shadowCanvas']=document['createElement']('canvas'),_0x120ec2=this['canvas']=_0x124a8c['canvas']||document['createElement']('canvas');this['_renderBoundaries']=[0x2710,0x2710,0x0,0x0];var _0x5eb1c3=getComputedStyle(_0x124a8c['container'])||{};_0x120ec2[_0x1c0257(_0x2178f5._0x4bb67e)]=_0x1c0257(0x165),this['_width']=_0x120ec2[_0x1c0257(0x16f)]=_0x328882['width']=_0x124a8c['width']||+_0x5eb1c3['width'][_0x1c0257(0x13d)](/px/,''),this[_0x1c0257(0x120)]=_0x120ec2['height']=_0x328882['height']=_0x124a8c['height']||+_0x5eb1c3['height']['replace'](/px/,''),this['shadowCtx']=_0x328882['getContext']('2d',{'willReadFrequently':!![]}),this['ctx']=_0x120ec2['getContext']('2d',{'willReadFrequently':!![]}),_0x120ec2['style'][_0x1c0257(_0x2178f5._0x4a0013)]=_0x328882[_0x1c0257(0x178)][_0x1c0257(_0x2178f5._0x4a0013)]=_0x1c0257(0x127),_0x288779[_0x1c0257(0x178)]['position']='relative',_0x288779['appendChild'](_0x120ec2),this['_palette']=_0x1975fd(_0x124a8c),this['_templates']={},this[_0x1c0257(0x105)](_0x124a8c);}return _0x4e6436['prototype']={'renderPartial':function(_0x300d85){var _0x5e01ae=_0x35be;_0x300d85['data'][_0x5e01ae(_0x4dec20._0x22ff3f)]>0x0&&(this[_0x5e01ae(0x167)](_0x300d85),this['_colorize']());},'renderAll':function(_0x58f90c){var _0x72ac42=_0x35be;this[_0x72ac42(_0x51407c._0xebd5f6)](),_0x58f90c[_0x72ac42(_0x51407c._0x4c0615)][_0x72ac42(_0x51407c._0x1ba8a4)]>0x0&&(this['_drawAlpha'](_0x5b169f(_0x58f90c)),this['_colorize']());},'_updateGradient':function(_0x2b3ad9){var _0x4033af=_0x35be;this[_0x4033af(_0x4d8ce6._0x541898)]=_0x1975fd(_0x2b3ad9);},'updateConfig':function(_0x2a9de7){var _0x356d2d=_0x35be;_0x2a9de7['gradient']&&this[_0x356d2d(_0x5a228b._0x573627)](_0x2a9de7),this['_setStyles'](_0x2a9de7);},'setDimensions':function(_0x201d3f,_0x30e4c4){var _0x13038c=_0x35be;this[_0x13038c(0xfa)]=_0x201d3f,this[_0x13038c(0x120)]=_0x30e4c4,this['canvas'][_0x13038c(0x16f)]=this[_0x13038c(_0x4a635c._0x2df183)]['width']=_0x201d3f,this['canvas']['height']=this['shadowCanvas']['height']=_0x30e4c4;},'_clear':function(){var _0x142458=_0x35be;this['shadowCtx']['clearRect'](0x0,0x0,this['_width'],this['_height']),this['ctx'][_0x142458(_0x47ef7e._0x2ba0c6)](0x0,0x0,this['_width'],this['_height']);},'_setStyles':function(_0x255ab1){var _0x2bd782=_0x35be;this[_0x2bd782(_0x336177._0x3e48c9)]=_0x255ab1['blur']==0x0?0x0:_0x255ab1['blur']||_0x255ab1[_0x2bd782(_0x336177._0x39141d)],_0x255ab1['backgroundColor']&&(this[_0x2bd782(0x112)]['style']['backgroundColor']=_0x255ab1['backgroundColor']),this['_width']=this[_0x2bd782(0x112)][_0x2bd782(_0x336177._0x5bb9fe)]=this[_0x2bd782(_0x336177._0x2c3fa0)]['width']=_0x255ab1[_0x2bd782(0x16f)]||this[_0x2bd782(0xfa)],this['_height']=this[_0x2bd782(_0x336177._0x556d92)]['height']=this['shadowCanvas'][_0x2bd782(0x18d)]=_0x255ab1['height']||this['_height'],this['_opacity']=(_0x255ab1[_0x2bd782(_0x336177._0x557458)]||0x0)*0xff,this['_maxOpacity']=(_0x255ab1[_0x2bd782(_0x336177._0x257dc0)]||_0x255ab1['defaultMaxOpacity'])*0xff,this[_0x2bd782(_0x336177._0x1eddf2)]=(_0x255ab1[_0x2bd782(0x129)]||_0x255ab1[_0x2bd782(_0x336177._0x23527a)])*0xff,this['_useGradientOpacity']=!!_0x255ab1[_0x2bd782(0x14d)];},'_drawAlpha':function(_0x26a8d5){var _0x13e0e9=_0x35be,_0x5457db=this['_min']=_0x26a8d5[_0x13e0e9(_0x135a68._0x3e50e6)],_0x5bc6da=this['_max']=_0x26a8d5['max'],_0x26a8d5=_0x26a8d5[_0x13e0e9(0x11d)]||[],_0xaae77d=_0x26a8d5['length'],_0x210842=0x1-this['_blur'];while(_0xaae77d--){var _0xe34b13=_0x26a8d5[_0xaae77d],_0x1980eb=_0xe34b13['x'],_0x3be1a8=_0xe34b13['y'],_0x3fc777=_0xe34b13['radius'],_0x5587eb=Math[_0x13e0e9(_0x135a68._0x4a828d)](_0xe34b13['value'],_0x5bc6da),_0x1b42da=_0x1980eb-_0x3fc777,_0x431695=_0x3be1a8-_0x3fc777,_0x2b668a=this['shadowCtx'],_0x3f9799;!this['_templates'][_0x3fc777]?this['_templates'][_0x3fc777]=_0x3f9799=_0x2f7653(_0x3fc777,_0x210842):_0x3f9799=this[_0x13e0e9(_0x135a68._0x1bf528)][_0x3fc777];var _0xda4b79=(_0x5587eb-_0x5457db)/(_0x5bc6da-_0x5457db);_0x2b668a['globalAlpha']=_0xda4b79<0.01?0.01:_0xda4b79,_0x2b668a['drawImage'](_0x3f9799,_0x1b42da,_0x431695),_0x1b42da<this[_0x13e0e9(0x181)][0x0]&&(this[_0x13e0e9(0x181)][0x0]=_0x1b42da),_0x431695<this['_renderBoundaries'][0x1]&&(this[_0x13e0e9(_0x135a68._0x5cfbde)][0x1]=_0x431695),_0x1b42da+0x2*_0x3fc777>this['_renderBoundaries'][0x2]&&(this['_renderBoundaries'][0x2]=_0x1b42da+0x2*_0x3fc777),_0x431695+0x2*_0x3fc777>this['_renderBoundaries'][0x3]&&(this['_renderBoundaries'][0x3]=_0x431695+0x2*_0x3fc777);}},'_colorize':function(){var _0x3876af=_0x35be,_0x41c78e=this[_0x3876af(0x181)][0x0],_0x26e0f1=this['_renderBoundaries'][0x1],_0x32ac04=this['_renderBoundaries'][0x2]-_0x41c78e,_0xca9d7c=this['_renderBoundaries'][0x3]-_0x26e0f1,_0x51047c=this['_width'],_0x482b58=this['_height'],_0x56888d=this['_opacity'],_0x28c2a2=this['_maxOpacity'],_0xafad86=this['_minOpacity'],_0x164ba4=this['_useGradientOpacity'];_0x41c78e<0x0&&(_0x41c78e=0x0);_0x26e0f1<0x0&&(_0x26e0f1=0x0);_0x41c78e+_0x32ac04>_0x51047c&&(_0x32ac04=_0x51047c-_0x41c78e);_0x26e0f1+_0xca9d7c>_0x482b58&&(_0xca9d7c=_0x482b58-_0x26e0f1);var _0xff056f=this['shadowCtx']['getImageData'](_0x41c78e,_0x26e0f1,_0x32ac04,_0xca9d7c),_0xc0c004=_0xff056f[_0x3876af(0x11d)],_0xf9f5e3=_0xc0c004['length'],_0x2a454a=this['_palette'];for(var _0x453de2=0x3;_0x453de2<_0xf9f5e3;_0x453de2+=0x4){var _0x322926=_0xc0c004[_0x453de2],_0xe68f93=_0x322926*0x4;if(!_0xe68f93)continue;var _0x15ceb4;_0x56888d>0x0?_0x15ceb4=_0x56888d:_0x322926<_0x28c2a2?_0x322926<_0xafad86?_0x15ceb4=_0xafad86:_0x15ceb4=_0x322926:_0x15ceb4=_0x28c2a2,_0xc0c004[_0x453de2-0x3]=_0x2a454a[_0xe68f93],_0xc0c004[_0x453de2-0x2]=_0x2a454a[_0xe68f93+0x1],_0xc0c004[_0x453de2-0x1]=_0x2a454a[_0xe68f93+0x2],_0xc0c004[_0x453de2]=_0x164ba4?_0x2a454a[_0xe68f93+0x3]:_0x15ceb4;}this['ctx']['putImageData'](_0xff056f,_0x41c78e,_0x26e0f1),this['_renderBoundaries']=[0x3e8,0x3e8,0x0,0x0];},'getValueAt':function(_0x394708){var _0x3bc033=_0x35be,_0x3b3096,_0x3de9e7=this['shadowCtx'],_0x4cd8f2=_0x3de9e7['getImageData'](_0x394708['x'],_0x394708['y'],0x1,0x1),_0x10b015=_0x4cd8f2[_0x3bc033(0x11d)][0x3],_0x307cea=this['_max'],_0x59dc63=this[_0x3bc033(_0xd8fa0e._0xbdae7c)];return _0x3b3096=Math['abs'](_0x307cea-_0x59dc63)*(_0x10b015/0xff)>>0x0,_0x3b3096;},'getDataURL':function(){return this['canvas']['toDataURL']();}},_0x4e6436;}(),_0x55b562=function _0x1e6fb9(){var _0x3b98e5=![];return _0x2da814['defaultRenderer']==='canvas2d'&&(_0x3b98e5=_0x3a9bf5),_0x3b98e5;}(),_0x327f44={'merge':function(){var _0x53470a=_0x4e05fc,_0x5b7668={},_0x5cd19c=arguments[_0x53470a(0x15a)];for(var _0x1e4ff5=0x0;_0x1e4ff5<_0x5cd19c;_0x1e4ff5++){var _0x1b3866=arguments[_0x1e4ff5];for(var _0x51890c in _0x1b3866){_0x5b7668[_0x51890c]=_0x1b3866[_0x51890c];}}return _0x5b7668;}},_0x4006d8=function _0x430864(){var _0xf4d869={_0x43212b:0x115,_0x20979d:0x163},_0x1d6662={_0x5e70c0:0x16d},_0x4b4895={_0x378427:0xff,_0x3854f6:0x13c},_0x2ccb25={_0x365195:0x12f,_0x2bd2a3:0xff},_0x596471=function _0x18a79b(){function _0x414234(){this['cStore']={};}return _0x414234['prototype']={'on':function(_0x112983,_0x45980a,_0x14d329){var _0x590dc1=this['cStore'];!_0x590dc1[_0x112983]&&(_0x590dc1[_0x112983]=[]),_0x590dc1[_0x112983]['push'](function(_0x2ba5ee){return _0x45980a['call'](_0x14d329,_0x2ba5ee);});},'emit':function(_0x33a9d1,_0x1702fb){var _0x45d3ab=_0x35be,_0x5eaac2=this[_0x45d3ab(0x14c)];if(_0x5eaac2[_0x33a9d1]){var _0x3a47a6=_0x5eaac2[_0x33a9d1]['length'];for(var _0x4d548b=0x0;_0x4d548b<_0x3a47a6;_0x4d548b++){var _0x1f1578=_0x5eaac2[_0x33a9d1][_0x4d548b];_0x1f1578(_0x1702fb);}}}},_0x414234;}(),_0x4f3a01=function(_0x533682){var _0x5e8a8e=_0x35be,_0x3e7584=_0x533682['_renderer'],_0x2fe4dc=_0x533682[_0x5e8a8e(0x16d)],_0x1a5511=_0x533682['_store'];_0x2fe4dc['on'](_0x5e8a8e(_0x890322._0x32cd86),_0x3e7584[_0x5e8a8e(0x172)],_0x3e7584),_0x2fe4dc['on']('renderall',_0x3e7584[_0x5e8a8e(_0x890322._0x32deea)],_0x3e7584),_0x2fe4dc['on'](_0x5e8a8e(0x158),function(_0x3db03e){var _0x4b822d=_0x5e8a8e;_0x533682['_config']['onExtremaChange']&&_0x533682['_config'][_0x4b822d(0x117)]({'min':_0x3db03e['min'],'max':_0x3db03e['max'],'gradient':_0x533682['_config']['gradient']||_0x533682[_0x4b822d(0x12f)]['defaultGradient']});}),_0x1a5511[_0x5e8a8e(0x130)](_0x2fe4dc);};function _0x3c45c2(){var _0x2f13bc=_0x35be,_0x505d68=this[_0x2f13bc(_0x2ccb25._0x365195)]=_0x327f44['merge'](_0x2da814,arguments[0x0]||{});this['_coordinator']=new _0x596471();if(_0x505d68['plugin']){var _0x810be9=_0x505d68['plugin'];if(!_0x2da814[_0x2f13bc(0x15d)][_0x810be9])throw new Error('Plugin\x20\x27'+_0x810be9+'\x27\x20not\x20found.\x20Maybe\x20it\x20was\x20not\x20registered.');else{var _0x1171a5=_0x2da814['plugins'][_0x810be9];this['_renderer']=new _0x1171a5[(_0x2f13bc(0x162))](_0x505d68),this['_store']=new _0x1171a5['store'](_0x505d68);}}else this['_renderer']=new _0x55b562(_0x505d68),this[_0x2f13bc(_0x2ccb25._0x2bd2a3)]=new _0x4c8d94(_0x505d68);_0x4f3a01(this);}return _0x3c45c2['prototype']={'addData':function(){var _0x34f965=_0x35be;return this[_0x34f965(_0x113e54._0x12dc7a)]['addData']['apply'](this['_store'],arguments),this;},'removeData':function(){var _0x9c0bd9=_0x35be;return this['_store'][_0x9c0bd9(_0x3e49ca._0x31f584)]&&this['_store']['removeData']['apply'](this[_0x9c0bd9(0xff)],arguments),this;},'setData':function(){var _0x56cfa9=_0x35be;return this['_store']['setData'][_0x56cfa9(0x134)](this['_store'],arguments),this;},'setDataMax':function(){var _0x238930=_0x35be;return this[_0x238930(_0x4b4895._0x378427)][_0x238930(_0x4b4895._0x3854f6)]['apply'](this[_0x238930(0xff)],arguments),this;},'setDataMin':function(){return this['_store']['setDataMin']['apply'](this['_store'],arguments),this;},'configure':function(_0x1e2766){var _0x43b25e=_0x35be;return this[_0x43b25e(_0x384840._0x286ca2)]=_0x327f44[_0x43b25e(_0x384840._0x1d34e0)](this[_0x43b25e(0x12f)],_0x1e2766),this['_renderer']['updateConfig'](this['_config']),this[_0x43b25e(_0x384840._0x3f3ffb)]['emit']('renderall',this[_0x43b25e(_0x384840._0x318d2a)]['_getInternalData']()),this;},'repaint':function(){var _0x2f087a=_0x35be;return this[_0x2f087a(_0x1d6662._0x5e70c0)]['emit']('renderall',this['_store']['_getInternalData']()),this;},'getData':function(){var _0x18ed18=_0x35be;return this['_store'][_0x18ed18(0x171)]();},'getDataURL':function(){var _0x2b832b=_0x35be;return this[_0x2b832b(_0xf4d869._0x43212b)][_0x2b832b(_0xf4d869._0x20979d)]();},'getValueAt':function(_0x9eaed4){var _0xb523ba=_0x35be;if(this[_0xb523ba(0xff)]['getValueAt'])return this['_store']['getValueAt'](_0x9eaed4);else return this['_renderer']['getValueAt']?this['_renderer']['getValueAt'](_0x9eaed4):null;}},_0x3c45c2;}(),_0x4c2f8e={'create':function(_0x4c1d13){return new _0x4006d8(_0x4c1d13);},'register':function(_0x248587,_0x3a4087){_0x2da814['plugins'][_0x248587]=_0x3a4087;}};return _0x4c2f8e;}));}(heatmap$1));var heatmap=heatmap$1[_0x3a1264(0x145)],h337=_mergeNamespaces({'__proto__':null,'default':heatmap},[heatmap$1['exports']]),HeatMaterial=_0x3a1264(0x10d);if(!heatmap$1['exports']['create'])throw new Error('请引入\x20heatmap.js\x20库\x20');const Cesium=mars3d__namespace[_0x3a1264(0x119)],BaseLayer=mars3d__namespace['layer']['BaseLayer'],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:'blue',0.6:_0x3a1264(0x187),0.8:'yellow',0.9:_0x3a1264(0x18a)}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium['EllipsoidSurfaceAppearance']['VERTEX_FORMAT']};class HeatLayer extends BaseLayer{constructor(_0x303d8e={}){var _0x3cb3a7={_0x4cb55c:0x151,_0x101c3d:0x149,_0x5371ed:0x146,_0x1141e2:0x178},_0xdf3000=_0x3a1264;super(_0x303d8e),this['options']['maxCanvasSize']=this[_0xdf3000(_0x3cb3a7._0x4cb55c)]['maxCanvasSize']??document[_0xdf3000(0x148)]['clientWidth'],this['options'][_0xdf3000(_0x3cb3a7._0x101c3d)]=Math['min'](this[_0xdf3000(0x151)]['maxCanvasSize'],0x1388),this['options']['minCanvasSize']=this['options']['minCanvasSize']??document['body']['clientHeight'],this['options']['minCanvasSize']=Math['max'](this['options'][_0xdf3000(0x18c)],0x2bc),this['options'][_0xdf3000(_0x3cb3a7._0x5371ed)]={...DEF_HEATSTYLE,...this[_0xdf3000(_0x3cb3a7._0x4cb55c)]['heatStyle']},this['options'][_0xdf3000(_0x3cb3a7._0x1141e2)]={...DEF_STYLE,...this[_0xdf3000(0x151)][_0xdf3000(_0x3cb3a7._0x1141e2)]};}get['layer'](){return this['_layer'];}get[_0x3a1264(0x146)](){var _0x3fe48e={_0x4483e8:0x151},_0x146a7c=_0x3a1264;return this[_0x146a7c(_0x3fe48e._0x4483e8)]['heatStyle'];}set['heatStyle'](_0x31c47a){var _0x3a3c15={_0x263b76:0x146,_0x14b1d9:0x179},_0xc42554=_0x3a1264;this['options'][_0xc42554(_0x3a3c15._0x263b76)]=mars3d__namespace['Util']['merge'](this['options']['heatStyle'],_0x31c47a),this['_heat']&&(this[_0xc42554(_0x3a3c15._0x14b1d9)]['configure'](this['options']['heatStyle']),this[_0xc42554(0x108)](!![]));}get['style'](){return this['options']['style'];}set['style'](_0x310c68){var _0x4f4d6d={_0x5f5818:0x151},_0x1f7c1d=_0x3a1264;this[_0x1f7c1d(_0x4f4d6d._0x5f5818)][_0x1f7c1d(0x178)]=mars3d__namespace['Util']['merge'](this['options']['style'],_0x310c68);}get[_0x3a1264(0x14e)](){return this['_positions'];}set['positions'](_0x8d7317){var _0x15bcad=_0x3a1264;this[_0x15bcad(0x131)](_0x8d7317);}get['coordinates'](){var _0xf49390={_0xbe3259:0x18b};const _0x3a455c=[];return this['points']['forEach'](_0x25c86f=>{var _0x3f8655=_0x35be;_0x3a455c[_0x3f8655(_0xf49390._0xbe3259)](_0x25c86f['toArray']());}),_0x3a455c;}get['rectangle'](){var _0x4d8155={_0x49443d:0x10c},_0xe6286=_0x3a1264;return this[_0xe6286(_0x4d8155._0x49443d)];}[_0x3a1264(0x164)](_0x48e4b7,_0x297f2e){_0x48e4b7['positions']&&(this['positions']=_0x48e4b7['positions']);}['_mountedHook'](){var _0x18ee90={_0x59b91f:0x141},_0x24a814=_0x3a1264;this['style']['type']==='image'?this['_layer']=new mars3d__namespace['layer'][(_0x24a814(_0x18ee90._0x59b91f))]({'crs':_0x24a814(0xf5),'private':!![]}):this['_layer']=new mars3d__namespace['layer'][(_0x24a814(0x186))]({'private':!![]});}[_0x3a1264(0xfc)](){var _0x4c01fa={_0x3837f4:0x12b,_0xaed798:0x151},_0x438aed=_0x3a1264;this['_map']['addLayer'](this['_layer']),this['_container']=mars3d__namespace[_0x438aed(0x147)]['create']('div','mars3d-heatmap\x20mars3d-hideDiv',this[_0x438aed(_0x4c01fa._0x3837f4)]['container']),this['options']['positions']&&(this['positions']=this['options']['positions']),this[_0x438aed(_0x4c01fa._0xaed798)]['flyTo']&&this['flyToByAnimationEnd']();}[_0x3a1264(0x13a)](){var _0x18ebd8={_0x103c1a:0x147},_0x3a72b3=_0x3a1264;this['_container']&&(mars3d__namespace[_0x3a72b3(_0x18ebd8._0x103c1a)]['remove'](this[_0x3a72b3(0x188)]),delete this['_container']),this['clear'](),this['_map']['removeLayer'](this['_layer']);}['addPosition'](_0x21d036,_0x1b43d2){this['_positions']=this['_positions']||[],this['_positions']['push'](_0x21d036),this['_updatePositionsHook'](_0x1b43d2);}['setPositions'](_0x3fc1c8,_0x29eaca){this['_positions']=_0x3fc1c8,this['_updatePositionsHook'](_0x29eaca);}['clear'](){var _0x1d6847=_0x3a1264;this[_0x1d6847(0x126)]&&(this[_0x1d6847(0x192)]['removeGraphic'](this[_0x1d6847(0x126)],!![]),delete this['_graphic']),this['_graphic2']&&(this[_0x1d6847(0x192)]['removeGraphic'](this['_graphic2'],!![]),delete this['_graphic2']);}['_updatePositionsHook'](_0x22c48c){var _0xf9e003={_0x541bcf:0x12b,_0x5445c4:0x14e,_0x237986:0x102,_0x35fd5e:0x178,_0xcc4179:0x193,_0x39b0c2:0x126},_0x2af8d4=_0x3a1264;if(!this['show']||!this[_0x2af8d4(_0xf9e003._0x541bcf)]||!this[_0x2af8d4(_0xf9e003._0x5445c4)]||this['positions']['length']===0x0)return this;const _0x3c8e40=this['_getHeatCanvas']();if(this['style']['type']===_0x2af8d4(0x10e))this['_layer'][_0x2af8d4(_0xf9e003._0x237986)]({'url':_0x3c8e40['toDataURL'](_0x2af8d4(0x17d),0x1),'rectangle':this['_rectangle'],'opacity':this[_0x2af8d4(_0xf9e003._0x35fd5e)]['opacity']});else this['style']['arc']?this['_graphic']&&_0x22c48c?(this['_graphic']['uniforms']['image']=_0x3c8e40,this['_graphic']['uniforms']['bumpMap']=this['_getArcHeatCanvas'](),this['_graphic2']&&(this[_0x2af8d4(_0xf9e003._0xcc4179)]['uniforms']['image']=_0x3c8e40,this['_graphic2']['uniforms'][_0x2af8d4(0x15b)]=this['_graphic']['uniforms']['bumpMap'])):this['_createArcGraphic'](_0x3c8e40):this['_graphic']&&_0x22c48c?this[_0x2af8d4(_0xf9e003._0x39b0c2)][_0x2af8d4(0x17f)]['image']=_0x3c8e40:this['_createGraphic'](_0x3c8e40);return this;}['_createGraphic'](_0x319b52){var _0x5a8e42={_0x46e360:0xfd,_0x962b8e:0x136},_0x243d5b=_0x3a1264;this['clear'](),this['_graphic']=new mars3d__namespace[(_0x243d5b(0x110))][(_0x243d5b(_0x5a8e42._0x46e360))]({...this[_0x243d5b(0x151)],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':mars3d__namespace[_0x243d5b(_0x5a8e42._0x962b8e)][_0x243d5b(0x11f)](mars3d__namespace['MaterialType']['Image2'],{'image':_0x319b52}),'flat':!![]})}),this['_layer']['addGraphic'](this['_graphic']);}[_0x3a1264(0x14f)](_0x534a00){var _0x57dcec={_0x3831b3:0x178,_0x4b5198:0x10c,_0x2c0384:0x192,_0x50dbfc:0x178,_0x4e93b8:0x10c},_0x102adf=_0x3a1264;this['clear']();const _0x2a5cf=Cesium['RenderState'][_0x102adf(0x109)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium['StencilFunction']['ALWAYS'],'frontOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium['StencilOperation'][_0x102adf(0x137)],'zPass':Cesium['StencilOperation'][_0x102adf(0x161)]},'backFunction':Cesium[_0x102adf(0x13b)]['ALWAYS'],'backOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium[_0x102adf(0x135)]['KEEP'],'zPass':Cesium['StencilOperation']['REPLACE']},'reference':0x2,'mask':0x2},'blending':Cesium['BlendingState']['ALPHA_BLEND']}),_0x51ccdd=Math['floor'](this['style']['diffHeight']??this['_mBoundsMax']*0.02)+0.1;this[_0x102adf(_0x57dcec._0x3831b3)]['diffHeight']&&delete this['style']['diffHeight'];const _0x29574e=(this['style'][_0x102adf(0x190)],0x64);let _0x46830d=Math['max'](this[_0x102adf(0x10c)]['height'],this['_rectangle']['width']);this['style'][_0x102adf(0x14a)]=_0x46830d/=_0x29574e;const _0x559006=new Cesium['Material']({'fabric':{'uniforms':{'image':_0x534a00,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this[_0x102adf(0x116)]()},'source':HeatMaterial},'translucent':!![]}),_0xdcfc73=this[_0x102adf(_0x57dcec._0x3831b3)]['arcDirection']||0x1;this['_graphic']=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this[_0x102adf(_0x57dcec._0x4b5198)],'appearance':new Cesium[(_0x102adf(0x123))]({'flat':!![],'aboveGround':!![],'renderState':_0x2a5cf,'material':_0x559006,'vertexShaderSource':getVertexShaderSource(_0x51ccdd*_0xdcfc73)})}),this[_0x102adf(_0x57dcec._0x2c0384)]['addGraphic'](this['_graphic']),this[_0x102adf(_0x57dcec._0x50dbfc)]['arcDirection']===0x0&&(this['_graphic2']=new mars3d__namespace['graphic'][(_0x102adf(0xfd))]({...this['options'],'rectangle':this[_0x102adf(_0x57dcec._0x4e93b8)],'appearance':new Cesium[(_0x102adf(0x123))]({'flat':!![],'aboveGround':!![],'renderState':_0x2a5cf,'material':_0x559006,'vertexShaderSource':getVertexShaderSource(-_0x51ccdd)})}),this['_layer']['addGraphic'](this['_graphic2']));}[_0x3a1264(0x103)](_0x121967){var _0x12c16c=_0x3a1264;return _0x121967!==null&&_0x121967!==void 0x0&&_0x121967['isFormat']&&this[_0x12c16c(0x10c)]?mars3d__namespace['PolyUtil']['formatRectangle'](this['_rectangle']):this['_rectangle'];}['_getHeatCanvas'](){var _0x218ac5={_0x112fe7:0x140,_0x5392fa:0x149,_0xcef58e:0x18c,_0x2791a0:0x18c,_0x15fe9a:0x166,_0x3b3e9b:0x100,_0x25a55d:0x113,_0x420784:0x142,_0x3455bf:0x125,_0x2a366c:0x10b,_0x4076be:0x179,_0x393850:0x115},_0x154099={_0x28c449:0xf9,_0x53fd16:0x15e,_0x5b5a4d:0xfb},_0x43f59e=_0x3a1264;const _0x1d93ad=this[_0x43f59e(_0x218ac5._0x112fe7)],_0x5e80a4=[];let _0x1e203c,_0x1795d8,_0x63146d,_0x5cdf12;_0x1d93ad['forEach'](_0x33c555=>{var _0x207ccc=_0x43f59e;const _0x37bc37=mars3d__namespace['LngLatPoint'][_0x207ccc(0x191)](_0x33c555);if(!_0x37bc37)return;_0x37bc37['value']=_0x33c555[_0x207ccc(0x15e)]||0x1,!this['options'][_0x207ccc(0x189)]&&(_0x1e203c===undefined?(_0x1e203c=_0x37bc37['lng'],_0x1795d8=_0x37bc37['lng'],_0x63146d=_0x37bc37['lat'],_0x5cdf12=_0x37bc37['lat']):(_0x1e203c=Math['min'](_0x1e203c,_0x37bc37[_0x207ccc(0x104)]),_0x1795d8=Math[_0x207ccc(0x197)](_0x1795d8,_0x37bc37[_0x207ccc(0x104)]),_0x63146d=Math['min'](_0x63146d,_0x37bc37['lat']),_0x5cdf12=Math['max'](_0x5cdf12,_0x37bc37['lat']))),_0x5e80a4['push'](_0x37bc37);});_0x1e203c===_0x1795d8&&(_0x1e203c-=0.000001,_0x1795d8+=0.000001);_0x63146d===_0x5cdf12&&(_0x63146d-=0.000001,_0x5cdf12+=0.000001);let _0xa64b45=this['options']['rectangle']||{'xmin':_0x1e203c,'xmax':_0x1795d8,'ymin':_0x63146d,'ymax':_0x5cdf12};const _0x1d0ebc=getMercatorBounds(_0xa64b45),_0x30294b=Math['abs'](_0x1d0ebc['xmax']-_0x1d0ebc['xmin']),_0x3387dd=Math['abs'](_0x1d0ebc[_0x43f59e(0xfb)]-_0x1d0ebc['ymin']),_0x42d3aa=Math['max'](_0x30294b,_0x3387dd),_0x35c215=Math['min'](_0x30294b,_0x3387dd);this['_mBoundsMax']=_0x42d3aa;let _0x44c641=0x1;if(_0x42d3aa>this['options'][_0x43f59e(_0x218ac5._0x5392fa)])_0x44c641=_0x42d3aa/this['options']['maxCanvasSize'],_0x35c215/_0x44c641<this['options']['minCanvasSize']&&(_0x44c641=_0x35c215/this['options'][_0x43f59e(_0x218ac5._0xcef58e)]);else _0x35c215<this[_0x43f59e(0x151)][_0x43f59e(_0x218ac5._0x2791a0)]&&(_0x44c641=_0x35c215/this[_0x43f59e(0x151)]['minCanvasSize'],_0x42d3aa/_0x44c641>this['options'][_0x43f59e(0x149)]&&(_0x44c641=_0x42d3aa/this['options']['maxCanvasSize']));const _0x16f857=this['heatStyle']['radius']*1.5,_0x460731=_0x30294b/_0x44c641+_0x16f857*0x2,_0x25ccbd=_0x3387dd/_0x44c641+_0x16f857*0x2,_0x26f251=_0x16f857*_0x44c641;_0x1d0ebc['xmin']-=_0x26f251,_0x1d0ebc[_0x43f59e(_0x218ac5._0x15fe9a)]-=_0x26f251,_0x1d0ebc['xmax']+=_0x26f251,_0x1d0ebc['ymax']+=_0x26f251,_0x1d0ebc[_0x43f59e(_0x218ac5._0x3b3e9b)]=Math['max'](_0x1d0ebc['xmin'],-20037508.34),_0x1d0ebc[_0x43f59e(_0x218ac5._0x25a55d)]=Math['min'](_0x1d0ebc['xmax'],20037508.34),_0x1d0ebc['ymin']=Math['max'](_0x1d0ebc[_0x43f59e(0x166)],-20037508.34),_0x1d0ebc['ymax']=Math['min'](_0x1d0ebc['ymax'],20037508.34),this['_scale']=_0x44c641,_0xa64b45=geLatLngBounds(_0x1d0ebc),this['_rectangle']=Cesium[_0x43f59e(_0x218ac5._0x420784)]['fromDegrees'](_0xa64b45['xmin'],_0xa64b45['ymin'],_0xa64b45['xmax'],_0xa64b45['ymax']);let _0x4b30c2=_0x5e80a4[0x0]['value']??0x1,_0x56556e=_0x5e80a4[0x0][_0x43f59e(0x15e)]??0x0;const _0x4eeddf=[];_0x5e80a4['forEach'](_0x561a12=>{var _0x282abe=_0x43f59e;const _0x4209fc=mars3d__namespace['PointTrans'][_0x282abe(_0x154099._0x28c449)]([_0x561a12['lng'],_0x561a12['lat']]),_0x569618=_0x561a12[_0x282abe(_0x154099._0x53fd16)]||0x1,_0x514b4c=Math['round']((_0x4209fc[0x0]-_0x1d0ebc['xmin'])/_0x44c641),_0x39080b=Math['round']((_0x1d0ebc[_0x282abe(_0x154099._0x5b5a4d)]-_0x4209fc[0x1])/_0x44c641);_0x4b30c2=Math[_0x282abe(0x197)](_0x4b30c2,_0x569618),_0x56556e=Math[_0x282abe(0x125)](_0x56556e,_0x569618),_0x4eeddf['push']({'x':_0x514b4c,'y':_0x39080b,'value':_0x569618});});const _0x5cf8e5={'min':this['options'][_0x43f59e(_0x218ac5._0x3455bf)]??_0x56556e,'max':this['options'][_0x43f59e(0x197)]??_0x4b30c2,'data':_0x4eeddf};this['_last_heatData']=_0x5cf8e5;if(!this['_last_mBounds']||_0x1d0ebc['xmin']!==this[_0x43f59e(_0x218ac5._0x2a366c)][_0x43f59e(_0x218ac5._0x3b3e9b)]||_0x1d0ebc[_0x43f59e(_0x218ac5._0x15fe9a)]!==this['_last_mBounds']['ymin']||_0x1d0ebc[_0x43f59e(0x113)]!==this['_last_mBounds']['xmax']||_0x1d0ebc['ymax']!==this['_last_mBounds']['ymax']){this['_last_mBounds']=_0x1d0ebc,this['_container']['style']['cssText']='width:'+_0x460731+'px;height:'+_0x25ccbd+_0x43f59e(0x10a);const _0x31ab20={...this[_0x43f59e(0x146)],'container':this['_container']};!this['_heat']?this['_heat']=heatmap$1['exports']['create'](_0x31ab20):this['_heat']['configure'](_0x31ab20);}this['_heat']['setData'](_0x5cf8e5);const _0x2f8954=mars3d__namespace['DomUtil'][_0x43f59e(0x128)](this[_0x43f59e(_0x218ac5._0x4076be)][_0x43f59e(_0x218ac5._0x393850)]['canvas']);return _0x2f8954;}['_getArcHeatCanvas'](){var _0xc5a6c2={_0x1aff3f:0x15c,_0x1ccbb7:0x146,_0x4242e3:0x153,_0x1dcd5b:0x128,_0x44ef8c:0x115},_0x4e1120=_0x3a1264;this['_heat'][_0x4e1120(_0xc5a6c2._0x1aff3f)]({'radius':this['heatStyle'][_0x4e1120(0x138)]*this['style']['arcRadiusScale'],'blur':this[_0x4e1120(_0xc5a6c2._0x1ccbb7)][_0x4e1120(0x184)]*this['style']['arcBlurScale'],'gradient':this[_0x4e1120(_0xc5a6c2._0x1ccbb7)]['gradientArc']||{0.25:_0x4e1120(0x16a),0.55:_0x4e1120(_0xc5a6c2._0x4242e3),0.85:'rgb(216,216,216)',0x1:'rgb(255,255,255)'}});const _0x7bff55=mars3d__namespace['DomUtil'][_0x4e1120(_0xc5a6c2._0x1dcd5b)](this['_heat'][_0x4e1120(_0xc5a6c2._0x44ef8c)]['canvas']);return this['_heat']['configure'](this['options'][_0x4e1120(_0xc5a6c2._0x1ccbb7)]),_0x7bff55;}['getPointData'](_0x25bb57){var _0x403fb0={_0x3452bc:0x104,_0x5d0bf0:0x10b,_0x4a40ff:0xf8,_0x5cdf89:0x13f,_0x407a73:0x179},_0x5e9cc6=_0x3a1264;const _0x3f374e=mars3d__namespace['LngLatPoint']['parse'](_0x25bb57);if(!_0x3f374e)return{};const _0xf527c6=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x3f374e[_0x5e9cc6(_0x403fb0._0x3452bc)],_0x3f374e['lat']]),_0x43e471=this[_0x5e9cc6(_0x403fb0._0x5d0bf0)],_0x254192=Math[_0x5e9cc6(_0x403fb0._0x4a40ff)]((_0xf527c6[0x0]-_0x43e471[_0x5e9cc6(0x100)])/this['_scale']),_0x1c7d43=Math['round']((_0x43e471['ymax']-_0xf527c6[0x1])/this[_0x5e9cc6(_0x403fb0._0x5cdf89)]),_0x2d3ff4=this[_0x5e9cc6(_0x403fb0._0x407a73)][_0x5e9cc6(0x150)]({'x':_0x254192,'y':_0x1c7d43}),_0x1dca4f=this['_heat']['_renderer']['ctx']['getImageData'](_0x254192-0x1,_0x1c7d43-0x1,0x1,0x1)['data'];return{'x':_0x254192,'y':_0x1c7d43,'value':_0x2d3ff4,'color':_0x5e9cc6(0x170)+_0x1dca4f[0x0]+','+_0x1dca4f[0x1]+','+_0x1dca4f[0x2]+','+_0x1dca4f[0x3]+')'};}}mars3d__namespace['LayerUtil']['register'](_0x3a1264(0xf7),HeatLayer),mars3d__namespace['layer'][_0x3a1264(0x11a)]=HeatLayer,mars3d__namespace['h337']=h337;function getMercatorBounds(_0x3b5dfb){var _0x431dad=_0x3a1264;const _0x2b956e=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x3b5dfb['xmin'],_0x3b5dfb['ymin']]),_0x401f1c=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x3b5dfb['xmax'],_0x3b5dfb[_0x431dad(0xfb)]]);return{'xmin':_0x2b956e[0x0],'ymin':_0x2b956e[0x1],'xmax':_0x401f1c[0x0],'ymax':_0x401f1c[0x1]};}function geLatLngBounds(_0x2e5478){var _0x26ee2e={_0x317e6f:0x132},_0x230fe0=_0x3a1264;const _0x435093=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x2e5478[_0x230fe0(0x100)],_0x2e5478['ymin']]),_0xac613b=mars3d__namespace['PointTrans'][_0x230fe0(_0x26ee2e._0x317e6f)]([_0x2e5478['xmax'],_0x2e5478['ymax']]);return{'xmin':_0x435093[0x0],'ymin':_0x435093[0x1],'xmax':_0xac613b[0x0],'ymax':_0xac613b[0x1]};}function getVertexShaderSource(_0x4ececb){var _0xf627c0={_0x1dfa96:0x133},_0x5af31b=_0x3a1264;return'in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'+_0x4ececb+_0x5af31b(_0xf627c0._0x1dfa96);}function _0x3d7a(){var _0x1c07c6=['setDataMax','replace','emit','_scale','_positions','ImageLayer','Rectangle','_getInternalData','getContext','exports','heatStyle','DomUtil','body','maxCanvasSize','granularity','_min','cStore','useGradientOpacity','positions','_createArcGraphic','getValueAt','options','8968959rTphar','rgb(140,140,140)','_updateGradient','addColorStop','undefined','maxOpacity','extremachange','2896648YCaWdc','length','bumpMap','configure','plugins','value','_clear','defaultBlur','REPLACE','renderer','getDataURL','_setOptionsHook','heatmap-canvas','ymin','_drawAlpha','552321EZJEFt','_yField','rgb(0,0,0)','cssText','default','_coordinator','renderAll','width','rgba(','getData','renderPartial','renderall','getOwnPropertyDescriptor','_radi','canvas2d','defaultMinOpacity','style','_heat','defaultXField','className','_data','image/png','setDataMin','uniforms','5cFyQDN','_renderBoundaries','10lVtQxD','fillStyle','blur','fillRect','GraphicLayer','green','_container','rectangle','red','push','minCanvasSize','height','562242yGtTLZ','_onExtremaChange','splitNum','parse','_layer','_graphic2','_xField','opacity','_max','max','EPSG:3857','rgb(0,255,0)','heat','round','lonlat2mercator','_width','ymax','_addedHook','RectanglePrimitive','isArray','_store','xmin','defaultYField','setOptions','getRectangle','lng','_setStyles','_templates','clearRect','_updatePositionsHook','fromCache','px;','_last_mBounds','_rectangle','uniform\x20sampler2D\x20image;\x0a\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x20{\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture(image,\x20st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0))\x20{\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a','image','_unOrganizeData','graphic','keys','canvas','xmax','merge','_renderer','_getArcHeatCanvas','onExtremaChange','_palette','Cesium','HeatLayer','_minOpacity','renderpartial','data','_blur','createMaterial','_height','192HdKOhT','forEach','EllipsoidSurfaceAppearance','removeData','min','_graphic','position:absolute;left:0;top:0;','copyCanvas','minOpacity','shadowCanvas','_map','_organiseData','266664ehcxuw','317514YJCCHH','_config','setCoordinator','setPositions','mercator2lonlat',';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a','apply','StencilOperation','MaterialUtil','KEEP','radius','9468dxnxnq','_removedHook','StencilFunction'];_0x3d7a=function(){return _0x1c07c6;};return _0x3d7a();}exports[_0x3a1264(0x11a)]=HeatLayer,Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
