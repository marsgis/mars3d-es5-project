/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.6.0
 * 编译日期：2023-08-04 12:48:00
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';const _0x230ed4=_0x4958;(function(_0x4bf57b,_0x253c66){const _0x182a2a={_0x269ddb:0x19a,_0x4529e5:0x18a,_0x20e9fc:0x17a,_0x462997:0x171},_0x9c20f8=_0x4958,_0x53141c=_0x4bf57b();while(!![]){try{const _0x470288=parseInt(_0x9c20f8(_0x182a2a._0x269ddb))/0x1*(parseInt(_0x9c20f8(0x16a))/0x2)+parseInt(_0x9c20f8(0x15f))/0x3+parseInt(_0x9c20f8(_0x182a2a._0x4529e5))/0x4+parseInt(_0x9c20f8(0x15a))/0x5*(parseInt(_0x9c20f8(_0x182a2a._0x20e9fc))/0x6)+-parseInt(_0x9c20f8(0x175))/0x7+parseInt(_0x9c20f8(_0x182a2a._0x462997))/0x8+parseInt(_0x9c20f8(0x174))/0x9*(-parseInt(_0x9c20f8(0x177))/0xa);if(_0x470288===_0x253c66)break;else _0x53141c['push'](_0x53141c['shift']());}catch(_0x3daa28){_0x53141c['push'](_0x53141c['shift']());}}}(_0x5737,0x54acc));function _interopNamespace(_0x50017c){const _0x33388a=_0x4958;if(_0x50017c&&_0x50017c[_0x33388a(0x14f)])return _0x50017c;var _0x5db597=Object['create'](null);return _0x50017c&&Object['keys'](_0x50017c)[_0x33388a(0x169)](function(_0x42fca3){if(_0x42fca3!=='default'){var _0x5d4db8=Object['getOwnPropertyDescriptor'](_0x50017c,_0x42fca3);Object['defineProperty'](_0x5db597,_0x42fca3,_0x5d4db8['get']?_0x5d4db8:{'enumerable':!![],'get':function(){return _0x50017c[_0x42fca3];}});}}),_0x5db597['default']=_0x50017c,_0x5db597;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337),HeatMaterial='uniform\x20sampler2D\x20image;\x0a\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x20{\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture(image,\x20st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0))\x20{\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a';if(!h337__namespace[_0x230ed4(0x167)])throw new Error('请引入\x20heatmap.js\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x230ed4(0x151)],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:'blue',0.6:'green',0.8:'yellow',0.9:'red'}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium['EllipsoidSurfaceAppearance']['VERTEX_FORMAT']};class HeatLayer extends BaseLayer{constructor(_0x53e74a={}){const _0x28e4a={_0x4489f3:0x168,_0x2dd00a:0x168,_0x111767:0x180},_0x2672e6=_0x230ed4;super(_0x53e74a),this['options'][_0x2672e6(_0x28e4a._0x4489f3)]=this['options'][_0x2672e6(_0x28e4a._0x2dd00a)]??document['body']['clientWidth'],this[_0x2672e6(0x14d)]['maxCanvasSize']=Math['min'](this['options']['maxCanvasSize'],0x1388),this['options']['minCanvasSize']=this['options'][_0x2672e6(_0x28e4a._0x111767)]??document['body'][_0x2672e6(0x154)],this['options']['minCanvasSize']=Math['max'](this['options']['minCanvasSize'],0x2bc),this['options']['heatStyle']={...DEF_HEATSTYLE,...this['options']['heatStyle']},this['options']['style']={...DEF_STYLE,...this['options']['style']};}get['layer'](){return this['_layer'];}get['heatStyle'](){const _0x3c00aa={_0x3d766f:0x14d},_0x5cccdc=_0x230ed4;return this[_0x5cccdc(_0x3c00aa._0x3d766f)]['heatStyle'];}set[_0x230ed4(0x18e)](_0x46d222){const _0x45be49=_0x230ed4;this['options'][_0x45be49(0x18e)]=mars3d__namespace['Util'][_0x45be49(0x19b)](this['options']['heatStyle'],_0x46d222),this['_heat']&&(this['_heat']['configure'](this['options']['heatStyle']),this[_0x45be49(0x163)](!![]));}get[_0x230ed4(0x173)](){return this['options']['style'];}set['style'](_0x52bd28){const _0x1135ea={_0x338854:0x173,_0x5f4b7a:0x197},_0x280d90=_0x230ed4;this['options'][_0x280d90(_0x1135ea._0x338854)]=mars3d__namespace[_0x280d90(_0x1135ea._0x5f4b7a)][_0x280d90(0x19b)](this['options'][_0x280d90(0x173)],_0x52bd28);}get['positions'](){return this['_positions'];}set['positions'](_0x47b20e){this['setPositions'](_0x47b20e);}get[_0x230ed4(0x188)](){const _0x2cbd5c=[];return this['points']['forEach'](_0x61b99d=>{const _0x3f3793=_0x4958;_0x2cbd5c['push'](_0x61b99d[_0x3f3793(0x1a2)]());}),_0x2cbd5c;}get[_0x230ed4(0x16b)](){return this['_rectangle'];}['_setOptionsHook'](_0x2c719f,_0x451b60){const _0x129d0e={_0x4b7ed9:0x19f},_0x15125f=_0x230ed4;_0x2c719f['positions']&&(this[_0x15125f(0x19f)]=_0x2c719f[_0x15125f(_0x129d0e._0x4b7ed9)]);}['_mountedHook'](){const _0x2a6884=_0x230ed4;this[_0x2a6884(0x173)][_0x2a6884(0x182)]==='image'?this['_layer']=new mars3d__namespace['layer']['ImageLayer']({'crs':'EPSG:3857','private':!![]}):this['_layer']=new mars3d__namespace['layer']['GraphicLayer']({'private':!![]});}['_addedHook'](){const _0x30d185={_0xd8ad92:0x17c,_0x429dae:0x15c,_0x38a57d:0x167,_0x320273:0x14d},_0x8ebb37=_0x230ed4;this['_map'][_0x8ebb37(0x19c)](this['_layer']),this[_0x8ebb37(_0x30d185._0xd8ad92)]=mars3d__namespace[_0x8ebb37(_0x30d185._0x429dae)][_0x8ebb37(_0x30d185._0x38a57d)](_0x8ebb37(0x166),'mars3d-heatmap\x20mars3d-hideDiv',this['_map']['container']),this[_0x8ebb37(0x14d)]['positions']&&(this['positions']=this[_0x8ebb37(_0x30d185._0x320273)]['positions']),this['options']['flyTo']&&this['flyToByAnimationEnd']();}['_removedHook'](){const _0x331d89={_0x3991a1:0x15b},_0x159df9=_0x230ed4;this['_container']&&(mars3d__namespace['DomUtil']['remove'](this['_container']),delete this['_container']),this['clear'](),this['_map'][_0x159df9(_0x331d89._0x3991a1)](this['_layer']);}['addPosition'](_0x5def13,_0x4ca79e){const _0x3cfa1c={_0x28b9c5:0x170},_0x2aafa1=_0x230ed4;this['_positions']=this['_positions']||[],this[_0x2aafa1(_0x3cfa1c._0x28b9c5)]['push'](_0x5def13),this[_0x2aafa1(0x163)](_0x4ca79e);}['setPositions'](_0x27a5a7,_0x5c81b6){this['_positions']=_0x27a5a7,this['_updatePositionsHook'](_0x5c81b6);}['clear'](){const _0x5899bb={_0x43412c:0x184,_0x1fb025:0x150},_0x4f670a=_0x230ed4;this['_graphic']&&(this['_layer']['removeGraphic'](this['_graphic'],!![]),delete this['_graphic']),this['_graphic2']&&(this[_0x4f670a(0x19d)][_0x4f670a(_0x5899bb._0x43412c)](this[_0x4f670a(_0x5899bb._0x1fb025)],!![]),delete this['_graphic2']);}['_updatePositionsHook'](_0x175270){const _0x347340={_0x5b743f:0x16e,_0x5067e3:0x150},_0x5f0bfe=_0x230ed4;if(!this['show']||!this['_map']||!this[_0x5f0bfe(0x19f)]||this['positions']['length']===0x0)return this;const _0xd65b62=this[_0x5f0bfe(_0x347340._0x5b743f)]();if(this['style']['type']==='image')this['_layer']['setOptions']({'url':_0xd65b62['toDataURL'](_0x5f0bfe(0x152)),'rectangle':this['_rectangle'],'opacity':this['style']['opacity']});else this[_0x5f0bfe(0x173)]['arc']?this['_graphic']&&_0x175270?(this['_graphic'][_0x5f0bfe(0x165)][_0x5f0bfe(0x19e)]=_0xd65b62,this['_graphic']['uniforms']['bumpMap']=this['_getArcHeatCanvas'](),this[_0x5f0bfe(0x150)]&&(this['_graphic2']['uniforms']['image']=_0xd65b62,this[_0x5f0bfe(_0x347340._0x5067e3)]['uniforms']['bumpMap']=this['_graphic']['uniforms']['bumpMap'])):this['_createArcGraphic'](_0xd65b62):this['_graphic']&&_0x175270?this['_graphic']['uniforms'][_0x5f0bfe(0x19e)]=_0xd65b62:this['_createGraphic'](_0xd65b62);return this;}['_createGraphic'](_0x5b441c){const _0x210a13={_0x35a890:0x14c,_0x271de4:0x181},_0x2c9f90=_0x230ed4;this['clear'](),this['_graphic']=new mars3d__namespace[(_0x2c9f90(_0x210a13._0x35a890))]['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':new Cesium[(_0x2c9f90(_0x210a13._0x271de4))]({'fabric':{'uniforms':{'image':_0x5b441c},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})}),this['_layer']['addGraphic'](this['_graphic']);}['_createArcGraphic'](_0x2a9e2a){const _0x5d172c={_0x4daf48:0x158,_0x3baf4c:0x158,_0x45487f:0x1a1,_0x63f30e:0x198,_0x3d7e18:0x157,_0x673b76:0x14d,_0x4c523f:0x153,_0x38e308:0x150},_0x5e40bf=_0x230ed4;this['clear']();const _0x3ba57d=Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium['StencilFunction'][_0x5e40bf(0x16d)],'frontOperation':{'fail':Cesium[_0x5e40bf(0x158)]['KEEP'],'zFail':Cesium[_0x5e40bf(_0x5d172c._0x4daf48)]['KEEP'],'zPass':Cesium['StencilOperation']['REPLACE']},'backFunction':Cesium['StencilFunction']['ALWAYS'],'backOperation':{'fail':Cesium['StencilOperation'][_0x5e40bf(0x1a1)],'zFail':Cesium[_0x5e40bf(_0x5d172c._0x3baf4c)][_0x5e40bf(_0x5d172c._0x45487f)],'zPass':Cesium['StencilOperation'][_0x5e40bf(_0x5d172c._0x63f30e)]},'reference':0x2,'mask':0x2},'blending':Cesium[_0x5e40bf(0x194)]['ALPHA_BLEND']}),_0x228867=Math[_0x5e40bf(0x17b)](this['style']['diffHeight']??this[_0x5e40bf(0x195)]*0.02)+0.1;this['style']['diffHeight']&&delete this['style']['diffHeight'];const _0x442a69=(this['style'][_0x5e40bf(0x15d)],0x64);let _0x3ecda7=Math['max'](this['_rectangle']['height'],this['_rectangle']['width']);this['style']['granularity']=_0x3ecda7/=_0x442a69;const _0x2411a7=new Cesium[(_0x5e40bf(0x181))]({'fabric':{'uniforms':{'image':_0x2a9e2a,'repeat':new Cesium[(_0x5e40bf(0x18c))](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),_0x2486ff=this['style']['arcDirection']||0x1;this[_0x5e40bf(_0x5d172c._0x3d7e18)]=new mars3d__namespace[(_0x5e40bf(0x14c))]['RectanglePrimitive']({...this[_0x5e40bf(_0x5d172c._0x673b76)],'rectangle':this[_0x5e40bf(0x16c)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x3ba57d,'material':_0x2411a7,'vertexShaderSource':getVertexShaderSource(_0x228867*_0x2486ff)})}),this['_layer'][_0x5e40bf(0x187)](this[_0x5e40bf(0x157)]),this['style'][_0x5e40bf(0x199)]===0x0&&(this[_0x5e40bf(0x150)]=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium[(_0x5e40bf(_0x5d172c._0x4c523f))]({'flat':!![],'aboveGround':!![],'renderState':_0x3ba57d,'material':_0x2411a7,'vertexShaderSource':getVertexShaderSource(-_0x228867)})}),this['_layer']['addGraphic'](this[_0x5e40bf(_0x5d172c._0x38e308)]));}['getRectangle'](_0x18ec9d){const _0x2e88de={_0x447c88:0x16c},_0xa7979b=_0x230ed4;return _0x18ec9d!==null&&_0x18ec9d!==void 0x0&&_0x18ec9d['isFormat']&&this['_rectangle']?mars3d__namespace['PolyUtil']['formatRectangle'](this[_0xa7979b(_0x2e88de._0x447c88)]):this['_rectangle'];}['_getHeatCanvas'](){const _0x43fed5={_0xac0a05:0x176,_0x53efa1:0x16f,_0x4e07eb:0x14d,_0x433de9:0x18e,_0x282aa4:0x186,_0x35ec1e:0x193,_0x21a895:0x155,_0x3d5122:0x178,_0x1aa4f5:0x16f,_0xca79fd:0x190,_0x259954:0x179,_0x2b9ec6:0x18f,_0x2b74da:0x167},_0x451edf={_0x378e81:0x196,_0xf79247:0x17f,_0x5793e5:0x161},_0x2d31de=_0x230ed4,_0x34cbb2=this[_0x2d31de(0x170)],_0x560d60=[];let _0x65f46a,_0x224cb5,_0xdc7299,_0x298eef;_0x34cbb2['forEach'](_0x58c203=>{const _0x47a202=_0x2d31de,_0x25c1c3=mars3d__namespace['LngLatPoint']['parse'](_0x58c203);if(!_0x25c1c3)return;_0x25c1c3['value']=_0x58c203['value']||0x1,!this['options']['rectangle']&&(_0x65f46a===undefined?(_0x65f46a=_0x25c1c3['lng'],_0x224cb5=_0x25c1c3['lng'],_0xdc7299=_0x25c1c3['lat'],_0x298eef=_0x25c1c3['lat']):(_0x65f46a=Math['min'](_0x65f46a,_0x25c1c3['lng']),_0x224cb5=Math['max'](_0x224cb5,_0x25c1c3[_0x47a202(0x189)]),_0xdc7299=Math['min'](_0xdc7299,_0x25c1c3['lat']),_0x298eef=Math[_0x47a202(0x16f)](_0x298eef,_0x25c1c3['lat']))),_0x560d60['push'](_0x25c1c3);});_0x65f46a===_0x224cb5&&(_0x65f46a-=0.000001,_0x224cb5+=0.000001);_0xdc7299===_0x298eef&&(_0xdc7299-=0.000001,_0x298eef+=0.000001);let _0x1a93f5=this['options']['rectangle']||{'xmin':_0x65f46a,'xmax':_0x224cb5,'ymin':_0xdc7299,'ymax':_0x298eef};const _0x2339bd=getMercatorBounds(_0x1a93f5),_0x47eeac=Math[_0x2d31de(0x176)](_0x2339bd['xmax']-_0x2339bd['xmin']),_0x5b1082=Math[_0x2d31de(_0x43fed5._0xac0a05)](_0x2339bd['ymax']-_0x2339bd['ymin']),_0x1bf4eb=Math[_0x2d31de(_0x43fed5._0x53efa1)](_0x47eeac,_0x5b1082),_0x43ceaf=Math['min'](_0x47eeac,_0x5b1082);this['_mBoundsMax']=_0x1bf4eb;let _0x4ed284=0x1;if(_0x1bf4eb>this[_0x2d31de(0x14d)]['maxCanvasSize'])_0x4ed284=_0x1bf4eb/this['options']['maxCanvasSize'],_0x43ceaf/_0x4ed284<this[_0x2d31de(0x14d)]['minCanvasSize']&&(_0x4ed284=_0x43ceaf/this['options']['minCanvasSize']);else _0x43ceaf<this[_0x2d31de(_0x43fed5._0x4e07eb)][_0x2d31de(0x180)]&&(_0x4ed284=_0x43ceaf/this['options']['minCanvasSize'],_0x1bf4eb/_0x4ed284>this['options']['maxCanvasSize']&&(_0x4ed284=_0x1bf4eb/this['options']['maxCanvasSize']));const _0x22fa4a=this[_0x2d31de(_0x43fed5._0x433de9)]['radius']*1.5,_0xf76796=_0x47eeac/_0x4ed284+_0x22fa4a*0x2,_0x6387c3=_0x5b1082/_0x4ed284+_0x22fa4a*0x2,_0xaea668=_0x22fa4a*_0x4ed284;_0x2339bd['xmin']-=_0xaea668,_0x2339bd['ymin']-=_0xaea668,_0x2339bd['xmax']+=_0xaea668,_0x2339bd['ymax']+=_0xaea668,this[_0x2d31de(_0x43fed5._0x282aa4)]=_0x4ed284,_0x1a93f5=geLatLngBounds(_0x2339bd),this['_rectangle']=Cesium[_0x2d31de(_0x43fed5._0x35ec1e)][_0x2d31de(_0x43fed5._0x21a895)](_0x1a93f5['xmin'],_0x1a93f5['ymin'],_0x1a93f5[_0x2d31de(_0x43fed5._0x3d5122)],_0x1a93f5['ymax']);let _0x4c0ddd=_0x560d60[0x0]['value']??0x1,_0x36478d=_0x560d60[0x0]['value']??0x0;const _0x285ee7=[];_0x560d60['forEach'](_0x345cc4=>{const _0x11168a=_0x2d31de,_0x5cb6c0=mars3d__namespace['PointTrans'][_0x11168a(_0x451edf._0x378e81)]([_0x345cc4['lng'],_0x345cc4['lat']]),_0x172f76=_0x345cc4['value']||0x1,_0x36f2dc=Math[_0x11168a(0x15e)]((_0x5cb6c0[0x0]-_0x2339bd[_0x11168a(_0x451edf._0xf79247)])/_0x4ed284),_0x482834=Math['round']((_0x2339bd['ymax']-_0x5cb6c0[0x1])/_0x4ed284);_0x4c0ddd=Math['max'](_0x4c0ddd,_0x172f76),_0x36478d=Math['min'](_0x36478d,_0x172f76),_0x285ee7[_0x11168a(_0x451edf._0x5793e5)]({'x':_0x36f2dc,'y':_0x482834,'value':_0x172f76});});const _0x48236c={'min':this['options']['min']??_0x36478d,'max':this['options'][_0x2d31de(_0x43fed5._0x1aa4f5)]??_0x4c0ddd,'data':_0x285ee7};this[_0x2d31de(_0x43fed5._0xca79fd)]=_0x48236c;if(!this['_last_mBounds']||_0x2339bd['xmin']!==this['_last_mBounds'][_0x2d31de(0x17f)]||_0x2339bd['ymin']!==this['_last_mBounds']['ymin']||_0x2339bd[_0x2d31de(0x178)]!==this['_last_mBounds']['xmax']||_0x2339bd['ymax']!==this['_last_mBounds'][_0x2d31de(_0x43fed5._0x259954)]){this['_last_mBounds']=_0x2339bd,this['_container']['style'][_0x2d31de(0x172)]=_0x2d31de(_0x43fed5._0x2b9ec6)+_0xf76796+_0x2d31de(0x191)+_0x6387c3+'px;';const _0xd70c1f={...this['heatStyle'],'container':this['_container']};!this['_heat']?this['_heat']=h337__namespace[_0x2d31de(_0x43fed5._0x2b74da)](_0xd70c1f):this['_heat']['configure'](_0xd70c1f);}this['_heat']['setData'](_0x48236c);const _0x5b3324=mars3d__namespace['DomUtil']['copyCanvas'](this['_heat']['_renderer']['canvas']);return _0x5b3324;}['_getArcHeatCanvas'](){const _0x46c11b={_0x41cd40:0x160,_0x31bc15:0x185,_0x53b25b:0x14d},_0x1fdf91=_0x230ed4;this['_heat'][_0x1fdf91(0x17d)]({'radius':this['heatStyle']['radius']*this['style'][_0x1fdf91(0x192)],'blur':this['heatStyle'][_0x1fdf91(0x17e)]*this[_0x1fdf91(0x173)][_0x1fdf91(_0x46c11b._0x41cd40)],'gradient':this['heatStyle']['gradientArc']||{0.25:'rgb(0,0,0)',0.55:'rgb(140,140,140)',0.85:'rgb(216,216,216)',0x1:'rgb(255,255,255)'}});const _0x1213db=mars3d__namespace['DomUtil'][_0x1fdf91(_0x46c11b._0x31bc15)](this['_heat']['_renderer']['canvas']);return this['_heat'][_0x1fdf91(0x17d)](this[_0x1fdf91(_0x46c11b._0x53b25b)][_0x1fdf91(0x18e)]),_0x1213db;}['getPointData'](_0x38612a){const _0xadb0c5={_0x27ddde:0x183,_0x47b74f:0x196,_0x11efa5:0x18b,_0x380ea3:0x186},_0x2760b7=_0x230ed4,_0x54d9e0=mars3d__namespace[_0x2760b7(_0xadb0c5._0x27ddde)]['parse'](_0x38612a);if(!_0x54d9e0)return{};const _0x1c0a1e=mars3d__namespace['PointTrans'][_0x2760b7(_0xadb0c5._0x47b74f)]([_0x54d9e0['lng'],_0x54d9e0[_0x2760b7(_0xadb0c5._0x11efa5)]]),_0x1d7ae2=this['_last_mBounds'],_0x534ff7=Math['round']((_0x1c0a1e[0x0]-_0x1d7ae2['xmin'])/this[_0x2760b7(_0xadb0c5._0x380ea3)]),_0x36b214=Math['round']((_0x1d7ae2['ymax']-_0x1c0a1e[0x1])/this['_scale']),_0x32a17b=this['_heat']['getValueAt']({'x':_0x534ff7,'y':_0x36b214}),_0x1418a4=this[_0x2760b7(0x162)]['_renderer']['ctx']['getImageData'](_0x534ff7-0x1,_0x36b214-0x1,0x1,0x1)['data'];return{'x':_0x534ff7,'y':_0x36b214,'value':_0x32a17b,'color':'rgba('+_0x1418a4[0x0]+','+_0x1418a4[0x1]+','+_0x1418a4[0x2]+','+_0x1418a4[0x3]+')'};}}mars3d__namespace[_0x230ed4(0x18d)]['register']('heat',HeatLayer),mars3d__namespace[_0x230ed4(0x156)]['HeatLayer']=HeatLayer,mars3d__namespace['h337']=h337__namespace;function getMercatorBounds(_0x5a140c){const _0x29ef95={_0x29c383:0x14e},_0x3dec7c=_0x230ed4,_0xb7ab6e=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x5a140c['xmin'],_0x5a140c['ymin']]),_0x23ef65=mars3d__namespace[_0x3dec7c(_0x29ef95._0x29c383)][_0x3dec7c(0x196)]([_0x5a140c['xmax'],_0x5a140c['ymax']]);return{'xmin':_0xb7ab6e[0x0],'ymin':_0xb7ab6e[0x1],'xmax':_0x23ef65[0x0],'ymax':_0x23ef65[0x1]};}function geLatLngBounds(_0x1112ee){const _0x4b8158={_0x1b8648:0x164,_0x27fbda:0x179},_0x4d675e=_0x230ed4,_0x374eb8=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x1112ee['xmin'],_0x1112ee[_0x4d675e(_0x4b8158._0x1b8648)]]),_0x56ece2=mars3d__namespace[_0x4d675e(0x14e)]['mercator2lonlat']([_0x1112ee['xmax'],_0x1112ee[_0x4d675e(_0x4b8158._0x27fbda)]]);return{'xmin':_0x374eb8[0x0],'ymin':_0x374eb8[0x1],'xmax':_0x56ece2[0x0],'ymax':_0x56ece2[0x1]};}function _0x4958(_0x3a2ab8,_0x88a4be){const _0x573706=_0x5737();return _0x4958=function(_0x49581c,_0x91fa97){_0x49581c=_0x49581c-0x14c;let _0x3bd732=_0x573706[_0x49581c];return _0x3bd732;},_0x4958(_0x3a2ab8,_0x88a4be);}function _0x5737(){const _0x1e5167=['_positions','1115808lpuQsN','cssText','style','36taIoYa','3795155IJmLHE','abs','2623910VIckzw','xmax','ymax','10326xIRwfv','floor','_container','configure','blur','xmin','minCanvasSize','Material','type','LngLatPoint','removeGraphic','copyCanvas','_scale','addGraphic','coordinates','lng','1498676xlfBtR','lat','Cartesian2','LayerUtil','heatStyle','width:','_last_heatData','px;height:','arcRadiusScale','Rectangle','BlendingState','_mBoundsMax','lonlat2mercator','Util','REPLACE','arcDirection','587141yvUIfd','merge','addLayer','_layer','image','positions','HeatLayer','KEEP','toArray','graphic','options','PointTrans','__esModule','_graphic2','BaseLayer','image/png','EllipsoidSurfaceAppearance','clientHeight','fromDegrees','layer','_graphic','StencilOperation',';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a','805qAAwJG','removeLayer','DomUtil','splitNum','round','1680570XtzegU','arcBlurScale','push','_heat','_updatePositionsHook','ymin','uniforms','div','create','maxCanvasSize','forEach','2TZFCxT','rectangle','_rectangle','ALWAYS','_getHeatCanvas','max'];_0x5737=function(){return _0x1e5167;};return _0x5737();}function getVertexShaderSource(_0x3571b0){const _0x38692a={_0x29797d:0x159},_0x4f4332=_0x230ed4;return'in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'+_0x3571b0+_0x4f4332(_0x38692a._0x29797d);}exports[_0x230ed4(0x1a0)]=HeatLayer,Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
