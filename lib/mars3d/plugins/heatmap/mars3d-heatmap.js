/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.6.2
 * 编译日期：2023-08-20 20:29:09
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';const _0x136b7f=_0x2409;(function(_0x365252,_0x53af9a){const _0x48c8ec={_0x1981ea:0x1e6,_0x375906:0x234,_0x337335:0x1f5,_0x4d2630:0x1fb,_0x453f58:0x1f0,_0x825f79:0x223,_0x196c84:0x1f1,_0x426737:0x213,_0x3b4733:0x1ed},_0x366799=_0x2409,_0x64501d=_0x365252();while(!![]){try{const _0x4628f0=-parseInt(_0x366799(_0x48c8ec._0x1981ea))/0x1*(parseInt(_0x366799(_0x48c8ec._0x375906))/0x2)+parseInt(_0x366799(_0x48c8ec._0x337335))/0x3+parseInt(_0x366799(_0x48c8ec._0x4d2630))/0x4+parseInt(_0x366799(_0x48c8ec._0x453f58))/0x5*(-parseInt(_0x366799(0x21f))/0x6)+-parseInt(_0x366799(_0x48c8ec._0x825f79))/0x7*(-parseInt(_0x366799(_0x48c8ec._0x196c84))/0x8)+-parseInt(_0x366799(_0x48c8ec._0x426737))/0x9*(parseInt(_0x366799(0x203))/0xa)+parseInt(_0x366799(0x204))/0xb*(parseInt(_0x366799(_0x48c8ec._0x3b4733))/0xc);if(_0x4628f0===_0x53af9a)break;else _0x64501d['push'](_0x64501d['shift']());}catch(_0x45a2c8){_0x64501d['push'](_0x64501d['shift']());}}}(_0x31dc,0x9f2db));function _interopNamespace(_0x238364){const _0x38b9ea=_0x2409;if(_0x238364&&_0x238364[_0x38b9ea(0x232)])return _0x238364;var _0x3911b4=Object['create'](null);return _0x238364&&Object['keys'](_0x238364)['forEach'](function(_0x4e0c53){if(_0x4e0c53!=='default'){var _0x299412=Object['getOwnPropertyDescriptor'](_0x238364,_0x4e0c53);Object['defineProperty'](_0x3911b4,_0x4e0c53,_0x299412['get']?_0x299412:{'enumerable':!![],'get':function(){return _0x238364[_0x4e0c53];}});}}),_0x3911b4['default']=_0x238364,_0x3911b4;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337),HeatMaterial=_0x136b7f(0x23b);if(!h337__namespace['create'])throw new Error('请引入\x20heatmap.js\x20库\x20');function _0x31dc(){const _0x5d2d54=['floor','arcBlurScale','flyToByAnimationEnd','merge','maxCanvasSize','layer','2915124XBEpSC','xmin','positions','10pZjHZj','848zAAXzm','uniforms','clear','remove','497553GhNnOP','clientHeight','addGraphic','ymax','ImageLayer','lonlat2mercator','4934092dnbgzA','_rectangle','RectanglePrimitive','_container','_positions','div','image','_createArcGraphic','5816010BTvJpu','22IUoYGd','REPLACE','getImageData','minCanvasSize','_removedHook','configure','DomUtil','bumpMap','_scale','arcDirection','StencilOperation','style','setPositions','coordinates','addLayer','9pZBGtY','isFormat','xmax','lng','Material','_graphic','fromDegrees','granularity','lat','min','_renderer','_layer','2152770fztABK','push','heatStyle','_updatePositionsHook','39809axdCFT','options','addPosition','removeLayer','max','value','create','yellow','mercator2lonlat','_heat','ymin','data','radius','_getArcHeatCanvas','_graphic2','__esModule','Util','2BMDXHM','graphic','EllipsoidSurfaceAppearance','toArray','GraphicLayer','ALWAYS','KEEP','uniform\x20sampler2D\x20image;\x0a\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x20{\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture(image,\x20st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0))\x20{\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a','_last_mBounds','536864MdMZeD'];_0x31dc=function(){return _0x5d2d54;};return _0x31dc();}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:'blue',0.6:'green',0.8:_0x136b7f(0x22a),0.9:'red'}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium['EllipsoidSurfaceAppearance']['VERTEX_FORMAT']};class HeatLayer extends BaseLayer{constructor(_0x511877={}){const _0x4f39fa={_0x17d71a:0x1f6,_0x5bfab6:0x224},_0x4301ef=_0x136b7f;super(_0x511877),this['options']['maxCanvasSize']=this['options']['maxCanvasSize']??document['body']['clientWidth'],this['options']['maxCanvasSize']=Math['min'](this['options'][_0x4301ef(0x1eb)],0x1388),this['options'][_0x4301ef(0x207)]=this[_0x4301ef(0x224)]['minCanvasSize']??document['body'][_0x4301ef(_0x4f39fa._0x17d71a)],this['options']['minCanvasSize']=Math[_0x4301ef(0x227)](this['options'][_0x4301ef(0x207)],0x2bc),this['options']['heatStyle']={...DEF_HEATSTYLE,...this['options'][_0x4301ef(0x221)]},this[_0x4301ef(_0x4f39fa._0x5bfab6)]['style']={...DEF_STYLE,...this['options'][_0x4301ef(0x20f)]};}get[_0x136b7f(0x1ec)](){return this['_layer'];}get['heatStyle'](){return this['options']['heatStyle'];}set[_0x136b7f(0x221)](_0x5bea4b){const _0x4394bc={_0x468958:0x1ea,_0x48c5bd:0x222},_0x4f1d6e=_0x136b7f;this['options'][_0x4f1d6e(0x221)]=mars3d__namespace[_0x4f1d6e(0x233)][_0x4f1d6e(_0x4394bc._0x468958)](this['options']['heatStyle'],_0x5bea4b),this['_heat']&&(this['_heat']['configure'](this['options']['heatStyle']),this[_0x4f1d6e(_0x4394bc._0x48c5bd)](!![]));}get['style'](){return this['options']['style'];}set['style'](_0x47dc8c){const _0x180b86={_0x338d53:0x224},_0x3f09a6=_0x136b7f;this[_0x3f09a6(_0x180b86._0x338d53)]['style']=mars3d__namespace['Util']['merge'](this['options']['style'],_0x47dc8c);}get['positions'](){const _0x1d4846=_0x136b7f;return this[_0x1d4846(0x1ff)];}set['positions'](_0x1f5557){const _0x34abd4={_0x1d9aa7:0x210},_0x13bf25=_0x136b7f;this[_0x13bf25(_0x34abd4._0x1d9aa7)](_0x1f5557);}get[_0x136b7f(0x211)](){const _0x5a0394=[];return this['points']['forEach'](_0x11d2c4=>{const _0x6136bb=_0x2409;_0x5a0394['push'](_0x11d2c4[_0x6136bb(0x237)]());}),_0x5a0394;}get['rectangle'](){const _0x2ba180={_0x49ae9e:0x1fc},_0xfd51fb=_0x136b7f;return this[_0xfd51fb(_0x2ba180._0x49ae9e)];}['_setOptionsHook'](_0x102020,_0x5bcb55){const _0x3bd39d=_0x136b7f;_0x102020['positions']&&(this[_0x3bd39d(0x1ef)]=_0x102020[_0x3bd39d(0x1ef)]);}['_mountedHook'](){const _0x22c146={_0x43a942:0x1f9,_0xf4dc7e:0x238},_0x42b3ad=_0x136b7f;this['style']['type']==='image'?this[_0x42b3ad(0x21e)]=new mars3d__namespace['layer'][(_0x42b3ad(_0x22c146._0x43a942))]({'crs':'EPSG:3857','private':!![]}):this['_layer']=new mars3d__namespace[(_0x42b3ad(0x1ec))][(_0x42b3ad(_0x22c146._0xf4dc7e))]({'private':!![]});}['_addedHook'](){const _0x323e22={_0x3eb446:0x212,_0x3b3cc7:0x21e,_0x28a96b:0x20a,_0x47807e:0x200,_0x4982d3:0x1ef},_0x5696b3=_0x136b7f;this['_map'][_0x5696b3(_0x323e22._0x3eb446)](this[_0x5696b3(_0x323e22._0x3b3cc7)]),this['_container']=mars3d__namespace[_0x5696b3(_0x323e22._0x28a96b)]['create'](_0x5696b3(_0x323e22._0x47807e),'mars3d-heatmap\x20mars3d-hideDiv',this['_map']['container']),this['options'][_0x5696b3(_0x323e22._0x4982d3)]&&(this['positions']=this[_0x5696b3(0x224)]['positions']),this['options']['flyTo']&&this[_0x5696b3(0x1e9)]();}[_0x136b7f(0x208)](){const _0x33349d={_0x46c038:0x1fe},_0x5acac9=_0x136b7f;this['_container']&&(mars3d__namespace['DomUtil'][_0x5acac9(0x1f4)](this[_0x5acac9(_0x33349d._0x46c038)]),delete this[_0x5acac9(_0x33349d._0x46c038)]),this['clear'](),this['_map'][_0x5acac9(0x226)](this[_0x5acac9(0x21e)]);}[_0x136b7f(0x225)](_0x52641b,_0x3258cd){const _0x24a9aa={_0x429138:0x222},_0x42f983=_0x136b7f;this['_positions']=this['_positions']||[],this['_positions'][_0x42f983(0x220)](_0x52641b),this[_0x42f983(_0x24a9aa._0x429138)](_0x3258cd);}['setPositions'](_0xffe6cd,_0x2fbf6b){const _0xd35f3d={_0x259e54:0x222},_0x52159c=_0x136b7f;this['_positions']=_0xffe6cd,this[_0x52159c(_0xd35f3d._0x259e54)](_0x2fbf6b);}['clear'](){const _0xed0c14={_0x589f24:0x218},_0x1cdd65=_0x136b7f;this['_graphic']&&(this[_0x1cdd65(0x21e)]['removeGraphic'](this[_0x1cdd65(_0xed0c14._0x589f24)],!![]),delete this['_graphic']),this['_graphic2']&&(this['_layer']['removeGraphic'](this['_graphic2'],!![]),delete this['_graphic2']);}['_updatePositionsHook'](_0xf8dba4){const _0x22e2aa={_0x139dc8:0x201,_0x14c390:0x21e,_0x29b9a3:0x20f,_0x4cab9a:0x20b,_0xaccb85:0x230,_0x204652:0x231,_0x53afb4:0x231,_0x528f81:0x1f2},_0x195f63=_0x136b7f;if(!this['show']||!this['_map']||!this[_0x195f63(0x1ef)]||this['positions']['length']===0x0)return this;const _0x1c08cd=this['_getHeatCanvas']();if(this['style']['type']===_0x195f63(_0x22e2aa._0x139dc8))this[_0x195f63(_0x22e2aa._0x14c390)]['setOptions']({'url':_0x1c08cd['toDataURL']('image/png'),'rectangle':this['_rectangle'],'opacity':this[_0x195f63(_0x22e2aa._0x29b9a3)]['opacity']});else this['style']['arc']?this['_graphic']&&_0xf8dba4?(this['_graphic'][_0x195f63(0x1f2)]['image']=_0x1c08cd,this['_graphic']['uniforms'][_0x195f63(_0x22e2aa._0x4cab9a)]=this[_0x195f63(_0x22e2aa._0xaccb85)](),this[_0x195f63(0x231)]&&(this[_0x195f63(_0x22e2aa._0x204652)]['uniforms']['image']=_0x1c08cd,this[_0x195f63(_0x22e2aa._0x53afb4)]['uniforms'][_0x195f63(0x20b)]=this[_0x195f63(0x218)][_0x195f63(_0x22e2aa._0x528f81)]['bumpMap'])):this[_0x195f63(0x202)](_0x1c08cd):this['_graphic']&&_0xf8dba4?this['_graphic'][_0x195f63(0x1f2)]['image']=_0x1c08cd:this['_createGraphic'](_0x1c08cd);return this;}['_createGraphic'](_0x555010){const _0x117d7a={_0x4820da:0x235,_0x46a2fb:0x236},_0x5a3954=_0x136b7f;this[_0x5a3954(0x1f3)](),this['_graphic']=new mars3d__namespace[(_0x5a3954(_0x117d7a._0x4820da))]['RectanglePrimitive']({...this[_0x5a3954(0x224)],'rectangle':this['_rectangle'],'appearance':new Cesium[(_0x5a3954(_0x117d7a._0x46a2fb))]({'material':new Cesium[(_0x5a3954(0x217))]({'fabric':{'uniforms':{'image':_0x555010},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})}),this['_layer'][_0x5a3954(0x1f7)](this['_graphic']);}['_createArcGraphic'](_0x168b5c){const _0x517c07={_0x15f891:0x205,_0x1b7359:0x23a,_0x5e3e8b:0x205,_0x3c2c2b:0x1e7,_0x4eced0:0x20d,_0x4f5ca8:0x224,_0x4fdb1e:0x21e,_0x284e77:0x1fd,_0xc69cd3:0x21e,_0x7f9cce:0x231},_0x23313d=_0x136b7f;this['clear']();const _0x392df4=Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium['StencilFunction']['ALWAYS'],'frontOperation':{'fail':Cesium['StencilOperation'][_0x23313d(0x23a)],'zFail':Cesium['StencilOperation'][_0x23313d(0x23a)],'zPass':Cesium['StencilOperation'][_0x23313d(_0x517c07._0x15f891)]},'backFunction':Cesium['StencilFunction'][_0x23313d(0x239)],'backOperation':{'fail':Cesium[_0x23313d(0x20e)][_0x23313d(_0x517c07._0x1b7359)],'zFail':Cesium['StencilOperation'][_0x23313d(_0x517c07._0x1b7359)],'zPass':Cesium[_0x23313d(0x20e)][_0x23313d(_0x517c07._0x5e3e8b)]},'reference':0x2,'mask':0x2},'blending':Cesium['BlendingState']['ALPHA_BLEND']}),_0x5a7834=Math[_0x23313d(_0x517c07._0x3c2c2b)](this[_0x23313d(0x20f)]['diffHeight']??this['_mBoundsMax']*0.02)+0.1;this['style']['diffHeight']&&delete this['style']['diffHeight'];const _0x595173=(this['style']['splitNum'],0x64);let _0x1762fd=Math[_0x23313d(0x227)](this['_rectangle']['height'],this['_rectangle']['width']);this['style'][_0x23313d(0x21a)]=_0x1762fd/=_0x595173;const _0x2b0465=new Cesium['Material']({'fabric':{'uniforms':{'image':_0x168b5c,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),_0x538647=this['style'][_0x23313d(_0x517c07._0x4eced0)]||0x1;this['_graphic']=new mars3d__namespace['graphic']['RectanglePrimitive']({...this[_0x23313d(_0x517c07._0x4f5ca8)],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x392df4,'material':_0x2b0465,'vertexShaderSource':getVertexShaderSource(_0x5a7834*_0x538647)})}),this[_0x23313d(_0x517c07._0x4fdb1e)][_0x23313d(0x1f7)](this['_graphic']),this['style']['arcDirection']===0x0&&(this['_graphic2']=new mars3d__namespace['graphic'][(_0x23313d(_0x517c07._0x284e77))]({...this[_0x23313d(_0x517c07._0x4f5ca8)],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x392df4,'material':_0x2b0465,'vertexShaderSource':getVertexShaderSource(-_0x5a7834)})}),this[_0x23313d(_0x517c07._0xc69cd3)]['addGraphic'](this[_0x23313d(_0x517c07._0x7f9cce)]));}['getRectangle'](_0x376717){const _0x347ad5=_0x136b7f;return _0x376717!==null&&_0x376717!==void 0x0&&_0x376717[_0x347ad5(0x214)]&&this['_rectangle']?mars3d__namespace['PolyUtil']['formatRectangle'](this['_rectangle']):this['_rectangle'];}['_getHeatCanvas'](){const _0x3e7872={_0x11ff64:0x224,_0x48e862:0x1eb,_0x59d2f0:0x224,_0x507a4e:0x215,_0x3a4dee:0x1e5,_0x233f97:0x22d,_0x1512b8:0x1e5,_0x3f16fd:0x1fe,_0x1ea425:0x22c,_0x26b28b:0x209},_0x4d30df={_0x4029a2:0x216,_0x18caae:0x21b,_0x4e7979:0x21c},_0x44dc59=_0x136b7f,_0x342cf2=this['_positions'],_0x3554f8=[];let _0x3a8bc5,_0x562312,_0x302a19,_0x33474d;_0x342cf2['forEach'](_0x3702a8=>{const _0xa5cc4f=_0x2409,_0x22f7d9=mars3d__namespace['LngLatPoint']['parse'](_0x3702a8);if(!_0x22f7d9)return;_0x22f7d9['value']=_0x3702a8[_0xa5cc4f(0x228)]||0x1,!this['options']['rectangle']&&(_0x3a8bc5===undefined?(_0x3a8bc5=_0x22f7d9[_0xa5cc4f(_0x4d30df._0x4029a2)],_0x562312=_0x22f7d9['lng'],_0x302a19=_0x22f7d9['lat'],_0x33474d=_0x22f7d9[_0xa5cc4f(_0x4d30df._0x18caae)]):(_0x3a8bc5=Math[_0xa5cc4f(_0x4d30df._0x4e7979)](_0x3a8bc5,_0x22f7d9['lng']),_0x562312=Math[_0xa5cc4f(0x227)](_0x562312,_0x22f7d9[_0xa5cc4f(0x216)]),_0x302a19=Math['min'](_0x302a19,_0x22f7d9['lat']),_0x33474d=Math['max'](_0x33474d,_0x22f7d9['lat']))),_0x3554f8['push'](_0x22f7d9);});_0x3a8bc5===_0x562312&&(_0x3a8bc5-=0.000001,_0x562312+=0.000001);_0x302a19===_0x33474d&&(_0x302a19-=0.000001,_0x33474d+=0.000001);let _0x3262af=this['options']['rectangle']||{'xmin':_0x3a8bc5,'xmax':_0x562312,'ymin':_0x302a19,'ymax':_0x33474d};const _0x388946=getMercatorBounds(_0x3262af),_0x1a4fd1=Math['abs'](_0x388946['xmax']-_0x388946['xmin']),_0x23fe71=Math['abs'](_0x388946['ymax']-_0x388946['ymin']),_0x1826f9=Math[_0x44dc59(0x227)](_0x1a4fd1,_0x23fe71),_0x27f31c=Math['min'](_0x1a4fd1,_0x23fe71);this['_mBoundsMax']=_0x1826f9;let _0x5cc163=0x1;if(_0x1826f9>this['options']['maxCanvasSize'])_0x5cc163=_0x1826f9/this['options']['maxCanvasSize'],_0x27f31c/_0x5cc163<this['options']['minCanvasSize']&&(_0x5cc163=_0x27f31c/this['options'][_0x44dc59(0x207)]);else _0x27f31c<this[_0x44dc59(_0x3e7872._0x11ff64)]['minCanvasSize']&&(_0x5cc163=_0x27f31c/this['options']['minCanvasSize'],_0x1826f9/_0x5cc163>this['options'][_0x44dc59(_0x3e7872._0x48e862)]&&(_0x5cc163=_0x1826f9/this[_0x44dc59(_0x3e7872._0x59d2f0)]['maxCanvasSize']));const _0x45bb7f=this[_0x44dc59(0x221)]['radius']*1.5,_0x55a9ce=_0x1a4fd1/_0x5cc163+_0x45bb7f*0x2,_0x4ce2ea=_0x23fe71/_0x5cc163+_0x45bb7f*0x2,_0x4eb784=_0x45bb7f*_0x5cc163;_0x388946[_0x44dc59(0x1ee)]-=_0x4eb784,_0x388946['ymin']-=_0x4eb784,_0x388946[_0x44dc59(_0x3e7872._0x507a4e)]+=_0x4eb784,_0x388946['ymax']+=_0x4eb784,this[_0x44dc59(0x20c)]=_0x5cc163,_0x3262af=geLatLngBounds(_0x388946),this[_0x44dc59(0x1fc)]=Cesium['Rectangle'][_0x44dc59(0x219)](_0x3262af['xmin'],_0x3262af[_0x44dc59(0x22d)],_0x3262af['xmax'],_0x3262af['ymax']);let _0x1d5c20=_0x3554f8[0x0]['value']??0x1,_0xca2f61=_0x3554f8[0x0]['value']??0x0;const _0x5f2f15=[];_0x3554f8['forEach'](_0x8c7a9c=>{const _0x38d03c=_0x44dc59,_0x33c655=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x8c7a9c['lng'],_0x8c7a9c['lat']]),_0x7f74be=_0x8c7a9c['value']||0x1,_0x420baf=Math['round']((_0x33c655[0x0]-_0x388946['xmin'])/_0x5cc163),_0xa24113=Math['round']((_0x388946[_0x38d03c(0x1f8)]-_0x33c655[0x1])/_0x5cc163);_0x1d5c20=Math['max'](_0x1d5c20,_0x7f74be),_0xca2f61=Math[_0x38d03c(0x21c)](_0xca2f61,_0x7f74be),_0x5f2f15['push']({'x':_0x420baf,'y':_0xa24113,'value':_0x7f74be});});const _0x31af1e={'min':this[_0x44dc59(_0x3e7872._0x59d2f0)][_0x44dc59(0x21c)]??_0xca2f61,'max':this[_0x44dc59(0x224)]['max']??_0x1d5c20,'data':_0x5f2f15};this['_last_heatData']=_0x31af1e;if(!this[_0x44dc59(_0x3e7872._0x3a4dee)]||_0x388946[_0x44dc59(0x1ee)]!==this['_last_mBounds']['xmin']||_0x388946[_0x44dc59(_0x3e7872._0x233f97)]!==this[_0x44dc59(0x1e5)]['ymin']||_0x388946['xmax']!==this['_last_mBounds'][_0x44dc59(0x215)]||_0x388946['ymax']!==this[_0x44dc59(_0x3e7872._0x1512b8)]['ymax']){this['_last_mBounds']=_0x388946,this[_0x44dc59(_0x3e7872._0x3f16fd)][_0x44dc59(0x20f)]['cssText']='width:'+_0x55a9ce+'px;height:'+_0x4ce2ea+'px;';const _0xcf4e5b={...this['heatStyle'],'container':this['_container']};!this['_heat']?this['_heat']=h337__namespace[_0x44dc59(0x229)](_0xcf4e5b):this[_0x44dc59(_0x3e7872._0x1ea425)][_0x44dc59(_0x3e7872._0x26b28b)](_0xcf4e5b);}this[_0x44dc59(0x22c)]['setData'](_0x31af1e);const _0x3abc5e=mars3d__namespace['DomUtil']['copyCanvas'](this['_heat']['_renderer']['canvas']);return _0x3abc5e;}['_getArcHeatCanvas'](){const _0x5546f0={_0x52eb9b:0x209,_0x10b77a:0x22f,_0x464839:0x20f,_0x4eedca:0x1e8,_0x460bd2:0x20a,_0x3b3425:0x224},_0x41caed=_0x136b7f;this['_heat'][_0x41caed(_0x5546f0._0x52eb9b)]({'radius':this[_0x41caed(0x221)][_0x41caed(_0x5546f0._0x10b77a)]*this['style']['arcRadiusScale'],'blur':this['heatStyle']['blur']*this[_0x41caed(_0x5546f0._0x464839)][_0x41caed(_0x5546f0._0x4eedca)],'gradient':this['heatStyle']['gradientArc']||{0.25:'rgb(0,0,0)',0.55:'rgb(140,140,140)',0.85:'rgb(216,216,216)',0x1:'rgb(255,255,255)'}});const _0x372163=mars3d__namespace[_0x41caed(_0x5546f0._0x460bd2)]['copyCanvas'](this['_heat'][_0x41caed(0x21d)]['canvas']);return this['_heat']['configure'](this[_0x41caed(_0x5546f0._0x3b3425)]['heatStyle']),_0x372163;}['getPointData'](_0x43dcd5){const _0x4b90d6={_0x14b89a:0x1e5,_0x49c15c:0x20c,_0x3325ff:0x21d,_0x5b5f41:0x206},_0x2e0228=_0x136b7f,_0x393679=mars3d__namespace['LngLatPoint']['parse'](_0x43dcd5);if(!_0x393679)return{};const _0x52c660=mars3d__namespace['PointTrans'][_0x2e0228(0x1fa)]([_0x393679['lng'],_0x393679[_0x2e0228(0x21b)]]),_0x1837fc=this[_0x2e0228(_0x4b90d6._0x14b89a)],_0x51ff58=Math['round']((_0x52c660[0x0]-_0x1837fc['xmin'])/this[_0x2e0228(0x20c)]),_0x2138a5=Math['round']((_0x1837fc['ymax']-_0x52c660[0x1])/this[_0x2e0228(_0x4b90d6._0x49c15c)]),_0x8d7728=this['_heat']['getValueAt']({'x':_0x51ff58,'y':_0x2138a5}),_0x1c29d4=this['_heat'][_0x2e0228(_0x4b90d6._0x3325ff)]['ctx'][_0x2e0228(_0x4b90d6._0x5b5f41)](_0x51ff58-0x1,_0x2138a5-0x1,0x1,0x1)[_0x2e0228(0x22e)];return{'x':_0x51ff58,'y':_0x2138a5,'value':_0x8d7728,'color':'rgba('+_0x1c29d4[0x0]+','+_0x1c29d4[0x1]+','+_0x1c29d4[0x2]+','+_0x1c29d4[0x3]+')'};}}mars3d__namespace['LayerUtil']['register']('heat',HeatLayer),mars3d__namespace['layer']['HeatLayer']=HeatLayer,mars3d__namespace['h337']=h337__namespace;function getMercatorBounds(_0x25d7cd){const _0x330bb9=_0x136b7f,_0x4f7f0e=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x25d7cd['xmin'],_0x25d7cd['ymin']]),_0x5b3154=mars3d__namespace['PointTrans'][_0x330bb9(0x1fa)]([_0x25d7cd['xmax'],_0x25d7cd['ymax']]);return{'xmin':_0x4f7f0e[0x0],'ymin':_0x4f7f0e[0x1],'xmax':_0x5b3154[0x0],'ymax':_0x5b3154[0x1]};}function geLatLngBounds(_0x270f64){const _0x2ee1b2={_0x17ae3b:0x22b,_0x3ee3b6:0x22b,_0x3e15da:0x215},_0x229af1=_0x136b7f,_0x4ae434=mars3d__namespace['PointTrans'][_0x229af1(_0x2ee1b2._0x17ae3b)]([_0x270f64['xmin'],_0x270f64['ymin']]),_0x108663=mars3d__namespace['PointTrans'][_0x229af1(_0x2ee1b2._0x3ee3b6)]([_0x270f64[_0x229af1(_0x2ee1b2._0x3e15da)],_0x270f64['ymax']]);return{'xmin':_0x4ae434[0x0],'ymin':_0x4ae434[0x1],'xmax':_0x108663[0x0],'ymax':_0x108663[0x1]};}function _0x2409(_0x4815c8,_0x1e0089){const _0x31dc87=_0x31dc();return _0x2409=function(_0x2409a8,_0x55d77d){_0x2409a8=_0x2409a8-0x1e5;let _0x711137=_0x31dc87[_0x2409a8];return _0x711137;},_0x2409(_0x4815c8,_0x1e0089);}function getVertexShaderSource(_0x2f0bd5){return'in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'+_0x2f0bd5+';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a';}exports['HeatLayer']=HeatLayer,Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
