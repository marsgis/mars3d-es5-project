/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.3.9
 * 编译日期：2022-05-22 10:16:59
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';var _0x5da93e=_0x386a;(function(_0x822a6e,_0x3e2ac6){var _0x11c8d5=_0x386a,_0x1f9b73=_0x822a6e();while(!![]){try{var _0x244a0e=-parseInt(_0x11c8d5(0xa6))/0x1+-parseInt(_0x11c8d5(0xe1))/0x2*(parseInt(_0x11c8d5(0x100))/0x3)+parseInt(_0x11c8d5(0x117))/0x4*(parseInt(_0x11c8d5(0x10a))/0x5)+-parseInt(_0x11c8d5(0xc8))/0x6+-parseInt(_0x11c8d5(0xde))/0x7+parseInt(_0x11c8d5(0xb5))/0x8+-parseInt(_0x11c8d5(0x99))/0x9*(-parseInt(_0x11c8d5(0x11a))/0xa);if(_0x244a0e===_0x3e2ac6)break;else _0x1f9b73['push'](_0x1f9b73['shift']());}catch(_0x1dba2d){_0x1f9b73['push'](_0x1f9b73['shift']());}}}(_0x2a49,0x37185));function _interopNamespace(_0x1b8419){var _0x71e328=_0x386a;if(_0x1b8419&&_0x1b8419[_0x71e328(0x132)])return _0x1b8419;var _0x2a6a9a=Object[_0x71e328(0xae)](null);return _0x1b8419&&Object[_0x71e328(0xba)](_0x1b8419)['forEach'](function(_0xf684db){var _0x2a618a=_0x71e328;if(_0xf684db!=='default'){var _0x3e832a=Object['getOwnPropertyDescriptor'](_0x1b8419,_0xf684db);Object[_0x2a618a(0xfa)](_0x2a6a9a,_0xf684db,_0x3e832a[_0x2a618a(0x12e)]?_0x3e832a:{'enumerable':!![],'get':function(){return _0x1b8419[_0xf684db];}});}}),_0x2a6a9a[_0x71e328(0xa1)]=_0x1b8419,_0x2a6a9a;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337);function ownKeys(_0x4078b5,_0x4d7d52){var _0x4373fc=_0x386a,_0x21376d=Object[_0x4373fc(0xba)](_0x4078b5);if(Object[_0x4373fc(0xbe)]){var _0x251cd8=Object[_0x4373fc(0xbe)](_0x4078b5);_0x4d7d52&&(_0x251cd8=_0x251cd8[_0x4373fc(0xd5)](function(_0x19434a){var _0x10497c=_0x4373fc;return Object[_0x10497c(0xa9)](_0x4078b5,_0x19434a)[_0x10497c(0xca)];})),_0x21376d[_0x4373fc(0xc6)][_0x4373fc(0x135)](_0x21376d,_0x251cd8);}return _0x21376d;}function _objectSpread2(_0x39797d){var _0x38e957=_0x386a;for(var _0x3b96f0=0x1;_0x3b96f0<arguments['length'];_0x3b96f0++){var _0x566265=null!=arguments[_0x3b96f0]?arguments[_0x3b96f0]:{};_0x3b96f0%0x2?ownKeys(Object(_0x566265),!0x0)[_0x38e957(0xb3)](function(_0x4acfc6){_defineProperty(_0x39797d,_0x4acfc6,_0x566265[_0x4acfc6]);}):Object[_0x38e957(0xbb)]?Object[_0x38e957(0xfc)](_0x39797d,Object[_0x38e957(0xbb)](_0x566265)):ownKeys(Object(_0x566265))['forEach'](function(_0x38c0dc){var _0x2af59e=_0x38e957;Object[_0x2af59e(0xfa)](_0x39797d,_0x38c0dc,Object[_0x2af59e(0xa9)](_0x566265,_0x38c0dc));});}return _0x39797d;}function _classCallCheck(_0x791b88,_0x9cfa4e){if(!(_0x791b88 instanceof _0x9cfa4e))throw new TypeError('Cannot\x20call\x20a\x20class\x20as\x20a\x20function');}function _defineProperties(_0x34f9df,_0xd58764){var _0x35f0c5=_0x386a;for(var _0x4a7810=0x0;_0x4a7810<_0xd58764[_0x35f0c5(0x9f)];_0x4a7810++){var _0x234363=_0xd58764[_0x4a7810];_0x234363[_0x35f0c5(0xca)]=_0x234363[_0x35f0c5(0xca)]||![],_0x234363[_0x35f0c5(0xac)]=!![];if('value'in _0x234363)_0x234363[_0x35f0c5(0xad)]=!![];Object[_0x35f0c5(0xfa)](_0x34f9df,_0x234363['key'],_0x234363);}}function _createClass(_0xc934a8,_0x44508f,_0x143118){if(_0x44508f)_defineProperties(_0xc934a8['prototype'],_0x44508f);if(_0x143118)_defineProperties(_0xc934a8,_0x143118);return Object['defineProperty'](_0xc934a8,'prototype',{'writable':![]}),_0xc934a8;}function _defineProperty(_0x56a9d4,_0xa75d81,_0x3f7266){var _0x1ac16b=_0x386a;return _0xa75d81 in _0x56a9d4?Object[_0x1ac16b(0xfa)](_0x56a9d4,_0xa75d81,{'value':_0x3f7266,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x56a9d4[_0xa75d81]=_0x3f7266,_0x56a9d4;}function _inherits(_0x182e24,_0x976657){var _0x20f938=_0x386a;if(typeof _0x976657!=='function'&&_0x976657!==null)throw new TypeError(_0x20f938(0xc7));_0x182e24[_0x20f938(0x125)]=Object[_0x20f938(0xae)](_0x976657&&_0x976657[_0x20f938(0x125)],{'constructor':{'value':_0x182e24,'writable':!![],'configurable':!![]}}),Object[_0x20f938(0xfa)](_0x182e24,_0x20f938(0x125),{'writable':![]});if(_0x976657)_setPrototypeOf(_0x182e24,_0x976657);}function _getPrototypeOf(_0x5a30b8){var _0x39bdd4=_0x386a;return _getPrototypeOf=Object[_0x39bdd4(0xdf)]?Object[_0x39bdd4(0xa4)]:function _0x46a8c2(_0x553889){var _0x418e17=_0x39bdd4;return _0x553889[_0x418e17(0xed)]||Object[_0x418e17(0xa4)](_0x553889);},_getPrototypeOf(_0x5a30b8);}function _setPrototypeOf(_0x3a3648,_0x5243df){var _0x167032=_0x386a;return _setPrototypeOf=Object[_0x167032(0xdf)]||function _0x858e0e(_0x504d34,_0x31f96e){var _0x169bd3=_0x167032;return _0x504d34[_0x169bd3(0xed)]=_0x31f96e,_0x504d34;},_setPrototypeOf(_0x3a3648,_0x5243df);}function _isNativeReflectConstruct(){var _0x3a0e3c=_0x386a;if(typeof Reflect===_0x3a0e3c(0x11f)||!Reflect[_0x3a0e3c(0x139)])return![];if(Reflect[_0x3a0e3c(0x139)][_0x3a0e3c(0xc0)])return![];if(typeof Proxy==='function')return!![];try{return Boolean[_0x3a0e3c(0x125)][_0x3a0e3c(0x128)][_0x3a0e3c(0xcd)](Reflect[_0x3a0e3c(0x139)](Boolean,[],function(){})),!![];}catch(_0x2da25d){return![];}}function _assertThisInitialized(_0x7d1a11){var _0x3c6bae=_0x386a;if(_0x7d1a11===void 0x0)throw new ReferenceError(_0x3c6bae(0x12a));return _0x7d1a11;}function _possibleConstructorReturn(_0x2b6d35,_0x335a9f){var _0x29ac81=_0x386a;if(_0x335a9f&&(typeof _0x335a9f===_0x29ac81(0xf2)||typeof _0x335a9f===_0x29ac81(0xee)))return _0x335a9f;else{if(_0x335a9f!==void 0x0)throw new TypeError(_0x29ac81(0x106));}return _assertThisInitialized(_0x2b6d35);}function _createSuper(_0x2b30ed){var _0x21d38f=_isNativeReflectConstruct();return function _0x14d7dd(){var _0x2fbd74=_0x386a,_0x41a092=_getPrototypeOf(_0x2b30ed),_0x2c0e8a;if(_0x21d38f){var _0x43db7e=_getPrototypeOf(this)[_0x2fbd74(0xa0)];_0x2c0e8a=Reflect[_0x2fbd74(0x139)](_0x41a092,arguments,_0x43db7e);}else _0x2c0e8a=_0x41a092[_0x2fbd74(0x135)](this,arguments);return _possibleConstructorReturn(this,_0x2c0e8a);};}var HeatMaterial=_0x5da93e(0xbf);if(!h337__namespace[_0x5da93e(0xae)])throw new Error(_0x5da93e(0x113));var Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x5da93e(0xd4)][_0x5da93e(0xeb)],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:_0x5da93e(0xc2),0.6:_0x5da93e(0xf1),0.8:_0x5da93e(0x122),0.9:'red'}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium[_0x5da93e(0xf4)][_0x5da93e(0xb7)]},HeatLayer=function(_0x3b8e43){var _0x1f96f5=_0x5da93e;_inherits(_0x311eee,_0x3b8e43);var _0x4f47d3=_createSuper(_0x311eee);function _0x311eee(){var _0x57111a=_0x386a,_0x313d6a,_0x480c78=arguments[_0x57111a(0x9f)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x311eee),_0x313d6a=_0x4f47d3[_0x57111a(0xcd)](this,_0x480c78),_0x313d6a[_0x57111a(0x131)][_0x57111a(0xfb)]=Cesium[_0x57111a(0x102)](_0x313d6a[_0x57111a(0x131)][_0x57111a(0xfb)],document[_0x57111a(0xe4)][_0x57111a(0x110)]),_0x313d6a['options']['maxCanvasSize']=Math['min'](_0x313d6a[_0x57111a(0x131)][_0x57111a(0xfb)],0x1388),_0x313d6a[_0x57111a(0x131)][_0x57111a(0xd8)]=Cesium['defaultValue'](_0x313d6a[_0x57111a(0x131)]['minCanvasSize'],document[_0x57111a(0xe4)]['clientHeight']),_0x313d6a[_0x57111a(0x131)][_0x57111a(0xd8)]=Math[_0x57111a(0xf5)](_0x313d6a[_0x57111a(0x131)][_0x57111a(0xd8)],0x2bc),_0x313d6a['options']['heatStyle']=_objectSpread2(_objectSpread2({},DEF_HEATSTYLE),_0x313d6a[_0x57111a(0x131)]['heatStyle']||{}),_0x313d6a[_0x57111a(0x131)][_0x57111a(0x111)]=_objectSpread2(_objectSpread2({},DEF_STYLE),_0x313d6a[_0x57111a(0x131)]['style']||{}),_0x313d6a;}return _createClass(_0x311eee,[{'key':_0x1f96f5(0xd4),'get':function _0x229da1(){var _0x510723=_0x1f96f5;return this[_0x510723(0xea)];}},{'key':_0x1f96f5(0xcb),'get':function _0xa0371f(){var _0x4675a9=_0x1f96f5;return this[_0x4675a9(0x131)][_0x4675a9(0xcb)];},'set':function _0x39da20(_0x205280){var _0x4ba3d7=_0x1f96f5;this[_0x4ba3d7(0x131)][_0x4ba3d7(0xcb)]=mars3d__namespace['Util']['merge'](this[_0x4ba3d7(0x131)]['heatStyle'],_0x205280),this[_0x4ba3d7(0xb0)]&&(this['_heat'][_0x4ba3d7(0xe5)](this[_0x4ba3d7(0x131)][_0x4ba3d7(0xcb)]),this[_0x4ba3d7(0xf9)](!![]));}},{'key':'style','get':function _0x46c69e(){var _0x11c68f=_0x1f96f5;return this[_0x11c68f(0x131)][_0x11c68f(0x111)];},'set':function _0x4c988b(_0x4c953a){var _0x2ad7b7=_0x1f96f5;this[_0x2ad7b7(0x131)][_0x2ad7b7(0x111)]=mars3d__namespace[_0x2ad7b7(0xe3)][_0x2ad7b7(0xd1)](this[_0x2ad7b7(0x131)]['style'],_0x4c953a);}},{'key':'positions','get':function _0x1d6d07(){var _0x1a8b7b=_0x1f96f5;return this[_0x1a8b7b(0x11d)];},'set':function _0x4f2f7b(_0x1ce529){var _0x101040=_0x1f96f5;this[_0x101040(0xff)](_0x1ce529);}},{'key':'coordinates','get':function _0x3e1815(){var _0x2ee24a=_0x1f96f5,_0x3cf27b=[];return this['points'][_0x2ee24a(0xb3)](function(_0x44ff22){var _0x934eb1=_0x2ee24a;_0x3cf27b[_0x934eb1(0xc6)](_0x44ff22[_0x934eb1(0xaf)]());}),_0x3cf27b;}},{'key':_0x1f96f5(0x10e),'get':function _0x293f86(){return this['_rectangle'];}},{'key':'_setOptionsHook','value':function _0x11dd75(_0x39352a){var _0x3fc9e0=_0x1f96f5;_0x39352a['positions']&&(this[_0x3fc9e0(0xf3)]=_0x39352a[_0x3fc9e0(0xf3)]);}},{'key':'_mountedHook','value':function _0x8a4e26(){var _0x184fee=_0x1f96f5;this[_0x184fee(0xea)]=new mars3d__namespace['layer'][(_0x184fee(0xc9))]({'noLayerManage':!![]}),this[_0x184fee(0xea)][_0x184fee(0xb1)]=!![];}},{'key':_0x1f96f5(0x9a),'value':function _0xd95bbb(){var _0x29254d=_0x1f96f5;this[_0x29254d(0xaa)][_0x29254d(0xe7)](this[_0x29254d(0xea)]),this['options'][_0x29254d(0xf3)]&&(this[_0x29254d(0xf3)]=this[_0x29254d(0x131)][_0x29254d(0xf3)]),this[_0x29254d(0x131)][_0x29254d(0xe8)]&&this[_0x29254d(0x103)]();}},{'key':_0x1f96f5(0xa8),'value':function _0x551021(){var _0x438f4a=_0x1f96f5;this[_0x438f4a(0xcb)]['container']&&(mars3d__namespace[_0x438f4a(0xdb)][_0x438f4a(0x11e)](this[_0x438f4a(0xcb)][_0x438f4a(0xcc)]),delete this[_0x438f4a(0xcb)][_0x438f4a(0xcc)]),this[_0x438f4a(0xb2)](),this['_map']['removeLayer'](this['_layer']);}},{'key':_0x1f96f5(0xd7),'value':function _0x51e629(_0x493371,_0x425311){var _0x66aaf1=_0x1f96f5;this[_0x66aaf1(0x11d)]=this[_0x66aaf1(0x11d)]||[],this[_0x66aaf1(0x11d)][_0x66aaf1(0xc6)](_0x493371),this[_0x66aaf1(0xf9)](_0x425311);}},{'key':_0x1f96f5(0xff),'value':function _0xb4ccf7(_0x3dbed6,_0x50773c){var _0x5d9947=_0x1f96f5;this[_0x5d9947(0x11d)]=_0x3dbed6,this[_0x5d9947(0xf9)](_0x50773c);}},{'key':_0x1f96f5(0xb2),'value':function _0x1c5854(){var _0x386bff=_0x1f96f5;this[_0x386bff(0x11b)]&&(this[_0x386bff(0xea)][_0x386bff(0x129)](this['_graphic'],!![]),delete this[_0x386bff(0x11b)]);}},{'key':_0x1f96f5(0xf9),'value':function _0x37a984(_0x1cf945){var _0x47772f=_0x1f96f5;if(!this[_0x47772f(0x12d)]||!this['_map']||!this[_0x47772f(0xf3)]||this[_0x47772f(0xf3)][_0x47772f(0x9f)]===0x0)return this;var _0x101581=this[_0x47772f(0x101)]();return this[_0x47772f(0x111)][_0x47772f(0xdc)]?this['_graphic']&&_0x1cf945?(this[_0x47772f(0x11b)][_0x47772f(0x13a)][_0x47772f(0x107)]=_0x101581,this['_graphic']['uniforms']['bumpMap']=this[_0x47772f(0xd9)]()):this[_0x47772f(0xa5)](_0x101581):this[_0x47772f(0x11b)]&&_0x1cf945?this[_0x47772f(0x11b)][_0x47772f(0x13a)][_0x47772f(0x107)]=_0x101581:this[_0x47772f(0x118)](_0x101581),this;}},{'key':'_createGraphic','value':function _0x82a195(_0x2b8f20){var _0x5ec9c6=_0x1f96f5;this['clear'](),this[_0x5ec9c6(0x11b)]=new mars3d__namespace[(_0x5ec9c6(0x114))][(_0x5ec9c6(0xb9))](_objectSpread2(_objectSpread2({},this['options']),{},{'rectangle':this[_0x5ec9c6(0x105)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':new Cesium[(_0x5ec9c6(0xe0))]({'fabric':{'uniforms':{'image':_0x2b8f20},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})})),this[_0x5ec9c6(0xea)][_0x5ec9c6(0xf8)](this[_0x5ec9c6(0x11b)]);}},{'key':'_createArcGraphic','value':function _0x5dac1c(_0x212962){var _0x282474=_0x1f96f5;this['clear']();var _0x12f808=Cesium['RenderState'][_0x282474(0x9b)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x282474(0x112)][_0x282474(0xef)],'frontOperation':{'fail':Cesium[_0x282474(0xc5)][_0x282474(0xc1)],'zFail':Cesium[_0x282474(0xc5)][_0x282474(0xc1)],'zPass':Cesium[_0x282474(0xc5)][_0x282474(0xf0)]},'backFunction':Cesium[_0x282474(0x112)][_0x282474(0xef)],'backOperation':{'fail':Cesium[_0x282474(0xc5)]['KEEP'],'zFail':Cesium['StencilOperation'][_0x282474(0xc1)],'zPass':Cesium[_0x282474(0xc5)][_0x282474(0xf0)]},'reference':0x2,'mask':0x2},'blending':Cesium['BlendingState'][_0x282474(0x104)]}),_0x4abec9=Math[_0x282474(0x10d)](Cesium[_0x282474(0x102)](this['style'][_0x282474(0x10b)],this[_0x282474(0x10c)]*0.02))+0.1;this['style'][_0x282474(0x10b)]&&delete this['style'][_0x282474(0x10b)];var _0x36a40c=Cesium[_0x282474(0x102)](this[_0x282474(0x111)][_0x282474(0xda)],0x64),_0x25bab5=Math[_0x282474(0xf5)](this[_0x282474(0x105)][_0x282474(0x98)],this[_0x282474(0x105)][_0x282474(0x130)]);this[_0x282474(0x111)][_0x282474(0xce)]=_0x25bab5/=_0x36a40c,this['_graphic']=new mars3d__namespace[(_0x282474(0x114))][(_0x282474(0xb9))](_objectSpread2(_objectSpread2({},this[_0x282474(0x131)]),{},{'rectangle':this['_rectangle'],'appearance':new Cesium[(_0x282474(0xf4))]({'aboveGround':!![],'renderState':_0x12f808,'material':new Cesium['Material']({'fabric':{'uniforms':{'image':_0x212962,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium[(_0x282474(0x9d))](0x1,0x1,0x1,0.01),'bumpMap':this[_0x282474(0xd9)]()},'source':HeatMaterial},'translucent':!![]}),'vertexShaderSource':_0x282474(0x133)[_0x282474(0x12b)](_0x4abec9,_0x282474(0xa3)),'flat':!![]})})),this['_layer'][_0x282474(0xf8)](this[_0x282474(0x11b)]);}},{'key':_0x1f96f5(0xe2),'value':function _0xe1d045(_0x768cda){var _0x1d3a00=_0x1f96f5;return _0x768cda!==null&&_0x768cda!==void 0x0&&_0x768cda[_0x1d3a00(0xc3)]&&this[_0x1d3a00(0x105)]?mars3d__namespace[_0x1d3a00(0xdd)][_0x1d3a00(0x108)](this[_0x1d3a00(0x105)]):this['_rectangle'];}},{'key':_0x1f96f5(0x101),'value':function _0x2587e0(){var _0x4de099=_0x1f96f5,_0x102c64=this,_0x16cbba,_0x5adf75,_0x2f24e8=this['_positions'],_0x1024e9=[],_0x57eec0,_0x25467c,_0x3bf1d9,_0xfe50eb;_0x2f24e8['forEach'](function(_0x5ed4bc){var _0x4e3cc9=_0x386a,_0x39f019=mars3d__namespace[_0x4e3cc9(0x11c)][_0x4e3cc9(0xa7)](_0x5ed4bc);if(!_0x39f019)return;_0x39f019[_0x4e3cc9(0xab)]=_0x5ed4bc[_0x4e3cc9(0xab)]||0x1,!_0x102c64['options'][_0x4e3cc9(0x10e)]&&(_0x57eec0===undefined?(_0x57eec0=_0x39f019[_0x4e3cc9(0xfe)],_0x25467c=_0x39f019['lng'],_0x3bf1d9=_0x39f019[_0x4e3cc9(0x115)],_0xfe50eb=_0x39f019['lat']):(_0x57eec0=Math['min'](_0x57eec0,_0x39f019['lng']),_0x25467c=Math[_0x4e3cc9(0xf5)](_0x25467c,_0x39f019[_0x4e3cc9(0xfe)]),_0x3bf1d9=Math['min'](_0x3bf1d9,_0x39f019[_0x4e3cc9(0x115)]),_0xfe50eb=Math[_0x4e3cc9(0xf5)](_0xfe50eb,_0x39f019[_0x4e3cc9(0x115)]))),_0x1024e9[_0x4e3cc9(0xc6)](_0x39f019);});var _0x909ca5=this[_0x4de099(0x131)][_0x4de099(0x10e)]||{'xmin':_0x57eec0,'xmax':_0x25467c,'ymin':_0x3bf1d9,'ymax':_0xfe50eb},_0x2fbaf7=getMercatorBounds(_0x909ca5),_0x25e5a6=Math['abs'](_0x2fbaf7[_0x4de099(0xd0)]-_0x2fbaf7[_0x4de099(0x126)]),_0x2001c0=Math[_0x4de099(0x137)](_0x2fbaf7[_0x4de099(0xe6)]-_0x2fbaf7[_0x4de099(0x134)]),_0x47745c=Math['max'](_0x25e5a6,_0x2001c0),_0x3189f4=Math['min'](_0x25e5a6,_0x2001c0);this[_0x4de099(0x10c)]=_0x47745c;var _0x634025=0x1;if(_0x47745c>this['options']['maxCanvasSize'])_0x634025=_0x47745c/this[_0x4de099(0x131)][_0x4de099(0xfb)],_0x3189f4/_0x634025<this[_0x4de099(0x131)]['minCanvasSize']&&(_0x634025=_0x3189f4/this[_0x4de099(0x131)][_0x4de099(0xd8)]);else _0x3189f4<this[_0x4de099(0x131)][_0x4de099(0xd8)]&&(_0x634025=_0x3189f4/this[_0x4de099(0x131)][_0x4de099(0xd8)],_0x47745c/_0x634025>this['options']['maxCanvasSize']&&(_0x634025=_0x47745c/this[_0x4de099(0x131)]['maxCanvasSize']));var _0x9031d5=this[_0x4de099(0xcb)]['radius']*1.5,_0x4beae0=_0x25e5a6/_0x634025+_0x9031d5*0x2,_0x4e326a=_0x2001c0/_0x634025+_0x9031d5*0x2,_0x3afccd=_0x9031d5*_0x634025;_0x2fbaf7[_0x4de099(0x126)]-=_0x3afccd,_0x2fbaf7[_0x4de099(0x134)]-=_0x3afccd,_0x2fbaf7[_0x4de099(0xd0)]+=_0x3afccd,_0x2fbaf7['ymax']+=_0x3afccd,this[_0x4de099(0xf6)]=_0x634025,_0x909ca5=geLatLngBounds(_0x2fbaf7),this[_0x4de099(0x105)]=Cesium['Rectangle'][_0x4de099(0x97)](_0x909ca5[_0x4de099(0x126)],_0x909ca5['ymin'],_0x909ca5[_0x4de099(0xd0)],_0x909ca5[_0x4de099(0xe6)]);var _0x280146=(_0x16cbba=_0x1024e9[0x0][_0x4de099(0xab)])!==null&&_0x16cbba!==void 0x0?_0x16cbba:0x1,_0x20bdbb=(_0x5adf75=_0x1024e9[0x0][_0x4de099(0xab)])!==null&&_0x5adf75!==void 0x0?_0x5adf75:0x0,_0x17c9de=[];_0x1024e9[_0x4de099(0xb3)](function(_0x406b1f){var _0x558654=_0x4de099,_0x5729d8=mars3d__namespace[_0x558654(0x121)][_0x558654(0xbd)]([_0x406b1f[_0x558654(0xfe)],_0x406b1f['lat']]),_0x12cf08=_0x406b1f[_0x558654(0xab)]||0x1,_0x3e5ff7=Math[_0x558654(0x120)]((_0x5729d8[0x0]-_0x2fbaf7['xmin'])/_0x634025),_0x30a3ad=Math[_0x558654(0x120)]((_0x2fbaf7[_0x558654(0xe6)]-_0x5729d8[0x1])/_0x634025);_0x280146=Math[_0x558654(0xf5)](_0x280146,_0x12cf08),_0x20bdbb=Math[_0x558654(0xe9)](_0x20bdbb,_0x12cf08),_0x17c9de[_0x558654(0xc6)]({'x':_0x3e5ff7,'y':_0x30a3ad,'value':_0x12cf08});});var _0x129e07={'min':_0x20bdbb,'max':_0x280146,'data':_0x17c9de};this[_0x4de099(0x109)]=_0x129e07;(!this[_0x4de099(0xb6)]||_0x2fbaf7[_0x4de099(0x126)]!==this[_0x4de099(0xb6)][_0x4de099(0x126)]||_0x2fbaf7[_0x4de099(0x134)]!==this[_0x4de099(0xb6)]['ymin']||_0x2fbaf7['xmax']!==this['_last_mBounds'][_0x4de099(0xd0)]||_0x2fbaf7['ymax']!==this[_0x4de099(0xb6)]['ymax'])&&(this[_0x4de099(0xb6)]=_0x2fbaf7,!this[_0x4de099(0xcb)]['container']&&(this[_0x4de099(0xcb)]['container']=mars3d__namespace['DomUtil'][_0x4de099(0xae)](_0x4de099(0x12c),_0x4de099(0xa2),this[_0x4de099(0xaa)][_0x4de099(0xcc)])),this['heatStyle']['container'][_0x4de099(0x111)]['cssText']=_0x4de099(0xf7)[_0x4de099(0x12b)](_0x4beae0,_0x4de099(0x136))[_0x4de099(0x12b)](_0x4e326a,_0x4de099(0x123)),!this[_0x4de099(0xb0)]?this['_heat']=h337__namespace[_0x4de099(0xae)](this[_0x4de099(0xcb)]):this['_heat'][_0x4de099(0xe5)](this['heatStyle']));this[_0x4de099(0xb0)][_0x4de099(0xfd)](_0x129e07);var _0x215b5b=mars3d__namespace['DomUtil']['copyCanvas'](this['_heat'][_0x4de099(0xd3)][_0x4de099(0x9c)]);return _0x215b5b;}},{'key':'_getArcHeatCanvas','value':function _0x50f26e(){var _0x4d8b4f=_0x1f96f5;this[_0x4d8b4f(0xb0)][_0x4d8b4f(0xe5)]({'radius':this[_0x4d8b4f(0xcb)]['radius']*this['style'][_0x4d8b4f(0x124)],'blur':this['heatStyle'][_0x4d8b4f(0xb4)]*this['style']['arcBlurScale'],'gradient':this[_0x4d8b4f(0xcb)][_0x4d8b4f(0x9e)]||{0.25:'rgb(0,0,0)',0.55:_0x4d8b4f(0x116),0.85:_0x4d8b4f(0xcf),0x1:'rgb(255,255,255)'}});var _0x39292e=mars3d__namespace['DomUtil'][_0x4d8b4f(0xd6)](this[_0x4d8b4f(0xb0)]['_renderer']['canvas']);return this['_heat'][_0x4d8b4f(0xe5)](this[_0x4d8b4f(0x131)][_0x4d8b4f(0xcb)]),_0x39292e;}},{'key':_0x1f96f5(0x12f),'value':function _0x449b4f(_0x4eb2a1){var _0x26efaa=_0x1f96f5,_0xcdf443=mars3d__namespace['LngLatPoint'][_0x26efaa(0xa7)](_0x4eb2a1);if(!_0xcdf443)return{};var _0x1634b2=mars3d__namespace[_0x26efaa(0x121)][_0x26efaa(0xbd)]([_0xcdf443[_0x26efaa(0xfe)],_0xcdf443[_0x26efaa(0x115)]]),_0x55c9f9=this['_last_mBounds'],_0x300432=Math['round']((_0x1634b2[0x0]-_0x55c9f9['xmin'])/this[_0x26efaa(0xf6)]),_0x59c3ba=Math['round']((_0x55c9f9[_0x26efaa(0xe6)]-_0x1634b2[0x1])/this[_0x26efaa(0xf6)]),_0x1db5d4=this[_0x26efaa(0xb0)][_0x26efaa(0x138)]({'x':_0x300432,'y':_0x59c3ba}),_0xc3adde=this[_0x26efaa(0xb0)][_0x26efaa(0xd3)]['ctx'][_0x26efaa(0xbc)](_0x300432-0x1,_0x59c3ba-0x1,0x1,0x1)[_0x26efaa(0xd2)];return{'x':_0x300432,'y':_0x59c3ba,'value':_0x1db5d4,'color':_0x26efaa(0x10f)+_0xc3adde[0x0]+','+_0xc3adde[0x1]+','+_0xc3adde[0x2]+','+_0xc3adde[0x3]+')'};}}]),_0x311eee;}(BaseLayer);mars3d__namespace['layer']['HeatLayer']=HeatLayer,mars3d__namespace[_0x5da93e(0x119)][_0x5da93e(0xec)](_0x5da93e(0x127),HeatLayer);function getMercatorBounds(_0xb11836){var _0x39f312=_0x5da93e,_0x113f35=mars3d__namespace[_0x39f312(0x121)][_0x39f312(0xbd)]([_0xb11836[_0x39f312(0x126)],_0xb11836['ymin']]),_0x56da16=mars3d__namespace['PointTrans'][_0x39f312(0xbd)]([_0xb11836[_0x39f312(0xd0)],_0xb11836['ymax']]);return{'xmin':_0x113f35[0x0],'ymin':_0x113f35[0x1],'xmax':_0x56da16[0x0],'ymax':_0x56da16[0x1]};}function geLatLngBounds(_0x3a2830){var _0x47aa99=_0x5da93e,_0x51d53a=mars3d__namespace[_0x47aa99(0x121)][_0x47aa99(0xb8)]([_0x3a2830[_0x47aa99(0x126)],_0x3a2830['ymin']]),_0x98efcb=mars3d__namespace[_0x47aa99(0x121)]['mercator2lonlat']([_0x3a2830['xmax'],_0x3a2830[_0x47aa99(0xe6)]]);return{'xmin':_0x51d53a[0x0],'ymin':_0x51d53a[0x1],'xmax':_0x98efcb[0x0],'ymax':_0x98efcb[0x1]};}function _0x2a49(){var _0x5a99fc=['z2v0uhjVDg90ExbLt2y','x2nYzwf0zufYy0DYyxbOAwm','mZmZmJa3yNHvDhLb','CgfYC2u','x3jLBw92zwriB29R','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','x21HCa','DMfSDwu','y29UzMLNDxjHyMXL','D3jPDgfIBgu','y3jLyxrL','Dg9bCNjHEq','x2HLyxq','x21HCNmZzf9WCML2yxrL','y2XLyxi','zM9YrwfJAa','yMX1CG','mZq3nJK2u05kCu92','x2XHC3rFBujVDw5KCW','vKvsvevyx0zpuK1bva','BwvYy2f0B3iYBg9UBgf0','uMvJDgfUz2XLuhjPBwL0AxzL','A2v5CW','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9YCW','z2v0sw1Hz2veyxrH','Bg9UBgf0mM1LCMnHDg9Y','z2v0t3DUuhjVCgvYDhLtEw1IB2XZ','Dw5PzM9YBsbZyw1WBgvYmKqGAw1Hz2u7cMn6Bv9TyxrLCMLHBcbJEM1Fz2v0twf0zxjPywWOy3PTx21HDgvYAwfSsw5WDxqGBwf0zxjPywXjBNb1DcL7cIaGy3PTx21HDgvYAwfSig1HDgvYAwfSid0Gy3PTx2DLDerLzMf1BhrnyxrLCMLHBcHTyxrLCMLHBeLUChv0ktSkicb2zwmYihn0id0GBwf0zxjPywXjBNb1Dc5ZDdSkicb2zwm0ignVBg9Ysw1Hz2uGpsb0zxH0DxjLmKqOAw1Hz2uSC3qPoWOGigLMkgnVBg9Ysw1Hz2uUCMDIid09ihzLyZmOms4Wksb8FcbJB2XVCKLTywDLlNjNyIa9psb2zwmZkdaUmcKPEWOGicaGzgLZy2fYzdSkicb9cIaGBwf0zxjPywWUzgLMzNvZzsa9ignVBg9Ysw1Hz2uUCMDIoWOGig1HDgvYAwfSlMfSCgHHid0Gy29SB3jjBwfNzs5HoWOGihjLDhvYBIbTyxrLCMLHBdSkFqO','C2HHBq','s0vfua','yMX1zq','AxngB3jTyxq','sgvHDeXHEwvY','u3rLBMnPBe9WzxjHDgLVBG','ChvZAa','u3vWzxiGzxHWCMvZC2LVBIbTDxn0igvPDgHLCIbIzsbUDwXSig9YigeGzNvUy3rPB24','mJa5nZq4nNr5ENbzrW','r3jHCgHPy0XHEwvY','zw51BwvYywjSzq','AgvHDfn0EwXL','y29UDgfPBMvY','y2fSBa','z3jHBNvSyxjPDhK','CMDIkdiXnIWYmtySmJe2kq','Eg1HEa','BwvYz2u','zgf0yq','x3jLBMrLCMvY','Bgf5zxi','zMLSDgvY','y29WEunHBNzHCW','ywrKug9ZAxrPB24','BwLUq2fUDMfZu2L6zq','x2DLDefYy0HLyxrdyw52yxm','C3bSAxroDw0','rg9TvxrPBa','yxjJ','ug9SEvv0AwW','mZK3mdu0s0fhDhH6','C2v0uhjVDg90ExbLt2y','twf0zxjPywW','mJKXmJy2sxPIrevX','z2v0uMvJDgfUz2XL','vxrPBa','yM9KEq','y29UzMLNDxjL','Ew1HEa','ywrKtgf5zxi','zMX5vg8','BwLU','x2XHEwvY','qMfZzuXHEwvY','CMvNAxn0zxi','x19WCM90B19F','zNvUy3rPB24','quXxqvLt','uKvqtefdrq','z3jLzw4','B2jQzwn0','Cg9ZAxrPB25Z','rwXSAxbZB2LKu3vYzMfJzufWCgvHCMfUy2u','Bwf4','x3nJywXL','D2LKDgG6','ywrKr3jHCgHPyW','x3vWzgf0zvbVC2L0Aw9UC0HVB2S','zgvMAw5LuhjVCgvYDhK','Bwf4q2fUDMfZu2L6zq','zgvMAw5LuhjVCgvYDgLLCW','C2v0rgf0yq','Bg5N','C2v0ug9ZAxrPB25Z','m2DVzNDOsq','x2DLDeHLyxrdyw52yxm','zgvMyxvSDfzHBhvL','zMX5vg9cEufUAw1HDgLVBKvUza','quXqsefFqKXftKq','x3jLy3rHBMDSzq','rgvYAxzLzcbJB25ZDhj1y3rVCNmGBwf5ig9UBhKGCMv0DxjUig9IAMvJDcbVCIb1BMrLzMLUzwq','Aw1Hz2u','zM9YBwf0uMvJDgfUz2XL','x2XHC3rFAgvHDerHDge','ntuXnvrKve51BW','zgLMzKHLAwDODa','x21cB3vUzhnnyxG','zMXVB3i','CMvJDgfUz2XL','CMDIysG','y2XPzw50v2LKDgG','C3r5Bgu','u3rLBMnPBez1BMn0Aw9U','6k+35BYv5ywLigHLyxrTyxaUANmG5BQtia','z3jHCgHPyW','Bgf0','CMDIkde0mcWXndaSmtqWkq','ndG4rhvvwe9X','x2nYzwf0zuDYyxbOAwm','tgf5zxjvDgLS','nZC3mZiWD2Let1fA','x2DYyxbOAwm','tg5Ntgf0ug9PBNq','x3bVC2L0Aw9UCW','CMvTB3zL','Dw5KzwzPBMvK','CM91BMq','ug9PBNruCMfUCW','EwvSBg93','ChG7','yxjJuMfKAxvZu2nHBgu','ChjVDg90ExbL','Eg1PBG','AgvHDa','DMfSDwvpzG','CMvTB3zLr3jHCgHPyW','DgHPCYbOyxnUj3qGyMvLBIbPBML0AwfSAxnLzcaTihn1CgvYkcKGAgfZBID0igjLzw4Gy2fSBgvK','y29Uy2f0','zgL2','C2HVDW','z2v0','z2v0ug9PBNreyxrH','D2LKDgG','B3b0Aw9UCW','x19LC01VzhvSzq','yxr0CMLIDxrLihzLyZmGCg9ZAxrPB24ZreHPz2G7cIaGicaGicaGicbHDhrYAwj1DguGDMvJmYbWB3nPDgLVBJnetg93oWOGicaGicaGicaGyxr0CMLIDxrLihzLyZiGC3q7cIaGicaGicaGicbHDhrYAwj1DguGzMXVyxqGyMf0y2HjzdSkicaGicaGicaGihvUAwzVCM0GC2fTCgXLCJjeigj1BxbnyxbFmZSkicaGicaGicaGihzHCNLPBMCGDMvJmYb2x3bVC2L0Aw9Utum7cIaGicaGicaGicb2yxj5Aw5NihzLyZmGDL9WB3nPDgLVBKvdoWOGicaGicaGicaGDMfYEwLUzYb2zwmYihzFC3q7cGOGicaGicaGicaGDM9PzcbTywLUkcKkicaGicaGicaGihSkicaGicaGicaGicaGDMvJncbWid0Gy3PTx2nVBxb1DgvqB3nPDgLVBIGPoWOGicaGicaGicaGicb2x3bVC2L0Aw9UtumGpsbWB3nPDgLVBJnesgLNAcaRihbVC2L0Aw9Um0rmB3C7cIaGicaGicaGicaGihzFCg9ZAxrPB25fqYa9icHJEM1FBw9KzwXwAwv3uMvSyxrPDMvuB0v5zsaQihaPlNH5EJSkicaGicaGicaGicaGDL9ZDca9ihn0oWOGicaGicaGicaGicb2zwm0ignVBg9Yid0GDgv4DhvYztjekgj1BxbnyxbFmYWGDL9ZDcK7cIaGicaGicaGicaGigzSB2f0ignLBNrLCKj1BxaGpsbKAxn0yw5JzsH2zwmZkdaUmcKSy29SB3iUCMDIktSkicaGicaGicaGicaGDMvJmYb1CerPCIa9ig5VCM1HBgL6zsH2x3bVC2L0Aw9UtumUEhL6ktSkicaGicaGicaGicaGDMvJmYbKAxnqB3mGpsb1CerPCIaQignLBNrLCKj1BxaGkIa','Ew1PBG','yxbWBhK','ChG7AgvPz2H0oG','ywjZ','z2v0vMfSDwvbDa','y29UC3rYDwn0','Dw5PzM9YBxm','zNjVBurLz3jLzxm','AgvPz2H0','mta4zwLeDw1O','x2fKzgvKsg9VAW','zNjVBunHy2HL','y2fUDMfZ','q29SB3i','z3jHzgLLBNrbCMm','BgvUz3rO','y29UC3rYDwn0B3i','zgvMyxvSDa','BwfYCZnKlwHLyxrTyxaGBwfYCZnKlwHPzgveAxy','oWOGicaGicaGicaGicbWicS9DMvJncHKAxnqB3mSmc4WktSkicaGicaGicaGicaGz2XFug9ZAxrPB24GpsbJEM1FBw9KzwXwAwv3uhjVAMvJDgLVBLjLBgf0AxzLvg9fEwuGkIbWoWOGicaGicaGicaGFqOGicaGicaGia'];_0x2a49=function(){return _0x5a99fc;};return _0x2a49();}function _0x386a(_0xd4583,_0x7603bf){var _0x2a49ca=_0x2a49();return _0x386a=function(_0x386a49,_0x3a1ea1){_0x386a49=_0x386a49-0x97;var _0x3ffff1=_0x2a49ca[_0x386a49];if(_0x386a['PiZqFr']===undefined){var _0x3bfdf6=function(_0x1b8419){var _0x2a6a9a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0xf684db='',_0x3e832a='';for(var _0x4078b5=0x0,_0x4d7d52,_0x21376d,_0x251cd8=0x0;_0x21376d=_0x1b8419['charAt'](_0x251cd8++);~_0x21376d&&(_0x4d7d52=_0x4078b5%0x4?_0x4d7d52*0x40+_0x21376d:_0x21376d,_0x4078b5++%0x4)?_0xf684db+=String['fromCharCode'](0xff&_0x4d7d52>>(-0x2*_0x4078b5&0x6)):0x0){_0x21376d=_0x2a6a9a['indexOf'](_0x21376d);}for(var _0x19434a=0x0,_0x39797d=_0xf684db['length'];_0x19434a<_0x39797d;_0x19434a++){_0x3e832a+='%'+('00'+_0xf684db['charCodeAt'](_0x19434a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3e832a);};_0x386a['EDYKaK']=_0x3bfdf6,_0xd4583=arguments,_0x386a['PiZqFr']=!![];}var _0x2c0dd4=_0x2a49ca[0x0],_0x470390=_0x386a49+_0x2c0dd4,_0x2725c5=_0xd4583[_0x470390];return!_0x2725c5?(_0x3ffff1=_0x386a['EDYKaK'](_0x3ffff1),_0xd4583[_0x470390]=_0x3ffff1):_0x3ffff1=_0x2725c5,_0x3ffff1;},_0x386a(_0xd4583,_0x7603bf);}exports[_0x5da93e(0xc4)]=HeatLayer,Object['defineProperty'](exports,_0x5da93e(0x132),{'value':!![]});
}));
