/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.7.5
 * 编译日期：2024-02-25 10:20:07
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
	typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
	(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';var _0x4234c4=_0x151c;(function(_0x5194ba,_0x41a519){var _0x5047f9={_0x3973fb:0x182,_0x519533:0x153,_0xf6f7e7:0x160,_0x2f5dd3:0x198,_0x5f2238:0x165,_0x469e76:0x1ae},_0x45b509=_0x151c,_0x2c37bf=_0x5194ba();while(!![]){try{var _0x491df6=parseInt(_0x45b509(_0x5047f9._0x3973fb))/0x1*(parseInt(_0x45b509(0x157))/0x2)+parseInt(_0x45b509(_0x5047f9._0x519533))/0x3+-parseInt(_0x45b509(_0x5047f9._0xf6f7e7))/0x4+-parseInt(_0x45b509(_0x5047f9._0x2f5dd3))/0x5+-parseInt(_0x45b509(_0x5047f9._0x5f2238))/0x6*(-parseInt(_0x45b509(0x186))/0x7)+-parseInt(_0x45b509(_0x5047f9._0x469e76))/0x8*(-parseInt(_0x45b509(0x187))/0x9)+parseInt(_0x45b509(0x145))/0xa;if(_0x491df6===_0x41a519)break;else _0x2c37bf['push'](_0x2c37bf['shift']());}catch(_0x3d0362){_0x2c37bf['push'](_0x2c37bf['shift']());}}}(_0x5091,0x1d039));function _interopNamespace(_0xb412cc){var _0x59f897=_0x151c;if(_0xb412cc&&_0xb412cc['__esModule'])return _0xb412cc;var _0x1028d0=Object['create'](null);return _0xb412cc&&Object['keys'](_0xb412cc)[_0x59f897(0x17f)](function(_0x18b8c1){if(_0x18b8c1!=='default'){var _0x47c486=Object['getOwnPropertyDescriptor'](_0xb412cc,_0x18b8c1);Object['defineProperty'](_0x1028d0,_0x18b8c1,_0x47c486['get']?_0x47c486:{'enumerable':!![],'get':function(){return _0xb412cc[_0x18b8c1];}});}}),_0x1028d0['default']=_0xb412cc,_0x1028d0;}function _mergeNamespaces(_0x232798,_0x1c0854){var _0x3e82c4={_0x8c307e:0x19e},_0x459b44={_0x579980:0x1ce};return _0x1c0854['forEach'](function(_0xbf5054){var _0x24db26=_0x151c;_0xbf5054&&typeof _0xbf5054!=='string'&&!Array['isArray'](_0xbf5054)&&Object[_0x24db26(_0x3e82c4._0x8c307e)](_0xbf5054)['forEach'](function(_0x13ce62){var _0x509696=_0x24db26;if(_0x13ce62!==_0x509696(0x18d)&&!(_0x13ce62 in _0x232798)){var _0x332d34=Object[_0x509696(_0x459b44._0x579980)](_0xbf5054,_0x13ce62);Object['defineProperty'](_0x232798,_0x13ce62,_0x332d34['get']?_0x332d34:{'enumerable':!![],'get':function(){return _0xbf5054[_0x13ce62];}});}});}),_0x232798;}var mars3d__namespace=_interopNamespace(mars3d),commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!=='undefined'?window:typeof global!==_0x4234c4(0x161)?global:typeof self!==_0x4234c4(0x161)?self:{},heatmap$1={'exports':{}};(function(_0x2c5de8){var _0x2c6400={_0xe23396:0x18c,_0x383824:0x1aa},_0x427fe6={_0x6d6607:0x1cb},_0xfbe56d={_0x597375:0x178},_0x4109b8={_0x5d4b0b:0x167};(function(_0x59810f,_0x333b3f,_0x176c73){var _0x319716=_0x151c;_0x2c5de8[_0x319716(0x167)]?_0x2c5de8[_0x319716(_0x4109b8._0x5d4b0b)]=_0x176c73():_0x333b3f[_0x59810f]=_0x176c73();}('h337',commonjsGlobal,function(){var _0x2ae5c3={_0x2b30eb:0x149},_0x50a8ba={_0x329cc0:0x199},_0x2adf4f={_0x447e9e:0x172},_0x34ef08={_0x4a0609:0x1a2},_0x5c5dfa={_0x5a1c4b:0x15f,_0x44f310:0x15f,_0x4617b3:0x1ab,_0x126aa4:0x15f},_0x55fc71={_0x340f6b:0x1bf,_0x55d846:0x17d,_0x480a12:0x1ab,_0x9e927b:0x15f},_0x19c7ed={_0x35e024:0x189,_0x1cf39c:0x140,_0x3021aa:0x1b6},_0x2f77eb={_0x32470e:0x17b},_0x3356b6={_0x26d31f:0x1c6},_0x2ad42e={_0x3df3a3:0x147},_0x5bca21={_0x34a8a1:0x1c6,_0x3e23ab:0x1bd},_0x172e93={_0x1f17be:0x19c,_0x128d98:0x195,_0x3ad645:0x170},_0x190cfa={_0x37494e:0x1a5,_0x12033a:0x19a},_0x29431b={_0x17cb07:0x1ca,_0x264375:0x1bf},_0x911713=_0x151c,_0x19b3ff={'defaultRadius':0x28,'defaultRenderer':'canvas2d','defaultGradient':{0.25:'rgb(0,0,255)',0.55:_0x911713(_0x2c6400._0xe23396),0.85:_0x911713(_0x2c6400._0x383824),0x1:'rgb(255,0,0)'},'defaultMaxOpacity':0x1,'defaultMinOpacity':0x0,'defaultBlur':0.85,'defaultXField':'x','defaultYField':'y','defaultValueField':'value','plugins':{}},_0x28bdba=function _0xc93e97(){var _0x282592={_0x4eacdb:0x15b,_0x3bb8a1:0x191,_0x5312b1:0x1bf},_0x2d9b52={_0x9ebcf0:0x190,_0xa72bc7:0x1bf,_0xe2ecc9:0x191},_0xe55463=function _0x51f85c(_0x263005){var _0x1dae5d=_0x151c;this['_coordinator']={},this['_data']=[],this['_radi']=[],this['_min']=0xa,this['_max']=0x1,this['_xField']=_0x263005['xField']||_0x263005['defaultXField'],this[_0x1dae5d(0x190)]=_0x263005['yField']||_0x263005['defaultYField'],this['_valueField']=_0x263005['valueField']||_0x263005['defaultValueField'],_0x263005['radius']&&(this['_cfgRadius']=_0x263005['radius']);},_0x144654=_0x19b3ff['defaultRadius'];return _0xe55463['prototype']={'_organiseData':function(_0x487e7b,_0x2099a2){var _0x5e0c97=_0x151c,_0x5c6635=_0x487e7b[this['_xField']],_0x4f24c1=_0x487e7b[this[_0x5e0c97(_0x2d9b52._0x9ebcf0)]],_0x2c5776=this['_radi'],_0x343e37=this['_data'],_0x1eadef=this[_0x5e0c97(_0x2d9b52._0xa72bc7)],_0xdc7fce=this[_0x5e0c97(_0x2d9b52._0xe2ecc9)],_0x122882=_0x487e7b[this['_valueField']]||0x1,_0x1d2eda=_0x487e7b['radius']||this['_cfgRadius']||_0x144654;!_0x343e37[_0x5c6635]&&(_0x343e37[_0x5c6635]=[],_0x2c5776[_0x5c6635]=[]);!_0x343e37[_0x5c6635][_0x4f24c1]?(_0x343e37[_0x5c6635][_0x4f24c1]=_0x122882,_0x2c5776[_0x5c6635][_0x4f24c1]=_0x1d2eda):_0x343e37[_0x5c6635][_0x4f24c1]+=_0x122882;var _0xf5d64e=_0x343e37[_0x5c6635][_0x4f24c1];if(_0xf5d64e>_0x1eadef)return!_0x2099a2?this['_max']=_0xf5d64e:this['setDataMax'](_0xf5d64e),![];else return _0xf5d64e<_0xdc7fce?(!_0x2099a2?this['_min']=_0xf5d64e:this['setDataMin'](_0xf5d64e),![]):{'x':_0x5c6635,'y':_0x4f24c1,'value':_0x122882,'radius':_0x1d2eda,'min':_0xdc7fce,'max':_0x1eadef};},'_unOrganizeData':function(){var _0x20c91f=_0x151c,_0x3ec068=[],_0x5c5ecf=this['_data'],_0x160a2a=this[_0x20c91f(_0x282592._0x4eacdb)];for(var _0x4d141c in _0x5c5ecf){for(var _0x5b8a10 in _0x5c5ecf[_0x4d141c]){_0x3ec068[_0x20c91f(0x166)]({'x':_0x4d141c,'y':_0x5b8a10,'radius':_0x160a2a[_0x4d141c][_0x5b8a10],'value':_0x5c5ecf[_0x4d141c][_0x5b8a10]});}}return{'min':this[_0x20c91f(_0x282592._0x3bb8a1)],'max':this[_0x20c91f(_0x282592._0x5312b1)],'data':_0x3ec068};},'_onExtremaChange':function(){var _0x357496=_0x151c;this['_coordinator']['emit'](_0x357496(0x16b),{'min':this[_0x357496(0x191)],'max':this[_0x357496(0x1bf)]});},'addData':function(){var _0x1d7b5f=_0x151c;if(arguments[0x0]['length']>0x0){var _0x128c03=arguments[0x0],_0x2eaff4=_0x128c03['length'];while(_0x2eaff4--){this['addData']['call'](this,_0x128c03[_0x2eaff4]);}}else{var _0x18f3c8=this[_0x1d7b5f(_0x29431b._0x17cb07)](arguments[0x0],!![]);_0x18f3c8&&(this[_0x1d7b5f(0x152)][_0x1d7b5f(0x14c)]===0x0&&(this['_min']=this['_max']=_0x18f3c8['value']),this['_coordinator'][_0x1d7b5f(0x1a5)]('renderpartial',{'min':this['_min'],'max':this[_0x1d7b5f(_0x29431b._0x264375)],'data':[_0x18f3c8]}));}return this;},'setData':function(_0x40485d){var _0x1461c3=_0x151c,_0x442224=_0x40485d['data'],_0x506900=_0x442224['length'];this['_data']=[],this['_radi']=[];for(var _0x45f122=0x0;_0x45f122<_0x506900;_0x45f122++){this[_0x1461c3(0x1ca)](_0x442224[_0x45f122],![]);}return this['_max']=_0x40485d['max'],this[_0x1461c3(0x191)]=_0x40485d['min']||0x0,this['_onExtremaChange'](),this['_coordinator'][_0x1461c3(0x1a5)](_0x1461c3(0x172),this['_getInternalData']()),this;},'removeData':function(){},'setDataMax':function(_0x430adc){var _0x184931=_0x151c;return this['_max']=_0x430adc,this[_0x184931(0x1b3)](),this['_coordinator'][_0x184931(_0x190cfa._0x37494e)](_0x184931(0x172),this[_0x184931(_0x190cfa._0x12033a)]()),this;},'setDataMin':function(_0x2546b4){return this['_min']=_0x2546b4,this['_onExtremaChange'](),this['_coordinator']['emit']('renderall',this['_getInternalData']()),this;},'setCoordinator':function(_0x9c5c72){this['_coordinator']=_0x9c5c72;},'_getInternalData':function(){var _0x262e81=_0x151c;return{'max':this['_max'],'min':this['_min'],'data':this[_0x262e81(0x152)],'radi':this['_radi']};},'getData':function(){return this['_unOrganizeData']();}},_0xe55463;}(),_0x5473d1=function _0x3dfe03(){var _0x848288={_0x5b817d:0x162},_0x28f247={_0x25f7bf:0x148},_0x14eca0={_0x40b1a5:0x1c6,_0x1d7037:0x1c1,_0x675e92:0x18f},_0x2db136=_0x911713,_0x4b2e20=function(_0x24e82c){var _0x42b619=_0x151c,_0x5e05d1=_0x24e82c['gradient']||_0x24e82c['defaultGradient'],_0x6fe7c0=document[_0x42b619(_0x172e93._0x1f17be)](_0x42b619(0x1a2)),_0x2bf1fc=_0x6fe7c0['getContext']('2d',{'willReadFrequently':!![]});_0x6fe7c0['width']=0x100,_0x6fe7c0['height']=0x1;var _0x211df9=_0x2bf1fc[_0x42b619(_0x172e93._0x128d98)](0x0,0x0,0x100,0x1);for(var _0x215417 in _0x5e05d1){_0x211df9['addColorStop'](_0x215417,_0x5e05d1[_0x215417]);}return _0x2bf1fc['fillStyle']=_0x211df9,_0x2bf1fc['fillRect'](0x0,0x0,0x100,0x1),_0x2bf1fc[_0x42b619(0x14e)](0x0,0x0,0x100,0x1)[_0x42b619(_0x172e93._0x3ad645)];},_0x178dda=function(_0x387909,_0xce706e){var _0x27cb75=_0x151c,_0x21e2f9=document['createElement'](_0x27cb75(0x1a2)),_0x4722e=_0x21e2f9[_0x27cb75(0x14f)]('2d',{'willReadFrequently':!![]}),_0x29931e=_0x387909,_0x412495=_0x387909;_0x21e2f9[_0x27cb75(_0x14eca0._0x40b1a5)]=_0x21e2f9['height']=_0x387909*0x2;if(_0xce706e==0x1)_0x4722e[_0x27cb75(_0x14eca0._0x1d7037)](),_0x4722e['arc'](_0x29931e,_0x412495,_0x387909,0x0,0x2*Math['PI'],![]),_0x4722e['fillStyle']=_0x27cb75(_0x14eca0._0x675e92),_0x4722e['fill']();else{var _0x56321b=_0x4722e['createRadialGradient'](_0x29931e,_0x412495,_0x387909*_0xce706e,_0x29931e,_0x412495,_0x387909);_0x56321b['addColorStop'](0x0,'rgba(0,0,0,1)'),_0x56321b['addColorStop'](0x1,'rgba(0,0,0,0)'),_0x4722e['fillStyle']=_0x56321b,_0x4722e['fillRect'](0x0,0x0,0x2*_0x387909,0x2*_0x387909);}return _0x21e2f9;},_0x44deb0=function(_0x4bc5bd){var _0x5b1b87=_0x151c,_0x49737f=[],_0x4bc6fe=_0x4bc5bd['min'],_0x457023=_0x4bc5bd['max'],_0x17d031=_0x4bc5bd[_0x5b1b87(_0x28f247._0x25f7bf)],_0x4bc5bd=_0x4bc5bd[_0x5b1b87(0x170)],_0x3e16b5=Object['keys'](_0x4bc5bd),_0x396a25=_0x3e16b5['length'];while(_0x396a25--){var _0x53e2db=_0x3e16b5[_0x396a25],_0x4c30f6=Object['keys'](_0x4bc5bd[_0x53e2db]),_0x59b64a=_0x4c30f6['length'];while(_0x59b64a--){var _0x50daf4=_0x4c30f6[_0x59b64a],_0xf8cfc9=_0x4bc5bd[_0x53e2db][_0x50daf4],_0x5dfcaa=_0x17d031[_0x53e2db][_0x50daf4];_0x49737f['push']({'x':_0x53e2db,'y':_0x50daf4,'value':_0xf8cfc9,'radius':_0x5dfcaa});}}return{'min':_0x4bc6fe,'max':_0x457023,'data':_0x49737f};};function _0x424933(_0x11cd75){var _0xf76e34=_0x151c,_0x37438e=_0x11cd75['container'],_0xbfa8b9=this['shadowCanvas']=document['createElement']('canvas'),_0x184ab7=this['canvas']=_0x11cd75['canvas']||document['createElement']('canvas');this['_renderBoundaries']=[0x2710,0x2710,0x0,0x0];var _0x36085=getComputedStyle(_0x11cd75['container'])||{};_0x184ab7['className']='heatmap-canvas',this[_0xf76e34(0x1be)]=_0x184ab7['width']=_0xbfa8b9[_0xf76e34(_0x5bca21._0x34a8a1)]=_0x11cd75['width']||+_0x36085['width']['replace'](/px/,''),this['_height']=_0x184ab7[_0xf76e34(0x140)]=_0xbfa8b9['height']=_0x11cd75['height']||+_0x36085[_0xf76e34(0x140)]['replace'](/px/,''),this['shadowCtx']=_0xbfa8b9['getContext']('2d',{'willReadFrequently':!![]}),this['ctx']=_0x184ab7['getContext']('2d',{'willReadFrequently':!![]}),_0x184ab7['style']['cssText']=_0xbfa8b9[_0xf76e34(0x175)]['cssText']='position:absolute;left:0;top:0;',_0x37438e['style'][_0xf76e34(_0x5bca21._0x3e23ab)]='relative',_0x37438e['appendChild'](_0x184ab7),this['_palette']=_0x4b2e20(_0x11cd75),this['_templates']={},this['_setStyles'](_0x11cd75);}return _0x424933[_0x2db136(0x178)]={'renderPartial':function(_0x2fe425){var _0x1ed1c0=_0x2db136;_0x2fe425['data'][_0x1ed1c0(0x14c)]>0x0&&(this['_drawAlpha'](_0x2fe425),this['_colorize']());},'renderAll':function(_0x37fea9){var _0x4130b4=_0x2db136;this['_clear'](),_0x37fea9['data']['length']>0x0&&(this[_0x4130b4(_0x2ad42e._0x3df3a3)](_0x44deb0(_0x37fea9)),this['_colorize']());},'_updateGradient':function(_0x495218){var _0x37736e=_0x2db136;this[_0x37736e(_0x848288._0x5b817d)]=_0x4b2e20(_0x495218);},'updateConfig':function(_0x5138fc){_0x5138fc['gradient']&&this['_updateGradient'](_0x5138fc),this['_setStyles'](_0x5138fc);},'setDimensions':function(_0x5d3e1a,_0xa1d8d){var _0x59dd09=_0x2db136;this['_width']=_0x5d3e1a,this['_height']=_0xa1d8d,this['canvas'][_0x59dd09(_0x3356b6._0x26d31f)]=this[_0x59dd09(0x16a)]['width']=_0x5d3e1a,this['canvas']['height']=this['shadowCanvas']['height']=_0xa1d8d;},'_clear':function(){var _0x510f91=_0x2db136;this['shadowCtx']['clearRect'](0x0,0x0,this['_width'],this['_height']),this['ctx'][_0x510f91(_0x2f77eb._0x32470e)](0x0,0x0,this['_width'],this['_height']);},'_setStyles':function(_0x58e14c){var _0x149bc5=_0x2db136;this['_blur']=_0x58e14c['blur']==0x0?0x0:_0x58e14c['blur']||_0x58e14c[_0x149bc5(0x155)],_0x58e14c[_0x149bc5(_0x19c7ed._0x35e024)]&&(this['canvas']['style']['backgroundColor']=_0x58e14c['backgroundColor']),this['_width']=this[_0x149bc5(0x1a2)]['width']=this['shadowCanvas']['width']=_0x58e14c['width']||this['_width'],this[_0x149bc5(0x19f)]=this['canvas']['height']=this['shadowCanvas'][_0x149bc5(_0x19c7ed._0x1cf39c)]=_0x58e14c['height']||this['_height'],this['_opacity']=(_0x58e14c['opacity']||0x0)*0xff,this['_maxOpacity']=(_0x58e14c['maxOpacity']||_0x58e14c['defaultMaxOpacity'])*0xff,this['_minOpacity']=(_0x58e14c['minOpacity']||_0x58e14c[_0x149bc5(_0x19c7ed._0x3021aa)])*0xff,this['_useGradientOpacity']=!!_0x58e14c['useGradientOpacity'];},'_drawAlpha':function(_0x2bba0b){var _0x1c6d69=_0x2db136,_0x2264e0=this['_min']=_0x2bba0b['min'],_0xf98621=this[_0x1c6d69(_0x55fc71._0x340f6b)]=_0x2bba0b[_0x1c6d69(_0x55fc71._0x55d846)],_0x2bba0b=_0x2bba0b[_0x1c6d69(0x170)]||[],_0x503a8d=_0x2bba0b['length'],_0x58bdd5=0x1-this['_blur'];while(_0x503a8d--){var _0x7f7df0=_0x2bba0b[_0x503a8d],_0x3c71f5=_0x7f7df0['x'],_0x142836=_0x7f7df0['y'],_0x36b902=_0x7f7df0['radius'],_0x89a94c=Math['min'](_0x7f7df0['value'],_0xf98621),_0xfa27cf=_0x3c71f5-_0x36b902,_0x434d48=_0x142836-_0x36b902,_0x49eab2=this[_0x1c6d69(_0x55fc71._0x480a12)],_0x24639b;!this['_templates'][_0x36b902]?this['_templates'][_0x36b902]=_0x24639b=_0x178dda(_0x36b902,_0x58bdd5):_0x24639b=this['_templates'][_0x36b902];var _0x5a6fc4=(_0x89a94c-_0x2264e0)/(_0xf98621-_0x2264e0);_0x49eab2['globalAlpha']=_0x5a6fc4<0.01?0.01:_0x5a6fc4,_0x49eab2['drawImage'](_0x24639b,_0xfa27cf,_0x434d48),_0xfa27cf<this['_renderBoundaries'][0x0]&&(this['_renderBoundaries'][0x0]=_0xfa27cf),_0x434d48<this['_renderBoundaries'][0x1]&&(this['_renderBoundaries'][0x1]=_0x434d48),_0xfa27cf+0x2*_0x36b902>this[_0x1c6d69(_0x55fc71._0x9e927b)][0x2]&&(this['_renderBoundaries'][0x2]=_0xfa27cf+0x2*_0x36b902),_0x434d48+0x2*_0x36b902>this[_0x1c6d69(0x15f)][0x3]&&(this[_0x1c6d69(_0x55fc71._0x9e927b)][0x3]=_0x434d48+0x2*_0x36b902);}},'_colorize':function(){var _0x4b8720=_0x2db136,_0x30d4c0=this[_0x4b8720(_0x5c5dfa._0x5a1c4b)][0x0],_0x3c34c5=this[_0x4b8720(_0x5c5dfa._0x5a1c4b)][0x1],_0x1310ff=this['_renderBoundaries'][0x2]-_0x30d4c0,_0x5ec768=this[_0x4b8720(_0x5c5dfa._0x44f310)][0x3]-_0x3c34c5,_0x3fbbf5=this['_width'],_0x2e5eb7=this[_0x4b8720(0x19f)],_0x4a2d05=this['_opacity'],_0x2be1fb=this[_0x4b8720(0x1bc)],_0x48b951=this['_minOpacity'],_0x5892f0=this['_useGradientOpacity'];_0x30d4c0<0x0&&(_0x30d4c0=0x0);_0x3c34c5<0x0&&(_0x3c34c5=0x0);_0x30d4c0+_0x1310ff>_0x3fbbf5&&(_0x1310ff=_0x3fbbf5-_0x30d4c0);_0x3c34c5+_0x5ec768>_0x2e5eb7&&(_0x5ec768=_0x2e5eb7-_0x3c34c5);var _0x48fcd0=this[_0x4b8720(_0x5c5dfa._0x4617b3)]['getImageData'](_0x30d4c0,_0x3c34c5,_0x1310ff,_0x5ec768),_0x43912a=_0x48fcd0['data'],_0x10fbf5=_0x43912a['length'],_0x380e8e=this['_palette'];for(var _0x2a78e1=0x3;_0x2a78e1<_0x10fbf5;_0x2a78e1+=0x4){var _0x4d72c2=_0x43912a[_0x2a78e1],_0x198b1a=_0x4d72c2*0x4;if(!_0x198b1a)continue;var _0x215b1a;_0x4a2d05>0x0?_0x215b1a=_0x4a2d05:_0x4d72c2<_0x2be1fb?_0x4d72c2<_0x48b951?_0x215b1a=_0x48b951:_0x215b1a=_0x4d72c2:_0x215b1a=_0x2be1fb,_0x43912a[_0x2a78e1-0x3]=_0x380e8e[_0x198b1a],_0x43912a[_0x2a78e1-0x2]=_0x380e8e[_0x198b1a+0x1],_0x43912a[_0x2a78e1-0x1]=_0x380e8e[_0x198b1a+0x2],_0x43912a[_0x2a78e1]=_0x5892f0?_0x380e8e[_0x198b1a+0x3]:_0x215b1a;}this['ctx'][_0x4b8720(0x14a)](_0x48fcd0,_0x30d4c0,_0x3c34c5),this[_0x4b8720(_0x5c5dfa._0x126aa4)]=[0x3e8,0x3e8,0x0,0x0];},'getValueAt':function(_0x140bd6){var _0x3c817a=_0x2db136,_0x178a68,_0x4e1231=this['shadowCtx'],_0x5d3175=_0x4e1231['getImageData'](_0x140bd6['x'],_0x140bd6['y'],0x1,0x1),_0x642570=_0x5d3175[_0x3c817a(0x170)][0x3],_0x2c53b9=this['_max'],_0x3babbe=this['_min'];return _0x178a68=Math['abs'](_0x2c53b9-_0x3babbe)*(_0x642570/0xff)>>0x0,_0x178a68;},'getDataURL':function(){var _0xc67ba9=_0x2db136;return this[_0xc67ba9(_0x34ef08._0x4a0609)]['toDataURL']();}},_0x424933;}(),_0x2429c3=function _0x23325c(){var _0x37e5b5=![];return _0x19b3ff['defaultRenderer']==='canvas2d'&&(_0x37e5b5=_0x5473d1),_0x37e5b5;}(),_0x572812={'merge':function(){var _0x1c291b={},_0x2a4b1c=arguments['length'];for(var _0xf311a9=0x0;_0xf311a9<_0x2a4b1c;_0xf311a9++){var _0x4bfe30=arguments[_0xf311a9];for(var _0x31ef33 in _0x4bfe30){_0x1c291b[_0x31ef33]=_0x4bfe30[_0x31ef33];}}return _0x1c291b;}},_0x345e3b=function _0x334600(){var _0x35958b={_0x1c4e76:0x146},_0x1cfa2e={_0x218a74:0x1af,_0x5d7403:0x1af,_0x12a861:0x183,_0x4378dc:0x17e},_0x1b3464={_0x3459e:0x1a0},_0x93373={_0x43ec33:0x1af,_0x15fdaf:0x1b4,_0x31eeed:0x1af},_0x18f35a=_0x911713,_0x2895d4=function _0x2991c8(){function _0x260721(){var _0x5b8832=_0x151c;this[_0x5b8832(0x1c9)]={};}return _0x260721['prototype']={'on':function(_0x224992,_0x4b9c57,_0x239025){var _0x23e845=this['cStore'];!_0x23e845[_0x224992]&&(_0x23e845[_0x224992]=[]),_0x23e845[_0x224992]['push'](function(_0x8c6d9e){return _0x4b9c57['call'](_0x239025,_0x8c6d9e);});},'emit':function(_0x2c6045,_0x57b4d0){var _0x11bac2=this['cStore'];if(_0x11bac2[_0x2c6045]){var _0x3177c6=_0x11bac2[_0x2c6045]['length'];for(var _0xe4e13e=0x0;_0xe4e13e<_0x3177c6;_0xe4e13e++){var _0x322a78=_0x11bac2[_0x2c6045][_0xe4e13e];_0x322a78(_0x57b4d0);}}}},_0x260721;}(),_0x2d3acc=function(_0x574ee0){var _0x564957=_0x151c,_0x1c1ae8=_0x574ee0['_renderer'],_0x56f105=_0x574ee0['_coordinator'],_0xe94fba=_0x574ee0['_store'];_0x56f105['on']('renderpartial',_0x1c1ae8['renderPartial'],_0x1c1ae8),_0x56f105['on'](_0x564957(_0x2adf4f._0x447e9e),_0x1c1ae8[_0x564957(0x1b2)],_0x1c1ae8),_0x56f105['on'](_0x564957(0x16b),function(_0x11040f){var _0x5e6230=_0x564957;_0x574ee0[_0x5e6230(_0x93373._0x43ec33)][_0x5e6230(_0x93373._0x15fdaf)]&&_0x574ee0['_config'][_0x5e6230(0x1b4)]({'min':_0x11040f['min'],'max':_0x11040f[_0x5e6230(0x17d)],'gradient':_0x574ee0['_config']['gradient']||_0x574ee0[_0x5e6230(_0x93373._0x31eeed)]['defaultGradient']});}),_0xe94fba['setCoordinator'](_0x56f105);};function _0x504730(){var _0x59c37e=_0x151c,_0x47fabb=this['_config']=_0x572812['merge'](_0x19b3ff,arguments[0x0]||{});this['_coordinator']=new _0x2895d4();if(_0x47fabb['plugin']){var _0x20d7a7=_0x47fabb['plugin'];if(!_0x19b3ff['plugins'][_0x20d7a7])throw new Error('Plugin\x20\x27'+_0x20d7a7+'\x27\x20not\x20found.\x20Maybe\x20it\x20was\x20not\x20registered.');else{var _0x164d70=_0x19b3ff[_0x59c37e(0x1cb)][_0x20d7a7];this[_0x59c37e(_0x50a8ba._0x329cc0)]=new _0x164d70[(_0x59c37e(0x1c3))](_0x47fabb),this[_0x59c37e(0x17e)]=new _0x164d70['store'](_0x47fabb);}}else this[_0x59c37e(_0x50a8ba._0x329cc0)]=new _0x2429c3(_0x47fabb),this['_store']=new _0x28bdba(_0x47fabb);_0x2d3acc(this);}return _0x504730[_0x18f35a(_0xfbe56d._0x597375)]={'addData':function(){var _0x57ebb4=_0x18f35a;return this[_0x57ebb4(0x17e)][_0x57ebb4(0x17c)][_0x57ebb4(0x17a)](this['_store'],arguments),this;},'removeData':function(){var _0x5aaa29=_0x18f35a;return this['_store']['removeData']&&this[_0x5aaa29(0x17e)]['removeData']['apply'](this['_store'],arguments),this;},'setData':function(){var _0x57f931=_0x18f35a;return this['_store']['setData'][_0x57f931(0x17a)](this['_store'],arguments),this;},'setDataMax':function(){return this['_store']['setDataMax']['apply'](this['_store'],arguments),this;},'setDataMin':function(){var _0x1639b3=_0x18f35a;return this['_store'][_0x1639b3(_0x1b3464._0x3459e)]['apply'](this['_store'],arguments),this;},'configure':function(_0x2f451b){var _0x48e3e1=_0x18f35a;return this[_0x48e3e1(_0x1cfa2e._0x218a74)]=_0x572812['merge'](this[_0x48e3e1(_0x1cfa2e._0x5d7403)],_0x2f451b),this['_renderer'][_0x48e3e1(_0x1cfa2e._0x12a861)](this['_config']),this['_coordinator']['emit']('renderall',this[_0x48e3e1(_0x1cfa2e._0x4378dc)][_0x48e3e1(0x19a)]()),this;},'repaint':function(){var _0x17aaa1=_0x18f35a;return this[_0x17aaa1(0x143)]['emit'](_0x17aaa1(0x172),this['_store']['_getInternalData']()),this;},'getData':function(){return this['_store']['getData']();},'getDataURL':function(){var _0x53a787=_0x18f35a;return this['_renderer'][_0x53a787(_0x2ae5c3._0x2b30eb)]();},'getValueAt':function(_0x4a5aa5){var _0x7525ac=_0x18f35a;if(this['_store'][_0x7525ac(_0x35958b._0x1c4e76)])return this['_store']['getValueAt'](_0x4a5aa5);else return this[_0x7525ac(0x199)][_0x7525ac(0x146)]?this['_renderer']['getValueAt'](_0x4a5aa5):null;}},_0x504730;}(),_0x348ace={'create':function(_0xf4ce34){return new _0x345e3b(_0xf4ce34);},'register':function(_0x4c01a2,_0x283de3){var _0x41bf54=_0x911713;_0x19b3ff[_0x41bf54(_0x427fe6._0x6d6607)][_0x4c01a2]=_0x283de3;}};return _0x348ace;}));}(heatmap$1));function _0x151c(_0xcdaafb,_0x27cc39){var _0x509150=_0x5091();return _0x151c=function(_0x151c09,_0x532fdc){_0x151c09=_0x151c09-0x13c;var _0x281744=_0x509150[_0x151c09];return _0x281744;},_0x151c(_0xcdaafb,_0x27cc39);}var heatmap=heatmap$1[_0x4234c4(0x167)],h337=_mergeNamespaces({'__proto__':null,'default':heatmap},[heatmap$1['exports']]),HeatMaterial=_0x4234c4(0x142);if(!heatmap$1['exports'][_0x4234c4(0x177)])throw new Error('请引入\x20heatmap.js\x20库\x20');const Cesium=mars3d__namespace[_0x4234c4(0x14b)],BaseLayer=mars3d__namespace['layer'][_0x4234c4(0x1c0)],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:'blue',0.6:'green',0.8:_0x4234c4(0x1aa),0.9:'red'}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium['EllipsoidSurfaceAppearance']['VERTEX_FORMAT']};class HeatLayer extends BaseLayer{constructor(_0x48cdc5={}){var _0x4c1876={_0x30e1fa:0x175},_0x5e47b8=_0x4234c4;super(_0x48cdc5),this['options']['maxCanvasSize']=this['options']['maxCanvasSize']??document[_0x5e47b8(0x156)]['clientWidth'],this['options']['maxCanvasSize']=Math[_0x5e47b8(0x173)](this['options'][_0x5e47b8(0x194)],0x1388),this['options']['minCanvasSize']=this['options']['minCanvasSize']??document['body']['clientHeight'],this['options']['minCanvasSize']=Math['max'](this['options']['minCanvasSize'],0x2bc),this['options']['heatStyle']={...DEF_HEATSTYLE,...this[_0x5e47b8(0x1c4)]['heatStyle']},this['options']['style']={...DEF_STYLE,...this['options'][_0x5e47b8(_0x4c1876._0x30e1fa)]};}get['layer'](){var _0x3b489d=_0x4234c4;return this[_0x3b489d(0x168)];}get[_0x4234c4(0x179)](){return this['options']['heatStyle'];}set['heatStyle'](_0x3f3cae){var _0x5961c4={_0x1cd08e:0x19b,_0x783ed8:0x179,_0x1908a6:0x15a},_0x9d44ef=_0x4234c4;this['options'][_0x9d44ef(0x179)]=mars3d__namespace['Util'][_0x9d44ef(0x188)](this[_0x9d44ef(0x1c4)]['heatStyle'],_0x3f3cae),this[_0x9d44ef(_0x5961c4._0x1cd08e)]&&(this['_heat']['configure'](this['options'][_0x9d44ef(_0x5961c4._0x783ed8)]),this[_0x9d44ef(_0x5961c4._0x1908a6)](!![]));}get['style'](){var _0x4620dd={_0x90ddf0:0x1c4},_0x499917=_0x4234c4;return this[_0x499917(_0x4620dd._0x90ddf0)][_0x499917(0x175)];}set['style'](_0x280133){var _0x26aa96=_0x4234c4;this['options'][_0x26aa96(0x175)]=mars3d__namespace[_0x26aa96(0x1c8)]['merge'](this['options']['style'],_0x280133);}get[_0x4234c4(0x174)](){var _0x10e513={_0x467d2e:0x15c},_0x58c6d6=_0x4234c4;return this[_0x58c6d6(_0x10e513._0x467d2e)];}set['positions'](_0xddf68f){var _0x456dfc=_0x4234c4;this[_0x456dfc(0x1a1)](_0xddf68f);}get['coordinates'](){var _0x4f63fb=_0x4234c4;const _0x4af1b0=[];return this[_0x4f63fb(0x1a4)]['forEach'](_0x3db141=>{_0x4af1b0['push'](_0x3db141['toArray']());}),_0x4af1b0;}get[_0x4234c4(0x158)](){var _0x31d151={_0x4a7b16:0x154},_0x3e215b=_0x4234c4;return this[_0x3e215b(_0x31d151._0x4a7b16)];}['_setOptionsHook'](_0x46dba3,_0x1f99af){var _0x19d83e=_0x4234c4;_0x46dba3['positions']&&(this[_0x19d83e(0x174)]=_0x46dba3['positions']);}[_0x4234c4(0x13c)](){var _0x12a51b={_0x345488:0x16d},_0x1443fe=_0x4234c4;this['style']['type']==='image'?this['_layer']=new mars3d__namespace[(_0x1443fe(_0x12a51b._0x345488))]['ImageLayer']({'crs':_0x1443fe(0x159),'private':!![]}):this['_layer']=new mars3d__namespace['layer']['GraphicLayer']({'private':!![]});}[_0x4234c4(0x1c7)](){var _0x44eaaf={_0xd39a16:0x1ba,_0x4714c1:0x174,_0x5eca78:0x1c4},_0x5ef3c3=_0x4234c4;this[_0x5ef3c3(0x1ba)]['addLayer'](this[_0x5ef3c3(0x168)]),this['_container']=mars3d__namespace[_0x5ef3c3(0x1cc)][_0x5ef3c3(0x177)](_0x5ef3c3(0x1c5),'mars3d-heatmap\x20mars3d-hideDiv',this[_0x5ef3c3(_0x44eaaf._0xd39a16)]['container']),this['options'][_0x5ef3c3(0x174)]&&(this[_0x5ef3c3(_0x44eaaf._0x4714c1)]=this[_0x5ef3c3(_0x44eaaf._0x5eca78)]['positions']),this['options']['flyTo']&&this['flyToByAnimationEnd']();}['_removedHook'](){var _0x56ef0d={_0x18f1ca:0x1a3,_0x2417d2:0x1ba},_0x595381=_0x4234c4;this['_container']&&(mars3d__namespace['DomUtil']['remove'](this[_0x595381(_0x56ef0d._0x18f1ca)]),delete this['_container']),this['clear'](),this[_0x595381(_0x56ef0d._0x2417d2)][_0x595381(0x1a9)](this[_0x595381(0x168)]);}['addPosition'](_0x54ee8f,_0x16bb4c){var _0x24d7af={_0x419869:0x15c},_0x2c3272=_0x4234c4;this[_0x2c3272(0x15c)]=this[_0x2c3272(0x15c)]||[],this[_0x2c3272(_0x24d7af._0x419869)]['push'](_0x54ee8f),this['_updatePositionsHook'](_0x16bb4c);}['setPositions'](_0x223fd3,_0x1999ab){this['_positions']=_0x223fd3,this['_updatePositionsHook'](_0x1999ab);}['clear'](){var _0x596ed4=_0x4234c4;this['_graphic']&&(this['_layer']['removeGraphic'](this[_0x596ed4(0x1c2)],!![]),delete this['_graphic']),this['_graphic2']&&(this['_layer']['removeGraphic'](this[_0x596ed4(0x1ad)],!![]),delete this['_graphic2']);}['_updatePositionsHook'](_0x5f3705){var _0x5602ee={_0x4daf62:0x163,_0x3fc3dc:0x1c2,_0x1b33df:0x1cd},_0x46d470=_0x4234c4;if(!this[_0x46d470(0x1b9)]||!this['_map']||!this['positions']||this['positions'][_0x46d470(0x14c)]===0x0)return this;const _0x37a149=this['_getHeatCanvas']();if(this['style'][_0x46d470(_0x5602ee._0x4daf62)]==='image')this['_layer'][_0x46d470(0x1b1)]({'url':_0x37a149[_0x46d470(0x185)]('image/png',0x1),'rectangle':this['_rectangle'],'opacity':this['style']['opacity']});else this['style']['arc']?this[_0x46d470(0x1c2)]&&_0x5f3705?(this[_0x46d470(_0x5602ee._0x3fc3dc)]['uniforms']['image']=_0x37a149,this['_graphic'][_0x46d470(_0x5602ee._0x1b33df)]['bumpMap']=this['_getArcHeatCanvas'](),this['_graphic2']&&(this['_graphic2']['uniforms'][_0x46d470(0x169)]=_0x37a149,this['_graphic2']['uniforms']['bumpMap']=this[_0x46d470(0x1c2)]['uniforms']['bumpMap'])):this[_0x46d470(0x1b5)](_0x37a149):this['_graphic']&&_0x5f3705?this[_0x46d470(0x1c2)]['uniforms'][_0x46d470(0x169)]=_0x37a149:this[_0x46d470(0x1a6)](_0x37a149);return this;}['_createGraphic'](_0x106255){var _0x36b143={_0x223e97:0x154,_0xfb0eb2:0x1a8,_0x3b8aac:0x181},_0x5f47ac=_0x4234c4;this['clear'](),this['_graphic']=new mars3d__namespace[(_0x5f47ac(0x13e))]['RectanglePrimitive']({...this['options'],'rectangle':this[_0x5f47ac(_0x36b143._0x223e97)],'appearance':new Cesium[(_0x5f47ac(_0x36b143._0xfb0eb2))]({'material':mars3d__namespace['MaterialUtil'][_0x5f47ac(_0x36b143._0x3b8aac)](mars3d__namespace['MaterialType']['Image2'],{'image':_0x106255}),'flat':!![]})}),this['_layer']['addGraphic'](this['_graphic']);}['_createArcGraphic'](_0x577e03){var _0x3f2550={_0x33cf0e:0x141,_0x5d129e:0x15d,_0x346a2b:0x18a,_0x168d3b:0x175,_0x4967dc:0x175,_0x153614:0x168,_0x4aae38:0x175,_0x2afa52:0x1ad},_0x1b0f71=_0x4234c4;this['clear']();const _0x32fa51=Cesium[_0x1b0f71(0x13f)][_0x1b0f71(_0x3f2550._0x33cf0e)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x1b0f71(0x13d)][_0x1b0f71(_0x3f2550._0x5d129e)],'frontOperation':{'fail':Cesium['StencilOperation'][_0x1b0f71(0x192)],'zFail':Cesium[_0x1b0f71(_0x3f2550._0x346a2b)]['KEEP'],'zPass':Cesium['StencilOperation']['REPLACE']},'backFunction':Cesium['StencilFunction'][_0x1b0f71(_0x3f2550._0x5d129e)],'backOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium[_0x1b0f71(0x18a)]['KEEP'],'zPass':Cesium['StencilOperation']['REPLACE']},'reference':0x2,'mask':0x2},'blending':Cesium['BlendingState']['ALPHA_BLEND']}),_0x416f28=Math['floor'](this['style']['diffHeight']??this['_mBoundsMax']*0.02)+0.1;this['style']['diffHeight']&&delete this[_0x1b0f71(_0x3f2550._0x168d3b)]['diffHeight'];const _0x130bee=(this[_0x1b0f71(_0x3f2550._0x4967dc)]['splitNum'],0x64);let _0xfef5f7=Math['max'](this['_rectangle']['height'],this[_0x1b0f71(0x154)][_0x1b0f71(0x1c6)]);this['style']['granularity']=_0xfef5f7/=_0x130bee;const _0x2b1a0d=new Cesium['Material']({'fabric':{'uniforms':{'image':_0x577e03,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),_0x376411=this[_0x1b0f71(_0x3f2550._0x4967dc)][_0x1b0f71(0x1b0)]||0x1;this['_graphic']=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this[_0x1b0f71(0x154)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x32fa51,'material':_0x2b1a0d,'vertexShaderSource':getVertexShaderSource(_0x416f28*_0x376411)})}),this[_0x1b0f71(_0x3f2550._0x153614)][_0x1b0f71(0x164)](this['_graphic']),this[_0x1b0f71(_0x3f2550._0x4aae38)][_0x1b0f71(0x1b0)]===0x0&&(this[_0x1b0f71(_0x3f2550._0x2afa52)]=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x32fa51,'material':_0x2b1a0d,'vertexShaderSource':getVertexShaderSource(-_0x416f28)})}),this['_layer']['addGraphic'](this[_0x1b0f71(_0x3f2550._0x2afa52)]));}['getRectangle'](_0x15c35c){var _0x3013ab={_0xeab8de:0x154},_0x153568=_0x4234c4;return _0x15c35c!==null&&_0x15c35c!==void 0x0&&_0x15c35c[_0x153568(0x196)]&&this[_0x153568(_0x3013ab._0xeab8de)]?mars3d__namespace['PolyUtil']['formatRectangle'](this['_rectangle']):this[_0x153568(_0x3013ab._0xeab8de)];}['_getHeatCanvas'](){var _0x4e26c2={_0x5d931b:0x17f,_0x2bcd6a:0x1c4,_0x2f008c:0x158,_0x1dd44e:0x179,_0x3173cd:0x171,_0x3feb52:0x14d,_0x4056d0:0x154,_0x43acdd:0x14d,_0x3a51d9:0x19d,_0x12565a:0x173,_0x4f5f41:0x14d,_0x2cd830:0x18e,_0x358448:0x1ac},_0x2fcadc={_0x39f8a0:0x1bb,_0x4d2dfa:0x15e,_0x103cb4:0x193,_0x4ab5ad:0x17d},_0x4f0050={_0x5e3310:0x16e},_0x5d02ec=_0x4234c4;const _0x152bac=this[_0x5d02ec(0x15c)],_0x2fc8aa=[];let _0x3ade1d,_0x5f1d85,_0x5d33f1,_0x429a8c;_0x152bac[_0x5d02ec(_0x4e26c2._0x5d931b)](_0x3270d4=>{var _0x5c1e69=_0x5d02ec;const _0x5a9bcf=mars3d__namespace[_0x5c1e69(0x180)]['parse'](_0x3270d4);if(!_0x5a9bcf)return;_0x5a9bcf['value']=_0x3270d4['value']||0x1,!this[_0x5c1e69(0x1c4)]['rectangle']&&(_0x3ade1d===undefined?(_0x3ade1d=_0x5a9bcf['lng'],_0x5f1d85=_0x5a9bcf[_0x5c1e69(0x16e)],_0x5d33f1=_0x5a9bcf['lat'],_0x429a8c=_0x5a9bcf[_0x5c1e69(0x1bb)]):(_0x3ade1d=Math['min'](_0x3ade1d,_0x5a9bcf['lng']),_0x5f1d85=Math['max'](_0x5f1d85,_0x5a9bcf[_0x5c1e69(_0x4f0050._0x5e3310)]),_0x5d33f1=Math['min'](_0x5d33f1,_0x5a9bcf[_0x5c1e69(0x1bb)]),_0x429a8c=Math['max'](_0x429a8c,_0x5a9bcf['lat']))),_0x2fc8aa['push'](_0x5a9bcf);});_0x3ade1d===_0x5f1d85&&(_0x3ade1d-=0.000001,_0x5f1d85+=0.000001);_0x5d33f1===_0x429a8c&&(_0x5d33f1-=0.000001,_0x429a8c+=0.000001);let _0x375d97=this[_0x5d02ec(_0x4e26c2._0x2bcd6a)][_0x5d02ec(_0x4e26c2._0x2f008c)]||{'xmin':_0x3ade1d,'xmax':_0x5f1d85,'ymin':_0x5d33f1,'ymax':_0x429a8c};const _0x56010a=getMercatorBounds(_0x375d97),_0x1dc83a=Math['abs'](_0x56010a['xmax']-_0x56010a['xmin']),_0x35aea1=Math['abs'](_0x56010a[_0x5d02ec(0x193)]-_0x56010a[_0x5d02ec(0x144)]),_0x4be4d0=Math['max'](_0x1dc83a,_0x35aea1),_0x3a22dd=Math['min'](_0x1dc83a,_0x35aea1);this['_mBoundsMax']=_0x4be4d0;let _0x308308=0x1;if(_0x4be4d0>this[_0x5d02ec(0x1c4)]['maxCanvasSize'])_0x308308=_0x4be4d0/this['options']['maxCanvasSize'],_0x3a22dd/_0x308308<this['options']['minCanvasSize']&&(_0x308308=_0x3a22dd/this['options']['minCanvasSize']);else _0x3a22dd<this['options'][_0x5d02ec(0x176)]&&(_0x308308=_0x3a22dd/this['options']['minCanvasSize'],_0x4be4d0/_0x308308>this['options']['maxCanvasSize']&&(_0x308308=_0x4be4d0/this['options'][_0x5d02ec(0x194)]));const _0x79be96=this[_0x5d02ec(_0x4e26c2._0x1dd44e)][_0x5d02ec(_0x4e26c2._0x3173cd)]*1.5,_0x2d5748=_0x1dc83a/_0x308308+_0x79be96*0x2,_0x26155a=_0x35aea1/_0x308308+_0x79be96*0x2,_0x375234=_0x79be96*_0x308308;_0x56010a['xmin']-=_0x375234,_0x56010a['ymin']-=_0x375234,_0x56010a['xmax']+=_0x375234,_0x56010a['ymax']+=_0x375234,_0x56010a[_0x5d02ec(_0x4e26c2._0x3feb52)]=Math['max'](_0x56010a['xmin'],-20037508.34),_0x56010a['xmax']=Math['min'](_0x56010a['xmax'],20037508.34),_0x56010a['ymin']=Math['max'](_0x56010a[_0x5d02ec(0x144)],-20037508.34),_0x56010a['ymax']=Math['min'](_0x56010a['ymax'],20037508.34),this['_scale']=_0x308308,_0x375d97=geLatLngBounds(_0x56010a),this[_0x5d02ec(_0x4e26c2._0x4056d0)]=Cesium['Rectangle']['fromDegrees'](_0x375d97[_0x5d02ec(_0x4e26c2._0x43acdd)],_0x375d97['ymin'],_0x375d97[_0x5d02ec(_0x4e26c2._0x3a51d9)],_0x375d97['ymax']);let _0x2b47da=_0x2fc8aa[0x0]['value']??0x1,_0x13eea5=_0x2fc8aa[0x0]['value']??0x0;const _0x1bef29=[];_0x2fc8aa['forEach'](_0x2d7299=>{var _0x23080a=_0x5d02ec;const _0x1e5d27=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x2d7299['lng'],_0x2d7299[_0x23080a(_0x2fcadc._0x39f8a0)]]),_0x3dfc62=_0x2d7299[_0x23080a(_0x2fcadc._0x4d2dfa)]||0x1,_0x30e263=Math['round']((_0x1e5d27[0x0]-_0x56010a['xmin'])/_0x308308),_0x326b71=Math['round']((_0x56010a[_0x23080a(_0x2fcadc._0x103cb4)]-_0x1e5d27[0x1])/_0x308308);_0x2b47da=Math[_0x23080a(_0x2fcadc._0x4ab5ad)](_0x2b47da,_0x3dfc62),_0x13eea5=Math['min'](_0x13eea5,_0x3dfc62),_0x1bef29['push']({'x':_0x30e263,'y':_0x326b71,'value':_0x3dfc62});});const _0x49f17a={'min':this[_0x5d02ec(0x1c4)][_0x5d02ec(_0x4e26c2._0x12565a)]??_0x13eea5,'max':this['options'][_0x5d02ec(0x17d)]??_0x2b47da,'data':_0x1bef29};this['_last_heatData']=_0x49f17a;if(!this['_last_mBounds']||_0x56010a[_0x5d02ec(_0x4e26c2._0x4f5f41)]!==this['_last_mBounds']['xmin']||_0x56010a['ymin']!==this[_0x5d02ec(_0x4e26c2._0x2cd830)]['ymin']||_0x56010a['xmax']!==this[_0x5d02ec(_0x4e26c2._0x2cd830)]['xmax']||_0x56010a['ymax']!==this['_last_mBounds'][_0x5d02ec(0x193)]){this[_0x5d02ec(0x18e)]=_0x56010a,this['_container']['style']['cssText']='width:'+_0x2d5748+_0x5d02ec(_0x4e26c2._0x358448)+_0x26155a+'px;';const _0x516821={...this['heatStyle'],'container':this['_container']};!this['_heat']?this['_heat']=heatmap$1['exports']['create'](_0x516821):this['_heat']['configure'](_0x516821);}this[_0x5d02ec(0x19b)]['setData'](_0x49f17a);const _0x535e90=mars3d__namespace['DomUtil']['copyCanvas'](this['_heat']['_renderer']['canvas']);return _0x535e90;}['_getArcHeatCanvas'](){var _0xe6a937={_0x99e62:0x1b7,_0x50cf10:0x179,_0x4e486e:0x18b,_0x2cfa1c:0x19b},_0x29c07b=_0x4234c4;this['_heat']['configure']({'radius':this['heatStyle'][_0x29c07b(0x171)]*this['style']['arcRadiusScale'],'blur':this['heatStyle'][_0x29c07b(_0xe6a937._0x99e62)]*this['style']['arcBlurScale'],'gradient':this[_0x29c07b(_0xe6a937._0x50cf10)][_0x29c07b(_0xe6a937._0x4e486e)]||{0.25:'rgb(0,0,0)',0.55:'rgb(140,140,140)',0.85:'rgb(216,216,216)',0x1:'rgb(255,255,255)'}});const _0x2f7044=mars3d__namespace['DomUtil']['copyCanvas'](this['_heat']['_renderer']['canvas']);return this[_0x29c07b(_0xe6a937._0x2cfa1c)]['configure'](this['options']['heatStyle']),_0x2f7044;}[_0x4234c4(0x184)](_0x27489a){var _0x30cf34={_0x203c7a:0x14e},_0x58c04a=_0x4234c4;const _0x15cd5c=mars3d__namespace['LngLatPoint']['parse'](_0x27489a);if(!_0x15cd5c)return{};const _0x48ac3c=mars3d__namespace['PointTrans'][_0x58c04a(0x151)]([_0x15cd5c['lng'],_0x15cd5c['lat']]),_0x57167b=this['_last_mBounds'],_0x416ad4=Math['round']((_0x48ac3c[0x0]-_0x57167b['xmin'])/this['_scale']),_0x1d7c6c=Math['round']((_0x57167b['ymax']-_0x48ac3c[0x1])/this['_scale']),_0x162c5f=this[_0x58c04a(0x19b)]['getValueAt']({'x':_0x416ad4,'y':_0x1d7c6c}),_0x1a1e4c=this['_heat']['_renderer']['ctx'][_0x58c04a(_0x30cf34._0x203c7a)](_0x416ad4-0x1,_0x1d7c6c-0x1,0x1,0x1)['data'];return{'x':_0x416ad4,'y':_0x1d7c6c,'value':_0x162c5f,'color':'rgba('+_0x1a1e4c[0x0]+','+_0x1a1e4c[0x1]+','+_0x1a1e4c[0x2]+','+_0x1a1e4c[0x3]+')'};}}mars3d__namespace['LayerUtil'][_0x4234c4(0x197)]('heat',HeatLayer),mars3d__namespace['layer']['HeatLayer']=HeatLayer,mars3d__namespace['h337']=h337;function getMercatorBounds(_0x534bc9){var _0x5f1d36={_0x8c9c2:0x151,_0x5c60dc:0x151},_0x1a9e06=_0x4234c4;const _0x108c5a=mars3d__namespace['PointTrans'][_0x1a9e06(_0x5f1d36._0x8c9c2)]([_0x534bc9[_0x1a9e06(0x14d)],_0x534bc9['ymin']]),_0x5bf272=mars3d__namespace['PointTrans'][_0x1a9e06(_0x5f1d36._0x5c60dc)]([_0x534bc9['xmax'],_0x534bc9['ymax']]);return{'xmin':_0x108c5a[0x0],'ymin':_0x108c5a[0x1],'xmax':_0x5bf272[0x0],'ymax':_0x5bf272[0x1]};}function geLatLngBounds(_0x39629c){var _0x3c1ace={_0x502eaf:0x150},_0x5a53f3=_0x4234c4;const _0x41a919=mars3d__namespace['PointTrans'][_0x5a53f3(0x150)]([_0x39629c[_0x5a53f3(0x14d)],_0x39629c['ymin']]),_0x215ec9=mars3d__namespace['PointTrans'][_0x5a53f3(_0x3c1ace._0x502eaf)]([_0x39629c['xmax'],_0x39629c['ymax']]);return{'xmin':_0x41a919[0x0],'ymin':_0x41a919[0x1],'xmax':_0x215ec9[0x0],'ymax':_0x215ec9[0x1]};}function getVertexShaderSource(_0x4f9ba5){var _0x24977b=_0x4234c4;return _0x24977b(0x1a7)+_0x4f9ba5+';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a';}exports[_0x4234c4(0x16c)]=HeatLayer,Object[_0x4234c4(0x16f)](exports,_0x4234c4(0x1b8),{'value':!![]});function _0x5091(){var _0x350884=['rgba(0,0,0,1)','_yField','_min','KEEP','ymax','maxCanvasSize','createLinearGradient','isFormat','register','977980VUNomt','_renderer','_getInternalData','_heat','createElement','xmax','keys','_height','setDataMin','setPositions','canvas','_container','points','emit','_createGraphic','in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20','EllipsoidSurfaceAppearance','removeLayer','yellow','shadowCtx','px;height:','_graphic2','241728MHBZfK','_config','arcDirection','setOptions','renderAll','_onExtremaChange','onExtremaChange','_createArcGraphic','defaultMinOpacity','blur','__esModule','show','_map','lat','_maxOpacity','position','_width','_max','BaseLayer','beginPath','_graphic','renderer','options','div','width','_addedHook','Util','cStore','_organiseData','plugins','DomUtil','uniforms','getOwnPropertyDescriptor','_mountedHook','StencilFunction','graphic','RenderState','height','fromCache','uniform\x20sampler2D\x20image;\x0a\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x20{\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture(image,\x20st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0))\x20{\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a','_coordinator','ymin','861880OEpfjU','getValueAt','_drawAlpha','radi','getDataURL','putImageData','Cesium','length','xmin','getImageData','getContext','mercator2lonlat','lonlat2mercator','_data','595563RJTloi','_rectangle','defaultBlur','body','2dgpHNQ','rectangle','EPSG:3857','_updatePositionsHook','_radi','_positions','ALWAYS','value','_renderBoundaries','468656Aukpkq','undefined','_palette','type','addGraphic','6ELhPeX','push','exports','_layer','image','shadowCanvas','extremachange','HeatLayer','layer','lng','defineProperty','data','radius','renderall','min','positions','style','minCanvasSize','create','prototype','heatStyle','apply','clearRect','addData','max','_store','forEach','LngLatPoint','createMaterial','48911QYZDZT','updateConfig','getPointData','toDataURL','474355BqwXCi','9roIEfA','merge','backgroundColor','StencilOperation','gradientArc','rgb(0,255,0)','default','_last_mBounds'];_0x5091=function(){return _0x350884;};return _0x5091();}
}));
